// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.45/esri/copyright.txt for details.
// See https://www.arcgis.com/home/copyright.txt for further details.
//>>built
/*
 @esri/arcgis-html-sanitizer - v2.9.0-next.1 - Tue Oct 19 2021 10:19:42 GMT-0400 (Eastern Daylight Time)
 Copyright (c) 2021 - Environmental Systems Research Institute, Inc.
 Apache-2.0

 js-xss
 Copyright (c) 2012-2017 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 http://ucdok.com
 MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details

 Lodash/isPlainObject
 Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 Calcite Web - Calcite Design Components in CSS, JS and HTML
 @version v1.2.5
 @license Apache-2.0
 @copyright 2018 Esri
 @link https://github.com/Esri/calcite-web
 @overview es6-promise - a tiny implementation of Promises/A+.
 @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 @license   Licensed under MIT license
            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 @version   v4.2.8+1e68dce6
*/
require({cache:{"tslib/tslib":function(){var f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E,C,z,w,A,G,F,H;(function(J){function K(P,I){P!==Q&&("function"===typeof Object.create?Object.defineProperty(P,"__esModule",{value:!0}):P.__esModule=!0);return function(N,L){return P[N]=I?I(N,L):L}}var Q="object"===typeof global?global:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(P){J(K(Q,K(P)))}):"object"===typeof module&&
"object"===typeof module.exports?J(K(Q,K(module.exports))):J(K(Q))})(function(J){var K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,I){P.__proto__=I}||function(P,I){for(var N in I)Object.prototype.hasOwnProperty.call(I,N)&&(P[N]=I[N])};f=function(P,I){function N(){this.constructor=P}if("function"!==typeof I&&null!==I)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");K(P,I);P.prototype=null===I?Object.create(I):(N.prototype=I.prototype,new N)};
B=Object.assign||function(P){for(var I,N=1,L=arguments.length;N<L;N++){I=arguments[N];for(var W in I)Object.prototype.hasOwnProperty.call(I,W)&&(P[W]=I[W])}return P};l=function(P,I){var N={},L;for(L in P)Object.prototype.hasOwnProperty.call(P,L)&&0>I.indexOf(L)&&(N[L]=P[L]);if(null!=P&&"function"===typeof Object.getOwnPropertySymbols){var W=0;for(L=Object.getOwnPropertySymbols(P);W<L.length;W++)0>I.indexOf(L[W])&&Object.prototype.propertyIsEnumerable.call(P,L[W])&&(N[L[W]]=P[L[W]])}return N};d=function(P,
I,N,L){var W=arguments.length,Z=3>W?I:null===L?L=Object.getOwnPropertyDescriptor(I,N):L,aa;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)Z=Reflect.decorate(P,I,N,L);else for(var ia=P.length-1;0<=ia;ia--)if(aa=P[ia])Z=(3>W?aa(Z):3<W?aa(I,N,Z):aa(I,N))||Z;return 3<W&&Z&&Object.defineProperty(I,N,Z),Z};c=function(P,I){return function(N,L){I(N,L,P)}};u=function(P,I,N,L,W,Z){function aa(ha){if(void 0!==ha&&"function"!==typeof ha)throw new TypeError("Function expected");return ha}var ia=
L.kind,R="getter"===ia?"get":"setter"===ia?"set":"value";P=!I&&P?L["static"]?P:P.prototype:null;I=I||(P?Object.getOwnPropertyDescriptor(P,L.name):{});for(var S,M=!1,X=N.length-1;0<=X;X--){S={};for(var fa in L)S[fa]="access"===fa?{}:L[fa];for(fa in L.access)S.access[fa]=L.access[fa];S.addInitializer=function(ha){if(M)throw new TypeError("Cannot add initializers after decoration has completed");Z.push(aa(ha||null))};var ea=(0,N[X])("accessor"===ia?{get:I.get,set:I.set}:I[R],S);if("accessor"===ia){if(void 0!==
ea){if(null===ea||"object"!==typeof ea)throw new TypeError("Object expected");if(S=aa(ea.get))I.get=S;if(S=aa(ea.set))I.set=S;(S=aa(ea.init))&&W.push(S)}}else if(S=aa(ea))"field"===ia?W.push(S):I[R]=S}P&&Object.defineProperty(P,L.name,I);M=!0};t=function(P,I,N){for(var L=2<arguments.length,W=0;W<I.length;W++)N=L?I[W].call(P,N):I[W].call(P);return L?N:void 0};e=function(P){return"symbol"===typeof P?P:"".concat(P)};r=function(P,I,N){"symbol"===typeof I&&(I=I.description?"[".concat(I.description,"]"):
"");return Object.defineProperty(P,"name",{configurable:!0,value:N?"".concat(N," ",I):I})};m=function(P,I){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(P,I)};a=function(P,I,N,L){function W(Z){return Z instanceof N?Z:new N(function(aa){aa(Z)})}return new (N||(N=Promise))(function(Z,aa){function ia(M){try{S(L.next(M))}catch(X){aa(X)}}function R(M){try{S(L["throw"](M))}catch(X){aa(X)}}function S(M){M.done?Z(M.value):W(M.value).then(ia,R)}S((L=L.apply(P,I||
[])).next())})};h=function(P,I){function N(S){return function(M){return L([S,M])}}function L(S){if(Z)throw new TypeError("Generator is already executing.");for(;R&&(R=0,S[0]&&(W=0)),W;)try{if(Z=1,aa&&(ia=S[0]&2?aa["return"]:S[0]?aa["throw"]||((ia=aa["return"])&&ia.call(aa),0):aa.next)&&!(ia=ia.call(aa,S[1])).done)return ia;if(aa=0,ia)S=[S[0]&2,ia.value];switch(S[0]){case 0:case 1:ia=S;break;case 4:return W.label++,{value:S[1],done:!1};case 5:W.label++;aa=S[1];S=[0];continue;case 7:S=W.ops.pop();W.trys.pop();
continue;default:if(!(ia=W.trys,ia=0<ia.length&&ia[ia.length-1])&&(6===S[0]||2===S[0])){W=0;continue}if(3===S[0]&&(!ia||S[1]>ia[0]&&S[1]<ia[3]))W.label=S[1];else if(6===S[0]&&W.label<ia[1])W.label=ia[1],ia=S;else if(ia&&W.label<ia[2])W.label=ia[2],W.ops.push(S);else{ia[2]&&W.ops.pop();W.trys.pop();continue}}S=I.call(P,W)}catch(M){S=[6,M],aa=0}finally{Z=ia=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}var W={label:0,sent:function(){if(ia[0]&1)throw ia[1];return ia[1]},trys:[],ops:[]},
Z,aa,ia,R;return R={next:N(0),"throw":N(1),"return":N(2)},"function"===typeof Symbol&&(R[Symbol.iterator]=function(){return this}),R};q=function(P,I){for(var N in P)"default"===N||Object.prototype.hasOwnProperty.call(I,N)||H(I,P,N)};H=Object.create?function(P,I,N,L){void 0===L&&(L=N);var W=Object.getOwnPropertyDescriptor(I,N);if(!W||("get"in W?!I.__esModule:W.writable||W.configurable))W={enumerable:!0,get:function(){return I[N]}};Object.defineProperty(P,L,W)}:function(P,I,N,L){void 0===L&&(L=N);P[L]=
I[N]};n=function(P){var I="function"===typeof Symbol&&Symbol.iterator,N=I&&P[I],L=0;if(N)return N.call(P);if(P&&"number"===typeof P.length)return{next:function(){P&&L>=P.length&&(P=void 0);return{value:P&&P[L++],done:!P}}};throw new TypeError(I?"Object is not iterable.":"Symbol.iterator is not defined.");};k=function(P,I){var N="function"===typeof Symbol&&P[Symbol.iterator];if(!N)return P;P=N.call(P);var L,W=[];try{for(;(void 0===I||0<I--)&&!(L=P.next()).done;)W.push(L.value)}catch(aa){var Z={error:aa}}finally{try{L&&
!L.done&&(N=P["return"])&&N.call(P)}finally{if(Z)throw Z.error;}}return W};g=function(){for(var P=[],I=0;I<arguments.length;I++)P=P.concat(k(arguments[I]));return P};b=function(){for(var P=0,I=0,N=arguments.length;I<N;I++)P+=arguments[I].length;P=Array(P);var L=0;for(I=0;I<N;I++)for(var W=arguments[I],Z=0,aa=W.length;Z<aa;Z++,L++)P[L]=W[Z];return P};x=function(P,I,N){if(N||2===arguments.length)for(var L=0,W=I.length,Z;L<W;L++)!Z&&L in I||(Z||(Z=Array.prototype.slice.call(I,0,L)),Z[L]=I[L]);return P.concat(Z||
Array.prototype.slice.call(I))};v=function(P){return this instanceof v?(this.v=P,this):new v(P)};y=function(P,I,N){function L(X){R[X]&&(S[X]=function(fa){return new Promise(function(ea,ha){1<M.push([X,fa,ea,ha])||W(X,fa)})})}function W(X,fa){try{var ea=R[X](fa);ea.value instanceof v?Promise.resolve(ea.value.v).then(Z,aa):ia(M[0][2],ea)}catch(ha){ia(M[0][3],ha)}}function Z(X){W("next",X)}function aa(X){W("throw",X)}function ia(X,fa){(X(fa),M.shift(),M.length)&&W(M[0][0],M[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");
var R=N.apply(P,I||[]),S,M=[];return S={},L("next"),L("throw"),L("return"),S[Symbol.asyncIterator]=function(){return this},S};D=function(P){function I(W,Z){N[W]=P[W]?function(aa){return(L=!L)?{value:v(P[W](aa)),done:!1}:Z?Z(aa):aa}:Z}var N,L;return N={},I("next"),I("throw",function(W){throw W;}),I("return"),N[Symbol.iterator]=function(){return this},N};E=function(P){function I(Z){W[Z]=P[Z]&&function(aa){return new Promise(function(ia,R){aa=P[Z](aa);N(ia,R,aa.done,aa.value)})}}function N(Z,aa,ia,R){Promise.resolve(R).then(function(S){Z({value:S,
done:ia})},aa)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var L=P[Symbol.asyncIterator],W;return L?L.call(P):(P="function"===typeof n?n(P):P[Symbol.iterator](),W={},I("next"),I("throw"),I("return"),W[Symbol.asyncIterator]=function(){return this},W)};C=function(P,I){Object.defineProperty?Object.defineProperty(P,"raw",{value:I}):P.raw=I;return P};var Q=Object.create?function(P,I){Object.defineProperty(P,"default",{enumerable:!0,value:I})}:function(P,I){P["default"]=
I};z=function(P){if(P&&P.__esModule)return P;var I={};if(null!=P)for(var N in P)"default"!==N&&Object.prototype.hasOwnProperty.call(P,N)&&H(I,P,N);Q(I,P);return I};w=function(P){return P&&P.__esModule?P:{"default":P}};A=function(P,I,N,L){if("a"===N&&!L)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof I?P!==I||!L:!I.has(P))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===N?L:"a"===N?L.call(P):L?L.value:
I.get(P)};G=function(P,I,N,L,W){if("m"===L)throw new TypeError("Private method is not writable");if("a"===L&&!W)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof I?P!==I||!W:!I.has(P))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===L?W.call(P,N):W?W.value=N:I.set(P,N),N};F=function(P,I){if(null===I||"object"!==typeof I&&"function"!==typeof I)throw new TypeError("Cannot use 'in' operator on non-object");
return"function"===typeof P?I===P:P.has(I)};J("__extends",f);J("__assign",B);J("__rest",l);J("__decorate",d);J("__param",c);J("__esDecorate",u);J("__runInitializers",t);J("__propKey",e);J("__setFunctionName",r);J("__metadata",m);J("__awaiter",a);J("__generator",h);J("__exportStar",q);J("__createBinding",H);J("__values",n);J("__read",k);J("__spread",g);J("__spreadArrays",b);J("__spreadArray",x);J("__await",v);J("__asyncGenerator",y);J("__asyncDelegator",D);J("__asyncValues",E);J("__makeTemplateObject",
C);J("__importStar",z);J("__importDefault",w);J("__classPrivateFieldGet",A);J("__classPrivateFieldSet",G);J("__classPrivateFieldIn",F)})},"arcgisonline/esriGeowConfig":function(){define(["require","exports"],function(f,B){return window.esriGeowConfig||{}})},"arcgisonline/pages/portal/Portal":function(){define("require exports tslib ../../esriGeowConfig ./PortalItem ./UserProfiles ../utils/clone ../utils/enterprise ../utils/promises ../utils/verified ../components/ManageBlockedApps/blocked-apps-service ../../sharing/util ../../tsutils/declareDecorator dojo/Deferred dojo/Stateful dojo/_base/kernel dojo/_base/lang dojo/promise/all esri/arcgis/Portal esri/lang esri/request esri/IdentityManager ../utils/itemsgroups ../utils/mapViewer ../utils/queryHandler".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E,C,z,w){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);q=l.__importDefault(q);n=l.__importDefault(n);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);x=l.__importDefault(x);v=l.__importDefault(v);y=l.__importDefault(y);D=l.__importDefault(D);E=l.__importDefault(E);w=l.__importStar(w);
return function(){function A(G){this.blockedApps=[];this.blockedAppsTimestamp=-1;this.userProfiles=new u.default({portal:this})}A.prototype.postscript=function(){};A.prototype._getSelf=function(G){var F=this,H,J=new n.default,K="".concat(G,"portals/helpmap"),Q="".concat(G,"community/self"),P=null===(H=E.default.findCredential(G))||void 0===H?void 0:H.token;r.default.eachAlways({selfResult:this.inherited(arguments),helpMapResult:this._hasHelpMap?r.default.resolve(null):v.default.PortalUtil.request(K,
{culture:g.default.locale}),communitySelfResult:P?v.default.PortalUtil.request(Q,{returnUserLicensedItems:!0,token:P}):r.default.resolve(null)}).then(function(I){var N,L,W,Z,aa,ia;if(null===(N=I.selfResult)||void 0===N?0:N.error)J.reject(I.selfResult.error);else{var R={};if(null===(L=I.selfResult)||void 0===L?0:L.value)if(R=l.__assign(l.__assign({},R),I.selfResult.value),!F._hasHelpMap&&(null===(W=I.helpMapResult)||void 0===W?0:W.value)&&(R=l.__assign(l.__assign({},R),I.helpMapResult.value)),null===
(Z=I.communitySelfResult)||void 0===Z?0:Z.value)R=l.__assign(l.__assign({},R),{communitySelf:I.communitySelfResult.value}),F.canCreateGeoBIM=null===(ia=null===(aa=F.communitySelf)||void 0===aa?void 0:aa.userLicensedItems)||void 0===ia?void 0:ia.find(function(S){var M;return-1<(null===(M=null===S||void 0===S?void 0:S.entitlements)||void 0===M?void 0:M.indexOf("geobim"))});F._hasHelpMap=F._hasHelpMap||!!R.helpMap;d.default.self=l.__assign(l.__assign({},d.default.self||{}),(0,t.default)(R));R.isPortal?
F.getPortalAppSettings().then(function(S){if(S&&!S.code&&S.portalConfigProperties){var M=e.default.copyPortalConfigProperties(S.portalConfigProperties,d.default);Object.keys(M).forEach(function(X){d.default[X]=M[X]})}J.resolve(R)},function(){J.resolve(R)}):J.resolve(R)}});return J};A.prototype.getPortalUser=function(){return this.portalUser};A.prototype.getEnvironment=function(){var G=this.customBaseUrl;G=null===G||void 0===G?void 0:G.split(".")[0].replace("maps","");return-1<(null===G||void 0===
G?void 0:G.indexOf("dev"))?"dev":-1<(null===G||void 0===G?void 0:G.indexOf("qa"))?"qa":""};A.prototype.getPortalAppSettings=function(){return h.default.request({url:"".concat(d.default.restBaseUrl,"portals/self/settings")})};A.prototype.getDefaultMapViewer=function(){var G=this,F=new n.default,H=this.portalUser,J=this.portalProperties,K=(0,z.determineOrgMapViewer)({mapViewer:null===J||void 0===J?void 0:J.mapViewer,created:this.created,subscriptionInfo:this.subscriptionInfo,isPortal:this.isPortal});
this.defaultMapViewer?F.resolve(this.defaultMapViewer):H?H.getDefaultMapViewer().then(function(Q){G.defaultMapViewer=H.isOrgUser?Q||K:Q||K||z.MapViewerType.Classic;F.resolve(G.defaultMapViewer)}):(this.defaultMapViewer=K||z.MapViewerType.Modern,F.resolve(this.defaultMapViewer));return F};A.prototype.queryItems=function(G,F,H,J){var K=this,Q,P=new n.default,I=null!==(Q=null===G||void 0===G?void 0:G.q)&&void 0!==Q?Q:G;Q=null===I||void 0===I?void 0:I.match(/ownerfolder:([^\s]+)/);var N=(null===Q||void 0===
Q?0:Q.length)?Q[0].split(":")[1]:null,L=this.url,W=this.portalUser;Q="".concat(L,"search");G?(G.categories&&(Q="".concat(Q,"?categories\x3d").concat(G.categories),delete G.categories),"object"===typeof G&&"bbox"in G&&(G.sortField="bbox",G.srSort="true",G.spatialFilter="true",I=w.queryToObject(document.URL.replace(/^[^\?]*\?/,"")),G.srsConfig="srsConfig"in I?I.srsConfig:"offset:.5,scale:2"),J&&(G.filter=J),this._queryPortal(Q,v.default.PortalUtil.formatQueryParams({},G,F),v.default.PortalItem).then(function(Z){return(0,C.getAllItemsGroups)({response:Z,
contentUser:H,portalUser:W,url:L})}).then(function(Z){return K.toPortalItems(N,K.isAdminView,Z)}).then(function(Z){return K.addHighlights(Z)}).then(function(Z){return P.resolve(b.default.mixin(Z,{total:Z.total,nextStart:Z.nextQueryParams.start,start:Z.queryParams.start}))})):P.resolve({items:[],results:[],total:0,nextStart:-1,start:-1});return v.default.PortalResult(P)};A.prototype.getUserProfile=function(G){var F=new n.default;this.userProfiles.find(G).then(function(H){return F.resolve(H)});return F};
A.prototype.getFederatedServers=function(G){var F=this,H=new n.default,J=this.getPortalUser(),K="".concat(this.url,"portals/self/servers/");J?this.federatedServers&&!G?H.resolve(this.federatedServers):h.default.request({url:K}).then(function(Q){h.default.setFederatedServers((null===Q||void 0===Q?void 0:Q.servers)||[]);F.federatedServers=Q;H.resolve((null===Q||void 0===Q?0:Q.servers)?Q:null)}):H.resolve(null);return H};A.prototype.getHostedFederatedServers=function(G){var F=new n.default,H;this.getFederatedServers(G).then(function(J){var K;
H=(null!==(K=null===J||void 0===J?void 0:J.servers)&&void 0!==K?K:[]).filter(function(Q){return Q.isHosted});F.resolve(H[0])});return F};A.prototype.getFederatedServerByFunction=function(G,F){var H=new n.default,J;this.getFederatedServers(F).then(function(K){var Q;J=(null!==(Q=null===K||void 0===K?void 0:K.servers)&&void 0!==Q?Q:[]).filter(function(P){var I;return-1<(null===(I=P.serverFunction)||void 0===I?void 0:I.indexOf(G))});H.resolve(J.shift())});return H};A.prototype.getFederatedServerByUrl=
function(G,F){var H=-1<G.indexOf(":6080")?G.replace("http:","https:").replace(":6080",":6443"):G,J=new n.default,K;this.getFederatedServers(F).then(function(Q){var P;K=(null!==(P=null===Q||void 0===Q?void 0:Q.servers)&&void 0!==P?P:[]).filter(function(I){var N=I.url?h.default.getUrlWithoutScheme(I.url):I.url,L=I.adminUrl?h.default.getUrlWithoutScheme(I.adminUrl):I.adminUrl;N=-1<N.indexOf(":")?I.url:N;L=-1<L.indexOf(":")?I.adminUrl:L;I=H!==G;return-1<G.indexOf(N)||-1<G.indexOf(L)||I&&(-1<H.indexOf(N)||
-1<H.indexOf(L))});J.resolve(K.shift())});return J};A.prototype.getManagedServers=function(){var G=new n.default,F,H;this.getHostedFederatedServers().then(function(J){J?(F="".concat(J.adminUrl,"/admin/data/findItems"),h.default.request({url:F,content:{managed:!0}},{useProxy:h.default.shouldUseProxy(F)}).then(function(K){var Q;H=(null!==(Q=null===K||void 0===K?void 0:K.items)&&void 0!==Q?Q:K||[]).filter(function(P){var I;return"arcgis data store"===(null===(I=null===P||void 0===P?void 0:P.provider)||
void 0===I?void 0:I.toLowerCase())});G.resolve(H)},function(){return G.resolve(null)})):G.resolve(null)});return G};A.prototype.getIsBackedBySDS=function(){var G=this,F,H,J,K,Q,P,I,N=new n.default,L=this.getPortalUser(),W=null!==(F=null===L||void 0===L?void 0:L.userRole)&&void 0!==F?F:{},Z;y.default.isDefined(this.isBackedBySDS)?N.resolve(this.isBackedBySDS):(F=(null===(H=W.isAdmin)||void 0===H?void 0:H.call(W))||(null===(J=W.canManageSecurity)||void 0===J?void 0:J.call(W))||(null===(K=W.canManageServers)||
void 0===K?void 0:K.call(W))||(null===(Q=W.canUpdateOrgItems)||void 0===Q?void 0:Q.call(W))||(null===(P=W.canDeleteOrgItems)||void 0===P?void 0:P.call(W)),this.isPortal&&L&&(F||(null===(I=W.isBasedOnPublisher)||void 0===I?0:I.call(W)))?this.getManagedServers().then(function(aa){var ia;Z=null!==(ia=null===aa||void 0===aa?void 0:aa[0])&&void 0!==ia?ia:null;G.isBackedBySDS=Z?!0:!1;N.resolve(G.isBackedBySDS)}):(this.isBackedBySDS=!0,N.resolve(!0)));return N};A.prototype.getOrgIsVerified=function(G){var F,
H=new n.default;return!G&&y.default.isDefined(this.isVerified)?(H.resolve(this.isVerified),H):this.queryItems({q:"(orgid: ".concat(G||(null===(F=this.portalUser)||void 0===F?void 0:F.orgId)," AND contentstatus: public_authoritative)"),num:1}).then(function(J){return!!J.total})};A.prototype.getCategories=function(){var G=new n.default,F="".concat(this.url,"portals/").concat(this.id,"/categorySchema");h.default.request({url:F}).then(function(H){return G.resolve(H.categorySchema)},function(H){return G.reject(H)});
return G};A.prototype.getRegions=function(){var G,F,H=new n.default,J=(null===(G=this.portalUser)||void 0===G?void 0:G.culture)||(null===(F=this.portal)||void 0===F?void 0:F.culture)||g.default.locale||"en";G="".concat(this.portalUrl,"portals/regions");var K;h.default.request({url:G,content:{culture:J}}).then(function(Q){Q&&Q.length&&(K=Q.sort(function(P,I){return"WO"===P.region?-1:P.localizedName.localeCompare(I.localizedName)}));H.resolve(K)});return H};A.prototype.getMemberDefaults=function(){var G=
this,F=new n.default;h.default.request({url:"".concat(this.url,"portals/self/userDefaultSettings")}).then(function(H){G.userDefaults=H;F.resolve()},function(){F.resolve()});return F};A.prototype.getHomePageConfig=function(){var G=this,F=new n.default;h.default.request({url:"".concat(this.url,"portals/self/resources/home.page.json")}).then(function(H){G.homePageConfig=H;F.resolve()},function(){F.resolve()});return F};A.prototype.toPortalItems=function(G,F,H){var J=this,K={},Q=new n.default;G&&"root"!==
G&&b.default.mixin(K,{folderId:G,ownerFolder:G});F&&(K.isAdminView=!0);this.getBlockedApps().then(function(){var P=H.results.map(function(I){var N=new c.default(b.default.mixin(I,K,{portal:J}));N.groupData=I.groupData;N.removeBlockedTypes(J.blockedApps);return m.default.setVerifiedInfo(N)});(0,x.default)(P).then(function(I){H.items=I;Q.resolve(H)},function(I){return 0})});return Q};A.prototype.addHighlights=function(G){var F=new n.default;if(!d.default.deepLayerSearchEnabled)return F.resolve(G),F;
var H=G.items.reduce(function(J,K){J[K.id]=K;return J},{});(G.highlights||[]).forEach(function(J){var K=H[J.id];if(K.sublayers){var Q=Object.keys(J).filter(function(P){return"id"!==P&&P.includes("sublayers.")}).reduce(function(P,I){P[I.replace("sublayers.","")]=J[I].map(function(N){return N.replaceAll("\x3cem\x3e","").replaceAll("\x3c/em\x3e","")});return P},{});K.highlights=J;K.sublayers=K.sublayers.map(function(P){P.matched=Object.keys(P).some(function(I){var N;return null===(N=Q[I])||void 0===
N?void 0:N.some(function(L){return P[I].includes(L)})});return P})}});F.resolve(G);return F};A.prototype.formatThumbnailUrl=function(G){return v.default.PortalUtil.formatUrl("".concat(this.portalUrl,"portals/self/resources/").concat(G))};A.prototype.getLocalizedOrgProperties=function(){var G=this,F,H,J=new n.default,K="".concat(d.default.restBaseUrl,"portals/self/resources"),Q=null===(H=null===(F=this.portalUser)||void 0===F?void 0:F.credential)||void 0===H?void 0:H.token;F="".concat(K,"/").concat("localizedOrgProperties");
H={f:"json"};Q&&(H.token=Q);(0,D.default)({url:F,content:H},{disableIdentityLookup:!0}).then(function(P){P&&!P.code?(G.localizedOrgProperties=P,G.localizedOrgProperties.default||(G.localizedOrgProperties.default={name:G.name,description:null})):G.createLocalizedOrgPropertiesDefault();J.resolve(G.localizedOrgProperties)},function(){G.createLocalizedOrgPropertiesDefault();J.resolve(G.localizedOrgProperties)});return J};A.prototype.isTrialOrg=function(){var G,F=null===(G=this.subscriptionInfo)||void 0===
G?void 0:G.type;return"Trial"===F||"Trial Press"===F||"Trial Developer"===F||"Developer Subscription"===F};A.prototype.canHavePartnerCollab=function(){var G="Organizational Plan;Community;In House;ConnectED;ELA;Education Site License;Education;HUP Online Entitlement;Demo and Marketing".split(";");return this.subscriptionInfo&&-1<G.indexOf(this.subscriptionInfo.type)};A.prototype.isKubernetes=function(){return"ArcGISEnterpriseOnKubernetes"===this.portalDeploymentType};A.prototype.getGeoAnalyticsPlan=
function(){var G;return null===(G=this.subscriptionInfo)||void 0===G?void 0:G.subType};A.prototype.getGeoAnalyticsBillingType=function(){var G;return null===(G=this.subscriptionInfo)||void 0===G?void 0:G.billingType};A.prototype.getRemainingCoreHours=function(){return this.availableCredits||0};A.prototype.getContentCategoryLimit=function(){var G=this,F=new n.default;if(this.isPortal||!this.id)return this.maxCategoriesPerItem=20,F.resolve(),F;h.default.request({url:"".concat(this.url,"portals/self/limits"),
content:{limitsType:"content",limitName:"MaxCategories"}}).then(function(H){G.maxCategoriesPerItem=(null===H||void 0===H?void 0:H.limitValue)||20;F.resolve()},function(){F.resolve()});return F};A.prototype.getHelpUrl=function(G){var F,H=(null===(F=this.helpMap)||void 0===F?void 0:F.m[G])||"";return"".concat(this.helpBase).concat(H)};A.prototype.createLocalizedOrgPropertiesDefault=function(){this.localizedOrgProperties={default:{name:this.name,description:null}}};A.prototype.getBlockedApps=function(){var G=
this,F,H=new n.default;if(null===(F=this.portalUser)||void 0===F||!F.orgId)return H.resolve(),H;a.default.getBlockedApps().then(function(J){G.blockedApps=J;H.resolve()});return H};A.prototype.getOIDCId=function(){var G,F;return l.__awaiter(this,void 0,void 0,function(){var H;return l.__generator(this,function(J){switch(J.label){case 0:if(this.oidcId)return[2,this.oidcId];J.label=1;case 1:return J.trys.push([1,3,,4]),[4,h.default.request({url:"".concat(d.default.restBaseUrl,"portals/self/oidc")})];
case 2:return H=J.sent(),this.oidcId=null===(F=null===(G=null===H||void 0===H?void 0:H.oidcProviders)||void 0===G?void 0:G[0])||void 0===F?void 0:F.id,[2,this.oidcId];case 3:return J.sent(),[2];case 4:return[2]}})})};return A=l.__decorate([(0,q.default)(v.default.Portal,k.default)],A)}()})},"arcgisonline/pages/portal/PortalItem":function(){define("require exports tslib ../pageUtil ../getThumbnail ./CommentsUtil ../item/_Info ../utils/arrays ../utils/item ../utils/socialMedia ../../sharing/util ../../esriGeowConfig ../../tsutils/declareDecorator dojo/Deferred dojo/i18n!../../nls/arcgisonline dojo/_base/lang dojo/promise/all dojo/Stateful esri/lang esri/arcgis/Portal ../utils/url".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);q=l.__importDefault(q);n=l.__importDefault(n);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);x=l.__importDefault(x);v=l.__importDefault(v);return function(){function E(z){var w,A,G,F,H,J,K;this.portalUser=null!==(A=null===
(w=this.portal)||void 0===w?void 0:w.getPortalUser())&&void 0!==A?A:null;this.title=null!==(G=this.title)&&void 0!==G?G:"";this.snippet=null!==(F=this.snippet)&&void 0!==F?F:"";this.type=this.type||"Unknown";this.displayName=null!==(H=this.displayName)&&void 0!==H?H:"";this.commentsInfo={sortField:"created",sortOrder:"desc",start:0,num:5,comments:[],item:this};this.screenshots=(null===(J=this.screenshots)||void 0===J?0:J.length)?this.screenshots:null;this.thumbnailUrl="Image"!==this.type||this.thumbnail?
this.thumbnailUrl:this.itemDataUrl;this.sourceLabel=this._getSourceLabel();this.scoreCompleteness=this.setScoreCompleteness(this.scoreCompleteness);this.url=this._getAdjustedUrl();this._setAdminFlags();this.setTypeKeywordFlags();this.tags instanceof Array&&-1<this.tags.length&&(this.tags=this.tags.join(","));this.size=this._getAdjustedSize();g.default.mixin(this,{extent:d.default.extentToString(this.extent)});g.default.mixin(this,t.default.getItemInfo(this));(null===(K=this.portal)||void 0===K?0:
K.isPortal)&&"Web Mapping Application"===this.type&&-1<this.typeKeywords.indexOf("Story Map")&&(this.isRetiredStoryMap=!0);this.checkIsRetiredApp()}var C=E;E.prototype.postscript=function(){};E.prototype.getOwnerProfile=function(z,w){var A=this,G=this.owner,F=new n.default;this.ownerProfile?F.resolve(this.ownerProfile):(this.isOwner?(G=new n.default,G.resolve(this.portalUser)):G=this.portal.getUserProfile(G),G.then(function(H){A.isOwner||H.orgId===A.portal.id||(w=z=!1);(0,b.default)({folders:A.isAdmin&&
w?H.getFolders():null,tags:A.isAdmin&&z?H.getTags():null,contentTags:A.isAdmin&&z?H.getContentTags():null}).then(function(J){A.ownerProfile=H;A.itemOwner=H;A._setAdminFlags();F.resolve(H)},function(J){A.ownerProfile=H;A.itemOwner=H;A._setAdminFlags();F.resolve(H)})}));return F};E.prototype.getComments=function(z,w){var A=this,G=new n.default;this.commentsEnabled&&this.numComments?u.default.fetchComments(z,w,this.commentsInfo).then(function(F){A.commentsInfo=g.default.mixin(A.commentsInfo,F.commentsInfo);
A.comments=A.commentsInfo.comments;G.resolve(A.comments)}):G.resolve([]);return G};E.prototype.getRelatedItems=function(z,w){var A=this,G={WMA2Code:1,MobileApp2Code:1},F,H,J=new n.default;this.relatedItems=this.relatedItems||{};v.default.isDefined(this.relatedItems[z+"_"+w])?J.resolve(this.relatedItems[z+"_"+w].slice(0)):a.default.request({url:this.itemUrl+"/relatedItems",content:{relationshipType:z,direction:w}}).then(function(K){F=(null===K||void 0===K?0:K.relatedItems)?K.relatedItems:null!==K&&
void 0!==K?K:[];F=F.map(function(Q){return new C(l.__assign(l.__assign({},Q),{portal:A.portal}))});H=z in G?(F||[]).shift():F||[];A.relatedItems[z+"_"+w]=H;J.resolve((null===H||void 0===H?0:H.length)?H.slice(0):H)},function(K){J.reject(K)});return J};E.prototype.getSourceData=function(){var z=this,w=new n.default,A="Scene Service"===this.type||"Map Service"===this.type||"WFS"===this.type||"OGCFeatureServer"===this.type||"Vector Tile Service"===this.type||"3DTiles Service"===this.type,G="Map Service"===
this.type||"Vector Tile Service"===this.type,F=A?"Service2Service":this.isRouteLayer?"Service2Route":"Service2Data",H="Service2Service"===F||"Service2Route"===F?"reverse":"forward",J;-1<this.typeKeywords.indexOf("Bulk Published Service")&&(F="DataStore2BPService",H="reverse");this.sourceData?w.resolve(this.sourceData):this.getRelatedItems(F,H).then(function(K){J=(null===K||void 0===K?0:K.length)?K.shift():null;A?G&&!z._isView(J)||!J?z.getRelatedItems("Service2Data","forward").then(function(Q){Q=(null===
Q||void 0===Q?0:Q.length)?Q.shift():J;w.resolve(Q)}):w.resolve(J):w.resolve(J)},function(K){w.reject(K)});return w};E.prototype._isView=function(z){return z&&e.default.includes(z.typeKeywords,"View Service")||!1};E.prototype.getResultData=function(){var z=new n.default,w=this.isHostedService?"Service2Service":"Service2Data";this.getRelatedItems(w,"Service2Service"===w&&"Feed"!==this.type?"forward":"reverse").then(function(A){return z.resolve((null===A||void 0===A?0:A.length)?A:null)});return z};E.prototype.getThumbnail=
function(z){var w=this,A=new n.default;this._fetchingThumbnail?setTimeout(function(){w.getThumbnail(!1).then(function(G){w._fetchingThumbnail=!1;A.resolve(G)},function(G){w._fetchingThumbnail=!1;A.resolve(void 0)})},50):(this._fetchingThumbnail=!0,(0,c.default)(this,z).then(function(G){w._fetchingThumbnail=!1;G.dataURL?w._updateThumbnail(G).then(function(F){w.set("thumbnailUrl",F);A.resolve(F)},function(F){A.reject()}):(w.set("thumbnailUrl",G),A.resolve(G))},function(G){w._fetchingThumbnail=!1;A.resolve()}));
return A};E.prototype.getData=function(){var z=new n.default;a.default.request({url:this.itemDataUrl}).then(function(w){return z.resolve(w)});return z};E.prototype.canBeDeleted=function(){var z=new n.default;a.default.request({url:this.userItemUrl+"/canDelete"}).then(function(w){return z.resolve(w)},function(w){return z.resolve(w)});return z};E.prototype.resetTypeKeywordInfo=function(){this.setTypeKeywordFlags();this.set("displayName",this._getDisplayName())};E.prototype.setTypeKeywordFlags=function(){var z,
w,A,G=this.typeKeywords;this.isViewOnly=e.default.includes(G,"useOnly");this.isOfflineEnabled=e.default.includes(G,"Offline");this.isHostedService=e.default.includes(G,"Hosted Service")&&"Insights Workbook"!==this.type&&"Insights Data Engineering Workbook"!==this.type&&"Insights Page"!==this.type;this.isServiceProxy=e.default.includes(G,"Service Proxy");this.isAppProxy=e.default.includes(G,"App Proxy");this.isAppCollector=e.default.includes(["Web Map","Web Scene"],this.type);this.useInCollector=e.default.includes(G,
"Collector");this.disableInCollector=e.default.includes(G,"CollectorDisabled");this.isFeatureCollection="Feature Collection"===this.type||e.default.includes(G,"Feature Collection");this.isMapNotes="Feature Collection"===this.type&&e.default.includes(G,"Map Notes");this.isTable=e.default.includes(G,"Table");this.hasMetadata=e.default.includes(G,"Metadata");this.isSDS=!this.portal.isPortal||this.portal.isPortal&&e.default.includes(G,"providerSDS");this.isBDS=this.portal.isPortal&&e.default.includes(G,
"providerBDS");this.isRegisteredApp=e.default.includes(G,"Registered App");this.hasGeocodeReviewTable=e.default.includes(G,"Involved Lookup");this.isHostedTemplate=e.default.includes(G,"configurableApp")||e.default.includes(G,"Configurable")&&e.default.includes(G,"createAppWithoutMap");this.isPremium=-1<this.owner.toLowerCase().indexOf("esri")&&this.isPremiumContent;this.requiresCredits=e.default.includes(this.typeKeywords,"Requires Credits");this.typeInfo=g.default.mixin({},this.getTypeInfo(),{premiumTitle:k.default.common[(this.requiresCredits?
"premiumcontentcreditstitle":"premiumcontenttitle")+(this.portal.isPortal?"portal":"")],premiumLabel:k.default.common[this.requiresCredits?"premiumcontent":"subscriptioncontent"]});this.hasKMLItemData="KML"===this.type&&-1<(null===(z=this.url)||void 0===z?void 0:z.indexOf("rest/content/items/"+this.id+"/data"));this.isDataView=e.default.includes(G,"View Service");this.canDelete=this.isOwner||this.isAdmin||this.isOwnedByMyOrg&&(null===(w=this.portalUser)||void 0===w?void 0:w.userRole.canDeleteOrgItems())||
!1;this.isLocatorView=this.isServiceProxy&&e.default.includes(G,"Geocoding filter");this.isRouteLayer=e.default.includes(G,"Route Layer");this.isSpatiotemporal=e.default.includes(G,"Spatiotemporal");this.isMarkup=e.default.includes(G,"Markup");this.isMultiServicesView=e.default.includes(G,"Multi Services View");this.isPhotoLocations="Image Collection"===this.type&&e.default.includes(G,"Photo locations");this.isLocationTrackingView=(this.isLocationTrackingService="Feature Service"===this.type&&e.default.includes(G,
"Location Tracking Service"))&&e.default.includes(G,"Location Tracking View");this.canShowSocialMediaLinks=m.default.canShowSocialMediaLinksOnItems(this.portal);this.isVectorTileService=e.default.includes(G,"Vector Tile Service");this.isUtilityNetwork="Feature Service"===this.type&&e.default.includes(this.typeKeywords,"UtilityNetwork");z=v.default.isDefined(h.default.newMapViewerEnabled)&&!0===h.default.newMapViewerEnabled;w=!h.default.self.portalProperties||!v.default.isDefined(h.default.self.portalProperties.newMapViewerEnabled)||
!0===h.default.self.portalProperties.newMapViewerEnabled;z&&w&&(this.canOpenInNewMapViewer=this._canOpenInNewMapViewer());this.userItemUrl=null===(A=this.itemUrl)||void 0===A?void 0:A.replace("/content/","/content/users/"+this.owner+(this.folderId?"/"+this.folderId:"")+"/")};E.prototype.addBlockClasses=function(z){var w=this,A,G,F,H;this.blockedApps||(this.blockedApps=null===(A=this.portal)||void 0===A?void 0:A.blockedApps);if(null!==(G=this.blockedApps)&&void 0!==G&&G.length){-1<this.blockedApps.indexOf("survey123")&&
z.some(function(J){return-1<["is-surveyForm","is-surveyFormBrowser"].indexOf(J)})&&-1===z.indexOf("survey-blocked")&&z.push("survey-blocked");if(-1<this.blockedApps.indexOf("webappbuilder")){z.some(function(J){return"can-edit-wab"===J})&&-1===z.indexOf("wab-blocked")&&z.push("wab-blocked");if(["Web AppBuilder","WABTemplate"].some(function(J){return w.typeKeywords.some(function(K){return K===J})})||-1<(null===(F=this.url)||void 0===F?void 0:F.indexOf("webappviewer")))A=z.indexOf("has-url"),-1<A&&z.splice(A,
1);-1<(null===(H=this.configureUrl)||void 0===H?void 0:H.indexOf("webappviewer"))&&(z=this.privileges.indexOf("can-configure"),-1<z&&this.privileges.splice(z,1))}"StoryMap"===this.type&&this.origin&&(z=this.privileges.indexOf("can-configure"),-1<z&&this.privileges.splice(z,1))}};E.prototype.removeBlockedTypes=function(z){var w=this,A;if((null===z||void 0===z?0:z.length)||(null===(A=this.blockedApps)||void 0===A?0:A.length)){(null===z||void 0===z?0:z.length)?this.blockedApps=z:z=this.blockedApps;var G=
{arcgis360vr:{types:["is-vrExperience"],blockedType:"vrExperience-blocked",openIn:["vrExperienceViewer"]},arcgisInsights:{types:["is-insights"],blockedType:"insights-blocked",texts:[k.default.itemLinks.openInsights],openIn:["insightsViewer"]},arcgisstorymaps:{types:["is-published-storymap","is-editable-storymap"],blockedType:"storymap-blocked",openIn:["storyMapViewer","configureStoryMap"]},datapipelines:{types:["is-data-pipeline"],blockedType:"data-pipeline-blocked",openIn:["dataPipeline"],texts:[k.default.itemLinks.openDataPipelines]},
deeplearningstudio:{types:["is-geoAIStudioProject"],blockedType:"deep-learning-blocked",openIn:["geoAIStudioUrlViewer"],texts:[k.default.itemLinks.openGeoAIStudio]},experienceBuilder:{types:["is-published-webExperience","is-published-webExperienceTemplate"],blockedType:"exp-builder-blocked",openIn:["webExperienceViewer"]},HubforArcGIS:{types:["is-hubInitiative","is-hubEvent","is-hubProject"],blockedType:"hub-blocked",texts:[k.default.itemLinks.viewInHub,k.default.itemLinks.openHubInitiative,k.default.itemLinks.editHubProject],
openIn:["hubEventViewer","hubInitiative","hubProject"]},opsdashboard:{types:["is-dashboard"],blockedType:"dashboard-blocked",texts:[k.default.itemLinks.dashboardView],openIn:["dashboard"]},orthomaker:{types:["is-orthoMaker"],blockedType:"ortho-maker-blocked",texts:[k.default.itemLinks.openOrthoMaker],openIn:["orthoMaker"]},survey123:{types:["is-surveyForm","is-surveyFormBrowser"],blockedType:"survey-blocked",openIn:["surveyViewer"],texts:[k.default.itemLinks.openSurvey123]},webappbuilder:{types:["can-edit-wab"],
blockedType:"wab-blocked"},Workforce:{types:["is-workforceProject"],blockedType:"workforce-blocked",texts:[k.default.itemLinks.openWorkforce],openIn:["workforceViewer"]}};Object.keys(G).forEach(function(F){var H;if(-1<z.indexOf(F)){var J=G[F],K=J.types,Q=J.blockedType,P=J.texts;J=J.openIn;"arcgisstorymaps"===F&&"StoryMap"===w.type&&(w.defaultOpenText=void 0);K&&(w.types.some(function(I){return K.some(function(N){return N===I})})||(null===(H=w.privileges)||void 0===H?0:H.some(function(I){return K.some(function(N){return N===
I})})))&&-1===w.types.indexOf(Q)&&(w.types=l.__spreadArray(l.__spreadArray([],w.types,!0),[Q],!1));if(null===P||void 0===P?0:P.some(function(I){return I===w.defaultOpenText}))w.defaultOpenText=w.defaultOpenIcon=void 0;J&&J.forEach(function(I){I=w.openIn.indexOf(I);-1<I&&w.openIn.splice(I,1)})}});if(-1<z.indexOf("webappbuilder")&&-1<this.typeKeywords.indexOf("Web AppBuilder")||-1<z.indexOf("HubforArcGIS")&&r.default.isHubType(this.type))this.defaultOpenText=void 0,this.openIn=[]}};E.prototype.isVelocity=
function(){return-1<this.typeKeywords.indexOf("IoTFeatureLayer")};E.prototype._getAdjustedSize=function(){var z=this.isHostedService&&"Feature Service"===this.type&&0<=this.subInfo,w=this.isHostedService&&"Image Service"===this.type&&!e.default.includes(this.typeKeywords,"Tiled Imagery Layer")&&!e.default.includes(this.typeKeywords,"Elevation 3D Layer")&&0<=this.subInfo;return this.size&&(z||w)?this.size-this.subInfo:this.size};E.prototype._canOpenInNewMapViewer=function(){var z,w=this.type,A=this.isRouteLayer,
G=t.default[w],F={"Feature Service":1,"Map Service":1,"Stream Service":1,Feed:1,"Vector Tile Service":1,"Image Service":1,"Imagery Layer":1,KML:1,OGCFeatureServer:1,WFS:1,WMS:1,WMTS:1,"Media Layer":1,"Group Layer":1};return-1<(null===(z=null===G||void 0===G?void 0:G.openIn)||void 0===z?void 0:z.indexOf("mapViewer"))?"Web Map"===w?!0:A||w in F&&this._canOpenServiceInNewMapViewer()?!0:!1:!1};E.prototype._canOpenServiceInNewMapViewer=function(){var z=this.type,w=this.typeKeywords,A="Map Service;Vector Tile Service;Imagery Layer;Image Service;Stream Service;Feed;Feature Service;KML;WFS;WMS;WMTS;Media Layer;Group Layer;OGCFeatureServer".split(";");
return this.isTable||A.includes(z)||w.includes("Hosted Service")||this.isRouteLayer};E.prototype._getAdjustedUrl=function(){var z;if(this.url){var w=RegExp("^(?:[a-z]+:)?//","i").test(this.url)||-1!==this.url.indexOf("../");if(!this.portal.isPortal){var A=void 0;try{A=a.default.parseUrl(this.url)}catch(G){A=this.url}if("public"!==this.access&&a.default.isHostedTemplateItem(this.url))return this.url.replace(A.host,window.location.hostname);if("KML"===this.type)return this.url.includes("/sharing/rest/content/items/")?
(null===(z=this.itemDataUrl)||void 0===z?void 0:z.replace(A.host,this.portal.portalHostname),this.url.replace(A.host,this.portal.portalHostname)):this.url}return this.portal.isPortal&&!w&&(z=a.default.getHomeAppContext(),-1===this.url.indexOf(z))?z+this.url:(0,D.sanitizeServerURL)(this.url)}return null};E.prototype._getSourceLabel=function(){var z=this.type,w=this.typeKeywords,A=e.default.includes(w,"Service")||"Feature Collection"===z?k.default.itemProperties.source+" ":"";return"Web Scene"===z?
e.default.includes(w,"ViewingMode-Local")?k.default.common.localWebScene:k.default.common.globalWebScene:"Web Mapping Application"===z&&(null===w||void 0===w?0:w.includes("configurableApp"))?k.default.items.instantApp:A?A+z:z};E.prototype._setAdminFlags=function(){var z,w,A,G,F;this.isOwnedByMyOrg=this.isOwner||(null===(z=this.itemOwner)||void 0===z?void 0:z.orgId)===this.portal.id||this.portalUser&&(null===(w=this.itemOwner)||void 0===w?void 0:w.orgId)&&this.portal&&this.portalUser.orgId===this.portal.id||
!1;z=this.isAdminView||(null===(G=null===(A=this.portal)||void 0===A?void 0:A.portalUser)||void 0===G?void 0:G.isOrgAdmin)&&this.isOwnedByMyOrg;this.isOwner=this.portalUser&&this.owner===this.portalUser.username;this.canUpdate=(this.isAdmin=this.portalUser?this.isOwner||r.default.isItemAdmin(this,this.portal)||z:!1)||this.itemControl&&-1<this.itemControl.indexOf("update");this.canDelete=this.isOwner||this.isAdmin||this.isOwnedByMyOrg&&(null===(F=this.portalUser)||void 0===F?void 0:F.userRole.canDeleteOrgItems())||
!1};E.prototype._setContentStatusTo=function(z){return a.default.request({url:this.itemUrl+"/setContentStatus",content:{status:z,clearEmptyFields:!z}},{usePost:!0})};E.prototype.setScoreCompleteness=function(z){z=parseInt(z,10);return this.scoreCompleteness=10*Math.ceil(z/10)};E.prototype._updateThumbnail=function(z){var w=this,A=new n.default,G=this.itemUrl,F;a.default.request({url:this.userItemUrl+"/updateThumbnail",content:{data:z.dataURL,filename:"ago_downloaded.png"}},{usePost:!0}).then(function(){a.default.request({url:G}).then(function(H){F=
new C(l.__assign(l.__assign({},H),{portal:w.portal}));A.resolve(F.thumbnailUrl)})});return A};E.prototype.checkIsRetiredApp=function(){function z(G){return A.some(function(F){var H=-1<F.indexOf(".html");F="/apps/".concat(F).concat(H?"":"/");return-1<G.indexOf(F)})}var w,A="3DInsetMap 3DScene 3DViz AttachmentViewer CapacityAnalysis Compare/storytelling_compare Compare/storytelling_tabbed Compare/storytelling_sidepanel Compare/Multiviewer Compare/Search Compare/Configure Compare/SideBySideViewer_Configure Compare3d CompareAnalysis CompareMaps Directions Edit Editor Elevations ElevationsProfile Embed Filter FilterGallery GeoList GeoTour HeaderFooter Identify ImageInterpretation ImageryViewer ImpactSummary InformationLookup InteractiveFilter InteractiveLegend LayerShowcase Legend LiveMaps LocalPerspective MapAndAppGallery MapCarousel MapTools Media MinimalGallery Minimalist Nearby OnePane Panels PanelsLegend Profile PublicGallery PublicInformation ServiceLookup SimpleMapViewer SimpleViewer SocialMedia Solutions/s2.html?app\x3dapps2/FindEditFilter Solutions/s2.html?app\x3dapps2/Finder StorytellingTextLegend StoryMapBasic Styler SummaryViewer Time TimeAware TwoPane Viewer ZoneLookup".split(" ");
this.isRetiredApp=(null===(w=this.portal)||void 0===w?void 0:w.isPortal)&&"Web Mapping Application"===this.type&&this.url&&z(this.url)};return E=C=l.__decorate([(0,q.default)(y.PortalItem,x.default)],E)}()})},"arcgisonline/pages/pageUtil":function(){define("require exports tslib ../esriGeowConfig ../map/core/canUseForPublish ./utils/arrays ./utils/number ./utils/strings ./utils/clone ../sharing/util ../sharing/dijit/dialog/DownloadImageDlg dijit/Dialog dojo/_base/kernel dojo/dom-attr dojo/Deferred dojo/on dojo/hash dojo/string dojo/query dojo/sniff dojo/keys dojo/promise/all esri/lang esri/arcgis/Portal esri/geometry/Point esri/tileUtils esri/urlUtils esri/tasks/Geoprocessor dojo/i18n!../nls/arcgisonline ./utils/queryHandler preact ./components/ConfirmDialog".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E,C,z,w,A,G,F,H,J,K,Q){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);q=l.__importDefault(q);n=l.__importDefault(n);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);x=l.__importDefault(x);v=l.__importDefault(v);y=l.__importDefault(y);D=l.__importDefault(D);E=l.__importDefault(E);
C=l.__importDefault(C);z=l.__importDefault(z);w=l.__importDefault(w);A=l.__importDefault(A);G=l.__importDefault(G);F=l.__importDefault(F);H=l.__importDefault(H);J=l.__importStar(J);Q=l.__importDefault(Q);return function(){function P(){}P.editorDefaults=function(I){return{id:I,"aria-label":I,plugins:["bold","italic","underline","foreColor","hiliteColor","|","justifyLeft","justifyCenter","justifyRight","justifyFull","|","insertOrderedList","insertUnorderedList","|","createEsriLink","unlink","insertEsriImage",
"removeFormat","|","undo","redo","|","viewsourcesanitize","|",{name:"dijit._editor.plugins.FontChoice",command:"fontSize",class:"dijitFontSizeWrap",custom:["2","3","4","5","6"]}],style:"font-family: 'Avenir Next', 'Avenir', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif; font-size: 15px;",height:"140px"}};P.tagDefaults=function(I){return{id:I,minWidth:"100%",maxWidth:"100%"}};P.getQueryParams=function(){return J.queryToObject(window.location.search.slice(1))};P.setQueryParams=function(I,N){P[N?
"pushCurrentLocation":"replaceCurrentLocation"]("".concat(window.location.pathname,"?").concat(J.objectToQuery(I)).concat(window.location.hash))};P.updateQueryParams=function(I,N){P.setQueryParams(l.__assign(l.__assign({},P.getQueryParams()),I),N)};P.removeQueryParams=function(I,N){var L=P.getQueryParams();I.forEach(function(W){return delete L[W]});P.setQueryParams(L,N)};P.clearAllQueryParams=function(){P.setQueryParams({})};P.replaceCurrentLocation=function(I){history&&history.replaceState&&history.replaceState({},
document.title,I)};P.pushCurrentLocation=function(I){null===history||void 0===history?void 0:history.pushState({},document.title,I)};P.applyCSSClassToStringMatch=function(I,N,L){var W=N.indexOf(I),Z=N.slice(0,W),aa=N.slice(W,W+I.length),ia=N.slice(W+I.length);return-1<W?0===W?(I=N.slice(0,I.length),'\x3cspan class\x3d"'.concat(L,'"\x3e').concat(I,"\x3c/span\x3e").concat(ia)):"".concat(Z,'\x3cspan class\x3d"').concat(L,'"\x3e').concat(aa,"\x3c/span\x3e").concat(ia):N};P.isEmptyObject=function(I){for(var N in I)if(Object.prototype.hasOwnProperty.call(I,
N))return!1;return!0};P.isJson=function(I){try{JSON.parse(I)}catch(N){return!1}return!0};P.extentToString=function(I){return I=I instanceof Array&&2===I.length&&2===I[0].length&&2===I[1].length?[I[0].join(","),I[1].join(",")].join():I&&I+""||""};P.getClosestValue=function(I,N,L){return L-I>=N-L?N:I};P.findClosestValue=function(I,N){if(N<=I[0])return I[0];if(N>=I[I.length-1])return I[I.length-1];for(var L=0,W=I.length,Z=0;L<W;){Z=Math.floor((L+W)/2);if(I[Z]===N)break;if(N<I[Z]){if(0<Z&&N>I[Z-1])return P.getClosestValue(I[Z-
1],I[Z],N);W=Z}else{if(Z<I.length-1&&N<I[Z+1])return P.getClosestValue(I[Z],I[Z+1],N);L=Z+1}}return I[Z]};P.isFavorite=function(I){var N=I.portal,L=N.getPortalUser();L=L&&L.favGroupId;var W=new k.default;C.default.isDefined(I.isFavorite)?W.resolve(I.isFavorite):L?(I.isFavorite=!1,N.queryItems('(group:"'.concat(L,'" AND id:"').concat(I.id,'")'),!0).then(function(Z){I.isFavorite=0<(null===Z||void 0===Z?void 0:Z.total);W.resolve(I.isFavorite)},function(){W.resolve(!1)})):(I.isFavorite=!1,W.resolve(!1));
return W};P.isConfigurableApplication=function(I){var N,L=new k.default,W=I.owner,Z=I.itemData||{},aa=-1<(null===(N=I.itemControl)||void 0===N?void 0:N.indexOf("admin"));N=I.typeKeywords||[];var ia=N.some(function(R){return R.match(/(sourceId#).*/gi)});C.default.isDefined(I.isConfigurableApp)?L.resolve(I.isConfigurableApp):I.portal.isPortal&&!I.isOwner&&aa&&-1<W.indexOf("esri_")?(I.isConfigurableApp=!1,L.resolve(!1)):I.type&&(0===I.type.indexOf("Hub")&&!["Hub Initiative Template","Hub Event","Hub Project"].includes(I.type)||
"Site Application"===I.type)?(I.isConfigurableApp=I.canUpdate,L.resolve(I.isConfigurableApp)):I.canUpdate&&"Web Mapping Application"===I.type?(I.isConfigurableApp=!1,u.default.includes(N,"WABTemplate")?(I.isConfigurableApp=!1,L.resolve(!1)):u.default.includes(N,"selfConfigured")?(I.isConfigurableApp=Z&&(Z.source||m.default.isHostedTemplateItem(I.url)||!ia),L.resolve(I.isConfigurableApp)):u.default.includes(N,"configurableApp")?(I.isConfigurableApp=!0,L.resolve(I.isConfigurableApp)):(null===Z||void 0===
Z?0:Z.source)?(W="".concat(I.portal.url,"content/items/").concat(Z.source,"/data"),m.default.request({url:W}).then(function(R){I.isConfigurableApp=!(null===R||void 0===R||!R.configurationSettings);L.resolve(I.isConfigurableApp)},function(){I.isConfigurableApp=!1;L.resolve(I.isConfigurableApp)})):L.resolve(!1)):(I.isConfigurableApp=!1,L.resolve(!1));return L};P.isFilePublishableByUser=function(I){var N,L,W,Z=new k.default,aa=I.portal,ia=aa.getPortalUser(),R=null===ia||void 0===ia?void 0:ia.userRole,
S=aa.supportsHostedServices;ia=C.default.isDefined(null===(L=null===(N=aa.helperServices)||void 0===N?void 0:N.rasterAnalytics)||void 0===L?void 0:L.url);N=R&&R.canCreateItem();L=(N=S&&N&&I.isAdmin)&&R.canPublishTiles();S=N&&R.canPublishFeatures();R=N&&R.canPublishScenes();var M=(null===(W=I.resultData)||void 0===W?void 0:W.length)||null;W=aa.isPortal&&N&&ia;aa=!aa.isPortal||aa.supportsSceneServices;aa=C.default.isDefined(I.canPublishFile)?I.canPublishFile:S&&(u.default.includes(I.types,"is-feature")||
u.default.includes(I.types,"is-featureCollection")&&!M&&!I.isMarkup)||L&&u.default.includes(I.types,"is-tile")||R&&aa&&u.default.includes(I.types,"is-scene-package")||L&&u.default.includes(I.types,"is-vector-tile")||W&&u.default.includes(I.types,"is-image-collection")||N&&u.default.includes(I.typeKeywords,"Photo locations")||N&&I.typeKeywords.includes("GeoPackage")||N&&u.default.includes(I.types,"is-notebook")?!0:!1;I.canPublishFile=aa;Z.resolve(aa);return Z};P.isServicePublishableByUser=function(I,
N){var L=new k.default,W=I.portal.getPortalUser();W=(W=null===W||void 0===W?void 0:W.userRole)&&W.canCreateItem();var Z=I.serviceInfo||{},aa=I.isSDS;N=I.isTable&&!N;var ia=I.isLocationTrackingService;N=!(I.isMultiServicesView||Z.isMultiServicesView||!I.isHostedService||"Feature Service"!==I.type||!W||!aa||N||ia);I.canPublish=N;L.resolve(N);return L};P.canPublishTileServiceFromFeatureService=function(I){var N=new k.default,L=I.portal.getPortalUser();L=null===L||void 0===L?void 0:L.userRole;var W=P.isServicePublishableByUser(I)&&
I.isAdmin&&L.canPublishTiles(),Z=u.default.includes(I.typeKeywords,"Spatiotemporal"),aa=I.typeKeywords.includes("Hosted Service"),ia=(I.resultData||[]).filter(function(S){return"Map Service"===S.type});L=I.featureLayers;var R=I.isHostedService&&(L||[]).every(function(S){return P.canUseForPublish(I,S,!0)});P.isServicePublishableByUser(I).then(function(S){S=!(!(S&&W&&R&&!Z&&aa)||ia&&ia.length);I.canPublishTiles=S;N.resolve(S)});return N};P.canPublishVectorTileServiceFromFeatureService=function(I){var N=
new k.default,L=null===d.default||void 0===d.default?void 0:d.default.publishVectorTilesFromFeaturesEnabled,W=(I.resultData||[]).filter(function(aa){return"Vector Tile Service"===aa.type}),Z=I.isHostedService&&(I.featureLayers||[]).every(function(aa){return P.canUseForPublish(I,aa,!0)});P.isServicePublishableByUser(I).then(function(aa){aa=!(!(L&&Z&&aa)||W&&W.length);I.canPublishVectorTiles=aa;N.resolve(aa)});return N};P.canPublishWFSServiceFromFeatureService=function(I){var N=new k.default,L=I.portal,
W=L.getPortalUser();W=null===W||void 0===W?void 0:W.userRole;var Z=u.default.includes(I.typeKeywords,"Spatiotemporal"),aa=P.isServicePublishableByUser(I),ia=aa&&(!L.isPortal||L.isPortal&&!Z),R=aa&&I.isAdmin&&W.canPublishFeatures(),S=(I.resultData||[]).filter(function(M){return"WFS"===M.type});P.isServicePublishableByUser(I).then(function(M){M=!(!(M&&ia&&R)||!L.isPortal&&Z||S&&S.length);I.canPublishWFS=M;N.resolve(M)});return N};P.canPublishOGCFeatureServerFromFeatureService=function(I){var N=new k.default,
L=I.portal.isPortal,W=I.portal.getPortalUser();W=null===W||void 0===W?void 0:W.userRole;var Z=P.isServicePublishableByUser(I)&&!L&&I.isAdmin&&W.canPublishFeatures(),aa=(I.resultData||[]).filter(function(R){return"OGCFeatureServer"===R.type}),ia=u.default.includes(I.typeKeywords,"Spatiotemporal");P.isServicePublishableByUser(I).then(function(R){R=!(!R||!Z||ia||aa&&aa.length);I.canPublishOGCFeatures=R;N.resolve(R)});return N};P.canPublishSceneServiceFromFeatureService=function(I){var N=this,L=new k.default,
W=I.portal,Z=W.getPortalUser();Z=null===Z||void 0===Z?void 0:Z.userRole;var aa=P.isServicePublishableByUser(I),ia=W&&!W.isPortal&&aa&&I.isAdmin&&Z.canPublishScenes();W=I.featureLayers||[];var R=I.isHostedService&&W.every(function(Aa){return N.canUseForPublish(I,Aa,!0,"scene")}),S=I.tables||[],M=W.every(function(Aa){return"esriGeometryPoint"===(null===Aa||void 0===Aa?void 0:Aa.geometryType)}),X=W.every(function(Aa){return"esriGeometryMultiPatch"===(null===Aa||void 0===Aa?void 0:Aa.geometryType)}),
fa=["esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset","esriFieldTypeBigInteger"],ea=W.some(function(Aa){var Ea;return null===(Ea=null===Aa||void 0===Aa?void 0:Aa.fields)||void 0===Ea?void 0:Ea.some(function(va){return fa.includes(va.type)})}),ha=(I.resultData||[]).filter(function(Aa){return"Scene Service"===Aa.type}),ra=-1<I.typeKeywords.indexOf("View Service")||I.isViewService;P.isServicePublishableByUser(I).then(function(Aa){Aa=!(!(Aa&&ia&&R&&(M||X))||ea||ha&&ha.length||
ra||S.length||I.hasGeocodeReviewTable);I.canPublishScenes=Aa;L.resolve(Aa)});return L};P.canPublishViewServiceFromFeatureService=function(I){var N=new k.default,L=I.portal||{},W=L.getPortalUser();W=null===W||void 0===W?void 0:W.userRole;var Z=I.isAdmin&&W.canPublishFeatures(),aa=P.isMultipatchFeatureService(I),ia=I.isLocationTrackingService&&!L.isPortal,R=u.default.includes(I.typeKeywords,"View Service");P.isServicePublishableByUser(I,!0).then(function(S){S=aa||!S||!Z||R||ia?!1:!0;I.canPublishView=
S;N.resolve(S)});return N};P.canPublishImageServiceAsTiled=function(I){var N,L=new k.default,W=P.canPublishFromImageService(I),Z=null===(N=I.portal.getPortalUser())||void 0===N?void 0:N.userRole.canPublishTiledImagery();I.canPublishImageServiceAsTiled=W&&Z&&!P.isTiledOnlyImageryService(I.serviceInfo);L.resolve(I.canPublishImageServiceAsTiled);return L};P.canPublishImageServiceAsDynamic=function(I){var N,L=new k.default,W=P.canPublishFromImageService(I),Z=null===(N=I.portal.getPortalUser())||void 0===
N?void 0:N.userRole.canPublishDynamicImagery();I.canPublishImageServiceAsDynamic=W&&Z&&P.isTiledOnlyImageryService(I.serviceInfo);L.resolve(I.canPublishImageServiceAsDynamic);return L};P.canExportImagery=function(I){var N,L=new k.default,W=P.canPublishFromImageService(I),Z=null===(N=I.portal.getPortalUser())||void 0===N?void 0:N.userRole.canPublishTiledImagery();I.canExportImagery=W&&Z&&P.isTiledOnlyImageryService(I.serviceInfo);L.resolve(I.canExportImagery);return L};P.canEnableAttachments=function(I){var N,
L=new k.default,W=I.isDataView,Z=I.isLocationTrackingService,aa=-1<(null===(N=I.typeKeywords)||void 0===N?void 0:N.indexOf("Spatiotemporal"));N=C.default.isDefined(I.canEnableAttachments)?I.canEnableAttachments:!(!I.isHostedService||W||Z||aa||!I.canUpdate);I.canEnableAttachments=N;L.resolve(N);return L};P.canEditViewAttachments=function(I){C.default.isDefined(I.canEditViewAttachments)||(I.canEditViewAttachments=!!(I.isHostedService&&I.isDataView&&I.canUpdate));return I.canEditViewAttachments};P.canAppendData=
function(I){var N,L,W=new k.default,Z=u.default.includes(I.typeKeywords,"View Service"),aa=I.isLocationTrackingService,ia="Feature Service"===I.type&&(null===(N=I.layers)||void 0===N?void 0:N.some(function(R){return!(null===R||void 0===R||!R.infoFor3D)}));N=!Z&&!aa&&!ia&&I.isAdmin&&I.isHostedService&&(I.portal.isPortal&&(null===(L=I.serviceInfo)||void 0===L?void 0:L.supportsAppend)||!I.portal.isPortal&&(I.layers||[]).some(function(R){return R.supportsAppend}));I.canAppendData=N;W.resolve(N);return W};
P.canUseForPublish=function(I,N,L,W){var Z;I=(null===(Z=I.itemData)||void 0===Z?void 0:Z.layers)||[];Z=u.default.find(I,function(aa){return aa.id===N.id});I=(0,r.default)(N);if(null===Z||void 0===Z?0:Z.layerDefinition)I.drawingInfo=l.__assign(l.__assign({},I.drawingInfo),Z.layerDefinition.drawingInfo),I.featureReduction=l.__assign(l.__assign({},I.featureReduction),Z.layerDefinition.featureReduction);return(0,c.default)(l.__assign({},I),L,W)};P.canPublishFromImageService=function(I){var N,L=I.portal,
W=I.isAdmin,Z=I.isOwner,aa=I.isHostedService,ia=I.serviceInfo,R=I.type,S=null===(N=L.getPortalUser())||void 0===N?void 0:N.userRole;N=W||Z;L=aa&&!L.isPortal;return"Image Service"===R&&(null===ia||void 0===ia?void 0:ia.bandCount)&&!u.default.includes(I.typeKeywords,"Elevation 3D Layer")&&N&&L&&(null===S||void 0===S?void 0:S.canCreateItem())&&(null===S||void 0===S?void 0:S.canPublishImageCollection())};P.isTiledOnlyImageryService=function(I){I=I.capabilities.split(",").map(function(N){return N.toLowerCase().trim()});
return u.default.includes(I,"tilesonly")};P.isTiledImageryService=function(I){var N=new k.default;I="Image Service"===I.type&&u.default.includesSome(I.typeKeywords,["Elevation 3D Layer","Tiled Imagery"]);N.resolve(I);return N};P.isEnterpriseCachedMapImageLayer=function(I){var N,L=new k.default;I=I.portal.isPortal&&"Map Service"===I.type&&!0===(null===(N=I.serviceInfo)||void 0===N?void 0:N.singleFusedMapCache);L.resolve(I);return L};P.isServiceEditableByUser=function(I){var N,L=I.isOrgItem,W=I.isHostedService,
Z=I.serviceInfo,aa=I.canEditService,ia=I.portal,R=new k.default,S=ia.getPortalUser();ia=null===(N=null===S||void 0===S?void 0:S.userRole)||void 0===N?void 0:N.canEditFeaturesFullControl();N=S&&L;L=-1<((null===Z||void 0===Z?void 0:Z.capabilities)||"").indexOf("Editing");Z=null===Z||void 0===Z?void 0:Z.isMultiServicesView;C.default.isDefined(aa)||(I.canEditService=!(!W||Z||!(I.canUpdate||L&&ia&&N)));R.resolve(I.canEditService);return R};P.isExportableByUser=function(I){var N,L=I.portal,W=I.serviceInfo,
Z=I.isLocationTrackingService,aa=I.isHostedService,ia=I.isAdmin,R=I.type,S=new k.default,M=L.getPortalUser();W=!!(-1<(null===(N=null===W||void 0===W?void 0:W.capabilities)||void 0===N?void 0:N.indexOf("Extract")));N=(null===M||void 0===M?void 0:M.userRole)&&M.userRole.canCreateItem();N=M&&W&&(!M.isOrgUser||N);C.default.isDefined(I.canExport)||(I.canExport=!(!aa||!M||L.isPortal&&(!L.isPortal||Z)||!("Feature Service"===R&&ia||N)));S.resolve(I.canExport);return S};P.isOverwriteableService=function(I,
N){var L,W,Z=I.type,aa=I.serviceInfo,ia=I.adminServiceInfo,R=I.isPortal,S=I.isSDS,M=I.typeKeywords,X=I.sourceData,fa=new k.default,ea={shapefile:1,"file geodatabase":1,geojson:1};ia=null===(L=R&&!S?aa:ia)||void 0===L?void 0:L.capabilities;L=e.default.stringToArray(ia||"",",",!0);L=u.default.includes(L,"ChangeTracking");!N&&u.default.includes(M,"Cloud Drive")&&fa.resolve(!1);I.isHostedService&&"Feature Service"===Z&&I.serviceInfo&&!1===I.serviceInfo.sourceSchemaChangesAllowed&&fa.resolve(!1);!I.isAdmin||
!I.isHostedService||"Feature Service"!==Z||aa.syncEnabled||I.isDataView||L?fa.resolve(!1):X&&X.owner===I.owner&&(null===(W=X.type)||void 0===W?void 0:W.toLowerCase())in ea?fa.resolve(!0):!X||"CSV"!==X.type&&"Microsoft Excel"!==X.type?fa.resolve(!1):P.fetchPublishParameters(I).then(function(ha){I.publishParameters=ha;fa.resolve(!!ha)});return fa};P.isOverwriteableCloudService=function(I){var N=new k.default,L=I.cloudProviderInfo,W=I.sourceData;if(u.default.includes(I.typeKeywords,"Cloud Drive")&&L&&
L.mimeType){var Z=!W;I.sourceData=W||{type:-1!==L.mimeType.indexOf("csv")?"CSV":"Microsoft Excel"};P.isOverwriteableService(I,!0).then(function(aa){Z&&(I.sourceData=null);N.resolve(!!aa)})}else N.resolve(!1);return N};P.isApplicationCreateableFromItem=function(I){var N=new k.default,L=I.portal.getPortalUser(),W=null===L||void 0===L?void 0:L.userRole;W=W&&W.canCreateItem()||L&&!L.isOrgUser;var Z=!1;if(C.default.isDefined(I.isApplicationCreateableFromItem))N.resolve(I.isApplicationCreateableFromItem);
else{I.isApplicationCreateableFromItem=Z;if(W)if(u.default.includes(I.types,"is-map")||u.default.includes(I.types,"is-scene"))I.isApplicationCreateableFromItem=!0,I.privileges.push("can-create-app"),u.default.includes(I.types,"is-map")&&d.default.showCreateDashboard&&L&&L.isOrgUser&&I.privileges.push("can-create-dashboard-item"),Z=!0;else if(u.default.includes(I.typeKeywords,"Configurable")&&u.default.includes(I.typeKeywords,"createAppWithoutMap")&&!u.default.includes(I.typeKeywords,"Web AppBuilder for ArcGIS")||
u.default.includes(I.typeKeywords,"Web AppBuilder for ArcGIS")&&L.isOrgUser)I.isApplicationCreateableFromItem=!0,I.types.push("is-hostedTemplate"),Z=!0;N.resolve(Z)}return N};P.isMultipatchFeatureService=function(I){var N=I.isHostedService,L=I.typeKeywords,W=I.serviceInfo;I="Feature Service"===I.type&&(N||u.default.includes(L,"Hosted"));W=((null===W||void 0===W?void 0:W.layers)||[]).some(function(Z){return"esriGeometryMultiPatch"===(null===Z||void 0===Z?void 0:Z.geometryType)});return I&&W};P.registerItemActions=
function(I,N,L,W,Z){(0,v.default)("[class*\x3djs-action-]",N).forEach(function(aa){var ia=n.default.get(aa,"data-action");L[ia]&&I.own((0,g.default)(aa,"click",function(R){R.preventDefault();if(Z&&Z(ia))R.stopPropagation();else L[ia](l.__assign({evt:R,item:I.item,user:I.portalUser,page:W,scope:I}))}))},I);(0,v.default)(".js-telemetry-primary-action",N).forEach(function(aa){var ia,R=n.default.get(aa,"data-telemetry-action");(null===(ia=window.location.href)||void 0===ia?0:ia.includes("item.html"))&&
(null===aa||void 0===aa?0:aa.closest(".js-actions-container"))&&R&&I.own((0,g.default)(aa,"click",function(S){var M,X,fa;"Open in Map Viewer"===R&&(null===(M=null===aa||void 0===aa?void 0:aa.href)||void 0===M?0:M.includes("webmap/viewer.html"))&&(R="Open in Map Viewer Classic");null===(X=null===W||void 0===W?void 0:W.telemetry)||void 0===X?void 0:X.logEvent({eventType:"other",pageName:"item",pageUrl:window.location.href,path:window.location.pathname,attribute:null===(fa=null===W||void 0===W?void 0:
W._item)||void 0===fa?void 0:fa.type,category:"item action",action:R})}))},I)};P.calculateExpectedTiles=function(I,N,L){var W=new w.default(N.xmax,N.ymin,N.spatialReference);N=new w.default(N.xmin,N.ymax,N.spatialReference);N=A.default.getContainingTileCoords(I,N,L);I=A.default.getContainingTileCoords(I,W,L);I=(I.row+1-N.row)*(I.col+1-N.col);return 0>=I?1:I};P.sizeInMB=function(I){var N=I||0;0<I&&(N=I/1048567);N=Math.round(100*N)/100;return t.default.format(N)};P.getHashParts=function(){return(0,b.default)().split("/")};
P.splitHashParts=function(I){return I?I.split("/"):[""]};P.removeUrlQueryParameter=function(I,N){var L;if(I){var W=G.default.urlToObject(I),Z=W.path,aa=(0,b.default)()?"#"+(0,b.default)():"";if(!(N&&(null===(L=W.query)||void 0===L?0:L[N])))return I;delete W.query[N];I=0;for(var ia in W.query)Object.prototype.hasOwnProperty.call(W.query,ia)&&ia!==N&&(L=0===I?"?":"\x26",Z="".concat(Z).concat(L).concat(ia,"\x3d").concat(encodeURIComponent(W.query[ia])),I++);return Z+aa}return I};P.needsToken=function(I,
N){var L,W=null===(L=I.portal)||void 0===L?void 0:L.getPortalUser();L=I.serverToken||(null===W||void 0===W?void 0:W.getToken());return I&&"WFS"!==I.type&&"OGCFeatureServer"!==I.type&&W&&((I.isServiceProxy||I.hasKMLItemData)&&"public"!==I.access||I.isHostedService&&(I.isAdmin||"public"!==I.access)||I.isFeatureCollection&&"public"!==I.access)?N+(L?"?token\x3d".concat(L):""):N};P.getNeededToken=function(I){var N,L=null===(N=I.portal)||void 0===N?void 0:N.getPortalUser();N=I.serverToken||(null===L||void 0===
L?void 0:L.getToken());return I&&"WFS"!==I.type&&L&&((I.isServiceProxy||I.hasKMLItemData)&&"public"!==I.access||I.isHostedService&&(I.isAdmin||"public"!==I.access)||I.isFeatureCollection&&"public"!==I.access)?N:null};P.addToken=function(I){I=P.needsToken(I,I.url);return-1<(null===I||void 0===I?void 0:I.indexOf("?token\x3d"))};P.needsSSL=function(I,N){return I.portal.allSSL||-1<window.location.protocol.indexOf("https:")?m.default.getSecureUrl(I.url):N};P.registerKeystrokeHandler=function(I,N){return(0,g.default)(I,
10>=(0,y.default)("ie")||7>(0,y.default)("trident")?"keydown":"keyup",N)};P.registerEnterSpaceKeystrokeHandler=function(I,N){return(0,g.default)(I,"keyup",function(L){L.keyCode!==D.default.ENTER&&L.keyCode!==D.default.SPACE||N(L)})};P.sendAllResources=function(I,N,L,W,Z,aa){var ia=new k.default;L=(0,r.default)(L);var R=[],S=L.splice(0,N);for(C.default.isDefined(aa)||(aa=!0);0<(null===S||void 0===S?void 0:S.length);)R.push(m.default.request({url:I,content:W(S)},l.__assign({usePost:aa},Z||{}))),S=L.splice(0,
N);(0,E.default)(R).then(function(M){return ia.resolve(M)},function(M){return ia.reject(M)});return ia};P.sendAllResourcesWithDelay=function(I,N,L,W,Z){function aa(){setTimeout(function(){ea=R.splice(0,N);0<(null===ea||void 0===ea?void 0:ea.length)&&(m.default.request({url:I,content:W(ea)},{usePost:!0}).then(function(ha){X++;S.push(ha);X>=ia&&M.resolve(S)},function(ha){X++;X>=ia&&M.reject(ha)}),fa++,aa())},0===fa?0:Z)}var ia=Math.ceil(L.length/N),R=(0,r.default)(L),S=[],M=new k.default,X=0,fa=0,ea;
aa();return M};P.sendAllResourcesSerially=function(I,N,L,W){function Z(){M=ia.splice(0,N);0<(null===M||void 0===M?void 0:M.length)&&m.default.request({url:I,content:W(M)},{usePost:!0}).then(function(fa){X++;R.push(fa);X>=aa?S.resolve(R):Z()},function(fa){X++;X>=aa?S.reject(fa):Z()})}var aa=Math.ceil(L.length/N),ia=(0,r.default)(L),R=[],S=new k.default,M,X=0;Z();return S};P.fetchAllResources=function(I,N,L){var W=new k.default,Z=1,aa=[],ia=100,R,S,M,X;N=N||{};L=L||"results";N.start=Z;!N.num||N.num>
ia?N.num=ia:ia=N.num;m.default.request({url:I,content:N}).then(function(fa){if(null===fa||void 0===fa?0:fa[L]){aa=aa.concat(fa[L]);Z=fa.nextStart;R=fa.total-aa.length;S=Math.ceil(R/ia);M=[];if(-1<Z)for(X=0;X<S;X++)N.start=Z+X*ia,M.push(m.default.request({url:I,content:N}));(0,E.default)(M).then(function(ea){ea.forEach(function(ha){aa=aa.concat(ha[L])});W.resolve(aa)},function(ea){return W.reject(ea)})}else W.resolve(aa)},function(fa){return W.reject(fa)});return W};P.deleteItem=function(I,N){var L=
"".concat(I.userItemUrl,"/delete");if("Deep Learning Package"===(null===I||void 0===I?void 0:I.type)){var W=new k.default;P.uninstallDeepLearningPackage(I).then(function(Z){"uninstallFail"===(null===Z||void 0===Z?void 0:Z.messageCode)?W.resolve(Z):m.default.request({url:L,content:N},{usePost:!0}).then(function(aa){return W.resolve(aa)})});return W}return m.default.request({url:L,content:N},{usePost:!0})};P.uninstallDeepLearningPackage=function(I){var N,L=I.portal,W=new k.default,Z=null===(N=L.helperServices)||
void 0===N?void 0:N.rasterAnalytics;N=(I.portal.getPortalUser()||{}).getToken();var aa={messageCode:"uninstallFail"},ia={messageCode:"uninstallSuccess"};if((null===L||void 0===L?0:L.isPortal)&&Z&&C.default.isDefined(Z.url)){L={modelItemId:JSON.stringify({itemId:I.id})};var R="".concat(Z.url,"/UninstallDeepLearningModel");W=(new F.default(R+(N?"?token\x3d".concat(N):""))).submitJob(L).then(function(S){var M,X,fa=null===(X=null===(M=null===S||void 0===S?void 0:S.results)||void 0===M?void 0:M.uninstallSucceed)||
void 0===X?void 0:X.paramUrl;S=S.jobId;return fa&&S?m.default.request({url:"".concat(R,"/jobs/").concat(S,"/").concat(fa)},{usePost:!0}).then(function(ea){return(ea=null===ea||void 0===ea?void 0:ea.value)&&ea===I.id?ia:aa}):aa},function(){return aa})}else W.resolve(ia);return W};P.getUserProfile=function(I){I="string"===typeof I?{username:I}:I;var N="".concat(d.default.restBaseUrl,"community/users/").concat(I.username),L=m.default.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg");
return m.default.request({url:N}).then(function(W){var Z=W.thumbnail?z.default.PortalUtil.formatUrl("".concat(N,"/info/").concat(W.thumbnail)):L;return l.__assign(l.__assign(l.__assign({},W),{thumbnailUrl:Z}),I)})};P.getItemSharing=function(I){var N=new k.default,L=I.portal,W=I.itemOwner,Z=I.access,aa=I.canUpdate,ia=I.isOwner,R=I.userItemUrl,S=L.getPortalUser(),M=(null===S||void 0===S?void 0:S.canShareOthers)&&I.isOwnedByMyOrg,X={access:Z};aa&&(ia||(null===S||void 0===S?0:S.canViewOthersOrgItems))||
M?m.default.request({url:R}).then(function(fa){X=fa.sharing;var ea=null===X||void 0===X?void 0:X.groups;"shared"===X.access&&1===(null===ea||void 0===ea?void 0:ea.length)&&ea[0]===S.favGroupId&&(X={access:"private"});ea&&(fa={userGroups:null===S||void 0===S?void 0:S.getGroups(),ownerGroups:!I.isOwner&&W?W.getGroups():null},(0,E.default)(fa).then(function(ha){(ha=(ha.userGroups||[]).concat(ha.ownerGroups||[]).filter(function(ra){return u.default.find(ea,function(Aa){return ra.id===Aa})}).map(function(ra){return'id: "'.concat(ra.id,
'"')}))&&ha.length?L.queryGroups({q:ha.join(" OR "),num:100},!0).then(function(ra){X.groups=(ra.results||[]).sort(function(Aa,Ea){return Ea.title.localeCompare(Aa.title)});X.total=ra.total;I=l.__assign(l.__assign({},I),{sharing:X});N.resolve(X)}):(delete X.groups,I=l.__assign(l.__assign({},I),{sharing:X}),N.resolve(X))}))}):(I=l.__assign(l.__assign({},I),{sharing:X}),N.resolve(X));return N};P.protectItem=function(I){I="".concat(I.userItemUrl,"/protect");return m.default.request({url:I},{usePost:!0})};
P.unprotectItem=function(I){I="".concat(I.userItemUrl,"/unprotect");return m.default.request({url:I},{usePost:!0})};P.protectGroup=function(I){I="".concat(d.default.restBaseUrl,"community/groups/").concat(I.id,"/protect");return m.default.request({url:I},{usePost:!0})};P.unprotectGroup=function(I){I="".concat(d.default.restBaseUrl,"community/groups/").concat(I.id,"/unprotect");return m.default.request({url:I},{usePost:!0})};P.fetchPublishParameters=function(I){var N=I.sourceData;I=I.itemUrl;var L=
new k.default;I="".concat(I,"/info/publishParameters.json");!N||"CSV"!==N.type&&"Microsoft Excel"!==N.type?L.resolve(!1):m.default.request({url:I}).then(function(W){return L.resolve(W)},function(){return L.resolve(!1)});return L};P.fetchRegisteredAppInfo=function(I){I=m.default.getSecureUrl("".concat(I.userItemUrl,"/registeredAppInfo"));return m.default.request({url:I})};P.refreshAppSecret=function(I){I="".concat(m.default.getSecureUrl(d.default.restBaseUrl),"oauth2/apps/").concat(I,"/resetSecret");
return m.default.request({url:I},{usePost:!0})};P.registerApp=function(I,N){N=N?"apps/".concat(I.client_id,"/update"):"registerApp";N="".concat(m.default.getSecureUrl(d.default.restBaseUrl),"oauth2/").concat(N);return m.default.request({url:N,content:I},{usePost:!0})};P.unregisterApp=function(I){I="".concat(m.default.getSecureUrl(d.default.restBaseUrl),"oauth2/apps/").concat(I,"/unregister");return m.default.request({url:I},{usePost:!0})};P.enableAttachments=function(I,N,L){I="".concat(I.adminUrl,
"/").concat(N.id,"/updateDefinition");return m.default.request({url:I,content:{updateDefinition:JSON.stringify({hasAttachments:!!L})}},{usePost:!0}).then(function(){return N.hasAttachments=L})};P.isItemListable=function(I){var N=I.portal.getPortalUser().userRole,L=N&&N.isCustom()&&N.canManageMarketplace();N=N&&N.isAdmin()||L;L=u.default.includes(I.typeKeywords,"Service Proxy")&&I.sourceUrl&&(-1<I.sourceUrl.indexOf(".arcgis.com")||-1<I.sourceUrl.indexOf(".esri.com"));var W=d.default.self,Z=W.canListApps;
W=W.canListData;!I.listed&&d.default.self&&N?W&&L?(N=new k.default,N.resolve("Geoprocessing Service"===I.type)):Z&&(u.default.includes(I.typeKeywords,"Registered App")||u.default.includes(["ArcGIS Pro Add In","AppBuilder Widget Package"],I.type))?(N=new k.default,N.resolve(!0)):W&&"Rule Package"===I.type?(N=new k.default,N.resolve(!0)):W?N=P.isServiceListable(I):(N=new k.default,N.resolve(!1)):(N=new k.default,N.resolve(!1));return N};P.isServiceListable=function(I){var N="".concat(d.default.restBaseUrl,
"portals/isServerRegistered"),L=I.type?I.type.toLowerCase():"",W=I.url&&m.default.parseUrl(I.url);"web map"===L?(N=new k.default,N.resolve(!0)):u.default.includes(["feature service","map service","image service","scene service"],L)?m.default.isHostedServiceItem(I)?(N=new k.default,N.resolve(!0)):W&&C.default.isDefined(W.protocol)&&C.default.isDefined(W.host)?(I={serverUrl:"".concat(W.protocol,"://").concat(W.host)},N=m.default.request({url:N,content:I}).then(function(Z){return Z.registered})):(N=
new k.default,N.resolve(!1)):(N=new k.default,N.resolve(!1));return N};P.findLayer=function(I,N){var L=parseInt(I,10);if(C.default.isDefined(L))return(N||[]).filter(function(W){return W.id===L}).shift()};P.getServiceNameFromUrl=function(I){var N=I.url||"",L=/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|WMServer|SceneServer|VectorTileServer|StreamServer)).*/gi,W=N.replace(L,"").replace(/^.*\//,"").replace(/\?.*$/,"");
N=N.replace(/http.+\/(arcgis\/rest\/services|\/.*\/rest\/services|arcgis\/services)\/?/gi,"").match(L);try{return N?decodeURI(W):I.title}catch(Z){return W}};P.getAppPurpose=function(I){I=I.typeKeywords;if(u.default.includes(I,"Ready To Use")||u.default.includes(I,"Ready to Use"))return H.default.itemProperties.readyToUse;if(u.default.includes(I,"selfConfigured"))return H.default.itemProperties.selfConfigurable;if(u.default.includes(I,"Configurable"))return H.default.itemProperties.configurable;if(u.default.includes(I,
"Code Sample"))return H.default.itemProperties.codeSample};P.getAppApi=function(I){var N={"Windows Mobile":H.default.common.mobile,"ArcGIS for iPhone":H.default.common.ios,"ArcGIS for Windows Phone":H.default.common.windowsPhone,"ArcGIS for Windows Store":H.default.common.windowsStore,"ArcGIS for Windows Universal":H.default.common.windowsUniversal,"ArcGIS for Android":H.default.common.Android,Flex:H.default.common.Flex,JavaScript:H.default.common.JavaScript,Silverlight:H.default.common.Silverlight,
"Web ADF":H.default.common.WebADF,Other:H.default.common.other,Java:"Java",Qt:"Qt",".NET-Windows Desktop":".NET\u2013Windows Desktop",WPF:"WPF","OS X":"OS X"};return Object.keys(N).reduce(function(L,W){u.default.includes(I.typeKeywords,W)&&(L=N[W]);return L},"")};P.linkify=function(I){if(!I)return I;I=m.default.htmlEncode(I);for(var N=I.indexOf("http"),L;-1<N;){L=I.substring(N,N+8);if(-1<L.indexOf("http://")||-1<L.indexOf("https://")){L=!0;if(6<N&&"href\x3d"===I.substring(N-6,N-1).toLowerCase()){L=
!1;var W=I.toLowerCase().indexOf("/a",N);N=N+I.toLowerCase().substring(N,W).length+1}if(L){L=I.indexOf(" ",N);-1===L&&(L=I.length);W=I.substring(N,L);var Z='\x3cspan class\x3d"esriItemLinks"\x3e\x3ca href\x3d"'.concat(W,'" target\x3d"_blank"\x3e').concat(W,"\x3c/a\x3e\x3c/span\x3e");I="".concat(I.substring(0,N)).concat(Z).concat(I.substring(L,I.length));N=N+Z.length-W.length+5}}else N+=1;N=I.indexOf("http",N)}return I};P.includeTimestampInRequest=function(I){if(10>=(0,y.default)("ie")||7>(0,y.default)("trident"))I.ts=
(new Date).getTime();return I};P.fetchIDPConfig=function(){var I="".concat(m.default.getSecureUrl(d.default.restBaseUrl),"portals/self/idp");return m.default.request({url:I})};P.checkEnterpriseGroupStore=function(){var I=new k.default,N="".concat(m.default.getPortalAdminBaseUrl(),"/security/config");m.default.request({url:N}).then(function(L){L=null===L||void 0===L?void 0:L.groupStoreConfig;var W=!1,Z=null;if(null===L||void 0===L?0:L.type)Z=null===L||void 0===L?void 0:L.type.toLowerCase(),"builtin"!==
Z&&"saml"!==Z&&(W=!0);I.resolve({storeType:Z,supportsEnterpriseGroups:W})},function(){I.resolve({supportsEnterpriseGroups:!1})});return I};P.enterpriseGroupMatches=function(I,N){return!(!C.default.isDefined(I)||!C.default.isDefined(N)||I.toLowerCase()!==N.toLowerCase())};P.isAmazonBasedTileService=function(I){return!m.default.isPortal()&&/tiles[\s\S]*.arcgis.com\//gi.test(I)};P.createDialogWrapper=function(I,N){var L=(new h.default(I)).placeAt(document.body);L.setContent(N);g.default.once(L,"hide",
function(){return L.destroyRecursive()});return L};P.createSpecifiedDialog=function(I,N,L){var W=N?new I(N):new I,Z=W._dialog||W.dialog;if(Z)g.default.once(Z,"hide",function(){var aa;Z.destroyRecursive();W.destroyRecursive();null===(aa=null===L||void 0===L?void 0:L.focus)||void 0===aa?void 0:aa.call(L)});return W};P.createConfirmationDialog=function(I){var N=document.createElement("div");document.body.appendChild(N);var L=l.__assign(l.__assign({},I),{onCancel:function(){var W;N.parentElement&&(null===
(W=I.onCancel)||void 0===W?void 0:W.call(I),I.doNotRemoveContainer||N.remove())},onOk:function(W){var Z;null===(Z=I.onOk)||void 0===Z?void 0:Z.call(I,W);I.autoCloseOnOk&&(I.doNotRemoveContainer||N.remove())},width:I.width||"s",strings:l.__assign({cancel:H.default.common.cancel,close:H.default.common.close,ok:H.default.common.ok,processing:H.default.common.loading,title:H.default.common.notice},I.strings)});(0,K.render)((0,K.h)(Q.default,L),N)};P.getPageRangeString=function(I,N){var L=q.default.locale?
q.default.locale.substring(0,2):"en";N=N?N:H.default.common.pageRange;I.total&&1E4<=I.total&&(I.total="10000+");return x.default.substitute(N["en"===L?"en":"other"],I)};P.sortListByStrProp=function(I,N,L){I.sort(function(W,Z){W=W[N].toLowerCase();Z=Z[N].toLowerCase();return L?W<Z?1:W>Z?-1:0:W<Z?-1:W>Z?1:0})};P.formatDataStoreItem=function(I,N){if((N||[]).length)if(N.some(function(L){return u.default.includes(L.toLowerCase(),"cloud")}))I+=" (".concat(H.default.AddDatastoreDlg.cloud,")");else if(-1!==
N.indexOf("egdb"))I+=" (".concat(H.default.AddDatastoreDlg.database,")");else if(-1!==N.indexOf("folder"))I+=" (".concat(H.default.AddDatastoreDlg.folder,")");else if(-1!==N.indexOf("nosql"))I+=" (".concat(H.default.AddDatastoreDlg.nosql,")");else if(-1!==N.indexOf("fileShare")||-1!==N.indexOf("hdfs")||-1!==N.indexOf("hive")||-1!==N.indexOf("dataStore"))I+=" (".concat(H.default.AddDatastoreDlg.bigdata,")");return I};P.downloadImage=function(I){var N;I=I.item;var L=I.portal,W=new a.default,Z=new k.default,
aa=null===(N=L.helperServices)||void 0===N?void 0:N.rasterUtilities;N=(I.portal.getPortalUser()||{}).getToken();if((null===L||void 0===L?0:L.isPortal)&&(null===aa||void 0===aa?0:aa.url)){I={inputImageLayer:JSON.stringify({itemId:I.id})};var ia="".concat(aa.url,"/DownloadRaster"),R=N?"?token\x3d".concat(N):"";Z=(new F.default(ia+R)).submitJob(I,function(S){var M,X="esriJobSucceeded"===(null===S||void 0===S?void 0:S.jobStatus)&&(null===(M=S.results)||void 0===M?void 0:M.outputRaster);S=S.jobId;W.updateMessage(H.default.downloadImageDlg.succeeded);
return X&&S?(W.hide(),m.default.request({url:"".concat(ia,"/jobs/").concat(S,"/results/outputRaster")},{usePost:!0}).then(function(fa){var ea;return null===(ea=null===fa||void 0===fa?void 0:fa.value)||void 0===ea?void 0:ea[0]})):""},function(S){S="".concat(aa.url,"/DownloadRaster/jobs/").concat(S.jobId,"/cancel")+R;W.setCancelUrl(S)});W.show();W.updateMessage(H.default.downloadImageDlg.message)}else Z.resolve("");return Z};P.cancelDownloadImage=function(I,N){(new F.default(I)).cancelJob(N,null,null)};
P.goToPage=function(I,N){var L=N.orgId;N=encodeURIComponent(N.username);var W=m.default.getUser(),Z=null===W||void 0===W?void 0:W.userRole,aa=(null===W||void 0===W?void 0:W.username)===N;I=("groups"===I&&(null===Z||void 0===Z?0:Z.canViewOrgGroups())||"content"===I&&(null===Z||void 0===Z?0:Z.canManageItems())||(null===Z||void 0===Z?0:Z.isAdmin())||aa)&&L===W.orgId?"".concat(d.default.baseUrl).concat(I,".html").concat(aa?"":"?user\x3d".concat(N)):"".concat(d.default.baseUrl,"search.html?q\x3downer:%22").concat(N,
"%22\x26restrict\x3dfalse#").concat(I);window.open(I,"_blank")};P.checkLayersForNewFieldTypes=function(I){var N,L=["esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"];var W=(null===(N=I.url)||void 0===N?0:N.match(/Server\/(\d+)/i))?(null===I||void 0===I?void 0:I.featureLayers)||(null===I||void 0===I?void 0:I.layers):null===I||void 0===I?void 0:I.layers;return!(null===W||void 0===W||!W.some(function(Z){return(Z.fields||[]).some(function(aa){return L.includes(aa.type)})}))};
return P}()})},"arcgisonline/map/core/canUseForPublish":function(){define(["require","exports"],function(f,B){function l(c,u){var t;if("esriGeometryMultiPatch"===c.geometryType)return!1;var e=c.drawingInfo,r=e.renderer;e=e.labelingInfo;var m=c.fields,a=c.featureReduction;if(null===(t=c.layerDefinition)||void 0===t?0:t.featureReduction)a=c.layerDefinition.featureReduction;if("heatmap"===r.type||"esriGeometryPolygon"===c.geometryType&&r.uniqueValueInfos&&r.visualVariables&&r.visualVariables.some(function(q){if("sizeInfo"===
q.type&&!q.target)return!0}))return!1;var h=m.filter(function(q){return"esriFieldTypeDate"===q.type}).map(function(q){return q.name});return h.length&&(-1<h.indexOf(r.field)||-1<h.indexOf(r.field1)||r.visualVariables&&r.visualVariables.some(function(q){if(q.field&&-1<h.indexOf(q.field))return!0}))||a&&0<Object.keys(a).length||!u&&(null===e||void 0===e?0:e.length)?!1:!0}function d(c,u){var t,e,r=c.drawingInfo,m=r.renderer;r=r.labelingInfo;var a=c.featureReduction,h=c.fields;if(-1===["esriGeometryPoint",
"esriGeometryMultiPatch"].indexOf(c.geometryType)||m.observationRenderer||m.latestObservationRenderer||"heatmap"===m.type||(null===(t=m.valueExpression)||void 0===t?0:t.length))return!1;if(m.visualVariables)for(c=0;c<m.visualVariables.length;c++)if(m.visualVariables[c].valueExpression&&m.visualVariables[c].valueExpression.length)return!1;var q=h.filter(function(n){return"esriFieldTypeDate"===n.type}).map(function(n){return n.name});return q.length&&(-1<q.indexOf(m.field)||-1<q.indexOf(m.field1)||
(null===(e=m.visualVariables)||void 0===e?0:e.some(function(n){if(n.field&&-1<q.indexOf(n.field))return!0})))||a&&0<Object.keys(a).length||!u&&(null===r||void 0===r?0:r.length)?!1:!0}Object.defineProperty(B,"__esModule",{value:!0});B.default=function(c,u,t){return"Feature Layer"===c.type&&c.drawingInfo?"scene"===t?d(c,u):l(c,u):!1}})},"arcgisonline/pages/utils/arrays":function(){define(["require","exports"],function(f,B){return function(){function l(){}l.includes=function(d,c){return-1<(null===d||
void 0===d?void 0:d.indexOf(c))};l.find=function(d,c){if(null===d||void 0===d?0:d.length)for(var u=void 0,t=0;t<d.length;t++)if(u=d[t],c(u,t))return u};l.findIndex=function(d,c){if(null===d||void 0===d?0:d.length)for(var u=0;u<d.length;u++)if(c(d[u],u))return u;return-1};l.toArray=function(d){return Object.keys(d).map(function(c){return d[c]})};l.includesSome=function(d,c){return d&&(null===c||void 0===c?void 0:c.some(function(u){return-1<d.indexOf(u)}))};l.includesAll=function(d,c){return d&&(null===
c||void 0===c?void 0:c.every(function(u){return-1<d.indexOf(u)}))};l.filterOut=function(d,c){var u;return null!==(u=c&&(null===d||void 0===d?void 0:d.filter(function(t){return-1===c.indexOf(t)})))&&void 0!==u?u:[]};l.concatUnique=function(d,c){var u=[].concat(null!==d&&void 0!==d?d:[]);c&&c.forEach(function(t){t&&-1===u.indexOf(t)&&u.push(t)});return u};l.from=function(d){if(Array.from)return Array.from(d);for(var c=[],u=0;u<d.length;u++)c.push(d[u]);return c};l.batch=function(d,c){void 0===c&&(c=
100);return(null!==d&&void 0!==d?d:[]).reduce(function(u,t,e){0===e%c&&u.push(d.slice(e,e+c));return u},[])};return l}()})},"arcgisonline/pages/utils/number":function(){define(["require","exports"],function(f,B){function l(t,e){if(void 0===e||null===e)return c.has(u)||c.set(u,new Intl.NumberFormat(u.locale)),c.get(u).format(t);e={locale:d,options:{minimumFractionDigits:e,maximumFractionDigits:e}};c.has(e)||c.set(e,new Intl.NumberFormat(e.locale,e.options));return c.get(e).format(t)}Object.defineProperty(B,
"__esModule",{value:!0});B.format=void 0;var d={ar:"ar-u-nu-latn"}[document.documentElement.lang]||document.documentElement.lang,c=new WeakMap,u={locale:d};B.format=l;B.default={format:l}})},"arcgisonline/pages/utils/strings":function(){define(["require","exports"],function(f,B){return function(){function l(){}l.isString=function(d){return(null===d||void 0===d?void 0:d.constructor)===String};l.startsWith=function(d,c){return c&&0===(null===d||void 0===d?void 0:d.indexOf(c))};l.endsWith=function(d,
c){if(d&&c){var u=d.lastIndexOf(c);return-1<u&&d.length>=c.length&&u===d.length-c.length}return!1};l.includes=function(d,c){return c&&-1<(null===d||void 0===d?void 0:d.indexOf(c))};l.isSet=function(d){return!!(0<(null===d||void 0===d?void 0:d.length))};l.areEqual=function(d,c){var u=this.isSet(d),t=this.isSet(c);return!u&&!t||u&&t&&d.trim()===c.trim()};l.replaceAll=function(d,c,u){return d.replace(new RegExp(this.escapeRegExp(c),"g"),u)};l.escapeRegExp=function(d){return d.replace(/[.*+?^${}()|[\]\\]/g,
"\\$\x26")};l.escapeQuestionMarks=function(d){return d.replace(/[?\\]/g,"\\$\x26")};l.stringToArray=function(d,c,u){d=d instanceof Array?d:d.split(c);return u?d.map(function(t){return t.trim()}):d};l.isValidHex=function(d){return/[0-9A-Fa-f]{6}/g.test(d)};l.stringToHex=function(d){for(var c=0,u=0;u<d.length;u++)c=d.charCodeAt(u)+((c<<5)-c);d="#";for(u=0;3>u;u++)d+=("00"+(c>>8*u&255).toString(16)).substr(-2);return d};l.hexToRgb=function(d){d=d.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(c,
u,t,e){return u+u+t+t+e+e});return(d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(d))?{r:parseInt(d[1],16),g:parseInt(d[2],16),b:parseInt(d[3],16)}:null};l.htmlDecode=function(d){var c=document.createElement("textarea");c.innerHTML=d;return c.value};l.htmlEncode=function(d){var c=document.createElement("textarea");c.innerText=d;return c.innerHTML};l.encodeWhitespace=function(d){return d?d.replace(/\s/g,"%20"):""};l.encodeAngleBrackets=function(d){var c;return null!==(c=null===d||void 0===d?void 0:
d.replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;"))&&void 0!==c?c:""};l.decodeAngleBrackets=function(d){var c;return null!==(c=null===d||void 0===d?void 0:d.replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e"))&&void 0!==c?c:""};l.escapeHTML=function(d){var c={"\x26":"\x26#x38;","\x3c":"\x26#x3C;","\x3e":"\x26#x3E;",'"':"\x26#x22;","'":"\x26#x27;","/":"\x26#x2F;"};return String(d).replace(/[&<>"'/]/gm,function(u){return c[u]})};l.shouldStripHTML=function(d){var c;if(!d)return!1;d=null!==(c=null===d||void 0===
d?void 0:d.split("\x3c"))&&void 0!==c?c:[];return 1<d.length&&d.some(function(u){return-1<u.search(/^[A-Za-z\/]+.*[>]+.*$/m)})};l.stripHTML=function(d){if(!d)return"";var c=document.createElement("div");c.innerHTML=d;return c.textContent};l.addHyperlinks=function(d){return d.replace(/(https?:\/\/[^\s]+)/g,function(c){return'\x3ca href\x3d"'.concat(c,'" target\x3d"_blank"\x3e').concat(c,"\x3c/a\x3e")})};l.escapeNewlines=function(d){return null===d||void 0===d?void 0:d.replace(/(?:\r)/g,"\x26#10;").replace(/(?:\n)/g,
"\x26#13;")};l.restoreNewlines=function(d){return null===d||void 0===d?void 0:d.replace(/(?:&#10;)/g,"\r").replace(/(?:&#13;)/g,"\n")};l.insertHTMLLineBreaks=function(d){return null===d||void 0===d?void 0:d.replace(/(?:"&#10;&#13;|&#10;|&#13;|\r\n|\r|\n")/g,"\x3cbr\x3e")};l.containsHTTPProtocol=function(d){var c;return-1<(null!==(c=null===d||void 0===d?void 0:d.toLowerCase())&&void 0!==c?c:"").indexOf("http://")};return l}()})},"arcgisonline/pages/utils/clone":function(){define(["require","exports"],
function(f,B){function l(u){for(var t=Object.keys(u),e=Array(t.length),r=0;r<t.length;++r)e[r]=d(u[r]);return e}function d(u){return"object"!==typeof u||null===u?u:Array.isArray(u)?l(u):u instanceof Map?new Map(l(Array.from(u))):u instanceof Set?new Set(l(Array.from(u))):ArrayBuffer.isView(u)?new u.constructor(u.buffer.slice(),u.byteOffset,u.length):u instanceof Node&&u.cloneNode?u.cloneNode(!0):c(u)}function c(u){if("object"!==typeof u||null===u)return u;if(u instanceof Date)return new Date(u);if(Array.isArray(u))return l(u);
if(u instanceof Map)return new Map(l(Array.from(u)));if(u instanceof Set)return new Set(l(Array.from(u)));if(u instanceof Node&&u.cloneNode)return u.cloneNode(!0);var t={},e;for(e in u)t[e]=d(u[e]);return t}Object.defineProperty(B,"__esModule",{value:!0});B.default=c})},"arcgisonline/sharing/util":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/dijit/dialog/GeneralDlg,arcgisonline/sharing/dijit/dialog/SubscriptionStatusDlg,dojo/request/xhr,arcgisonline/sharing/dijit/dialog/ConfirmDialog,arcgisonline/pages/utils/mapViewer,arcgisonline/pages/utils/storage,esri/IdentityManager,esri/libs/sanitizer/Sanitizer,dojo/sniff,dojo/has,dojo/json,dojo/cookie"],
function(f,B,l){f.provide("arcgisonline.sharing.util");f.require("arcgisonline.sharing.dijit.dialog.GeneralDlg");f.require("arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg");f.require("dojo.request.xhr");f.require("arcgisonline.sharing.dijit.dialog.ConfirmDialog");f.require("arcgisonline.pages.utils.mapViewer");f.require("arcgisonline.pages.utils.storage");f.require("esri.IdentityManager");f.require("esri.libs.sanitizer.Sanitizer");f.require("dojo.sniff");f.require("dojo.has");f.require("dojo.json");
f.require("dojo.cookie");arcgisonline.sharing.util={i18n:f.mixin({},f.i18n.getLocalization("arcgisonline","arcgisonline")),sanitizer:new esri.libs.sanitizer.Sanitizer,storageUtil:arcgisonline.pages.utils.storage,mapViewerUtil:arcgisonline.pages.utils.mapViewer,getSocialNetworkBadges:function(d,c){var u={},t=f.create,e=arcgisonline.sharing.util.socialNetworkTitle(d.title),r=unescape(window.location.href);if(!1===d.isOrganization||!0===d.isOrganization)r=arcgisonline.sharing.util.urlToObject(window.location.href).path+
"?id\x3d"+d.id;esriGeowConfig.self&&esriGeowConfig.self.customBaseUrl&&!arcgisonline.sharing.util.isPortal()&&-1<r.indexOf(esriGeowConfig.self.customBaseUrl)&&(r=r.replace(location.host,esriGeowConfig.self.portalHostname));var m=t("span",{class:"esriItemLinks"}),a=encodeURI("socialnetwork.html?t\x3d"+e+"\x26n\x3dfb\x26u\x3d"+r),h=esri.i18nBundle.itemLinks.shareFacebook,q=t("a",{target:"_blank",onclick:f.partial(this._checkShare,d,"Facebook"),href:a,alt:h,title:h},m);t("span",{class:"facebookBadge dijitInline"},
q);a=t("a",{target:"_blank",onclick:f.partial(this._checkShare,d,"Facebook"),href:a,alt:h,title:h},m);t("span",{innerHTML:esri.i18nBundle.itemLinks.facebook},a);u.facebook=m;m=t("span",{class:"esriItemLinks"});a=encodeURI("socialnetwork.html?t\x3d"+e+"\x26n\x3dtw\x26u\x3d"+r);h=esri.i18nBundle.itemLinks.shareTwitter;q=t("a",{target:"_blank",onclick:f.partial(this._checkShare,d,"Twitter"),href:a,alt:h,title:h},m);t("span",{class:"twitterBadge dijitInline"},q);a=t("a",{target:"_blank",onclick:f.partial(this._checkShare,
d,"Twitter"),href:a,alt:h,title:h},m);t("span",{innerHTML:esri.i18nBundle.itemLinks.twitter},a);u.twitter=m;c(u)},socialNetworkTitle:function(d){100<d.length&&(d=d.substring(0,97)+"...");return encodeURIComponent(d.replace(/ /g,"+"))},shortenUrl:function(d,c,u){var t=esriGeowConfig.bitlyUrl,e,r=new f.Deferred;this.request({url:t,content:{longUrl:d,format:"json"}}).then(function(m){(e=m&&m.data&&m.data.url||null)?c?c(e):r.resolve(e):u?u(m,args):r.reject(m,args)},function(m){u?u({},{}):r.reject(m)});
return r},_checkShare:function(d,c,u){c=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance();u=d&&esri.isDefined(d.isInvitationOnly);d.access&&"public"!==d.access&&c.show({title:esri.i18nBundle.itemLinks[u?"shareGroup":"shareItem"],message:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks[u?"shareGroupMsg":"shareItemMsg"])})},checkSession:function(){esriGeowConfig.userInfo=esriGeowConfig.userInfo||""},isLoggedIn:function(){return null==
this.getUser()?!1:!0},isSilverlightInstalled:function(){if(esriGeowConfig.isSilverlightInstalled)return esriGeowConfig.isSilverlightInstalled;esriGeowConfig.isSilverlightInstalled=!1;if(f.isIE)try{new ActiveXObject("AgControl.AgControl"),esriGeowConfig.isSilverlightInstalled=!0}catch(d){}else navigator.plugins["Silverlight Plug-In"]&&(esriGeowConfig.isSilverlightInstalled=!0);return esriGeowConfig.isSilverlightInstalled},couldHaveArcGISDesktop:function(){return-1!=navigator.userAgent.indexOf("Windows")&&
-1==navigator.userAgent.indexOf("Windows Phone")?!0:!1},requireAuthentication:function(){if(!0===this.isLoggedIn())return!0;var d="";-1==esriGeowConfig.signin.indexOf("http")&&(d=esriGeowConfig.baseUrl,!1!==esriGeowConfig.useSSL&&(d=arcgisonline.sharing.util.getSecureUrl(d)));d+=esriGeowConfig.signin;window.location!==d&&(d+="?returnUrl\x3d"+escape(window.location));window.location=d+"\x26error\x3d403";return!1},htmlHasText:function(d){if(d&&0<d.length){d=f.trim(d);for(var c=!1,u=0;u<d.length;u++){var t=
d.charAt(u);if("\x3c"==t)c=!0;else if("\x3e"==t)c=!1;else if(!c&&""!==t)return!0}}return!1},endsWith:function(d,c){return null==d||null==c?!1:d.toLowerCase().lastIndexOf(c.toLowerCase())==d.length-c.length},toFullDateString:function(d){d=new Date(parseFloat(d));return f.date.locale.format(d,{selector:"date",formatLength:"long"})},toDateTimeString:function(d){d=new Date(parseFloat(d));return f.date.locale.format(d,{formatLength:"medium"})},capitalize:function(d){return d.charAt(0).toUpperCase()+d.substr(1).toLowerCase()},
getItemDetailsLinkInfo:function(d){var c=null,u=null,t=null;esri.isDefined(d.isInvitationOnly)?(c=esriGeowConfig.baseUrl+"group.html?owner\x3d"+d.owner+"\x26title\x3d"+encodeURIComponent(d.title),u=esri.i18nBundle.itemLinks.details,t=esri.i18nBundle.itemLinks.viewGroupDetails):(c=esriGeowConfig.baseUrl+"item.html?id\x3d"+d.id,u=esri.i18nBundle.itemLinks.details,t=esri.i18nBundle.itemLinks.viewDetails);return null!==c&&null!==u?{link:c,label:u,tip:t}:null},_isOperationsViewSupportedBrowser:function(d){var c=
navigator.userAgent.toLowerCase(),u=RegExp("Chrome/[.0-9]* (?!Mobile)","i"),t=RegExp("Chrome/[.0-9]* Mobile","i");t=f.has("iphone")||f.has("ipod")||f.has("android")&&t.test(c)||-1<c.indexOf("android")&&-1<c.indexOf("mobile")||-1<c.indexOf("windows phone")||f.has("bb");d&&(t=t||c.match(/ipad/i)||f.has("android")&&u.test(c));return t?!1:void 0!==f.has("chrome")?(d=f.has("chrome"),!isNaN(d)&&19<=d):void 0!==f.has("ff")?4<=f.has("ff"):c.match(/fxios/i)?(d=parseFloat(c.split("fxios/")[1]),!isNaN(d)&&1<=
d):void 0!==f.has("ie")?9<=f.has("ie"):void 0!==f.has("edge")?1<=f.has("edge"):void 0!==f.has("trident")?5<=f.has("trident"):void 0!==f.has("safari")?(d=parseFloat(c.split("version/")[1]),c=parseFloat(c.split("crios/")[1]),isNaN(d)&&isNaN(c)||!isNaN(d)&&5.1>d||!isNaN(c)&&31>c?!1:!0):!1},_isPremiumService:function(d){return d.owner&&-1<d.owner.toLowerCase().indexOf("esri")&&(-1<f.indexOf(d.typeKeywords,"Requires Subscription")||-1<f.indexOf(d.typeKeywords,"Requires Credits"))},getGalleryMainLinkInfo:function(d){var c=
d.type?d.type:"",u="",t="",e="",r=null;t=this.getUser();u=!1;u=null;esriGeowConfig.portalHostname&&(u=esriGeowConfig.portalHostname);u&&(e=u.split("."),1<e.length&&(u=e[e.length-2]+"."+e[e.length-1]));if("Web Map"==c)u=!t&&this._isPremiumService(d),t='JavaScript:arcgisonline.map.mapUtil.openMap("'+d.id+'",'+u+")",e=esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer),u=esri.i18nBundle.itemLinks.open;else if("CityEngine Web Scene"===c)u=window.location.protocol+"//"+window.location.host+
arcgisonline.sharing.util.getHomeAppContext()+"/apps/CEWebViewer/viewer.html?3dWebScene\x3d"+d.id,t="JavaScript:void(0)",r=f.hitch(arcgisonline.sharing.util,"openPage",u),e=esri.i18nBundle.itemLinks.viewApp,u=esri.i18nBundle.itemLinks.open;else if("Web Scene"===c&&esriGeowConfig.sceneViewerEnabled)u=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?webscene\x3d"+d.id,t="JavaScript:void(0)",r=f.hitch(arcgisonline.sharing.util,
"openPage",u,!0),e=esri.i18nBundle.itemLinks.openSceneViewer,u=esri.i18nBundle.itemLinks.open;else if("Scene Service"===c&&esriGeowConfig.sceneViewerEnabled)u=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+d.id,t="JavaScript:void(0)",r=f.hitch(arcgisonline.sharing.util,"openPageAndCount",d.id,u,!0),e=esri.i18nBundle.itemLinks.addToSceneViewer,u=esri.i18nBundle.itemLinks.open;else if("Operation View"===c){u=window.location;
c=arcgisonline.sharing.util.isPortal();t=u.protocol+"//"+(c?esriGeowConfig.self.portalHostname:u.host);u=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboard/index.html#/"+d.id;e=-1<f.indexOf(d.typeKeywords,"TabletLayout");f.indexOf(d.typeKeywords,"DesktopLayout");var m=-1<f.indexOf(d.typeKeywords,"V2");this.couldHaveArcGISDesktop()&&!m?r=f.partial(arcgisonline.sharing.util.openPageAndCount,d.id,t+(c?"/apps/dashboard-win/":"/opsdashboard/")+
"OperationsDashboard.application?open\x3d"+d.id):!m&&e&&this._isOperationsViewSupportedBrowser()&&(r=f.hitch(arcgisonline.sharing.util,"openPageAndCount",d.id,u,!1));t="JavaScript:void(0)";e=esri.i18nBundle.itemLinks.openOperationViewDesktop;u=esri.i18nBundle.itemLinks.open}else"Map Service"==c||"Feature Service"==c||"Image Service"==c||"KML"==c||"Feature Collection"==c||"Stream Service"==c||"Vector Tile Service"===c?(e=d&&d.extraUrlParams?!0:!1,u=!t&&this._isPremiumService(d),t='JavaScript:arcgisonline.map.mapUtil.addToMap("'+
d.id+'",'+u+","+e+")",u=esri.i18nBundle.itemLinks.open,e=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),esriGeowConfig.sceneViewerEnabled&&"Image Service"===c&&-1<f.indexOf(d.typeKeywords,"Elevation 3D Layer")&&(t=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+d.id,e=esri.i18nBundle.itemLinks.addToSceneViewer,u=esri.i18nBundle.itemLinks.open)):"WMS"==
c||"WFS"===c||"WMTS"===c?(t=d.noWebMercator?'JavaScript:arcgisonline.map.mapUtil.openOnGCSMap("'+d.id+'")':'JavaScript:arcgisonline.map.mapUtil.addToMap("'+d.id+'")',u=esri.i18nBundle.itemLinks.open,e=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer)):this.couldHaveArcGISDesktop()&&"Globe Service"==c?(t="JavaScript:void(0)",r=f.hitch(arcgisonline.sharing.util,"openPageAndCount",d.id,d.url+"?f\x3dlyr\x26v\x3d9.3"),u=esri.i18nBundle.itemLinks.open,
e=esri.i18nBundle.itemLinks.openDesktop):this.couldHaveArcGISDesktop()&&("Map Package"==c||"Basemap Package"===c||"Mobile Map Package"==c||"Mobile Basemap Package"===c||"Layer Package"==c||"Pro Map"==c||"Layout"==c||-1<f.indexOf(d.typeKeywords,"lyrx"))?d&&d.name.indexOf(".mmpk")&&d.name.indexOf(".bpk")&&-1===d.name.indexOf(".bpkx")&&-1===d.name.indexOf(".lpkx")&&-1===d.name.indexOf(".mpkx")&&-1===d.name.indexOf(".lyrx")&&-1===d.name.indexOf(".mapx")&&-1===d.name.indexOf(".pagx")?(t="JavaScript:void(0)",
r=f.hitch(this,"_fetchItemData",d,this.getItemPkgPath(d)),u=esri.i18nBundle.itemLinks.open,e=esri.i18nBundle.itemLinks.openDesktop):(t="JavaScript:void(0)",r=f.hitch(this,"_fetchItemData",d,this.getItemDataPath(d)),u=esri.i18nBundle.itemLinks.open,e=esri.i18nBundle.itemLinks.downloadArchive):!this.couldHaveArcGISDesktop()||"Geoprocessing Package"!=c&&"Geoprocessing Service"!=c&&"Locator Package"!=c&&"Tile Package"!=c&&"Vector Tile Package"!=c&&"Scene Package"!==c?!this.couldHaveArcGISDesktop()||"Map Document"!=
c&&"Published Map"!=c&&"Globe Document"!=c&&"Scene Document"!=c&&"Layer"!=c?!this.couldHaveArcGISDesktop()||"Desktop Add In"!=c&&"ArcGIS Pro Add In"!==c?!this.isSilverlightInstalled()||"Explorer Map"!=c&&"Explorer Layer"!=c&&"Explorer Add In"!=c?"File Geodatabase"===c||"CSV Collection"===c||"KML Collection"===c||"Rule Package"===c||"GeoJson"===c||"Shapefile"===c||"CSV"===c||"Map Template"===c||"Code Sample"===c||"Geoprocessing Sample"===c||"Service Definition"===c||"Workflow Manager Package"===c||
"Windows Viewer Add-in"===c||"ArcPad Package"===c||"Operations Dashboard Addin"===c||"CAD Drawing"===c||"Microsoft Word"===c||"Raster function template"===c||"Microsoft PowerPoint"===c||"Microsoft Powerpoint"===c||"Microsoft Excel"===c||"iWork Pages"===c||"iWork Keynote"===c||"iWork Numbers"===c||"Image"===c||"Visio Document"===c||"PDF"===c||"Desktop Application"===c||"Task File"===c||"Project Package"===c||"ArcGIS Pro Configuration"===c||"Project Template"===c||"Desktop Style"===c||"Native Application Installer"===
c||"360 VR Experience"==c?(t="JavaScript:void(0)",r=f.hitch(this,"_fetchItemData",d,this.getItemDataPath(d)),u=esri.i18nBundle.itemLinks.open,e=esri.i18nBundle.itemLinks.downloadArchive):"Web Mapping Application"!=c&&"Application"!=c&&"Native Application"!==c&&"Native Application Template"!==c&&"Hub Initiative"!==c&&"Hub Page"!==c&&"Hub Site Application"!==c||-1!==f.indexOf(d.typeKeywords,"Web AppBuilder for ArcGIS")?"Desktop Application Template"==c?-1<f.indexOf(d.typeKeywords,"desktopApplicationTemplateUrl")&&
d.url&&0<d.url.length?(t="JavaScript:void(0)",r=f.hitch(arcgisonline.sharing.util,"openPageAndCount",d.id,d.url),e=esri.i18nBundle.itemLinks.viewApp,u=esri.i18nBundle.itemLinks.open):(t="JavaScript:void(0)",r=f.hitch(this,"_fetchItemData",d,this.getItemDataPath(d)),u=esri.i18nBundle.itemLinks.open,e=esri.i18nBundle.itemLinks.downloadArchive):"Mobile Application"==c?d.url&&0<d.url.length?(esriGeowConfig.urlKey&&(-1<d.url.indexOf(esriGeowConfig.urlKey)||u&&-1<d.url.indexOf(u))&&(d.originalUrl=d.originalUrl||
f.clone(d.url),d.url=esriGeowConfig.allSSL?d.url.replace("http:","https:"):d.url),t="JavaScript:void(0)",r=f.hitch(arcgisonline.sharing.util,"openPageAndCount",d.id,d.url),u=esri.i18nBundle.itemLinks.open,e=esri.i18nBundle.itemLinks.getApp):(t=esriGeowConfig.baseUrl+"item.html?id\x3d"+d.id,u=esri.i18nBundle.itemLinks.details,e=esri.i18nBundle.itemLinks.viewDetails):"Windows Mobile Package"==c?(t="JavaScript:void(0)",r=f.hitch(this,"_fetchItemData",d,this.getItemDataPath(d)),u=esri.i18nBundle.itemLinks.open,
e=esri.i18nBundle.itemLinks.download):"Document Link"===c?(t="JavaScript:void(0)",r=f.hitch(arcgisonline.sharing.util,"openPageAndCount",d.id,d.url),u=e=esri.i18nBundle.itemLinks.open):"Form"===c&&t&&t.accountId?(t="arcgis-survey123://?itemId\x3d"+d.id+"\x26username\x3d"+t.username,e=esri.i18nBundle.itemLinks.openInSurvey123,u=esri.i18nBundle.itemLinks.open):"Workforce Project"===c?(t=(c=arcgisonline.sharing.util.isPortal())?window.location.host+arcgisonline.sharing.util.getHomeAppContext():"workforce.arcgis.com",
t=window.location.protocol+"//"+t+((c?"/apps/workforce/#":"")+("/projects/"+d.id+"/dispatch/assignments")),e=esri.i18nBundle.itemLinks.openWorkforce,u=esri.i18nBundle.itemLinks.open):"Insights Workbook"===c||"Insights Data Engineering Workbook"===c||"Insights Page"===c||"Insights Model"===c||"Insights Data Engineering Model"===c?(t=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/insights/#/",t="Insights Model"===c||"Insights Data Engineering Model"===
c?t+("?model\x3d"+d.id):"Insights Page"===c?t+("view/"+d.id):t+d.id,e=esri.i18nBundle.itemLinks.openInsights,u=esri.i18nBundle.itemLinks.open):"Dashboard"===c?(r=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboards/index.html#/"+d.id,t="JavaScript:void(0)",r=f.hitch(arcgisonline.sharing.util,"openPageAndCount",d.id,r),e=esri.i18nBundle.itemLinks.dashboardView,u=esri.i18nBundle.itemLinks.open):(t=esriGeowConfig.baseUrl+"item.html?id\x3d"+
d.id,u=esri.i18nBundle.itemLinks.details,e=esri.i18nBundle.itemLinks.viewDetails):(c=arcgisonline.sharing.util.isHostedTemplateItem(d.url),d.url&&0<d.url.length?(esriGeowConfig.urlKey&&(-1<d.url.indexOf(esriGeowConfig.urlKey)||u&&-1<d.url.indexOf(u))&&-1===d.url.indexOf(".opendata")&&(d.originalUrl=d.originalUrl||f.clone(d.url),d.url=esriGeowConfig.allSSL?d.url.replace("http:","https:"):d.url),d.access&&"public"!==d.access&&c&&!arcgisonline.sharing.util.isPortal()&&(r=arcgisonline.sharing.util.parseUrl(d.url),
d.url=d.url.replace(r.host,window.location.hostname)),arcgisonline.sharing.util.isPortal()&&d.url&&0===d.url.indexOf("/")&&(r=esriGeowConfig.self.portalHostname.substring(esriGeowConfig.self.portalHostname.indexOf("/")),-1===d.url.indexOf(r)&&(d.url=r+d.url)),t="JavaScript:void(0)",r=f.hitch(arcgisonline.sharing.util,"openPageAndCount",d.id,d.url),e=esri.i18nBundle.itemLinks.viewApp,u=esri.i18nBundle.itemLinks.open):(t=esriGeowConfig.baseUrl+"item.html?id\x3d"+d.id,u=esri.i18nBundle.itemLinks.details,
e=esri.i18nBundle.itemLinks.viewDetails)):(t="JavaScript:void(0)",r=f.hitch(this,"_fetchItemData",d,this.getItemDataPath(d)),u=esri.i18nBundle.itemLinks.open,e=esri.i18nBundle.itemLinks.openExplorer):(t="JavaScript:void(0)",r=f.hitch(this,"_fetchItemData",d,this.getItemDataPath(d)),u=esri.i18nBundle.itemLinks.open,e=esri.i18nBundle.itemLinks.openDesktop):(t="JavaScript:void(0)",r=f.hitch(this,"_fetchItemData",d,this.getItemDataPath(d)),u=esri.i18nBundle.itemLinks.open,e=esri.i18nBundle.itemLinks.openDesktop):
(t="JavaScript:void(0)",r=f.hitch(this,"_fetchItemData",d,this.getItemPkgPath(d)),u=esri.i18nBundle.itemLinks.open,e="Task File"!==c?esri.i18nBundle.itemLinks.openDesktop:esri.i18nBundle.itemLinks.openProfessional);return{label:u,href:t,target:"",tip:e,onclick:r}},getMapViewerLink:function(d){return d===this.mapViewerUtil.MapViewerType.Classic?esriGeowConfig.baseUrl+"webmap/viewer.html":esriGeowConfig.newMapViewerUrl},getHomePageGalleryLinkInfo:function(d){var c=d.type?d.type:"",u="",t="",e="",r=
null;u=this.getUser();t=!1;e=this.mapViewerUtil.determineMapViewerSetting();t=null;esriGeowConfig.portalHostname&&(t=esriGeowConfig.portalHostname);if(t){var m=t.split(".");1<m.length&&(t=m[m.length-2]+"."+m[m.length-1])}if("Web Map"==c)e=this.getMapViewerLink(e)+"?webmap\x3d"+d.id,m=esriGeowConfig.baseUrl+"signin.html?returnUrl\x3d"+encodeURIComponent(e),t=(t=!u&&this._isPremiumService(d))?m:e,e=esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer),u=esri.i18nBundle.itemLinks.open;
else if("CityEngine Web Scene"===c)t=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/CEWebViewer/viewer.html?3dWebScene\x3d"+d.id,e=esri.i18nBundle.itemLinks.viewApp,u=esri.i18nBundle.itemLinks.open;else if("Web Scene"===c&&esriGeowConfig.sceneViewerEnabled)t=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?webscene\x3d"+d.id,e=esri.i18nBundle.itemLinks.openSceneViewer,
u=esri.i18nBundle.itemLinks.open;else if("Scene Service"===c&&esriGeowConfig.sceneViewerEnabled)t=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+d.id,e=esri.i18nBundle.itemLinks.addToSceneViewer,u=esri.i18nBundle.itemLinks.open;else if("Operation View"===c){t=window.location;c=arcgisonline.sharing.util.isPortal();u=-1<f.indexOf(d.typeKeywords,"V2");t=t.protocol+"//"+(c?esriGeowConfig.self.portalHostname:t.host);
e=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboard/index.html#/"+d.id;m=this.couldHaveArcGISDesktop();if(u)return null;if(m)t=t+(c?"/apps/dashboard-win/":"/opsdashboard/")+"OperationsDashboard.application?open\x3d"+d.id;else if(this._isOperationsViewSupportedBrowser())t=e;else return null;e=esri.i18nBundle.itemLinks.openOperationViewDesktop;u=esri.i18nBundle.itemLinks.open}else if("Map Service"==c||"Feature Service"==c||"Image Service"==
c||"KML"==c||"Stream Service"==c||"Vector Tile Service"===c||"Feature Collection"==c){e=this.getMapViewerLink(e)+"?layers\x3d"+d.id;if("KML"==c||"Stream Service"==c||"Feature Collection"==c)e=esriGeowConfig.baseUrl+"webmap/viewer.html?layers\x3d"+d.id;m=esriGeowConfig.baseUrl+"signin.html?returnUrl\x3d"+encodeURIComponent(e);t=(t=!u&&this._isPremiumService(d))?m:e;u=esri.i18nBundle.itemLinks.open;e=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer);
esriGeowConfig.sceneViewerEnabled&&"Image Service"===c&&-1<f.indexOf(d.typeKeywords,"Elevation 3D Layer")&&(t=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+d.id,e=esri.i18nBundle.itemLinks.addToSceneViewer,u=esri.i18nBundle.itemLinks.open)}else"WMS"==c||"WFS"===c||"WMTS"===c?(t=esriGeowConfig.baseUrl+"webmap/viewer.html?layers\x3d"+d.id,u=esri.i18nBundle.itemLinks.open,e=esri.substitute({appTitle:esriGeowConfig.portalName||
"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer)):this.couldHaveArcGISDesktop()&&"Globe Service"==c?(t="JavaScript:void(0)",r=f.hitch(arcgisonline.sharing.util,"openPageAndCount",d.id,d.url+"?f\x3dlyr\x26v\x3d9.3"),u=esri.i18nBundle.itemLinks.open,e=esri.i18nBundle.itemLinks.openDesktop):this.couldHaveArcGISDesktop()&&("Map Package"==c||"Mobile Map Package"==c||"Basemap Package"===c||"Mobile Basemap Package"===c||"Layer Package"==c||"Pro Map"==c||"Layout"==c||-1<f.indexOf(d.typeKeywords,"lyrx"))?
d&&-1===d.name.indexOf(".bpkx")&&-1===d.name.indexOf(".mmpk")&&-1===d.name.indexOf(".bpk")&&-1===d.name.indexOf(".lpkx")&&-1===d.name.indexOf(".mpkx")&&-1===d.name.indexOf(".lyrx")&&-1===d.name.indexOf(".mapx")&&-1===d.name.indexOf(".pagx")?(t="JavaScript:void(0)",r=f.hitch(this,"_fetchItemData",d,this.getItemPkgPath(d)),u=esri.i18nBundle.itemLinks.open,e=esri.i18nBundle.itemLinks.openDesktop):(t="JavaScript:void(0)",r=f.hitch(this,"_fetchItemData",d,this.getItemDataPath(d)),u=esri.i18nBundle.itemLinks.open,
e=esri.i18nBundle.itemLinks.downloadArchive):!this.couldHaveArcGISDesktop()||"Geoprocessing Package"!=c&&"Locator Package"!=c&&"Tile Package"!=c&&"Vector Tile Package"!=c?!this.couldHaveArcGISDesktop()||"Map Document"!=c&&"Published Map"!=c&&"Globe Document"!=c&&"Scene Document"!=c&&"Layer"!=c?!this.couldHaveArcGISDesktop()||"Desktop Add In"!=c&&"ArcGIS Pro Add In"!==c?!this.isSilverlightInstalled()||"Explorer Map"!=c&&"Explorer Layer"!=c&&"Explorer Add In"!=c?"File Geodatabase"===c||"CSV Collection"===
c||"KML Collection"===c||"Rule Package"===c||"GeoJson"===c||"Shapefile"===c||"CSV"===c||"Map Template"===c||"Code Sample"===c||"Geoprocessing Sample"===c||"Service Definition"===c||"Workflow Manager Package"===c||"Windows Viewer Add-in"===c||"ArcPad Package"===c||"Operations Dashboard Addin"===c||"Microsoft Word"===c||"CAD Drawing"===c||"Raster function template"===c||"Microsoft PowerPoint"===c||"Microsoft Powerpoint"===c||"Microsoft Excel"===c||"iWork Pages"===c||"iWork Keynote"===c||"iWork Numbers"===
c||"Image"===c||"Visio Document"===c||"PDF"===c||"Desktop Application"===c||"Task File"===c||"Project Package"===c||"ArcGIS Pro Configuration"===c||"Project Template"===c||"Desktop Style"===c||"Native Application Installer"===c||"360 VR Experience"==c?(t="JavaScript:void(0)",r=f.hitch(this,"_fetchItemData",d,this.getItemDataPath(d)),u=esri.i18nBundle.itemLinks.open,e=esri.i18nBundle.itemLinks.downloadArchive):"Desktop Application Template"==c?-1<f.indexOf(d.typeKeywords,"desktopApplicationTemplateUrl")&&
d.url&&0<d.url.length?(t="JavaScript:void(0)",r=f.hitch(arcgisonline.sharing.util,"openPageAndCount",d.id,d.url),u=e=esri.i18nBundle.itemLinks.open):(t="JavaScript:void(0)",r=f.hitch(this,"_fetchItemData",d,this.getItemDataPath(d)),u=esri.i18nBundle.itemLinks.open,e=esri.i18nBundle.itemLinks.downloadArchive):"Web Mapping Application"==c&&-1===f.indexOf(d.typeKeywords,"Web AppBuilder for ArcGIS")||"Hub Initiative"===c||"Hub Page"===c||"Hub Site Application"===c?(c=arcgisonline.sharing.util.isHostedTemplateItem(d.url),
d.url&&0<d.url.length?(esriGeowConfig.urlKey&&(-1<d.url.indexOf(esriGeowConfig.urlKey)||t&&-1<d.url.indexOf(t))&&-1===d.url.indexOf(".opendata")&&(d.url=esriGeowConfig.allSSL?d.url.replace("http:","https:"):d.url),d.access&&"public"!==d.access&&c&&!arcgisonline.sharing.util.isPortal()&&(r=arcgisonline.sharing.util.parseUrl(d.url),d.url=d.url.replace(r.host,window.location.hostname)),arcgisonline.sharing.util.isPortal()&&d.url&&0===d.url.indexOf("/")&&(r=esriGeowConfig.self.portalHostname.substring(esriGeowConfig.self.portalHostname.indexOf("/")),
-1===d.url.indexOf(r)&&(d.url=r+d.url)),t="JavaScript:void(0)",r=f.hitch(arcgisonline.sharing.util,"openPageAndCount",d.id,d.url),e=esri.i18nBundle.itemLinks.viewApp,u=esri.i18nBundle.itemLinks.open):(t=esriGeowConfig.baseUrl+"item.html?id\x3d"+d.id,u=esri.i18nBundle.itemLinks.details,e=esri.i18nBundle.itemLinks.viewDetails)):"Mobile Application"==c?d.url&&0<d.url.length?(esriGeowConfig.urlKey&&(-1<d.url.indexOf(esriGeowConfig.urlKey)||t&&-1<d.url.indexOf(t))&&(d.url=esriGeowConfig.allSSL?d.url.replace("http:",
"https:"):d.url),t="JavaScript:void(0)",r=f.hitch(arcgisonline.sharing.util,"openPageAndCount",d.id,d.url),u=esri.i18nBundle.itemLinks.open,e=esri.i18nBundle.itemLinks.getApp):(t=esriGeowConfig.baseUrl+"item.html?id\x3d"+d.id,u=esri.i18nBundle.itemLinks.details,e=esri.i18nBundle.itemLinks.viewDetails):"Windows Mobile Package"==c?(t="JavaScript:void(0)",r=f.hitch(this,"_fetchItemData",d,this.getItemDataPath(d)),u=esri.i18nBundle.itemLinks.open,e=esri.i18nBundle.itemLinks.download):"Document Link"===
c?(t="JavaScript:void(0)",r=f.hitch(arcgisonline.sharing.util,"openPageAndCount",d.id,d.url),u=e=esri.i18nBundle.itemLinks.open):"Form"===c&&(!u||u&&u.accountId)?(t=(esriGeowConfig.surveyUrl||"https://survey123.arcgis.com")+"/share/"+d.id+"?portalUrl\x3d"+(location.protocol+"//"+(esriGeowConfig.self.urlKey?esriGeowConfig.self.urlKey+"."+esriGeowConfig.self.customBaseUrl:esriGeowConfig.self.portalHostname)),e=esri.i18nBundle.itemLinks.openSurvey123,u=esri.i18nBundle.itemLinks.open):"Workforce Project"===
c?(u=(c=arcgisonline.sharing.util.isPortal())?window.location.host+arcgisonline.sharing.util.getHomeAppContext():"workforce.arcgis.com",t=window.location.protocol+"//"+u+((c?"/apps/workforce/#":"")+("/projects/"+d.id+"/dispatch/assignments")),e=esri.i18nBundle.itemLinks.openWorkforce,u=esri.i18nBundle.itemLinks.open):"Insights Workbook"===c||"Insights Data Engineering Workbook"===c||"Insights Page"===c||"Insights Model"===c||"Insights Data Engineering Model"===c?(u=window.location.protocol+"//"+window.location.host+
arcgisonline.sharing.util.getHomeAppContext()+"/apps/insights/#/",t=u="Insights Model"===c||"Insights Data Engineering Model"===c?u+("?model\x3d"+d.id):"Insights Page"===c?u+("view/"+d.id):u+d.id,e=esri.i18nBundle.itemLinks.openInsights,u=esri.i18nBundle.itemLinks.open):"Dashboard"===c?(t=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboards/index.html#/"+d.id,e=esri.i18nBundle.itemLinks.dashboardView,u=esri.i18nBundle.itemLinks.open):"StoryMap"===
c?(t="JavaScript:void(0)",r=f.hitch(arcgisonline.sharing.util,"openPageAndCount",d.id,d.url),u=e=esri.i18nBundle.itemLinks.open):"Web Experience"===c&&d.webExperienceUrl?(t=d.webExperienceUrl,u=e=esri.i18nBundle.itemLinks.open):(t=esriGeowConfig.baseUrl+"item.html?id\x3d"+d.id,u=esri.i18nBundle.itemLinks.details,e=esri.i18nBundle.itemLinks.viewDetails):(t="JavaScript:void(0)",r=f.hitch(this,"_fetchItemData",d,this.getItemDataPath(d)),u=esri.i18nBundle.itemLinks.open,e=esri.i18nBundle.itemLinks.openExplorer,
e=esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer)):(t="JavaScript:void(0)",r=f.hitch(this,"_fetchItemData",d,this.getItemDataPath(d)),u=esri.i18nBundle.itemLinks.open,e=esri.i18nBundle.itemLinks.openDesktop):(t="JavaScript:void(0)",r=f.hitch(this,"_fetchItemData",d,this.getItemDataPath(d)),u=esri.i18nBundle.itemLinks.open,e=esri.i18nBundle.itemLinks.openDesktop):(t="JavaScript:void(0)",r=f.hitch(this,"_fetchItemData",d,this.getItemPkgPath(d)),u=esri.i18nBundle.itemLinks.open,e=
"Task File"!==c?esri.i18nBundle.itemLinks.openDesktop:esri.i18nBundle.itemLinks.openProfessional);return{label:u,href:t,target:"",tip:e,onclick:r}},getItemOpenLinkObjects:function(d,c){var u=this.isSilverlightInstalled(),t=[],e=d.type?d.type:"",r=this.getUser(),m=!1;if("Web Map"==e&&-1==f.indexOf(d.typeKeywords,"ArcGIS Online")&&u&&esriGeowConfig.explorerOnline)t.push({label:esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer),onClick:f.partial(arcgisonline.map.mapUtil.openMap,d.id,
m)}),this.couldHaveArcGISDesktop()&&t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,"_fetchItemData",d,this.getItemPkgPath(d))});else if("Web Map"==e)m=!r&&this._isPremiumService(d),t.push({label:esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer),onClick:f.partial(arcgisonline.map.mapUtil.openMap,d.id,m)}),this.couldHaveArcGISDesktop()&&t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,"_fetchItemData",d,this.getItemPkgPath(d))});else if("Map Service"==
e||"Vector Tile Service"===e)m=!r&&this._isPremiumService(d),t.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),onClick:f.partial(arcgisonline.map.mapUtil.addToMap,d.id,m)}),t.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:f.partial(arcgisonline.map.mapUtil.openOnMap,d.id,m)}),esriGeowConfig.sceneViewerEnabled&&t.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,
onClick:f.partial(arcgisonline.sharing.util.openPageAndCount,d.id,window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+d.id,!0)}),"Vector Tile Service"!==e?(this.couldHaveArcGISDesktop()&&!arcgisonline.sharing.util.isHostedServiceItem(d)&&(-1<f.indexOf(d.typeKeywords,"Hosted Service")&&arcgisonline.sharing.util.portalSupportsHostedServices()?t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,
"_fetchItemData",d,this.getPItemPath(d))}):!arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onAGOLFederatedServer(d.url)||arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onFederatedServer(d.url)?t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,"_fetchItemData",d,this.getPItemPath(d))}):d.url&&-1!==d.url.indexOf(".arcgis.com/")&&-1!==d.url.indexOf("//landscape")?t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,"_fetchItemData",
d,this.getPItemPath(d))}):t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.partial(arcgisonline.sharing.util.openPageAndCount,d.id,d.url+"?f\x3dlyr\x26v\x3d9.3")})),this.couldHaveArcGISDesktop()&&arcgisonline.sharing.util.isHostedServiceItem(d)&&t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,"_fetchItemData",d,this.getPItemPath(d))})):(e=d.access&&"public"!==d.access&&r&&r.token?"\x26token\x3d"+r.token:"",r=(d&&d.hasResources?esriGeowConfig.restBaseUrl+"content/items/"+
d.id:d.url)+"/resources/styles/root.json?f\x3dpjson",esri.isDefined(d.hasResources)&&(c&&d&&d.hasResources&&t.push({label:esri.i18nBundle.itemLinks.downloadStyle,onClick:f.partial(arcgisonline.sharing.util.openPage,r+"\x26download\x3dtrue"+e,!0)}),(c&&d&&d.hasResources||d.url&&-1<d.url.indexOf("/VectorTileServer"))&&t.push({label:esri.i18nBundle.itemLinks.viewStyle,onClick:f.partial(arcgisonline.sharing.util.openPage,r+e,!1)})));else if(this.couldHaveArcGISDesktop()&&"Globe Service"==e)t.push({label:esri.i18nBundle.itemLinks.openDesktop,
onClick:f.partial(arcgisonline.sharing.util.openPageAndCount,d.id,d.url+"?f\x3dlyr\x26v\x3d9.3")});else if("Image Service"==e||"Feature Service"==e||"KML"==e||"Feature Collection"==e||"Stream Service"==e){c=d&&d.extraUrlParams?!0:!1;m=!r&&this._isPremiumService(d);if("Image Service"!==e||"Image Service"===e&&-1===f.indexOf(d.typeKeywords,"Elevation 3D Layer"))t.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),onClick:f.partial(arcgisonline.map.mapUtil.addToMap,
d.id,m,c)}),t.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:f.partial(arcgisonline.map.mapUtil.openOnMap,d.id,m,c)});if("KML"==e)this.couldHaveArcGISDesktop()&&t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,"_fetchItemData",d,this.getPItemPath(d))}),t.push({label:esri.i18nBundle.itemLinks.download,onClick:f.hitch(this,"_fetchItemData",d,this.getItemDataPath(d))});else if("Image Service"===
e||"Feature Service"===e)esriGeowConfig.sceneViewerEnabled&&-1===f.indexOf(d.typeKeywords,"Table")&&("Feature Service"===e&&-1===f.indexOf(d.typeKeywords,"HasOnlyMultipatchGeometries")||"Image Service"===e&&-1<f.indexOf(d.typeKeywords,"Elevation 3D Layer"))&&t.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,onClick:f.partial(arcgisonline.sharing.util.openPageAndCount,d.id,window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+
d.id,!0)}),this.couldHaveArcGISDesktop()&&"Image Service"===e&&(d.url&&-1!==d.url.indexOf(".arcgis.com/")||!arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onAGOLFederatedServer(d.url)||arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onFederatedServer(d.url)?t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,"_fetchItemData",d,this.getPItemPath(d))}):t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.partial(arcgisonline.sharing.util.openPageAndCount,
d.id,d.url+"?f\x3dlyr\x26v\x3d9.3")})),this.couldHaveArcGISDesktop()&&"Feature Service"===e&&this.couldHaveArcGISDesktop()&&t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,"_fetchItemData",d,this.getPItemPath(d))})}else if("Geoprocessing Service"===e&&this.couldHaveArcGISDesktop())t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,"_fetchItemData",d,this.getPItemPath(d))});else if("WMS"==e||"WFS"===e||"WMTS"===e)d.noWebMercator?t.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||
"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:f.partial(arcgisonline.map.mapUtil.openOnGCSMap,d.id)}):(t.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),onClick:f.partial(arcgisonline.map.mapUtil.addToMap,d.id)}),t.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:f.partial(arcgisonline.map.mapUtil.openOnMap,d.id)})),esriGeowConfig.sceneViewerEnabled&&
t.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,onClick:f.partial(arcgisonline.sharing.util.openPageAndCount,d.id,window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+d.id,!0)}),this.couldHaveArcGISDesktop()&&t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,"_fetchItemData",d,this.getPItemPath(d))});else if("File Geodatabase"===e||"CSV Collection"===e||"KML Collection"===e||"Rule Package"==
e||"CSV"==e||"GeoJson"===e||"Shapefile"==e||"Service Definition"==e||"ArcPad Package"===e||"Operations Dashboard Addin"===e)t.push({label:esri.i18nBundle.itemLinks.download,onClick:f.hitch(this,"_fetchItemData",d,this.getItemDataPath(d))});else if("Map Package"==e||"Mobile Map Package"===e||"Basemap Package"===e||"Mobile Basemap Package"===e||"Layer Package"==e||"Pro Map"==e||"Layout"==e||-1<f.indexOf(d.typeKeywords,"lyrx"))this.couldHaveArcGISDesktop()&&d&&-1===d.name.indexOf(".bpkx")&&-1===d.name.indexOf(".mmpk")&&
-1===d.name.indexOf(".bpk")&&-1===d.name.indexOf(".lpkx")&&-1===d.name.indexOf(".mpkx")&&-1===d.name.indexOf(".lyrx")&&-1===d.name.indexOf(".mapx")&&-1===d.name.indexOf(".pagx")&&t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,"_fetchItemData",d,this.getItemPkgPath(d))}),t.push({label:esri.i18nBundle.itemLinks.download,onClick:f.hitch(this,"_fetchItemData",d,this.getItemDataPath(d))});else if("Geoprocessing Package"==e||"Locator Package"==e||"Tile Package"==e||"Vector Tile Package"==
e||"Project Package"===e||"Project Template"===e)this.couldHaveArcGISDesktop()&&"Task File"!==e&&"Project Package"!==e&&"Project Template"!==e&&t.push({label:"Task File"!==e?esri.i18nBundle.itemLinks.openDesktop:esri.i18nBundle.itemLinks.openProfessional,onClick:f.hitch(this,"_fetchItemData",d,this.getItemPkgPath(d))}),t.push({label:esri.i18nBundle.itemLinks.download,onClick:f.hitch(this,"_fetchItemData",d,this.getItemDataPath(d))});else if("Scene Package"==e)t.push({label:esri.i18nBundle.itemLinks.download,
onClick:f.hitch(this,"_fetchItemData",d,this.getItemDataPath(d))});else if(!this.couldHaveArcGISDesktop()||"Map Document"!=e&&"Published Map"!=e&&"Globe Document"!=e&&"Scene Document"!=e&&"Layer"!=e)if(!this.couldHaveArcGISDesktop()||"Desktop Add In"!=e&&"ArcGIS Pro Add In"!==e)if("Explorer Layer"==e||"Explorer Add In"==e||"Explorer Map"==e)t.push({label:esri.i18nBundle.itemLinks.openExplorer,onClick:f.hitch(this,"_fetchItemData",d,this.getItemDataPath(d))});else if("Map Template"===e||"Code Sample"===
e||"Geoprocessing Sample"===e||"Workflow Manager Package"===e||"Windows Viewer Add In"===e||"Microsoft Word"===e||"CAD Drawing"===e||"Raster function template"===e||"Microsoft PowerPoint"===e||"Microsoft Powerpoint"===e||"Microsoft Excel"===e||"iWork Pages"===e||"iWork Keynote"===e||"iWork Numbers"===e||"Image"===e||"Visio Document"===e||"PDF"===e||"Desktop Application"===e||"Task File"===e||"Desktop Style"===e||"Native Application Installer"===e||"360 VR Experience"==e||"ArcGIS Pro Configuration"===
e)t.push({label:"PDF"!==e?esri.i18nBundle.itemLinks.download:esri.i18nBundle.itemLinks.open,onClick:f.hitch(this,"_fetchItemData",d,this.getItemDataPath(d))});else if("Desktop Application Template"===e)(c=-1<f.indexOf(d.typeKeywords,"desktopApplicationTemplateUrl"))&&d.url&&d.url.length&&(c=!0,t.push({label:esri.i18nBundle.itemLinks.open,onClick:f.partial(arcgisonline.sharing.util.openPageAndCount,d.id,d.url)})),c||t.push({label:esri.i18nBundle.itemLinks.download,onClick:f.hitch(this,"_fetchItemData",
d,this.getItemDataPath(d))});else if("Web Mapping Application"==e&&-1===f.indexOf(d.typeKeywords,"Web AppBuilder for ArcGIS")||"Mobile Application"==e||"Application"==e||"Native Application"===e||"Native Application Template"===e||"Hub Initiative"===e||"Hub Page"===e||"Hub Site Application"===e)arcgisonline.sharing.util.isHostedTemplateItem(d.url),r=esri.i18nBundle.itemLinks.viewApp,"Mobile Application"==e&&(r=esri.i18nBundle.itemLinks.getApp),arcgisonline.sharing.util.isPortal()&&d.url&&0===d.url.indexOf("/")&&
(e=esriGeowConfig.self.portalHostname.substring(esriGeowConfig.self.portalHostname.indexOf("/")),-1===d.url.indexOf(e)&&(d.url=e+d.url)),d.url&&0<d.url.length&&t.push({label:r,onClick:f.partial(arcgisonline.sharing.util.openPageAndCount,d.id,d.url)}),-1<f.indexOf(d.typeKeywords,"Web AppBuilder")&&c&&(d=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/webappbuilder/index.html?id\x3d"+d.id,d="https:"===window.location.protocol?arcgisonline.sharing.util.getSecureUrl(d):
arcgisonline.sharing.util.getHttpUrl(d),t.push({label:esri.i18nBundle.itemLinks.editApp,onClick:f.partial(arcgisonline.sharing.util.openPage,d,!0)}));else if("Windows Mobile Package"==e)t.push({label:esri.i18nBundle.itemLinks.download,onClick:f.hitch(this,"_fetchItemData",d,this.getItemDataPath(d))});else if("CityEngine Web Scene"==e)e=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/CEWebViewer/viewer.html?3dWebScene\x3d"+d.id,t.push({label:esri.i18nBundle.itemLinks.viewApp,
onClick:f.partial(arcgisonline.sharing.util.openPage,e)}),t.push({label:esri.i18nBundle.itemLinks.download,onClick:f.hitch(this,"_fetchItemData",d,this.getItemDataPath(d))});else if("Web Scene"===e&&esriGeowConfig.sceneViewerEnabled)e=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?webscene\x3d"+d.id,t.push({label:esri.i18nBundle.itemLinks.openSceneViewer,onClick:f.partial(arcgisonline.sharing.util.openPage,e,!0)});else if("Scene Service"===
e&&esriGeowConfig.sceneViewerEnabled)e=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+d.id,t.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,onClick:f.partial(arcgisonline.sharing.util.openPageAndCount,d.id,e,!0)});else if("Operation View"===e){e=window.location;c=arcgisonline.sharing.util.isPortal();r=e.protocol+"//"+(c?esriGeowConfig.self.portalHostname:e.host);m=window.location.protocol+"//"+window.location.host+
arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboard/index.html#/"+d.id;u=-1<f.indexOf(d.typeKeywords,"TabletLayout");f.indexOf(d.typeKeywords,"DesktopLayout");var a=-1<f.indexOf(d.typeKeywords,"V2"),h=this.couldHaveArcGISDesktop();e=this._isOperationsViewSupportedBrowser();h&&!a&&t.push({label:esri.i18nBundle.itemLinks.openOperationViewDesktop,onClick:f.partial(arcgisonline.sharing.util.openPage,r+(c?"/apps/dashboard-win/":"/opsdashboard/")+"OperationsDashboard.application?open\x3d"+d.id)});
!a&&u&&e&&t.push({label:esri.i18nBundle.itemLinks.openOperationViewUrl,onClick:f.partial(arcgisonline.sharing.util.openPage,m,!1)})}else"Document Link"===e?t.push({label:esri.i18nBundle.itemLinks.open,onClick:f.partial(arcgisonline.sharing.util.openPageAndCount,d.id,d.url)}):"Form"===e&&r&&r.accountId?t.push({label:esri.i18nBundle.itemLinks.openSurvey123,onClick:f.partial(arcgisonline.sharing.util.openPage,"arcgis-survey123://?itemId\x3d"+d.id+"\x26username\x3d"+r.username,!0)}):"Workforce Project"===
e?(e=(c=arcgisonline.sharing.util.isPortal())?window.location.host+arcgisonline.sharing.util.getHomeAppContext():"workforce.arcgis.com",t.push({label:esri.i18nBundle.itemLinks.openWorkforce,onClick:f.partial(arcgisonline.sharing.util.openPage,window.location.protocol+"//"+e+((c?"/apps/workforce/#":"")+("/projects/"+d.id+"/dispatch/assignments")),!0)})):"Insights Workbook"===e||"Insights Data Engineering Workbook"===e||"Insights Page"===e||"Insights Model"===e||"Insights Data Engineering Model"===
e?(c=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/insights/#/",c="Insights Model"===e||"Insights Data Engineering Model"===e?c+("?model\x3d"+d.id):"Insights Page"===e?c+("view/"+d.id):c+d.id,t.push({label:esri.i18nBundle.itemLinks.openInsights,onClick:f.partial(arcgisonline.sharing.util.openPage,c,!0)})):"Dashboard"===e&&(r=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboards/index.html#/",
e=this._isOperationsViewSupportedBrowser(!0),d=r+d.id,r=d+"?edit\x3dtrue",t.push({label:esri.i18nBundle.itemLinks.dashboardView,onClick:f.partial(arcgisonline.sharing.util.openPage,d,!1)}),c&&e&&t.push({label:esri.i18nBundle.itemLinks.dashboardEdit,onClick:f.partial(arcgisonline.sharing.util.openPage,r,!1)}));else t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,"_fetchItemData",d,this.getItemDataPath(d))});else t.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:f.hitch(this,
"_fetchItemData",d,this.getItemDataPath(d))});return t},getGroupLinks:function(d){var c=f.create,u=c("span",{class:"esriItemLinks",style:"white-space: nowrap"});c("a",{href:esriGeowConfig.baseUrl+"group.html?id\x3d"+d.id,innerHTML:esri.i18nBundle.itemLinks.details,title:esri.i18nBundle.itemLinks.viewGroupDetails,alt:esri.i18nBundle.itemLinks.viewGroupDetails},u);return u},getItemDataPath:function(d){var c=arcgisonline.sharing.util.getToken(),u=c?"?token\x3d"+c:"",t=esriGeowConfig.restBaseUrl+"content/items/"+
d.id+"/data";return"KML"==d.type&&(u="public"!==d.access&&c?"?token\x3d"+c:"",d.url&&-1===d.url.indexOf(t))?d.url+u:t+u},getItemPkgPath:function(d){var c=arcgisonline.sharing.util.getToken();return esriGeowConfig.restBaseUrl+"content/items/"+d.id+"/item.pkinfo"+(c?"?token\x3d"+c:"")},getPItemPath:function(d){var c=arcgisonline.sharing.util.getToken();return esriGeowConfig.restBaseUrl+"content/items/"+d.id+"/item.pitem"+(c?"?token\x3d"+c:"")},getItemZipPath:function(d){var c=arcgisonline.sharing.util.getToken();
return esriGeowConfig.restBaseUrl+"content/items/"+d.id+"/data?f\x3dzip"+(c?"\x26token\x3d"+c:"")},getUser:function(){return esriGeowConfig.userInfo||null},meetsPasswordStrength:function(d){return 8<=d.length&&d.match("^.*(?\x3d.*\\d)(?\x3d.*[a-zA-Z]).*$")},meetsPasswordPolicyStrength:function(d,c){var u={meetsRequirements:function(){return this.minLength&&this.minLetter&&this.minUpper&&this.minLower&&this.minDigit&&this.minOther},minLength:!0,minLetter:!0,minUpper:!0,minLower:!0,minDigit:!0,minOther:!0};
if(c&&0<c.length){d.minLength&&(u.minLength=c.length>=d.minLength);if(d.minLetter){var t=c.match(/[A-Za-z]/g);u.minLetter=!!(t&&t.length>=d.minLetter)}d.minUpper&&(t=c.match(/[A-Z]/g),u.minUpper=!!(t&&t.length>=d.minUpper));d.minLower&&(t=c.match(/[a-z]/g),u.minLower=!!(t&&t.length>=d.minLower));d.minDigit&&(t=c.match(/[0-9]/g),u.minDigit=!!(t&&t.length>=d.minDigit));d.minOther&&(c=c.match(/[\\!"#\$%&'\(\)\*\+,-\./:;<=>\?@\[\]\^_`\{\|}~]/g),u.minOther=!!(c&&c.length>=d.minOther))}else d.minLength&&
(u.minLength=!1),d.minLetter&&(u.minLetter=!1),d.minUpper&&(u.minUpper=!1),d.minLower&&(u.minLower=!1),d.minDigit&&(u.minDigit=!1),d.minOther&&(u.minOther=!1);return u},userPreferences:function(d,c,u){var t=f.cookie(c||"esri_prefs");if(d)t&&(d=f.mixin(f.json.parse(t),d)),f.cookie(c||"esri_prefs",f.json.stringify(d),{path:"/",expires:1E4,sameSite:"Strict"}),d.contentMode&&u&&this.getUser()?(t=f.create,u=t("form",{method:"POST"},f.body()),t("input",{type:"hidden",name:"preferredView",value:d.contentMode},
u),t("input",{type:"hidden",name:"clearEmptyFields",value:"false"},u),arcgisonline.sharing.geow.Community.updateProfile(u,function(e){f.publish("esri/userPreferences"+(c||"user_prefs"),[d])})):f.publish("esri/userPreferences"+(c||"user_prefs"),[d]);else return u="contentModePrefs"===c?esriGeowConfig.userInfo&&esriGeowConfig.userInfo.preferredView:null,null!=t?f.json.parse(t):u?{contentMode:u}:{}},getToken:function(){return!1===this.isLoggedIn()?"":esriGeowConfig.userInfo.credential&&esriGeowConfig.userInfo.credential.token||
esriGeowConfig.userInfo.token},callPage:function(d){window.location=arcgisonline.sharing.util.replaceSSL(esriGeowConfig.baseUrl+d)},openPageAndCount:function(d,c,u){d=esriGeowConfig.restBaseUrl+"content/items/"+d+"/data";var t=arcgisonline.sharing.util.getToken(),e={f:"json"};null!=t&&""!==t&&(e.token=t);esri.request({url:d,content:e,callbackParamName:"callback"});arcgisonline.sharing.util.openPage(c,"boolean"===typeof u?u:!1)},openPage:function(d,c){c?window.location=d:window.open(d)},fix:function(d){null!=
d&&1==d.length&&null!=d[0]&&0<d[0].length&&(d=d[0]);return d.replace(/&lt;/g,"\x3c")},stripHTML:function(d){return d?-1<d.indexOf("\x3c")&&-1<d.indexOf("\x3e")?d.replace(/<[^>]+>/g,""):d:d},urlToObject:function(d){d=esri.urlToObject(d);d.query=d.query||{};for(var c in d.query)d.query.hasOwnProperty(c)&&(Array.isArray(d.query[c])||(d.query[c]=d.query[c].replace(/(&lt;|&gt;|<|>|%3C|%3E)/g,"")));return d},linkifyText:function(d){d=d.split(" ");for(var c=0;c<d.length;c++)if(0===d[c].indexOf("http://")||
0===d[c].indexOf("https://"))d[c]="\x3ca href\x3d'"+d[c]+"' target\x3d'_blank'\x3e"+d[c]+"\x3c/a\x3e";return d.join(" ")},removeHTMLTags:function(d){if(null==d)return"";d=d.replace(/&(lt|gt);/g,function(c,u){return"lt"==u?"\x3c":"\x3e"});return d.replace(/<\/?[^>]+(>|$)/g,"")},escapeHTML:function(d){var c={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#39;","/":"\x26#x2F;"};return String(d).replace(/[&<>"'\/]/g,function(u){return c[u]})},unescapeHTML:function(d){return String(d).replace("\x26lt;",
"\x3c").replace("\x26gt;","\x3e").replace("\x26quot;",'"').replace("\x26#39;","'").replace("\x26#x2F;","/").replace("\x26amp;","\x26")},getSnippet:function(d,c){if(null==d||0===d.length)c=arcgisonline.sharing.util.removeHTMLTags(c),d=180<c.length?c.substring(0,180)+" ...":c;return d},trimTags:function(d){for(;-1<d.indexOf("  ");)d=d.replace(/  /g," ");for(;-1<d.indexOf(",,");)d=d.replace(/,,/g,",");return d=f.trim(d.replace(/, ,/,",").replace(/^,/,"").replace(/,$/,""))},postProcessUri:function(d){d=
0<=d.indexOf("?")?d+"\x26f\x3djson":d+"?f\x3djson";var c=this.getToken();null!=c&&""!==c&&(d=d+"\x26token\x3d"+c);return this.useSSL(d)},replaceSSL:function(d){return!1===esriGeowConfig.useSSL?d:d.replace("http://","https://")},useSSL:function(d){return"https:"===window.location.protocol||esriGeowConfig.self&&!0===esriGeowConfig.self.allSSL?d.replace("http:","https:"):d},errorHandler:function(d,c,u,t){d&&d.code&&"IdentityManagerBase.5"===d.code&&(d.code=498);if(-1<u.indexOf(esriGeowConfig.restBaseUrl)&&
d.code&&498==d.code||403==d.code||400==d.code&&"Invalid account"==d.message)if(403==d.code&&!0===this.isLoggedIn())u&&-1<u.toLowerCase().indexOf("/generatetoken")?window.location.href=esriGeowConfig.baseUrl+"signin.html":u&&-1<u.indexOf("/invitations/")&&t?t(d,c):0>window.location.href.indexOf(esriGeowConfig.baseUrl+"error.html")&&("Request not made over ssl"==d.message?window.location=esriGeowConfig.baseUrl+"error.html?c\x3dSSLRequired":arcgisonline.sharing.util.checkSubscriptionStatus(d)&&(window.location=
esriGeowConfig.baseUrl+"error.html?c\x3dAccessDeniedResource"));else{if(!(403===d.code&&!arcgisonline.sharing.util.checkSubscriptionStatus(d)||403===d.code&&!1===esriGeowConfig.isMultiTenant&&-1<f.indexOf(["COM_0056","COM_0057","SB_0008"],d.messageCode))){esriGeowConfig.userInfo=null;f.cookie("esri_auth",null,{expires:-1,path:"/",domain:document.domain});f.cookie("esri_auth",null,{expires:-1,path:"/",domain:".arcgis.com"});f.cookie("esri_auth",null,{expires:-1,path:"/",domain:".esri.com"});arcgisonline.sharing.util&&
arcgisonline.sharing.util._cookies&&arcgisonline.sharing.util._cookies.arcgis_auth&&delete arcgisonline.sharing.util._cookies.arcgis_auth;c="";-1==esriGeowConfig.signin.indexOf("http")&&(c=esriGeowConfig.baseUrl,!1!==esriGeowConfig.useSSL&&(c=c.replace("http:","https:")));c+=esriGeowConfig.signin;u="";t=c+("?error\x3d"+d.code);var e=f.queryToObject(window.location.search.slice(1)).returnUrl;0>window.location.href.indexOf(t)?-1<window.location.href.indexOf(esriGeowConfig.webmapViewerPath)&&arcgisonline.map&&
arcgisonline.map.main&&arcgisonline.map.main.map&&arcgisonline.map.main.mapInitialized?(arcgisonline.map.storage.saveMapInCookie(null,!1),u="\x26returnUrl\x3d"+encodeURIComponent(esriGeowConfig.baseUrl+esriGeowConfig.webmapViewerPath+"?useExisting\x3d1")):u="\x26returnUrl\x3d"+encodeURIComponent(e?e:window.location):e&&(u="\x26returnUrl\x3d"+encodeURIComponent(e));t+=u;0>window.location.href.indexOf(t)?window.location=t:"User not part of this account"===d.message&&(window.location=c+"?error\x3d400"+
u)}}else t&&t(d,c)},checkSubscriptionStatus:function(d){var c=["SB_0001","SB_0002","SB_0003","SB_0004"],u=["SB_0005","SB_0006","SB_0007"],t=esriGeowConfig.self&&esriGeowConfig.self.subscriptionInfo&&"suspended"===esriGeowConfig.self.subscriptionInfo.state;if(!(esriGeowConfig.self&&esriGeowConfig.self.subscriptionInfo&&"restricted"===esriGeowConfig.self.subscriptionInfo.state||t)){if(-1!==f.indexOf(c,d.messageCode))return arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg.prototype.statics.getInstance().show(esriGeowConfig.self.subscriptionInfo),
!1;if(-1!==f.indexOf(u,d.messageCode))return arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg.prototype.statics.getInstance().showOther(d.messageCode),!1}return!0},isValidSubscriptionState:function(){var d=esriGeowConfig.self.subscriptionInfo,c=["cancelled","expired","suspended","restricted"];return!d||-1===c.indexOf(d.state)},checkError:function(d){var c;return-1!==f.indexOf("COM_0044 COM_0047 CONT_0046 CONT_0047 COM_1043 COM_1044 COM_1045 COM_1046".split(" "),d.messageCode)?(d=(c=f.mixin({},
f.i18n.getLocalization("arcgisonline","arcgisonline").common))&&c.errors&&c.errors[d.messageCode]?{message:c.errors[d.messageCode]}:d,d=f.mixin(f.mixin({},c.errors.genericError),d),esriGeowConfig.hideDefaultCheckErrorMessage||(c=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance(),c.show(d)),!1):!0},handler:function(d,c,u,t,e){d.error&&""!==d.error?arcgisonline.sharing.util.errorHandler(d.error,c,u,e):t&&t(d,c)},getJson:function(d,c,u){return arcgisonline.sharing.util._requestWithAppHandlers({url:d},
{},c,u)},getJsonWithContent:function(d,c,u,t){return arcgisonline.sharing.util._requestWithAppHandlers({url:d,content:c},{},u,t)},postJson:function(d,c,u,t){return arcgisonline.sharing.util._requestWithAppHandlers({url:c,content:d},{usePost:!0},u,t)},postJsonCheckProxy:function(d,c,u,t){return"http:"===window.location.protocol&&-1<c.indexOf("https://")?arcgisonline.sharing.util._requestWithAppHandlers({url:c,content:d},{usePost:!0,useProxy:!0},u,t):arcgisonline.sharing.util._requestWithAppHandlers({url:c,
content:d},{usePost:!0},u,t)},postForm:function(d,c,u,t){return arcgisonline.sharing.util._requestWithAppHandlers({url:c,form:d},{usePost:!0},u,t)},_requestWithAppHandlers:function(d,c,u,t){var e=arcgisonline.sharing.util.request(d,c);e.then(function(r,m){arcgisonline.sharing.util.handler(r||{},e.ioArgs,d.url,u,t);return r},function(r,m){arcgisonline.sharing.util.errorHandler(r||{},e.ioArgs,d.url,t);throw r;});return e},request:function(d,c){var u=d.url,t=d.content||{},e=arcgisonline.sharing.util.getToken();
c=c||{};var r=arcgisonline.sharing.util.urlToObject(u).query||{};t.f||r.f||c.removeFormatProp||(t=f.mixin(t,{f:"json"}));e&&!t.token&&!1!==c.addToken?esri.isDefined(esriGeowConfig.isMultiTenant)&&!1===esriGeowConfig.isMultiTenant&&esriGeowConfig.searchArcGISOnlineEnabled&&"www.arcgis.com"===arcgisonline.sharing.util.getFullDomain(d.url)||(t.token=e):!1===c.addToken&&delete t.token;d=f.mixin({},{url:!1===c.addSSL?u:arcgisonline.sharing.util.useSSL(u),content:t,form:d.form,callbackParamName:d.form?
d.callbackParamName||null:d.callbackParamName||"callback",timeout:c&&c.timeout||0});var m=esri.request(d,c);m.addErrback(function(a){"IdentityManagerBase.1"===a.code&&(a.code=a.httpCode);arcgisonline.sharing.util.checkSoftwareAuthError(a,m);arcgisonline.sharing.util.checkSubscriptionStatus(a)||(m.canceled=!0);arcgisonline.sharing.util.isUnlicensed(a)&&(m.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html"));arcgisonline.sharing.util.isInsufficientLevel(a)&&
(m.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html#insufficient_level"));arcgisonline.sharing.util.isExpiredLicense(a)&&(m.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html#expired_license"));arcgisonline.sharing.util.isOldLicense(a)&&(m.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html#old_license"));
arcgisonline.sharing.util.isInvalidUser(a)&&(m.canceled=!0,arcgisonline.sharing.geow.Geow.signout(esriGeowConfig.baseUrl+"index.html"));arcgisonline.sharing.util.isDisabledEnterpriseUser(a)&&(m.canceled=!0,-1===window.location.href.indexOf("error.html")&&(window.location=esriGeowConfig.baseUrl+"error.html?c\x3dAccountDisabled"));arcgisonline.sharing.util.checkError(a)||(m.canceled=!0);throw a;});return m},_fetchItemData:function(d,c){var u=this.getUser(),t=this.getItemDataPath(d);"admin"===d.itemControl||
u&&u.username===d.owner?this.openPage(c,!0):this._canAccessUrl(t).then(f.hitch(this,function(){this.openPage(c,!0)}),f.hitch(this,function(e){e&&403===e.status?this._showError({title:this.i18n.viewer.error.noPermissionTitle,message:this.i18n.errorWidget.accessDeniedResource}):this.openPage(c,!0)}))},_canAccessUrl:function(d){var c=new f.Deferred;f.xhr("HEAD",{url:d,handleAs:"text",headers:{"X-Requested-With":null},withCredentials:this.isPortal()?!0:!1}).then(function(u){c.resolve(!0)},function(u){c.reject(u)});
return c},_showError:function(d){var c=new arcgisonline.sharing.dijit.dialog.ConfirmDialog({showCancel:!1,style:{width:"375px",height:"auto"}}),u=d||{};u.code=d.code||0;u=f.mixin({},this.i18n.common.errors.genericError,this.i18n.common.errors[d.code]||d);c.show(u).then(f.hitch(this,function(){c.hide()}))},checkSoftwareAuthError:function(d,c){var u=["COM_0056","COM_0057"];!1===esriGeowConfig.isMultiTenant&&d.code&&403===d.code&&d.messageCode&&-1!==f.indexOf(u,d.messageCode)&&-1===window.location.href.indexOf("error.html")&&
(c.canceled=!0,"COM_0056"===d.messageCode?window.location=esriGeowConfig.baseUrl+"error.html?c\x3dPortalCreateAccount":"COM_0057"===d.messageCode&&(window.location=esriGeowConfig.baseUrl+"error.html?c\x3dPortalSignIn"))},isExpiredLicense:function(d){return!1===esriGeowConfig.isMultiTenant&&d.code&&503===d.code&&d.messageCode&&"GWM_0006"===d.messageCode},isInsufficientLevel:function(d){return!1===esriGeowConfig.isMultiTenant&&d.code&&503===d.code&&d.messageCode&&"GWM_0012"===d.messageCode},isUnlicensed:function(d){return!1===
esriGeowConfig.isMultiTenant&&d.code&&503===d.code&&d.messageCode&&"GWM_0013"===d.messageCode},isOldLicense:function(d){return!1===esriGeowConfig.isMultiTenant&&d.code&&503===d.code&&d.messageCode&&"GWM_0014"===d.messageCode},isInvalidUser:function(d){return!1===esriGeowConfig.isMultiTenant&&d.code&&404===d.code&&d.messageCode&&"POR_205244"===d.messageCode},isDisabledEnterpriseUser:function(d){return!1===esriGeowConfig.isMultiTenant&&d.code&&403===d.code&&d.messageCode&&"SB_0008"===d.messageCode},
isNode:function(d){return"object"===typeof Node?d instanceof Node:d&&"object"===typeof d&&"number"===typeof d.nodeType&&"string"===typeof d.nodeName},isElement:function(d){return"object"===typeof HTMLElement?d instanceof HTMLElement:d&&"object"===typeof d&&1===d.nodeType&&"string"===typeof d.nodeName},isHostedService:function(d){if(!d)return!1;var c=(new f._Url(esriGeowConfig.restBaseUrl)).authority,u=!1===esriGeowConfig.isMultiTenant,t=-1!==d.indexOf(".arcgis.com/"),e=-1!==d.indexOf("//services")||
-1!==d.indexOf("//tiles")||-1!==d.indexOf("//features")||-1!==d.indexOf("//locationservices")||-1!==d.indexOf("//iservices")||-1!==d.indexOf("//tiledimageservices");d=esri.isDefined(esriGeowConfig.self)&&esriGeowConfig.self.supportsHostedServices&&-1!==d.indexOf(c)&&!u;return t&&e||!t&&d},isHostedServiceItem:function(d){return arcgisonline.sharing.util.isHostedService(d.item)||arcgisonline.sharing.util.isHostedService(d.url)},isHostedTemplateItem:function(d){d=d?d.split("?")[0]:"";var c=d.match(/http.+(arcgis.com\/apps)\/?/gi);
d=d.match(/http.+(opendata)\/?/gi);return c&&c.length&&!d?!0:!1},isAgolService:function(d){return d?-1!==d.indexOf("/services.arcgisonline.com/")||-1!==d.indexOf("/server.arcgisonline.com/"):!1},supportsHttps:function(d){if(!d)return!1;var c=!1;f.forEach(esriGeowConfig.httpsDomains,function(t){if(-1<d.indexOf("."+t+"/")||-1<d.indexOf("/"+t+"/"))c=!0});if(!c){var u=esriGeowConfig.self.portalHostname;-1<u.indexOf("/")&&(u=u.substring(0,u.indexOf("/")));-1<d.indexOf(u)&&(c=!0)}return c},isArcGISServer:function(d){var c=
/http.+\/(arcgis\/rest\/services|arcgis\/services)\/?/gi,u=/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer)).*/gi;return(d=(d=d&&d.split("?")[0])&&d.replace(c,"").match(u))&&d.length?d[0].split("/")[1]:null},getStaticImagesUrl:function(){var d=esriGeowConfig.staticImagesUrl||esriGeowConfig.self&&esriGeowConfig.self.staticImagesUrl;return(esriGeowConfig.allSSL||"https:"===location.protocol)&&d?d.replace("http:","https:"):
d},getRedSphereUrl:function(){return arcgisonline.sharing.util.getStaticImagesUrl()+"/Symbols/Basic/RedSphere.png"},doNothing:function(){},parseUrl:function(d){var c=document.createElement("a");c.href=d;for(var u=c.protocol.replace(":",""),t=c.hostname||window.location.host,e=c.port,r=c.search,m={},a=c.search.replace(/^\?/,"").split("\x26"),h=a.length,q=0,n;q<h;q++)a[q]&&(n=a[q].split("\x3d"),m[n[0]]=n[1]);return{source:d,protocol:u,host:t,port:e,query:r,params:m,file:(c.pathname.match(/\/([^\/?#]+)$/i)||
[,""])[1],hash:c.hash.replace("#",""),path:c.pathname.replace(/^([^\/])/,"/$1"),relative:(c.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:c.pathname.replace(/^\//,"").split("/")}},getAbsoluteUrl:function(d){var c;return d?(c||(c=document.createElement("a")),c.href=d,c.href):d},ellipse:function(d,c){d&&d.length>c&&0<c-4&&(d=d.substring(0,c-4)+"...");return d},appendTags:function(d,c){var u=d.get("value");c=u?c.split(",").concat(u.split(",")):c.split(",");d.set("value",arcgisonline.sharing.util.getUniqueArray(c).join(","));
f.style(d.domNode,"color","#000000")},getUniqueArray:function(d){var c={};return f.filter(d,function(u){return c[u]?!1:c[u]=!0})},relativeToExplicitUrl:function(d){esriGeowConfig.cdnServerUrl=f.baseUrl.substring(0,f.baseUrl.indexOf("/js/"));return esriGeowConfig.cdnServerUrl.lastIndexOf("/")===esriGeowConfig.cdnServerUrl.length-1?esriGeowConfig.cdnServerUrl+d:esriGeowConfig.cdnServerUrl+"/"+d},getCookie:function(d,c){d="esri_auth"===d?"arcgis_auth":d;var u=this._cookies&&this._cookies[d]||null;if(!u||
c)(u=(u=f.cookie(d))?f.json.parse(u):-1)&&u.role&&(u.role=u.role?u.role.replace("org_","account_"):u.role),u&&(this._cookies||(this._cookies={}),this._cookies[d]=u);return-1===u||esriGeowConfig.ignoreCookie?null:u},canSharePublic:function(){return!esriGeowConfig.self||!0!==esriGeowConfig.self.canSharePublic&&!1!==esriGeowConfig.self.canSharePublic?!0:esriGeowConfig.self.canSharePublic},getSecureUrl:function(d){d||(d=esriGeowConfig.baseUrl);return esriGeowConfig.self&&esriGeowConfig.self.portalMode&&
"singletenant"===esriGeowConfig.self.portalMode&&esriGeowConfig.self.httpsPort?(location.port?(d=d.replace(location.port,esriGeowConfig.self.httpsPort),arcgisonline.sharing.util.isPortal()&&(d=d.replace(esriGeowConfig.self.httpPort,esriGeowConfig.self.httpsPort))):d=d.replace(location.hostname,location.hostname+":"+esriGeowConfig.self.httpsPort),d=d.replace("http:","https:"),arcgisonline.sharing.util.cleanPorts(d)):d.replace("http:","https:")},htmlEncode:function(d){return d?d.replace(/&/g,"\x26amp;").replace(/>/g,
"\x26gt;").replace(/</g,"\x26lt;").replace(/"/g,"\x26quot;"):d},htmlDecode:function(d){return d?d.replace(/&amp;/g,"\x26").replace(/&gt;/g,"\x3e").replace(/&lt;/g,"\x3c").replace(/&quot;/g,'"'):d},getHttpUrl:function(d){d||(d=esriGeowConfig.baseUrl);return esriGeowConfig.self&&esriGeowConfig.self.portalMode&&"singletenant"===esriGeowConfig.self.portalMode&&esriGeowConfig.self.httpPort?(location.port?(d=d.replace(location.port,esriGeowConfig.self.httpPort),arcgisonline.sharing.util.isPortal()&&(d=
d.replace(esriGeowConfig.self.httpsPort,esriGeowConfig.self.httpPort))):d=d.replace(location.hostname,location.hostname+":"+esriGeowConfig.self.httpPort),d=d.replace("https:","http:"),arcgisonline.sharing.util.cleanPorts(d)):d.replace("https:","http:")},cleanPorts:function(d){return d.replace(/:80\//,"/").replace(/:443\//,"/")},usePortalSSL:function(){return(!1===esriGeowConfig.isMultiTenant||arcgisonline.sharing.util.isPortal())&&esriGeowConfig.self&&esriGeowConfig.self.portalHostname&&!esriGeowConfig.self.portalHostname.match(/:7080\//)&&
80!==esriGeowConfig.self.httpPort&&443!==esriGeowConfig.self.httpsPort&&"https:"===location.protocol},onAGOLFederatedServer:function(d){for(var c=!1,u=0;u<esriGeowConfig.httpsDomains.length;u++)if(d&&-1<d.indexOf(esriGeowConfig.httpsDomains[u])){c=!0;break}return c},onFederatedServer:function(d){var c=!1,u=!1;d&&0<d.length&&esriGeowConfig.federatedServers&&0<esriGeowConfig.federatedServers.length&&(c=f.some(esriGeowConfig.federatedServers,f.hitch(this,function(t){var e=-1<d.indexOf(":6080")?d.replace("http:",
"https:").replace(":6080",":6443"):d,r=t.url?arcgisonline.sharing.util.getUrlWithoutScheme(t.url):t.url,m=t.adminUrl?arcgisonline.sharing.util.getUrlWithoutScheme(t.adminUrl):t.adminUrl;r=-1<r.indexOf(":")?t.url:r;m=-1<m.indexOf(":")?t.adminUrl:m;u=e!==d;return-1<d.indexOf(r)||-1<d.indexOf(m)||u&&(-1<e.indexOf(r)||-1<e.indexOf(m))})));return c},getUrlWithoutScheme:function(d){if(esri.isDefined(d)){if(0===d.indexOf("http://"))return d.substring(7);if(0===d.indexOf("https://"))return d.substring(8)}return d},
isPortal:function(){return esri.isDefined(esriGeowConfig.self)&&esriGeowConfig.self.isPortal},isArcGISEnterpriseOnKubernetes:function(){return"ArcGISEnterpriseOnKubernetes"===(esriGeowConfig.self||{}).portalDeploymentType},portalSupportsHostedServices:function(){return arcgisonline.sharing.util.isPortal()&&esriGeowConfig.self.supportsHostedServices},getHomeAppContext:function(){if(arcgisonline.sharing.util.isPortal()){var d=window.location.pathname,c=d.indexOf("/home");if(0<c)return d.substring(0,
c)}return""},normalizeOrgRole:function(d){return d?d.replace("org_","account_"):d},checkForIAA:function(){var d=new f.Deferred,c=!!esriGeowConfig.isDebug,u=arcgisonline.sharing.util.getPortalAdminBaseUrl(),t=arcgisonline.sharing.util.getUser();f.xhrGet({url:u+"/",handleAs:"json",content:{f:"json",ts:(new Date).getTime()}}).then(f.hitch(this,function(e){e&&e.status&&"error"===e.status&&e.code&&503===e.code?d.resolve({hasIAA:!0,error:e}):e&&(!e.error&&!t||e.error&&e.error.code&&(!t&&499!==e.error.code&&
498!==e.error.code||t&&499!==e.error.code&&498!==e.error.code))?-1===window.location.href.indexOf("createadmin.html")?window.location=arcgisonline.sharing.util.getSecureUrl("https://"+esriGeowConfig.self.portalHostname+"/home/createadmin.html"):d.resolve({hasIAA:!1}):d.resolve({hasIAA:!0})}),f.hitch(this,function(e){!c&&(e.status&&499!==e.status||e&&(!e.error&&!t||e.error&&e.error.code&&(!t&&499!==e.error.code&&498!==e.error.code||t&&499!==e.error.code&&498!==e.error.code)))?-1===window.location.href.indexOf("createadmin.html")?
window.location=arcgisonline.sharing.util.getSecureUrl("https://"+esriGeowConfig.self.portalHostname+"/home/createadmin.html"):d.resolve({hasIAA:!1}):d.resolve({hasIAA:!0,error:e})}));return d},getUserDisplayName:function(d){var c=d&&d.fullName||"";d=d.firstName||c;-1<c.indexOf("_")?d=c.split("_")[0]:-1<c.indexOf(",")?d=c.split(",").slice(1).join(" "):-1<c.indexOf(" ")&&(d=c.split(" ")[0]);return d.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")},isProApp:function(d){return d&&"ArcGIS Pro"===
d.title&&"esri_apps"===d.owner&&d.tags&&-1<f.indexOf(d.tags,"pro")},findProListing:function(){var d=new f.Deferred,c=!1,u=!1,t;arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"portals/self/purchases"}).then(f.hitch(this,function(e){e.purchases?(f.forEach(e.purchases,f.hitch(this,function(r){!u&&r.listing&&"ArcGIS Pro"===r.listing.title&&"esri_apps"===r.listing.owner&&"licenseByUser"===r.listing.licenseBy&&(c=f.some(r.listing.tags,f.hitch(this,function(m){return m&&"pro"===m.toLowerCase()})))&&
(t=r,u=!0)})),d.resolve(u?t:null)):d.resolve(null)}),f.hitch(this,function(e){d.reject(e)}));return d},findLicenseByUserProducts:function(){var d=new f.Deferred,c=esriGeowConfig.restBaseUrl+"portals/self/purchases",u=!1,t=!1,e={pro:null,products:null};this.isPortal();var r=f.hitch(this,function(m){if(m.listing&&"licenseByUser"===m.listing.licenseBy)if(u=!0,"ArcGIS Pro"===m.listing.title&&"esri_apps"===m.listing.owner){if(t=f.some(m.listing.tags,f.hitch(this,function(a){return a&&"pro"===a.toLowerCase()})))e.pro=
m}else m&&m.provision&&(e.products?e.products.push(m):e.products=[m])});arcgisonline.sharing.util.request({url:c}).then(f.hitch(this,function(m){m.purchases||m.trials?(m.purchases&&f.forEach(m.purchases,r),m.trials&&f.forEach(m.trials,r),d.resolve(u?e:null)):d.resolve(null)}),f.hitch(this,function(m){d.reject(m)}));return d},isEsriWorldGeocoder:function(d){var c=arcgisonline.sharing.util.isEsriWorldGeocoderNoProxy(d);d=arcgisonline.sharing.util.isEsriWorldGeocoderThroughProxy(d);return c||d},isEsriWorldGeocoderNoProxy:function(d){return(d=
d.url||"")&&!!d.match(/(arcgis.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi)},isEsriWorldGeocoderThroughProxy:function(d){var c=d.url||"";return d.isAGOWorldLocator||c&&!!c.match(/(\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi)},filterBatchGeocoders:function(d,c){return f.filter(d,f.hitch(this,function(u){var t=arcgisonline.sharing.util.isEsriWorldGeocoderNoProxy(u),e=arcgisonline.sharing.util.isEsriWorldGeocoderThroughProxy(u);if(t||e)esri.isDefined(u.name)?"Esri World Geocoder"===
u.name&&(u.name=esri.i18nBundle.common.esriWorldGeocoder):u.name=esri.i18nBundle.common.esriWorldGeocoder;return t&&(arcgisonline.sharing.util.isPortal()||c)?!1:esri.isDefined(u.batch)?!!u.batch:t||e}))},filterNonWorldGeocoders:function(d){return f.filter(d,f.hitch(this,function(c){var u=arcgisonline.sharing.util.isEsriWorldGeocoderNoProxy(c),t=arcgisonline.sharing.util.isEsriWorldGeocoderThroughProxy(c);return!u&&!t&&c.url}))},downloadWebMappingApp:function(d){var c="Mobile Application"!==d.type?
"WMA2Code":"MobileApp2Code",u=esriGeowConfig.restBaseUrl+"content/items/"+d.id+"/relatedItems";c=d.relatedItems||arcgisonline.sharing.util.request({url:u,content:{relationshipType:c}}).then(f.hitch(this,function(t){d.relatedItems=t&&t.relatedItems||[];return d.relatedItems}));return f.when(c,f.hitch(this,function(t){var e=t||[],r,m=f.filter(e,function(a){return a&&null!==a.url});t=m&&m.length?m[0]:e&&0<e.length?e[0]:t;t.id&&(r=t.url||arcgisonline.sharing.util.getItemDataPath(t));t.url?window.open(r):
window.location=r;B.byId("share-map-stack")&&B.byId("share-map-stack").selectChild(B.byId("share-map-application-help"))}),f.hitch(this,function(t){}))},loadUserTags:function(d){var c=new f.Deferred;d?arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"community/users/"+d+"/tags",content:{ts:(new Date).getTime()}}).then(f.hitch(this,function(u){var t=[];u&&u.tags&&(t=u.tags);t=t.map(function(e){e.tag=arcgisonline.sharing.util.sanitizer.sanitize(e.tag);return e}.bind(this));c.resolve(t)}),
f.hitch(this,function(u){c.resolve([])})):c.resolve([]);return c},loadUserProperties:function(d){return arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"community/users/"+d+"/properties"})},isValidEmailAddress:function(d){var c=/(?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9](?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9-]*[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9])?\.)+[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9](?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9-]*[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/gi;
return!/(@.*@)|(\.\.)|(@\.)|(\.@)|(^\.)/.test(d)&&c.test(d)&&(c=d.match(c),c.length&&c.shift().length===d.length)?!0:!1},groupUsedInOrgSettings:function(d){return(d=d?"id:"+d:null)&&esriGeowConfig.self&&(esriGeowConfig.self.basemapGalleryGroupQuery&&-1<esriGeowConfig.self.basemapGalleryGroupQuery.indexOf(d)||esriGeowConfig.self.colorSetsGroupQuery&&-1<esriGeowConfig.self.colorSetsGroupQuery.indexOf(d)||esriGeowConfig.self.featuredGroupsId&&-1<esriGeowConfig.self.featuredGroupsId.indexOf(d)||esriGeowConfig.self.featuredItemsGroupQuery&&
-1<esriGeowConfig.self.featuredItemsGroupQuery.indexOf(d)||esriGeowConfig.self.galleryTemplatesGroupQuery&&-1<esriGeowConfig.self.galleryTemplatesGroupQuery.indexOf(d)||esriGeowConfig.self.layerTemplatesGroupQuery&&-1<esriGeowConfig.self.layerTemplatesGroupQuery.indexOf(d)||esriGeowConfig.self.livingAtlasGroupQuery&&-1<esriGeowConfig.self.livingAtlasGroupQuery.indexOf(d)||esriGeowConfig.self.stylesGroupQuery&&-1<esriGeowConfig.self.stylesGroupQuery.indexOf(d)||esriGeowConfig.self.symbolSetsGroupQuery&&
-1<esriGeowConfig.self.symbolSetsGroupQuery.indexOf(d)||esriGeowConfig.self.templatesGroupQuery&&-1<esriGeowConfig.self.templatesGroupQuery.indexOf(d)||esriGeowConfig.self.analysisLayersGroupQuery&&-1<esriGeowConfig.self.analysisLayersGroupQuery.indexOf(d))},canShowSocialMediaLinks:function(){var d=arcgisonline.sharing.util.isPortal(),c=arcgisonline.sharing.util.canSharePublic(),u=!(!esriGeowConfig.self||!esriGeowConfig.self.portalProperties)&&esri.isDefined(esriGeowConfig.self.portalProperties.showSocialMediaLinks),
t=u&&!0===esriGeowConfig.self.portalProperties.showSocialMediaLinks;return esriGeowConfig.showSocialMediaLinks&&!0===esriGeowConfig.showSocialMediaLinks&&(d?c&&t:c&&(!u||t))},getPortalAdminBaseUrl:function(){var d=arcgisonline.sharing.util.isArcGISEnterpriseOnKubernetes()?esriGeowConfig.enterpriseAdminBaseUrl:esriGeowConfig.portalAdminBaseUrl;return arcgisonline.sharing.util.getSecureUrl(d)},formatPortalOrgUrl:function(d,c,u){return arcgisonline.sharing.util.isArcGISEnterpriseOnKubernetes()?d+"/orgs/"+
u+c:d+c},getLevelSpan:function(d,c){return'\x3cspan class\x3d"license-level-badge" aria-label\x3d"'+d+" "+c+'"\x3e'+c+"\x3c/span\x3e"},getLevelSpanProperties:function(d,c){return{class:"license-level-badge",innerHTML:c,"aria-label":d+" "+c}},createLevelSpan:function(d,c,u,t){return f.create("span",f.mixin(arcgisonline.sharing.util.getLevelSpanProperties(d,c),t||{}),u)},createLevelSpanAndPlace:function(d,c,u,t,e){return f.create("span",f.mixin(arcgisonline.sharing.util.getLevelSpanProperties(d,c),
t||{}),u,e)},getFullDomain:function(d){d=d.match(/:\/\/([0-9]?\.)?(.[^/:]+)/i);return null!=d&&2<d.length&&"string"===typeof d[2]&&0<d[2].length?d[2]:null},isValidOnlineReturnUrl:function(d){var c=decodeURI(d),u=arcgisonline.sharing.util.parseUrl(window.location.href);d=arcgisonline.sharing.util.parseUrl(c);var t=(c=0===c.indexOf("http://")||0===c.indexOf("https://"))&&d.host?d.host.lastIndexOf(".arcgis.com"):-1,e=c&&d.host?d.host.lastIndexOf(".esri.com"):-1,r=c&&d.host?d.host.lastIndexOf(u.host):
-1;t=-1<t&&t+11-1===d.host.length-1;e=-1<e&&e+9-1===d.host.length-1;u=-1<r&&r+u.host.length-1===d.host.length-1;return c&&d.host&&(t||e||u)?!0:!1},isValidPortalReturnUrl:function(d){var c=decodeURI(d),u=arcgisonline.sharing.util.parseUrl(window.location.href);d=arcgisonline.sharing.util.parseUrl(c);c=0===c.indexOf("http://")||0===c.indexOf("https://");var t=d.host?d.host.lastIndexOf(u.host):-1;u=-1<t&&t+u.host.length-1===d.host.length-1;return c&&d.host&&u?!0:!1},isSameUrl:function(d,c,u){var t=d,
e=c;u&&d&&c&&(t=d.substring(d.indexOf("://")+3),e=c.substring(c.indexOf("://")+3));return t===e},overrideDojoAriaLabel:function(d,c){d&&(f.attr(d,"aria-label",c),d.removeAttribute("aria-labelledby"))},getStepProgressIndicatorProperties:function(d,c){return{class:"stepProgressBar stepProgressBar--"+c+"-steps",innerHTML:'\x3cdiv class\x3d"stepProgressBar__value" style\x3d"width: '+Math.floor(d/c*100)+'%;"\x3e\x3c/div\x3e',"aria-hidden":"true"}},createStepProgressIndicatorAndPlace:function(d,c,u,t){u=
f.create("div",{class:"progressBarContainer"},u,t);f.create("div",f.mixin(arcgisonline.sharing.util.getStepProgressIndicatorProperties(d,c)),u,"first");f.place('\x3cspan class\x3d"stepLabel"\x3e'+esri.i18nBundle.common.steppedProgress.step+"  "+d+"  "+esri.i18nBundle.common.steppedProgress.of+" "+c+"\x3c/span\x3e",u,"last");return u},clearProgressBars:function(){f.query(".progressBarContainer").forEach(function(d){f.destroy(d)})},isServiceProxyGeocoder:function(d){var c=(d||"").toLowerCase();d=-1<
c.indexOf("/geocodeserver")&&-1<c.indexOf("/servers/")&&-1<c.indexOf("/rest/services/");var u=arcgisonline.sharing.util.isPortal()&&-1<c.indexOf(esriGeowConfig.self.portalHostname.toLowerCase());c=!arcgisonline.sharing.util.isPortal()&&c.indexOf("utility")&&-1<c.indexOf(".arcgis.com");return d&&(u||c)},applyChrome62ButtonRepaintFix:function(d){f.has&&61<f.has("chrome")&&d&&(f.style(d,"display","none"),setTimeout(function(){f.style(d,"display","")},1))},isValidUrl:function(d){return/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(d)},
setFederatedServers:function(d){esriGeowConfig.federatedServers=d},shouldUseProxy:function(d){d=(((d||"").split("//")[1]||"").split("/")[0]||"").toLowerCase();return!!esriGeowConfig.self.isPortal&&d!==window.location.host.toLowerCase()}}})},"arcgisonline/sharing/dijit/dialog/GeneralDlg":function(){define("require esri/declare esri/Evented dojo/_base/lang dijit/Dialog dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/query dojo/dom-style dojo/dom-attr dojo/on dojo/i18n!../../../nls/arcgisonline dojo/text!arcgisonline/sharing/dijit/dialog/templates/GeneralDlg.html".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n){var k=B("arcgisonline.sharing.dijit.dialog.GeneralDlg",[u,t,e,l],{baseClass:"esriThumbnailDlg",templateString:n,widgetsInTemplate:!0,onCancel:function(){},onHide:function(){},postMixInProperties:function(){this.inherited(arguments);this.i18n=d.mixin({},q.common,q.generalDlg)},postCreate:function(){this.loadConnections()},show:function(g){this.clear();this.setTitle(g.title);this.setMessage(g.message);this.setContent(g.content);this.key=g.key;g.hideTitleBar&&m.set(r(".dijitDialogTitleBar")[0],
"display","none");g.error&&r("#general-dialog-content").addClass("error");g.buttonText&&(this._dialog.domNode.querySelector("#button_general-close_label").textContent=g.buttonText);this._dialog.show()},showWide:function(g){m.set(this._dialog,"width","700px");this.show(g)},destroy:function(){this.inherited(arguments);k.prototype.statics._instance&&(k.prototype.statics._instance=null)},clear:function(){this.setTitle("");r("#general-dialog-content").attr("innerHTML","");r("#general-dialog-content").removeClass("error")},
loadConnections:function(){r(".jevent").on("click",function(b){b.preventDefault()});r("#general-dialog .dijitDialogTitleBar .dijitDialogCloseIcon").forEach(d.hitch(this,function(b){a.set(b,"title",this.i18n.close)}));var g=this._dialog;this.own(h(g,"cancel",d.hitch(this,function(b){b&&b instanceof Event&&b.preventDefault();this.onCancel()})),h(g,"hide",d.hitch(this,function(b){b&&b instanceof Event&&b.preventDefault();this.onHide()})))},setTitle:function(g){g&&this._dialog.set("title",g)},setMessage:function(g){g&&
r("#general-dialog-content").attr("innerHTML","\x3cp style\x3d'word-wrap:break-word;'\x3e"+g+"\x3c/p\x3e")},setContent:function(g){g&&r("#general-dialog-content").attr("innerHTML",g)},hideTitle:function(){this._dialog.titleNode.classList.add("hide")},setButtonLabel:function(g){this._okBtn.setLabel(g)},hide:function(){this._dialog.hide()},onOkClick:function(g){this._dialog.hide()}});k.prototype.statics={getInstance:function(){this._instance||(this._instance=new k);return this._instance}};return k})},
"esri/declare":function(){define(["dojo/_base/declare","dojo/_base/lang","./extend"],function(f,B,l){return function(d,c,u){var t=B.isString(d);t?u.declaredClass=d:(u=c,c=d);c=f(c,u);t&&l(d,c);return c}})},"esri/extend":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(f,B,l){return function(d,c){d=d.substring(d.indexOf(".")+1);f.setObject(d,c,l)}})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(f,B,l){f=function(){return this}();
var d=f.location,c=d.pathname;l=d.protocol;d={version:"3.45",_appBaseUrl:l+"//"+d.host+c.substring(0,c.lastIndexOf(c.split("/")[c.split("/").length-1]))};B.noGlobals||(f.esri=d);(d.dijit=d.dijit||{})._arcgisUrl=("http:"===l||"https:"===l?l:"http:")+"//www.arcgis.com/sharing/rest";return d})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),function(f,B,l,d,c,u){f=f([d],{declaredClass:"esri.Evented",registerConnectEvents:function(){var t=
this.constructor,e=this.constructor._meta.parents,r=[{}],m={},a,h=function(n,k){B.isArray(n)||(n=[n]);for(var g=0;g<n.length;g++){var b=n[g];b._meta&&b._meta.parents&&h(b._meta.parents,k);b.prototype._eventMap&&k.push(B.mixin({},b.prototype._eventMap))}return k};if(!t._onMap){h(e,r);r.push(this._eventMap);e=B.mixin.apply(this,r);for(q in this)/^on\w/.test(q)&&B.isFunction(this[q])&&(r=this._hyphenLower(q).toLowerCase(),e[r]||(m[r]={method:q}));for(a in e){var q=this._onCamelCase(a);m[a]={method:q,
argKeys:e[a]}}t._onMap=m;return t._onMap}},on:function(t,e){if(-1<t.indexOf(",")){for(var r=t.split(/\s*,\s*/),m=r.length,a=[];m--;)a.push(this.on(r[m],e));a.remove=function(){for(var n=0;n<a.length;n++)a[n].remove()};return a}r=this.constructor._onMap||this.registerConnectEvents();m="string"==typeof t&&t.toLowerCase();var h=this._onCamelCase(m),q=r&&r[m];return(h=q&&q.method||this[h]&&B.isFunction(this[h])&&h)?q&&B.isArray(q.argKeys)?(r=this._onArr2Obj(e,r[m].argKeys),l.after(this,h,r,!0)):l.after(this,
h,function(n){n=n||{};n.target||(n.target=this);e.call(this,n)},!0):this.inherited(arguments)},emit:function(t,e){var r,m,a=t.toLowerCase();var h=this._onCamelCase(t);var q=this.constructor._onMap||this.registerConnectEvents();h=(m=q&&q[a]&&q[a].method||B.isFunction(this[h])&&h)&&this[m];m&&q&&q[a]&&this._onObj2Arr(function(){r=Array.prototype.slice.call(arguments)},q[a].argKeys)(e);e=e||{};e.target||(e.target=this);if(h){var n=r&&r.length?r:[e];n=h.apply(this,n)}this.inherited(arguments,[t,e]);return n},
_onObj2Arr:function(t,e){if(e){var r=this;return function(m){var a,h=[],q=e.length;for(a=0;a<q;a++)h[a]=m[e[a]];t.apply(r,h)}}return t},_onArr2Obj:function(t,e){if(e){var r=this;return function(){var m,a={},h=arguments.length;for(m=0;m<h;m++)a[e[m]]=arguments[m];a.target||(a.target=r);t.call(r,a)}}return t},_hyphenLower:function(t){return t.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(e,r){return(r?"-":"")+e.toLowerCase()})},_onCamelCase:function(t){return"on"+t.substr(0,1).toUpperCase()+
t.substr(1).replace(/\-([a-z])/g,function(e,r){return r.toUpperCase()})}});return u.Evented=f})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E,C,z,w,A,G,F,H,J,K){function Q(){}var P=new c;P.resolve(!0);E=d("dijit._DialogBase"+(g("dojo-bidi")?"_NoBidi":""),[z,A,G,w],{templateString:K,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:E.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(W){this._set("draggable",W)},maxRatio:.9,
closable:!0,_setClosableAttr:function(W){this.closeButtonNode.style.display=W?"":"none";this._set("closable",W)},postMixInProperties:function(){var W=a.getLocalization("dijit","common");q.mixin(this,W);this.inherited(arguments)},postCreate:function(){r.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);l.after(this,"onExecute",q.hitch(this,"hide"),!0);l.after(this,"onCancel",q.hitch(this,"hide"),!0);n(this.closeButtonNode,
b.press,function(W){W.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&N.isTop(this)&&(this._getFocusItems(),D.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();D.focus(this._firstFocusItem)},_endDrag:function(){var W=e.position(this.domNode),Z=x.getBox(this.ownerDocument);W.y=Math.min(Math.max(W.y,0),Z.h-W.h);W.x=Math.min(Math.max(W.x,0),Z.w-W.w);this._relativePosition=W;this._position()},_setup:function(){var W=
this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==g("ie")?y:v)(W,{handle:this.titleBar}),l.after(this._moveable,"onMoveStop",q.hitch(this,"_endDrag"),!0)):t.add(W,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":B.map(this["class"].split(/\s/),function(Z){return Z+"_underlay"}).join(" "),_onKeyDown:q.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!t.contains(this.ownerDocumentBody,"dojoMove")){var W=
this.domNode,Z=x.getBox(this.ownerDocument),aa=this._relativePosition,ia=e.position(W);r.set(W,{left:Math.floor(Z.l+(aa?Math.min(aa.x,Z.w-ia.w):(Z.w-ia.w)/2))+"px",top:Math.floor(Z.t+(aa?Math.min(aa.y,Z.h-ia.h):(Z.h-ia.h)/2))+"px"})}},_onKey:function(W){if(W.keyCode==h.TAB){this._getFocusItems();var Z=W.target;this._firstFocusItem==this._lastFocusItem?(W.stopPropagation(),W.preventDefault()):Z==this._firstFocusItem&&W.shiftKey?(D.focus(this._lastFocusItem),W.stopPropagation(),W.preventDefault()):
Z!=this._lastFocusItem||W.shiftKey||(D.focus(this._firstFocusItem),W.stopPropagation(),W.preventDefault())}else this.closable&&W.keyCode==h.ESCAPE&&(this.onCancel(),W.stopPropagation(),W.preventDefault())},show:function(){if(this.open)return P.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),N.hide(this));var W=x.get(this.ownerDocument);this._modalconnects.push(n(W,"scroll",q.hitch(this,
"resize",null)));this._modalconnects.push(n(this.domNode,"keydown",q.hitch(this,"_onKey")));r.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();this._fadeInDeferred=new c(q.hitch(this,function(){Z.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,Q);W=this._fadeInDeferred.promise;var Z=m.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:q.hitch(this,function(){N.show(this,this.underlayAttrs)}),onEnd:q.hitch(this,
function(){this.autofocus&&N.isTop(this)&&(this._getFocusItems(),D.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return W},hide:function(){if(!this._alreadyInitialized||!this.open)return P.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred=new c(q.hitch(this,function(){Z.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,Q);this._fadeOutDeferred.then(q.hitch(this,"onHide"));var W=this._fadeOutDeferred.promise;
var Z=m.fadeOut({node:this.domNode,duration:this.duration,onEnd:q.hitch(this,function(){this.domNode.style.display="none";N.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var aa;aa=this._modalconnects.pop();)aa.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return W},resize:function(W){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!W){this._shrunk&&
(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),B.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(R){R&&r.set(R,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var Z=x.getBox(this.ownerDocument);Z.w*=this.maxRatio;Z.h*=this.maxRatio;var aa=e.position(this.domNode);this._shrunk=!1;aa.w>=Z.w&&
(W={w:Z.w},e.setMarginBox(this.domNode,W),aa=e.position(this.domNode),this._shrunk=!0);aa.h>=Z.h&&(W||(W={w:aa.w}),W.h=Z.h,this._shrunk=!0);W&&(W.w||(W.w=aa.w),W.h||(W.h=aa.h))}if(W){e.setMarginBox(this.domNode,W);Z=[];this.titleBar&&Z.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&Z.push({domNode:this.actionBarNode,region:"bottom"});aa={domNode:this.containerNode,region:"center"};Z.push(aa);var ia=J.marginBox2contentBox(this.domNode,W);J.layoutChildren(this.domNode,ia,Z);this._singleChild?
(Z=J.marginBox2contentBox(this.containerNode,aa),this._singleChild.resize({w:Z.w,h:Z.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();g("touch")||W||this._position()}},_layoutChildren:function(){B.forEach(this.getChildren(),function(W){W.resize&&W.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var W;W=this._modalconnects.pop();)W.remove();
N.hide(this);this.inherited(arguments)}});g("dojo-bidi")&&(E=d("dijit._DialogBase",E,{_setTitleAttr:function(W){this._set("title",W);this.titleNode.innerHTML=W;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(W){this._created&&this.textDir!=W&&(this._set("textDir",W),this.set("title",this.title))}}));var I=d("dijit.Dialog",[H,E],{});I._DialogBase=E;var N=I._DialogLevelManager={_beginZIndex:950,show:function(W,Z){L[L.length-1].focus=D.curNode;var aa=L[L.length-1].dialog?L[L.length-1].zIndex+
2:I._DialogLevelManager._beginZIndex;r.set(W.domNode,"zIndex",aa);F.show(Z,aa-1);L.push({dialog:W,underlayAttrs:Z,zIndex:aa})},hide:function(W){if(L[L.length-1].dialog==W){L.pop();var Z=L[L.length-1];1==L.length?F.hide():F.show(Z.underlayAttrs,Z.zIndex-1);if(W.refocus&&(W=Z.focus,!Z.dialog||W&&u.isDescendant(W,Z.dialog.domNode)||(Z.dialog._getFocusItems(),W=Z.dialog._firstFocusItem),W))try{W.focus()}catch(aa){}}else Z=B.indexOf(B.map(L,function(aa){return aa.dialog}),W),-1!=Z&&L.splice(Z,1)},isTop:function(W){return L[L.length-
1].dialog==W}},L=I._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];D.watch("curNode",function(W,Z,aa){W=L[L.length-1].dialog;if(aa&&W&&!W._fadeOutDeferred&&aa.ownerDocument==W.ownerDocument){do if(aa==W.domNode||t.contains(aa,"dijitPopup"))return;while(aa=aa.parentNode);W.focus()}});g("dijit-legacy-requires")&&k(0,function(){f(["dijit/TooltipDialog"])});return I})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(f,B){var l=B.prototype.onMove;return f("dojo.dnd.TimedMoveable",
B,{timeout:40,constructor:function(d,c){c||(c={});c.timeout&&"number"==typeof c.timeout&&0<=c.timeout&&(this.timeout=c.timeout)},onMoveStop:function(d){d._timer&&(clearTimeout(d._timer),l.call(this,d,d._leftTop));B.prototype.onMoveStop.apply(this,arguments)},onMove:function(d,c){d._leftTop=c;if(!d._timer){var u=this;d._timer=setTimeout(function(){d._timer=null;l.call(u,d,d._leftTop)},this.timeout)}}})})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),
function(f,B,l,d,c,u){return B("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(t){var e=[];f.forEach(t||this.getChildren(),function(r){"value"in r?e.push(r):e=e.concat(this._getDescendantFormWidgets(r.getChildren()))},this);return e},reset:function(){f.forEach(this._getDescendantFormWidgets(),function(t){t.reset&&t.reset()})},validate:function(){var t=!1;return f.every(f.map(this._getDescendantFormWidgets(),function(e){e._hasBeenBlurred=!0;var r=e.disabled||!e.validate||
e.validate();r||t||(u.scrollIntoView(e.containerNode||e.domNode),e.focus(),t=!0);return r}),function(e){return e})},setValues:function(t){l.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",t)},_setValueAttr:function(t){var e={};f.forEach(this._getDescendantFormWidgets(),function(h){h.name&&(e[h.name]||(e[h.name]=[])).push(h)});for(var r in e)if(e.hasOwnProperty(r)){var m=e[r],a=d.getObject(r,!1,t);void 0!==a&&(a=[].concat(a),
"boolean"==typeof m[0].checked?f.forEach(m,function(h){h.set("value",-1!=f.indexOf(a,h._get("value")))}):m[0].multiple?m[0].set("value",a):f.forEach(m,function(h,q){h.set("value",a[q])}))}},getValues:function(){l.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var t={};f.forEach(this._getDescendantFormWidgets(),function(e){var r=e.name;if(r&&!e.disabled){var m=e.get("value");"boolean"==typeof e.checked?
/Radio/.test(e.declaredClass)?!1!==m?d.setObject(r,m,t):(m=d.getObject(r,!1,t),void 0===m&&d.setObject(r,null,t)):(e=d.getObject(r,!1,t),e||(e=[],d.setObject(r,e,t)),!1!==m&&e.push(m)):(e=d.getObject(r,!1,t),"undefined"!=typeof e?d.isArray(e)?e.push(m):d.setObject(r,[e,m],t):d.setObject(r,m,t))}});return t},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var t=f.map(this._descendants,function(e){return e.get("state")||""});return 0<=f.indexOf(t,"Error")?
"Error":0<=f.indexOf(t,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(t){this._descendants=this._getDescendantFormWidgets();f.forEach(this._descendants,function(e){e._started||e.startup()});t||this._onChildChange()},_onChildChange:function(t){t&&"state"!=t&&"disabled"!=t||this._set("state",this._getState());t&&"value"!=t&&"disabled"!=t&&"checked"!=t||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;
this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var t=this;this.own(c(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(e){e.target!=t.domNode&&t._onChildChange(e.type.replace("attrmodified-",""))}));this.watch("state",function(e,r,m){this.onValidStateChange(""==m)})},destroy:function(){this.inherited(arguments)}})})},
"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(f,B){return f("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var l=B._getTabNavigable(this.domNode);this._firstFocusItem=l.lowest||l.first||this.closeButtonNode||this.domNode;this._lastFocusItem=l.last||l.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h){var q=f("dijit.DialogUnderlay",[e,r],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(n){d.set(this.node,"id",n+"_underlay");this._set("dialogId",n)},_setClassAttr:function(n){this.node.className="dijitDialogUnderlay "+n;this._set("class",n)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(u(this.domNode,"keydown",B.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var n=this.node.style,k=this.domNode.style;k.display="none";var g=t.getBox(this.ownerDocument);k.top=g.t+"px";k.left=g.l+"px";n.width=g.w+"px";n.height=g.h+"px";k.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new m(this.domNode);var n=t.get(this.ownerDocument);this._modalConnects=[a.on("resize",B.hitch(this,"layout")),u(n,"scroll",
B.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});q.show=function(n,k){var g=q._singleton;!g||g._destroyed?g=h._underlay=q._singleton=new q(n):n&&g.set(n);c.set(g.domNode,"zIndex",k);g.open||g.show()};q.hide=function(){var n=
q._singleton;n&&!n._destroyed&&n.hide()};return q})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g){return r("dijit.layout.ContentPane",[l,d,c],{href:"",content:"",extractContent:!1,parseOnLoad:!0,
parserScope:f._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(b,
x,v){var y=new v(b,x);return!y.href&&y._contentSetter&&y._contentSetter.parseDeferred&&!y._contentSetter.parseDeferred.isFulfilled()?y._contentSetter.parseDeferred.then(function(){return y}):y},create:function(b,x){if(!(b&&b.template||!x||"href"in b||"content"in b)){x=a.byId(x);for(var v=x.ownerDocument.createDocumentFragment();x.firstChild;)v.appendChild(x.firstChild);b=B.delegate(b,{content:v})}this.inherited(arguments,[b,x])},postMixInProperties:function(){this.inherited(arguments);var b=k.getLocalization("dijit",
"loading",this.lang);this.loadingMessage=u.substitute(this.loadingMessage,b);this.errorMessage=u.substitute(this.errorMessage,b)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&e.forEach(this._contentSetter.parseResults,function(b){b._started||b._destroyed||!B.isFunction(b.startup)||(b.startup(),b._started=!0)},this)},_startChildren:function(){e.forEach(this.getChildren(),
function(b){b._started||b._destroyed||!B.isFunction(b.startup)||(b.startup(),b._started=!0)});this._contentSetter&&e.forEach(this._contentSetter.parseResults,function(b){b._started||b._destroyed||!B.isFunction(b.startup)||(b.startup(),b._started=!0)},this)},setHref:function(b){f.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",b)},_setHrefAttr:function(b){this.cancel();this.onLoadDeferred=new m(B.hitch(this,"cancel"));this.onLoadDeferred.then(B.hitch(this,
"onLoad"));this._set("href",b);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(b){f.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",b)},_setContentAttr:function(b){this._set("href","");this.cancel();this.onLoadDeferred=new m(B.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(B.hitch(this,"onLoad"));this._setContent(b||"");this._isDownloaded=
!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(b){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},
refresh:function(){this.cancel();this.onLoadDeferred=new m(B.hitch(this,"cancel"));this.onLoadDeferred.then(B.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var b=this,x={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};B.isObject(this.ioArgs)&&B.mixin(x,this.ioArgs);var v=this._xhrDfd=(this.ioMethod||n.get)(x),y;v.then(function(D){y=D;try{return b._isDownloaded=!0,b._setContent(D,!1)}catch(E){b._onError("Content",
E)}},function(D){v.canceled||b._onError("Download",D);delete b._xhrDfd;return D}).then(function(){b.onDownloadEnd();delete b._xhrDfd;return y});delete this._hrefChanged},_onLoadHandler:function(b){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(b)}catch(x){}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(b){}},destroyDescendants:function(b){this.isLoaded&&this._onUnloadHandler();var x=this._contentSetter;e.forEach(this.getChildren(),function(v){v.destroyRecursive?
v.destroyRecursive(b):v.destroy&&v.destroy(b);v._destroyed=!0});x&&(e.forEach(x.parseResults,function(v){v._destroyed||(v.destroyRecursive?v.destroyRecursive(b):v.destroy&&v.destroy(b),v._destroyed=!0)}),delete x.parseResults);b||q.empty(this.containerNode);delete this._singleChild},_setContent:function(b,x){b=this.preprocessContent(b);this.destroyDescendants();var v=this._contentSetter;v&&v instanceof t._ContentSetter||(v=this._contentSetter=new t._ContentSetter({node:this.containerNode,_onError:B.hitch(this,
this._onError),onContentError:B.hitch(this,function(E){E=this.onContentError(E);try{this.containerNode.innerHTML=E}catch(C){}})}));var y=B.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!b.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});y=v.set(B.isObject(b)&&b.domNode?b.domNode:b,y);var D=this;return g(y&&y.then?y:v.parseDeferred,function(){delete D._contentSetterParams;
x||(D._started&&(D._startChildren(),D._scheduleLayout()),D._onLoadHandler(b))})},preprocessContent:function(b){return b},_onError:function(b,x,v){this.onLoadDeferred.reject(x);b=this["on"+b+"Error"].call(this,x);v||b&&this._setContent(b,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),
function(f,B,l,d,c,u,t,e,r,m){return B("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var a=this.getParent();this._childOfLayoutWidget=a&&a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(r.on("resize",u.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var a=[],h=!1;t("\x3e *",this.containerNode).some(function(q){var n=
e.byNode(q);n&&n.resize?a.push(n):!/script|link|style/i.test(q.nodeName)&&q.offsetHeight&&(h=!0)});this._singleChild=1!=a.length||h?null:a[0];l.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(a,h){this._resizeCalled=!0;this._scheduleLayout(a,h)},_scheduleLayout:function(a,h){this._isShown()?this._layout(a,h):(this._needLayout=!0,this._changeSize=a,this._resultSize=h)},_layout:function(a,h){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();
a&&d.setMarginBox(this.domNode,a);var q=this.containerNode;q===this.domNode?(h=h||{},u.mixin(h,a||{}),"h"in h&&"w"in h||(h=u.mixin(d.getMarginBox(q),h)),this._contentBox=m.marginBox2contentBox(q,h)):this._contentBox=d.getContentBox(q);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||d.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else{a=this.getChildren();for(var h,q=0;h=
a[q++];)h.resize&&h.resize()}},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,h=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!l.contains(a,"dijitHidden")&&h&&h.style&&"none"!=h.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array",
"dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(f,B,l,d,c){function u(e,r){var m=e.resize?e.resize(r):l.setMarginBox(e.domNode,r);m?c.mixin(e,m):(c.mixin(e,l.getMarginBox(e.domNode)),c.mixin(e,r))}var t={marginBox2contentBox:function(e,r){var m=d.getComputedStyle(e),a=l.getMarginExtents(e,m),h=l.getPadBorderExtents(e,m);return{l:d.toPixelValue(e,m.paddingLeft),t:d.toPixelValue(e,m.paddingTop),w:r.w-(a.w+h.w),h:r.h-(a.h+h.h)}},layoutChildren:function(e,r,m,a,h){r=
c.mixin({},r);B.add(e,"dijitLayoutContainer");m=f.filter(m,function(q){return"center"!=q.region&&"client"!=q.layoutAlign}).concat(f.filter(m,function(q){return"center"==q.region||"client"==q.layoutAlign}));f.forEach(m,function(q){var n=q.domNode,k=q.region||q.layoutAlign;if(!k)throw Error("No region setting for "+q.id);var g=n.style;g.left=r.l+"px";g.top=r.t+"px";g.position="absolute";var b=B.add;var x=k;x=x.substring(0,1).toUpperCase()+x.substring(1);b.call(B,n,"dijitAlign"+x);n={};a&&a==q.id&&(n["top"==
q.region||"bottom"==q.region?"h":"w"]=h);"leading"==k&&(k=q.isLeftToRight()?"left":"right");"trailing"==k&&(k=q.isLeftToRight()?"right":"left");"top"==k||"bottom"==k?(n.w=r.w,u(q,n),r.h-=q.h,"top"==k?r.t+=q.h:g.top=r.t+r.h+"px"):"left"==k||"right"==k?(n.h=r.h,u(q,n),r.w-=q.w,"left"==k?r.l+=q.w:g.left=r.l+r.w+"px"):"client"!=k&&"center"!=k||u(q,r)})}};c.setObject("dijit.layout.utils",t);return t})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(f,B,l,d,c,u,t){var e=0,r={_secureForInnerHtml:function(m){return m.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:u.empty,_setNodeContent:function(m,a){u.empty(m);if(a)if("number"==typeof a&&(a=a.toString()),"string"==typeof a&&(a=u.toDom(a,m.ownerDocument)),!a.nodeType&&B.isArrayLike(a))for(var h=a.length,q=0;q<a.length;q=h==a.length?q+1:0)u.place(a[q],m,"last");else u.place(a,m,"last");return m},_ContentSetter:d("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:f._scopeName,startup:!0,constructor:function(m,a){B.mixin(this,m||{});a=this.node=c.byId(this.node||a);this.id||(this.id=["Setter",a?a.id||a.tagName:"",e++].join("_"))},set:function(m,a){void 0!==m&&(this.content=m);"number"==typeof m&&(m=m.toString());a&&this._mixin(a);this.onBegin();this.setContent();return(m=this.onEnd())&&m.then?m:this.node},setContent:function(){var m=this.node;if(!m)throw Error(this.declaredClass+
": setContent given no node");try{m=r._setNodeContent(m,this.content)}catch(h){var a=this.onContentError(h);try{m.innerHTML=a}catch(q){}}this.node=m},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(l.forEach(this.parseResults,function(m){m.destroy&&m.destroy()}),delete this.parseResults);u.empty(this.node)},onBegin:function(){var m=this.content;if(B.isString(m)&&(this.cleanContent&&
(m=r._secureForInnerHtml(m)),this.extractContent)){var a=m.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);a&&(m=a[1])}this.empty();this.content=m;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(m){return"Error occurred setting content: "+m},onExecError:function(m){return"Error occurred executing scripts: "+m},_mixin:function(m){var a=
{},h;for(h in m)h in a||(this[h]=m[h])},_parse:function(){var m=this.node;try{var a={};l.forEach(["dir","lang","textDir"],function(q){this[q]&&(a[q]=this[q])},this);var h=this;this.parseDeferred=t.parse({rootNode:m,noStart:!this.startup,inherited:a,scope:this.parserScope}).then(function(q){return h.parseResults=q},function(q){h._onError("Content",q,"Error parsing in _ContentSetter#"+h.id)})}catch(q){this._onError("Content",q,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(m,a,h){m=
this["on"+m+"Error"].call(this,a);h||m&&r._setNodeContent(this.node,m,!0)}}),set:function(m,a,h){void 0==a&&(a="");"number"==typeof a&&(a=a.toString());return h?(new r._ContentSetter(B.mixin(h,{content:a,node:m}))).set():r._setNodeContent(m,a,!0)}};B.setObject("dojo.html",r);return r})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./json5 ./query ./on ./ready".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b){function x(E){var C=E._nameCaseMap,z=E.prototype;if(!C||C._extendCnt<D){C=E._nameCaseMap={};for(var w in z)"_"!==w.charAt(0)&&(C[w.toLowerCase()]=w);C._extendCnt=D}return C}function v(E,C){C||(C=f);var z=C._dojoParserCtorMap||(C._dojoParserCtorMap={}),w=E.join();if(!z[w]){for(var A=[],G=0,F=E.length;G<F;G++){var H=E[G];A[A.length]=z[H]=z[H]||l.getObject(H)||~H.indexOf("/")&&C(H)}E=A.shift();z[w]=A.length?E.createSubclass?E.createSubclass(A):E.extend.apply(E,
A):E}return z[w]}new Date("X");var y=q("csp-restrictions")?n.parse:function(E){return eval("("+E+")")};var D=0;r.after(l,"extend",function(){D++},!0);n={_clearCache:function(){D++;_ctorMap={}},_functionFromScript:function(E,C){var z="",w="",A=E.getAttribute(C+"args")||E.getAttribute("args");C=E.getAttribute("with");A=(A||"").split(/\s*,\s*/);C&&C.length&&d.forEach(C.split(/\s*,\s*/),function(G){z+="with("+G+"){";w+="}"});return new Function(A,z+E.innerHTML+w)},instantiate:function(E,C,z){C=C||{};
z=z||{};var w=(z.scope||B._scopeName)+"Type",A="data-"+(z.scope||B._scopeName)+"-",G=A+"type",F=A+"mixins",H=[];d.forEach(E,function(J){var K=w in C?C[w]:J.getAttribute(G)||J.getAttribute(w);if(K){var Q=J.getAttribute(F);K=Q?[K].concat(Q.split(/\s*,\s*/)):[K];H.push({node:J,types:K})}});return this._instantiate(H,C,z)},_instantiate:function(E,C,z,w){function A(G){C._started||z.noStart||d.forEach(G,function(F){"function"!==typeof F.startup||F._started||F.startup()});return G}E=d.map(E,function(G){var F=
G.ctor||v(G.types,z.contextRequire);if(!F)throw Error("Unable to resolve constructor for: '"+G.types.join()+"'");return this.construct(F,G.node,C,z,G.scripts,G.inherited)},this);return w?m(E).then(A):A(E)},construct:function(E,C,z,w,A,G){function F(X){L&&l.setObject(L,X);for(I=0;I<ia.length;I++)r[ia[I].advice||"after"](X,ia[I].method,l.hitch(X,ia[I].func),!0);for(I=0;I<R.length;I++)R[I].call(X);for(I=0;I<S.length;I++)X.watch(S[I].prop,S[I].func);for(I=0;I<M.length;I++)g(X,M[I].event,M[I].func);return X}
var H=E&&E.prototype;w=w||{};var J={};w.defaults&&l.mixin(J,w.defaults);G&&l.mixin(J,G);if(q("dom-attributes-explicit"))var K=C.attributes;else q("dom-attributes-specified-flag")?K=d.filter(C.attributes,function(X){return X.specified}):(G=(/^input$|^img$/i.test(C.nodeName)?C:C.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),K=d.map(G.split(/\s+/),function(X){var fa=X.toLowerCase();return{name:X,value:"LI"==C.nodeName&&"value"==
X||"enctype"==fa?C.getAttribute(fa):C.getAttributeNode(fa).value}}));var Q=w.scope||B._scopeName;G="data-"+Q+"-";var P={};"dojo"!==Q&&(P[G+"props"]="data-dojo-props",P[G+"type"]="data-dojo-type",P[G+"mixins"]="data-dojo-mixins",P[Q+"type"]="dojotype",P[G+"id"]="data-dojo-id");var I=0,N;Q=[];for(var L,W;N=K[I++];){var Z=N.name,aa=Z.toLowerCase();N=N.value;switch(P[aa]||aa){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":W=N;break;case "data-dojo-id":case "jsid":L=
N;break;case "data-dojo-attach-point":case "dojoattachpoint":J.dojoAttachPoint=N;break;case "data-dojo-attach-event":case "dojoattachevent":J.dojoAttachEvent=N;break;case "class":J["class"]=C.className;break;case "style":J.style=C.style&&C.style.cssText;break;default:if(Z in H||(Z=x(E)[aa]||Z),Z in H)switch(typeof H[Z]){case "string":J[Z]=N;break;case "number":J[Z]=N.length?Number(N):NaN;break;case "boolean":J[Z]="false"!=N.toLowerCase();break;case "function":""===N||-1!=N.search(/[^\w\.]+/i)?J[Z]=
new Function(N):J[Z]=l.getObject(N,!1)||new Function(N);Q.push(Z);break;default:aa=H[Z];try{J[Z]=aa&&"length"in aa?N?N.split(/\s*,\s*/):[]:aa instanceof Date?""==N?new Date(""):"now"==N?new Date:a.fromISOString(N):aa instanceof e?B.baseUrl+N:y(N)}catch(X){}}else J[Z]=N}}for(K=0;K<Q.length;K++)P=Q[K].toLowerCase(),C.removeAttribute(P),C[P]=null;if(W)try{W=y.call(w.propsThis,"{"+W+"}"),l.mixin(J,W)}catch(X){throw Error(X.toString()+" in data-dojo-props\x3d'"+W+"'");}l.mixin(J,z);A||(A=E&&(E._noScript||
H._noScript)?[]:k("\x3e script[type^\x3d'dojo/']",C));var ia=[],R=[],S=[],M=[];if(A)for(I=0;I<A.length;I++)P=A[I],C.removeChild(P),z=P.getAttribute(G+"event")||P.getAttribute("event"),w=P.getAttribute(G+"prop"),W=P.getAttribute(G+"method"),Q=P.getAttribute(G+"advice"),K=P.getAttribute("type"),P=this._functionFromScript(P,G),z?"dojo/connect"==K?ia.push({method:z,func:P}):"dojo/on"==K?M.push({event:z,func:P}):J[z]=P:"dojo/aspect"==K?ia.push({method:W,advice:Q,func:P}):"dojo/watch"==K?S.push({prop:w,
func:P}):R.push(P);E=(A=E.markupFactory||H.markupFactory)?A(J,C,E):new E(J,C);return E.then?E.then(F):F(E)},scan:function(E,C){function z(aa){if(!aa.inherited){aa.inherited={};var ia=aa.node,R=z(aa.parent);ia={dir:ia.getAttribute("dir")||R.dir,lang:ia.getAttribute("lang")||R.lang,textDir:ia.getAttribute(K)||R.textDir};for(var S in ia)ia[S]&&(aa.inherited[S]=ia[S])}return aa.inherited}var w=[],A=[],G={},F=(C.scope||B._scopeName)+"Type",H="data-"+(C.scope||B._scopeName)+"-",J=H+"type",K=H+"textdir";
H+="mixins";var Q=E.firstChild,P=C.inherited;if(!P){P=function S(ia,R){return ia.getAttribute&&ia.getAttribute(R)||ia.parentNode&&S(ia.parentNode,R)};P={dir:P(E,"dir"),lang:P(E,"lang"),textDir:P(E,K)};for(var I in P)P[I]||delete P[I]}I={inherited:P};for(var N,L;;)if(Q)if(1!=Q.nodeType)Q=Q.nextSibling;else if(N&&"script"==Q.nodeName.toLowerCase())(P=Q.getAttribute("type"))&&/^dojo\/\w/i.test(P)&&N.push(Q),Q=Q.nextSibling;else if(L)Q=Q.nextSibling;else if(P=Q.getAttribute(J)||Q.getAttribute(F),E=Q.firstChild,
P||E&&(3!=E.nodeType||E.nextSibling)){L=null;if(P){var W=Q.getAttribute(H);N=W?[P].concat(W.split(/\s*,\s*/)):[P];try{L=v(N,C.contextRequire)}catch(aa){}L||d.forEach(N,function(aa){~aa.indexOf("/")&&!G[aa]&&(G[aa]=!0,A[A.length]=aa)});W=L&&!L.prototype._noScript?[]:null;I={types:N,ctor:L,parent:I,node:Q,scripts:W};I.inherited=z(I);w.push(I)}else I={node:Q,scripts:N,parent:I};N=W;L=Q.stopParser||L&&L.prototype.stopParser&&!C.template;Q=E}else Q=Q.nextSibling;else{if(!I||!I.node)break;Q=I.node.nextSibling;
L=!1;I=I.parent;N=I.scripts}var Z=new h;A.length?(C.contextRequire||f)(A,function(){Z.resolve(d.filter(w,function(aa){if(!aa.ctor)try{aa.ctor=v(aa.types,C.contextRequire)}catch(S){}for(var ia=aa.parent;ia&&!ia.types;)ia=ia.parent;var R=aa.ctor&&aa.ctor.prototype;aa.instantiateChildren=!(R&&R.stopParser&&!C.template);aa.instantiate=!ia||ia.instantiate&&ia.instantiateChildren;return aa.instantiate}))}):Z.resolve(w);return Z.promise},_require:function(E,C){E=y("{"+E.innerHTML+"}");var z=[],w=[],A=new h;
C=C&&C.contextRequire||f;for(var G in E)z.push(G),w.push(E[G]);C(w,function(){for(var F=0;F<z.length;F++)l.setObject(z[F],arguments[F]);A.resolve(arguments)});return A.promise},_scanAmd:function(E,C){var z=new h,w=z.promise;z.resolve(!0);var A=this;k("script[type\x3d'dojo/require']",E).forEach(function(G){w=w.then(function(){return A._require(G,C)});G.parentNode.removeChild(G)});return w},parse:function(E,C){!E||"string"==typeof E||"nodeType"in E||(C=E,E=C.rootNode);var z=E?u.byId(E):t.body();C=C||
{};var w=C.template?{template:!0}:{},A=[],G=this;E=this._scanAmd(z,C).then(function(){return G.scan(z,C)}).then(function(F){return G._instantiate(F,w,C,!0)}).then(function(F){return A=A.concat(F)}).otherwise(function(F){throw F;});l.mixin(A,E);return A}};B.parser=n;c.parseOnLoad&&b(100,n,"parse");return n})},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(f,B,l,d){var c=f.some;return function(u){var t,e;B.isArray(u)?e=u:u&&"object"===typeof u&&
(t=u);var r=[];if(t){e=[];for(var m in t)Object.hasOwnProperty.call(t,m)&&(r.push(m),e.push(t[m]));var a={}}else e&&(a=[]);if(!e||!e.length)return(new l).resolve(a);var h=new l;h.promise.always(function(){a=r=null});var q=e.length;c(e,function(n,k){t||r.push(k);d(n,function(g){h.isFulfilled()||(a[r[k]]=g,0===--q&&h.resolve(a))},h.reject);return h.isFulfilled()});return h.promise}})},"dojo/json5":function(){define(["./json5/parse"],function(f){return{parse:f}})},"dojo/json5/parse":function(){define(["../string",
"./util"],function(f,B){function l(Q,P,I){var N=Q[P];if(null!=N&&"object"===typeof N)for(var L in N){var W=l(N,L,I);void 0===W?delete N[L]:N[L]=W}return I.call(Q,P,N)}function d(){if(g[v])return f.fromCodePoint(f.codePointAt(g,v))}function c(){var Q=d();"\n"===Q?(y++,D=0):Q?D+=Q.length:D++;Q&&(v+=Q.length);return Q}function u(Q,P){return{type:Q,value:P,line:y,column:D}}function t(Q){for(var P=0;P<Q.length;P++){var I=Q[P];if(d()!==I)throw h(c());c()}}function e(){switch(d()){case "b":return c(),"\b";
case "f":return c(),"\f";case "n":return c(),"\n";case "r":return c(),"\r";case "t":return c(),"\t";case "v":return c(),"\v";case "0":c();if(B.isDigit(d()))throw h(c());return"\x00";case "x":c();var Q="",P=d();if(!B.isHexDigit(P))throw h(c());Q+=c();P=d();if(!B.isHexDigit(P))throw h(c());Q+=c();return f.fromCodePoint(parseInt(Q,16));case "u":return c(),r();case "\n":case "\u2028":case "\u2029":return c(),"";case "\r":return c(),"\n"===d()&&c(),"";case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":throw h(c());
case void 0:throw h(c());}return c()}function r(){for(var Q="",P=4;0<P--;){var I=d();if(!B.isHexDigit(I))throw h(c());Q+=c()}return f.fromCodePoint(parseInt(Q,16))}function m(){switch(E.type){case "punctuator":switch(E.value){case "{":var Q={};break;case "[":Q=[]}break;case "null":case "boolean":case "numeric":case "string":Q=E.value}if(void 0===z)z=Q;else{var P=x[x.length-1];Array.isArray(P)?P.push(Q):P[C]=Q}null!==Q&&"object"===typeof Q?(x.push(Q),b=Array.isArray(Q)?"beforeArrayValue":"beforePropertyName"):
(Q=x[x.length-1],b=null==Q?"end":Array.isArray(Q)?"afterArrayValue":"afterPropertyValue")}function a(){x.pop();var Q=x[x.length-1];b=null==Q?"end":Array.isArray(Q)?"afterArrayValue":"afterPropertyValue"}function h(Q){if(void 0===Q)Q=k("JSON5: invalid end of input at "+y+":"+D);else{var P={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\x00":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};P[Q]?Q=P[Q]:" ">Q&&(Q=Q.charCodeAt(0).toString(16),Q="\\x"+("00"+
Q).substring(Q.length));Q=k("JSON5: invalid character '"+Q+"' at "+y+":"+D)}return Q}function q(){return k("JSON5: invalid end of input at "+y+":"+D)}function n(){D-=5;return k("JSON5: invalid identifier character at "+y+":"+D)}function k(Q){Q=new SyntaxError(Q);Q.lineNumber=y;Q.columnNumber=D;return Q}var g,b,x,v,y,D,E,C,z,w,A,G,F,H,J={"default":function(){switch(H){case "\t":case "\v":case "\f":case " ":case "\u00a0":case "\ufeff":case "\n":case "\r":case "\u2028":case "\u2029":c();return;case "/":c();
w="comment";return;case void 0:return c(),u("eof")}if(B.isSpaceSeparator(H))c();else return J[b]()},comment:function(){switch(H){case "*":c();w="multiLineComment";return;case "/":c();w="singleLineComment";return}throw h(c());},multiLineComment:function(){switch(H){case "*":c();w="multiLineCommentAsterisk";return;case void 0:throw h(c());}c()},multiLineCommentAsterisk:function(){switch(H){case "*":c();return;case "/":c();w="default";return;case void 0:throw h(c());}c();w="multiLineComment"},singleLineComment:function(){switch(H){case "\n":case "\r":case "\u2028":case "\u2029":c();
w="default";return;case void 0:return c(),u("eof")}c()},value:function(){switch(H){case "{":case "[":return u("punctuator",c());case "n":return c(),t("ull"),u("null",null);case "t":return c(),t("rue"),u("boolean",!0);case "f":return c(),t("alse"),u("boolean",!1);case "-":case "+":"-"===c()&&(F=-1);w="sign";return;case ".":A=c();w="decimalPointLeading";return;case "0":A=c();w="zero";return;case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":A=c();w="decimalInteger";return;
case "I":return c(),t("nfinity"),u("numeric",Infinity);case "N":return c(),t("aN"),u("numeric",NaN);case '"':case "'":G='"'===c();A="";w="string";return}throw h(c());},identifierNameStartEscape:function(){if("u"!==H)throw h(c());c();var Q=r();switch(Q){case "$":case "_":break;default:if(!B.isIdStartChar(Q))throw n();}A+=Q;w="identifierName"},identifierName:function(){switch(H){case "$":case "_":case "\u200c":case "\u200d":A+=c();return;case "\\":c();w="identifierNameEscape";return}if(B.isIdContinueChar(H))A+=
c();else return u("identifier",A)},identifierNameEscape:function(){if("u"!==H)throw h(c());c();var Q=r();switch(Q){case "$":case "_":case "\u200c":case "\u200d":break;default:if(!B.isIdContinueChar(Q))throw n();}A+=Q;w="identifierName"},sign:function(){switch(H){case ".":A=c();w="decimalPointLeading";return;case "0":A=c();w="zero";return;case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":A=c();w="decimalInteger";return;case "I":return c(),t("nfinity"),u("numeric",Infinity*
F);case "N":return c(),t("aN"),u("numeric",NaN)}throw h(c());},zero:function(){switch(H){case ".":A+=c();w="decimalPoint";return;case "e":case "E":A+=c();w="decimalExponent";return;case "x":case "X":A+=c();w="hexadecimal";return}return u("numeric",0*F)},decimalInteger:function(){switch(H){case ".":A+=c();w="decimalPoint";return;case "e":case "E":A+=c();w="decimalExponent";return}if(B.isDigit(H))A+=c();else return u("numeric",F*Number(A))},decimalPointLeading:function(){if(B.isDigit(H))A+=c(),w="decimalFraction";
else throw h(c());},decimalPoint:function(){switch(H){case "e":case "E":A+=c();w="decimalExponent";return}if(B.isDigit(H))A+=c(),w="decimalFraction";else return u("numeric",F*Number(A))},decimalFraction:function(){switch(H){case "e":case "E":A+=c();w="decimalExponent";return}if(B.isDigit(H))A+=c();else return u("numeric",F*Number(A))},decimalExponent:function(){switch(H){case "+":case "-":A+=c();w="decimalExponentSign";return}if(B.isDigit(H))A+=c(),w="decimalExponentInteger";else throw h(c());},decimalExponentSign:function(){if(B.isDigit(H))A+=
c(),w="decimalExponentInteger";else throw h(c());},decimalExponentInteger:function(){if(B.isDigit(H))A+=c();else return u("numeric",F*Number(A))},hexadecimal:function(){if(B.isHexDigit(H))A+=c(),w="hexadecimalInteger";else throw h(c());},hexadecimalInteger:function(){if(B.isHexDigit(H))A+=c();else return u("numeric",F*Number(A))},string:function(){switch(H){case "\\":c();A+=e();return;case '"':if(G)return c(),u("string",A);A+=c();return;case "'":if(!G)return c(),u("string",A);A+=c();return;case "\n":case "\r":throw h(c());
case void 0:throw h(c());}A+=c()},start:function(){switch(H){case "{":case "[":return u("punctuator",c())}w="value"},beforePropertyName:function(){switch(H){case "$":case "_":A=c();w="identifierName";return;case "\\":c();w="identifierNameStartEscape";return;case "}":return u("punctuator",c());case '"':case "'":G='"'===c();w="string";return}if(B.isIdStartChar(H))A+=c(),w="identifierName";else throw h(c());},afterPropertyName:function(){if(":"===H)return u("punctuator",c());throw h(c());},beforePropertyValue:function(){w=
"value"},afterPropertyValue:function(){switch(H){case ",":case "}":return u("punctuator",c())}throw h(c());},beforeArrayValue:function(){if("]"===H)return u("punctuator",c());w="value"},afterArrayValue:function(){switch(H){case ",":case "]":return u("punctuator",c())}throw h(c());},end:function(){throw h(c());}},K={start:function(){if("eof"===E.type)throw q();m()},beforePropertyName:function(){switch(E.type){case "identifier":case "string":C=E.value;b="afterPropertyName";break;case "punctuator":a();
break;case "eof":throw q();}},afterPropertyName:function(){if("eof"===E.type)throw q();b="beforePropertyValue"},beforePropertyValue:function(){if("eof"===E.type)throw q();m()},beforeArrayValue:function(){if("eof"===E.type)throw q();"punctuator"===E.type&&"]"===E.value?a():m()},afterPropertyValue:function(){if("eof"===E.type)throw q();switch(E.value){case ",":b="beforePropertyName";break;case "}":a()}},afterArrayValue:function(){if("eof"===E.type)throw q();switch(E.value){case ",":b="beforeArrayValue";
break;case "]":a()}},end:function(){}};return function(Q,P){g=String(Q);b="start";x=[];v=0;y=1;D=0;z=C=E=void 0;do{a:for(w="default",A="",G=!1,F=1;;)if(H=d(),Q=J[w]()){E=Q;break a}K[b]()}while("eof"!==E.type);return"function"===typeof P?l({"":z},"",P):z}})},"dojo/json5/util":function(){define(["./unicode"],function(f){return{isSpaceSeparator:function(B){return"string"===typeof B&&f.Space_Separator.test(B)},isIdStartChar:function(B){return"string"===typeof B&&("a"<=B&&"z">=B||"A"<=B&&"Z">=B||"$"===
B||"_"===B||f.ID_Start.test(B))},isIdContinueChar:function(B){return"string"===typeof B&&("a"<=B&&"z">=B||"A"<=B&&"Z">=B||"0"<=B&&"9">=B||"$"===B||"_"===B||"\u200c"===B||"\u200d"===B||f.ID_Continue.test(B))},isDigit:function(B){return"string"===typeof B&&/[0-9]/.test(B)},isHexDigit:function(B){return"string"===typeof B&&/[0-9A-Fa-f]/.test(B)}}})},"dojo/json5/unicode":function(){define({Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/})},
"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(f,B,l,d,c){return l("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var u=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);c.parse(u,{noStart:!this._earlyTemplatedStartup,template:!0,
inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(d.hitch(this,function(t){this._startupWidgets=t;for(var e=0;e<t.length;e++)this._processTemplateNode(t[e],function(r,m){return r[m]},function(r,m,a){return m in r?r.connect(r,m,a):r.on(m,a,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");
}},_processTemplateNode:function(u,t,e){return t(u,"dojoType")||t(u,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){f.forEach(this._startupWidgets,function(u){u&&!u._started&&u.startup&&u.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"arcgisonline/sharing/dijit/dialog/SubscriptionStatusDlg":function(){define(["dojo","dijit","dojox","dojo/require!dijit/Dialog,dijit/_Widget,dijit/_Templated,dijit/form/Button,dojo/cookie"],function(f,B,l){f.provide("arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg");
f.require("dijit.Dialog");f.require("dijit._Widget");f.require("dijit._Templated");f.require("dijit.form.Button");f.require("dojo.cookie");f.declare("arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg",[B._Widget,B._Templated],{widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"widgetContent" \x3e\r\n  \x3cdiv dojotype\x3d"dijit.Dialog" id\x3d"subscription-status-dialog" dojoAttachPoint\x3d"subscriptionStatusDlg" title\x3d"" execute\x3d""\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"subscriptionStateDiv"\x3e\x3c/div\x3e\r\n    \x3cbr/\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"actionNeededDiv"\x3e\x3c/div\x3e\r\n    \x3cbr/\x3e\r\n    \x3cdiv class\x3d"esriFloatTrailing"\x3e\x3cbutton dojoAttachPoint\x3d"closeButton" dojoAttachEvent\x3d"onClick:onOkClick" class\x3d"jevent primary" dojoType\x3d"dijit.form.Button"\x3e${i18n.ok}\x3c/button\x3e\x3c/div\x3e\r\n    \x3cbr style\x3d"clear:both;"/\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
statics:{_instance:null,getInstance:function(){null==this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg);return this._instance}},subscriptionStatusDlg:null,subscriptionStateDiv:null,actionNeededDiv:null,closeButton:null,postMixInProperties:function(){this.inherited(arguments);this.i18n=f.i18n.getLocalization("arcgisonline","arcgisonline").common;f.mixin(this.i18n,f.i18n.getLocalization("arcgisonline","arcgisonline").subscriptionStatusDlg)},postCreate:function(){this.loadConnections()},
show:function(d){this.clear();this.setSubscriptionState(d);this.setActionMessage(d);this.subscriptionStatusDlg.show()},showOther:function(d){this.clear();this.setOtherSubscriptionStatus(d);f.style(this.actionNeededDiv,"display","none");this.subscriptionStatusDlg.show()},setSubscriptionState:function(d){if(d&&d.state){var c=this.i18n.subscriptionStatusExpiredMsg;d=d.state.toLowerCase();"expired"===d?c=this.i18n.subscriptionStatusExpiredMsg:"cancelled"===d?c=this.i18n.subscriptionStatusCancelledMsg:
"suspended"===d?c=esri.substitute({linkStart:"\x3cspan class\x3d'esriItemLinks'\x3e\x3ca href\x3d'https://doc.arcgis.com/en/arcgis-online/administer/view-status.htm' target\x3d'_blank'\x3e",linkEnd:"\x3c/a\x3e\x3c/span\x3e"},this.i18n.subscriptionStatusSuspendedMsg):"restricted"===d&&(c=this.i18n.subscriptionStatusRestrictedMsgNoLink);f.attr(this.subscriptionStateDiv,"innerHTML",c)}},setOtherSubscriptionStatus:function(d){this.subscriptionStatusDlg.set("title",this.i18n.errorTitle);var c=this.i18n.expiredStatus;
d&&("SB_0005"===d?c=this.i18n.suspendedStatus:"SB_0006"===d?c=this.i18n.cancelledStatus:"SB_0007"===d&&(c=this.i18n.expiredStatus));d=esri.substitute({subscriptionState:c},this.i18n.otherSubscriptionStatusMsg);f.attr(this.subscriptionStateDiv,"innerHTML",d)},setActionMessage:function(d){var c=this.getUser();c&&c.role&&("org_admin"===c.role||"account_admin"===c.role)?((d.type||"").toLowerCase(),d.state.toLowerCase(),d=esri.substitute({linkStart:"\x3cspan class\x3d'esriItemLinks'\x3e\x3ca href\x3d'https://www.esri.com/en-us/contact#c\x3dus\x26t\x3d3' target\x3d'_blank'\x3e",
linkEnd:"\x3c/a\x3e\x3c/span\x3e"},this.i18n.contactCustomerService),f.attr(this.actionNeededDiv,"innerHTML",d)):f.attr(this.actionNeededDiv,"innerHTML",this.i18n.nonAdminActionMsg)},loadConnections:function(){f.query(".jevent").connect("onclick",function(d){d.preventDefault()});f.connect(this.subscriptionStatusDlg,"onCancel",f.hitch(this,function(d){this.onCancel(d)}));f.connect(this.subscriptionStatusDlg,"hide",f.hitch(this,function(d){this.onHide(d)}))},clear:function(){this.subscriptionStatusDlg.set("title",
this.i18n.subscriptionStatusTitle);f.attr(this.subscriptionStateDiv,"innerHTML","");f.attr(this.actionNeededDiv,"innerHTML","");f.style(this.actionNeededDiv,"display","")},hide:function(){this.subscriptionStatusDlg.hide()},onOkClick:function(d){B.byId("subscription-status-dialog").hide()},getUser:function(){var d=f.cookie("esri_auth");return esriGeowConfig.userInfo||JSON.parse(d)||null},onCancel:function(){},onHide:function(){}})})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),
function(f,B,l,d,c,u,t){u.extend(f,{waiRole:"",waiState:""});return c("dijit._Templated",[B,l],{constructor:function(){t.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(e,r){var m=this.inherited(arguments),a=r(e,"waiRole");a&&e.setAttribute("role",a);(a=r(e,"waiState"))&&d.forEach(a.split(/\s*,\s*/),function(h){-1!=h.indexOf("-")&&(h=h.split("-"),e.setAttribute("aria-"+h[0],h[1]))});
return m}})})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(f,B){f.cookie=function(l,d,c){var u=document.cookie;if(1==arguments.length)var t=(t=u.match(new RegExp("(?:^|; )"+B.escapeString(l)+"\x3d([^;]*)")))?decodeURIComponent(t[1]):void 0;else{c=c||{};u=c.expires;if("number"==typeof u){var e=new Date;e.setTime(e.getTime()+864E5*u);u=c.expires=e}u&&u.toUTCString&&(c.expires=u.toUTCString());d=encodeURIComponent(d);u=l+"\x3d"+d;for(var r in c)u+="; "+r,e=c[r],!0!==e&&(u+=
"\x3d"+e);document.cookie=u}return t};f.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return f.cookie})},"arcgisonline/sharing/dijit/dialog/ConfirmDialog":function(){define(["dojo/_base/declare","dijit/Dialog","./_ConfirmDialogMixin"],function(f,B,l){return f("arcgisonline/sharing/dijit/dialog/ConfirmDialog",
[B,l],{})})},"arcgisonline/sharing/dijit/dialog/_ConfirmDialogMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom-class dojo/query dojo/topic dojo/keys dijit/_WidgetsInTemplateMixin dojo/i18n!arcgisonline/nls/arcgisonline dojo/text!./templates/actionBar.html dijit/form/Button".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h,q,n){return f("arcgisonline/sharing/dijit/dialog/_ConfirmDialogMixin",h,{actionBarTemplate:n,
buttonOkLabel:q.common.ok,_setButtonOkLabelAttr:function(k){this.okButton.set("label",k)},buttonCancelLabel:q.common.cancel,_setButtonCancelLabelAttr:function(k){this.cancelButton.set("label",k)},busyMessage:q.common.pleaseWait,_setBusyMessageAttr:{node:"busyMessageSpan",attribute:"innerHTML"},_setShowCancelAttr:function(k){t.set(this.cancelButton.domNode,"display",k?"":"none")},_setHelpLinkInfoAttr:function(k){var g=r(".dijitDialogTitle",this.domNode).shift();u.create("a",{className:"icon-ui-question margin-left-half font-size--1",
title:k.title,href:k.url||"#",target:"_blank"},g)},onOk:function(){},onCancel:function(){},onHide:function(){},show:function(k){var g=new l;k&&k.message&&(this._messageNode||(this._messageNode=u.create("p",{innerHTML:k,"class":"esriMessageNode trailer-0"},r(".dijitDialogPaneContent",this.domNode)[0],"first")),this.set("title",k.title||""),c.set(this._messageNode,"innerHTML",k.message||""));this.closeButtonNode&&(this.closeButtonNode.tabIndex=0);this.own(d(this,"hide",B.hitch(this,function(b){g.isResolved()||
g.resolve("onCancel");this.destroyRecursive()})),d(this.okButton,"click",B.hitch(this,function(b){b.preventDefault();m.publish("/dlg/onOk");g.isResolved()||g.resolve("onOk");this.onOk()})),d(this.cancelButton,"click",B.hitch(this,function(b){b.preventDefault();m.publish("/dlg/onCancel");g.isResolved()||g.resolve("onCancel");this.onCancel();this.hide()})),d(this.domNode,"keypress",B.hitch(this,function(b){if(b&&b.keyCode===a.ENTER)this.okButton.onClick(b)})),m.subscribe("/dlg/busyMessage",B.hitch(this,
function(b){this.set("busyMessage",b)})),m.subscribe("/esri/disable",B.hitch(this,function(b,x){this.set("busyMessage",x||this.busyMessage||q.common.pleaseWait);this.set("disabled",b)})));this.inherited(arguments);return g},_setDisabledAttr:function(k){r(".dijitButton",this.actionBarNode).map(dijit.byNode).forEach(function(g){g.set("disabled",k)});dojo[k?"removeClass":"addClass"](this.busyMessageSpan,"hide")}})})},"arcgisonline/pages/utils/mapViewer":function(){define(["require","exports","tslib",
"../../esriGeowConfig","./subscription"],function(f,B,l,d,c){function u(h){return-1<[a.Modern,a.Classic].indexOf(h)}function t(h,q){var n=(new Date("April 13, 2021")).getTime();return q?!1:h>=n}function e(h){var q,n;if(h.isPortal)return h.mapViewer||a.Classic;if(u(h.mapViewer))return h.mapViewer;if(h.subscriptionInfo)return t(h.created,h.isPortal),(0,c.isTrialSubscription)(null===(q=h.subscriptionInfo)||void 0===q?void 0:q.type,h.isPortal)||(0,c.isDeveloperSubscription)(null===(n=h.subscriptionInfo)||
void 0===n?void 0:n.type,h.isPortal),a.Modern}function r(h){var q;if(h.isSignedIn){var n=null===(q=h.properties)||void 0===q?void 0:q.mapViewer;if(u(n))return n}if(!h.isViewingOrg)return a.Modern}function m(h){var q,n,k,g,b=!!d.default.self,x=!(!d.default.userInfo||!d.default.userInfo.username&&!d.default.userInfo.email);h=r({isSignedIn:x,isViewingOrg:b&&!!d.default.self.id,properties:h||d.default.userProperties});var v=null===(n=null===(q=d.default.self)||void 0===q?void 0:q.portalProperties)||void 0===
n?void 0:n.mapViewer;q=d.default.self.id&&e({mapViewer:v,created:null===(k=d.default.self)||void 0===k?void 0:k.created,subscriptionInfo:b&&d.default.self.subscriptionInfo,isPortal:null===(g=d.default.self)||void 0===g?void 0:g.isPortal});return h||q||(x?a.Classic:a.Modern)}Object.defineProperty(B,"__esModule",{value:!0});B.determineMapViewerSetting=B.determineUserMapViewer=B.determineOrgMapViewer=B.isOrgPastMapViewerCutOffDate=B.MapViewerType=void 0;d=l.__importDefault(d);var a;(function(h){h.Modern=
"modern";h.Classic="classic"})(a=B.MapViewerType||(B.MapViewerType={}));B.isOrgPastMapViewerCutOffDate=t;B.determineOrgMapViewer=e;B.determineUserMapViewer=r;B.determineMapViewerSetting=m;B.default={MapViewerType:a,isValidMapViewerType:u,isOrgPastMapViewerCutOffDate:t,determineOrgMapViewer:e,determineUserMapViewer:r,determineMapViewerSetting:m}})},"arcgisonline/pages/utils/subscription":function(){define(["require","exports"],function(f,B){function l(t,e){return e?!1:-1<[B.SubscriptionTypes.TrialDeveloper,
B.SubscriptionTypes.DeveloperSubscription,B.SubscriptionTypes.Developer].indexOf(null===t||void 0===t?void 0:t.toLowerCase())}function d(t,e){return e?!1:-1<[B.SubscriptionTypes.Trial,B.SubscriptionTypes.TrialPress].indexOf(t.toLowerCase())}function c(t,e){return e?!1:B.SubscriptionTypes.PersonalUse.toLowerCase()===t.toLowerCase()}function u(t,e){return e?!1:B.SubscriptionTypes.StudentUse.toLowerCase()===t.toLowerCase()}Object.defineProperty(B,"__esModule",{value:!0});B.isStudentUse=B.isPersonalUse=
B.isTrialSubscription=B.isDeveloperSubscription=B.SubscriptionTypes=void 0;B.SubscriptionTypes={Developer:"developer",DeveloperSubscription:"developer subscription",PersonalUse:"Personal Use",StudentUse:"Student Use",Trial:"trial",TrialDeveloper:"trial developer",TrialPress:"trial press"};B.isDeveloperSubscription=l;B.isTrialSubscription=d;B.isPersonalUse=c;B.isStudentUse=u;B.default={isDeveloperSubscription:l,isPersonalUse:c,isStudentUse:u,isTrialSubscription:d}})},"arcgisonline/pages/utils/storage":function(){define(["require",
"exports","tslib","./strings"],function(f,B,l,d){d=l.__importDefault(d);return function(){function c(){}c.setCookie=function(u,t,e,r){this.writeCookie(u,r?JSON.stringify(t):t,e)};c.getCookie=function(u,t){return(u=this.readCookie(u))&&t?JSON.parse(u):u};c.setLocalStorageItem=function(u,t,e){try{window.localStorage.setItem(u,e?JSON.stringify(t):t)}catch(r){}};c.getLocalStorageItem=function(u,t){try{var e=window.localStorage.getItem(u);return e&&t?JSON.parse(e):e}catch(r){}};c.removeLocalStorageItem=
function(u){try{window.localStorage.removeItem(u)}catch(t){}};c.setSessionStorageItem=function(u,t,e){try{window.sessionStorage.setItem(u,e?JSON.stringify(t):t)}catch(r){}};c.getSessionStorageItem=function(u,t){try{var e=window.sessionStorage.getItem(u);return e&&t?JSON.parse(e):e}catch(r){}};c.removeSessionStorageItem=function(u){try{window.sessionStorage.removeItem(u)}catch(t){}};c.readCookie=function(u){var t=document.cookie;u=new RegExp("(?:^|; )".concat(d.default.escapeRegExp(u),"\x3d([^;]*)"));
return(t=t.match(u))?decodeURIComponent(t[1]):void 0};c.writeCookie=function(u,t,e){e=e||{};var r=null===e||void 0===e?void 0:e.expires;if("number"===typeof r){var m=new Date;r*=864E5;m.setTime(Date.now()+r);r=e.expires=m}"string"!==typeof r&&(null===r||void 0===r?0:r.toUTCString)&&(e.expires=r.toUTCString());u="".concat(u,"\x3d").concat(encodeURIComponent(t));for(var a in e)u+="; ".concat(a),t=e[a],!0!==t&&(u+="\x3d".concat(t));document.cookie=u};return c}()})},"esri/IdentityManager":function(){define(["./IdentityManagerDialog",
"./kernel","./OAuthSignInHandler","dojo/_base/declare"],function(f,B,l,d){f=new f;B.id=d.safeMixin(f,l);return B.id})},"esri/IdentityManagerDialog":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),function(f,B,
l,d,c,u,t,e,r,m,a,h,q,n,k,g){B=B([k],{declaredClass:"esri.IdentityManager",_eventMap:{"dialog-cancel":["info"]},constructor:function(b){c.mixin(this,b);this.registerConnectEvents()},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(b,x,v){this._nls||(this._nls=g.identity);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.onDialogCreate());var y=this._loginDialog,D=v&&v.error,E=v&&v.token,C=new d(function(){y.onCancel()});if(y.open)return b=Error("BUSY"),b.name="identity-manager:busy",b.code="IdentityManager.1",b.log=!!l.isDebug,C.errback(b),C;q.hide(y.errMsg_);D&&403==D.code&&E&&(t.set(y.errMsg_,"innerHTML",this._nls.forbidden),
q.show(y.errMsg_));y.dfd_=C;y.serverInfo_=x;y.resUrl_=b;y.admin_=v&&v.isAdmin;t.set(y.resLink_,{title:b,innerHTML:"("+(this.getResourceName(b)||this._nls.lblItem)+")"});t.set(y.serverLink_,{title:x.server,innerHTML:(-1!==x.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":x.server)+" "});y.txtPwd_.set("value","");y.show();return C},_createLoginDialog:function(){var b=this._nls,x=h.substitute(b,this._dialogContent);x=h.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},x);var v=new m({title:b.title,content:x,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(y){y.charOrCode===e.ENTER&&this.execute_()},execute_:function(){var y=this.txtUser_.get("value"),D=this.txtPwd_.get("value"),E=this.dfd_,C=this;if(this.form_.validate()&&y&&D){this.btnSubmit_.set("label",b.lblSigning);var z=a.id.findCredential(C.resUrl_,y),w=function(A){C.btnSubmit_.set("label",
b.lblOk);C.btnSubmit_.set("disabled",!1);q.hide(C.errMsg_);C.hide();m._DialogLevelManager.hide(C);var G=C.serverInfo_;C.dfd_=C.serverInfo_=C.generateDfd_=C.resUrl_=null;var F=z;if(A){var H=A.token;var J=h.isDefined(A.expires)?Number(A.expires):null;var K=!!A.ssl;F?(F.userId=y,F.token=H,F.expires=J,F.validity=A.validity,F.ssl=K,F.creationTime=(new Date).getTime()):F=new n({userId:y,server:G.server,token:H,expires:J,ssl:K,isAdmin:C.admin_,validity:A.validity})}E.callback(F)};z&&!z._enqueued?w():(C.btnSubmit_.set("disabled",
!0),C.generateDfd_=a.id.generateToken(this.serverInfo_,{username:y,password:D},{isAdmin:this.admin_}).addCallback(w).addErrback(function(A){C.btnSubmit_.set("disabled",!1);C.generateDfd_=null;C.btnSubmit_.set("label",b.lblOk);t.set(C.errMsg_,"innerHTML",A&&A.code?b.invalidUser:b.noAuthService);q.show(C.errMsg_)}))}},cancel_:function(){v.generateDfd_&&v.generateDfd_.cancel();var y=v.dfd_,D=v.resUrl_,E=v.serverInfo_;v.btnSubmit_.set("disabled",!1);v.dfd_=v.serverInfo_=v.generateDfd_=v.resUrl_=null;
q.hide(v.errMsg_);m._DialogLevelManager.hide(v);v.esriIdMgr_.onDialogCancel({resourceUrl:D,serverInfo:E});D=Error("ABORTED");D.name="identity-manager:user-aborted";D.code="IdentityManager.2";D.log=!!l.isDebug;y.errback(D)}});x=v.domNode;v.form_=r.byNode(f.query(".esriIdForm",x)[0]);v.txtUser_=r.byNode(f.query(".esriIdUser",x)[0]);v.txtPwd_=r.byNode(f.query(".esriIdPwd",x)[0]);v.btnSubmit_=r.byNode(f.query(".esriIdSubmit",x)[0]);v.btnCancel_=r.byNode(f.query(".esriIdCancel",x)[0]);v.resLink_=f.query(".resLink",
x)[0];v.serverLink_=f.query(".serverLink",x)[0];v.errMsg_=f.query(".esriErrorMsg",x)[0];v.connect(v.txtUser_,"onKeyPress",v.keypressed_);v.connect(v.txtPwd_,"onKeyPress",v.keypressed_);v.connect(v.btnSubmit_,"onClick",v.execute_);v.connect(v.btnCancel_,"onClick",v.onCancel);v.connect(v,"onCancel",v.cancel_);return v}});return a.IdentityManagerDialog=a.IdentityManager=B})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),
function(f,B,l,d,c,u,t,e,r){function m(x,v,y,D){(v=v&&v[x])?v={formatType:v.formatType,options:v}:D&&-1!==f.indexOf(D.properties||"",x)?v={formatType:D.formatter||"DateString",options:null}:y&&-1!==f.indexOf(y.properties||"",x)&&(v={formatType:y.formatter||"NumberFormat",options:null});return v}function a(x,v,y){return[d.isString(x)?x.split(""):x,v||l.global,d.isString(y)?new Function("item","index","array",y):y]}function h(x){return void 0!==x&&null!==x}function q(x){return h(x)?x:""}function n(x,
v,y,D){var E=y.match(/([^\(]+)(\([^\)]+\))?/i);y=d.trim(E[1]);var C=E[2]?d.trim(E[2]):null;E=v[x];D=D||(C?B.fromJson(C.replace(/^\(/,"({").replace(/\)$/,"})")):{});C=D.utcOffset;if(-1===f.indexOf(g,y))y=d.getObject(y),d.isFunction(y)&&(E=y(E,x,v,D));else if("number"===typeof E||"string"===typeof E&&E&&!isNaN(Number(E)))switch(E=Number(E),y){case "NumberFormat":return t.format(E,D);case "DateString":x=new Date(E);if(D.local||D.systemLocale)return D.systemLocale?x.toLocaleDateString()+(D.hideTime?"":
" "+x.toLocaleTimeString()):x.toDateString()+(D.hideTime?"":" "+x.toTimeString());x=x.toUTCString();D.hideTime&&(x=x.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return x;case "DateFormat":return x=new Date(E),h(C)&&(x=c.add(x,"minute",x.getTimezoneOffset()-C)),e.format(x,D)}return q(E)}function k(x,v){var y;if(v)for(y in x)x.hasOwnProperty(y)&&(void 0===x[y]?delete x[y]:x[y]instanceof Object&&k(x[y],!0));else for(y in x)x.hasOwnProperty(y)&&void 0===x[y]&&delete x[y];return x}var g=["NumberFormat",
"DateString","DateFormat"],b=/<\/?[^>]+>/g;u={valueOf:function(x,v){for(var y in x)if(x[y]==v)return y;return null},stripTags:function(x){if(x){var v=typeof x;if("string"===v)x=x.replace(b,"");else if("object"===v)for(var y in x)(v=x[y])&&"string"===typeof v&&(v=v.replace(b,"")),x[y]=v}return x},substitute:function(x,v,y){if(h(y))if(d.isObject(y)){var D=y.first;var E=y.dateFormat;var C=y.numberFormat;var z=y.format}else D=y;if(v&&"${*}"!==v)return d.replace(v,d.hitch({obj:x},function(A,G){var F=G.split(":");
return 1<F.length?(G=F[0],F.shift(),(A=z&&z[F[0]])?F=A.formatType:(F=F.join(":"),A=null),n(G,this.obj,F,A)):(A=m(G,z,C,E))?n(G,this.obj,A.formatType,A.options):q(this.obj[G])}),/\$\{([^\}]+)\}/g);v=[];for(var w in x)if(y=(y=m(w,z,C,E))?n(w,x,y.formatType,y.options):x[w],v.push(w+" \x3d "+q(y)+"\x3cbr/\x3e"),D)break;return v.join("")},filter:function(x,v,y){v=a(x,y,v);y={};var D;x=v[0];for(D in x)v[2].call(v[D],x[D],D,x)&&(y[D]=x[D]);return y},startsWith:function(x,v,y){y=y||0;return x.indexOf(v,y)===
y},endsWith:function(x,v,y){if("number"!==typeof y||!isFinite(y)||Math.floor(y)!==y||y>x.length)y=x.length;y-=v.length;x=x.indexOf(v,y);return-1!==x&&x===y},isDefined:h,fixJson:k,isObject:function(x){return x&&"object"===typeof x},isString:function(x){return"string"===typeof x},mixin:function(x,v){for(var y in v)v.hasOwnProperty(y)&&(x[y]=v[y]);return x},clone2DArray:function(x){if(x=x?x.slice(0):null){var v,y=x.length;for(v=0;v<y;v++)x[v]=x[v]?x[v].slice(0):null}return x},clone3DArray:function(x){if(x=
x?x.slice(0):null){var v,y=x.length;for(v=0;v<y;v++){x[v]=x[v]?x[v].slice(0):null;var D=x[v];if(D){var E,C=D.length;for(E=0;E<C;E++)D[E]=D[E]?D[E].slice(0):null}}}return x}};d.mixin(r,u);r._isDefined=h;r._getParts=a;r._sanitize=k;return u})},"esri/domUtils":function(){define(["./kernel","dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(f,B,l,d,c){var u={show:function(t){if(t=u.getNode(t))t.style.display="block"},getNode:function(t){return t&&t.domNode||t},hide:function(t){if(t=
u.getNode(t))t.style.display="none"},toggle:function(t){if(t=u.getNode(t))t.style.display="none"===t.style.display?"block":"none"},documentBox:8>=c("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(t){if(t=this.getNode(t)){var e=0,r=0,m=0,a=0,h=0,q=0;return[B.connect(t,"ontouchstart",function(n){e=n.touches[0].screenX;r=n.touches[0].screenY;m=t.scrollWidth;a=t.scrollHeight;h=t.clientWidth;q=t.clientHeight}),
B.connect(t,"ontouchmove",function(n){n.preventDefault();var k=t.firstChild;k instanceof Text&&(k=t.childNodes[1]);var g=k._currentX||0,b=k._currentY||0;g+=n.touches[0].screenX-e;0<g?g=0:0>g&&Math.abs(g)+h>m&&(g=-1*(m-h));k._currentX=g;b+=n.touches[0].screenY-r;0<b?b=0:0>b&&Math.abs(b)+q>a&&(b=-1*(a-q));k._currentY=b;d.set(k,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+g+"px, "+b+"px)"});e=n.touches[0].screenX;r=n.touches[0].screenY})]}}};l.mixin(f,u);return u})},
"esri/Credential":function(){define(["dojo/_base/declare","dojo/has","./kernel","./IdentityManagerBase"],function(f,B,l,d){f=f(d.Credential,{});return l.Credential=f})},"esri/IdentityManagerBase":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/url dojo/sniff dojo/io-query dojo/on ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "),function(f,B,l,
d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v){var y={},D=function(A){var G=(new u(A.owningSystemUrl)).host;A=(new u(A.server)).host;var F=/.+\.arcgis\.com$/i;return F.test(G)&&F.test(A)},E=function(A,G){return!!(D(A)&&G&&d.some(G,function(F){return F.test(A.server)}))},C=null,z=null;try{C=window.localStorage,z=window.sessionStorage}catch(A){}t=f(b,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=l.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=[];this.credentials=
[];this._soReqs=[];this._xoReqs=[];this._portals=[];this._getOAuthLocationParams();r(window,"pageshow",l.hitch(this,this._pageShowHandler))},defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,normalizeWebTierAuth:!1,_appUrlObj:n.urlToObject(window.location.href),_postMessageAuthHandle:null,_busy:null,_rejectOnPersistedPageShow:!1,_oAuthLocationParams:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i,
_adminSvcs:/\/rest\/admin\/services(\/|$)/i,_gwDomains:[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},
{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|KnowledgeGraphServer|MapServer|MissionServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer|VideoServer)).*/ig,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(A){var G=this.serverInfos;G?(A=d.filter(A,function(F){return!this.findServerInfo(F.server)},this),this.serverInfos=G.concat(A)):
this.serverInfos=A;d.forEach(A,function(F){F.owningSystemUrl&&this._portals.push(F.owningSystemUrl);if(F.hasPortal){this._portals.push(F.server);var H=a.defaults.io.corsEnabledServers,J=this._getOrigin(F.tokenServiceUrl);n.canUseXhr(F.server)||H.push(F.server.replace(/^https?:\/\//i,""));n.canUseXhr(J)||H.push(J.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(A){var G=this.oAuthInfos;G?(d.forEach(A,function(F){(F=this.findOAuthInfo(F.portalUrl))&&G.splice(G.indexOf(F),1)},this),
this.oAuthInfos=G.concat(A)):this.oAuthInfos=A},registerToken:function(A){A=h.mixin({},A);var G=this._sanitizeUrl(A.server),F=this.findServerInfo(G),H=!0,J;F||(F=new q,F.server=this._getServerInstanceRoot(G),F.tokenServiceUrl=this._getTokenSvcUrl(G),F.hasPortal=!0,this.registerServers([F]));(J=this.findCredential(G,A.userId))?(delete A.server,l.mixin(J,A),H=!1):(J=new w({userId:A.userId,server:F.server,token:A.token,expires:A.expires,ssl:A.ssl,scope:this._isServerRsrc(G)?"server":"portal"}),J.resources=
[G],this.credentials.push(J));J.onTokenChange(!1);H||J.refreshServerTokens()},toJson:function(){return h.fixJson({serverInfos:d.map(this.serverInfos,function(A){return A.toJson()}),oAuthInfos:d.map(this.oAuthInfos,function(A){return A.toJson()}),credentials:d.map(this.credentials,function(A){return A.toJson()})})},initialize:function(A){if(A){l.isString(A)&&(A=JSON.parse(A));var G=A.serverInfos,F=A.oAuthInfos;A=A.credentials;if(G){var H=[];d.forEach(G,function(K){K.server&&K.tokenServiceUrl&&H.push(K.declaredClass?
K:new q(K))});H.length&&this.registerServers(H)}if(F){var J=[];d.forEach(F,function(K){K.appId&&J.push(K.declaredClass?K:new v(K))});J.length&&this.registerOAuthInfos(J)}A&&d.forEach(A,function(K){K.userId&&K.server&&K.token&&K.expires&&K.expires>(new Date).getTime()&&(K=K.declaredClass?K:new w(K),K.onTokenChange(),this.credentials.push(K))},this)}},findServerInfo:function(A){var G;A=this._sanitizeUrl(A);d.some(this.serverInfos,function(F){this._hasSameServerInstance(F.server,A)&&(G=F);return!!G},
this);return G},findOAuthInfo:function(A){var G;A=this._sanitizeUrl(A);d.some(this.oAuthInfos,function(F){this._hasSameServerInstance(F.portalUrl,A)&&(G=F);return!!G},this);return G},findCredential:function(A,G){var F;A=this._sanitizeUrl(A);var H=this._isServerRsrc(A)?"server":"portal";G?d.some(this.credentials,function(J){this._hasSameServerInstance(J.server,A)&&G===J.userId&&J.scope===H&&(F=J);return!!F},this):d.some(this.credentials,function(J){this._hasSameServerInstance(J.server,A)&&-1!==this._getIdenticalSvcIdx(A,
J)&&J.scope===H&&(F=J);return!!F},this);return F},getCredential:function(A,G){var F=!0;if(h.isDefined(G))if(l.isObject(G)){var H=!!G.token;var J=G.error;F=!1!==G.prompt}else H=G;A=this._sanitizeUrl(A);var K=new c(k._dfdCanceller),Q=this._isAdminResource(A);if((H=H?this.findCredential(A):null)&&J&&498===J.code)H.destroy();else if(H)return A=Error("You are currently signed in as: '"+H.userId+"'. You do not have access to this resource: "+A),A.name="identity-manager:not-authorized",A.code="IdentityManagerBase.1",
A.httpCode=J&&J.httpCode,A.messageCode=J?J.messageCode:null,A.subcode=J?J.subcode:null,A.details=J?J.details:null,A.log=!!B.isDebug,K.errback(A),K;if(J=this._findCredential(A,G))return K.callback(J),K;var P=this.findServerInfo(A);if(P)!P.hasPortal&&P.server&&P.owningSystemUrl&&this._hasSameServerInstance(P.server,P.owningSystemUrl)&&(P.hasPortal=!0),!P.hasServer&&this._isServerRsrc(A)&&(P._restInfoDfd=this._getTokenSvcUrl(A,!0),P.hasServer=!0);else{J=this._getTokenSvcUrl(A);if(!J)return A=Error("Unknown resource - could not find token service endpoint."),
A.name="identity-manager:unknown-resource",A.code="IdentityManagerBase.2",A.log=!!B.isDebug,K.errback(A),K;P=new q;P.server=this._getServerInstanceRoot(A);l.isString(J)?(P.tokenServiceUrl=J,P.hasPortal=!0):(P._restInfoDfd=J,P.hasServer=!0);this.registerServers([P])}P.hasPortal&&void 0===P._selfReq&&(F||n.hasSameOrigin(P.tokenServiceUrl,window.location.origin)||this._gwDomains.some(function(I){return I.tokenServiceUrl===P.tokenServiceUrl}))&&(P._selfReq={owningTenant:G&&G.owningTenant,selfDfd:this._getPortalSelf(P.tokenServiceUrl.replace(this._rePortalTokenSvc,
"/sharing/rest/portals/self"),A)});return this._enqueue(A,P,G,K,Q)},getResourceName:function(A){return this._isRESTService(A)?A.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(A)&&A.replace(this._gwUser,"$1")||this._gwItem.test(A)&&A.replace(this._gwItem,"$1")||this._gwGroup.test(A)&&A.replace(this._gwGroup,"$1")||""},generateToken:function(A,G,F){var H=this._rePortalTokenSvc.test(A.tokenServiceUrl),J=new u(window.location.href.toLowerCase()),K=!G;var Q=A.shortLivedTokenValidity;
if(G){var P=m.id.tokenValidity||Q||m.id.defaultTokenValidity;P>Q&&(P=Q)}if(F){var I=F.isAdmin;var N=F.serverUrl;var L=F.token;var W=F.ssl;A.customParameters=F.customParameters}if(I)Q=A.adminTokenServiceUrl;else{Q=A.tokenServiceUrl;var Z=new u(Q.toLowerCase());A.webTierAuth&&F&&F.serverUrl&&!W&&"http"===J.scheme&&(n.hasSameOrigin(J.uri,Q,!0)||"https"===Z.scheme&&J.host===Z.host&&"7080"===J.port&&"7443"===Z.port)&&(Q=Q.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));K&&H&&(Q=Q.replace(/\/rest/i,
""))}I=l.mixin({url:Q,content:l.mixin({request:"getToken",username:G&&G.username,password:G&&G.password,serverUrl:N,token:L,expiration:P,referer:I||H?window.location.host:null,client:I?"referer":null,f:"json"},A.customParameters),handleAs:"json",callbackParamName:K?"callback":void 0},F&&F.ioArgs);F={usePost:!K,disableIdentityLookup:!0,useProxy:this._useProxy(A,F)};H||(I.withCredentials=!1);H=g(I,F);H.addCallback(function(aa){if(!aa||!aa.token)return aa=Error("Unable to generate token"),aa.name="identity-manager:authentication-failed",
aa.code="IdentityManagerBase.3",aa.log=!!B.isDebug,aa;var ia=A.server;y[ia]||(y[ia]={});G&&(y[ia][G.username]=G.password);aa.validity=P;return aa});H.addErrback(function(aa){});return H},isBusy:function(){return!!this._busy},checkSignInStatus:function(A){var G=new c;this.checkAppAccess(A,"").then(function(F){G.resolve(F.credential)}).catch(function(F){G.reject(F)});return G},checkAppAccess:function(A,G,F){var H=this,J=!1;return this.getCredential(A,{prompt:!1}).then(function(K){var Q={f:"json"};if("portal"===
K.scope)if(G&&(H._doPortalSignIn(A)||F&&F.force)){var P=K.server+"/sharing/rest/oauth2/validateAppAccess";Q.client_id=G}else if(K.token)P=K.server+"/sharing/rest";else return{credential:K};else if(K.token)P=K.server+"/rest/services";else return{credential:K};K.token&&(Q.token=K.token);return g({url:P,content:Q,callbackParamName:"callback"},{disableIdentityLookup:!0}).then(function(I){if(!1===I.valid){var N=Error("You are currently signed in as: '"+K.userId+"'.  You do not have access to this app: '"+
G+"'.");N.name="identity-manager:not-authorized";N.code="IdentityManagerBase.1";N.log=!!B.isDebug;N.details=I;throw N;}J=!!I.viewOnlyUserTypeApp;return{credential:K}}).catch(function(I){if("IdentityManagerBase.1"===I.code||400===I.code)throw 400===I.code&&(I.name="identity-manager:invalid-request"),I;if(498===I.code)throw K.destroy(),I=Error("User is not signed in."),I.name="identity-manager:not-authenticated",I.code="IdentityManagerBase.6",I.log=!!B.isDebug,I;return{credential:K}})}).then(function(K){return{credential:K.credential,
viewOnly:J}})},setProtocolErrorHandler:function(A){this._protocolFunc=A},signIn:function(){},oAuthSignIn:function(){},onCredentialCreate:function(){},onCredentialsDestroy:function(){},destroyCredentials:function(){if(this.credentials){var A=this.credentials.slice();d.forEach(A,function(G){G.destroy()})}this.onCredentialsDestroy()},enablePostMessageAuth:function(A){A||(A="https://www.arcgis.com/sharing/rest");this._postMessageAuthHandle&&this._postMessageAuthHandle.remove();this._postMessageAuthHandle=
r(window,"message",function(G){(G.origin===window.location.origin||h.endsWith(G.origin,".arcgis.com"))&&G.data&&"arcgis:auth:requestCredential"===G.data.type&&this.getCredential(A).then(function(F){G.source.postMessage({type:"arcgis:auth:credential",credential:{expires:F.expires,server:F.server,ssl:F.ssl,token:F.token,userId:F.userId}},G.origin)}).catch(function(F){G.source.postMessage({type:"arcgis:auth:error",error:{name:F.name,message:F.message}},G.origin)})}.bind(this))},disablePostMessageAuth:function(){this._postMessageAuthHandle&&
(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)},_getOAuthLocationParams:function(){var A=window.location.hash;if(A){"#"===A.charAt(0)&&(A=A.substring(1));A=e.queryToObject(A);var G=!1;if(A.access_token&&A.expires_in&&A.state&&A.hasOwnProperty("username"))try{A.state=JSON.parse(A.state),A.state.portalUrl&&(this._oAuthLocationParams=A,G=!0)}catch(H){}else if(A.error&&A.error_description&&"access_denied"===A.error&&(G=!0,A.state))try{A.state=JSON.parse(A.state)}catch(H){}G&&
(window.location.hash=A.state&&A.state.hash||"")}if(A=window.location.search){"?"===A.charAt(0)&&(A=A.substring(1));A=e.queryToObject(A);G=!1;if(A.code&&A.state)try{A.state=JSON.parse(A.state),A.state.portalUrl&&A.state.uid&&(this._oAuthLocationParams=A,G=!0)}catch(H){}else if(A.error&&A.error_description&&"access_denied"===A.error&&(G=!0,A.state))try{A.state=JSON.parse(A.state)}catch(H){}if(G){var F=h.mixin({},A);"code error error_description message_code persist state".split(" ").forEach(function(H){delete F[H]});
G=e.objectToQuery(F);window.history.replaceState(window.history.state,"",window.location.pathname+(G?"?"+G:"")+(A.state&&A.state.hash||""))}}},_getOAuthToken:function(A,G,F,H,J){A=A.replace(/^http:/i,"https:");return g({url:A+"/sharing/rest/oauth2/token",content:H&&J?{grant_type:"authorization_code",code:G,redirect_uri:H,client_id:F,code_verifier:J}:{grant_type:"refresh_token",refresh_token:G,client_id:F}},{disableIdentityLookup:!0,usePost:!0})},_pageShowHandler:function(A){A.persisted&&this.isBusy()&&
this._rejectOnPersistedPageShow&&(A=Error("ABORTED"),A.name="identity-manager:user-aborted",A.code="IdentityManager.2",A.log=!!B.isDebug,this._errbackFunc(A))},_findCredential:function(A,G){var F=-1,H,J,K=G&&G.token;G=G&&G.resource;var Q=this._isServerRsrc(A)?"server":"portal",P=d.filter(this.credentials,function(W){return this._hasSameServerInstance(W.server,A)&&W.scope===Q},this);A=G||A;if(P.length)if(1===P.length){G=P[0];var I=(H=(J=this.findServerInfo(G.server))&&J.owningSystemUrl)&&this.findCredential(H,
G.userId);F=this._getIdenticalSvcIdx(A,G);if(K)-1!==F&&(G.resources.splice(F,1),this._removeResource(A,I));else return-1===F&&G.resources.push(A),this._addResource(A,I),G}else{var N,L;d.some(P,function(W){L=this._getIdenticalSvcIdx(A,W);return-1!==L?(N=W,I=(H=(J=this.findServerInfo(N.server))&&J.owningSystemUrl)&&this.findCredential(H,N.userId),F=L,!0):!1},this);if(K)N&&(N.resources.splice(F,1),this._removeResource(A,I));else if(N)return this._addResource(A,I),N}},_findOAuthInfo:function(A){var G=
this.findOAuthInfo(A);G||d.some(this.oAuthInfos,function(F){this._isIdProvider(F.portalUrl,A)&&(G=F);return!!G},this);return G},_addResource:function(A,G){G&&-1===this._getIdenticalSvcIdx(A,G)&&G.resources.push(A)},_removeResource:function(A,G){var F=-1;G&&(F=this._getIdenticalSvcIdx(A,G),-1<F&&G.resources.splice(F,1))},_useProxy:function(A,G){return G&&G.isAdmin&&!n.hasSameOrigin(A.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(A.tokenServiceUrl)&&10.1==A.currentVersion&&!n.hasSameOrigin(A.tokenServiceUrl,
window.location.href)},_getOrigin:function(A){A=new u(A);return A.scheme+"://"+A.host+(h.isDefined(A.port)?":"+A.port:"")},_getServerInstanceRoot:function(A){var G=A.toLowerCase(),F=G.indexOf(this._agsRest);-1===F&&this._isAdminResource(A)&&(F=this._agsAdmin.test(A)?A.replace(this._agsAdmin,"$1").length:A.search(this._adminSvcs));-1!==F||n.isSecureProxyService(G)||(F=G.indexOf("/sharing"));-1===F&&"/"===G.substr(-1)&&(F=G.length-1);return-1<F?A.substring(0,F):A},_hasSameServerInstance:function(A,
G){"/"===A.substr(-1)&&(A=A.slice(0,-1));A=A.toLowerCase();G=this._getServerInstanceRoot(G).toLowerCase();A=this._normalizeAGOLorgDomain(A);G=this._normalizeAGOLorgDomain(G);A=A.substr(A.indexOf(":"));G=G.substr(G.indexOf(":"));return A===G},_normalizeAGOLorgDomain:function(A){var G=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,F=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,H=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;G.test(A)?A=A.replace(G,"https://www.arcgis.com"):
F.test(A)?A=A.replace(F,"https://devext.arcgis.com"):H.test(A)&&(A=A.replace(H,"https://qaext.arcgis.com"));return A},_sanitizeUrl:function(A){var G=(a.defaults.io.proxyUrl||"").toLowerCase(),F=G?A.toLowerCase().indexOf(G+"?"):-1;-1!==F&&(A=A.substring(F+G.length+1));A=n.normalize(A);return n.urlToObject(A).path},_isRESTService:function(A){return-1<A.indexOf(this._agsRest)},_isAdminResource:function(A){return this._agsAdmin.test(A)||this._adminSvcs.test(A)},_isServerRsrc:function(A){return this._isRESTService(A)||
this._isAdminResource(A)},_isIdenticalService:function(A,G){if(this._isRESTService(A)&&this._isRESTService(G)){A=this._getSuffix(A).toLowerCase();G=this._getSuffix(G).toLowerCase();var F=A===G;F||(F=/(.*)\/(MapServer|FeatureServer).*/ig,F=A.replace(F,"$1")===G.replace(F,"$1"))}else this._isAdminResource(A)&&this._isAdminResource(G)?F=!0:this._isServerRsrc(A)||this._isServerRsrc(G)||!this._isPortalDomain(A)||(F=!0);return F},_isPortalDomain:function(A){var G=new u(A.toLowerCase()),F=this._portalConfig;
A=d.some(this._gwDomains,function(H){return H.regex.test(G.uri)});!A&&F&&(A=this._hasSameServerInstance(this._getServerInstanceRoot(F.restBaseUrl),G.uri));A||(!this._arcgisUrl&&(F=l.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=(new u(F)).authority),this._arcgisUrl&&(A=this._arcgisUrl.toLowerCase()===G.authority));A||(A=d.some(this._portals,function(H){return this._hasSameServerInstance(H,G.uri)},this));return A=A||this._agsPortal.test(G.path)},_isIdProvider:function(A,G){var F=-1,H=
-1;d.forEach(this._gwDomains,function(P,I){-1===F&&P.regex.test(A)&&(F=I);-1===H&&P.regex.test(G)&&(H=I)});var J=!1;if(-1<F&&-1<H)if(0===F||4===F){if(0===H||4===H)J=!0}else if(1===F){if(1===H||2===H)J=!0}else 2===F?2===H&&(J=!0):3===F&&3===H&&(J=!0);if(!J){var K=this.findServerInfo(G),Q=K&&K.owningSystemUrl;Q&&D(K)&&this._isPortalDomain(Q)&&this._isIdProvider(A,Q)&&(J=!0)}return J},_isPublic:function(A){A=this._sanitizeUrl(A);return d.some(this._publicUrls,function(G){return G.test(A)})},_getIdenticalSvcIdx:function(A,
G){var F=-1;d.some(G.resources,function(H,J){return this._isIdenticalService(A,H)?(F=J,!0):!1},this);return F},_getSuffix:function(A){return A.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(A){if(this._isRESTService(A)||this._isAdminResource(A)){var G=this._getServerInstanceRoot(A);var F=G+"/admin/generateToken";A=G+"/rest/info";G=g({url:A,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});G.adminUrl_=F;return G}if(this._isPortalDomain(A)){var H=
"";d.some(this._gwDomains,function(J){J.regex.test(A)&&(H=J.tokenServiceUrl);return!!H});H||d.some(this._portals,function(J){this._hasSameServerInstance(J,A)&&(H=J+this._gwTokenUrl);return!!H},this);H||(F=A.toLowerCase().indexOf("/sharing"),-1!==F&&(H=A.substring(0,F)+this._gwTokenUrl));H||(H=this._getOrigin(A)+this._gwTokenUrl);H&&(F=(new u(A)).port,/^http:\/\//i.test(A)&&"7080"===F&&(H=H.replace(/:7080/i,":7443")),H=H.replace(/http:/i,"https:"));return H}if(-1!==A.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},
_exchangeToken:function(A,G,F){return g({url:A+"/sharing/rest/oauth2/exchangeToken",content:{f:"json",client_id:G,token:F}},{disableIdentityLookup:!0,usePost:!0}).then(function(H){return H.token})},_getPlatformSelf:function(A,G){A=A.replace(/^http:/i,"https:");return g({url:A+"/sharing/rest/oauth2/platformSelf",content:{f:"json",expiration:30},headers:{"X-Esri-Auth-Client-Id":G,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},withCredentials:!0},{disableIdentityLookup:!0,usePost:!0})},
_getPortalSelf:function(A,G){var F="";d.some(this._gwDomains,function(H){H.regex.test(A)&&(F=H.customBaseUrl);return!!F});if(F)return G=new c,G.resolve({allSSL:!0,currentVersion:"8.4",customBaseUrl:F,portalMode:"multitenant",supportsOAuth:!0}),G;"https:"===window.location.protocol?A=A.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(G)&&(A=A.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return g({url:A,content:{f:"json"},callbackParamName:"callback",withCredentials:!0},
{disableIdentityLookup:!0})},_doPortalSignIn:function(A){var G=this._portalConfig,F=window.location.href,H=this.findServerInfo(A);return(G||this._isPortalDomain(F))&&(H?H.hasPortal||H.owningSystemUrl&&this._isPortalDomain(H.owningSystemUrl):this._isPortalDomain(A))&&(this._isIdProvider(F,A)||G&&(this._hasSameServerInstance(this._getServerInstanceRoot(G.restBaseUrl),A)||this._isIdProvider(G.restBaseUrl,A))||n.hasSameOrigin(F,A,!0))?!0:!1},_checkProtocol:function(A,G,F,H){var J=!0;H=H?G.adminTokenServiceUrl:
G.tokenServiceUrl;0!==l.trim(H).toLowerCase().indexOf("https:")||0===window.location.href.toLowerCase().indexOf("https:")||a.defaults.io.useCors&&(n.canUseXhr(H)||n.canUseXhr(n.getProxyUrl(!0).path))||(J=this._protocolFunc?!!this._protocolFunc({resourceUrl:A,serverInfo:G}):!1,J||(A=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),A.name="identity-manager:aborted",A.code="IdentityManagerBase.4",A.log=!!B.isDebug,F(A)));return J},_enqueue:function(A,G,F,H,J,K){H||
(H=new c(k._dfdCanceller));H.resUrl_=A;H.sinfo_=G;H.options_=F;H.admin_=J;H.refresh_=K;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(A),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(H)):this._xoReqs.push(H):this._doSignIn(H);return H},_doSignIn:function(A){this._busy=A;this._rejectOnPersistedPageShow=!1;var G=this,F=function(N){var L=A.options_&&A.options_.resource,W=A.resUrl_,Z=A.refresh_,aa=!1;-1===d.indexOf(G.credentials,
N)&&(Z&&-1!==d.indexOf(G.credentials,Z)?(Z.userId=N.userId,Z.token=N.token,Z.expires=N.expires,Z.validity=N.validity,Z.ssl=N.ssl,Z.creationTime=N.creationTime,aa=!0,N=Z):G.credentials.push(N));N.resources||(N.resources=[]);-1===N.resources.indexOf(L||W)&&N.resources.push(L||W);N.scope=G._isServerRsrc(W)?"server":"portal";N.onTokenChange();L=G._soReqs;var ia={};G._soReqs=[];d.forEach(L,function(R){if(!this._isIdenticalService(W,R.resUrl_)){var S=this._getSuffix(R.resUrl_);ia[S]||(ia[S]=!0,N.resources.push(R.resUrl_))}},
G);A.callback(N);d.forEach(L,function(R){this._hasSameServerInstance(this._getServerInstanceRoot(W),R.resUrl_)?R.callback(N):this._soReqs.push(R)},G);G._busy=A.resUrl_=A.sinfo_=A.refresh_=null;if(!aa)G.onCredentialCreate({credential:N});G._soReqs.length?G._doSignIn(G._soReqs.shift()):G._xoReqs.length&&G._doSignIn(G._xoReqs.shift())},H=function(N){A.errback(N);G._busy=A.resUrl_=A.sinfo_=A.refresh_=null;G._soReqs.length?G._doSignIn(G._soReqs.shift()):G._xoReqs.length&&G._doSignIn(G._xoReqs.shift())},
J=function(N,L,W,Z){var aa=A.sinfo_,ia=!A.options_||!1!==A.options_.prompt,R=aa.hasPortal&&G._findOAuthInfo(A.resUrl_);if(N)F(new w({userId:N,server:aa.server,token:W||null,expires:h.isDefined(Z)?Number(Z):null,ssl:!!L}));else if(window!==window.parent&&G._appUrlObj.query&&G._appUrlObj.query["arcgis-auth-origin"]&&G._appUrlObj.query["arcgis-auth-portal"]&&G._hasSameServerInstance(G._getServerInstanceRoot(G._appUrlObj.query["arcgis-auth-portal"]),A.resUrl_)){window.parent.postMessage({type:"arcgis:auth:requestCredential"},
G._appUrlObj.query["arcgis-auth-origin"]);var S=r(window,"message",function(ra){if(ra.source===window.parent&&ra.data)if("arcgis:auth:credential"===ra.data.type&&ra.data.credential.expires<Date.now()&&(ra.data.type="arcgis:auth:error",ra.data.error={name:"tokenExpiredError"}),"arcgis:auth:credential"===ra.data.type)S.remove(),F(new w(ra.data.credential));else if("arcgis:auth:error"===ra.data.type){S.remove();ra=ra.data.error;switch(ra.name){case "identity-manager:busy":case "identity-manager:not-authorized":var Aa=
"IdentityManager.1";break;case "identity-manager:server-identification-failed":case "identity-manager:unknown-resource":case "identity-manager:user-aborted":Aa="IdentityManager.2";break;case "identity-manager:authentication-failed":case "identity-manager:credential-request-failed":case "tokenExpiredError":Aa="IdentityManager.3";"tokenExpiredError"===ra.name&&(ra.name="identity-manager:credential-request-failed",ra.message="Parent application's token has expired.");break;case "identity-manager:aborted":Aa=
"IdentityManager.4";break;case "identity-manager:not-authenticated":Aa="IdentityManager.6";break;case "identity-manager:invalid-request":Aa=400}var Ea=Error(ra.message);Ea.name=ra.name;Ea.code=Aa;Ea.log=!!B.isDebug;H(Ea)}})}else if(R){var M=R._oAuthCred;M||(N=new x(R,C),L=new x(R,z),N.isValid()&&L.isValid()?N.expires>L.expires?(M=N,L.destroy()):(M=L,N.destroy()):M=N.isValid()?N:L,R._oAuthCred=M);if(M.isValid()){var X=new w({userId:M.userId,server:aa.server,token:M.token,expires:M.expires,ssl:M.ssl,
_oAuthCred:M});var fa=R.appId!==M.appId&&G._doPortalSignIn(A.resUrl_);fa||M.refreshToken?(M.refreshToken?A._pendingDfd=G._getOAuthToken(aa.server,M.refreshToken,M.appId).then(function(ra){X.expires=Date.now()+1E3*ra.expires_in;X.token=ra.access_token;return X}):(N=new c,N.resolve(X),A._pendingDfd=N),A._pendingDfd.then(function(ra){return fa?G._exchangeToken(ra.server,R.appId,ra.token).then(function(Aa){ra.token=Aa;return ra}).catch(function(){return ra}):ra}).then(function(ra){F(ra)}).catch(function(){M.destroy();
J()})):F(X)}else if(G._oAuthLocationParams&&G._hasSameServerInstance(R.portalUrl,G._oAuthLocationParams.state.portalUrl)&&(G._oAuthLocationParams.access_token||G._oAuthLocationParams.code&&G._oAuthLocationParams.state.uid===M.stateUID&&M.codeVerifier))N=G._oAuthLocationParams,G._oAuthLocationParams=null,A._pendingDfd=G._processOAuthResponseParams(N,R,aa).then(function(ra){F(ra)}).catch(H);else{var ea=function(){ia?A._pendingDfd=G.oAuthSignIn(A.resUrl_,aa,R,A.options_).addCallbacks(F,H):(ha=Error("User is not signed in."),
ha.name="identity-manager:not-authenticated",ha.code="IdentityManagerBase.6",ha.log=!!B.isDebug,H(ha))};G._doPortalSignIn(A.resUrl_)?A._pendingDfd=G._getPlatformSelf(aa.server,R.appId).then(function(ra){var Aa=ra.portalUrl;!Aa||n.hasSameOrigin(Aa,window.location.origin,!0)?(X=new w({userId:ra.username,server:aa.server,expires:Date.now()+1E3*ra.expires_in,token:ra.token}),F(X)):ea()}).catch(ea):ea()}}else if(ia)G._checkProtocol(A.resUrl_,aa,H,A.admin_)&&(N=A.options_,A.admin_&&(N=N||{},N.isAdmin=!0),
A._pendingDfd=G.signIn(A.resUrl_,aa,N).addCallbacks(F,H));else{var ha=Error("User is not signed in.");ha.name="identity-manager:not-authenticated";ha.code="IdentityManagerBase.6";ha.log=!!B.isDebug;H(ha)}},K=function(){var N=A.sinfo_,L=N.owningSystemUrl,W=A.options_,Z;if(W){var aa=W.token;var ia=W.error;var R=W.prompt}(Z=G._findCredential(L,{token:aa,resource:A.resUrl_}))||d.some(G.credentials,function(S){this._isIdProvider(L,S.server)&&(Z=S);return!!Z},G);Z?(W=G.findCredential(A.resUrl_,Z.userId))?
F(W):E(N,G._legacyFed)?(W=Z.toJson(),W.server=N.server,W.resources=null,F(new w(W))):(A._pendingDfd=G.generateToken(G.findServerInfo(Z.server),null,{serverUrl:A.resUrl_,token:Z.token,ssl:Z.ssl})).addCallbacks(function(S){F(new w({userId:Z.userId,server:N.server,token:S.token,expires:h.isDefined(S.expires)?Number(S.expires):null,ssl:!!S.ssl,isAdmin:A.admin_,validity:S.validity}))},H):(G._busy=null,aa&&(A.options_.token=null),(A._pendingDfd=G.getCredential(L.replace(/\/?$/,"/sharing"),{resource:A.resUrl_,
owningTenant:N.owningTenant,token:aa,error:ia,prompt:R})).addCallbacks(function(S){G._enqueue(A.resUrl_,A.sinfo_,A.options_,A,A.admin_)},function(S){H(S)}))};this._errbackFunc=H;var Q=A.sinfo_.owningSystemUrl,P=this._isServerRsrc(A.resUrl_),I=A.sinfo_._restInfoDfd;I?I.addCallbacks(function(N){var L=A.sinfo_;L._restInfoDfd&&(L.adminTokenServiceUrl=L._restInfoDfd.adminUrl_,L._restInfoDfd=null,L.tokenServiceUrl=l.getObject("authInfo.tokenServicesUrl",!1,N)||l.getObject("authInfo.tokenServiceUrl",!1,
N)||l.getObject("tokenServiceUrl",!1,N),L.shortLivedTokenValidity=l.getObject("authInfo.shortLivedTokenValidity",!1,N),L.currentVersion=N.currentVersion,L.owningTenant=N.owningTenant,(N=L.owningSystemUrl=N.owningSystemUrl)&&G._portals.push(N));P&&L.owningSystemUrl?K():J()},function(){A.sinfo_._restInfoDfd=null;var N=Error("Unknown resource - could not find token service endpoint.");N.name="identity-manager:server-identification-failed";N.code="IdentityManagerBase.2";N.log=!!B.isDebug;H(N)}):P&&Q?
K():A.sinfo_._selfReq?A.sinfo_._selfReq.selfDfd.then(function(N){var L={};if(N){var W=N.user&&N.user.username;L.username=W;L.allSSL=N.allSSL;var Z=N.supportsOAuth;var aa=parseFloat(N.currentVersion);if("multitenant"===N.portalMode)var ia=N.customBaseUrl;A.sinfo_.currentVersion=aa}A.sinfo_.webTierAuth=!!W;return W&&G.normalizeWebTierAuth?G.generateToken(A.sinfo_,null,{ssl:L.allSSL}).addBoth(function(R){L.portalToken=R&&R.token;L.tokenExpiration=R&&R.expires;return L}):!W&&Z&&4.4<=aa&&!G._findOAuthInfo(A.resUrl_)?
G._generateOAuthInfo({portalUrl:A.sinfo_.server,customBaseUrl:ia,owningTenant:A.sinfo_._selfReq.owningTenant}).always(function(){return L}):L}).always(function(N){A.sinfo_._selfReq=null;N?J(N.username,N.allSSL,N.portalToken,N.tokenExpiration):J()}):J()},_generateOAuthInfo:function(A){var G=this,F=A.portalUrl,H=A.customBaseUrl,J=A.owningTenant;if(A=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){var K=window.location.href;var Q=K.indexOf("?");-1<Q&&(K=K.slice(0,
Q));Q=K.search(/\/(apps|home)\//);K=-1<Q?K.slice(0,Q):null}A&&K?(this._hasTestedIfAppIsOnPortal=!0,A=g({url:K+"/sharing/rest",content:{f:"json"},handleAs:"json"}).then(function(){G.defaultOAuthInfo=new v({appId:"arcgisonline",popupCallbackUrl:K+"/home/oauth-callback.html"})})):(A=new c,A.resolve(),A=A.promise);return A.then(function(){if(G.defaultOAuthInfo)return F=F.replace(/^http:/i,"https:"),g({url:F+"/sharing/rest/oauth2/validateRedirectUri",content:{accountId:J,client_id:G.defaultOAuthInfo.appId,
redirect_uri:n.getAbsoluteUrl(G.defaultOAuthInfo.popupCallbackUrl),f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(P){if(P.valid){var I=G.defaultOAuthInfo.clone();I.portalUrl=P.urlKey&&H?"https://"+P.urlKey.toLowerCase()+"."+H:F;I.popup=window!==window.top||!(n.hasSameOrigin(F,window.location.origin)||G._gwDomains.some(function(N){return N.regex.test(F)&&N.regex.test(window.location.origin)}));G.oAuthInfos.push(I)}})})}});var w=f(b,{declaredClass:"esri.Credential",tokenRefreshBuffer:2,
constructor:function(A){l.mixin(this,A);this.resources=this.resources||[];h.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var A=this,G=this.resources&&this.resources[0],F=m.id.findServerInfo(this.server),H=F&&F.owningSystemUrl,J=!!H&&"server"===this.scope,K=J&&E(F,m.id._legacyFed),Q=J&&m.id.findServerInfo(H),P,I=(P=F.webTierAuth)&&m.id.normalizeWebTierAuth,N=y[this.server];N=N&&N[this.userId];var L={username:this.userId,password:N};
if(!P||I)if(J&&!Q&&d.some(m.id.serverInfos,function(aa){m.id._isIdProvider(H,aa.server)&&(Q=aa);return!!Q}),P=Q&&m.id.findCredential(Q.server,this.userId),!J||P)if(K)P.refreshToken();else{if(J)var W={serverUrl:G,token:P&&P.token,ssl:P&&P.ssl};else if(I)L=null,W={ssl:this.ssl};else if(N)this.isAdmin&&(W={isAdmin:!0});else{if(G){G=m.id._sanitizeUrl(G);this._enqueued=1;var Z=m.id._enqueue(G,F,null,null,this.isAdmin,this);Z.addCallback(function(){A._enqueued=0;A.refreshServerTokens()}).addErrback(function(){A._enqueued=
0})}return Z}return m.id.generateToken(J?Q:F,J?null:L,W).addCallback(function(aa){A.token=aa.token;A.expires=h.isDefined(aa.expires)?Number(aa.expires):null;A.creationTime=(new Date).getTime();A.validity=aa.validity;A.onTokenChange();A.refreshServerTokens()}).addErrback(function(){})}},refreshServerTokens:function(){"portal"===this.scope&&d.forEach(m.id.credentials,function(A){var G=m.id.findServerInfo(A.server),F=G&&G.owningSystemUrl;A!==this&&A.userId===this.userId&&F&&"server"===A.scope&&(m.id._hasSameServerInstance(this.server,
F)||m.id._isIdProvider(F,this.server))&&(E(G,m.id._legacyFed)?(A.token=this.token,A.expires=this.expires,A.creationTime=this.creationTime,A.validity=this.validity,A.onTokenChange()):A.refreshToken())},this)},onTokenChange:function(A){clearTimeout(this._refreshTimer);var G=this.server&&m.id.findServerInfo(this.server),F=(G=G&&G.owningSystemUrl)&&m.id.findServerInfo(G);!1!==A&&(!G||"portal"===this.scope||F&&F.webTierAuth&&!m.id.normalizeWebTierAuth)&&(h.isDefined(this.expires)||h.isDefined(this.validity))&&
this._startRefreshTimer()},onDestroy:function(){},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var A=d.indexOf(m.id.credentials,this);-1<A&&m.id.credentials.splice(A,1);this.onTokenChange();this.onDestroy()},toJson:function(){return this._toJson()},_toJson:function(){var A=h.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,
validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),G=this.resources;G&&0<G.length&&(A.resources=G.slice());return A},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var A=6E4*this.tokenRefreshBuffer,G=Math.pow(2,31)-1,F=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>F?F=0:F>G&&(F=G);this._refreshTimer=setTimeout(l.hitch(this,this.refreshToken),F>A?F-A:F)}});t.Credential=w;return m.IdentityManagerBase=
t})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","./kernel"],function(f,B,l,d){l=function(){return this}();var c={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,
0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,zoomAnimationThrottled:!1,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:l.Worker&&!1,io:{errorHandler:function(u,t){B.publish("esri.Error",[u])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,"server.arcgisonline.com","services.arcgisonline.com","www.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com",
"tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com","tiles4.arcgis.com","basemaps.arcgis.com","basemapsbeta.arcgis.com","basemaps-api.arcgis.com","elevation3d.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","services4.arcgis.com","services5.arcgis.com","services6.arcgis.com","services7.arcgis.com","services8.arcgis.com","services9.arcgis.com","cdn.arcgis.com","cdn-a.arcgis.com","cdn-b.arcgis.com","static.arcgis.com",
"utility.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","geoenrich.arcgis.com","qaext.arcgis.com","staticqa.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","geoenrichqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","localvtiles.arcgis.com","staticdev.arcgis.com","tilesdevext.arcgis.com","elevation3ddev.arcgis.com","servicesdev.arcgis.com","servicesdev1.arcgis.com","servicesdev2.arcgis.com",
"servicesdev3.arcgis.com","geocodedev.arcgis.com","geoenrichdev.arcgis.com","basemapsdev.arcgis.com","basemapsdev-api.arcgis.com","basemapsbetadev.arcgis.com"],corsDetection:l.cordova?!1:!0,corsDetectionTimeout:15,corsStatus:{},crossOriginNoCorsDomains:null,webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},
workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}}}};d.config=c;f.noGlobals||(l.esriConfig=c);return c})},"esri/ServerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(f,B,l,d,c){f=f(null,{declaredClass:"esri.ServerInfo",constructor:function(u){B.mixin(this,u)},toJson:function(){return c.fixJson({server:this.server,tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,
owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}});return d.ServerInfo=f})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),function(f,B,l,d,c,u,t,e,r,m){var a={},h=e.defaults.io,q=/^[a-z][a-z0-9\+\-\.]*:/i,n=/^\s*http:/i,k=/^\s*https:/i,
g=/:\d+$/,b=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;a.isHTTP=function(v){var y=d.location.protocol;return null==v?"http:"===y||"https:"===y:v?"https:"===y:"http:"===y};a.getProtocolForWebResource=function(v){return a.isHTTP()?d.location.protocol:v?"https:":"http:"};a.urlToObject=function(v){var y={},D=new l(v),E=v.indexOf("?");null===D.query?y={path:v,query:null}:(y.path=v.substring(0,E),y.query=c.queryToObject(D.query));D.fragment&&(y.hash=D.fragment,null===D.query&&(y.path=y.path.substring(0,
y.path.length-(D.fragment.length+1))));return y};a.getProxyUrl=function(v,y){var D=f.isString(v)?0===f.trim(v).toLowerCase().indexOf("https:"):v,E=h.proxyUrl,C=m.io.proxyNotSet;f.isString(v)&&(v=a.getProxyRule(v))&&(E=v.proxyUrl);if(!E)throw Error(C);if(D&&!1!==y&&0!==d.location.href.toLowerCase().indexOf("https:")&&(y=E,0!==y.toLowerCase().indexOf("http")&&(y=a.getAbsoluteUrl(y)),y=y.replace(/^http:/i,"https:"),a.canUseXhr(y))){E=y;var z=1}E=a.urlToObject(E);E._xo=z;return E};a.addProxy=function(v){var y=
a.getProxyRule(v),D;y?D=a.urlToObject(y.proxyUrl):h.alwaysUseProxy&&(D=a.getProxyUrl());D&&(y=a.urlToObject(v),v=D.path+"?"+y.path,(D=c.objectToQuery(f.mixin(D.query||{},y.query)))&&(v+="?"+D));return v};a.addProxyRule=function(v){var y=v.urlPrefix=a.urlToObject(v.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),D=h.proxyRules,E,C=D.length,z=C;for(E=0;E<C;E++){var w=D[E].urlPrefix;if(0===y.indexOf(w)){if(y.length===w)return-1;z=E;break}else 0===w.indexOf(y)&&(z=
E+1)}D.splice(z,0,v);return z};a.getProxyRule=function(v){var y=h.proxyRules,D=y.length,E=a.urlToObject(v).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase();for(v=0;v<D;v++)if(0===E.indexOf(y[v].urlPrefix)){var C=y[v];break}return C};a.hasSameOrigin=function(v,y,D){v=v.toLowerCase();y=y.toLowerCase();var E=d.location.href.toLowerCase();v=0===v.indexOf("http")?new l(v):E=new l(E);y=0===y.indexOf("http")?new l(y):f.isString(E)?new l(E):E;return(D||v.scheme===y.scheme)&&v.host===
y.host&&v.port===y.port};a.canUseXhr=function(v,y){var D=r("esri-phonegap")?!0:!1,E=a.hasSameOrigin,C=h.corsEnabledServers,z,w=-1;!D&&r("esri-cors")&&C&&C.length&&(D=B.some(C,function(A,G){A=!A||"object"!==typeof A||A instanceof RegExp?A:A.host;if(A instanceof RegExp){if(A.test(v))return w=G,!0}else if(A&&(z=0!==A.trim().toLowerCase().indexOf("http"),E(v,z?"http://"+A:A)||z&&E(v,"https://"+A)))return w=G,!0;return!1}));return y?w:D};a.getAbsoluteUrl=function(v){var y=a.getProtocolForWebResource();
return f.isString(v)&&!q.test(v)?0===v.indexOf("//")?y+v:0===v.indexOf("/")?y+"//"+d.location.host+v:u._appBaseUrl+v:v};a.fixUrl=function(v){v=f.trim(v);v=a.getAbsoluteUrl(v);v=a.normalizeSlashes(v);v=v.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");v=a.downgradeToHTTP(v);return v=a.upgradeToHTTPS(v)};a.normalize=function(v){return a.fixUrl(v)};a.normalizeSlashes=function(v){if(/^https?:\/\//i.test(v)){var y=v.indexOf("?");if(-1<y){var D=v.slice(0,y);var E=v.slice(y+1)}else D=v;v=D.replace(/\/{2,}/g,
"/");v=v.replace("/","//");E&&(v+="?"+E)}return v};a.downgradeToHTTP=function(v){return a.isHTTP(!1)&&k.test(v)&&a.hasSameOrigin(d.location.href,v,!0)&&!a.canUseXhr(v)?v.replace(k,"http:"):v};a.upgradeToHTTPS=function(v){var y=h.httpsDomains,D=a.isHTTP(!1),E=a.isHTTP(!0);if(!n.test(v))return v;v=f.trim(v);var C=v.indexOf("/",7);C=-1===C?v:v.slice(0,C);C=C.toLowerCase().slice(7);if(g.test(C))if(t.endsWith(C,":80"))C=C.slice(0,-3),v=v.replace(":80","");else return v;if(D&&C===d.location.host&&(!b.test(v)||
!a.canUseXhr(v)))return v;D=!1;if(E&&C===d.location.host)D=!0;else if(y)for(var z=0;z<y.length;z++){var w=y[z];if(C===w||t.endsWith(C,"."+w)){D=!0;break}}D||!E||h.alwaysUseProxy||a.getProxyRule(v)||(D=!0);D&&(v=v.replace(n,"https:"));return v};e=m.widgets.popup;var x=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:e.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,
appName:"App Studio Player",label:e.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,appName:"Collector",label:e.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:e.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:e.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,appName:"Survey123",label:e.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,
appName:"Trek2There",label:e.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",label:e.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:e.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:e.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:e.NLS_openLinkInApp},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,appName:"Microsoft Power BI",label:e.NLS_openLinkInApp}];
a.getURIInfo=function(v){var y;B.some(x,function(D){D.pattern.test(v)&&(y=D);return!!y});return y};a.isKnownURI=function(v){return!!a.getURIInfo(v)};a.isSecureProxyService=function(v){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(v)};a.base64UrlEncode=function(v){return btoa(String.fromCharCode.apply(null,v)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")};f.mixin(u,a);u._getProxyUrl=a.getProxyUrl;u._getProxiedUrl=a.addProxy;u._hasSameOrigin=a.hasSameOrigin;u._canDoXOXHR=a.canUseXhr;
u._getAbsoluteUrl=a.getAbsoluteUrl;u.fixUrl=a.fixUrl;return a})},"esri/sniff":function(){define(["dojo/_base/sniff","dojo/global","./kernel"],function(f,B,l){var d=f("ff"),c=f("ie"),u=void 0===c&&7<=f("trident"),t=f("edge"),e=f("webkit"),r=f("opera"),m=f("chrome"),a=f("safari"),h=navigator.userAgent,q;(q=h.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+_\d+)/i))&&f.add("esri-iphone",parseFloat(q[2].replace("_",".")));(q=h.match(/Android\s+(\d+(\.\d+)*)/i))&&f.add("esri-android",parseFloat(q[1]));(q=h.match(/Fennec\/(\d+\.\d+)/i))&&
f.add("esri-fennec",parseFloat(q[1]));0<=h.indexOf("BlackBerry")&&0<=h.indexOf("WebKit")&&f.add("esri-blackberry",1);f.add("esri-touch",f("esri-iphone")||f("esri-android")||f("esri-blackberry")||6<=f("esri-fennec")||(d||e)&&(document.createTouch||"ontouchstart"in B||B.TouchEvent&&0<navigator.maxTouchPoints)?!0:!1);(q=h.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&f.add("esri-mobile",!!q);f.add("esri-pointer",!d&&(navigator.pointerEnabled||navigator.msPointerEnabled||!!B.PointerEvent));
l._getDOMAccessor=function(k){var g="";d?g="Moz":e?g="Webkit":c?g="ms":r&&(g="O");return g+k.charAt(0).toUpperCase()+k.substr(1)};f.add("esri-phonegap",!!B.cordova);f.add("esri-cors",f("esri-phonegap")||B.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);f.add("esri-file-upload",B.FormData&&B.FileList?!0:!1);f.add("esri-script-sandbox",function(){return"MessageChannel"in B&&"HTMLIFrameElement"in B&&"sandbox"in HTMLIFrameElement.prototype});f.add("esri-secure-context",function(){if("isSecureContext"in
B)return B.isSecureContext;if(B.location&&B.location.origin)return 0===B.location.origin.indexOf("https:")});f.add("esri-wasm","WebAssembly"in B);f.add("esri-workers",B.Worker?!0:!1);f.add("esri-featurelayer-webgl",!1);if(h=f("esri-featurelayer-webgl")){var n=f("esri-mobile");q=n?1:2;n=n?1:3;"object"===typeof h?(h.maxDrillLevel=null==h.maxDrillLevel?q:h.maxDrillLevel,h.maxRecordCountFactor=null==h.maxRecordCountFactor?n:h.maxRecordCountFactor,h.enablePBFQuery=null==h.enablePBFQuery?!0:h.enablePBFQuery):
f.add("esri-featurelayer-webgl",{maxDrillLevel:q,maxRecordCountFactor:n,enablePBFQuery:!0},null,!0)}f.add("esri-featurelayer-webgl-labeling",!1);f.add("esri-pbf",!c||10<=c);f.add("esri-featurelayer-pbf",!0);f.add("esri-transforms",u||t||9<=c||3.5<=d||4<=m||3.1<=a||10.5<=r||3.2<=f("esri-iphone")||2.1<=f("esri-android"));f.add("esri-transitions",u||t||10<=c||4<=d||4<=m||3.1<=a||10.5<=r||3.2<=f("esri-iphone")||2.1<=f("esri-android"));f.add("esri-transforms3d",u||t||10<=d||12<=m||4<=a||3.2<=f("esri-iphone")||
3<=f("esri-android"));f.add("esri-url-encodes-apostrophe",function(){if(!B.document)return!1;var k=B.document.createElement("a");k.href="?'";return-1<k.href.indexOf("?%27")});3>f("esri-android")&&(f.add("esri-transforms",!1,!1,!0),f.add("esri-transitions",!1,!1,!0),f.add("esri-transforms3d",!1,!1,!0));f.add("esri-will-change",f("esri-transforms")&&(52<=m||11.1<=a));l._css=function(k){var g=f("esri-transforms3d");void 0!==k&&null!==k?g=k:g&&(m||a&&!f("esri-iphone"))&&(g=!1);var b=g?"translate3d(":
"translate(",x=g?m?",-1px)":",0px)":")",v=g?"scale3d(":"scale(",y=g?",1)":")",D=g?"rotate3d(0,0,1,":"rotate(",E=g?"matrix3d(":"matrix(",C=g?",0,0,":",",z=g?",0,0,0,0,1,0,":",",w=g?",0,1)":")";return{names:{transition:e&&"-webkit-transition"||d&&"MozTransition"||r&&"OTransition"||c&&"msTransition"||"transition",transform:e&&"-webkit-transform"||d&&"MozTransform"||r&&"OTransform"||c&&"msTransform"||"transform",transformName:e&&"-webkit-transform"||d&&"-moz-transform"||r&&"-o-transform"||c&&"-ms-transform"||
"transform",origin:e&&"-webkit-transform-origin"||d&&"MozTransformOrigin"||r&&"OTransformOrigin"||c&&"msTransformOrigin"||"transformOrigin",endEvent:e&&"webkitTransitionEnd"||d&&"transitionend"||r&&"oTransitionEnd"||c&&"MSTransitionEnd"||"transitionend"},translate:function(A,G){return b+A+"px,"+G+"px"+x},scale:function(A){return v+A+","+A+y},rotate:function(A){return D+A+"deg)"},matrix:function(A){return E+A.xx+","+A.xy+C+A.yx+","+A.yy+z+A.dx.toFixed(10)+(d&&59>=d?"px,":",")+A.dy.toFixed(10)+(d&&
59>=d?"px":"")+w},getScaleFromMatrix:function(A){if(!A)return 1;A=A.toLowerCase();var G=-1<A.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(A.substring(G.length,A.indexOf(",")))}}};l.isiPhone=f("esri-iphone");l.isAndroid=f("esri-android");l.isFennec=f("esri-fennec");l.isBlackBerry=f("esri-blackberry");l.isTouchEnabled=f("esri-touch");l.isPointerEnabled=f("esri-pointer");l._hasCors=f("esri-cors");l._hasFileUpload=f("esri-file-upload");l._hasTransforms=f("esri-transforms");l._hasTransitions=
f("esri-transitions");l._has3DTransforms=f("esri-transforms3d");return f})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(f,B,l){B={_dfdCanceller:function(d){d.canceled=!0;var c=d._pendingDfd;if(!d.isFulfilled()&&c&&!c.isFulfilled()){c.cancel();var u=c.results&&c.results[1]}d._pendingDfd=null;return u},_fixDfd:function(d){var c=d.then;d.then=function(u,t,e){if(u){var r=u;u=function(m){return m&&m._argsArray?r.apply(null,m):r(m)}}return c.call(this,u,t,e)};
return d},_resDfd:function(d,c,u){var t=c.length;1===t?u?d.errback(c[0]):d.callback(c[0]):1<t?(c._argsArray=!0,d.callback(c)):d.callback()}};f.mixin(l,B);return B})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/request/xhr ./core/request/script dojo/request/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils ./support/requestUtils".split(" "),function(f,
B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v){function y(L){L=new u(L);return(L.host+(L.port?":"+L.port:"")).toLowerCase()}function D(L){return this._xhr?this._xhr.getResponseHeader(L):null}function E(L,W){var Z=h.objectToQuery(L.content);Z&&(L.url+=(-1===L.url.indexOf("?")?"?":"\x26")+Z);if(2E3<L.url.length){if("data:"!==L.url.toLowerCase().slice(0,5))return L=new d,L.reject(c.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."})),L;if(3E6<L.url.length)return L=
new d,L.reject(c.mixin(Error(),{message:"When using responseType 'image', data URL length cannot exceed 3000000 characters."})),L}var aa=new Image;W.allowImageDataAccess&&(aa.crossOrigin=L.withCredentials?"use-credentials":"anonymous");var ia=!1,R=new d(function(S){ia=!0;aa.onload=aa.onerror=aa.onabort=null;aa.src=""});W=function(S){aa.onload=aa.onerror=aa.onabort=null;ia||R.reject(Error("Unable to load the resource"))};aa.onload=function(){aa.onload=aa.onerror=aa.onabort=null;ia||R.resolve(this)};
aa.onerror=W;aa.onabort=W;aa.alt="";aa.src=L.url;return R}function C(L,W,Z,aa){var ia=!1,R=!1,S=!1,M;if(g.isDefined(W))if(c.isObject(W)){ia=!!W.useProxy;R=!!W.usePost;S=!!W.returnProgress;var X=W.crossOrigin}else ia=!!W;L=c.mixin({},L);delete L._credential;L._ssl&&(L.url=L.url.replace(/^http:/i,"https:"));10>k("ie")&&!I.test(L.url)&&(L.url=encodeURI(L.url));var fa=L.content,ea=L.url,ha=Z&&L.form,ra=K;X=g.isDefined(X)?X:ra.useCors;L.load=function(Ta){if(Ta){if(Ta.error){var ab=c.mixin(Error(),Ta.error);
ab.log=!!l.isDebug}else"error"===Ta.status&&(ab=c.mixin(Error(),Ta),ab.log=!!l.isDebug);ab&&(L.failOk=!ab.log,g.isDefined(ab.httpCode)||(ab.httpCode=ab.code))}return ab||Ta};L.error=function(Ta,ab){ab&&ab.xhr&&ab.xhr.abort();Ta instanceof Error||(Ta=c.mixin(Error(),Ta));Ta.log=!!l.isDebug;L.failOk=!Ta.log;ra.errorHandler(Ta,ab);return Ta};L._token&&(L.content=L.content||{},L.content.token=L._token);var Aa=0;if(fa&&ea){var Ea=h.objectToQuery(fa);Aa=Ea.length+ea.length+1;k("esri-url-encodes-apostrophe")&&
(Aa=Ea.replace(/'/g,"%27").length+ea.length+1)}L.timeout=g.isDefined(L.timeout)?L.timeout:ra.timeout;L.handleAs=L.handleAs||"json";try{var va=X&&b.canUseXhr(L.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(L.url),Ga=b.hasSameOrigin(L.url,window.location.href)||va,ca=R||Z||Aa>ra.postLength?!0:!1,ja=Ga||-1===L.handleAs.indexOf("json")||!L.callbackParamName||Z?!1:!0,wa=b.getProxyRule(L.url)||ra.alwaysUseProxy||ia||!("image"===L.handleAs&&!W.allowImageDataAccess||ja&&!ca||Ga)?!0:!1;Z&&!k("esri-file-upload")&&
!wa&&va&&(wa=!0);if(wa){var za=b.getProxyUrl(ea,X);var Fa=za.path;za._xo&&(va=!0);!ca&&Fa.length+1+Aa>ra.postLength&&(ca=!0);L.url=Fa+"?"+ea;if(ca)L.content=c.mixin(za.query||{},fa);else{var O=h.objectToQuery(c.mixin(za.query||{},fa));O&&(L.url+="?"+O);L.content=null}}if(!ja||ca||wa){var ya=L.headers;!va||ya&&ya.hasOwnProperty("X-Requested-With")||(ya=L.headers=ya||{},ya["X-Requested-With"]=null);if(Z){var Ha=L.callbackParamName||"callback.html",da=L.callbackElementName||"textarea",Oa,Na,Ca=ha.elements?
ha.elements.length:0;if(fa=L.content)for(Oa in fa.token&&b.isSecureProxyService(ea)&&(ea+=(-1===ea.indexOf("?")?"?":"\x26")+"token\x3d"+fa.token,L.url=wa?Fa+"?"+ea:ea,delete fa.token),fa){var V=fa[Oa];if(g.isDefined(V)){var oa=null;for(Na=0;Na<Ca;Na++){var pa=ha.elements[Na];if(pa.name===Oa){oa=pa;break}}oa?oa.value=V:aa?ha.append(Oa,V):ha.appendChild(a.create("input",{type:"hidden",name:Oa,value:V}))}}if(k("esri-file-upload")){B.forEach(ha.elements,function(Ta){Ta.name===Ha&&ha.removeChild(Ta)});
var Y=aa?ha:new FormData(ha);if(11<=k("safari")&&"entries"in Y&&"delete"in Y){aa=[];for(var ka=Y.entries(),ta=ka.next();!ta.done;){var xa=ta.value;xa[1]instanceof File&&""===xa[1].name&&aa.push(xa[0]);ta=ka.next()}aa.forEach(function(Ta){Y.delete(Ta)})}L.contentType=!1;L.postData=Y;delete L.form}else{ha.enctype="multipart/form-data";9>k("ie")&&(ha.encoding="multipart/form-data");ha.method="post";B.some(ha.elements,function(Ta){return Ta.name===Ha})||ha.appendChild(a.create("input",{type:"hidden",
name:Ha,value:da}));if(-1!==ea.toLowerCase().indexOf("addattachment")||-1!==ea.toLowerCase().indexOf("updateattachment"))ea+=(-1===ea.indexOf("?")?"?":"\x26")+Ha+"\x3d"+da,L.url=wa?Fa+"?"+ea:ea;delete L.content}}if(va&&!L.hasOwnProperty("withCredentials")&&"with-credentials"===K.useCors){Fa=wa?Fa:ea;var Da=b.canUseXhr(Fa,!0),Ja=-1<Da?K.corsEnabledServers[Da]:null;if(Ja&&Ja.hasOwnProperty("withCredentials"))Ja.withCredentials&&(L.withCredentials=!0);else if(q.id){var La=q.id.findServerInfo(Fa);La&&
La.webTierAuth&&(L.withCredentials=!0)}}L=J?J(L):L;var Ya=function(){if("image"===L.handleAs)return E(L,W);if(ca){if(Z&&!k("esri-file-upload")){M=new d(function(){Ta.cancel()});var Ta=m.post(L.url,L).then(function(fb){M.resolve(fb)}).otherwise(function(fb){M.reject(fb)});M.addCallback(function(fb){return L.load(fb)});M.addErrback(function(fb){return L.error(fb)});return M}!wa&&k("safari")&&(L.url+=(-1===L.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+P++);if(S){L.uploadProgress=!0;L.data=
L.postData;L.query=L.content;M=new d(function(){ab.cancel()});var ab=e.post(L.url,L).then(function(fb){M.resolve(fb)},function(fb){M.reject(fb)},function(fb){M.progress({transferType:fb.transferType,loaded:fb.loaded,total:fb.total})});M.addCallback(function(fb){return L.load(fb)});M.addErrback(function(fb){return L.error(fb)});return M}return t.post(L)}return t.get(L)};return L.withCredentials&&v.isNoCorsRequestRequired(ea)?M=v.sendNoCorsRequest(ea,fa).addBoth(function(){var Ta=Ya();M.ioArgs=Ta.ioArgs;
return Ta}):Ya()}L=J?J(L):L;L.jsonp=L.callbackParamName;L.query=L.content;M=new d(function(){Ua.cancel()});var Ua=r.get(L.url,L).then(function(Ta){M.resolve(Ta)}).otherwise(function(Ta){M.reject(Ta)});M.addCallback(function(Ta){return L.load(Ta)});M.addErrback(function(Ta){return L.error(Ta)});return M}catch(Ta){return M=new d,M.errback(L.error(Ta)),M}}function z(L){var W=K.corsStatus,Z=b.canUseXhr(L,!0);-1<Z&&K.corsEnabledServers.splice(Z,1);var aa=new d;aa.reject({log:!!l.isDebug});W[y(L)]=aa.promise;
return Z}function w(L){var W=K.corsStatus;try{var Z=y(L);if(K.corsDetection&&K.useCors&&k("esri-cors")&&L&&-1!==L.toLowerCase().indexOf("/rest/services")&&!b.hasSameOrigin(L,window.location.href)&&!b.canUseXhr(L)){if(W[Z]&&!W[Z].isCanceled())return W[Z];var aa=new d(x._dfdCanceller);W[Z]=aa.promise;var ia=t.get({url:L.substring(0,L.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*K.corsDetectionTimeout});aa._pendingDfd=
ia;ia.then(function(R){R?(b.canUseXhr(L)||K.corsEnabledServers.push(Z),aa.resolve()):aa.reject()},function(R){aa.reject(R)});return aa.promise}}catch(R){}return N}function A(L){J=L}function G(L,W,Z,aa){function ia(va){va._pendingDfd=C(Z,aa,ha,ea);if(!va._pendingDfd){va.ioArgs=va._pendingDfd&&va._pendingDfd.ioArgs;var Ga=Error("Deferred object is missing");Ga.log=!!l.isDebug;va.errback(Ga);va._pendingDfd=null;return va}va._pendingDfd.addCallback(function(ca){if(!ca)return ca;var ja=va._pendingDfd&&
va._pendingDfd.ioArgs&&va._pendingDfd.ioArgs.xhr;if(!ja)return ca;if(ja=ja.getResponseHeader("Content-Type"))if(ja=ja.toLowerCase(),-1===ja.indexOf("text/plain")&&-1===ja.indexOf("application/json"))return ca;if(ca instanceof ArrayBuffer&&750>=ca.byteLength)ja=new Blob([ca]);else if(ca instanceof Blob&&750>=ca.size)ja=ca;else return ca;var wa=new d,za=new FileReader;za.readAsText(ja);za.onloadend=function(){if(!za.error)try{var Fa=JSON.parse(za.result);if(Fa.error)var O=Fa.error}catch(ya){}O?(O=c.mixin(Error(),
O),O.log=!!l.isDebug,null==O.httpCode&&(O.httpCode=O.code),wa.reject(O)):wa.resolve(ca)};return wa.promise}).addCallback(function(ca){va.ioArgs=va._pendingDfd&&va._pendingDfd.ioArgs;aa.returnFullResponse&&(ca={data:ca,_xhr:va.ioArgs&&va.ioArgs.xhr,getHeader:D});va.callback(ca);va._pendingDfd=null}).addErrback(function(ca){if(ca){var ja=ca.code;var wa=ca.subcode;var za=(za=ca.messageCode)&&za.toUpperCase()}if(ca&&403==ja&&(4==wa||ca.message&&-1<ca.message.toLowerCase().indexOf("ssl")&&-1===ca.message.toLowerCase().indexOf("permission"))){if(!Z._ssl){Z._ssl=
Z._sslFromServer=!0;G(va,!0,Z,aa);return}}else if(ca&&415==ca.status){if(z(Z.url),!Z._err415){Z._err415=1;G(va,!0,Z,aa);return}}else if(q.id&&-1!==B.indexOf(q.id._errorCodes,ja)&&!q.id._isPublic(Z.url)&&!S&&(403!=ja||-1===B.indexOf(Q,za)&&(!g.isDefined(wa)||2==wa&&Z._token))){va._pendingDfd=q.id.getCredential(Z.url,{token:Z._token,error:ca});va._pendingDfd.addCallback(function(Fa){Z._token=Fa.token;Z._credential=Fa;Z._ssl=Z._sslFromServer||Fa.ssl;G(va,!0,Z,aa)}).addErrback(function(Fa){va.errback(Fa);
va._pendingDfd=null});return}va.ioArgs=va._pendingDfd&&va._pendingDfd.ioArgs;va.isFulfilled()||va.errback(ca);va._pendingDfd=null}).then(null,null,function(ca){va.progress(ca)})}var R=Z.form,S=aa.disableIdentityLookup,M=aa._preLookup,X=!1;if(k("esri-workers")&&!1!==K.useWorkers)if(!0===aa.useWorkers||!0===K.useWorkers)X=!0;else if(aa.workerOptions){var fa=aa.workerOptions;if(fa.callback||fa.worker&&fa.worker.worker instanceof Worker)X=!0}var ea=R&&k("esri-file-upload")&&R instanceof FormData,ha=R&&
(R.elements?B.some(R.elements,function(va){return"file"===va.type}):ea),ra=-1!==Z.url.toLowerCase().indexOf("token\x3d")||Z.content&&Z.content.token||ha&&B.some(R.elements,function(va){return"token"===va.name})?1:0;if(!W){L.addCallback(function(va){if(va&&(/\/sharing\/rest\/accounts\/self/i.test(Z.url)||/\/sharing\/rest\/portals\/self/i.test(Z.url))){if(!ra&&!Z._token&&va.user&&va.user.username){K.webTierAuthServers.push(y(Z.url));var Ga=K.corsEnabledServers,ca=b.canUseXhr(Z.url,!0),ja={host:y(Z.url),
withCredentials:!0};if(-1===ca)Ga.push(ja);else{var wa=Ga[ca];wa instanceof RegExp?(ja.host=wa,Ga.splice(ca,1,ja)):"object"===typeof wa?wa.withCredentials=!0:Ga.splice(ca,1,ja)}}Array.isArray(va.authorizedCrossOriginNoCorsDomains)&&v.registerNoCorsDomains(va.authorizedCrossOriginNoCorsDomains)}if(va=Z._credential)if(Ga=(Ga=q.id.findServerInfo(va.server))&&Ga.owningSystemUrl)Ga=Ga.replace(/\/?$/,"/sharing"),(va=q.id.findCredential(Ga,va.userId))&&-1===q.id._getIdenticalSvcIdx(Ga,va)&&va.resources.splice(0,
0,Ga)});L.addBoth(function(va){delete Z._credential;!va||k("ie")&&va.nodeType||(va._ssl=Z._ssl)});var Aa=Z.load,Ea=Z.error;Aa&&L.addCallback(function(va){var Ga=L._pendingDfd;Ga=Ga&&Ga.ioArgs;return Aa.call(Ga&&Ga.args,va,Ga)});Ea&&L.addErrback(function(va){var Ga=L._pendingDfd;Ga=Ga&&Ga.ioArgs;return Ea.call(Ga&&Ga.args,va,Ga)})}!q.id||ra||Z._token||q.id._isPublic(Z.url)||S&&!M||!(W=q.id.findCredential(Z.url))||(Z._token=W.token,Z._ssl=W.ssl);X?aa.workerOptions&&aa.workerOptions.worker?(H||(H=t),
t=aa.workerOptions.worker,ia(L)):f(["./workers/RequestClient"],function(va){H||(H=t);if(aa.workerOptions){var Ga=aa.workerOptions;t=va.getClient(Ga.callback,Ga.cbFunction)}else t=va.getClient();ia(L)}):(H&&(t=H,H=null),ia(L));return L}function F(L,W){L.url=b.fixUrl(L.url);W=W||{};var Z=new d(x._dfdCanceller),aa=w(L.url);Z._pendingDfd=aa;aa.always(function(ia){ia&&"cancel"===ia.dojoType?Z.reject(ia):G(Z,!1,L,W)});return Z}var H=null,J,K=n.defaults.io,Q=["COM_0056","COM_0057","SB_0008"],P=0,I=/%[0-9A-F]{2}/i,
N=function(){var L=new d;L.resolve();return L.promise}();F._makeRequest=C;F._processRequest=G;F._disableCors=z;F._detectCors=w;F.setRequestPreCallback=A;q.request=F;q._makeRequest=C;q._processRequest=G;q._disableCors=z;q._detectCors=w;q.setRequestPreCallback=A;return F})},"esri/core/request/script":function(){define("require exports dojo/Deferred dojo/request/script dojo/text!./iframe.html ../sniff".split(" "),function(f,B,l,d,c,u){function t(){var b=document.createElement("iframe");b.name="esri_core_jsonp_iframe";
b.style.display="none";b.setAttribute("sandbox","allow-scripts");if(!u("ff")&&"srcdoc"in b){var x=f.toUrl("dojo/dojo.js"),v=c.replace("../../../dojo/dojo.js",x);x=x.slice(0,-7);v=v.replace("../../../dojo/",x);b.srcdoc=v}else v=f.toUrl("./iframe.html"),"http:"===window.location.protocol&&0===v.indexOf("https:")&&(v=v.replace("https:","http:")),b.src=v;document.body.appendChild(b);return b}function e(){var b=new MessageChannel;b.port1.addEventListener("message",r);b.port1.start();return b}function r(b){var x=
b.data;if("ready"===x){x=0;for(var v=k;x<v.length;x++)b=v[x],a(b,q);k=null}else if(b=g[x.id])delete g[x.id],x.isError?b.dfd.reject(Error(x.message)):b.dfd.resolve(x.response)}function m(b,x){b.addEventListener("load",function(){b.contentWindow.postMessage("init","*",[x.port2])})}function a(b,x){g[b.message.id]=b;x.port1.postMessage(b.message)}Object.defineProperty(B,"__esModule",{value:!0});var h,q,n=0,k=[],g={};B.get=function(b,x){if(!u("esri-script-sandbox"))return d.get(b,x);var v=null;x&&(v={jsonp:x.jsonp,
preventCache:x.preventCache,query:x.query,timeout:x.timeout});x=new l(function(){if(k){var D=k.indexOf(y);-1<D&&k.splice(D,1)}else y.message.id in g&&delete g[y.message.id]});var y={dfd:x,message:{id:"id"+(++n+Math.random()),url:b,options:v}};h||(h=t(),q=e(),m(h,q));k?k.push(y):a(y,q);return x.promise}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(f,B,l,d,c,u,
t,e,r,m,a){function h(z,w){z.canDelete&&b._remove(z.id,w.options.frameDoc,!0)}function q(z){C&&C.length&&(c.forEach(C,function(w){b._remove(w.id,w.frameDoc);w.frameDoc=null}),C=[]);return z.options.jsonp?!z.data:!0}function n(z){return!!this.scriptLoaded}function k(z){return(z=z.options.checkString)&&eval("typeof("+z+') !\x3d\x3d "undefined"')}function g(z,w){if(this.canDelete){var A=this.response.options;C.push({id:this.id,frameDoc:A.ioArgs?A.ioArgs.frameDoc:A.frameDoc});A.ioArgs&&(A.ioArgs.frameDoc=
null);A.frameDoc=null}w?this.reject(w):this.resolve(z)}function b(z,w,A){var G=l.parseArgs(z,l.deepCopy({},w));z=G.url;w=G.options;var F=l.deferred(G,h,q,w.jsonp?null:w.checkString?k:n,g);u.mixin(F,{id:x+v++,canDelete:!1});w.jsonp&&((new RegExp("[?\x26]"+w.jsonp+"\x3d")).test(z)||(z+=(~z.indexOf("?")?"\x26":"?")+w.jsonp+"\x3d"+(w.frameDoc?"parent.":"")+x+"_callbacks."+F.id),F.canDelete=!0,E[F.id]=function(K){G.data=K;F.handleResponse(G)});l.notify&&l.notify.emit("send",G,F.promise.cancel);if(!w.canAttach||
w.canAttach(F)){var H=b._attach(F.id,z,w.frameDoc,function(K){if(!(K instanceof Error)){var Q=Error("Error loading "+(K.target?K.target.src:"script"));Q.source=K;K=Q}F.reject(K);b._remove(F.id,w.frameDoc,!0)});if(!w.jsonp&&!w.checkString)var J=t(H,y,function(K){if("load"===K.type||D.test(H.readyState))J.remove(),F.scriptLoaded=K})}B(F);return A?F:F.promise}m.add("script-readystatechange",function(z,w){return"undefined"!==typeof w.createElement("script").onreadystatechange&&("undefined"===typeof z.opera||
"[object Opera]"!==z.opera.toString())});var x=f.id.replace(/[\/\.\-]/g,"_"),v=0,y=m("script-readystatechange")?"readystatechange":"load",D=/complete|loaded/,E=d.global[x+"_callbacks"]={},C=[];b.get=b;b._attach=function(z,w,A,G){A=A||a.doc;var F=A.createElement("script");if(G)t.once(F,"error",G);F.type="text/javascript";try{F.src=w}catch(H){G&&G(F)}F.id=z;F.async=!0;F.charset="utf-8";return A.getElementsByTagName("head")[0].appendChild(F)};b._remove=function(z,w,A){r.destroy(e.byId(z,w));E[z]&&(A?
E[z]=function(){delete E[z]}:delete E[z])};b._callbacksProperty=x+"_callbacks";return b})},"esri/core/sniff":function(){define(["../sniff"],function(f){return f})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h){function q(D){return!this.isFulfilled()}function n(D){return!!this._finished}function k(D,
E){if(!E)try{var C=D.options,z=b.doc(b._frame),w=C.handleAs;if("html"!==w){if("xml"===w)if("html"===z.documentElement.tagName.toLowerCase()){e("a",z.documentElement).orphan();var A=z.documentElement.innerText||z.documentElement.textContent;A=A.replace(/>\s+</g,"\x3e\x3c");D.text=u.trim(A)}else D.data=z;else D.text=z.getElementsByTagName("textarea")[0].value;c(D)}else D.data=z}catch(G){E=G}E?this.reject(E):this._finished?this.resolve(D):this.reject(Error("Invalid dojo/request/iframe request state"))}
function g(D){this._callNext()}function b(D,E,C){var z=d.parseArgs(D,d.deepCreate(y,E),!0);D=z.url;E=z.options;if("GET"!==E.method&&"POST"!==E.method)throw Error(E.method+" not supported by dojo/request/iframe");b._frame||(b._frame=b.create(b._iframeName,v+"();"));D=d.deferred(z,null,q,n,k,g);D._callNext=function(){this._calledNext||(this._calledNext=!0,b._currentDfd=null,b._fireNextRequest())};D._legacy=C;b._dfdQueue.push(D);b._fireNextRequest();l(D);return C?D:D.promise}var x=f.id.replace(/[\/\.\-]/g,
"_"),v=x+"_onload";h.global[v]||(h.global[v]=function(){var D=b._currentDfd;if(D){var E=m.byId(D.response.options.form)||D._tmpForm;if(E){for(var C=D._contentToClean,z=0;z<C.length;z++)for(var w=C[z],A=0;A<E.childNodes.length;A++){var G=E.childNodes[A];if(G.name===w){a.destroy(G);break}}D._originalAction&&E.setAttribute("action",D._originalAction);D._originalMethod&&(E.setAttribute("method",D._originalMethod),E.method=D._originalMethod);D._originalTarget&&(E.setAttribute("target",D._originalTarget),
E.target=D._originalTarget)}D._tmpForm&&(a.destroy(D._tmpForm),delete D._tmpForm);D._finished=!0}else b._fireNextRequest()});var y={method:"POST"};b.create=function(D,E,C){if(h.global[D])return h.global[D];if(h.global.frames[D])return h.global.frames[D];C||(r("config-useXDomain")&&r("config-dojoBlankHtmlUrl"),C=r("config-dojoBlankHtmlUrl")||B.toUrl("dojo/resources/blank.html"));E=a.place('\x3ciframe id\x3d"'+D+'" name\x3d"'+D+'" src\x3d"'+C+'" onload\x3d"'+E+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',
h.body());return h.global[D]=E};b.doc=function(D){if(D.contentDocument)return D.contentDocument;var E=D.name;if(E){var C=h.doc.getElementsByTagName("iframe");if(D.document&&C[E].contentWindow&&C[E].contentWindow.document)return C[E].contentWindow.document;if(h.doc.frames[E]&&h.doc.frames[E].document)return h.doc.frames[E].document}return null};b.setSrc=function(D,E,C){D=h.global.frames[D.name];D.contentWindow&&(D=D.contentWindow);try{C?D.location.replace(E):D.location=E}catch(z){}};b._iframeName=
x+"_IoIframe";b._notifyStart=function(){};b._dfdQueue=[];b._currentDfd=null;b._fireNextRequest=function(){try{if(!b._currentDfd&&b._dfdQueue.length){do var D=b._currentDfd=b._dfdQueue.shift();while(D&&(D.canceled||D.isCanceled&&D.isCanceled())&&b._dfdQueue.length);if(!D||D.canceled||D.isCanceled&&D.isCanceled())b._currentDfd=null;else{var E=D.response,C=E.options,z=D._contentToClean=[],w=m.byId(C.form),A=d.notify,G=C.data||null;if(!D._legacy&&"POST"===C.method&&!w)w=D._tmpForm=a.create("form",{name:x+
"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},h.body());else if("GET"===C.method&&w&&-1<E.url.indexOf("?")){var F=E.url.slice(E.url.indexOf("?")+1);G=u.mixin(t.queryToObject(F),G)}if(w){if(!D._legacy){var H=w;do H=H.parentNode;while(H&&H!==h.doc.documentElement);H||(w.style.position="absolute",w.style.left="-1000px",w.style.top="-1000px",h.body().appendChild(w));w.name||(w.name=x+"_form")}if(G){H=function(L,W){a.create("input",{type:"hidden",name:L,value:W},w);z.push(L)};for(var J in G){var K=
G[J];if(u.isArray(K)&&1<K.length)for(F=0;F<K.length;F++)H(J,K[F]);else{var Q=e("input[name\x3d'"+J+"']",w);-1==Q.indexOf()?H(J,K):Q.val(K)}}}var P=w.getAttributeNode("action"),I=w.getAttributeNode("method"),N=w.getAttributeNode("target");E.url&&(D._originalAction=P?P.value:null,P?P.value=E.url:w.setAttribute("action",E.url));D._legacy?I&&I.value||(I?I.value=C.method:w.setAttribute("method",C.method)):(D._originalMethod=I?I.value:null,I?I.value=C.method:w.setAttribute("method",C.method));D._originalTarget=
N?N.value:null;N?N.value=b._iframeName:w.setAttribute("target",b._iframeName);w.target=b._iframeName;A&&A.emit("send",E,D.promise.cancel);b._notifyStart(E);w.submit()}else C="",E.options.data&&(C=E.options.data,"string"!==typeof C&&(C=t.objectToQuery(C))),H=E.url+(-1<E.url.indexOf("?")?"\x26":"?")+C,A&&A.emit("send",E,D.promise.cancel),b._notifyStart(E),b.setSrc(b._frame,H,!0)}}}catch(L){D.reject(L)}};d.addCommonMethods(b,["GET","POST"]);return b})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),
function(f,B,l,d,c){function u(r){for(;r.childNodes[0]&&1==r.childNodes[0].nodeType;)r=r.childNodes[0];return r}function t(r,m){"string"==typeof r?(r=d.toDom(r,m&&m.ownerDocument),11==r.nodeType&&(r=r.childNodes[0])):1==r.nodeType&&r.parentNode&&(r=r.cloneNode(!1));return r}var e=f.NodeList;B.extend(e,{_placeMultiple:function(r,m){r="string"==typeof r||r.nodeType?f(r):r;for(var a=[],h=0;h<r.length;h++)for(var q=r[h],n=this.length,k=n-1,g;g=this[k];k--)0<h&&(g=this._cloneNode(g),a.unshift(g)),k==n-
1?d.place(g,q,m):q.parentNode.insertBefore(g,q),q=g;a.length&&(a.unshift(0),a.unshift(this.length-1),Array.prototype.splice.apply(this,a));return this},innerHTML:function(r){return arguments.length?this.addContent(r,"only"):this[0].innerHTML},text:function(r){if(arguments.length){for(var m=0,a;a=this[m];m++)1==a.nodeType&&c.set(a,"textContent",r);return this}var h="";for(m=0;a=this[m];m++)h+=c.get(a,"textContent");return h},val:function(r){if(arguments.length){for(var m=B.isArray(r),a=0,h;h=this[a];a++){var q=
h.nodeName.toUpperCase(),n=h.type,k=m?r[a]:r;if("SELECT"==q)for(q=h.options,n=0;n<q.length;n++){var g=q[n];g.selected=h.multiple?-1!=l.indexOf(r,g.value):g.value==k}else"checkbox"==n||"radio"==n?h.checked=h.value==k:h.value=k}return this}if((h=this[0])&&1==h.nodeType){r=h.value||"";if("SELECT"==h.nodeName.toUpperCase()&&h.multiple){r=[];q=h.options;for(n=0;n<q.length;n++)g=q[n],g.selected&&r.push(g.value);r.length||(r=null)}return r}},append:function(r){return this.addContent(r,"last")},appendTo:function(r){return this._placeMultiple(r,
"last")},prepend:function(r){return this.addContent(r,"first")},prependTo:function(r){return this._placeMultiple(r,"first")},after:function(r){return this.addContent(r,"after")},insertAfter:function(r){return this._placeMultiple(r,"after")},before:function(r){return this.addContent(r,"before")},insertBefore:function(r){return this._placeMultiple(r,"before")},remove:e.prototype.orphan,wrap:function(r){if(this[0]){r=t(r,this[0]);for(var m=0,a;a=this[m];m++){var h=this._cloneNode(r);a.parentNode&&a.parentNode.replaceChild(h,
a);u(h).appendChild(a)}}return this},wrapAll:function(r){if(this[0]){r=t(r,this[0]);this[0].parentNode.replaceChild(r,this[0]);r=u(r);for(var m=0,a;a=this[m];m++)r.appendChild(a)}return this},wrapInner:function(r){if(this[0]){r=t(r,this[0]);for(var m=0;m<this.length;m++){var a=this._cloneNode(r);this._wrap(B._toArray(this[m].childNodes),null,this._NodeListCtor).wrapAll(a)}}return this},replaceWith:function(r){r=this._normalize(r,this[0]);for(var m=0,a;a=this[m];m++)this._place(r,a,"before",0<m),a.parentNode.removeChild(a);
return this},replaceAll:function(r){r=f(r);for(var m=this._normalize(this,this[0]),a=0,h;h=r[a];a++)this._place(m,h,"before",0<a),h.parentNode.removeChild(h);return this},clone:function(){for(var r=[],m=0;m<this.length;m++)r.push(this._cloneNode(this[m]));return this._wrap(r,this,this._NodeListCtor)}});e.prototype.html||(e.prototype.html=e.prototype.innerHTML);return e})},"esri/support/requestUtils":function(){define(["dojo/_base/Deferred","dojo/_base/url","../config","../urlUtils"],function(f,B,
l,d){function c(t){t=new B(t);return t.scheme+"://"+t.authority}var u=l.defaults.io;return{registerNoCorsDomains:function(t){u.crossOriginNoCorsDomains||(u.crossOriginNoCorsDomains={});for(var e=u.crossOriginNoCorsDomains,r=0;r<t.length;r++){var m=t[r];m=m.toLowerCase();/^https?:\/\//.test(m)?e[c(m)]=0:(e[c("http://"+m)]=0,e[c("https://"+m)]=0)}},isNoCorsRequestRequired:function(t){var e=u.crossOriginNoCorsDomains;return e?(t=c(t),t=t.toLowerCase(),!d.hasSameOrigin(t,window.location.origin)&&e[t]<
Date.now()-36E5):!1},sendNoCorsRequest:function(t,e){var r=new f,m=u.crossOriginNoCorsDomains;m&&(m[c(t).toLowerCase()]=Date.now());m=d.urlToObject(t);t=m.path;if(m.query&&"json"===m.query.f||e&&"json"===e.f)t+="?f\x3djson";fetch(t,{mode:"no-cors",credentials:"include"}).then(r.resolve,r.resolve);return r}}})},"esri/OAuthCredential":function(){define(["./kernel","dojo/_base/declare","dojo/has"],function(f,B,l){B=B(null,{declaredClass:"esri.OAuthCredential",oAuthInfo:null,storage:null,appId:null,codeVerifier:null,
expires:null,refreshToken:null,ssl:null,stateUID:null,token:null,userId:null,constructor:function(d,c){this.oAuthInfo=d;this.storage=c;this._init()},isValid:function(){var d=!1;if(this.oAuthInfo&&this.userId&&(this.refreshToken||this.token))if(null==this.expires&&this.refreshToken)d=!0;else{var c=Date.now();this.expires>c&&(this.expires-c)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(d=!0)}return d},save:function(){if(!this.storage)return!1;var d=this._load(),c=this.oAuthInfo;if(c&&c.authNamespace&&
c.portalUrl){var u=d[c.authNamespace];u||(u=d[c.authNamespace]={});this.appId||(this.appId=c.appId);u[c.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,ssl:this.ssl,stateUID:this.stateUID,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(d))}catch(t){return!1}return!0}return!1},destroy:function(){var d=this._load(),c=this.oAuthInfo;if(c&&c.appId&&c.portalUrl&&(null==this.expires||this.expires>
Date.now())&&(this.refreshToken||this.token)){var u=c.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",t=new FormData;t.append("f","json");t.append("auth_token",this.refreshToken||this.token);t.append("client_id",c.appId);t.append("token_type_hint",this.refreshToken?"refresh_token":"access_token");if("function"===typeof navigator.sendBeacon)navigator.sendBeacon(u,t);else{var e=new XMLHttpRequest;e.open("POST",u);e.send(t)}}if(c&&c.authNamespace&&c.portalUrl&&this.storage&&
(u=d[c.authNamespace])){delete u[c.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(d))}catch(r){}}c&&(this.oAuthInfo=c._oAuthCred=null)},_init:function(){var d=this._load(),c=this.oAuthInfo;c&&c.authNamespace&&c.portalUrl&&(d=d[c.authNamespace])&&(d=d[c.portalUrl])&&(this.appId=d.appId,this.codeVerifier=d.codeVerifier,this.expires=d.expires,this.refreshToken=d.refreshToken,this.ssl=d.ssl,this.stateUID=d.stateUID,this.token=d.token,this.userId=d.userId)},_load:function(){var d=
{};if(this.storage){var c=this.storage.getItem("esriJSAPIOAuth");if(c)try{d=JSON.parse(c)}catch(u){}}return d}});return f.OAuthCredential=B})},"esri/arcgis/OAuthInfo":function(){define(["../kernel","../lang","dojo/_base/declare","dojo/_base/lang","dojo/has"],function(f,B,l,d,c){var u=l(null,{declaredClass:"esri.arcgis.OAuthInfo",constructor:function(t){d.mixin(this,{expiration:20160,minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",authNamespace:"/",forceLogin:!1,popup:!1,popupCallbackUrl:"oauth-callback.html",
popupWindowFeatures:"height\x3d490,width\x3d800,resizable,scrollbars,status",preserveUrlHash:!1,flowType:"auto"},t)},_oAuthCred:null,toJson:function(){return B.fixJson({appId:this.appId,expiration:this.expiration,locale:this.locale,minTimeUntilExpiration:this.minTimeUntilExpiration,portalUrl:this.portalUrl,authNamespace:this.authNamespace,forceLogin:this.forceLogin,popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,popupWindowFeatures:this.popupWindowFeatures,preserveUrlHash:this.preserveUrlHash,
flowType:this.flowType})},clone:function(){return new u(this.toJson())}});d.setObject("arcgis.OAuthInfo",u,f);return u})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),function(f,B,l,d,c,u,t,e){return f("dijit.form.Form",[c,u,t,e],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",
postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(r){B.set(this.domNode,"encType",r);d("ie")&&(this.domNode.encoding=r);this._set("encType",r)},reset:function(r){var m={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:r?r.target:this.domNode,target:r?r.target:this.domNode};!1!==this.onReset(m)&&m.returnValue&&
this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(r){this.reset(r);r.stopPropagation();r.preventDefault();return!1},_onSubmit:function(r){var m=this.constructor.prototype;if(this.execute!=m.execute||this.onExecute!=m.onExecute)l.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(r)&&(r.stopPropagation(),r.preventDefault())},onSubmit:function(){return this.isValid()},
submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"esri/OAuthSignInHandler":function(){define("./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query ./core/events dijit/form/Button dojo/query".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h,q){var n=null,k=null;try{n=window.localStorage,k=window.sessionStorage}catch(b){}var g=window.crypto||window.msCrypto;
return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(b){this._oAuthRedirectFunc=b},oAuthSignIn:function(b,x,v,y){var D=this._oAuthDfd=new e;D.resUrl_=b;D.sinfo_=x;D.oinfo_=v;var E=v._oAuthCred;if(E.storage&&("authorization-code"===v.flowType||"auto"===v.flowType&&8.4<=x.currentVersion)){var C=g.getRandomValues(new Uint8Array(32));var z=d.base64UrlEncode(C);E.codeVerifier=z;C=g.getRandomValues(new Uint8Array(32));E.stateUID=d.base64UrlEncode(C);E.save()||(E.codeVerifier=z=null)}else E.codeVerifier=null;var w=this;
this._getCodeChallenge(z).then(function(A){var G=!y||!1!==y.oAuthPopupConfirmation;if(!v.popup||!G)return w._doOAuthSignIn(b,x,v,A),D;D.codeChallenge_=A;w._nls||(w._nls=a.identity);w.oAuthDialog||(w.oAuthDialog=w._createOAuthDialog());A=w.oAuthDialog;G=y&&y.error;var F=y&&y.token;B.hide(A.errMsg_);G&&403==G.code&&F&&(m.set(A.errMsg_,"innerHTML",w._nls.forbidden),B.show(A.errMsg_));m.set(A.serverLink_,{title:x.server,innerHTML:-1!==x.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":x.server});
A.show()});return D},setOAuthResponseHash:function(b){b&&("#"===b.charAt(0)&&(b=b.substring(1)),this._processOAuthPopupParams(h.queryToObject(b)))},_createOAuthDialog:function(){var b=this._nls,x=l.substitute(b,this._oAuthDialogContent);x=l.substitute({server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},x);var v=new c({title:b.title,content:x,"class":"esriOAuthSignInDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var y=v.esriIdMgr_._oAuthDfd;
v.hide_();v.esriIdMgr_._doOAuthSignIn(y.resUrl_,y.sinfo_,y.oinfo_,y.codeChallenge_)},cancel_:function(){var y=v.esriIdMgr_._oAuthDfd;v.esriIdMgr_._oAuthDfd=null;v.hide_();var D=Error("ABORTED");D.code="IdentityManager.2";D.log=!!t.isDebug;y.errback(D)},hide_:function(){B.hide(v.errMsg_);v.hide();c._DialogLevelManager.hide(v)}});b=v.domNode;v.btnSubmit_=u.byNode(r.query(".esriIdSubmit",b)[0]);v.btnCancel_=u.byNode(r.query(".esriIdCancel",b)[0]);v.serverLink_=r.query(".serverLink",b)[0];v.errMsg_=r.query(".esriErrorMsg",
b)[0];v.connect(v.btnSubmit_,"onClick",v.execute_);v.connect(v.btnCancel_,"onClick",v.onCancel);v.connect(v,"onCancel",v.cancel_);return v},_doOAuthSignIn:function(b,x,v,y){var D=this,E=v._oAuthCred,C={portalUrl:v.portalUrl};!v.popup&&v.preserveUrlHash&&window.location.hash&&(C.hash=window.location.hash);E.stateUID&&(C.uid=E.stateUID);C={client_id:v.appId,response_type:E.codeVerifier?"code":"token",state:JSON.stringify(C),expiration:v.expiration,locale:v.locale,redirect_uri:this._getRedirectURI(v,
!!E.codeVerifier)};v.forceLogin&&(C.force_login=!0);v.forceUserId&&v.userId&&(C.prepopulatedusername=v.userId);!v.popup&&this._doPortalSignIn(b)&&(C.redirectToUserOrgUrl=!0);E.codeVerifier&&(C.code_challenge=y||E.codeVerifier,C.code_challenge_method=y?"S256":"plain");y=v.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize";E=y+"?"+h.objectToQuery(C);if(v.popup){var z=window.open(E,"esriJSAPIOAuth",v.popupWindowFeatures);z?(z.focus(),this._oAuthDfd.oAuthWin_=z,this._oAuthIntervalId=setInterval(function(){if(z.closed){clearInterval(D._oAuthIntervalId);
D._oAuthOnPopupHandle.remove();var w=D._oAuthDfd;if(w){var A=Error("ABORTED");A.code="IdentityManager.2";A.log=!!t.isDebug;w.errback(A)}}},500),D._oAuthOnPopupHandle=q.on(window,["arcgis:auth:hash","arcgis:auth:location:search"],function(w){"arcgis:auth:hash"===w.type?D.setOAuthResponseHash(w.detail):D._setOAuthResponseQueryString(w.detail)})):(b=Error("ABORTED"),b.name="identity-manager:user-aborted",b.code="IdentityManager.2",b.log=!!t.isDebug,this._oAuthDfd.errback(b))}else this._rejectOnPersistedPageShow=
!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:C,authorizeUrl:y,resourceUrl:b,serverInfo:x,oAuthInfo:v}):window.location.href=E},_getCodeChallenge:function(b){if(b&&window.isSecureContext)return b=(new TextEncoder).encode(b),g.subtle.digest("SHA-256",b).then(function(x){return d.base64UrlEncode(new Uint8Array(x))});b=new e;b.resolve(null);return b},_getRedirectURI:function(b,x){var v=window.location.href.replace(/#.*$/,"");if(b.popup)return d.getAbsoluteUrl(b.popupCallbackUrl);
if(x){var y=d.urlToObject(v);if(y.query)return"code error error_description message_code persist state".split(" ").forEach(function(D){delete y.query[D]}),(b=h.objectToQuery(y.query))?y.path+"?"+b:y.path}return v},_processOAuthPopupParams:function(b){var x=this._oAuthDfd;this._oAuthDfd=null;if(x)if(clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle&&this._oAuthOnPopupHandle.remove(),b.error){var v="access_denied"===b.error;b=Error(v?"ABORTED":"OAuth: "+b.error+" - "+b.error_description);
b.name=v?"identity-manager:user-aborted":"identity-manager:authentication-failed";b.code="IdentityManagerBase."+(v?2:3);b.log=!!t.isDebug;x.errback(b)}else this._processOAuthResponseParams(b,x.oinfo_,x.sinfo_).then(function(y){x.resolve(y)}).catch(function(y){x.reject(y)})},_processOAuthResponseParams:function(b,x,v){var y=x._oAuthCred;if(b.code){var D=y.codeVerifier;y.codeVerifier=null;y.stateUID=null;y.save();return this._getOAuthToken(v.server,b.code,x.appId,this._getRedirectURI(x,!0),D).then(function(C){var z=
new f({userId:C.username,server:v.server,token:C.access_token,expires:Date.now()+1E3*C.expires_in,ssl:C.ssl,oAuthState:b.state,_oAuthCred:y});x.userId=z.userId;y.storage=C.persist?n:k;y.refreshToken=C.refresh_token;y.token=null;y.expires=C.refresh_token_expires_in?Date.now()+1E3*C.refresh_token_expires_in:null;y.userId=z.userId;y.ssl=z.ssl;y.save();return z})}D=new f({userId:b.username,server:v.server,token:b.access_token,expires:Date.now()+1E3*Number(b.expires_in),ssl:"true"===b.ssl,oAuthState:b.state,
_oAuthCred:y});x.userId=D.userId;y.storage=b.persist?n:k;y.refreshToken=null;y.token=D.token;y.expires=D.expires;y.userId=D.userId;y.ssl=D.ssl;y.save();var E=new e;E.resolve(D);return E},_setOAuthResponseQueryString:function(b){b&&("?"===b.charAt(0)&&(b=b.substring(1)),this._processOAuthPopupParams(h.queryToObject(b)))}}})},"esri/core/events":function(){define([],function(){return{on:function(f,B,l){if(!f||"function"!==typeof f.on&&"function"!==typeof f.addEventListener)throw new TypeError("target is not a Evented or EventTarget object");
if("on"in f)return f.on(B,l);if(Array.isArray(B)){for(var d=B.slice(),c=0;c<d.length;c++)f.addEventListener(d[c],l);return{remove:function(){for(var u=0;u<d.length;u++)f.removeEventListener(d[u],l)}}}f.addEventListener(B,l);return{remove:function(){f.removeEventListener(B,l)}}}}})},"esri/libs/sanitizer/Sanitizer":function(){!function(f,B){"object"==typeof exports&&"undefined"!=typeof module?module.exports=B():"function"==typeof define&&define.amd?define(B):(f="undefined"!=typeof globalThis?globalThis:
f||self).Sanitizer=B()}(this,function(){function f(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,
"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,
"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,
"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,
cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,
"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,
"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,
"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,
"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,
"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,
"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,
"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,
"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}function B(va){var Ga=va||{},ca={},ja;for(ja in Ga)ca[ja]=Ga[ja];(va=ca).whiteList=va.whiteList||H.whiteList;va.onAttr=va.onAttr||H.onAttr;va.onIgnoreAttr=va.onIgnoreAttr||H.onIgnoreAttr;va.safeAttrValue=va.safeAttrValue||H.safeAttrValue;this.options=va}function l(va){return va.replace(N,"\x26lt;").replace(L,"\x26gt;")}function d(va){return va.replace(W,"\x26quot;")}function c(va){return va.replace(Z,'"')}function u(va){return va.replace(aa,
function(Ga,ca){return"x"===ca[0]||"X"===ca[0]?String.fromCharCode(parseInt(ca.substr(1),16)):String.fromCharCode(parseInt(ca,10))})}function t(va){return va.replace(ia,":").replace(R," ")}function e(va){for(var Ga="",ca=0,ja=va.length;ca<ja;ca++)Ga+=32>va.charCodeAt(ca)?" ":va.charAt(ca);return P.trim(Ga)}function r(va){return va=e(va=t(va=u(va=c(va))))}function m(va){return va=l(va=d(va))}function a(va,Ga){for(;Ga<va.length;Ga++){var ca=va[Ga];if(" "!==ca)return"\x3d"===ca?Ga:-1}}function h(va,
Ga){for(;0<Ga;Ga--){var ca=va[Ga];if(" "!==ca)return"\x3d"===ca?Ga:-1}}function q(va){return'"'===va[0]&&'"'===va[va.length-1]||"'"===va[0]&&"'"===va[va.length-1]?va.substr(1,va.length-2):va}function n(va){var Ga=va||{},ca={},ja;for(ja in Ga)ca[ja]=Ga[ja];(va=ca).stripIgnoreTag&&(va.onIgnoreTag=ra.onIgnoreTagStripAll);va.whiteList=va.whiteList||ra.whiteList;va.onTag=va.onTag||ra.onTag;va.onTagAttr=va.onTagAttr||ra.onTagAttr;va.onIgnoreTag=va.onIgnoreTag||ra.onIgnoreTag;va.onIgnoreTagAttr=va.onIgnoreTagAttr||
ra.onIgnoreTagAttr;va.safeAttrValue=va.safeAttrValue||ra.safeAttrValue;va.escapeHtml=va.escapeHtml||ra.escapeHtml;this.options=va;!1===va.css?this.cssFilter=!1:(va.css=va.css||{},this.cssFilter=new ha(va.css))}var k,g,b=Object.prototype,x=Function.prototype.toString,v=b.hasOwnProperty,y=x.call(Object),D=b.toString,E=(k=Object.getPrototypeOf,g=Object,function(va){return k(g(va))}),C=function(va){var Ga;if(!(Ga=!va||"object"!=typeof va||"[object Object]"!=D.call(va))&&(Ga=!1,null!=va&&"function"!=typeof va.toString))try{Ga=
!!(va+"")}catch(ca){}if(Ga)return!1;va=E(va);if(null===va)return!0;va=v.call(va,"constructor")&&va.constructor;return"function"==typeof va&&va instanceof va&&x.call(va)==y},z={exports:{}},w={};b={exports:{}};var A={},G=/javascript\s*:/gim;A.whiteList=f();A.getDefaultWhiteList=f;A.onAttr=function(va,Ga,ca){};A.onIgnoreAttr=function(va,Ga,ca){};A.safeAttrValue=function(va,Ga){return G.test(Ga)?"":Ga};var F={indexOf:function(va,Ga){var ca;if(Array.prototype.indexOf)return va.indexOf(Ga);var ja=0;for(ca=
va.length;ja<ca;ja++)if(va[ja]===Ga)return ja;return-1},forEach:function(va,Ga,ca){var ja;if(Array.prototype.forEach)return va.forEach(Ga,ca);var wa=0;for(ja=va.length;wa<ja;wa++)Ga.call(ca,va[wa],wa,va)},trim:function(va){return String.prototype.trim?va.trim():va.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(va){return String.prototype.trimRight?va.trimRight():va.replace(/(\s*$)/g,"")}},H=A,J=function(va,Ga){function ca(){if(!wa){var Ha=F.trim(va.slice(za,Fa)),da=Ha.indexOf(":");if(-1!==da){var Oa=
F.trim(Ha.slice(0,da));da=F.trim(Ha.slice(da+1));Oa&&(Ha=Ga(za,O.length,Oa,da,Ha))&&(O+=Ha+"; ")}}za=Fa+1}";"!==(va=F.trimRight(va))[va.length-1]&&(va+=";");for(var ja=va.length,wa=!1,za=0,Fa=0,O="";Fa<ja;Fa++){var ya=va[Fa];if("/"===ya&&"*"===va[Fa+1]){ya=va.indexOf("*/",Fa+2);if(-1===ya)break;za=(Fa=ya+1)+1;wa=!1}else"("===ya?wa=!0:")"===ya?wa=!1:";"===ya?wa||ca():"\n"===ya&&ca()}return F.trim(O)};B.prototype.process=function(va){if(!(va=(va=va||"").toString()))return"";var Ga=this.options,ca=Ga.whiteList,
ja=Ga.onAttr,wa=Ga.onIgnoreAttr,za=Ga.safeAttrValue;return J(va,function(Fa,O,ya,Ha,da){var Oa=ca[ya],Na=!1;if(!0===Oa?Na=Oa:"function"==typeof Oa?Na=Oa(Ha):Oa instanceof RegExp&&(Na=Oa.test(Ha)),!0!==Na&&(Na=!1),Ha=za(ya,Ha)){var Ca;Fa={position:O,sourcePosition:Fa,source:da,isWhite:Na};return Na?null==(Ca=ja(ya,Ha,Fa))?ya+":"+Ha:Ca:null==(Ca=wa(ya,Ha,Fa))?void 0:Ca}})};!function(va,Ga){for(var ca in(Ga=va.exports=function(ja,wa){return(new B(wa)).process(ja)}).FilterCSS=B,A)Ga[ca]=A[ca]}(b,b.exports);
var K={indexOf:function(va,Ga){var ca;if(Array.prototype.indexOf)return va.indexOf(Ga);var ja=0;for(ca=va.length;ja<ca;ja++)if(va[ja]===Ga)return ja;return-1},forEach:function(va,Ga,ca){var ja;if(Array.prototype.forEach)return va.forEach(Ga,ca);var wa=0;for(ja=va.length;wa<ja;wa++)Ga.call(ca,va[wa],wa,va)},trim:function(va){return String.prototype.trim?va.trim():va.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(va){return(va=/\s|\n|\t/.exec(va))?va.index:-1}},Q=b.exports.getDefaultWhiteList,P=
K,I=new b.exports.FilterCSS,N=/</g,L=/>/g,W=/"/g,Z=/&quot;/g,aa=/&#([a-zA-Z0-9]*);?/gim,ia=/&colon;?/gim,R=/&newline;?/gim,S=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,M=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,X=/u\s*r\s*l\s*\(.*/gi;w.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:"autoplay controls crossorigin loop muted preload src".split(" "),b:[],bdi:["dir"],bdo:["dir"],
big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],
strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:"autoplay controls crossorigin loop muted playsinline poster preload src height width".split(" ")};w.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href",
"alt"],article:[],aside:[],audio:"autoplay controls crossorigin loop muted preload src".split(" "),b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],
ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:"autoplay controls crossorigin loop muted playsinline poster preload src height width".split(" ")}};
w.onTag=function(va,Ga,ca){};w.onIgnoreTag=function(va,Ga,ca){};w.onTagAttr=function(va,Ga,ca){};w.onIgnoreTagAttr=function(va,Ga,ca){};w.safeAttrValue=function(va,Ga,ca,ja){if(ca=r(ca),"href"===Ga||"src"===Ga){if("#"===(ca=P.trim(ca)))return"#";if("http://"!==ca.substr(0,7)&&"https://"!==ca.substr(0,8)&&"mailto:"!==ca.substr(0,7)&&"tel:"!==ca.substr(0,4)&&"data:image/"!==ca.substr(0,11)&&"ftp://"!==ca.substr(0,6)&&"./"!==ca.substr(0,2)&&"../"!==ca.substr(0,3)&&"#"!==ca[0]&&"/"!==ca[0])return""}else if("background"===
Ga){if(S.lastIndex=0,S.test(ca))return""}else if("style"===Ga){if((M.lastIndex=0,M.test(ca))||(X.lastIndex=0,X.test(ca)&&(S.lastIndex=0,S.test(ca))))return"";!1!==ja&&(ca=(ja=ja||I).process(ca))}return ca=m(ca)};w.escapeHtml=l;w.escapeQuote=d;w.unescapeQuote=c;w.escapeHtmlEntities=u;w.escapeDangerHtml5Entities=t;w.clearNonPrintableCharacter=e;w.friendlyAttrValue=r;w.escapeAttrValue=m;w.onIgnoreTagStripAll=function(){return""};w.StripTagBody=function(va,Ga){"function"!=typeof Ga&&(Ga=function(){});
var ca=!Array.isArray(va),ja=[],wa=!1;return{onIgnoreTag:function(za,Fa,O){return ca||-1!==P.indexOf(va,za)?O.isClosing?(ja.push([!1!==wa?wa:O.position,O.position+10]),wa=!1,"[/removed]"):(wa||(wa=O.position),"[removed]"):Ga(za,Fa,O)},remove:function(za){var Fa="",O=0;return P.forEach(ja,function(ya){Fa+=za.slice(O,ya[0]);O=ya[1]}),Fa+=za.slice(O)}}};w.stripCommentTag=function(va){for(var Ga="",ca=0;ca<va.length;){var ja=va.indexOf("\x3c!--",ca);if(-1===ja){Ga+=va.slice(ca);break}Ga+=va.slice(ca,
ja);ca=va.indexOf("--\x3e",ja);if(-1===ca)break;ca+=3}return Ga};w.stripBlankChar=function(va){va=va.split("");return(va=va.filter(function(Ga){Ga=Ga.charCodeAt(0);return 127!==Ga&&(!(31>=Ga)||10===Ga||13===Ga)})).join("")};w.cssFilter=I;w.getDefaultCSSWhiteList=Q;var fa={},ea=/[^a-zA-Z0-9_:\.\-]/gim;fa.parseTag=function(va,Ga,ca){var ja="",wa=0,za=!1,Fa=!1,O=0,ya=va.length,Ha="",da="";O=0;a:for(;O<ya;O++)if(da=va.charAt(O),!1===za)"\x3c"===da&&(za=O);else if(!1===Fa)if("\x3c"===da)ja+=ca(va.slice(wa,
O)),wa=za=O;else if("\x3e"===da)ja+=ca(va.slice(wa,za)),wa=da=va.slice(za,O+1),Ha=K.spaceIndex(wa),wa=-1===Ha?wa.slice(1,-1):wa.slice(1,Ha+1),Ha=("/"===(wa=K.trim(wa).toLowerCase()).slice(0,1)&&(wa=wa.slice(1)),"/"===wa.slice(-1)&&(wa=wa.slice(0,-1)),wa),ja+=Ga(za,ja.length,Ha,da,"\x3c/"===da.slice(0,2)),wa=O+1,za=!1;else{if('"'===da||"'"===da){Ha=1;for(var Oa=va.charAt(O-Ha);""===Oa.trim()||"\x3d"===Oa;){if("\x3d"===Oa){Fa=da;continue a}Oa=va.charAt(O-++Ha)}}}else da===Fa&&(Fa=!1);return wa<va.length&&
(ja+=ca(va.substr(wa))),ja};fa.parseAttr=function(va,Ga){function ca(Ha,da){1>(Ha=(Ha=K.trim(Ha)).replace(ea,"").toLowerCase()).length||(Ha=Ga(Ha,da||""))&&wa.push(Ha)}for(var ja=0,wa=[],za=!1,Fa=va.length,O=0;O<Fa;O++){var ya=va.charAt(O);if(!1!==za||"\x3d"!==ya)if(!1===za||O!==ja||'"'!==ya&&"'"!==ya||"\x3d"!==va.charAt(O-1))/\s|\n|\t/.test(ya)&&((va=va.replace(/\s|\n|\t/g," "),!1===za)?-1===(ya=a(va,O))?(ca(K.trim(va.slice(ja,O))),za=!1,ja=O+1):O=ya-1:-1===(ya=h(va,O-1))&&(ca(za,q(K.trim(va.slice(ja,
O)))),za=!1,ja=O+1));else{if(-1===(ya=va.indexOf(ya,O+1)))break;ca(za,K.trim(va.slice(ja+1,ya)));za=!1;ja=(O=ya)+1}else za=va.slice(ja,O),ja=O+1}return ja<va.length&&(!1===za?ca(va.slice(ja)):ca(za,q(K.trim(va.slice(ja))))),K.trim(wa.join(" "))};var ha=b.exports.FilterCSS,ra=w,Aa=fa.parseTag,Ea=fa.parseAttr;n.prototype.process=function(va){if(!(va=(va=va||"").toString()))return"";var Ga=this.options,ca=Ga.whiteList,ja=Ga.onTag,wa=Ga.onIgnoreTag,za=Ga.onTagAttr,Fa=Ga.onIgnoreTagAttr,O=Ga.safeAttrValue,
ya=Ga.escapeHtml,Ha=this.cssFilter;Ga.stripBlankChar&&(va=ra.stripBlankChar(va));Ga.allowCommentTag||(va=ra.stripCommentTag(va));var da=!1;Ga.stripIgnoreTagBody&&(da=ra.StripTagBody(Ga.stripIgnoreTagBody,wa),wa=da.onIgnoreTag);va=Aa(va,function(Oa,Na,Ca,V,oa){Na={sourcePosition:Oa,position:Na,isClosing:oa,isWhite:ca.hasOwnProperty(Ca)};if(null!=(Oa=ja(Ca,V,Na)))return Oa;if(Na.isWhite){if(Na.isClosing)return"\x3c/"+Ca+"\x3e";Oa=function(Y){var ka=K.spaceIndex(Y);if(-1===ka)return{html:"",closing:"/"===
Y[Y.length-2]};ka="/"===(Y=K.trim(Y.slice(ka+1,-1)))[Y.length-1];return ka&&(Y=K.trim(Y.slice(0,-1))),{html:Y,closing:ka}}(V);var pa=ca[Ca];Na=Ea(Oa.html,function(Y,ka){var ta,xa=-1!==K.indexOf(pa,Y);return null==(ta=za(Ca,Y,ka,xa))?xa?(ka=O(Ca,Y,ka,Ha))?Y+'\x3d"'+ka+'"':Y:null==(ta=Fa(Ca,Y,ka,xa))?void 0:ta:ta});V="\x3c"+Ca;return Na&&(V+=" "+Na),Oa.closing&&(V+=" /"),V+="\x3e"}return null==(Oa=wa(Ca,V,Na))?ya(V):Oa},ya);return da&&(va=da.remove(va)),va};return function(va,Ga){function ca(za,Fa){return(new ja(Fa)).process(za)}
var ja=n,wa;for(wa in(Ga=va.exports=ca).filterXSS=ca,Ga.FilterXSS=ja,w)Ga[wa]=w[wa];for(wa in fa)Ga[wa]=fa[wa];"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=va.exports)}(z,z.exports),function(){function va(Ga,ca){var ja,wa=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],
em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:"alt border height src style width".split(" "),li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:"border cellpadding cellspacing height style width".split(" "),tbody:[],tr:["align","height","style","valign"],td:"align colspan height nowrap rowspan style valign width".split(" "),
th:"align colspan height nowrap rowspan style valign width".split(" "),u:[],ul:[],video:"autoplay controls height loop muted poster preload width".split(" ")};this.allowedProtocols="http https mailto iform tel flow lfmobile arcgis-navigator arcgis-appstudio-player arcgis-survey123 arcgis-collector arcgis-workforce arcgis-explorer arcgis-trek2there arcgis-quickcapture mspbi comgooglemaps pdfefile pdfehttp pdfehttps boxapp boxemm awb awbs gropen radarscope".split(" ");this.arcgisFilterOptions={allowCommentTag:!0,
safeAttrValue:function(za,Fa,O,ya){return"a"===za&&"href"===Fa||("img"===za||"source"===za)&&"src"===Fa?wa.sanitizeUrl(O):z.exports.safeAttrValue(za,Fa,O,ya)}};Ga&&!ca?ja=Ga:Ga&&ca?(ja=Object.create(this.arcgisFilterOptions),Object.keys(Ga).forEach(function(za){"whiteList"===za?ja.whiteList=wa._extendObjectOfArrays([wa.arcgisWhiteList,Ga.whiteList||{}]):ja[za]=Ga[za]})):(ja=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList;this.xssFilterOptions=ja;this._xssFilter=new z.exports.FilterXSS(ja)}
return va.prototype.sanitize=function(Ga,ca){switch(void 0===ca&&(ca={}),typeof Ga){case "number":return isNaN(Ga)||!isFinite(Ga)?null:Ga;case "boolean":return Ga;case "string":return this._xssFilter.process(Ga);case "object":return this._iterateOverObject(Ga,ca);default:if(!ca.allowUndefined||void 0!==Ga)return null}},va.prototype.sanitizeUrl=function(Ga){var ca=this._trim(Ga.substring(0,Ga.indexOf(":")));return"/"===Ga||"#"===Ga||"#"===Ga[0]||-1<this.allowedProtocols.indexOf(ca.toLowerCase())?z.exports.escapeAttrValue(Ga):
""},va.prototype.sanitizeHTMLAttribute=function(Ga,ca,ja,wa){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(Ga,ca,ja,wa):z.exports.safeAttrValue(Ga,ca,ja,wa)},va.prototype.validate=function(Ga,ca){void 0===ca&&(ca={});ca=this.sanitize(Ga,ca);return{isValid:Ga===ca,sanitized:ca}},va.prototype._extendObjectOfArrays=function(Ga){var ca={};return Ga.forEach(function(ja){Object.keys(ja).forEach(function(wa){Array.isArray(ja[wa])&&Array.isArray(ca[wa])?
ca[wa]=ca[wa].concat(ja[wa]):ca[wa]=ja[wa]})}),ca},va.prototype._iterateOverObject=function(Ga,ca){var ja=this;void 0===ca&&(ca={});try{var wa=!1,za=void 0;if(Array.isArray(Ga))za=Ga.reduce(function(Fa,O){var ya=ja.validate(O,ca);return ya.isValid?Fa.concat([O]):(wa=!0,Fa.concat([ya.sanitized]))},[]);else{if(!C(Ga))return ca.allowUndefined&&void 0===Ga?void 0:null;za=Object.keys(Ga).reduce(function(Fa,O){var ya=Ga[O],Ha=ja.validate(ya,ca);return Ha.isValid?Fa[O]=ya:(wa=!0,Fa[O]=Ha.sanitized),Fa},
{})}return wa?za:Ga}catch(Fa){return null}},va.prototype._trim=function(Ga){return String.prototype.trim?Ga.trim():Ga.replace(/(^\s*)|(\s*$)/g,"")},va}()})},"arcgisonline/sharing/dijit/dialog/DownloadImageDlg":function(){define("dojo/_base/declare dojo/i18n!arcgisonline/nls/arcgisonline dojo/text!./templates/DownloadImageDlg.html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ../../util".split(" "),function(f,B,l,d,c,u,t){return f([d,c,u],{templateString:l,widgetsInTemplate:!0,
_i18nStrings:B,constructor:function(e,r){f.safeMixin(this,e)},show:function(){this.dialog.show();this.own(dojo.connect(this.dialog,"onHide",dojo.hitch(this,function(){this.hide()})))},updateMessage:function(e){this.message.innerHTML=e},setCancelUrl:function(e){this.cancelUrl=e;this._cancelBtn.set("disabled",!1)},_handleCancelButtonClick:function(){this.hide()},hide:function(){this.cancelUrl&&t.request({url:this.cancelUrl});this.dialog.hide()}})})},"dojo/hash":function(){define("./_base/kernel require ./_base/config ./aspect ./_base/lang ./topic ./domReady ./sniff".split(" "),
function(f,B,l,d,c,u,t,e){function r(v,y){y=v.indexOf(y);return 0<=y?v.substring(y+1):""}function m(){return r(location.href,"#")}function a(){u.publish("/dojo/hashchange",m())}function h(){m()!==k&&(k=m(),a())}function q(v){if(g)if(g.isTransitioning())setTimeout(c.hitch(null,q,v),x);else{var y=g.iframe.location.href,D=y.indexOf("?");g.iframe.location.replace(y.substring(0,D)+"?"+v)}else y=location.href.replace(/#.*/,""),location.replace(y+"#"+v),!b&&h()}function n(){function v(){k=m();E=A?k:r(G.href,
"?");C=!1;z=null}var y=document.createElement("iframe"),D=l.dojoBlankHtmlUrl||B.toUrl("./resources/blank.html");y.id="dojo-hash-iframe";y.src=D+"?"+m();y.style.display="none";document.body.appendChild(y);this.iframe=f.global["dojo-hash-iframe"];var E,C,z,w,A,G=this.iframe.location;this.isTransitioning=function(){return C};this.pollLocation=function(){if(!A)try{var F=r(G.href,"?");document.title!=w&&(w=this.iframe.document.title=document.title)}catch(J){A=!0}var H=m();if(C&&k===H)if(A||F===z)v(),a();
else{setTimeout(c.hitch(this,this.pollLocation),0);return}else if(k!==H||!A&&E!==F){if(k!==H){k=H;C=!0;z=H;y.src=D+"?"+z;A=!1;setTimeout(c.hitch(this,this.pollLocation),0);return}A||(location.href="#"+G.search.substring(1),v(),a())}setTimeout(c.hitch(this,this.pollLocation),x)};v();setTimeout(c.hitch(this,this.pollLocation),x)}f.hash=function(v,y){if(!arguments.length)return m();"#"==v.charAt(0)&&(v=v.substring(1));y?q(v):location.hash="#"+v;return v};var k,g,b,x=l.hashPollFrequency||100;t(function(){"onhashchange"in
f.global&&(!e("ie")||8<=e("ie")&&"BackCompat"!=document.compatMode)?b=d.after(f.global,"onhashchange",a,!0):document.addEventListener?(k=m(),setInterval(h,x)):document.attachEvent&&(g=new n)});return f.hash})},"esri/arcgis/Portal":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/_base/Deferred dojo/_base/array dojo/_base/sniff require ../config ../kernel ../lang ../request ../urlUtils ../Evented ../IdentityManager".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h,q){var n={options:{disableIdentityLookup:!0},
requestParams:{f:"json"}},k=function(w){function A(G){w[G]||(w[G]=function(){var F=arguments;return d.when(w,function(H){Array.prototype.unshift.call(F,H.results||H);return k(c[G].apply(c,F))})})}if(!w)return w;w.then&&(w=B.delegate(w));w.total||(w.total=d.when(w,function(G){return m.isDefined(G.total)?G.total:G.length||0}));A("forEach");A("filter");A("map");A("some");A("every");return w},g={useSSL:function(w,A){var G=n&&n.self||{};if(G&&!G.isPortal)return-1!==w.indexOf("https:")||G.allSSL?A.replace("http:",
"https:"):A;var F=g.getLocation(A);return-1<G.portalHostname.toLowerCase().indexOf(F.hostname.toLowerCase())&&F.port&&"80"!==F.port&&"443"!==F.port?(A=F.pathname,A=0===A.indexOf("/")?A:"/"+A,G.allSSL||-1<w.indexOf("https:")?"https://"+F.hostname+(G.httpsPort&&"443"!==G.httpsPort?":"+G.httpsPort:"")+A+F.search:"http://"+F.hostname+(G.httpPort&&"80"!==G.httpPort?":"+G.httpPort:"")+A+F.search):-1!==w.indexOf("https:")||G.allSSL?A.replace("http:","https:"):A},formatUrl:function(w){var A=n.currentToken;
return-1!==w.indexOf("null")?null:g.useSSL(window.location.protocol,A?w+(-1!==w.indexOf("?")?"\x26":"?")+("token\x3d"+A):w)},getLocation:function(w){var A=document.createElement("a");A.href=w;return{protocol:A.protocol,hostname:A.hostname,port:A.port,pathname:A.pathname,search:A.search,hash:A.hash,host:A.host}},resultsToTypedArray:function(w,A,G){G=G?G.listings||G.notifications||G.userInvitations||G.tags||G.items||G.groups||G.comments||G.provisions||G.results||G:[];return c.map(G,function(F){F=B.mixin(F,
A||{});return w?new w(F):F})},clearFieldsFromObject:function(w,A){var G,F=w.length;if(B.isArray(w))for(G=0;G<F;G++)delete A[w[G]];else for(G in w)delete A[G];return A},requestToTypedArray:function(w,A,G,F,H){return k(g.request(w,A,G).then(B.partial(g.resultsToTypedArray,F,H)))},request:function(w,A,G){if(A){A.portal&&delete A.portal;if(A.form){var F=A.form;delete A.form}if(A.hasOwnProperty("withCredentials")){var H=A.withCredentials;delete A.withCredentials}}A=B.mixin(B.mixin({},A||{}),n.requestParams);
w={url:g.useSSL(window.location.protocol,w.url||w),content:A,callbackParamName:"callback",timeout:J&&J.timeout||0,form:F};null!=H&&(w.withCredentials=H);var J=B.mixin(G||{},n.options);return a(w,J)},formatQueryParams:function(w,A,G){w=B.mixin(B.mixin({},w),B.isString(A)?{q:A}:A||{});w.q=!G&&n.extraQuery?"("+w.q+")"+n.extraQuery:w.q;return w}},b=f([],{declaredClass:"esri.arcgis.PortalComment",constructor:function(w){B.mixin(this,w);this.url=this.item.itemUrl+"/comments/"+this.id;this.created=this.created?
new Date(this.created):null}}),x=f([],{declaredClass:"esri.arcgis.PortalRating",constructor:function(w){B.mixin(this,w);this.url=this.item.itemUrl+"/rating";this.created=this.created?new Date(this.created):null}}),v=f([],{declaredClass:"esri.arcgis.PortalItem",constructor:function(w){B.mixin(this,w);this.folderId=this.ownerFolder||this.folderId;this.itemUrl=(this.portal&&this.portal.portalUrl)+"content/items/"+this.id;this.userItemUrl=this.hasOwnProperty("ownerFolder")?this.itemUrl.replace("/content/",
"/content/users/"+this.owner+(this.folderId?"/"+this.folderId:"")+"/"):null;this.itemDataUrl=g.formatUrl(this.itemUrl+"/data");this.thumbnailUrl=g.formatUrl(this.itemUrl+"/info/"+this.thumbnail);this.displayName=this._getDisplayName();this.iconUrl=this._getIconUrl();this.isPremiumContent=this._getIsPremiumContent();this.created=this.created?new Date(this.created):null;this.uploaded=this.uploaded?new Date(this.uploaded):null;this.modified=this.modified?new Date(this.modified):null},getTypeInfo:function(){var w=
this.type;return{source:-1<c.indexOf(this.typeKeywords||[],"ArcGIS Server")||"Feature Collection"===w?w:null,displayName:this.displayName,iconUrl:this.iconUrl,isPremiumContent:this.isPremiumContent,premiumIconUrl:this._getPremiumIconUrl()}},addComment:function(w){var A=B.isString(w)?{comment:w}:w;return g.request(this.itemUrl+"/addComment",A,{usePost:!0}).then(B.hitch(this,function(G){return new b(B.mixin(A,{id:G.commentId,item:this}))}))},updateComment:function(w){if(w&&w.url&&w.comment)return g.request(w.url+
"/update",{comment:w.comment},{usePost:!0}).then(function(A){w.id=A.commentId;return w});throw Error();},getComments:function(){return g.requestToTypedArray(this.itemUrl+"/comments",null,null,b,{item:this})},deleteComment:function(w){if(w&&w.url)return g.request(w.url+"/delete",null,{usePost:!0});throw Error();},addRating:function(w){var A=B.isObject(w)?w:{rating:parseFloat(w)};return g.request(this.itemUrl+"/addRating",A,{usePost:!0}).then(B.hitch(this,function(G){return new x(B.mixin(A,{id:G.ratingId,
item:this}))}))},getRating:function(){return g.request(this.itemUrl+"/rating").then(B.hitch(this,function(w){return new x(B.mixin(w,{item:this}))}))},deleteRating:function(){return g.request(this.itemUrl+"/deleteRating",null,{usePost:!0})},_getDisplayName:function(){var w=this.type,A=this.typeKeywords||[],G=w;"Feature Service"===w||"Feature Collection"===w?G=-1<c.indexOf(A,"Table")?"Table":-1<c.indexOf(A,"Route Layer")?"Route Layer":-1<c.indexOf(A,"Markup")?"Markup":"Feature Layer":"Image Service"===
w?G=-1<c.indexOf(A,"Elevation 3D Layer")?"Elevation Layer":-1<c.indexOf(A,"Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===w?G="Scene Layer":"Video Service"===w?G="Video Layer":"Scene Package"===w?G="Scene Layer Package":"Stream Service"===w?G="Feature Layer":"Geoprocessing Service"===w?G=-1<c.indexOf(A,"Web Tool")?"Tool":"Geoprocessing Service":"Geoenrichment Service"===w?G="GeoEnrichment Service":"Geocoding Service"===w?G="Locator":"Microsoft Powerpoint"===w?G="Microsoft PowerPoint":
"GeoJson"===w?this.type=G="GeoJSON":"Globe Service"===w?G="Globe Layer":"Vector Tile Service"===w?G="Tile Layer":"netCDF"===w?G="NetCDF":"Map Service"===w?G=-1===c.indexOf(A,"Spatiotemporal")&&(-1<c.indexOf(A,"Hosted Service")||-1<c.indexOf(A,"Tiled"))&&-1===c.indexOf(A,"Relational")?"Tile Layer":"Map Image Layer":w&&-1<w.toLowerCase().indexOf("add in")?G=w.replace(/(add in)/ig,"Add-In"):"datastore catalog service"===w?G="Big Data File Share":"Compact Tile Package"===w?G="Tile Package (tpkx)":"Raster function template"===
w?G="Raster Function Template":"OGCFeatureServer"===w?G="OGC Feature Layer":"web mapping application"===w&&-1<c.indexOf(A,"configurableApp")?G="Instant App":"Insights Page"===w?G="Insights Report":"Excalibur Imagery Project"===w&&(G="Excalibur Project");return G},_getIconUrl:function(){var w=this.type&&this.type.toLowerCase()||"",A=this.typeKeywords||[],G=!1,F=!1,H=!1,J=!1,K=!1,Q=!1;G=F=!1;0<w.indexOf("service")||"feature collection"===w||"kml"===w||"wms"===w||"wmts"===w||"wfs"===w?(G=-1<c.indexOf(A,
"Hosted Service"),"feature service"===w||"feature collection"===w||"kml"===w||"wfs"===w?(J=-1<c.indexOf(A,"Table"),F=-1<c.indexOf(A,"Route Layer"),H=-1<c.indexOf(A,"Markup"),K=-1!==c.indexOf(A,"Spatiotemporal"),Q=-1!==c.indexOf(A,"UtilityNetwork"),w=K&&J?"spatiotemporaltable":J?"table":F?"routelayer":H?"markup":K?"spatiotemporal":Q?"utilitynetwork":G?"featureshosted":"features"):"map service"===w||"wms"===w||"wmts"===w?(K=-1!==c.indexOf(A,"Spatiotemporal"),F=-1!==c.indexOf(A,"Relational"),w=K||F?
"mapimages":G||-1<c.indexOf(A,"Tiled")||"wmts"===w?"maptiles":"mapimages"):w="scene service"===w?-1<c.indexOf(A,"Line")?"sceneweblayerline":-1<c.indexOf(A,"3DObject")?"sceneweblayermultipatch":-1<c.indexOf(A,"Point")?"sceneweblayerpoint":-1<c.indexOf(A,"IntegratedMesh")?"sceneweblayermesh":-1<c.indexOf(A,"PointCloud")?"sceneweblayerpointcloud":-1<c.indexOf(A,"Polygon")?"sceneweblayerpolygon":-1<c.indexOf(A,"Building")?"sceneweblayerbuilding":-1<c.indexOf(A,"Voxel")?"sceneweblayervoxel":"sceneweblayer":
"image service"===w?-1<c.indexOf(A,"Elevation 3D Layer")?"elevationlayer":-1<c.indexOf(A,"Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===w?"streamlayer":"vector tile service"===w?"vectortile":"datastore catalog service"===w?"datastorecollection":"geocoding service"===w?"geocodeservice":"video service"===w?-1<c.indexOf(A,"Live Stream")?"livestreamvideolayer":"videolayer":"geoprocessing service"===w?-1<c.indexOf(A,"Web Tool")?"tool":"layers":"geodata service"===w?"geodataservice":
"3dtiles service"===w?"3dtileslayer":"layers"):w="web map"===w||"cityengine web scene"===w?"maps":"web scene"===w?-1<c.indexOf(A,"ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===w&&-1<c.indexOf(A,"configurableApp")?"instantapps":"web mapping application"===w||"mobile application"===w||"application"===w||"operation view"===w||"desktop application"===w?"apps":"map document"===w||"map package"===w||"published map"===w||"scene document"===w||"globe document"===w||"basemap package"===
w||"mobile basemap package"===w||"mobile map package"===w||"project package"===w||"project template"===w||"pro map"===w||"layout"===w||"layer"===w&&-1<c.indexOf(A,"ArcGIS Pro")||"explorer map"===w&&c.indexOf(A,"Explorer Document")?"mapsgray":"service definition"===w||"csv"===w||"shapefile"===w||"cad drawing"===w||"geojson"===w||"netcdf"===w||"administrative report"===w?"datafiles":"360 vr experience"===w?"360vr":"explorer add in"===w||"desktop add in"===w||"windows viewer add in"===w||"windows viewer configuration"===
w?"appsgray":"arcgis pro add in"===w||"arcgis pro configuration"===w?"addindesktop":"rule package"===w||"file geodatabase"===w||"sqlite geodatabase"===w||"csv collection"===w||"kml collection"===w||"windows mobile package"===w||"map template"===w||"desktop application template"===w||"gml"===w||"arcpad package"===w||"code sample"===w||"document link"===w||"earth configuration"===w||"operations dashboard add in"===w||"rules package"===w||"image"===w||"workflow manager package"===w||"explorer map"===
w&&-1<c.indexOf(A,"Explorer Mapping Application")||-1<c.indexOf(A,"Document")?"datafilesgray":"network analysis service"===w||"geoprocessing service"===w||"geodata service"===w||"geometry service"===w||"geoprocessing package"===w||"locator package"===w||"geoprocessing sample"===w||"workflow manager service"===w?"toolsgray":"layer"===w||"layer package"===w||"explorer layer"===w?"layersgray":"scene package"===w?"scenepackage":"3dtiles package"===w?"3dtileslayerpackage":"3dtiles service"===w?"3dtileslayer":
"mobile scene package"===w?"mobilescenepackage":"tile package"===w||"compact tile package"===w?"tilepackage":"task file"===w?"taskfile":"report template"===w?"report-template":"statistical data collection"===w?"statisticaldatacollection":"insights workbook"===w?"workbook":"insights model"===w?"insightsmodel":"insights page"===w?"insightspage":"insights theme"===w?"insightstheme":"hub initiative"===w?"hubinitiative":"hub page"===w?"hubpage":"hub site application"===w?"hubsite":"hub event"===w?"hubevent":
"hub project"===w?"hubproject":"relational database connection"===w?"relationaldatabaseconnection":"big data file share"===w?"datastorecollection":"image collection"===w?"imagecollection":"desktop style"===w?"desktopstyle":"style"===w?"style":"dashboard"===w?"dashboard":"raster function template"===w?"rasterprocessingtemplate":"vector tile package"===w?"vectortilepackage":"ortho mapping project"===w?"orthomappingproject":"ortho mapping template"===w?"orthomappingtemplate":"solution"===w?"solutions":
"geopackage"===w?"geopackage":"deep learning package"===w?"deeplearningpackage":"real time analytic"===w?"realtimeanalytics":"big data analytic"===w?"bigdataanalytics":"feed"===w?"feed":"excalibur imagery project"===w?"excaliburimageryproject":"notebook"===w?"notebook":"storymap"===w?"storymap":"survey123 add in"===w?"survey123addin":"mission"===w?"mission":"mission report"===w?"missionreport":"mission template"===w?"missiontemplate":"quickcapture project"===w?"quickcaptureproject":"pro report"===
w?"proreport":"pro report template"===w?"proreporttemplate":"urban model"===w?"urbanmodel":"web experience"===w?"experiencebuilder":"web experience template"===w?"webexperiencetemplate":"experience builder widget"===w?"experiencebuilderwidget":"experience builder widget package"===w?"experiencebuilderwidgetpackage":"workflow"===w?"workflow":"kernel gateway connection"===w?"kernelgatewayconnection":"insights script"===w?"insightsscript":"hub initiative template"===w?"hubinitiativetemplate":"storymap theme"===
w?"storymaptheme":"knowledge graph"===w?"knowledgegraph":"knowledge studio project"===w?"knowledgestudio":"native application"===w?"nativeapp":"native application installer"===w?"nativeappinstaller":"link chart"===w?"linkchart":"investigation"===w?"investigation":"ogcfeatureserver"===w?"features":"pro project"===w?"proproject":"insights workbook package"===w?"insightsworkbookpackage":"apache parquet"===w?"apacheparquet":"notebook code snippets"===w||"notebook code snippet library"===w?"notebookcodesnippets":
"suitability model"===w?"suitabilitymodel":"esri classifier definition"===w?"classifierdefinition":"esri classification schema"===w?"classificationschema":"insights data engineering workbook"===w?"dataengineeringworkbook":"insights data engineering model"===w?"dataengineeringmodel":"deep learning studio project"===w?"deeplearningproject":"discussion"===w?"discussion":"allsource project"===w?"allsourceproject":"api key"===w?"apikey":"data pipeline"===w?"datapipelines":"group layer"===w?(G=-1<c.indexOf(A,
"Map"))?"layergroup2d":"layergroup":"media layer"===w?"onlinemedialayer":"form"===w?-1<c.indexOf(A,"Survey123")?"survey":"datafilesgray":"maps";return w?t.toUrl("../css/images/item_type_icons/"+w+"16.png"):null},_getIsPremiumContent:function(){var w=this.typeKeywords,A=!1;if(-1<c.indexOf(w,"Requires Subscription")||-1<c.indexOf(w,"Requires Credits"))A=!0;return A},_getPremiumIconUrl:function(){var w=this.typeKeywords,A;this.isPremiumContent&&(A=-1<c.indexOf(w,"Requires Credits")?"premiumcredits":
"premiumitem");return A?t.toUrl("../css/images/item_type_icons/"+A+"16.png"):null},getThumbnailUrl:function(w){var A=this.thumbnailUrl;A&&w&&(A+=(-1===A.indexOf("?")?"?":"\x26")+"w\x3d"+w);return A}}),y=f([],{declaredClass:"esri.arcgis.PortalListing",constructor:function(w){B.mixin(this,w);this.id=this.itemId;this.url=(this.portal&&this.portal.portalUrl)+"content/"+(this.userItemUrl?"items/":"listings/")+this.itemId;this.commentsUrl=this.url+"/comments";this.created=this.created?new Date(this.created):
null;this.banner=this.banner?g.formatUrl(this.url+"/info/"+this.banner):"";this.thumbnail=this.thumbnail?g.formatUrl(this.url+"/info/"+this.thumbnail):"";this.largeThumbnail=this.largeThumbnail?g.formatUrl(this.url+"/info/"+this.largeThumbnail):"";this.avgRating=this.avgRating||0;this.numRatings=this.numRatings||0;this.numComments=this.numComments||0;this.listingProperties=this.listingProperties||{priceDesc:"",creditsPerTransaction:0,licenseType:"free",trialSupported:!1,trialDuration:0,listingAccess:"private"};
for(var A in this.listingProperties)this[A]&&(this.listingProperties[A]=this[A]);this.properties=this.properties||{systemRequirements:"",termsAndConditions:"",version:"1.0"};this.screenshots=c.map(this.screenshots,B.hitch(this,function(G){return g.formatUrl(this.url+"/info/"+G)}));this.vendorName=this.vendor.name;this.vendor.thumbnail=this.vendor.thumbnail?this.userItemUrl?g.formatUrl(this.portal.portalUrl+"/portals/self/resources/"+this.vendor.thumbnail):g.formatUrl(this.url+"/vendorinfo/"+this.vendor.thumbnail):
""},getComments:function(){return g.requestToTypedArray(this.commentsUrl,null,null,b,{item:this})},getVendor:function(){return this.vendor}}),D=f([],{declaredClass:"esri.arcgis.PortalProvision",constructor:function(w){B.mixin(this,w);this.created=this.created?new Date(this.created):null;this.startDate=this.startDate?new Date(this.startDate):null;this.endDate=this.endDate&&-1!==this.endDate?new Date(this.endDate):null;this.listing=w.listing?new y(B.mixin(w.listing,{portal:this.portal})):null}}),E=
f([],{declaredClass:"esri.arcgis.PortalGroup",constructor:function(w){B.mixin(this,w);this.url=(this.portal&&this.portal.portalUrl)+"community/groups/"+this.id;this.thumbnailUrl=g.formatUrl(this.url+"/info/"+this.thumbnail);this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getMembers:function(){return g.request(this.url+"/users")},queryItems:function(w,A){w=g.formatQueryParams({},w,A);w.q="group:"+this.id+(w.q?" "+w.q:"");return this.portal.queryItems(w)},
getThumbnailUrl:function(w){var A=this.thumbnailUrl;A&&w&&(A+=(-1===A.indexOf("?")?"?":"\x26")+"w\x3d"+w);return A}}),C=f([],{declaredClass:"esri.arcgis.PortalFolder",constructor:function(w){B.mixin(this,w);this.url=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username+"/"+this.id;this.created=this.created?new Date(this.created):null},getItems:function(){return g.requestToTypedArray(this.url,null,null,v,{portal:this.portal,folderId:this.id})}}),z=f([],{declaredClass:"esri.arcgis.PortalUser",
constructor:function(w){B.mixin(this,w);this.url=(this.portal&&this.portal.portalUrl)+"community/users/"+this.username;this.userContentUrl=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username;this.thumbnailUrl=this.thumbnail?g.formatUrl(this.url+"/info/"+this.thumbnail):null;this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getGroups:function(){return k(g.request(this.url).then(B.hitch(this,function(w){return g.resultsToTypedArray(E,
{portal:this.portal},w.groups)})))},getNotifications:function(){return g.requestToTypedArray(this.url+"/notifications",null,null,null,{portal:this.portal})},getGroupInvitations:function(){return g.requestToTypedArray(this.url+"/invitations",null,null,null,{portal:this.portal})},getTags:function(){return g.requestToTypedArray(this.url+"/tags",null,null,null,{portal:this.portal})},getFolders:function(){return k(this.getContent(null,{num:1}).then(function(w){return w.folders}))},getItems:function(w){return k(this.getContent(w).then(function(A){return A.items}))},
getItem:function(w){return g.request(this.portal.portalUrl+"content/items/"+w).then(B.hitch(this,function(A){return new v(B.mixin(A,{portal:this.portal}))}))},getContent:function(w,A){var G=this.url.replace("/community/","/content/")+(w?"/"+w:"");return g.request(G,A).then(B.hitch(this,function(F){F.folders=g.resultsToTypedArray(C,{portal:this.portal},F.folders);F.items=g.resultsToTypedArray(v,{portal:this.portal,folderId:w},F.items);return F}))},getThumbnailUrl:function(w){var A=this.thumbnailUrl;
A&&w&&(A+=(-1===A.indexOf("?")?"?":"\x26")+"w\x3d"+w);return A}});f={Portal:f([q],{declaredClass:"esri.arcgis.Portal",onLoad:function(){},onError:function(){},constructor:function(w){w=B.isObject(w)?w:{url:w};this.registerConnectEvents();n={options:{disableIdentityLookup:!0},requestParams:{f:"json"}};w.self?(n.self=w.self,B.mixin(this,{url:w.url||h.getProtocolForWebResource()+"//"+(w.self.urlKey?w.self.urlKey+"."+w.self.customBaseUrl:w.self.portalHostname)}),this.portalUrl=-1!==this.url.indexOf("/sharing")?
this.url+"/":this.url+"/sharing/rest/",w=w.self.user?this.signIn():this.init(this.url)):(w.url&&B.mixin(this,{url:w.url}),w=this.init(this.url));w.then(B.hitch(this,function(){this.emit("ready",this);this.onLoad(this)}))},init:function(w,A){w=(w||this.portalUrl).replace(/\/+$/,"");this.portalUrl=-1!==w.indexOf("/sharing")?w+"/":w+"/sharing/rest/";h.canUseXhr(this.portalUrl)||e.defaults.io.corsEnabledServers.push(this.portalUrl.replace(/^https?:\/\//i,""));return this._getSelf(this.portalUrl).then(B.hitch(this,
function(G){n.self=B.mixin({},G);(G=G.user)&&A&&(n.currentToken=A&&A.token,n.loggedInUser=new z(B.mixin(G,{portal:this,credential:A})));n.self.id&&!1===n.self.canSearchPublic&&(n.extraQuery=" AND orgid:"+n.self.id);B.mixin(this,n.self);this.thumbnailUrl=g.formatUrl(this.portalUrl+"portals/self/resources/"+this.thumbnail);this.isOrganization=this.access&&this.access.length?!0:!1;this.created=this.created?new Date(this.created):null;this.modified=this.modified?new Date(this.modified):null;return this}),
B.hitch(this,function(G){this.onError(G);throw G;}))},signIn:function(){var w=new d,A=B.hitch(this,function(){this._onSignIn().then(B.hitch(this,function(){w.resolve(n.loggedInUser)}),B.hitch(this,function(G){w.reject(G)}))});if(n&&n.self)n&&n.loggedInUser?setTimeout(function(){w.resolve(n.loggedInUser)},0):A();else this.on("load",B.hitch(this,function(){A()}));return w},signOut:function(){n.loggedInUser.credential&&n.loggedInUser.credential.destroy();n.loggedInUser=null;n.options.disableIdentityLookup=
!0;g.clearFieldsFromObject(n.self,this);n.self=null;return this.init(this.url)},getPortalUser:function(){return n.loggedInUser},addResource:function(w,A){return g.request(this.portalUrl+"portals/self/addResource",{key:w,text:A},{usePost:!0})},update:function(w){return g.request(this.portalUrl+"portals/self/update",w,{usePost:!0})},queryGroups:function(w,A){return this._queryPortal(this.portalUrl+"community/groups",g.formatQueryParams({},w,A),E)},queryItems:function(w,A){return this._queryPortal(this.portalUrl+
"search",g.formatQueryParams({},w,A),v)},queryListings:function(w){w=g.formatQueryParams({},w,!0);var A="";w.q&&-1<w.q.toLowerCase().indexOf("mylistings:true")?(w.q=w.q.toLowerCase().replace("mylistings:true",""),A="?mylistings\x3dtrue"):w.q||(w.q='""');return this._queryPortal(this.portalUrl+"content/listings"+A,w,y)},queryCustomerList:function(w,A){w=g.formatQueryParams({},w,!0);return this._queryPortal(this.portalUrl+"portals/self/customersList",w)},getProvisions:function(){return this.getCustomers().then(B.hitch(this,
function(w){return w.purchases}))},getInterests:function(){return this.getCustomers().then(B.hitch(this,function(w){return w.interests}))},getTrials:function(){return this.getCustomers().then(B.hitch(this,function(w){return w.trials}))},getCustomers:function(w){return g.request(this.portalUrl+"portals/self/customers",{status:w||"all"})},getMyPurchases:function(){return this.getPurchases().then(function(w){return w.purchases})},getMyInterests:function(){return this.getPurchases().then(function(w){return w.interests})},
getPurchases:function(){return g.request(this.portalUrl+"portals/self/purchases").then(B.hitch(this,function(w){w.interests=c.map(w.interests,function(A){return B.mixin(A.provision,{listing:A.listing})});w.purchases=c.map(w.purchases,function(A){return B.mixin(A.provision,{listing:A.listing})});w.trials=c.map(w.trials,function(A){return B.mixin(A.provision,{listing:A.listing})});w.interests=g.resultsToTypedArray(D,{portal:this},w.interests);w.trials=g.resultsToTypedArray(D,{portal:this},w.trials);
w.purchases=g.resultsToTypedArray(D,{portal:this},w.purchases);return w}))},queryUsers:function(w,A){return this._queryPortal(this.portalUrl+"community/users",g.formatQueryParams({sortField:"username"},w,A),z)},_onSignIn:function(){n.options.disableIdentityLookup=!1;n.self=null;return r.id.getCredential(this.portalUrl).then(B.hitch(this,"init",this.url)).then(function(){return n.loggedInUser},B.hitch(this,function(w){n.options.disableIdentityLookup=!0;this.onError(w);throw w;}))},_getSelf:function(w){w+=
"portals/self";if(n.self){var A=new d;setTimeout(function(){A.resolve(n.self)},0)}else A=g.request(w,{culture:l.locale,withCredentials:!0});return A},_queryPortal:function(w,A,G){var F=B.mixin({num:10,start:0,sortField:"title",sortOrder:"asc"},A),H=["start","query","num","nextStart"];w=g.request(w,F).then(B.hitch(this,function(J){J.results=g.resultsToTypedArray(G,{portal:this},J);J.queryParams=B.mixin({},F);J.nextQueryParams=B.mixin(F,{start:J.nextStart});return g.clearFieldsFromObject(H,J)}));w=
B.delegate(w);w.queryParams=B.mixin({},F);w.nextQueryParams=d.when(w,function(J){return J.nextQueryParams});return k(w)}}),PortalFolder:C,PortalGroup:E,PortalItem:v,PortalUser:z,PortalComment:b,PortalRating:x,PortalUtil:g,PortalResult:k,PortalListing:y};B.mixin(B.getObject("arcgis",!0,r),f);return f})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),function(f,B,l,d,c,u,t,e){function r(n,k){89.99999<
k?k=89.99999:-89.99999>k&&(k=-89.99999);k*=.017453292519943;return[111319.49079327169*n,3189068.5*Math.log((1+Math.sin(k))/(1-Math.sin(k)))]}function m(n,k,g){n=n/6378137*57.29577951308232;return g?[n,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*k/6378137)))]:[n-360*Math.floor((n+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*k/6378137)))]}function a(){}function h(){}function q(n){var k=n._json;n._unquantizeFn?(k=n._unquantizeFn({x:k.x,y:k.y}),n._xVal=k.x,
n._yVal=k.y,n._unquantizeFn=null):(n._xVal=k.x,n._yVal=k.y);n._json=null}l={type:"point",x:0,y:0};f=f(t,{declaredClass:"esri.geometry.Point",type:"point",x:0,y:0,constructor:function(n,k,g){B.isArray(n)?(this.x=n[0],this.y=n[1],this.spatialReference=k):c.isObject(n)?(c.mixin(this,n),null!=this.latitude&&(this.y=this.latitude),null!=this.longitude&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=e.createSpatialReference(this.spatialReference))):(this.x=n,this.y=k,this.spatialReference=
g);this.verifySR()},offset:function(n,k){return new this.constructor(this.x+n,this.y+k,this.spatialReference)},setX:function(n){this.x=n;this.clearCache();return this},setY:function(n){this.y=n;this.clearCache();return this},setLongitude:function(n){var k=this.spatialReference;k&&(k._isWebMercator()?this.setX(r(n,this.y)[0]):4326===k.wkid&&this.setX(n));return this},setLatitude:function(n){var k=this.spatialReference;k&&(k._isWebMercator()?this.setY(r(this.x,n)[1]):4326===k.wkid&&this.setY(n));return this},
getLongitude:function(){var n=this.spatialReference;if(n)if(n._isWebMercator())var k=m(this.x,this.y)[0];else 4326===n.wkid&&(k=this.x);return k},getLatitude:function(){var n=this.spatialReference;if(n)if(n._isWebMercator())var k=m(this.x,this.y)[1];else 4326===n.wkid&&(k=this.y);return k},update:function(n,k){this.x=n;this.y=k;this.clearCache();return this},normalize:function(){var n=this.x,k=this.spatialReference;if(k){var g=k._getInfo();g&&(n=this._normalizeX(n,g))}return new this.constructor(n,
this.y,k)},_normalizeX:function(n,k){var g=k.valid[0],b=k.valid[1];k=2*b;n>b?(g=Math.ceil(Math.abs(n-b)/k),n-=g*k):n<g&&(g=Math.ceil(Math.abs(n-g)/k),n+=g*k);return n},toJson:function(){var n={x:this.x,y:this.y},k=this.spatialReference;k&&(n.spatialReference=k.toJson());return n}});a.prototype=f.prototype;h.prototype=new a;Object.defineProperty(h.prototype,"x",{get:function(){this._json&&q(this);return this._xVal},set:function(n){this._xVal=n}});Object.defineProperty(h.prototype,"y",{get:function(){this._json&&
q(this);return this._yVal},set:function(n){this._yVal=n}});h.prototype.setupLazyUnquantization=function(n,k){this._unquantizeFn=n;this._json=k};f.simpleConstructor=a;f.accessorConstructor=h;f.lngLatToXY=r;f.xyToLngLat=m;f.defaultProps=l;f.metersPerDegree=6378137*Math.PI/180;B.setObject("geometry.Point",f,d);d.geometry.defaultPoint=l;return f})},"esri/SpatialReference":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/has","./kernel","./lang"],function(f,B,l,d,c){function u(){}l=[-2.0037508342788905E7,
2.0037508342788905E7];var t=[-2.0037508342787E7,2.0037508342787E7];f=f(null,{declaredClass:"esri.SpatialReference",constructor:function(e){e&&(c.isObject(e)?c.mixin(this,e):c.isString(e)?this.wkt=e:this.wkid=e)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:l,origin:t,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:l,origin:t,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:l,origin:t,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:l,origin:t,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==B.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==B.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(e){var r=!1;e&&(r=this.isWebMercator()&&4326===e.wkid||e.isWebMercator()&&4326===this.wkid);return r},isWebMercator:function(){return this._isWebMercator()},equals:function(e){var r=!1;e&&(this===e&&
(r=!0),this.wkid||e.wkid?r=this.wkid===e.wkid||this.isWebMercator()&&e.isWebMercator()||this.wkid===e.latestWkid||e.wkid===this.latestWkid:this.wkt&&e.wkt&&(r=this.wkt.toUpperCase()===e.wkt.toUpperCase()));return r},toJson:function(){var e=null;null!=this.wkid?e={wkid:this.wkid}:null!=this.wkt&&(e={wkt:this.wkt});e&&null!=this.latestWkid&&(e.latestWkid=this.latestWkid);return e}});u.prototype=f.prototype;f.simpleConstructor=u;return d.SpatialReference=f})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(f,B,l,d,c){f=f(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(u){this.spatialReference=u;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new c(4326))},getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(u){return this.cache&&this.cache[u]},setCacheValue:function(u,t){this.cache||
(this.cache={});this.cache[u]=t}});B.setObject("geometry.Geometry",f,d);return f})},"esri/srUtils":function(){define(["./SpatialReference","./ImageSpatialReference","./kernel","./sniff","dojo/_base/lang"],function(f,B,l,d,c){function u(t){var e=!1;t&&(t.ics||t.icsid)&&(e=!0);return e}d={isICS:u,createSpatialReference:function(t){var e=null;t&&(e=u(t)?new B(t):new f(t));return e}};c.mixin(l,d);return d})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),
function(f,B,l,d,c,u){f=f(u,{declaredClass:"esri.ImageSpatialReference",constructor:function(t){t&&B.isObject(t)&&B.mixin(this,t)},icsid:null,icsns:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(t){var e=!1;if(t)if(this.icsid&&t.icsid){if(e=this.icsid===t.icsid,this.icsns||t.icsns)e=e&&this.icsns===t.icsns}else this.ics&&t.ics&&(e=this.ics===t.ics);return e},toJson:function(t){var e=null,r=c.isDefined;t=r(t)?t:!0;r(this.icsid)?(e={icsid:this.icsid},
r(this.icsns)&&(e.icsns=this.icsns)):r(this.ics)&&(e={ics:this.ics});r(this.url)&&r(e)&&t&&(e.url=this.url);return e}});return d.ImageSpatialReference=f})},"esri/tileUtils":function(){define(["dojo/_base/array","dojo/has","./kernel","./geometry/Point","./geometry/Extent"],function(f,B,l,d,c){B={_addFrameInfo:function(u,t){var e,r,m=2*t.origin[1],a=t.origin[0],h=u.origin.x,q=u.width,n;f.forEach(u.lods,function(k){e=Math.round(m/k.resolution);r=Math.ceil(e/q);n=Math.floor((a-h)/(q*k.resolution));k._frameInfo||
(k._frameInfo=[r,n,n+r-1,e])})},getContainingTileCoords:function(u,t,e){var r=u.origin;e=e.resolution;return{row:Math.floor((r.y-t.y)/(u.height*e)),col:Math.floor((t.x-r.x)/(u.width*e))}},getCandidateTileInfo:function(u,t,e){var r=u.width;var m=u.height,a=e.xmax-e.xmin,h=e.ymax-e.ymin,q=u.__tileInfo===t,n=q?u.getMinZoom():-1;q=q?u.getMaxZoom():-1;var k=-1,g=t.lods,b=Math.abs,x;q=-1<q?q:g.length-1;for(n=-1<n?n:0;n<=q;n++)if(x=g[n]){var v=a>h?b(h-m*x.resolution):b(a-r*x.resolution);if(0>k||v<=k){var y=
x;k=v}else break}r=y;y=r.resolution;m=(e.xmin+e.xmax)/2;a=(e.ymin+e.ymax)/2;h=u.width/2*y;y*=u.height/2;m=new c(m-h,a-y,m+h,a+y,e.spatialReference);e=new d(m.xmin,m.ymax,e.spatialReference);q=r.resolution;h=t.width;a=t.height;t=t.origin;u=u.__visibleDelta;y=Math.floor;g=h*q;b=a*q;q=y((t.y-e.y)/b);k=y((e.x-t.x)/g);n=t.y-q*b;t=y(Math.abs((e.x-(t.x+k*g))*h/g))+u.x;u=y(Math.abs((e.y-n)*a/b))+u.y;return{tile:{point:e,coords:{row:q,col:k},offsets:{x:t,y:u}},lod:r,extent:m}},getTileExtent:function(u,t,e,
r){var m=u.origin;t=u.lods[t].resolution;var a=u.width,h=u.height;return new c(r*t*a+m.x,m.y-(e+1)*t*h,(r+1)*t*a+m.x,m.y-e*t*h,u.spatialReference)}};return l.TileUtils=B})},"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h){function q(){}d={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0};var n=f(e,{declaredClass:"esri.geometry.Extent",
type:"extent",xmin:0,ymin:0,xmax:0,ymax:0,constructor:function(k,g,b,x,v){u.isObject(k)?(u.mixin(this,k),this.spatialReference&&(this.spatialReference=h.createSpatialReference(this.spatialReference))):this.update(k,g,b,x,v);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new r((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference)},getTopLeft:function(){return new r(this.xmin,
this.ymax,this.spatialReference)},getTopRight:function(){return new r(this.xmax,this.ymax,this.spatialReference)},getBottomLeft:function(){return new r(this.xmin,this.ymin,this.spatialReference)},getBottomRight:function(){return new r(this.xmax,this.ymin,this.spatialReference)},centerAt:function(k){var g=this.getCenter(),b=k.x-g.x;k=k.y-g.y;return new n(this.xmin+b,this.ymin+k,this.xmax+b,this.ymax+k,this.spatialReference)},update:function(k,g,b,x,v){this.xmin=k;this.ymin=g;this.xmax=b;this.ymax=
x;this.spatialReference=v;this.clearCache();return this},offset:function(k,g){return new n(this.xmin+k,this.ymin+g,this.xmax+k,this.ymax+g,this.spatialReference)},expand:function(k){var g=(1-k)/2;k=this.getWidth()*g;g*=this.getHeight();return new n(this.xmin+k,this.ymin+g,this.xmax-k,this.ymax-g,this.spatialReference)},intersects:function(k){if(!k)return!1;var g=k.type,b=this.spatialReference,x=k.spatialReference;b&&x&&!b.equals(x)&&b._canProject(x)&&(k=b.isWebMercator()?m.geographicToWebMercator(k):
m.webMercatorToGeographic(k,!0));switch(g){case "point":return this.contains(k);case "multipoint":return this._intersectsMultipoint(k);case "extent":return this._intersectsExtent(k);case "polygon":return this._intersectsPolygon(k);case "polyline":return this._intersectsPolyline(k)}},normalize:function(){var k=this._normalize(!1,!0);l.isArray(k)||(k=[k]);return k},shiftCentralMeridian:function(){return this._normalize(!0)},bisect:function(){var k=this.spatialReference,g=k&&k._getInfo(),b=[],x=0;if(g&&
this._isOutOfBounds(g)){var v=this;x=v.xmin;var y=v.ymin,D=v.ymax,E=g.valid[0],C=g.valid[1];v.getWidth()>2*C&&(v=v.getCenter(),v=new n(v.x-C,y,v.x+C,D,new t(k.toJson())));x=v.xmin-x;var z=this._normalizeX(v.xmin,g);g=this._normalizeX(v.xmax,g);z.frameId===g.frameId?b.push(new n(z.x,y,g.x,D,new t(k.toJson()))):b.push(new n(z.x,y,C,D,new t(k.toJson())),new n(E,y,g.x,D,new t(k.toJson())))}else b.push(this.getExtent());return{extents:b,marginLeft:x}},_intersectsMultipoint:function(k){var g=k.points.length,
b;for(b=0;b<g;b++)if(this.contains(k.getPoint(b)))return!0;return!1},_intersectsExtent:function(k){var g,b,x=!1;if(this.xmin<=k.xmin){var v=k.xmin;this.xmax<v?x=!0:g=Math.min(this.xmax,k.xmax)-v}else v=this.xmin,k.xmax<v?x=!0:g=Math.min(this.xmax,k.xmax)-v;if(this.ymin<=k.ymin){var y=k.ymin;this.ymax<y?x=!0:b=Math.min(this.ymax,k.ymax)-y}else y=this.ymin,k.ymax<y?x=!0:b=Math.min(this.ymax,k.ymax)-y;return x?null:new n(v,y,v+g,y+b,this.spatialReference)},_intersectsPolygon:function(k){var g=[this.xmin,
this.ymax],b=[this.xmax,this.ymax],x=[this.xmin,this.ymin],v=[this.xmax,this.ymin],y=[g,b,x,v];g=[[x,g],[g,b],[b,v],[v,x]];x=k.rings;v=x.length;var D=new r(0,0,this.spatialReference);var E=y.length;for(b=0;b<E;b++)if(D.update(y[b][0],y[b][1]),k.contains(D))return!0;D.setSpatialReference(k.spatialReference);for(b=0;b<v;b++)if(y=x[b],E=y.length){var C=y[0];D.update(C[0],C[1]);if(this.contains(D))return!0;for(k=1;k<E;k++){var z=y[k];D.update(z[0],z[1]);if(this.contains(D)||this._intersectsLine([C,z],
g))return!0;C=z}}return!1},_intersectsPolyline:function(k){var g=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],b,x=k.paths,v=x.length,y,D=new r(0,0,k.spatialReference);for(k=0;k<v;k++){var E=x[k];if(y=E.length){var C=E[0];D.update(C[0],C[1]);if(this.contains(D))return!0;for(b=1;b<y;b++){var z=E[b];D.update(z[0],z[1]);if(this.contains(D)||this._intersectsLine([C,
z],g))return!0;C=z}}}return!1},_intersectsLine:function(k,g){var b=a._getLineIntersection2,x,v=g.length;for(x=0;x<v;x++)if(b(k,g[x]))return!0;return!1},contains:function(k){if(!k)return!1;var g=k.type;if("point"===g){var b=this.spatialReference,x=k.spatialReference;g=k.x;k=k.y;b&&x&&!b.equals(x)&&b._canProject(x)&&(k=b.isWebMercator()?r.lngLatToXY(g,k):r.xyToLngLat(g,k,!0),g=k[0],k=k[1]);return g>=this.xmin&&g<=this.xmax&&k>=this.ymin&&k<=this.ymax}return"extent"===g?this._containsExtent(k):!1},_containsExtent:function(k){var g=
k.xmin,b=k.ymin,x=k.xmax,v=k.ymax,y=k.spatialReference;k=new r(g,b,y);g=new r(g,v,y);v=new r(x,v,y);b=new r(x,b,y);return this.contains(k)&&this.contains(g)&&this.contains(v)&&this.contains(b)?!0:!1},union:function(k){return new n(Math.min(this.xmin,k.xmin),Math.min(this.ymin,k.ymin),Math.max(this.xmax,k.xmax),Math.max(this.ymax,k.ymax),this.spatialReference)},getExtent:function(){var k=this.spatialReference;return new n(this.xmin,this.ymin,this.xmax,this.ymax,k&&new t(k.toJson()))},_shiftCM:function(k){var g=
this.getCacheValue("_shifted");if(!g){g=new n(this.toJson());var b=g.spatialReference;if(k=k||b._getInfo()){var x=this._getCM(k);if(x){var v=b._isWebMercator()?m.webMercatorToGeographic(x):x;g.xmin-=x.x;g.xmax-=x.x;b._isWebMercator()||(v.x=this._normalizeX(v.x,k).x);g.setSpatialReference(new t(u.substitute({Central_Meridian:v.x},4326===b.wkid?k.altTemplate:k.wkTemplate)))}}this.setCacheValue("_shifted",g)}return g},_getCM:function(k){var g;this._isOutOfBounds(k)&&(g=this.getCenter());return g},_isOutOfBounds:function(k){var g=
k.valid[0];k=k.valid[1];var b=this.xmin,x=this.xmax;return!(b>=g&&b<=k&&x>=g&&x<=k)},_normalize:function(k,g,b){var x=new n(this.toJson()),v=x.spatialReference;if(v&&(b=b||v._getInfo())){var y=B.map(this._getParts(b),function(D){return D.extent});return 2<y.length?k?this._shiftCM(b):x.update(b.valid[0],x.ymin,b.valid[1],x.ymax,v):2===y.length?k?this._shiftCM(b):g?y:{rings:B.map(y,function(D){return[[D.xmin,D.ymin],[D.xmin,D.ymax],[D.xmax,D.ymax],[D.xmax,D.ymin],[D.xmin,D.ymin]]}),spatialReference:v}:
y[0]||x}return x},_getParts:function(k){var g=this.getCacheValue("_parts");if(!g){g=[];var b=this.xmin,x=this.xmax,v=this.ymin,y=this.ymax,D=this.spatialReference,E=this.getWidth(),C=b,z=x,w=0,A=0;k=k||D._getInfo();var G=k.valid[0];var F=k.valid[1];A=this._normalizeX(b,k);b=A.x;w=A.frameId;A=this._normalizeX(x,k);x=A.x;A=A.frameId;k=b===x&&0<E;if(E>2*F){E=new n(C<z?b:x,v,F,y,D);b=new n(G,v,C<z?x:b,y,D);F=new n(0,v,F,y,D);v=new n(G,v,0,y,D);D=[];G=[];E.contains(F)&&D.push(w);E.contains(v)&&G.push(w);
b.contains(F)&&D.push(A);b.contains(v)&&G.push(A);for(y=w+1;y<A;y++)D.push(y),G.push(y);g.push({extent:E,frameIds:[w]},{extent:b,frameIds:[A]},{extent:F,frameIds:D},{extent:v,frameIds:G})}else b>x||k?g.push({extent:new n(b,v,F,y,D),frameIds:[w]},{extent:new n(G,v,x,y,D),frameIds:[A]}):g.push({extent:new n(b,v,x,y,D),frameIds:[w]});this.setCacheValue("_parts",g)}return g},_normalizeX:function(k,g){var b=0,x=g.valid[0],v=g.valid[1];g=2*v;k>v?(b=Math.ceil(Math.abs(k-v)/g),k-=b*g):k<x&&(b=Math.ceil(Math.abs(k-
x)/g),k+=b*g,b=-b);return{x:k,frameId:b}},toJson:function(){var k={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},g=this.spatialReference;g&&(k.spatialReference=g.toJson());return k}});q.prototype=n.prototype;n.simpleConstructor=q;n.defaultProps=d;l.setObject("geometry.Extent",n,c);c.geometry.defaultExtent=d;return n})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),function(f,B,l,d,c,u){function t(r,
m,a,h){if("point"===r.type){var q=m(r.x,r.y,h);return new r.constructor(q[0],q[1],new c(a))}if("extent"===r.type){q=m(r.xmin,r.ymin,h);var n=m(r.xmax,r.ymax,h);return new r.constructor(q[0],q[1],n[0],n[1],new c(a))}if("polyline"===r.type||"polygon"===r.type){q="polyline"===r.type;var k=[],g;f.forEach(q?r.paths:r.rings,function(x){k.push(g=[]);f.forEach(x,function(v){g.push(m(v[0],v[1],h))})});return q?new r.constructor({paths:k,spatialReference:new c(a)}):new r.constructor({rings:k,spatialReference:new c(a)})}if("multipoint"===
r.type){var b=[];f.forEach(r.points,function(x){b.push(m(x[0],x[1],h))});return new r.constructor({points:b,spatialReference:new c(a)})}}function e(r,m){r=r&&(null!=r.wkid?r:r.spatialReference);m=m&&(null!=m.wkid?m:m.spatialReference);return r&&m?m.equals(r)?!0:m._canProject(r):!1}l={canProject:e,project:function(r,m){var a=r&&r.spatialReference;m=m&&(null!=m.wkid?m:m.spatialReference);a&&m?a.equals(m)?r=new r.constructor(r.toJson()):e(a,m)?m.isWebMercator()?r=t(r,u.lngLatToXY,{wkid:102100}):4326===
m.wkid&&(r=t(r,u.xyToLngLat,{wkid:4326})):r=null:r=null;return r},lngLatToXY:u.lngLatToXY,xyToLngLat:u.xyToLngLat,metersPerDegree:u.metersPerDegree,geographicToWebMercator:function(r){return t(r,u.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(r,m){return t(r,u.xyToLngLat,{wkid:4326},m)}};B.mixin(B.getObject("geometry",!0,d),l);return l})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],function(f,B,l,d){function c(e,r,m){return e instanceof
d?new d(e.x+m*(r.x-e.x),e.y+m*(r.y-e.y)):[e[0]+m*(r[0]-e[0]),e[1]+m*(r[1]-e[1])]}function u(e,r){return 1E-8>Math.abs(e-r)}function t(e,r,m,a){var h=u(e[0],r[0])?1E10:(e[1]-r[1])/(e[0]-r[0]),q=u(m[0],a[0])?1E10:(m[1]-a[1])/(m[0]-a[0]),n=e[1]-h*e[0],k=m[1]-q*m[0];if(u(h,q)){if(u(n,k)){if(u(e[0],r[0]))if(Math.min(e[1],r[1])<Math.max(m[1],a[1])||Math.max(e[1],r[1])>Math.min(m[1],a[1])){e=(e[1]+r[1]+m[1]+a[1]-Math.min(e[1],r[1],m[1],a[1])-Math.max(e[1],r[1],m[1],a[1]))/2;var g=(e-n)/h}else return null;
else if(Math.min(e[0],r[0])<Math.max(m[0],a[0])||Math.max(e[0],r[0])>Math.min(m[0],a[0]))g=(e[0]+r[0]+m[0]+a[0]-Math.min(e[0],r[0],m[0],a[0])-Math.max(e[0],r[0],m[0],a[0]))/2,e=h*g+n;else return null;return[g,e]}return null}u(h,1E10)?(g=e[0],e=q*g+k):u(q,1E10)?(g=m[0],e=h*g+n):(g=-(n-k)/(h-q),e=e[1]===r[1]?e[1]:m[1]===a[1]?m[1]:h*g+n);return[g,e]}B={getLength:function(e,r){var m=r.x-e.x;e=r.y-e.y;return Math.sqrt(m*m+e*e)},_getLength:function(e,r){var m=r[0]-e[0];e=r[1]-e[1];return Math.sqrt(m*m+
e*e)},getPointOnLine:c,getMidpoint:function(e,r){return c(e,r,.5)},_equals:u,_getLineIntersection:t,getLineIntersection:function(e,r,m,a,h){(e=t([e.x,e.y],[r.x,r.y],[m.x,m.y],[a.x,a.y]))&&(e=new d(e[0],e[1],h));return e},_getLineIntersection2:function(e,r){var m=e[0],a=e[1],h=r[0],q=r[1];r=m[0];m=m[1];e=a[0];a=a[1];var n=h[0],k=h[1];h=q[0]-n;n=r-n;var g=e-r;q=q[1]-k;k=m-k;var b=a-m,x=q*g-h*b;if(0===x)return!1;h=(h*k-q*n)/x;n=(g*k-b*n)/x;return 0<=h&&1>=h&&0<=n&&1>=n?[r+h*(e-r),m+h*(a-m)]:!1},_pointLineDistance:function(e,
r){var m=r[0],a=r[1];r=m[0];var h=m[1];m=e[0];e=e[1];var q=a[0]-r,n=a[1]-h,k=m-r,g=e-h;a=Math.sqrt;var b=Math.pow,x=a(b(q,2)+b(n,2));k=(k*q+g*n)/(x*x);h+=k*n;return a(b(m-(r+k*q),2)+b(e-h,2))}};f.mixin(f.getObject("geometry",!0,l),B);return B})},"esri/tasks/Geoprocessor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has dojo/io-query ../kernel ../request ../deferredUtils ../geometry/normalizeUtils ./Task ./FeatureSet ./JobInfo ./GPMessage ./LinearUnit ./DataFile ./RasterData ./Date ./ParameterValue ./GPResultImageLayer ../layers/ArcGISDynamicMapServiceLayer ../layers/MapImage".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E,C){f=f(h,{declaredClass:"esri.tasks.Geoprocessor",_eventMap:{"execute-complete":["results","messages"],"get-result-data-complete":["result"],"get-result-image-complete":["mapImage"],"get-result-image-layer-complete":["layer"],"job-cancel":["jobInfo"],"job-complete":["jobInfo"],"status-update":["jobInfo"]},constructor:function(z){this._jobUpdateHandler=B.hitch(this,this._jobUpdateHandler);this._getJobStatus=B.hitch(this,this._getJobStatus);this._getResultDataHandler=
B.hitch(this,this._getResultDataHandler);this._getResultImageHandler=B.hitch(this,this._getResultImageHandler);this._executeHandler=B.hitch(this,this._executeHandler);this._updateTimers=[];this.registerConnectEvents()},updateDelay:1E3,processSpatialReference:null,outputSpatialReference:null,outSpatialReference:null,setUpdateDelay:function(z){this.updateDelay=z},setProcessSpatialReference:function(z){this.processSpatialReference=z},setOutputSpatialReference:function(z){this._setOutSR(z)},setOutSpatialReference:function(z){this._setOutSR(z)},
__msigns:[{n:"execute",c:3,a:[{i:0,p:["*"]}],e:2,f:1},{n:"submitJob",c:4,a:[{i:0,p:["*"]}],e:3}],_setOutSR:function(z){this.outSpatialReference=this.outputSpatialReference=z},_getOutSR:function(){return this.outSpatialReference||this.outputSpatialReference},_gpEncode:function(z,w,A){for(var G in z){var F=z[G];B.isArray(F)?z[G]=c.toJson(l.map(F,function(H){return this._gpEncode({item:H},!0).item},this)):F instanceof Date&&(z[G]=F.getTime())}return this._encode(z,w,A)},_decode:function(z){var w=z.dataType,
A=new y(z);if(-1!==l.indexOf(["GPBoolean","GPDouble","GPLong","GPString"],w))return A;if("GPLinearUnit"===w)A.value=new g(A.value);else if("GPFeatureRecordSetLayer"===w||"GPRecordSet"===w)A.value=new q(A.value);else if("GPDataFile"===w)A.value=new b(A.value);else if("GPDate"===w)z=A.value,B.isString(z)?A.value=new v({date:z}):A.value=new Date(z);else if("GPRasterData"===w||"GPRasterDataLayer"===w)z=z.value.mapImage,A.value=z?new C(z):new x(A.value);else if(-1!==w.indexOf("GPMultiValue:")){var G=w.split(":")[1];
z=A.value;A.value=l.map(z,function(F){return this._decode({paramName:"_name",dataType:G,value:F}).value},this)}else A=null;return A},submitJob:function(z,w,A,G,F){var H=this._getOutSR(),J=F.assembly;z=this._gpEncode(B.mixin({},this._url.query,{f:"json","env:outSR":H?H.wkid||c.toJson(H.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||c.toJson(this.processSpatialReference.toJson()):null},z),null,J&&J[0]);var K=this._jobUpdateHandler,Q=this._errorHandler;
return r({url:this._url.path+"/submitJob",content:z,callbackParamName:"callback",load:function(P,I){K(P,I,!1,w,A,F.dfd)},error:function(P){Q(P,G,F.dfd)}})},_jobUpdateHandler:function(z,w,A,G,F,H){var J=z.jobId;w=new n(z);this._successHandler([w],"onStatusUpdate",F,A&&H);if(!A)switch(clearTimeout(this._updateTimers[J]),this._updateTimers[J]=null,H&&H.progress(w),z.jobStatus){case n.STATUS_SUBMITTED:case n.STATUS_EXECUTING:case n.STATUS_WAITING:case n.STATUS_NEW:var K=this._getJobStatus;this._updateTimers[J]=
setTimeout(function(){K(J,A,G,F,H)},this.updateDelay);break;default:this._successHandler([w],"onJobComplete",G,H)}},_getJobStatus:function(z,w,A,G,F){var H=this._jobUpdateHandler;r({url:this._url.path+"/jobs/"+z,content:B.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:function(J,K){H(J,K,w,A,G,F)},error:this._errorHandler})},_getResultDataHandler:function(z,w,A,G,F){try{var H=this._decode(z);this._successHandler([H],"onGetResultDataComplete",A,F)}catch(J){this._errorHandler(J,
G,F)}},getResultData:function(z,w,A,G){var F=this._getResultDataHandler,H=this._errorHandler,J=new d(m._dfdCanceller);J._pendingDfd=r({url:this._url.path+"/jobs/"+z+"/results/"+w,content:B.mixin({},this._url.query,{f:"json",returnType:"data"}),callbackParamName:"callback",load:function(K,Q){F(K,Q,A,G,J)},error:function(K){H(K,G,J)}});return J},checkJobStatus:function(z,w,A){var G=this._jobUpdateHandler,F=this._errorHandler,H=new d(m._dfdCanceller);H._pendingDfd=r({url:this._url.path+"/jobs/"+z,content:B.mixin({},
this._url.query,{f:"json"}),callbackParamName:"callback",load:function(J,K){G(J,K,!0,null,w,H)},error:function(J){F(J,A,H)}});return H},cancelJob:function(z,w,A){var G=this._errorHandler,F=new d(m._dfdCanceller);F._pendingDfd=r({url:this._url.path+"/jobs/"+z+"/cancel",content:B.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:B.hitch(this,function(H,J){this._successHandler([H],"onJobCancel",w,F)}),error:function(H){G(H,A,F)}});return F},execute:function(z,w,A,G){var F=this._getOutSR(),
H=G.assembly;z=this._gpEncode(B.mixin({},this._url.query,{f:"json","env:outSR":F?F.wkid||c.toJson(F.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||c.toJson(this.processSpatialReference.toJson()):null},z),null,H&&H[0]);var J=this._executeHandler,K=this._errorHandler;return r({url:this._url.path+"/execute",content:z,callbackParamName:"callback",load:function(Q,P){J(Q,P,w,A,G.dfd)},error:function(Q){K(Q,A,G.dfd)}})},_executeHandler:function(z,w,A,G,F){try{var H=
z.results,J,K=z.messages;var Q=0;for(J=H.length;Q<J;Q++)H[Q]=this._decode(H[Q]);Q=0;for(J=K.length;Q<J;Q++)K[Q]=new k(K[Q]);this._successHandler([H,K],"onExecuteComplete",A,F)}catch(P){this._errorHandler(P,G,F)}},_getResultImageHandler:function(z,w,A,G,F){try{var H=this._decode(z);this._successHandler([H],"onGetResultImageComplete",A,F)}catch(J){this._errorHandler(J,G,F)}},getResultImage:function(z,w,A,G,F){var H=this._getResultImageHandler,J=this._errorHandler;A=this._gpEncode(B.mixin({},this._url.query,
{f:"json"},A.toJson()));var K=new d(m._dfdCanceller);K._pendingDfd=r({url:this._url.path+"/jobs/"+z+"/results/"+w,content:A,callbackParamName:"callback",load:function(Q,P){H(Q,P,G,F,K)},error:function(Q){J(Q,F,K)}});return K},cancelJobStatusUpdates:function(z){clearTimeout(this._updateTimers[z]);this._updateTimers[z]=null},getResultImageLayer:function(z,w,A,G){if(null==w){var F=this._url.path.indexOf("/GPServer/");z=this._url.path.substring(0,F)+"/MapServer/jobs/"+z}else z=this._url.path+"/jobs/"+
z+"/results/"+w;this._url.query&&(z+="?"+t.objectToQuery(this._url.query));w=null==w?new E(z,{imageParameters:A}):new D(z,{imageParameters:A},!0);this.onGetResultImageLayerComplete(w);G&&G(w);return w},onStatusUpdate:function(){},onJobComplete:function(){},onExecuteComplete:function(){},onGetResultDataComplete:function(){},onGetResultImageComplete:function(){},onGetResultImageLayerComplete:function(){},onJobCancel:function(){}});a._createWrappers(f);B.setObject("tasks.Geoprocessor",f,e);return f})},
"esri/geometry/normalizeUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/has ../kernel ../config ../deferredUtils ./Extent ./Polyline ./Polygon ./webMercatorUtils ./jsonUtils".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h){function q(z,w){return Math.ceil((z-w)/(2*w))}function n(z,w){var A=z.paths||z.rings,G,F,H=A.length;for(G=0;G<H;G++){var J=A[G].length;for(F=0;F<J;F++){var K=z.getPoint(G,F);z.setPoint(G,F,K.offset(w,0))}}return z}function k(z,w){if(!(z instanceof
r||z instanceof m))throw Error("_straightLineDensify: the input geometry is neither polyline nor polygon");var A=z instanceof r,G=[],F;f.forEach(A?z.paths:z.rings,function(H){G.push(F=[]);F.push([H[0][0],H[0][1]]);var J,K;for(J=0;J<H.length-1;J++){var Q=H[J][0];var P=H[J][1];var I=H[J+1][0];var N=H[J+1][1];var L=Math.sqrt((I-Q)*(I-Q)+(N-P)*(N-P));var W=(N-P)/L;var Z=(I-Q)/L;var aa=L/w;if(1<aa){for(K=1;K<=aa-1;K++){var ia=K*w;var R=Z*ia+Q;ia=W*ia+P;F.push([R,ia])}K=(L+Math.floor(aa-1)*w)/2;R=Z*K+Q;
ia=W*K+P;F.push([R,ia])}F.push([I,N])}});return A?new r({paths:G,spatialReference:z.spatialReference}):new m({rings:G,spatialReference:z.spatialReference})}function g(z,w,A){w&&(z=k(z,1E6),z=a.webMercatorToGeographic(z,!0));A&&(z=n(z,A));return z}function b(z,w,A){var G=z.x||z[0];if(G>w){var F=q(G,w);z.x?z=z.offset(-2*F*w,0):z[0]=G+-2*F*w}else G<A&&(F=q(G,A),z.x?z=z.offset(-2*F*A,0):z[0]=G+-2*F*A);return z}function x(z,w){var A=-1;f.forEach(w.cutIndexes,function(G,F){var H=w.geometries[F];f.forEach(H.rings||
H.paths,function(J,K){f.some(J,function(Q){if(!(180>Q[0])){Q=0;var P,I=J.length;for(P=0;P<I;P++){var N=J[P][0];Q=N>Q?N:Q}Q=Number(Q.toFixed(9));Q=-360*q(Q,180);I=J.length;for(P=0;P<I;P++)N=H.getPoint(K,P),H.setPoint(K,P,N.offset(Q,0))}return!0})});G===A?H.rings?f.forEach(H.rings,function(J){z[G]=z[G].addRing(J)}):f.forEach(H.paths,function(J){z[G]=z[G].addPath(J)}):(A=G,z[G]=H)});return z}function v(z,w,A,G){var F=new l;F.addCallbacks(A,G);w=w||u.defaults.geometryService;var H=[],J=[],K,Q,P,I,N,L,
W,Z,aa=0;f.forEach(z,function(M){if(M)if(K||(K=M.spatialReference,Q=K._getInfo(),I=(P=K._isWebMercator())?2.0037508342788905E7:180,N=P?-2.0037508342788905E7:-180,L=P?102100:4326,W=new r({paths:[[[I,N],[I,I]]],spatialReference:{wkid:L}}),Z=new r({paths:[[[N,N],[N,I]]],spatialReference:{wkid:L}})),Q){var X=h.fromJson(M.toJson()),fa=M.getExtent();"point"===M.type?H.push(b(X,I,N)):"multipoint"===M.type?(X.points=f.map(X.points,function(ea){return b(ea,I,N)}),H.push(X)):"extent"===M.type?(X=fa._normalize(null,
null,Q),H.push(X.rings?new m(X):X)):fa?(M=2*q(fa.xmin,N)*I,X=0===M?X:n(X,M),fa=fa.offset(M,0),fa.intersects(W)&&fa.xmax!==I?(aa=fa.xmax>aa?fa.xmax:aa,X=g(X,P),J.push(X),H.push("cut")):fa.intersects(Z)&&fa.xmin!==N?(aa=2*fa.xmax*I>aa?2*fa.xmax*I:aa,X=g(X,P,360),J.push(X),H.push("cut")):H.push(X)):H.push(X)}else H.push(M);else H.push(M)});A=new r;G=q(aa,I);for(var ia=-90,R=G;0<G;){var S=-180+360*G;A.addPath([[S,ia],[S,-1*ia]]);ia*=-1;G--}0<J.length&&0<R?w?w.cut(J,A,function(M){J=x(J,M);var X=[];f.forEach(H,
function(fa,ea){"cut"===fa&&(fa=J.shift(),z[ea].rings&&1<z[ea].rings.length&&fa.rings.length>=z[ea].rings.length?(H[ea]="simplify",X.push(fa)):H[ea]=!0===P?a.geographicToWebMercator(fa):fa)});0<X.length?w.simplify(X,function(fa){f.forEach(H,function(ea,ha){"simplify"===ea&&(H[ha]=!0===P?a.geographicToWebMercator(fa.shift()):fa.shift())});F.callback(H)},function(fa){F.errback(fa)}):F.callback(H)},function(M){F.errback(M)}):F.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):
(f.forEach(H,function(M,X){"cut"===M&&(M=J.shift(),H[X]=!0===P?a.geographicToWebMercator(M):M)}),F.callback(H));return F}function y(z,w,A,G){var F=!1,H;B.isObject(z)&&z&&(B.isArray(z)?z.length&&((H=z[0]&&z[0].declaredClass)&&-1!==H.indexOf("Graphic")?(z=f.map(z,function(J){return J.geometry}),F=z.length?!0:!1):H&&-1!==H.indexOf("esri.geometry.")&&(F=!0)):(H=z.declaredClass)&&-1!==H.indexOf("FeatureSet")?(z=f.map(z.features||[],function(J){return J.geometry}),F=z.length?!0:!1):H&&-1!==H.indexOf("esri.geometry.")&&
(F=!0));F&&w.push({index:A,property:G,value:z})}function D(z,w){var A=[];f.forEach(w,function(G){var F=G.i,H=z[F];G=G.p;var J;if(B.isObject(H)&&H)if(G)if("*"===G[0])for(J in H)H.hasOwnProperty(J)&&y(H[J],A,F,J);else f.forEach(G,function(K){y(B.getObject(K,!1,H),A,F,K)});else y(H,A,F)});return A}function E(z,w){var A=0,G={};f.forEach(w,function(F){var H=F.index,J=F.property,K=F.value,Q=K.length||1,P=z.slice(A,A+Q);B.isArray(K)||(P=P[0]);A+=Q;delete F.value;J?(G[H]=G[H]||{},G[H][J]=P):G[H]=P});return G}
function C(z){for(var w=[],A=0,G=0,F=Math.min,H=Math.max,J=0;J<z.length;J++){for(var K=z[J],Q=null,P=0;P<K.length;P++)Q=K[P],w.push(Q),0===P?G=A=Q[0]:(A=F(A,Q[0]),G=H(G,Q[0]));Q&&w.push([(A+G)/2,0])}return w}d={normalizeCentralMeridian:v,_foldCutResults:x,_prepareGeometryForCut:g,_offsetMagnitude:q,_pointNormalization:b,_updatePolyGeometry:n,_straightLineDensify:k,_createWrappers:function(z){var w=B.isObject(z)?z.prototype:B.getObject(z+".prototype");f.forEach(w.__msigns,function(A){var G=w[A.n];
w[A.n]=function(){var F=this,H=[],J,K=new l(t._dfdCanceller);A.f&&t._fixDfd(K);for(J=0;J<A.c;J++)H[J]=arguments[J];var Q={dfd:K};H.push(Q);var P=[],I;if(F.normalization&&!F._isTable){var N=D(H,A.a);f.forEach(N,function(L){P=P.concat(L.value)});P.length&&(I=v(P))}I?(K._pendingDfd=I,I.addCallbacks(function(L){K.canceled||(Q.assembly=E(L,N),K._pendingDfd=G.apply(F,H))},function(L){var W=F.declaredClass;W&&-1!==W.indexOf("FeatureLayer")?F._resolve([L],null,H[A.e],K,!0):F._errorHandler(L,H[A.e],K)})):
K._pendingDfd=G.apply(F,H);return K}})},_disassemble:D,_addToBucket:y,_reassemble:E,getDenormalizedExtent:function(z){if(!z)return null;var w=z.getExtent();if(!w)return null;var A=z.spatialReference&&z.spatialReference._getInfo();if(!A)return w;var G=A.valid[0];A=A.valid[1];var F=2*A,H=w.getWidth(),J=w.xmax,K=w.xmin;if("extent"===z.type||0===H||H<=A||H>F||J<G||K>A)return w;switch(z.type){case "polygon":if(1<z.rings.length)var Q=C(z.rings);else return w;break;case "polyline":if(1<z.paths.length)Q=
C(z.paths);else return w;break;case "multipoint":Q=z.points}z=Math.min;G=Math.max;F=new e(w.toJson());for(var P=0;P<Q.length;P++){var I=Q[P][0];0>I?(I+=A,K=G(I,K)):(I-=A,J=z(I,J))}F.xmin=J;F.xmax=K;return F.getWidth()<H?(F.xmin-=A,F.xmax-=A,F):w}};B.mixin(B.getObject("geometry",!0,c),d);return d})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(f,
B,l,d,c,u,t,e,r,m,a){function h(){}function q(){}d={type:"polyline",paths:null};f=f(e,{declaredClass:"esri.geometry.Polyline",type:"polyline",paths:null,constructor:function(n){this.paths=[];this._path=0;n&&(l.isArray(n)?this.paths=l.isArray(n[0][0])?n:[n]:n.paths?u.mixin(this,n):this.spatialReference=n,this.spatialReference&&(this.spatialReference=a.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(n){this.clearCache();this._path=this.paths.length;this.paths[this._path]=
[];l.isArray(n[0])?B.forEach(n,this._addPointArr,this):B.forEach(n,this._addPoint,this);return this},_addPointArr:function(n){this.paths[this._path].push(n)},_addPoint:function(n){this.paths[this._path].push([n.x,n.y])},_insertPoints:function(n,k){this.clearCache();this._path=k;this.paths[this._path]||(this.paths[this._path]=[]);B.forEach(n,this._addPoint,this)},_validateInputs:function(n,k){return null!==n&&void 0!==n&&(0>n||n>=this.paths.length)||null!==k&&void 0!==n&&(0>k||k>=this.paths[n].length)?
!1:!0},getPoint:function(n,k){if(this._validateInputs(n,k))return new r(this.paths[n][k],this.spatialReference)},setPoint:function(n,k,g){if(this._validateInputs(n,k))return this.clearCache(),this.paths[n][k]=[g.x,g.y],this},insertPoint:function(n,k,g){if(this._validateInputs(n)&&null!=k&&0<=k&&k<=this.paths[n].length)return this.clearCache(),this.paths[n].splice(k,0,[g.x,g.y]),this},removePath:function(n){if(this._validateInputs(n,null)){this.clearCache();n=this.paths.splice(n,1)[0];var k,g=n.length,
b=this.spatialReference;for(k=0;k<g;k++)n[k]=new r(n[k],b);return n}},removePoint:function(n,k){if(this._validateInputs(n,k))return this.clearCache(),new r(this.paths[n].splice(k,1)[0],this.spatialReference)},getExtent:function(){var n=this.getCacheValue("_extent");var k=this.getCacheValue("_partwise");if(n)return n=new m(n),n._partwise=k,n;n=this.paths;var g=n.length;if(g&&n[0].length){var b,x,v,y,D=b=n[0][0][0],E=x=n[0][0][1],C=Math.min,z=Math.max,w=this.spatialReference;k=[];var A,G;for(v=0;v<
g;v++){var F=n[v];var H=A=F[0]&&F[0][0];var J=G=F[0]&&F[0][1];var K=F.length;for(y=0;y<K;y++){var Q=F[y];var P=Q[0];Q=Q[1];D=C(D,P);E=C(E,Q);b=z(b,P);x=z(x,Q);H=C(H,P);J=C(J,Q);A=z(A,P);G=z(G,Q)}k.push(new m({xmin:H,ymin:J,xmax:A,ymax:G,spatialReference:w?w.toJson():null}))}n={xmin:D,ymin:E,xmax:b,ymax:x,spatialReference:w?w.toJson():null};k=1<k.length?k:null;this.setCacheValue("_extent",n);this.setCacheValue("_partwise",k);n=new m(n);n._partwise=k;return n}},toJson:function(){var n={paths:u.clone3DArray(this.paths)},
k=this.spatialReference;k&&(n.spatialReference=k.toJson());return n}});h.prototype=f.prototype;q.prototype=new h;Object.defineProperty(q.prototype,"paths",{get:function(){this._unquantizeFn&&(this._pathsVal=this._unquantizeFn({paths:u.clone3DArray(this._pathsVal)}).paths,this._unquantizeFn=null);return this._pathsVal},set:function(n){this._pathsVal=n}});q.prototype.setupLazyUnquantization=function(n,k){this._unquantizeFn=n;this._pathsVal=k.paths};f.simpleConstructor=h;f.accessorConstructor=q;f.defaultProps=
d;l.setObject("geometry.Polyline",f,c);c.geometry.defaultPolyline=d;return f})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h){function q(){}function n(){}d={type:"polygon",rings:null};var k=f(e,{declaredClass:"esri.geometry.Polygon",type:"polygon",rings:null,constructor:function(g){this.rings=[];this._ring=
0;g&&(l.isArray(g)?this.rings=l.isArray(g[0][0])?g:[g]:g.rings?u.mixin(this,g):this.spatialReference=g,this.spatialReference&&(this.spatialReference=h.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(g){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=[];l.isArray(g[0])?B.forEach(g,this._addPointArr,this):B.forEach(g,this._addPoint,this);return this},_addPointArr:function(g){this.rings[this._ring].push(g)},_addPoint:function(g){this.rings[this._ring].push([g.x,
g.y])},_insertPoints:function(g,b){this.clearCache();this._ring=b;this.rings[this._ring]||(this.rings[this._ring]=[]);B.forEach(g,this._addPoint,this)},_validateInputs:function(g,b){return null!==g&&void 0!==g&&(0>g||g>=this.rings.length)||null!==b&&void 0!==g&&(0>b||b>=this.rings[g].length)?!1:!0},getPoint:function(g,b){if(this._validateInputs(g,b))return new r(this.rings[g][b],this.spatialReference)},setPoint:function(g,b,x){if(this._validateInputs(g,b))return this.clearCache(),this.rings[g][b]=
[x.x,x.y],this},insertPoint:function(g,b,x){if(this._validateInputs(g)&&null!=b&&0<=b&&b<=this.rings[g].length)return this.clearCache(),this.rings[g].splice(b,0,[x.x,x.y]),this},removeRing:function(g){if(this._validateInputs(g,null)){this.clearCache();g=this.rings.splice(g,1)[0];var b,x=g.length,v=this.spatialReference;for(b=0;b<x;b++)g[b]=new r(g[b],v);return g}},removePoint:function(g,b){if(this._validateInputs(g,b))return this.clearCache(),new r(this.rings[g].splice(b,1)[0],this.spatialReference)},
getExtent:function(){var g=this.getCacheValue("_extent");var b=this.getCacheValue("_partwise");if(g)return g=new m(g),g._partwise=b,g;g=this.rings;var x=g.length;if(x&&g[0].length){var v,y,D,E,C=v=g[0][0][0],z=y=g[0][0][1],w=Math.min,A=Math.max,G=this.spatialReference;b=[];var F,H;for(D=0;D<x;D++){var J=g[D];var K=F=J[0]&&J[0][0];var Q=H=J[0]&&J[0][1];var P=J.length;for(E=0;E<P;E++){var I=J[E];var N=I[0];I=I[1];C=w(C,N);z=w(z,I);v=A(v,N);y=A(y,I);K=w(K,N);Q=w(Q,I);F=A(F,N);H=A(H,I)}b.push(new m({xmin:K,
ymin:Q,xmax:F,ymax:H,spatialReference:G?G.toJson():null}))}g={xmin:C,ymin:z,xmax:v,ymax:y,spatialReference:G?G.toJson():null};b=1<b.length?b:null;this.setCacheValue("_extent",g);this.setCacheValue("_partwise",b);g=new m(g);g._partwise=b;return g}},contains:function(g){var b=this.rings,x=!1,v,y,D,E=b.length;var C=this.spatialReference;var z=g.spatialReference;var w=g.x;g=g.y;C&&z&&!C.equals(z)&&C._canProject(z)&&(g=C.isWebMercator()?r.lngLatToXY(w,g):r.xyToLngLat(w,g,!0),w=g[0],g=g[1]);for(D=0;D<E;D++){C=
b[D];var A=C.length;for(y=v=0;y<A;y++){v++;v===A&&(v=0);z=C[y];var G=C[v];(z[1]<g&&G[1]>=g||G[1]<g&&z[1]>=g)&&z[0]+(g-z[1])/(G[1]-z[1])*(G[0]-z[0])<w&&(x=!x)}}return x},getCentroid:function(){var g=this.getCacheValue("_centroid");if(void 0!==g)return g;g=this.rings;var b,x,v=[],y,D,E=Infinity,C=-Infinity,z=Infinity,w=-Infinity;B.forEach(g,function(F){A=b=x=0;B.forEach(F,function(H,J){J<F.length-1&&(y=F[J+1],D=H[0]*y[1]-y[0]*H[1],A+=(H[0]+y[0])*D,b+=(H[1]+y[1])*D,x+=D,H[0]<E&&(E=H[0]),H[0]>C&&(C=H[0]),
H[1]<z&&(z=H[1]),H[1]>w&&(w=H[1]))});0<x&&(x*=-1);x&&v.push([A,b,x/2])});v.sort(function(F,H){return F[2]-H[2]});var A=b=void 0;if(v[0]){var G=6*v[0][2];A=v[0][0]/G;b=v[0][1]/G;if(A<E||A>C||b<z||b>w)A=b=void 0}if(void 0===A||void 0===b)if(g=g[0]&&g[0].length?this._getLineCentroid(g[0]):null)A=g.x,b=g.y;g=isNaN(A)||isNaN(b)?null:new r(A,b,this.spatialReference);this.setCacheValue("_centroid",g);return g},_getLineCentroid:function(g){var b=0,x=0,v=0,y={x:0,y:0},D={x:0,y:0},E,C=g.length,z;for(E=0;E<
C-1;E++){var w=g[E];var A=g[E+1];if(w&&A){y.x=w[0];y.y=w[1];D.x=A[0];D.y=A[1];var G=a.getLength(y,D);0<G&&(b+=G,w=a.getMidpoint(w,A),x+=G*w[0],v+=G*w[1])}}0<b?z={x:x/b,y:v/b}:g[0]&&(z={x:g[0][0],y:g[0][1]});return z},isClockwise:function(g){var b=0,x,v=g.length,y=l.isArray(g[0])?function(D,E){return D[0]*E[1]-E[0]*D[1]}:function(D,E){return D.x*E.y-E.x*D.y};for(x=0;x<v;x++)b+=y(g[x],g[(x+1)%v]);return 0>=b/2},isSelfIntersecting:function(g){g=g||this;var b,x,v,y,D,E=g.rings.length;for(v=0;v<E;v++){for(b=
0;b<g.rings[v].length-1;b++){var C=[[g.rings[v][b][0],g.rings[v][b][1]],[g.rings[v][b+1][0],g.rings[v][b+1][1]]];for(x=v+1;x<E;x++)for(y=0;y<g.rings[x].length-1;y++){var z=[[g.rings[x][y][0],g.rings[x][y][1]],[g.rings[x][y+1][0],g.rings[x][y+1][1]]];if((D=a._getLineIntersection2(C,z))&&!(D[0]===C[0][0]&&D[1]===C[0][1]||D[0]===z[0][0]&&D[1]===z[0][1]||D[0]===C[1][0]&&D[1]===C[1][1]||D[0]===z[1][0]&&D[1]===z[1][1]))return!0}}y=g.rings[v].length;if(!(4>=y))for(b=0;b<y-3;b++){var w=y-1;0===b&&(w=y-2);
C=[[g.rings[v][b][0],g.rings[v][b][1]],[g.rings[v][b+1][0],g.rings[v][b+1][1]]];for(x=b+2;x<w;x++)if(z=[[g.rings[v][x][0],g.rings[v][x][1]],[g.rings[v][x+1][0],g.rings[v][x+1][1]]],(D=a._getLineIntersection2(C,z))&&!(D[0]===C[0][0]&&D[1]===C[0][1]||D[0]===z[0][0]&&D[1]===z[0][1]||D[0]===C[1][0]&&D[1]===C[1][1]||D[0]===z[1][0]&&D[1]===z[1][1]))return!0}}return!1},toJson:function(){var g={rings:u.clone3DArray(this.rings)},b=this.spatialReference;b&&(g.spatialReference=b.toJson());return g}});q.prototype=
k.prototype;n.prototype=new q;Object.defineProperty(n.prototype,"rings",{get:function(){this._unquantizeFn&&(this._ringsVal=this._unquantizeFn({rings:u.clone3DArray(this._ringsVal)}).rings,this._unquantizeFn=null);return this._ringsVal},set:function(g){this._ringsVal=g}});n.prototype.setupLazyUnquantization=function(g,b){this._unquantizeFn=g;this._ringsVal=b.rings};k.simpleConstructor=q;k.accessorConstructor=n;k.defaultProps=d;k.createEllipse=function(g){var b=g.center.x,x=g.center.y,v=g.longAxis,
y=g.shortAxis,D=g.numberOfPoints,E=g.map,C;g=[];var z=2*Math.PI/D;for(C=0;C<D;C++){var w=Math.cos(C*z);var A=Math.sin(C*z);w=E.toMap({x:v*w+b,y:y*A+x});g.push(w)}g.push(g[0]);b=new k(E.spatialReference);b.addRing(g);return b};k.createCircle=function(g){return k.createEllipse({center:g.center,longAxis:g.r,shortAxis:g.r,numberOfPoints:g.numberOfPoints,map:g.map})};k.fromExtent=function(g){var b=g.normalize();g=g.spatialReference;return new k({rings:B.map(b,function(x){return[[x.xmin,x.ymin],[x.xmin,
x.ymax],[x.xmax,x.ymax],[x.xmax,x.ymin],[x.xmin,x.ymin]]}),spatialReference:g?g.toJson():null})};l.setObject("geometry.Polygon",k,c);c.geometry.defaultPolygon=d;c.geometry.createEllipse=k.createEllipse;c.geometry.createCircle=k.createCircle;c.geometry.isClockwise=k.prototype.isClockwise;c.geometry.polygonSelfIntersecting=k.prototype.isSelfIntersecting;return k})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../lang ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),
function(f,B,l,d,c,u,t,e,r){function m(n,k,g){var b=n.rings||n.paths,x,v;var y=0;for(x=b.length;y<x;y++){var D=b[y];var E=0;for(v=D.length;E<v;E++){var C=D[E];if(0<E)z+=C[0],w+=C[1];else{var z=C[0];var w=C[1]}C[0]=k(z);C[1]=g(w)}}return n}var a={esriGeometryPoint:function(n,k,g){n.x=k(n.x);n.y=g(n.y);return n},esriGeometryPolyline:m,esriGeometryPolygon:m,esriGeometryEnvelope:function(n,k,g){n.xmin=k(n.xmin);n.ymin=g(n.ymin);n.xmax=k(n.xmax);n.ymax=g(n.ymax);return n},esriGeometryMultipoint:function(n,
k,g){var b=n.points,x;var v=0;for(x=b.length;v<x;v++){var y=b[v];if(0<v)D+=y[0],E+=y[1];else{var D=y[0];var E=y[1]}y[0]=k(D);y[1]=g(E)}return n}},h={esriGeometryPoint:function(n,k,g){n.x=k(n.x);n.y=g(n.y);return n}},q={createInstance:function(n,k){n=new n;k&&d.mixin(n,k);return n},fromJson:function(n){if(void 0!==n.x&&void 0!==n.y)return new c(n);if(void 0!==n.paths)return new u(n);if(void 0!==n.rings)return new t(n);if(void 0!==n.points)return new e(n);if(void 0!==n.xmin&&void 0!==n.ymin&&void 0!==
n.xmax&&void 0!==n.ymax)return new r(n)},getJsonType:function(n){return n instanceof c?"esriGeometryPoint":n instanceof u?"esriGeometryPolyline":n instanceof t?"esriGeometryPolygon":n instanceof r?"esriGeometryEnvelope":n instanceof e?"esriGeometryMultipoint":null},getGeometryType:function(n){return"esriGeometryPoint"===n?c:"esriGeometryPolyline"===n?u:"esriGeometryPolygon"===n?t:"esriGeometryEnvelope"===n?r:"esriGeometryMultipoint"===n?e:null},supportsLazyUnquantization:function(n){return"esriGeometryPoint"===
n||"esriGeometryPolyline"===n||"esriGeometryPolygon"===n||"esriGeometryMultipoint"===n},unquantizeFunction:function(n,k){if(n&&k){var g=k.translate[0],b=k.translate[1],x=k.scale[0],v=k.scale[1],y=function(C){return C*x+g},D=function(C){return b-C*v},E=a[n];return function(C){return C?E(C,y,D):null}}},unquantize:function(n,k,g){if(k=q.unquantizeFunction(k,g)){var b=n.length;for(g=0;g<b;g++)k(n[g].geometry)}},quantizeFunction:function(n,k){if(n&&"esriGeometryPoint"===n&&k){var g=k.translate[0],b=k.translate[1],
x=k.scale[0],v=k.scale[1],y=function(C){return Math.round((C-g)/x)},D=function(C){return Math.round((b-C)/v)},E=h[n];return function(C){return C?E(C,y,D):null}}},quantize:function(n,k,g){if(k=q.quantizeFunction(k,g)){var b=n.length;for(g=0;g<b;g++)k(n[g].geometry)}}};f.mixin(f.getObject("geometry",!0,l),q);return q})},"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(f,
B,l,d,c,u,t,e,r,m){function a(){}function h(){}l={type:"multipoint",points:null};f=f(t,{declaredClass:"esri.geometry.Multipoint",type:"multipoint",points:null,constructor:function(q){this.points=[];q&&(q.points?c.mixin(this,q):this.spatialReference=q,this.spatialReference&&(this.spatialReference=m.createSpatialReference(this.spatialReference)));this.verifySR()},addPoint:function(q){this.clearCache();B.isArray(q)?this.points.push(q):this.points.push([q.x,q.y]);return this},removePoint:function(q){if(this._validateInputs(q))return this.clearCache(),
new e(this.points.splice(q,1)[0],this.spatialReference)},getExtent:function(){var q=this.getCacheValue("_extent");if(q)return new r(q);q=this.points;var n=q.length;if(n){var k=q[0],g,b,x=g=k[0],v=b=k[1],y=Math.min,D=Math.max,E=this.spatialReference,C;for(C=0;C<n;C++){k=q[C];var z=k[0];k=k[1];x=y(x,z);v=y(v,k);g=D(g,z);b=D(b,k)}q={xmin:x,ymin:v,xmax:g,ymax:b,spatialReference:E?E.toJson():null};this.setCacheValue("_extent",q);return new r(q)}},_validateInputs:function(q){return null===q||0>q||q>=this.points.length?
!1:!0},getPoint:function(q){if(this._validateInputs(q))return q=this.points[q],new e(q[0],q[1],this.spatialReference)},setPoint:function(q,n){if(this._validateInputs(q))return this.clearCache(),this.points[q]=[n.x,n.y],this},toJson:function(){var q={points:c.clone2DArray(this.points)},n=this.spatialReference;n&&(q.spatialReference=n.toJson());return q}});a.prototype=f.prototype;h.prototype=new a;Object.defineProperty(h.prototype,"points",{get:function(){this._unquantizeFn&&(this._pointsVal=this._unquantizeFn({points:c.clone2DArray(this._pointsVal)}).points,
this._unquantizeFn=null);return this._pointsVal},set:function(q){this._pointsVal=q}});h.prototype.setupLazyUnquantization=function(q,n){this._unquantizeFn=q;this._pointsVal=n.points};f.simpleConstructor=a;f.accessorConstructor=h;f.defaultProps=l;B.setObject("geometry.Multipoint",f,d);d.geometry.defaultMultipoint=l;return f})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(f,B,l,
d,c,u,t,e){f=f(e,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(r,m){r&&B.isString(r)&&(this._url=t.urlToObject(this.url=r));m&&m.requestOptions&&(this.requestOptions=m.requestOptions);this.normalization=!0;this._errorHandler=B.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var r=this._url,m=/^http:/i;this.url&&(this.url=this.url.replace(m,"https:"));r&&r.path&&(r.path=r.path.replace(m,"https:"))},_encode:function(r,
m,a){var h={},q;for(q in r)if("declaredClass"!==q){var n=r[q];var k=typeof n;if(null!==n&&void 0!==n&&"function"!==k)if(B.isArray(n)){h[q]=[];var g=n.length;for(k=0;k<g;k++)h[q][k]=this._encode(n[k])}else"object"===k?n.toJson&&(k=n.toJson(a&&a[q]),"esri.tasks.FeatureSet"===n.declaredClass&&k.spatialReference&&(k.sr=k.spatialReference,delete k.spatialReference),h[q]=m?k:l.toJson(k)):h[q]=n}return h},_successHandler:function(r,m,a,h){m&&this[m].apply(this,r);a&&a.apply(null,r);h&&u._resDfd(h,r)},_errorHandler:function(r,
m,a){this.onError(r);m&&m(r);a&&a.errback(r)},setNormalization:function(r){this.normalization=r},onError:function(){}});return c.Task=f})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/Polygon ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h){f=f(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(q,n){if(q){B.mixin(this,
q);var k=this.features=this.features||[],g=q.spatialReference;g=this.spatialReference=a.createInstance(e.simpleConstructor,g);var b=a.getGeometryType(q.geometryType);this.geometryType=q.geometryType;q.fields&&(this.fields=q.fields);q=a.supportsLazyUnquantization(this.geometryType);var x=a.unquantizeFunction(this.geometryType,this.transform),v=!!(n&&q&&x),y=b&&(v?b.accessorConstructor:b.simpleConstructor);l.forEach(k,function(D,E){var C=a.createInstance(t.simpleConstructor),z=D.geometry;if(b&&z){var w=
C.geometry=a.createInstance(y,v?null:z);w.setSpatialReference(z.spatialReference?a.createInstance(e.simpleConstructor,z.spatialReference):g);v&&w.setupLazyUnquantization(x,z)}C.symbol=D.symbol?h.fromJson(D.symbol):null;C.attributes=D.attributes;k[E]=C});v||this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(q){var n={};this.displayFieldName&&(n.displayFieldName=this.displayFieldName);this.fields&&(n.fields=this.fields);
this.spatialReference?n.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(n.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(n.geometryType=a.getJsonType(this.features[0].geometry)),n.features=r._encodeGraphics(this.features,q));n.geometryType=n.geometryType||this.geometryType;n.exceededTransferLimit=this.exceededTransferLimit;n.transform=this.transform;return u.fixJson(n)},_hydrate:function(){a.unquantize(this.features,
this.geometryType,this.transform);this.transform=null},quantize:function(q){if(!this.geometryType)return this.transform=null,this;var n=q.translate[0],k=q.translate[1],g=q.scale[0],b=q.scale[1],x=this.features,v=function(C,z,w){var A,G=[];var F=0;for(A=C.length;F<A;F++){var H=C[F];if(0<F){var J=z(H[0]);H=w(H[1]);if(J!==K||H!==Q){G.push([J-K,H-Q]);var K=J;var Q=H}}else K=z(H[0]),Q=w(H[1]),G.push([K,Q])}return 0<G.length?G:null},y=function(C,z,w){if("esriGeometryPoint"===C)return function(A){A.x=z(A.x);
A.y=w(A.y);return A};if("esriGeometryPolyline"===C||"esriGeometryPolygon"===C)return function(A){var G;var F=A.rings||A.paths;var H=[];var J=0;for(G=F.length;J<G;J++){var K=F[J];(K=v(K,z,w))&&H.push(K)}return 0<H.length?(A.rings?A.rings=H:A.paths=H,A):null};if("esriGeometryMultipoint"===C)return function(A){var G=v(A.points,z,w);return 0<G.length?(A.points=G,A):null};if("esriGeometryEnvelope"===C)return function(A){return A}}(this.geometryType,function(C){return Math.round((C-n)/g)},function(C){return Math.round((k-
C)/b)}),D;var E=0;for(D=x.length;E<D;E++)x[E].geometry&&(y(x[E].geometry)||x[E].setGeometry(null));this.transform=q;return this}});f.createGraphics=function(q){var n=q.geometryType,k=a.createInstance(e.simpleConstructor,q.spatialReference),g=a.getGeometryType(n).accessorConstructor,b=a.unquantizeFunction(n,q.transform);return l.map(q.features,function(x,v){v=a.createInstance(t.simpleConstructor);var y=x.geometry;if(y){var D=v.geometry=a.createInstance(g);D.setSpatialReference(k);D.setupLazyUnquantization(b,
y)}v.attributes=x.attributes;return v})};f.createPolygon=function(q,n,k){if(q){var g=a.createInstance(m.accessorConstructor);g.setSpatialReference(n);n=a.unquantizeFunction("esriGeometryPolygon",k);g.setupLazyUnquantization(n,q)}return g};B.setObject("tasks.FeatureSet",f,c);return f})},"esri/graphic":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./domUtils ./lang ./InfoTemplate ./geometry/jsonUtils ./symbols/jsonUtils".split(" "),function(f,B,l,d,c,u,t,e,r){function m(){}
f=f(null,{declaredClass:"esri.Graphic",constructor:function(a,h,q,n){this._construct();a&&!a.declaredClass?(this.geometry=a.geometry?e.fromJson(a.geometry):null,this.symbol=a.symbol?r.fromJson(a.symbol):null,this.attributes=a.attributes||null,this.infoTemplate=a.infoTemplate?new t(a.infoTemplate):null):(this.geometry=a,this.symbol=h,this.attributes=q,this.infoTemplate=n)},_geomVersion:0,_resolution:null,_shape:null,_bgShape:null,_dataAttrs:null,_layer:null,_sourceLayer:null,_graphicsLayer:null,_parentGraphic:null,
_suspended:!1,size:null,visible:!0,_aggregationSourceLayer:null,_aggregationInfo:null,_computedAttributes:null,_computedVersion:null,_computedGeomVersion:null,_isSnapTarget:!0,getParentGraphic:function(){return this._parentGraphic},setParentGraphic:function(a){this._parentGraphic=a},setSize:function(a){this.size=a;return this},getAggregationSourceLayer:function(){return this._aggregationSourceLayer},setAggregationSourceLayer:function(a){this._aggregationSourceLayer=a;return this},isAggregate:function(){return!!this._aggregationInfo},
getAggregationInfo:function(){return this._aggregationInfo},setAggregationInfo:function(a){this._aggregationInfo=a;return this},getChildGraphics:function(){var a=this.getAggregationSourceLayer();return a?a.getChildGraphics(this):[]},getDojoShape:function(){return this._shape},getShapes:function(){var a=[];this._shape&&a.push(this._shape);this._bgShape&&a.push(this._bgShape);return a},getNode:function(){var a=this._shape&&this._shape.getNode();return a&&a.nodeType?a:null},getNodes:function(){var a=
this.getShapes(),h,q,n=a.length,k=[];for(q=0;q<n;q++)(h=a[q]&&a[q].getNode())&&h.nodeType&&k.push(h);return k},getLayer:function(){return this._layer},getSourceLayer:function(){return this._sourceLayer||this._layer},clone:function(){var a=new this.constructor(this.toJson());a.visible=this.visible;a._layer=this._layer;a._sourceLayer=this._sourceLayer;a._aggregationSourceLayer=this._aggregationSourceLayer;a._aggregationInfo=this._aggregationInfo;a._resolution=this._resolution;return a},draw:function(){var a=
this._graphicsLayer;a&&a._draw(this,!0);return this},setGeometry:function(a){this.geometry=a;this._geomVersion++;var h=this._graphicsLayer;h&&(h._updateExtent(this),this.draw(),a&&"polyline"===a.type&&h._updateSVGMarkers());return this},setResolution:function(a){this._resolution=a;return this},getResolution:function(){return this._resolution},setSymbol:function(a,h){var q=this._graphicsLayer,n=this._shape;this.symbol=a;q&&(h&&n&&q._removeShape(this),this.draw());return this},setAttributes:function(a){this.attributes=
a;this.clearCache();return this},setInfoTemplate:function(a){this.infoTemplate=a;return this},getInfoTemplate:function(){return this._getEffInfoTemplate()},_getEffInfoTemplate:function(){var a=this.getLayer();return this.infoTemplate||a&&a.infoTemplate},getTitle:function(){var a=this.getInfoTemplate(),h=a&&a.title;if(B.isFunction(h))h=h.call(a,this);else if(B.isString(h)){var q=(a=this.getLayer())&&a._getDateOpts;h=u.substitute(this.attributes,h,{first:!0,dateFormat:q&&q.call(a)})}return h},getContent:function(){var a=
this.getInfoTemplate(),h=a&&a.content;if(B.isFunction(h))h=h.call(a,this);else if(B.isString(h)){var q=(a=this.getLayer())&&a._getDateOpts;h=u.substitute(this.attributes,h,{dateFormat:q&&q.call(a)})}return h},attr:function(a,h){null==h||this._dataAttrs||(this._dataAttrs={});this._dataAttrs&&(this._dataAttrs[a]=h,this._setDataAttr(a,h));return this},_isSuspended:function(){return this._suspended},_suspend:function(){this._suspended=!0;this.draw()},_resume:function(){this._suspended=!1;this.draw()},
show:function(){this.visible=!0;this.attr("data-hidden");var a;if(this.getShapes().length){var h=this.getNodes();var q=h.length;for(a=0;a<q;a++)c.show(h[a])}else this.draw();(h=this._graphicsLayer)&&h._graphicVisibilityChanged(this);return this},hide:function(){this.visible=!1;this.attr("data-hidden","");var a=this._graphicsLayer,h,q;if(a){if("canvas-2d"===a.surfaceType)a._removeShape(this);else{var n=this.getNodes();if(q=n.length)for(h=0;h<q;h++)c.hide(n[h])}a._graphicVisibilityChanged(this)}return this},
toJson:function(){var a={};this.geometry&&(a.geometry=this.geometry.toJson());this.attributes&&(a.attributes=B.mixin({},this.attributes));this.symbol&&(a.symbol=this.symbol.toJson());this.infoTemplate&&(a.infoTemplate=this.infoTemplate.toJson());return a},_setDataAttr:function(a,h){var q=this.getNodes(),n,k=q.length;for(n=0;n<k;n++)this._setDOMDataAttr(q[n],a,h)},_setDOMDataAttr:function(a,h,q){null==q?a.removeAttribute(h):a.setAttribute(h,q)},_applyDataAttrs:function(){var a=this._dataAttrs;if(a){var h=
this.getNodes(),q,n=h.length;for(q=0;q<n;q++)for(var k in a)this._setDOMDataAttr(h[q],k,a[k])}},_getViewInfo:function(a){return(a=(a=a||this.getLayer())&&a.getMap())&&a.getViewInfo()},evaluateExpression:function(a,h){return this._getDataValue(a._attributeDef,a._attributeCache,null,null,a,h)},_getDataValue:function(a,h,q,n,k,g){var b=h.id,x=this.attributes,v=a.field,y=h.isNumeric,D=null;if(b){var E=this._computedAttributes,C=this._computedVersion,z=this._computedGeomVersion;n=this._getViewInfo(n);
var w=!(!k||!k.async),A=g&&g.skipCache||w,G=!g||!1!==g.strictReturnType,F=h.dependsOnView||h.isJSFunc,H=h.dependsOnGeometry;E||(E=this._computedAttributes={});F&&!C&&(C=this._computedVersion={});H&&!z&&(z=this._computedGeomVersion={});var J=F&&C[b]!==n.version||H&&z[b]!==this._geomVersion;D=E[b];if(void 0===D||J||A)D=null,h.hasExpr?D=k?k.evaluate(g&&g.context):q.executeFunction(h.compiledFunc,q.createExecContext(this,n)):h.isJSFunc?D=v(this,a):x&&(D=x[v],y&&this._isValidNumber(D)&&(h=a.normalizationType||
"field",q=D,D=null,k=a.normalizationTotal,a=x[a.normalizationField],"log"===h&&0!==q?D=Math.log(q)*Math.LOG10E:"percent-of-total"===h&&this._isValidNumber(k)&&0!==k?D=q/k*100:"field"===h&&this._isValidNumber(a)&&0!==a&&(D=q/a))),G&&(w?y&&(this._construct(),D=D.then(this._sanitizeNumericValue)):D=this._sanitizeValue(D,y)),A||(E[b]=D,F&&(C[b]=n.version),H&&(z[b]=this._geomVersion))}else x&&(D=this._sanitizeValue(x[v],y));return D},_sanitizeValue:function(a,h){h&&!this._isValidNumber(a)&&(a=null);return a},
_sanitizeNumericValue:function(a){return this._sanitizeValue(a,!0)},_construct:function(){this._constructed||(this._sanitizeNumericValue=B.hitch(this,this._sanitizeNumericValue),this._constructed=!0)},_isValidNumber:function(a){return"number"===typeof a&&!isNaN(a)&&Infinity!==a&&-Infinity!==a},clearCache:function(a){if(null!=a){var h=this._computedAttributes,q=this._computedVersion,n=this._computedGeomVersion;h&&(h[a]=void 0);q&&(q[a]=void 0);n&&(n[a]=void 0)}else this._computedAttributes=this._computedVersion=
this._computedGeomVersion=null}});f.prototype.getShape=f.prototype.getDojoShape;m.prototype=f.prototype;f.simpleConstructor=m;return d.Graphic=f})},"esri/InfoTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(f,B,l,d,c){f=f(null,{declaredClass:"esri.InfoTemplate",constructor:function(u,t){u&&B.isObject(u)&&!B.isFunction(u)?B.mixin(this,u):(this.title=u||"${*}",this.content=t||"${*}")},setTitle:function(u){this.title=u;return this},setContent:function(u){this.content=
u;return this},toJson:function(){return c.fixJson({title:this.title,content:this.content})}});return d.InfoTemplate=f})},"esri/symbols/jsonUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has ../kernel ./SimpleMarkerSymbol ./PictureMarkerSymbol ./SimpleLineSymbol ./CartographicLineSymbol ./SimpleFillSymbol ./PictureFillSymbol ./TextSymbol".split(" "),function(f,B,l,d,c,u,t,e,r,m,a){var h={createDefaultSymbol:function(q){switch(q){case "esriGeometryPoint":case "esriGeometryMultipoint":var n=
h.createDefaultMarkerSymbol();break;case "esriGeometryPolyline":n=h.createDefaultLineSymbol();break;case "esriGeometryPolygon":case "esriGeometryEnvelope":case "esriGeometryMultiPatch":n=h.createDefaultFillSymbol()}return n},createDefaultMarkerSymbol:function(){return new c},createDefaultLineSymbol:function(){return new t},createDefaultFillSymbol:function(){return new r},getFirstSupportedSymbol:function(q){var n;B.some(q,function(k){k&&-1<h.supportedSymbolTypes.indexOf(k.type)&&(n=k);return!!n});
return n},isPointSymbol:function(q){return q?-1<h.supportedPointSymbolTypes.indexOf(q.type):!1},supportedPointSymbolTypes:["esriSMS","esriPMS","esriTS"],supportedSymbolTypes:"esriSMS esriPMS esriTS esriSLS esriCLS esriSFS esriPFS".split(" "),fromJson:function(q,n){var k=null;switch(q.type){case "esriSMS":k=new c(q);break;case "esriPMS":k=new u(q);break;case "esriTS":k=new a(q);break;case "esriSLS":k=void 0!==q.cap?new e(q):new t(q);break;case "esriCLS":k=new e(q);break;case "esriSFS":k=new r(q);break;
case "esriPFS":k=new m(q);break;default:k=(q=n&&n.geometryType)?h.createDefaultSymbol(q):null}return k},getShapeDescriptors:function(q){return q&&q.getShapeDescriptors?q.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null}}};f.mixin(f.getObject("symbol",!0,d),h);return h})},"esri/symbols/SimpleMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(f,B,l,d,c,u,
t,e,r){var m={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_TRIANGLE:"triangle",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"},a={style:m.STYLE_CIRCLE,color:[255,255,255,.25],size:12,angle:0,xoffset:0,yoffset:0};f=f(e,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",triangle:"esriSMSTriangle",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},
constructor:function(h,q,n,k){h?B.isString(h)?(this.style=h,q&&(this.size=q),n&&(this.outline=n),k&&(this.color=k)):(this.style=t.valueOf(this._styles,this.style),h.outline&&(this.outline=new r(h.outline))):(B.mixin(this,a),this.size=c.pt2px(this.size),this.outline=new r(this.outline),this.color=new l(this.color));this.style||(this.style=m.STYLE_CIRCLE)},setStyle:function(h){this.style=h;return this},setPath:function(h){this.path=h;this.setStyle(m.STYLE_PATH);return this},setOutline:function(h){this.outline=
h;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return this.color},_setDim:function(h,q,n){this._targetWidth=h;this._targetHeight=q;this._spikeSize=n},getShapeDescriptors:function(){var h,q=this.style,n=(this.size||c.pt2px(a.size))/2,k=0-n,g=0+n,b=0-n,x=0+n;switch(q){case m.STYLE_CIRCLE:var v={type:"circle",cx:0,cy:0,r:n};var y=this.getFill();if(h=this.getStroke())h.style=h.style||"Solid";break;case m.STYLE_CROSS:v={type:"path",path:"M "+k+",0 L "+
g+",0 M 0,"+b+" L 0,"+x+" E"};y=null;h=this.getStroke();break;case m.STYLE_DIAMOND:v={type:"path",path:"M "+k+",0 L 0,"+b+" L "+g+",0 L 0,"+x+" L "+k+",0 Z"};y=this.getFill();h=this.getStroke();break;case m.STYLE_SQUARE:v={type:"path",path:"M "+k+","+x+" L "+k+","+b+" L "+g+","+b+" L "+g+","+x+" L "+k+","+x+" Z"};y=this.getFill();h=this.getStroke();break;case m.STYLE_TRIANGLE:v={type:"path",path:"M "+k+","+x+" L 0,"+b+" L "+g+","+x+" L "+k+","+x+" Z"};y=this.getFill();h=this.getStroke();break;case m.STYLE_X:v=
{type:"path",path:"M "+k+","+x+" L "+g+","+b+" M "+k+","+b+" L "+g+","+x+" E"};y=null;h=this.getStroke();break;case m.STYLE_PATH:v={type:"path",path:this.path||""},y=this.getFill(),h=this.getStroke()}return{defaultShape:v,fill:y,stroke:h}},toJson:function(){var h=this.style,q=this.outline,n=B.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[h]||"esriSMSCircle"});q&&(n.outline=q.toJson());"x"===h||"cross"===h?delete n.color:"target"===h&&(n.style="esriSMSSquare",delete n.color,
0<this._targetHeight&&0<this._targetWidth&&(n.size=c.px2pt(Math.max(this._targetHeight,this._targetWidth))));n.path=this.path;return t.fixJson(n)}});B.mixin(f,m);f.defaultProps=a;B.setObject("symbol.SimpleMarkerSymbol",f,u);u.symbol.defaultSimpleMarkerSymbol=a;return f})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(f,B,l,d,c,u,t,e,r){var m=
B.getObject("dojox.gfx",!0),a=m._base={};m._hasClass=function(b,x){return(b=b.getAttribute("className"))&&0<=(" "+b+" ").indexOf(" "+x+" ")};m._addClass=function(b,x){var v=b.getAttribute("className")||"";(!v||0>(" "+v+" ").indexOf(" "+x+" "))&&b.setAttribute("className",v+(v?" ":"")+x)};m._removeClass=function(b,x){var v=b.getAttribute("className");v&&b.setAttribute("className",v.replace(new RegExp("(^|\\s+)"+x+"(\\s+|$)"),"$1$2"))};a._getFontMeasurements=function(){var b={"1em":0,"1ex":0,"100%":0,
"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},x;if(d("ie")){var v=c.doc.documentElement.style.fontSize||"";v||(c.doc.documentElement.style.fontSize="100%")}var y=e.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},c.body());for(x in b)y.style.fontSize=x,b[x]=16*Math.round(12*y.offsetHeight/16)/12/1E3;d("ie")&&(c.doc.documentElement.style.fontSize=
v);c.body().removeChild(y);return b};var h=null;a._getCachedFontMeasurements=function(b){if(b||!h)h=a._getFontMeasurements();return h};var q=null,n={};a._getTextBox=function(b,x,v){var y=arguments.length,D;q||(q=e.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},c.body()));var E=q;E.className="";var C=E.style;C.borderWidth="0";C.margin="0";C.padding="0";C.outline="0";if(1<y&&x)for(D in x)D in n||(C[D]=x[D]);2<y&&v&&(E.className=v);E.innerHTML=b;E.getBoundingClientRect?
(C=E.getBoundingClientRect(),C={l:C.left,t:C.top,w:C.width||C.right-C.left,h:C.height||C.bottom-C.top}):C=r.getMarginBox(E);E.innerHTML="";return C};a._computeTextLocation=function(b,x,v,y){var D={};switch(b.align){case "end":D.x=b.x-x;break;case "middle":D.x=b.x-x/2;break;default:D.x=b.x}D.y=b.y-v*(y?.75:1);return D};a._computeTextBoundingBox=function(b){if(!m._base._isRendered(b))return{x:0,y:0,width:0,height:0};var x=b.getShape();var v=b.getFont()||m.defaultFont;b=b.getTextWidth();v=m.normalizedLength(v.size);
x=a._computeTextLocation(x,b,v,!0);return{x:x.x,y:x.y,width:b,height:v}};a._isRendered=function(b){for(b=b.parent;b&&b.getParent;)b=b.parent;return null!==b};var k=0;a._getUniqueId=function(){do var b=f._scopeName+"xUnique"+ ++k;while(t.byId(b));return b};var g=d("pointer-events")?"touchAction":d("MSPointer")?"msTouchAction":null;a._fixMsTouchAction=g?function(b){b.rawNode.style[g]="none"}:function(){};B.mixin(m,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",
x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,
cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var b={};return function(x){var v=b[x];if(v)return new v;v=b[x]=
function(){};v.prototype=m["default"+x];return new v}}(),normalizeColor:function(b){return b instanceof l?b:new l(b)},normalizeParameters:function(b,x){var v;if(x){var y={};for(v in b)v in x&&!(v in y)&&(b[v]=x[v])}return b},makeParameters:function(b,x){var v=null;if(!x)return B.delegate(b);var y={};for(v in b)v in y||(y[v]=B.clone(v in x?x[v]:b[v]));return y},formatNumber:function(b,x){var v=b.toString();if(0<=v.indexOf("e"))v=b.toFixed(4);else{var y=v.indexOf(".");0<=y&&5<v.length-y&&(v=b.toFixed(4))}return 0>
b?v:x?" "+v:v},makeFontString:function(b){return b.style+" "+b.variant+" "+b.weight+" "+b.size+" "+b.family},splitFontString:function(b){var x=m.getDefault("Font");b=b.split(/\s+/);if(!(5>b.length)){x.style=b[0];x.variant=b[1];x.weight=b[2];var v=b[3].indexOf("/");x.size=0>v?b[3]:b[3].substring(0,v);var y=4;0>v&&("/"==b[4]?y=6:"/"==b[4].charAt(0)&&(y=5));y<b.length&&(x.family=b.slice(y).join(" "))}return x},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return m._base._getCachedFontMeasurements()["12pt"]/
12},pt2px:function(b){return b*m.px_in_pt()},px2pt:function(b){return b/m.px_in_pt()},normalizedLength:function(b){if(0===b.length)return 0;if(2<b.length){var x=m.px_in_pt(),v=parseFloat(b);switch(b.slice(-2)){case "px":return v;case "pt":return v*x;case "in":return 72*v*x;case "pc":return 12*v*x;case "mm":return v*m.mm_in_pt*x;case "cm":return v*m.cm_in_pt*x}}return parseFloat(b)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,
equalSources:function(b,x){return b&&x&&b===x},switchTo:function(b){var x="string"==typeof b?m[b]:b;x&&(u.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath Surface createSurface fixTarget".split(" "),function(v){m[v]=x[v]}),"string"==typeof b?m.renderer=b:u.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(v){return m.renderer=m[v]&&m[v].Surface===m.Surface?v:null}))}});return m})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],
function(f,B,l){B.switchTo(l);return B})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(f,B,l,d,c){var u=null;l.add("vml",function(t,e,r){r.innerHTML='\x3cv:shape adj\x3d"1"/\x3e';t="adj"in r.firstChild;r.innerHTML="";return t});return{load:function(t,e,r){function m(){e(["dojox/gfx/"+a],function(n){f.renderer=a;u=n;r(n)})}if(u&&"force"!=t)r(u);else{var a=c.forceGfxRenderer;t=!a&&(B.isString(c.gfxRenderer)?
c.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var h,q;!a&&t.length;)switch(t.shift()){case "svg":"SVGAngle"in d.global&&(a="svg");break;case "vml":l("vml")&&(a="vml");break;case "silverlight":try{l("ie")?(h=new ActiveXObject("AgControl.AgControl"),h.IsVersionSupported("1.0"))&&(q=!0):navigator.plugins["Silverlight Plug-In"]&&(q=!0)}catch(n){q=!1}finally{h=null}q&&(a="silverlight");break;case "canvas":d.global.CanvasRenderingContext2D&&(a="canvas")}"canvas"===a&&!1!==c.canvasEvents&&(a=
"canvasWithEvents");"svg"==a&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(m):m()}}}})},"dojox/gfx/svg":function(){define("dojo/_base/lang dojo/_base/sniff dojo/_base/window dojo/dom dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/dom-attr dojo/_base/Color ./_base ./shape ./path".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h){function q(z,w){return l.doc.createElementNS?l.doc.createElementNS(z,w):l.doc.createElement(w)}function n(z,w,A,G){return z.setAttributeNS?z.setAttributeNS(w,
A,G):z.setAttribute(A,G)}function k(z){return g.useSvgWeb?l.doc.createTextNode(z,!0):l.doc.createTextNode(z)}var g=m.svg={};g.useSvgWeb="undefined"!=typeof window.svgweb;var b=navigator.userAgent,x=B("ios"),v=B("android"),y=B("chrome")||v&&4<=v?"auto":"optimizeLegibility";g.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};g.getRef=function(z){return z&&"none"!=z?z.match(/^url\(#.+\)$/)?d.byId(z.slice(5,-1)):z.match(/^#dojoUnique\d+$/)?d.byId(z.slice(1)):null:null};g.dasharray=
{solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var D=0;g.Shape=c("dojox.gfx.svg.Shape",a.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var z=this.rawNode.getAttribute("fill");(z=g.getRef(z))&&z.parentNode.removeChild(z)}this.clip&&(z=this.rawNode.getAttribute("clip-path"))&&(z=d.byId(z.match(/gfx_clip[\d]+/)[0]))&&z.parentNode.removeChild(z);
a.Shape.prototype.destroy.apply(this,arguments)},setFill:function(z){if(!z)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var w=function(G){this.setAttribute(G,A[G].toFixed(8))};if("object"==typeof z&&"type"in z){switch(z.type){case "linear":var A=m.makeParameters(m.defaultLinearGradient,z);z=this._setFillObject(A,"linearGradient");u.forEach(["x1","y1","x2","y2"],w,z);break;case "radial":A=m.makeParameters(m.defaultRadialGradient,
z);z=this._setFillObject(A,"radialGradient");u.forEach(["cx","cy","r"],w,z);break;case "pattern":A=m.makeParameters(m.defaultPattern,z),z=this._setFillObject(A,"pattern"),u.forEach(["x","y","width","height"],w,z)}this.fillStyle=A;return this}this.fillStyle=A=m.normalizeColor(z);this.rawNode.setAttribute("fill",A.toCss());this.rawNode.setAttribute("fill-opacity",A.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(z){var w=this.rawNode;if(!z)return this.strokeStyle=
null,w.setAttribute("stroke","none"),w.setAttribute("stroke-opacity",0),this;if("string"==typeof z||f.isArray(z)||z instanceof r)z={color:z};z=this.strokeStyle=m.makeParameters(m.defaultStroke,z);z.color=m.normalizeColor(z.color);if(z){var A=0>z.width?0:z.width;w.setAttribute("stroke",z.color.toCss());w.setAttribute("stroke-opacity",z.color.a);w.setAttribute("stroke-width",A);w.setAttribute("stroke-linecap",z.cap);"number"==typeof z.join?(w.setAttribute("stroke-linejoin","miter"),w.setAttribute("stroke-miterlimit",
z.join)):w.setAttribute("stroke-linejoin",z.join);var G=z.style.toLowerCase();G in g.dasharray&&(G=g.dasharray[G]);if(G instanceof Array){G=f._toArray(G);var F;for(F=0;F<G.length;++F)G[F]*=A;if("butt"!=z.cap){for(F=0;F<G.length;F+=2)G[F]-=A,1>G[F]&&(G[F]=1);for(F=1;F<G.length;F+=2)G[F]+=A}G=G.join(",")}w.setAttribute("stroke-dasharray",G);w.setAttribute("dojoGfxStrokeStyle",z.style)}return this},_getParentSurface:function(){for(var z=this.parent;z&&!(z instanceof m.Surface);z=z.parent);return z},
_setFillObject:function(z,w){var A=g.xmlns.svg;this.fillStyle=z;var G=this._getParentSurface().defNode,F=this.rawNode.getAttribute("fill");if(F=g.getRef(F))if(F.tagName.toLowerCase()!=w.toLowerCase()){var H=F.id;F.parentNode.removeChild(F);F=q(A,w);F.setAttribute("id",H);G.appendChild(F)}else for(;F.childNodes.length;)F.removeChild(F.lastChild);else F=q(A,w),F.setAttribute("id",m._base._getUniqueId()),G.appendChild(F);if("pattern"==w)F.setAttribute("patternUnits","userSpaceOnUse"),A=q(A,"image"),
A.setAttribute("x",0),A.setAttribute("y",0),A.setAttribute("width",(0>z.width?0:z.width).toFixed(8)),A.setAttribute("height",(0>z.height?0:z.height).toFixed(8)),n(A,g.xmlns.xlink,"xlink:href",z.src),F.appendChild(A);else for(F.setAttribute("gradientUnits","userSpaceOnUse"),w=0;w<z.colors.length;++w){G=z.colors[w];H=q(A,"stop");var J=G.color=m.normalizeColor(G.color);H.setAttribute("offset",G.offset.toFixed(8));H.setAttribute("stop-color",J.toCss());H.setAttribute("stop-opacity",J.a);F.appendChild(H)}this.rawNode.setAttribute("fill",
"url(#"+F.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return F},_applyTransform:function(){if(this.matrix){var z=this.matrix;this.rawNode.setAttribute("transform","matrix("+z.xx.toFixed(8)+","+z.yx.toFixed(8)+","+z.xy.toFixed(8)+","+z.yy.toFixed(8)+","+z.dx.toFixed(8)+","+z.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(z){z=this.rawNode=z;"image"!=this.shape.type&&z.setAttribute("fill",
"none");z.setAttribute("fill-opacity",0);z.setAttribute("stroke","none");z.setAttribute("stroke-opacity",0);z.setAttribute("stroke-width",1);z.setAttribute("stroke-linecap","butt");z.setAttribute("stroke-linejoin","miter");z.setAttribute("stroke-miterlimit",4);z.__gfxObject__=this},setShape:function(z){this.shape=m.makeParameters(this.shape,z);for(var w in this.shape)if("type"!=w){z=this.shape[w];if("width"===w||"height"===w)z=0>z?0:z;this.rawNode.setAttribute(w,z)}this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);
return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this},setClip:function(z){this.inherited(arguments);var w=z?"width"in z?"rect":"cx"in z?"ellipse":"points"in z?"polyline":"d"in z?"path":null:null;if(z&&!w)return this;"polyline"===w&&(z=f.clone(z),z.points=z.points.join(","));var A,G=e.get(this.rawNode,"clip-path");G&&(A=d.byId(G.match(/gfx_clip[\d]+/)[0]))&&A.removeChild(A.childNodes[0]);z?(A?(w=q(g.xmlns.svg,w),A.appendChild(w)):
(G="gfx_clip"+ ++D,this.rawNode.setAttribute("clip-path","url(#"+G+")"),A=q(g.xmlns.svg,"clipPath"),w=q(g.xmlns.svg,w),A.appendChild(w),this.rawNode.parentNode.insertBefore(A,this.rawNode),e.set(A,"id",G)),e.set(w,z)):(this.rawNode.removeAttribute("clip-path"),A&&A.parentNode.removeChild(A));return this},_removeClipNode:function(){var z,w=e.get(this.rawNode,"clip-path");w&&(z=d.byId(w.match(/gfx_clip[\d]+/)[0]))&&z.parentNode.removeChild(z);return z}});g.Group=c("dojox.gfx.svg.Group",g.Shape,{constructor:function(){a.Container._init.call(this)},
setRawNode:function(z){this.rawNode=z;this.rawNode.__gfxObject__=this},destroy:function(){this.clear(!0);g.Shape.prototype.destroy.apply(this,arguments)}});g.Group.nodeType="g";g.Rect=c("dojox.gfx.svg.Rect",[g.Shape,a.Rect],{setShape:function(z){this.shape=m.makeParameters(this.shape,z);this.bbox=null;for(var w in this.shape)if("type"!=w&&"r"!=w){z=this.shape[w];if("width"===w||"height"===w)z=0>z?0:z;this.rawNode.setAttribute(w,z)}null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),
this.rawNode.setAttribute("rx",this.shape.r));return this}});g.Rect.nodeType="rect";g.Ellipse=c("dojox.gfx.svg.Ellipse",[g.Shape,a.Ellipse],{});g.Ellipse.nodeType="ellipse";g.Circle=c("dojox.gfx.svg.Circle",[g.Shape,a.Circle],{});g.Circle.nodeType="circle";g.Line=c("dojox.gfx.svg.Line",[g.Shape,a.Line],{});g.Line.nodeType="line";g.Polyline=c("dojox.gfx.svg.Polyline",[g.Shape,a.Polyline],{setShape:function(z,w){z&&z instanceof Array?(this.shape=m.makeParameters(this.shape,{points:z}),w&&this.shape.points.length&&
this.shape.points.push(this.shape.points[0])):this.shape=m.makeParameters(this.shape,z);this.bbox=null;this._normalizePoints();z=[];w=this.shape.points;for(var A=0;A<w.length;++A)z.push(w[A].x.toFixed(8),w[A].y.toFixed(8));this.rawNode.setAttribute("points",z.join(" "));return this}});g.Polyline.nodeType="polyline";g.Image=c("dojox.gfx.svg.Image",[g.Shape,a.Image],{setShape:function(z){this.shape=m.makeParameters(this.shape,z);this.bbox=null;z=this.rawNode;for(var w in this.shape)if("type"!=w&&"src"!=
w){var A=this.shape[w];if("width"===w||"height"===w)A=0>A?0:A;z.setAttribute(w,A)}z.setAttribute("preserveAspectRatio","none");n(z,g.xmlns.xlink,"xlink:href",this.shape.src);z.__gfxObject__=this;return this}});g.Image.nodeType="image";g.Text=c("dojox.gfx.svg.Text",[g.Shape,a.Text],{setShape:function(z){this.shape=m.makeParameters(this.shape,z);this.bbox=null;z=this.rawNode;var w=this.shape;z.setAttribute("x",w.x);z.setAttribute("y",w.y);z.setAttribute("text-anchor",w.align);z.setAttribute("text-decoration",
w.decoration);z.setAttribute("rotate",w.rotated?90:0);z.setAttribute("kerning",w.kerning?"auto":0);z.setAttribute("text-rendering",y);z.firstChild?z.firstChild.nodeValue=w.text:z.appendChild(k(w.text));return this},getTextWidth:function(){var z=this.rawNode,w=z.parentNode;z=z.cloneNode(!0);z.style.visibility="hidden";var A=0,G=z.firstChild.nodeValue;w.appendChild(z);if(""!=G)for(;!A;)A=z.getBBox?parseInt(z.getBBox().width):68;w.removeChild(z);return A},getBoundingBox:function(){var z=null;if(this.getShape().text)try{z=
this.rawNode.getBBox()}catch(w){z={x:0,y:0,width:0,height:0}}return z}});g.Text.nodeType="text";g.Path=c("dojox.gfx.svg.Path",[g.Shape,h.Path],{_updateWithSegment:function(z){this.inherited(arguments);"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(z){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});g.Path.nodeType="path";g.TextPath=c("dojox.gfx.svg.TextPath",
[g.Shape,h.TextPath],{_updateWithSegment:function(z){this.inherited(arguments);this._setTextPath()},setShape:function(z){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if("string"==typeof this.shape.path){var z=this.rawNode;if(!z.firstChild){var w=q(g.xmlns.svg,"textPath"),A=k("");w.appendChild(A);z.appendChild(w)}w=(w=z.firstChild.getAttributeNS(g.xmlns.xlink,"href"))&&g.getRef(w);if(!w&&(A=this._getParentSurface())){A=A.defNode;w=q(g.xmlns.svg,"path");var G=m._base._getUniqueId();
w.setAttribute("id",G);A.appendChild(w);n(z.firstChild,g.xmlns.xlink,"xlink:href","#"+G)}w&&w.setAttribute("d",this.shape.path)}},_setText:function(){var z=this.rawNode;if(!z.firstChild){var w=q(g.xmlns.svg,"textPath"),A=k("");w.appendChild(A);z.appendChild(w)}z=z.firstChild;w=this.text;z.setAttribute("alignment-baseline","middle");switch(w.align){case "middle":z.setAttribute("text-anchor","middle");z.setAttribute("startOffset","50%");break;case "end":z.setAttribute("text-anchor","end");z.setAttribute("startOffset",
"100%");break;default:z.setAttribute("text-anchor","start"),z.setAttribute("startOffset","0%")}z.setAttribute("baseline-shift","0.5ex");z.setAttribute("text-decoration",w.decoration);z.setAttribute("rotate",w.rotated?90:0);z.setAttribute("kerning",w.kerning?"auto":0);z.firstChild.data=w.text}});g.TextPath.nodeType="text";var E=534<function(){var z=/WebKit\/(\d*)/.exec(b);return z?z[1]:0}();g.Surface=c("dojox.gfx.svg.Surface",a.Surface,{constructor:function(){a.Container._init.call(this)},destroy:function(){a.Container.clear.call(this,
!0);this.defNode=null;this.inherited(arguments)},setDimensions:function(z,w){if(!this.rawNode)return this;z=0>z?0:z;w=0>w?0:w;this.rawNode.setAttribute("width",z);this.rawNode.setAttribute("height",w);E&&(this.rawNode.style.width=z,this.rawNode.style.height=w);return this},getDimensions:function(){return this.rawNode?{width:m.normalizedLength(this.rawNode.getAttribute("width")),height:m.normalizedLength(this.rawNode.getAttribute("height"))}:null}});g.createSurface=function(z,w,A){var G=new g.Surface;
G.rawNode=q(g.xmlns.svg,"svg");G.rawNode.setAttribute("overflow","hidden");w&&G.rawNode.setAttribute("width",0>w?0:w);A&&G.rawNode.setAttribute("height",0>A?0:A);w=q(g.xmlns.svg,"defs");G.rawNode.appendChild(w);G.defNode=w;G._parent=d.byId(z);G._parent.appendChild(G.rawNode);m._base._fixMsTouchAction(G);return G};B={_setFont:function(){var z=this.fontStyle;this.rawNode.setAttribute("font-style",z.style);this.rawNode.setAttribute("font-variant",z.variant);this.rawNode.setAttribute("font-weight",z.weight);
this.rawNode.setAttribute("font-size",z.size);this.rawNode.setAttribute("font-family",z.family)}};var C=a.Container;c=g.Container={openBatch:function(){if(!this._batch){var z=g.useSvgWeb?l.doc.createDocumentFragment(!0):l.doc.createDocumentFragment();this.fragment=z}++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),delete this.fragment);return this},add:function(z){this!=z.getParent()&&(this.fragment?
this.fragment.appendChild(z.rawNode):this.rawNode.appendChild(z.rawNode),C.add.apply(this,arguments),z.setClip(z.clip));return this},remove:function(z,w){this==z.getParent()&&(this.rawNode==z.rawNode.parentNode&&this.rawNode.removeChild(z.rawNode),this.fragment&&this.fragment==z.rawNode.parentNode&&this.fragment.removeChild(z.rawNode),z._removeClipNode(),C.remove.apply(this,arguments));return this},clear:function(){for(var z=this.rawNode;z.lastChild;)z.removeChild(z.lastChild);var w=this.defNode;
if(w){for(;w.lastChild;)w.removeChild(w.lastChild);z.appendChild(w)}return C.clear.apply(this,arguments)},getBoundingBox:C.getBoundingBox,_moveChildToFront:C._moveChildToFront,_moveChildToBack:C._moveChildToBack};h=g.Creator={createObject:function(z,w){if(!this.rawNode)return null;var A=new z;z=q(g.xmlns.svg,z.nodeType);A.setRawNode(z);A.setShape(w);this.add(A);return A}};f.extend(g.Text,B);f.extend(g.TextPath,B);f.extend(g.Group,c);f.extend(g.Group,a.Creator);f.extend(g.Group,h);f.extend(g.Surface,
c);f.extend(g.Surface,a.Creator);f.extend(g.Surface,h);g.fixTarget=function(z,w){z.gfxTarget||(z.gfxTarget=x&&z.target.wholeText?z.target.parentElement.__gfxObject__:z.target.__gfxObject__);return!0};g.useSvgWeb&&(g.createSurface=function(z,w,A){var G=new g.Surface;w=0>w?0:w;A=0>A?0:A;if(!w||!A){var F=t.position(z);w=w||F.w;A=A||F.h}z=d.byId(z);F=z.id?z.id+"_svgweb":m._base._getUniqueId();var H=q(g.xmlns.svg,"svg");H.id=F;H.setAttribute("width",w);H.setAttribute("height",A);svgweb.appendChild(H,z);
H.addEventListener("SVGLoad",function(){G.rawNode=this;G.isLoaded=!0;var J=q(g.xmlns.svg,"defs");G.rawNode.appendChild(J);G.defNode=J;if(G.onLoad)G.onLoad(G)},!1);G.isLoaded=!1;return G},g.Surface.extend({destroy:function(){var z=this.rawNode;svgweb.removeChild(z,z.parentNode)}}),B={connect:function(z,w,A){"on"===z.substring(0,2)&&(z=z.substring(2));A=2==arguments.length?w:f.hitch(w,A);this.getEventSource().addEventListener(z,A,!1);return[this,z,A]},disconnect:function(z){this.getEventSource().removeEventListener(z[1],
z[2],!1);delete z[0]}},f.extend(g.Shape,B),f.extend(g.Surface,B));return g})},"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(f,B,l,d,c,u,t,e,r,m){function a(q,n){for(var k=q.length-1;n<k;)q[n]=q[++n];q.length=k}var h=f.shape={};h.Shape=l("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=
this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(c("gfxRegistry")){var q=h.register(this);this.getUID=function(){return q}}},destroy:function(){c("gfxRegistry")&&h.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},
getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var q=this.getBoundingBox();if(!q)return null;var n=this._getRealMatrix();return[m.multiplyPoint(n,q.x,q.y),m.multiplyPoint(n,q.x+q.width,q.y),m.multiplyPoint(n,q.x+q.width,q.y+q.height),m.multiplyPoint(n,q.x,q.y+q.height)]},getEventSource:function(){return this.rawNode},setClip:function(q){this.clip=q},getClip:function(){return this.clip},setShape:function(q){this.shape=f.makeParameters(this.shape,q);this.bbox=null;
return this},setFill:function(q){if(!q)return this.fillStyle=null,this;var n=null;if("object"==typeof q&&"type"in q)switch(q.type){case "linear":n=f.makeParameters(f.defaultLinearGradient,q);break;case "radial":n=f.makeParameters(f.defaultRadialGradient,q);break;case "pattern":n=f.makeParameters(f.defaultPattern,q)}else n=f.normalizeColor(q);this.fillStyle=n;return this},setStroke:function(q){if(!q)return this.strokeStyle=null,this;if("string"==typeof q||B.isArray(q)||q instanceof r)q={color:q};q=
this.strokeStyle=f.makeParameters(f.defaultStroke,q);q.color=f.normalizeColor(q.color);return this},setTransform:function(q){this.matrix=m.clone(q?m.normalize(q):m.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var q=this.getParent();q&&(q._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var q=this.getParent();q&&(q._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},
applyRightTransform:function(q){return q?this.setTransform([this.matrix,q]):this},applyLeftTransform:function(q){return q?this.setTransform([q,this.matrix]):this},applyTransform:function(q){return q?this.setTransform([this.matrix,q]):this},removeShape:function(q){this.parent&&this.parent.remove(this,q);return this},_setParent:function(q,n){this.parent=q;return this._updateParentMatrix(n)},_updateParentMatrix:function(q){this.parentMatrix=q?m.clone(q):null;return this._applyTransform()},_getRealMatrix:function(){for(var q=
this.matrix,n=this.parent;n;)n.matrix&&(q=m.multiply(n.matrix,q)),n=n.parent;return q}});h._eventsProcessing={on:function(q,n){return u(this.getEventSource(),q,h.fixCallback(this,f.fixTarget,n))},connect:function(q,n,k){"on"==q.substring(0,2)&&(q=q.substring(2));return this.on(q,k?B.hitch(n,k):n)},disconnect:function(q){return q.remove()}};h.fixCallback=function(q,n,k,g){g||(g=k,k=null);if(B.isString(g)){k=k||d.global;if(!k[g])throw['dojox.gfx.shape.fixCallback: scope["',g,'"] is null (scope\x3d"',
k,'")'].join("");return function(b){return n(b,q)?k[g].apply(k,arguments||[]):void 0}}return k?function(b){return n(b,q)?g.apply(k,arguments||[]):void 0}:function(b){return n(b,q)?g.apply(k,arguments):void 0}};B.extend(h.Shape,h._eventsProcessing);h.Container={_init:function(){this.children=[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(q){var n=q.getParent();n&&n.remove(q,!0);this.children.push(q);return q._setParent(this,this._getRealMatrix())},
remove:function(q,n){for(var k=0;k<this.children.length;++k)if(this.children[k]==q){n||(q.parent=null,q.parentMatrix=null);a(this.children,k);break}return this},clear:function(q){for(var n,k=0;k<this.children.length;++k)n=this.children[k],n.parent=null,n.parentMatrix=null,q&&n.destroy();this.children=[];return this},getBoundingBox:function(){if(this.children){var q=null;t.forEach(this.children,function(n){var k=n.getBoundingBox();k&&((n=n.getTransform())&&(k=m.multiplyRectangle(n,k)),q?(q.x=Math.min(q.x,
k.x),q.y=Math.min(q.y,k.y),q.endX=Math.max(q.endX,k.x+k.width),q.endY=Math.max(q.endY,k.y+k.height)):q={x:k.x,y:k.y,endX:k.x+k.width,endY:k.y+k.height})});q&&(q.width=q.endX-q.x,q.height=q.endY-q.y);return q}return null},_moveChildToFront:function(q){for(var n=0;n<this.children.length;++n)if(this.children[n]==q){a(this.children,n);this.children.push(q);break}return this},_moveChildToBack:function(q){for(var n=0;n<this.children.length;++n)if(this.children[n]==q){a(this.children,n);this.children.unshift(q);
break}return this}};h.Surface=l("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){t.forEach(this._nodes,e.destroy);this._nodes=[];t.forEach(this._events,function(q){q&&q.remove()});this._events=[];this.rawNode=null;if(c("ie"))for(;this._parent.lastChild;)e.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},
isLoaded:!0,onLoad:function(q){},whenLoaded:function(q,n){var k=B.hitch(q,n);if(this.isLoaded)k(this);else u.once(this,"load",function(g){k(g)})}});B.extend(h.Surface,h._eventsProcessing);h.Rect=l("dojox.gfx.shape.Rect",h.Shape,{constructor:function(q){this.shape=f.getDefault("Rect");this.rawNode=q},getBoundingBox:function(){return this.shape}});h.Ellipse=l("dojox.gfx.shape.Ellipse",h.Shape,{constructor:function(q){this.shape=f.getDefault("Ellipse");this.rawNode=q},getBoundingBox:function(){if(!this.bbox){var q=
this.shape;this.bbox={x:q.cx-q.rx,y:q.cy-q.ry,width:2*q.rx,height:2*q.ry}}return this.bbox}});h.Circle=l("dojox.gfx.shape.Circle",h.Shape,{constructor:function(q){this.shape=f.getDefault("Circle");this.rawNode=q},getBoundingBox:function(){if(!this.bbox){var q=this.shape;this.bbox={x:q.cx-q.r,y:q.cy-q.r,width:2*q.r,height:2*q.r}}return this.bbox}});h.Line=l("dojox.gfx.shape.Line",h.Shape,{constructor:function(q){this.shape=f.getDefault("Line");this.rawNode=q},getBoundingBox:function(){if(!this.bbox){var q=
this.shape;this.bbox={x:Math.min(q.x1,q.x2),y:Math.min(q.y1,q.y2),width:Math.abs(q.x2-q.x1),height:Math.abs(q.y2-q.y1)}}return this.bbox}});h.Polyline=l("dojox.gfx.shape.Polyline",h.Shape,{constructor:function(q){this.shape=f.getDefault("Polyline");this.rawNode=q},setShape:function(q,n){q&&q instanceof Array?(this.inherited(arguments,[{points:q}]),n&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[q]);return this},_normalizePoints:function(){var q=
this.shape.points,n=q&&q.length;if(n&&"number"==typeof q[0]){for(var k=[],g=0;g<n;g+=2)k.push({x:q[g],y:q[g+1]});this.shape.points=k}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var q=this.shape.points,n=q.length,k=q[0],g=k.x,b=k.y,x=k.x,v=k.y,y=1;y<n;++y)k=q[y],g>k.x&&(g=k.x),x<k.x&&(x=k.x),b>k.y&&(b=k.y),v<k.y&&(v=k.y);this.bbox={x:g,y:b,width:x-g,height:v-b}}return this.bbox}});h.Image=l("dojox.gfx.shape.Image",h.Shape,{constructor:function(q){this.shape=f.getDefault("Image");
this.rawNode=q},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});h.Text=l(h.Shape,{constructor:function(q){this.fontStyle=null;this.shape=f.getDefault("Text");this.rawNode=q},getFont:function(){return this.fontStyle},setFont:function(q){this.fontStyle="string"==typeof q?f.splitFontString(q):f.makeParameters(f.defaultFont,q);this._setFont();return this},getBoundingBox:function(){var q=null;this.getShape().text&&(q=f._base._computeTextBoundingBox(this));
return q}});h.Creator={createShape:function(q){switch(q.type){case f.defaultPath.type:return this.createPath(q);case f.defaultRect.type:return this.createRect(q);case f.defaultCircle.type:return this.createCircle(q);case f.defaultEllipse.type:return this.createEllipse(q);case f.defaultLine.type:return this.createLine(q);case f.defaultPolyline.type:return this.createPolyline(q);case f.defaultImage.type:return this.createImage(q);case f.defaultText.type:return this.createText(q);case f.defaultTextPath.type:return this.createTextPath(q)}return null},
createGroup:function(){return this.createObject(f.Group)},createRect:function(q){return this.createObject(f.Rect,q)},createEllipse:function(q){return this.createObject(f.Ellipse,q)},createCircle:function(q){return this.createObject(f.Circle,q)},createLine:function(q){return this.createObject(f.Line,q)},createPolyline:function(q){return this.createObject(f.Polyline,q)},createImage:function(q){return this.createObject(f.Image,q)},createText:function(q){return this.createObject(f.Text,q)},createPath:function(q){return this.createObject(f.Path,
q)},createTextPath:function(q){return this.createObject(f.TextPath,{}).setText(q)},createObject:function(q,n){return null}};return h})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(f,B){var l=f.matrix={},d={};l._degToRad=function(c){return d[c]||(d[c]=Math.PI*c/180)};l._radToDeg=function(c){return c/Math.PI*180};l.Matrix2D=function(c){if(c)if("number"==typeof c)this.xx=this.yy=c;else if(c instanceof Array){if(0<c.length){for(var u=l.normalize(c[0]),t=1;t<c.length;++t){var e=
u,r=l.normalize(c[t]);u=new l.Matrix2D;u.xx=e.xx*r.xx+e.xy*r.yx;u.xy=e.xx*r.xy+e.xy*r.yy;u.yx=e.yx*r.xx+e.yy*r.yx;u.yy=e.yx*r.xy+e.yy*r.yy;u.dx=e.xx*r.dx+e.xy*r.dy+e.dx;u.dy=e.yx*r.dx+e.yy*r.dy+e.dy}B.mixin(this,u)}}else B.mixin(this,c)};B.extend(l.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});B.mixin(l,{identity:new l.Matrix2D,flipX:new l.Matrix2D({xx:-1}),flipY:new l.Matrix2D({yy:-1}),flipXY:new l.Matrix2D({xx:-1,yy:-1}),translate:function(c,u){return 1<arguments.length?new l.Matrix2D({dx:c,dy:u}):
new l.Matrix2D({dx:c.x,dy:c.y})},scale:function(c,u){return 1<arguments.length?new l.Matrix2D({xx:c,yy:u}):"number"==typeof c?new l.Matrix2D({xx:c,yy:c}):new l.Matrix2D({xx:c.x,yy:c.y})},rotate:function(c){var u=Math.cos(c);c=Math.sin(c);return new l.Matrix2D({xx:u,xy:-c,yx:c,yy:u})},rotateg:function(c){return l.rotate(l._degToRad(c))},skewX:function(c){return new l.Matrix2D({xy:Math.tan(c)})},skewXg:function(c){return l.skewX(l._degToRad(c))},skewY:function(c){return new l.Matrix2D({yx:Math.tan(c)})},
skewYg:function(c){return l.skewY(l._degToRad(c))},reflect:function(c,u){1==arguments.length&&(u=c.y,c=c.x);var t=c*c,e=u*u,r=t+e,m=2*c*u/r;return new l.Matrix2D({xx:2*t/r-1,xy:m,yx:m,yy:2*e/r-1})},project:function(c,u){1==arguments.length&&(u=c.y,c=c.x);var t=c*c,e=u*u,r=t+e,m=c*u/r;return new l.Matrix2D({xx:t/r,xy:m,yx:m,yy:e/r})},normalize:function(c){return c instanceof l.Matrix2D?c:new l.Matrix2D(c)},isIdentity:function(c){return 1==c.xx&&0==c.xy&&0==c.yx&&1==c.yy&&0==c.dx&&0==c.dy},clone:function(c){var u=
new l.Matrix2D,t;for(t in c)"number"==typeof c[t]&&"number"==typeof u[t]&&u[t]!=c[t]&&(u[t]=c[t]);return u},invert:function(c){c=l.normalize(c);var u=c.xx*c.yy-c.xy*c.yx;return c=new l.Matrix2D({xx:c.yy/u,xy:-c.xy/u,yx:-c.yx/u,yy:c.xx/u,dx:(c.xy*c.dy-c.yy*c.dx)/u,dy:(c.yx*c.dx-c.xx*c.dy)/u})},_multiplyPoint:function(c,u,t){return{x:c.xx*u+c.xy*t+c.dx,y:c.yx*u+c.yy*t+c.dy}},multiplyPoint:function(c,u,t){c=l.normalize(c);return"number"==typeof u&&"number"==typeof t?l._multiplyPoint(c,u,t):l._multiplyPoint(c,
u.x,u.y)},multiplyRectangle:function(c,u){var t=l.normalize(c);u=u||{x:0,y:0,width:0,height:0};if(l.isIdentity(t))return{x:u.x,y:u.y,width:u.width,height:u.height};c=l.multiplyPoint(t,u.x,u.y);var e=l.multiplyPoint(t,u.x,u.y+u.height),r=l.multiplyPoint(t,u.x+u.width,u.y);u=l.multiplyPoint(t,u.x+u.width,u.y+u.height);t=Math.min(c.x,e.x,r.x,u.x);var m=Math.min(c.y,e.y,r.y,u.y);return{x:t,y:m,width:Math.max(c.x,e.x,r.x,u.x)-t,height:Math.max(c.y,e.y,r.y,u.y)-m}},multiply:function(c){for(var u=l.normalize(c),
t=1;t<arguments.length;++t){var e=u,r=l.normalize(arguments[t]);u=new l.Matrix2D;u.xx=e.xx*r.xx+e.xy*r.yx;u.xy=e.xx*r.xy+e.xy*r.yy;u.yx=e.yx*r.xx+e.yy*r.yx;u.yy=e.yx*r.xy+e.yy*r.yy;u.dx=e.xx*r.dx+e.xy*r.dy+e.dx;u.dy=e.yx*r.dx+e.yy*r.dy+e.dy}return u},_sandwich:function(c,u,t){return l.multiply(l.translate(u,t),c,l.translate(-u,-t))},scaleAt:function(c,u,t,e){switch(arguments.length){case 4:return l._sandwich(l.scale(c,u),t,e);case 3:return"number"==typeof t?l._sandwich(l.scale(c),u,t):l._sandwich(l.scale(c,
u),t.x,t.y)}return l._sandwich(l.scale(c),u.x,u.y)},rotateAt:function(c,u,t){return 2<arguments.length?l._sandwich(l.rotate(c),u,t):l._sandwich(l.rotate(c),u.x,u.y)},rotategAt:function(c,u,t){return 2<arguments.length?l._sandwich(l.rotateg(c),u,t):l._sandwich(l.rotateg(c),u.x,u.y)},skewXAt:function(c,u,t){return 2<arguments.length?l._sandwich(l.skewX(c),u,t):l._sandwich(l.skewX(c),u.x,u.y)},skewXgAt:function(c,u,t){return 2<arguments.length?l._sandwich(l.skewXg(c),u,t):l._sandwich(l.skewXg(c),u.x,
u.y)},skewYAt:function(c,u,t){return 2<arguments.length?l._sandwich(l.skewY(c),u,t):l._sandwich(l.skewY(c),u.x,u.y)},skewYgAt:function(c,u,t){return 2<arguments.length?l._sandwich(l.skewYg(c),u,t):l._sandwich(l.skewYg(c),u.x,u.y)}});f.Matrix2D=l.Matrix2D;return l})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(f,B,l,d,c){c=l("dojox.gfx.path.Path",c.Shape,{constructor:function(u){this.shape=B.clone(f.defaultPath);this.segments=
[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=u;this.segmented=!1},setAbsoluteMode:function(u){this._confirmSegmented();this.absolute="string"==typeof u?"absolute"==u:u;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();
if(this.tbbox)return this.tbbox;var u=this.bbox,t=this._getRealMatrix();this.bbox=null;for(var e=0,r=this.segments.length;e<r;++e)this._updateWithSegment(this.segments[e],t);t=this.bbox;this.bbox=u;return this.tbbox=t?[{x:t.l,y:t.t},{x:t.r,y:t.t},{x:t.r,y:t.b},{x:t.l,y:t.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(u,t,e){e&&(t=d.multiplyPoint(e,
u,t),u=t.x,t=t.y);this.bbox&&"l"in this.bbox?(this.bbox.l>u&&(this.bbox.l=u),this.bbox.r<u&&(this.bbox.r=u),this.bbox.t>t&&(this.bbox.t=t),this.bbox.b<t&&(this.bbox.b=t)):this.bbox={l:u,b:t,r:u,t}},_updateWithSegment:function(u,t){var e=u.args,r=e.length,m;switch(u.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(m=0;m<r;m+=2)this._updateBBox(e[m],e[m+1],t);this.last.x=e[r-2];this.last.y=e[r-1];this.absolute=!0;break;case "H":for(m=0;m<r;++m)this._updateBBox(e[m],this.last.y,t);this.last.x=
e[r-1];this.absolute=!0;break;case "V":for(m=0;m<r;++m)this._updateBBox(this.last.x,e[m],t);this.last.y=e[r-1];this.absolute=!0;break;case "m":m=0;"x"in this.last||(this._updateBBox(this.last.x=e[0],this.last.y=e[1],t),m=2);for(;m<r;m+=2)this._updateBBox(this.last.x+=e[m],this.last.y+=e[m+1],t);this.absolute=!1;break;case "l":case "t":for(m=0;m<r;m+=2)this._updateBBox(this.last.x+=e[m],this.last.y+=e[m+1],t);this.absolute=!1;break;case "h":for(m=0;m<r;++m)this._updateBBox(this.last.x+=e[m],this.last.y,
t);this.absolute=!1;break;case "v":for(m=0;m<r;++m)this._updateBBox(this.last.x,this.last.y+=e[m],t);this.absolute=!1;break;case "c":for(m=0;m<r;m+=6)this._updateBBox(this.last.x+e[m],this.last.y+e[m+1],t),this._updateBBox(this.last.x+e[m+2],this.last.y+e[m+3],t),this._updateBBox(this.last.x+=e[m+4],this.last.y+=e[m+5],t);this.absolute=!1;break;case "s":case "q":for(m=0;m<r;m+=4)this._updateBBox(this.last.x+e[m],this.last.y+e[m+1],t),this._updateBBox(this.last.x+=e[m+2],this.last.y+=e[m+3],t);this.absolute=
!1;break;case "A":for(m=0;m<r;m+=7)this._updateBBox(e[m+5],e[m+6],t);this.last.x=e[r-2];this.last.y=e[r-1];this.absolute=!0;break;case "a":for(m=0;m<r;m+=7)this._updateBBox(this.last.x+=e[m+5],this.last.y+=e[m+6],t);this.absolute=!1}u=[u.action];for(m=0;m<r;++m)u.push(f.formatNumber(e[m],!0));if("string"==typeof this.shape.path)this.shape.path+=u.join("");else for(m=0,r=u.length;m<r;++m)this.shape.path.push(u[m])},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(u,t){this.tbbox=
null;var e=this._validSegments[u.toLowerCase()];"number"==typeof e&&(e?t.length>=e&&(u={action:u,args:t.slice(0,t.length-t.length%e)},this.segments.push(u),this._updateWithSegment(u)):(u={action:u,args:[]},this.segments.push(u),this._updateWithSegment(u)))},_collectArgs:function(u,t){for(var e=0;e<t.length;++e){var r=t[e];"boolean"==typeof r?u.push(r?1:0):"number"==typeof r?u.push(r):r instanceof Array?this._collectArgs(u,r):"x"in r&&"y"in r&&u.push(r.x,r.y)}},moveTo:function(){this._confirmSegmented();
var u=[];this._collectArgs(u,arguments);this._pushSegment(this.absolute?"M":"m",u);return this},lineTo:function(){this._confirmSegmented();var u=[];this._collectArgs(u,arguments);this._pushSegment(this.absolute?"L":"l",u);return this},hLineTo:function(){this._confirmSegmented();var u=[];this._collectArgs(u,arguments);this._pushSegment(this.absolute?"H":"h",u);return this},vLineTo:function(){this._confirmSegmented();var u=[];this._collectArgs(u,arguments);this._pushSegment(this.absolute?"V":"v",u);
return this},curveTo:function(){this._confirmSegmented();var u=[];this._collectArgs(u,arguments);this._pushSegment(this.absolute?"C":"c",u);return this},smoothCurveTo:function(){this._confirmSegmented();var u=[];this._collectArgs(u,arguments);this._pushSegment(this.absolute?"S":"s",u);return this},qCurveTo:function(){this._confirmSegmented();var u=[];this._collectArgs(u,arguments);this._pushSegment(this.absolute?"Q":"q",u);return this},qSmoothCurveTo:function(){this._confirmSegmented();var u=[];this._collectArgs(u,
arguments);this._pushSegment(this.absolute?"T":"t",u);return this},arcTo:function(){this._confirmSegmented();var u=[];this._collectArgs(u,arguments);this._pushSegment(this.absolute?"A":"a",u);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var u=this.shape.path;this.shape.path=[];this._setPath(u);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(u){u=B.isArray(u)?u:u.match(f.pathSvgRegExp);
this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(u){for(var t="",e=[],r=u.length,m=0;m<r;++m){var a=u[m],h=parseFloat(a);isNaN(h)?(t&&this._pushSegment(t,e),e=[],t=a):e.push(h)}this._pushSegment(t,e)}},setShape:function(u){this.inherited(arguments,["string"==typeof u?{path:u}:u]);this.segmented=!1;this.segments=[];f.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});l=l("dojox.gfx.path.TextPath",c,{constructor:function(u){"text"in this||(this.text=B.clone(f.defaultTextPath));
"fontStyle"in this||(this.fontStyle=B.clone(f.defaultFont))},getText:function(){return this.text},setText:function(u){this.text=f.makeParameters(this.text,"string"==typeof u?{text:u}:u);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(u){this.fontStyle="string"==typeof u?f.splitFontString(u):f.makeParameters(f.defaultFont,u);this._setFont();return this}});return f.path={Path:c,TextPath:l}})},"dojox/gfx/filters":function(){define(["dojo/_base/lang","dojo/_base/array"],
function(f,B){var l={},d={x:"0%",y:"0%",width:"100%",height:"100%"},c={};l.createFilter=function(h,q){h=f.mixin({},d,h);h.primitives||(h.primitives=[]);q&&Array.prototype.push.apply(h.primitives,q);return h};var u=function(h,q,n){q instanceof Array&&(n=q,q=null);q=f.mixin({},q);q.children=n;q.tag=h;return q};B.forEach("feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feFlood feGaussianBlur feImage feMorphology feOffset feSpecularLighting feTile feTurbulence feDistantLight fePointLight feSpotLight feMergeNode feFuncA feFuncR feFuncG feFuncB".split(" "),
function(h){l[h]=function(q,n){return u(h,q,n)}});l.feMerge=function(h,q){if("string"===typeof h){for(var n=[],k=0;k<arguments.length;++k)n.push(l.feMergeNode({"in":arguments[k]}));return u("feMerge",{},n)}return u("feMerge",h,q)};var t=l.createFilter;c.convolutions=[t({_gfxName:"boxBlur3"},[l.feConvolveMatrix({"in":"SourceGraphic",order:3,divisor:9,kernelMatrix:"1,1,1,1,1,1,1,1,1"})]),t({_gfxName:"boxBlur5"},[l.feConvolveMatrix({"in":"SourceGraphic",order:5,divisor:25,kernelMatrix:"1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1"})]),
t({_gfxName:"verticalEdges",filterUnits:"objectBoundingBox"},[l.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"-1 0 1 -1 0 1 -1 0 1"}),l.feComponentTransfer({"in":"kernel"},[l.feFuncA({type:"table",tableValues:"1,1"})])]),t({_gfxName:"horizontalEdges",filterUnits:"objectBoundingBox"},[l.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"1 1 1 0 0 0 -1 -1 -1"}),l.feComponentTransfer({"in":"kernel"},[l.feFuncA({type:"table",
tableValues:"1,1"})])]),t({_gfxName:"allEdges3",filterUnits:"objectBoundingBox"},[l.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"-1 -1 -1 -1 8 -1 -1 -1 -1"}),l.feComponentTransfer({"in":"kernel"},[l.feFuncA({type:"table",tableValues:"1,1"})])]),t({_gfxName:"edgeEnhance",filterUnits:"objectBoundingBox"},[l.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:-1,kernelMatrix:"0 1 0 1 -5 1 0 1 0"}),l.feComponentTransfer({"in":"kernel"},[l.feFuncA({type:"table",
tableValues:"1,1"})])])];B.forEach(c.convolutions,function(h){f.mixin(h,d)});c.shadows=[t({_gfxName:"fastSmallDropShadow"},[l.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.7,0"}),l.feOffset({dx:3,dy:3,result:"offsetBlur"}),l.feMerge("offsetBlur","SourceGraphic")]),t({_gfxName:"fastDropShadow"},[l.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.7,0"}),
l.feOffset({dx:5,dy:5,result:"offsetBlur"}),l.feMerge("offsetBlur","SourceGraphic")]),t({_gfxName:"fastDropShadowLight"},[l.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.4,0"}),l.feOffset({dx:5,dy:5,result:"offsetBlur"}),l.feMerge("offsetBlur","SourceGraphic")]),t({_gfxName:"dropShadow"},[l.feGaussianBlur({"in":"SourceAlpha",stdDeviation:4}),l.feOffset({dx:5,dy:5,result:"offsetBlur"}),l.feMerge("offsetBlur",
"SourceGraphic")]),t({_gfxName:"dropShadowLight"},[l.feGaussianBlur({"in":"SourceAlpha",stdDeviation:4,result:"blur"}),l.feComponentTransfer({"in":"blur",result:"lessblur"},[l.feFuncA({type:"linear",slope:.5})]),l.feOffset({"in":"lessblur",dx:5,dy:5,result:"offsetBlur"}),l.feMerge("offsetBlur","SourceGraphic")]),t({_gfxName:"smallDropShadow"},[l.feGaussianBlur({"in":"SourceAlpha",stdDeviation:3}),l.feOffset({dx:2,dy:2,result:"offsetBlur"}),l.feMerge("offsetBlur","SourceGraphic")]),t({_gfxName:"smallDropShadowLight"},
[l.feGaussianBlur({"in":"SourceAlpha",stdDeviation:3,result:"blur"}),l.feComponentTransfer({"in":"blur",result:"lessblur"},[l.feFuncA({type:"linear",slope:.5})]),l.feOffset({"in":"lessblur",dx:2,dy:2,result:"offsetBlur"}),l.feMerge("offsetBlur","SourceGraphic")])];var e={x:"-10%",y:"-10%",width:"125%",height:"125%"};B.forEach(c.shadows,function(h){f.mixin(h,e)});c.blurs=[t({_gfxName:"blur1",x:"-5%",y:"-5%",width:"110%",height:"110%"},[l.feGaussianBlur({"in":"SourceGraphic",stdDeviation:1})]),t({_gfxName:"blur2",
x:"-15%",y:"-15%",width:"130%",height:"130%"},[l.feGaussianBlur({"in":"SourceGraphic",stdDeviation:2})]),t({_gfxName:"blur4",x:"-15%",y:"-15%",width:"130%",height:"130%"},[l.feGaussianBlur({"in":"SourceGraphic",stdDeviation:4})]),t({_gfxName:"blur8",x:"-20%",y:"-20%",width:"140%",height:"140%"},[l.feGaussianBlur({"in":"SourceGraphic",stdDeviation:8})]),t({_gfxName:"glow",x:"-10%",y:"-10%",width:"120%",height:"120%"},[l.feGaussianBlur({"in":"SourceGraphic",stdDeviation:2}),l.feComponentTransfer([l.feFuncA({type:"linear",
slope:10})])])];c.colors=[t({_gfxName:"negate"},[l.feComponentTransfer([l.feFuncR({type:"table",tableValues:"1,0"}),l.feFuncG({type:"table",tableValues:"1,0"}),l.feFuncB({type:"table",tableValues:"1,0"})])]),t({_gfxName:"sepia"},[l.feColorMatrix({result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,1,0"}),l.feComponentTransfer({"in":"grey"},[l.feFuncR({type:"linear",slope:.5,intercept:.5}),l.feFuncB({type:"table",tableValues:"0,0"})])]),t({_gfxName:"grayscale"},
[l.feColorMatrix({values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,1,0"})]),t({_gfxName:"showRed"},[l.feComponentTransfer([l.feFuncG({type:"table",tableValues:"0,0"}),l.feFuncB({type:"table",tableValues:"0,0"})])]),t({_gfxName:"showGreen"},[l.feComponentTransfer([l.feFuncR({type:"table",tableValues:"0,0"}),l.feFuncB({type:"table",tableValues:"0,0"})])]),t({_gfxName:"showBlue"},[l.feComponentTransfer([l.feFuncR({type:"table",tableValues:"0,0"}),l.feFuncG({type:"table",
tableValues:"0,0"})])]),t({_gfxName:"hueRotate60"},[l.feColorMatrix({type:"hueRotate",values:60})]),t({_gfxName:"hueRotate120"},[l.feColorMatrix({type:"hueRotate",values:120})]),t({_gfxName:"hueRotate180"},[l.feColorMatrix({type:"hueRotate",values:180})]),t({_gfxName:"hueRotate270"},[l.feColorMatrix({type:"hueRotate",values:270})])];B.forEach(c.colors,function(h){f.mixin(h,d)});c.miscs=[t({_gfxName:"thinEmbossDropShadow",x:"-5%",y:"-5%",width:"120%",height:"120%"},[l.feGaussianBlur({"in":"SourceAlpha",
stdDeviation:1,result:"blur"}),l.feOffset({"in":"blur",dx:6,dy:6,result:"offsetBlur"}),l.feSpecularLighting({"in":"blur",surfaceScale:8,specularConstant:1,specularExponent:12,result:"specOut"},[l.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),l.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),l.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",result:"litPaint",k1:0,k2:1,k3:1,k4:0}),l.feMerge("offsetBlur","litPaint")]),t({_gfxName:"embossDropShadow",
x:"-5%",y:"-5%",width:"120%",height:"120%"},[l.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"4",result:"blur"}),l.feOffset({"in":"blur",dx:4,dy:4,result:"offsetBlur"}),l.feSpecularLighting({"in":"blur",surfaceScale:5,specularConstant:.75,specularExponent:20,"lighting-color":"#bbbbbb",result:"specOut"},[l.fePointLight({x:-5E3,y:-1E4,z:2E4})]),l.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),l.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,
k2:1,k3:1,k4:0,result:"litPaint"}),l.feMerge("offsetBlur","litPaint")]),t({_gfxName:"largeEmbossDropShadow",x:"-20%",y:"-20%",width:"140%",height:"140%"},[l.feGaussianBlur({"in":"SourceAlpha",stdDeviation:5,result:"blur"}),l.feOffset({"in":"blur",dx:6,dy:6,result:"offsetBlur"}),l.feSpecularLighting({"in":"blur",surfaceScale:8,specularConstant:1,specularExponent:12,result:"spec"},[l.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),l.feComposite({"in":"spec",in2:"SourceGraphic",operator:"in",result:"specOut"}),
l.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",result:"litPaint",k1:0,k2:1,k3:1,k4:0}),l.feMerge("offsetBlur","litPaint")]),t({_gfxName:"thinEmbossDropShadowLight",x:"-5%",y:"-5%",width:"120%",height:"120%"},[l.feGaussianBlur({"in":"SourceAlpha",stdDeviation:1,result:"blur"}),l.feComponentTransfer({"in":"blur",result:"lessblur"},[l.feFuncA({type:"linear",slope:"0.5"})]),l.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),l.feSpecularLighting({"in":"lessblur",surfaceScale:8,
specularConstant:1,specularExponent:"12",result:"specOut"},[l.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),l.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),l.feComposite({"in":"SourceGraphic",in2:"specOut",result:"litPaint",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0}),l.feMerge("offsetBlur","litPaint")]),t({_gfxName:"embossDropShadowLight",x:"-5%",y:"-5%",width:"120%",height:"120%"},[l.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"3",result:"blur"}),l.feComponentTransfer({"in":"blur",
result:"lessblur"},[l.feFuncA({type:"linear",slope:"0.5"})]),l.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),l.feSpecularLighting({"in":"lessblur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[l.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),l.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),l.feComposite({"in":"SourceGraphic",in2:"specOut",result:"litPaint",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"}),l.feMerge("offsetBlur",
"litPaint")]),t({_gfxName:"largeEmbossDropShadowLight",x:"-20%",y:"-20%",width:"140%",height:"140%"},[l.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"5",result:"blur"}),l.feComponentTransfer({"in":"blur",result:"lessblur"},[l.feFuncA({type:"linear",slope:"0.5"})]),l.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),l.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"spec"},[l.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),l.feComposite({"in":"spec",
in2:"SourceGraphic",operator:"in",result:"specOut"}),l.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"}),l.feMerge("offsetBlur","litPaint")]),t({_gfxName:"fuzzy",x:"-10%",y:"-10%",width:"120%",height:"120%"},[l.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"turb2"}),l.feDisplacementMap({"in":"SourceGraphic",in2:"turb2",result:"turb2",scale:"20",xChannelSelector:"R",yChannelSelector:"G"})]),t({_gfxName:"veryFuzzy",
x:"-20%",y:"-20%",width:"140%",height:"140%"},[l.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"turb2"}),l.feDisplacementMap({"in":"SourceGraphic",in2:"turb2",result:"turb2",scale:"35",xChannelSelector:"R",yChannelSelector:"G"})]),t({_gfxName:"melting",x:"-10%",y:"-10%",width:"120%",height:"120%"},[l.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"2",result:"turb"}),l.feDisplacementMap({result:"bended","in":"SourceGraphic",in2:"turb",scale:"25",xChannelSelector:"R",
yChannelSelector:"G"}),l.feGaussianBlur({"in":"bended",stdDeviation:"1",result:"bb"}),l.feComponentTransfer({"in":"bb",result:"BendedSource"},[l.feFuncA({type:"linear",slope:10,intercept:"-1"})]),l.feComponentTransfer({"in":"BendedSource",result:"BendedAlpha"},[l.feFuncR({type:"linear",slope:"0",intercept:"0"}),l.feFuncG({type:"linear",slope:"0",intercept:"0"}),l.feFuncB({type:"linear",slope:"0",intercept:"0"}),l.feFuncA({type:"linear",slope:"1",intercept:"0"})]),l.feGaussianBlur({"in":"BendedAlpha",
stdDeviation:"1",result:"blur"}),l.feSpecularLighting({"in":"blur","lighting-color":"rgb(80%, 80%, 80%)",surfaceScale:"5",specularConstant:"1",specularExponent:"10",result:"specularOut"},[l.fePointLight({x:"-5000",y:"-10000",z:"20000"})]),l.feComposite({"in":"specularOut",in2:"BendedAlpha",operator:"in",result:"specularOut"}),l.feComposite({"in":"BendedSource",in2:"specularOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"})]),t({_gfxName:"impressionist",x:"0%",y:"0%",width:"100%",
height:"100%"},[l.feMorphology({"in":"SourceGraphic",operator:"dilate",radius:"2"})]),t({_gfxName:"holes",x:"0%",y:"0%",width:"100%",height:"100%"},[l.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"texture"}),l.feComponentTransfer({"in":"texture",result:"holes"},[l.feFuncA({type:"discrete",tableValues:"0,1"})]),l.feComposite({"in":"SourceGraphic",in2:"holes",operator:"out"})]),t({_gfxName:"holesComplement",x:"0%",y:"0%",width:"100%",height:"100%"},[l.feTurbulence({type:"fractalNoise",
baseFrequency:"0.1",numOctaves:"1",result:"texture"}),l.feComponentTransfer({"in":"texture",result:"holes"},[l.feFuncA({type:"discrete",tableValues:"1,0"})]),l.feComposite({"in":"SourceGraphic",in2:"holes",operator:"out"})])];c.reliefs=[t({_gfxName:"bumpIn",x:"0%",y:"0%",width:"100%",height:"100%"},[l.feColorMatrix({"in":"SourceGraphic",type:"luminanceToAlpha",result:"lumalpha"}),l.feComponentTransfer({"in":"lumalpha",result:"invertedalpha"},[l.feFuncA({type:"table",tableValues:"1,0"})]),l.feDiffuseLighting({"in":"invertedalpha",
"lighting-color":"rgb(60%, 60%, 60%)",result:"diffuse",surfaceScale:"5"},[l.feDistantLight({azimuth:"135",elevation:"60"})]),l.feSpecularLighting({"in":"invertedalpha",result:"specular",surfaceScale:"5",specularExponent:"6"},[l.feDistantLight({azimuth:"135",elevation:"30"})]),l.feComposite({"in":"diffuse",in2:"specular",operator:"arithmetic",k2:"1.0",k3:"1.0"})]),t({_gfxName:"bumpOut",x:"0%",y:"0%",width:"100%",height:"100%"},[l.feColorMatrix({"in":"SourceGraphic",type:"luminanceToAlpha",result:"lumalpha"}),
l.feDiffuseLighting({"in":"lumalpha","lighting-color":"rgb(60%, 60%, 60%)",result:"diffuse",surfaceScale:"5"},[l.feDistantLight({azimuth:"135",elevation:"60"})]),l.feSpecularLighting({"in":"lumalpha",result:"specular",surfaceScale:"5",specularExponent:"6"},[l.feDistantLight({azimuth:"135",elevation:"30"})]),l.feComposite({"in":"diffuse",in2:"specular",operator:"arithmetic",k2:"1.0",k3:"1.0"})]),t({_gfxName:"thinEmboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[l.feGaussianBlur({"in":"SourceAlpha",
stdDeviation:"1",result:"blur"}),l.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[l.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),l.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),l.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]),t({_gfxName:"emboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[l.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"3",
result:"blur"}),l.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[l.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),l.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),l.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]),t({_gfxName:"largeEmboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[l.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"5",result:"blur"}),
l.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[l.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),l.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),l.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})])];c.textures=[t({_gfxName:"paper",x:"0%",y:"0%",width:"100%",height:"100%"},[l.feTurbulence({type:"turbulence",baseFrequency:"0.01",numOctaves:"5",result:"texture"}),
l.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[l.feDistantLight({azimuth:"135",elevation:"60"})]),l.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),t({_gfxName:"swirl",x:"0%",y:"0%",width:"100%",height:"100%"},[l.feTurbulence({type:"turbulence",baseFrequency:"0.05",numOctaves:"1",result:"texture"}),l.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[l.feDistantLight({azimuth:"135",elevation:"60"})]),
l.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),t({_gfxName:"swirl2",x:"0%",y:"0%",width:"100%",height:"100%"},[l.feTurbulence({type:"turbulence",baseFrequency:"0.15",numOctaves:"1",result:"texture"}),l.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[l.feDistantLight({azimuth:"135",elevation:"60"})]),l.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),t({_gfxName:"gold",
x:"-5%",y:"-5%",width:"115%",height:"110%"},[l.feTurbulence({baseFrequency:"0.2",numOctaves:"1",type:"turbulence",result:"turb"}),l.feComposite({"in":"SourceGraphic",in2:"turb",operator:"arithmetic",k2:"0.6",k3:"0.4",result:"turb"}),l.feComposite({"in":"turb",in2:"SourceGraphic",operator:"in",result:"bump"}),l.feDiffuseLighting({"in":"turb",surfaceScale:"6.0","lighting-color":"rgb(60%, 50%, 0%)",diffuseConstant:"1.0",result:"diffuse"},[l.feDistantLight({azimuth:"135",elevation:"60"})]),l.feSpecularLighting({"in":"bump",
surfaceScale:"6.0",specularConstant:"1.0",specularExponent:"10.0",result:"specularOut"},[l.feDistantLight({azimuth:"135",elevation:"60"})]),l.feComposite({"in":"specularOut",in2:"SourceGraphic",operator:"in",result:"specularOut"}),l.feComposite({"in":"bump",in2:"diffuse",operator:"arithmetic",k1:"0.7",k2:"0.3",result:"litPaint"}),l.feComposite({"in":"litPaint",in2:"specularOut",operator:"arithmetic",k2:"1.0",k3:"0.7",result:"litPaint"})])];for(var r in c)if(c.hasOwnProperty(r)){l[r]={};for(var m=
c[r],a=0;a<m.length;++a)(function(){var h=m[a];l[r][h._gfxName]=function(q){return f.delegate(h,q)}})()}return l})},"dojox/gfx/svgext":function(){define(["dojo/dom","dojo/_base/array","dojo/_base/window","./_base","./svg"],function(f,B,l,d,c){function u(e,r){var m=r.ownerDocument.createElementNS(c.xmlns.svg,e.tag);r.appendChild(m);for(var a in e)a in t||m.setAttribute(a,e[a]);e.children&&B.forEach(e.children,function(h){u(h,m)});return m}l=d.svgext={};var t={primitives:null,tag:null,children:null};
c.Shape.extend({addRenderingOption:function(e,r){this.rawNode.setAttribute(e,r);return this},setFilter:function(e){if(!e)return this.rawNode.removeAttribute("filter"),this.filter=null,this;this.filter=e;e.id=e.id||d._base._getUniqueId();var r=f.byId(e.id);if(!r){r=this.rawNode.ownerDocument.createElementNS(c.xmlns.svg,"filter");r.setAttribute("filterUnits","userSpaceOnUse");for(var m in e)m in t||r.setAttribute(m,e[m]);B.forEach(e.primitives,function(a){u(a,r)});(m=this._getParentSurface())&&m.defNode.appendChild(r)}this.rawNode.setAttribute("filter",
"url(#"+e.id+")");return this},getFilter:function(){return this.filter}});return l})},"dojox/gfx/_gfxBidiSupport":function(){define("./_base dojo/_base/lang dojo/_base/sniff dojo/dom dojo/_base/html dojo/_base/array ./utils ./shape ./path dojox/string/BidiEngine".split(" "),function(f,B,l,d,c,u,t,e,r,m){function a(n,k){var g=h(k);g&&f.utils.forEach(n,function(b){if(b instanceof f.Surface||b instanceof f.Group)b.textDir=g;b instanceof f.Text&&b.setShape({textDir:g});b instanceof f.TextPath&&b.setText({textDir:g})},
n);return n}function h(n){var k=["ltr","rtl","auto"];return n&&(n=n.toLowerCase(),0>u.indexOf(k,n))?null:n}B.getObject("dojox.gfx._gfxBidiSupport",!0);switch(f.renderer){case "vml":f.isVml=!0;break;case "svg":f.isSvg=!0;f.svg.useSvgWeb&&(f.isSvgWeb=!0);break;case "silverlight":f.isSilverlight=!0;break;case "canvas":case "canvasWithEvents":f.isCanvas=!0}var q=new m;B.extend(f.shape.Surface,{textDir:"",setTextDir:function(n){a(this,n)},getTextDir:function(){return this.textDir}});B.extend(f.Group,{textDir:"",
setTextDir:function(n){a(this,n)},getTextDir:function(){return this.textDir}});B.extend(f.Text,{textDir:"",formatText:function(n,k){if(k&&n&&1<n.length){var g="ltr";if("auto"==k){if(f.isVml)return n;k=q.checkContextual(n)}if(f.isVml)return g=q.checkContextual(n),k!=g?"rtl"==k?q.hasBidiChar(n)?"\u200f\u200f"+n:q.bidiTransform(n,"IRNNN","ILNNN"):"\u200e"+n:n;if(f.isSvgWeb)return"rtl"==k?q.bidiTransform(n,"IRNNN","ILNNN"):n;if(f.isSilverlight)return"rtl"==k?q.bidiTransform(n,"IRNNN","VLYNN"):q.bidiTransform(n,
"ILNNN","VLYNN");if(f.isCanvas)return"rtl"==k?"\u202b"+n+"\u202c":"\u202a"+n+"\u202c";if(f.isSvg)return 4>l("ff")?"rtl"==k?q.bidiTransform(n,"IRYNN","VLNNN"):q.bidiTransform(n,"ILYNN","VLNNN"):"\u200e"+("rtl"==k?"\u202b":"\u202a")+n+"\u202c"}return n},bidiPreprocess:function(n){return n}});B.extend(f.TextPath,{textDir:"",formatText:function(n,k){if(k&&n&&1<n.length){var g="ltr";if("auto"==k){if(f.isVml)return n;k=q.checkContextual(n)}if(f.isVml)return g=q.checkContextual(n),k!=g?"rtl"==k?q.hasBidiChar(n)?
"\u200f\u200f"+n:q.bidiTransform(n,"IRNNN","ILNNN"):"\u200e"+n:n;if(f.isSvgWeb)return"rtl"==k?q.bidiTransform(n,"IRNNN","ILNNN"):n;f.isSvg&&(n=l("opera")||4<=l("ff")?"\u200e"+("rtl"==k?"\u202b":"\u202a")+n+"\u202c":"rtl"==k?q.bidiTransform(n,"IRYNN","VLNNN"):q.bidiTransform(n,"ILYNN","VLNNN"))}return n},bidiPreprocess:function(n){n&&"string"==typeof n&&(this.origText=n,n=this.formatText(n,this.textDir));return n}});t=function(n,k,g,b){var x=n.prototype[k];n.prototype[k]=function(){var v;g&&(v=g.apply(this,
arguments));v=x.call(this,v);b&&(v=b.call(this,v,arguments));return v}};e=function(n){n&&(n.textDir&&(n.textDir=h(n.textDir)),n.text&&n.text instanceof Array&&(n.text=n.text.join(",")));!n||void 0==n.text&&!n.textDir||this.textDir==n.textDir&&n.text==this.origText||(this.origText=void 0!=n.text?n.text:this.origText,n.textDir&&(this.textDir=n.textDir),n.text=this.formatText(this.origText,this.textDir));return this.bidiPreprocess(n)};t(f.Text,"setShape",e,null);t(f.TextPath,"setText",e,null);e=function(n){(n=
B.clone(n))&&this.origText&&(n.text=this.origText);return n};t(f.Text,"getShape",null,e);t(f.TextPath,"getText",null,e);e=function(n,k){var g;k&&k[0]&&(g=h(k[0]));n.setTextDir(g?g:this.textDir);return n};t(f.Surface,"createGroup",null,e);t(f.Group,"createGroup",null,e);e=function(n){if(n){var k=n.textDir?h(n.textDir):this.textDir;k&&(n.textDir=k)}return n};t(f.Surface,"createText",e,null);t(f.Surface,"createTextPath",e,null);t(f.Group,"createText",e,null);t(f.Group,"createTextPath",e,null);f.createSurface=
function(n,k,g,b){k=f[f.renderer].createSurface(n,k,g);b=h(b);if(f.isSvgWeb)return k.textDir=b?b:c.style(d.byId(n),"direction"),k;if(f.isVml||f.isSvg||f.isCanvas)k.textDir=b?b:c.style(k.rawNode,"direction");f.isSilverlight&&(k.textDir=b?b:c.style(k._nodes[1],"direction"));return k};return f})},"dojox/gfx/utils":function(){define("dojo/_base/kernel dojo/_base/lang ./_base dojo/_base/html dojo/_base/array dojo/_base/window dojo/_base/json dojo/_base/Deferred dojo/_base/sniff require dojo/_base/config".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a){var h=l.utils={};B.mixin(h,{forEach:function(q,n,k){k=k||f.global;n.call(k,q);(q instanceof l.Surface||q instanceof l.Group)&&c.forEach(q.children,function(g){h.forEach(g,n,k)})},serialize:function(q){var n={},k;if((k=q instanceof l.Surface)||q instanceof l.Group){if(n.children=c.map(q.children,h.serialize),k)return n.children}else n.shape=q.getShape();q.getTransform&&(k=q.getTransform())&&(n.transform=k);q.getStroke&&(k=q.getStroke())&&(n.stroke=k);q.getFill&&(k=q.getFill())&&
(n.fill=k);q.getFont&&(k=q.getFont())&&(n.font=k);return n},toJson:function(q,n){return t.toJson(h.serialize(q),n)},deserialize:function(q,n){if(n instanceof Array)return c.map(n,B.hitch(null,h.deserialize,q));q="shape"in n?q.createShape(n.shape):q.createGroup();"transform"in n&&q.setTransform(n.transform);"stroke"in n&&q.setStroke(n.stroke);"fill"in n&&q.setFill(n.fill);"font"in n&&q.setFont(n.font);"children"in n&&c.forEach(n.children,B.hitch(null,h.deserialize,q));return q},fromJson:function(q,
n){return h.deserialize(q,t.fromJson(n))},toSvg:function(q){var n=new e;if("svg"===l.renderer)try{var k=h._cleanSvg(h._innerXML(q.rawNode));n.callback(k)}catch(b){n.errback(b)}else{h._initSvgSerializerDeferred||h._initSvgSerializer();var g=h.toJson(q);k=function(){try{var b=q.getDimensions(),x=b.width,v=b.height,y=h._gfxSvgProxy.document.createElement("div");h._gfxSvgProxy.document.body.appendChild(y);u.withDoc(h._gfxSvgProxy.document,function(){d.style(y,"width",x);d.style(y,"height",v)},this);h._gfxSvgProxy[dojox._scopeName].gfx.createSurface(y,
x,v).whenLoaded(null,function(D){try{h._gfxSvgProxy[dojox._scopeName].gfx.utils.fromJson(D,g);var E=h._cleanSvg(y.innerHTML);D.clear();D.destroy();h._gfxSvgProxy.document.body.removeChild(y);n.callback(E)}catch(C){n.errback(C)}})}catch(D){n.errback(D)}};0<h._initSvgSerializerDeferred.fired?k():h._initSvgSerializerDeferred.addCallback(k)}return n},_gfxSvgProxy:null,_initSvgSerializerDeferred:null,_svgSerializerInitialized:function(){h._initSvgSerializerDeferred.callback(!0)},_initSvgSerializer:function(){if(!h._initSvgSerializerDeferred){h._initSvgSerializerDeferred=
new e;var q=u.doc.createElement("iframe");d.style(q,{display:"none",position:"absolute",width:"1em",height:"1em",top:"-10000px"});var n;r("ie")?q.onreadystatechange=function(){"complete"==q.contentWindow.document.readyState&&(q.onreadystatechange=function(){},n=setInterval(function(){q.contentWindow[f.scopeMap.dojo[1]._scopeName]&&q.contentWindow[f.scopeMap.dojox[1]._scopeName].gfx&&q.contentWindow[f.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(n),q.contentWindow.parent[f.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=
q.contentWindow,q.contentWindow.parent[f.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},50))}:q.onload=function(){q.onload=function(){};n=setInterval(function(){q.contentWindow[f.scopeMap.dojo[1]._scopeName]&&q.contentWindow[f.scopeMap.dojox[1]._scopeName].gfx&&q.contentWindow[f.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(n),q.contentWindow.parent[f.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=q.contentWindow,q.contentWindow.parent[f.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},
50)};var k=a.dojoxGfxSvgProxyFrameUrl||m.toUrl("dojox/gfx/resources/gfxSvgProxyFrame.html");q.setAttribute("src",k.toString());u.body().appendChild(q)}},_innerXML:function(q){return q.innerXML?q.innerXML:q.xml?q.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(q):null},_cleanSvg:function(q){q&&(-1==q.indexOf('xmlns\x3d"http://www.w3.org/2000/svg"')&&(q=q.substring(4,q.length),q='\x3csvg xmlns\x3d"http://www.w3.org/2000/svg"'+q),-1==q.indexOf('xmlns:xlink\x3d"http://www.w3.org/1999/xlink"')&&
(q=q.substring(4,q.length),q='\x3csvg xmlns:xlink\x3d"http://www.w3.org/1999/xlink"'+q),-1===q.indexOf("xlink:href")&&(q=q.replace(/href\s*=/g,"xlink:href\x3d")),q=q.replace(/<img\b([^>]*)>/gi,"\x3cimage $1 /\x3e"),q=q.replace(/\bdojoGfx\w*\s*=\s*(['"])\w*\1/g,""),q=q.replace(/\b__gfxObject__\s*=\s*(['"])\w*\1/g,""),q=q.replace(/[=]([^"']+?)(\s|>)/g,'\x3d"$1"$2'),q=q.replace(/\bstroke-opacity\w*\s*=\s*(['"])undefined\1/g,""));return q}});return h})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang",
"dojo/_base/declare","dojo/Stateful"],function(f,B,l){function d(pa,Y,ka,ta,xa){var Da=pa;void 0===Y&&(Y=xa.defInFormat);void 0===ka&&(ka=xa.defOutFormat);void 0===ta&&(ta=xa.defSwap);if(Y!==ka){var Ja=Y.substring(0,1);var La=Y.substring(1,4);var Ya=ka.substring(0,1),Ua=ka.substring(1,4);"C"===La.charAt(0)&&(La=c(Da),La="ltr"===La||"rtl"===La?La.toUpperCase():"L"===Y.charAt(2)?"LTR":"RTL",Y=Ja+La);"C"===Ua.charAt(0)&&(La=c(Da),"rtl"===La?Ua="RTL":"ltr"===La?(Da=Da.split(""),Da.reverse(),La=c(Da.join("")),
Ua=La.toUpperCase()):Ua="L"===ka.charAt(2)?"LTR":"RTL",ka=Ya+Ua)}if(Y===ka)return pa;Ya=Y.substring(0,1);Da=Y.substring(1,4);Ja=ka.substring(0,1);Ua=ka.substring(1,4);xa.inFormat=Y;xa.outFormat=ka;xa.swap=ta;if("L"===Ya&&"VLTR"===ka){if("LTR"===Da)return xa.dir=z,u(pa,xa);if("RTL"===Da)return xa.dir=w,u(pa,xa)}if("V"===Ya&&"V"===Ja)return xa.dir="RTL"===Da?w:z,e(pa,xa);if("L"===Ya&&"VRTL"===ka)return xa.dir="LTR"===Da?z:w,pa=u(pa,xa),e(pa);if("VLTR"===Y&&"LLTR"===ka)return xa.dir=z,u(pa,xa);if("V"===
Ya&&"L"===Ja&&Da!==Ua)return pa=e(pa),"RTL"===Da?d(pa,"LLTR","VLTR",ta,xa):d(pa,"LRTL","VRTL",ta,xa);if("VRTL"===Y&&"LRTL"===ka)return d(pa,"LRTL","VRTL",ta,xa);if("L"===Ya&&"L"===Ja)return Y=xa.swap,xa.swap=Y.substr(0,1)+"N","RTL"===Da?(xa.dir=w,pa=u(pa,xa),xa.swap="N"+Y.substr(1,2),xa.dir=z,pa=u(pa,xa)):(xa.dir=z,pa=u(pa,xa),xa.swap="N"+Y.substr(1,2),pa=d(pa,"VLTR","LRTL",xa.swap,xa)),pa}function c(pa){return(pa=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(pa))?
"z">=pa[0]?"ltr":"rtl":""}function u(pa,Y){pa=pa.split("");var ka=[];t(pa,ka,Y);if(0!==Y.hiLevel&&Y.swap.substr(0,1)!==Y.swap.substr(1,2))for(var ta=0;ta<pa.length;ta++)if(1===ka[ta]){var xa=ta;b:{var Da=void 0;for(var Ja=pa[ta],La=0,Ya=F.length-1;La<=Ya;)if(Da=Math.floor((La+Ya)/2),Ja<F[Da][0])Ya=Da-1;else if(Ja>F[Da][0])La=Da+1;else{Da=F[Da][1];break b}Da=Ja}pa[xa]=Da}a(2,pa,ka,Y);a(1,pa,ka,Y);y=ka;return pa.join("")}function t(pa,Y,ka){var ta=pa.length,xa=ka.dir?S:R,Da=null,Ja=null,La=null;Da=
0;Ja=Ja=null;var Ya=-1,Ua=Ja=null,Ta=[],ab=[];ka.hiLevel=ka.dir;ka.lastArabic=!1;ka.hasUbatAl=!1;ka.hasUbatB=!1;ka.hasUbatS=!1;for(Ja=0;Ja<ta;Ja++){Ua=Ja;La=pa[Ja].charCodeAt(0);var fb=V[La>>8];Ta[Ua]=fb<wa?fb:oa[fb-wa][La&255]}for(Ua=0;Ua<ta;Ua++){ab[Ua]=Ja=h(pa,Ta,ab,Ua,ka);Da=xa[Da][Ja];Ja=Da&240;Da&=15;Y[Ua]=La=xa[Da][E];if(0<Ja){if(16===Ja)for(Ja=Ya;Ja<Ua;Ja++)Y[Ja]=1;Ya=-1}if(Ja=xa[Da][C])-1===Ya&&(Ya=Ua);else if(-1<Ya){for(Ja=Ya;Ja<Ua;Ja++)Y[Ja]=La;Ya=-1}Ta[Ua]===ra&&(Y[Ua]=0);ka.hiLevel|=
La}if(ka.hasUbatS)for(pa=0;pa<ta;pa++)if(Ta[pa]===Aa)for(Y[pa]=ka.dir,xa=pa-1;0<=xa;xa--)if(Ta[xa]===va)Y[xa]=ka.dir;else break}function e(pa,Y){pa=pa.split("");if(Y){var ka=[];t(pa,ka,Y);y=ka}pa.reverse();x.reverse();return pa.join("")}function r(pa){for(var Y=0;Y<aa.length;Y++)if(pa>=aa[Y]&&pa<=ia[Y])return!0;return!1}function m(pa,Y,ka,ta){for(;Y*ka<ta&&n(pa[Y]);)Y+=ka;return Y*ka<ta&&r(pa[Y])?!0:!1}function a(pa,Y,ka,ta){if(!(ta.hiLevel<pa))if(1!==pa||ta.dir!==w||ta.hasUbatB){ta=Y.length;for(var xa=
0,Da,Ja,La;xa<ta;){if(ka[xa]>=pa){for(Da=xa+1;Da<ta&&ka[Da]>=pa;)Da++;for(Ja=Da-1;xa<Ja;xa++,Ja--)La=Y[xa],Y[xa]=Y[Ja],Y[Ja]=La,La=x[xa],x[xa]=x[Ja],x[Ja]=La;xa=Da}xa++}}else Y.reverse(),x.reverse()}function h(pa,Y,ka,ta,xa){return{UBAT_L:function(){xa.lastArabic=!1;return M},UBAT_R:function(){xa.lastArabic=!1;return X},UBAT_ON:function(){return ha},UBAT_AN:function(){return ea},UBAT_EN:function(){return xa.lastArabic?ea:fa},UBAT_AL:function(){xa.lastArabic=!0;xa.hasUbatAl=!0;return X},UBAT_WS:function(){return ha},
UBAT_CS:function(){var Da,Ja;if(1>ta||ta+1>=Y.length||(Da=ka[ta-1])!==fa&&Da!==ea||(Ja=Y[ta+1])!==fa&&Ja!==ea)return ha;xa.lastArabic&&(Ja=ea);return Ja===Da?Ja:ha},UBAT_ES:function(){return(0<ta?ka[ta-1]:ra)===fa&&ta+1<Y.length&&Y[ta+1]===fa?fa:ha},UBAT_ET:function(){if(0<ta&&ka[ta-1]===fa)return fa;if(xa.lastArabic)return ha;for(var Da=ta+1,Ja=Y.length;Da<Ja&&Y[Da]===Ga;)Da++;return Da<Ja&&Y[Da]===fa?fa:ha},UBAT_NSM:function(){if("VLTR"===xa.inFormat){for(var Da=Y.length,Ja=ta+1;Ja<Da&&Y[Ja]===
ca;)Ja++;if(Ja<Da&&(Da=pa[ta],Ja=Y[Ja],(1425<=Da&&2303>=Da||64286===Da)&&(Ja===X||Ja===Ea)))return X}return 1>ta||Y[ta-1]===ra?ha:ka[ta-1]},UBAT_B:function(){xa.lastArabic=!0;xa.hasUbatB=!0;return xa.dir},UBAT_S:function(){xa.hasUbatS=!0;return ha},UBAT_LRE:function(){xa.lastArabic=!1;return ha},UBAT_RLE:function(){xa.lastArabic=!1;return ha},UBAT_LRO:function(){xa.lastArabic=!1;return ha},UBAT_RLO:function(){xa.lastArabic=!1;return ha},UBAT_PDF:function(){xa.lastArabic=!1;return ha},UBAT_BN:function(){return ha}}[ja[Y[ta]]]()}
function q(pa,Y){for(var ka=0;ka<Q.length;ka++)if(pa===Q[ka])return Y[ka];return pa}function n(pa){return"\u064b"<=pa&&"\u0655">=pa?!0:!1}function k(pa){if("L"===pa)return"LTR";if("R"===pa)return"RTL";if("C"===pa)return"CLR";if("D"===pa)return"CRL"}function g(pa,Y){for(var ka=0;ka<H.length;ka++)if(pa===H[ka])return Y[ka];return pa}function b(pa,Y,ka,ta){for(var xa=0;xa<pa.length;xa++)if(pa[xa]>Y||!ka&&pa[xa]===Y)pa[xa]+=ta}f.getObject("string",!0,dojox);f=B("dojox.string.BidiEngine",l,{inputFormat:"ILYNN",
outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(pa,Y,ka){this.sourceToTarget=[];this.targetToSource=[];if(!pa)return"";var ta=this.sourceToTarget,xa=this.targetToSource,Da=pa.length;x=[];y=[];for(var Ja=0;Ja<Da;Ja++)ta[Ja]=Ja,xa[Ja]=Ja,x[Ja]=Ja;if(!this.checkParameters(Y,ka))return pa;Y=this.inputFormat;ka=this.outputFormat;ta=pa;ta=D;Ja=k(Y.charAt(1));xa=k(ka.charAt(1));var La="I"===Y.charAt(0)?"L":Y.charAt(0);Da="I"===ka.charAt(0)?"L":ka.charAt(0);Ja=La+
Ja;xa=Da+xa;Da=Y.charAt(2)+ka.charAt(2);ta.defInFormat=Ja;ta.defOutFormat=xa;ta.defSwap=Da;pa=d(pa,Ja,xa,Da,ta);ta=!1;if("R"===ka.charAt(1))ta=!0;else if("C"===ka.charAt(1)||"D"===ka.charAt(1))ta=this.checkContextual(pa);xa=this.sourceToTarget=x;Da=Array(xa.length);for(Ja=0;Ja<xa.length;Ja++)Da[xa[Ja]]=Ja;v=this.targetToSource=Da;if(Y.charAt(3)===ka.charAt(3))ta=pa;else if("S"===ka.charAt(3))if(Y=ta,ka=!0,0===pa.length)ta=void 0;else{void 0===Y&&(Y=!0);void 0===ka&&(ka=!0);pa=String(pa);pa=pa.split("");
var Ya=0;xa=1;ta=pa.length;Y||(Ya=pa.length-1,xa=-1,ta=1);Da=ta;Ja=ka;var Ua=0;ta=[];for(La=0;Ya*xa<Da;Ya+=xa)if(r(pa[Ya])||n(pa[Ya])){var Ta;if(Ta="\u0644"===pa[Ya])b:{for(var ab=pa,fb=Ya+xa,kb=xa,qb=Da;fb*kb<qb&&n(ab[fb]);)fb+=kb;Ta=" ";if(fb*kb<qb)for(Ta=ab[fb],ab=0;ab<H.length;ab++)if(H[ab]===Ta){Ta=!0;break b}Ta=!1}if(Ta){pa[Ya]=0===Ua?g(pa[Ya+xa],J):g(pa[Ya+xa],K);Ya+=xa;Ua=pa;Ta=Ya;ab=xa;for(fb=Da;Ta*ab<fb&&n(Ua[Ta]);)Ta+=ab;Ta*ab<fb&&(Ua[Ta]=" ");Ja&&(ta[La]=Ya,La++);Ua=0}else{Ta=pa[Ya];if(1===
Ua){ab=Ya;if(m(pa,Ya+xa,xa,Da))b:for(fb=pa[Ya],kb=0;kb<Q.length;kb++){if(fb===Q[kb]){fb=N[kb];break b}}else fb=q(pa[Ya],I);pa[ab]=fb}else!0===m(pa,Ya+xa,xa,Da)?pa[Ya]=q(pa[Ya],L):pa[Ya]=q(pa[Ya],P);n(Ta)||(Ua=1);b:{for(ab=0;ab<W.length;ab++)if(W[ab]===Ta){Ta=!0;break b}Ta=!1}!0===Ta&&(Ua=0)}}else Ua=0;xa="";for(Da=0;Da<pa.length;Da++){if(Ja=ka){b:{for(Ja=0;Ja<ta.length;Ja++)if(ta[Ja]===Da)break b;Ja=-1}Ja=-1<Ja}Ja?(b(v,Da,!Y,-1),x.splice(Da,1)):xa+=pa[Da]}ta=xa}else if(Y=pa,ka=ta,pa=!0,0===Y.length)ta=
void 0;else for(void 0===pa&&(pa=!0),void 0===ka&&(ka=!0),Y=String(Y),ta="",xa=[],xa=Y.split(""),Da=0;Da<Y.length;Da++)Ja=!1,"\ufe70"<=xa[Da]&&"\ufeff">xa[Da]?(La=Y.charCodeAt(Da),"\ufef5"<=xa[Da]&&"\ufefc">=xa[Da]?(ka?(0<Da&&pa&&" "===xa[Da-1]?ta=ta.substring(0,ta.length-1)+"\u0644":(ta+="\u0644",Ja=!0),ta+=H[(La-65269)/2]):(ta+=H[(La-65269)/2],ta+="\u0644",Da+1<Y.length&&pa&&" "===xa[Da+1]?Da++:Ja=!0),Ja&&(b(v,Da,!0,1),x.splice(Da,0,x[Da]))):ta+=Z[La-65136]):ta+=xa[Da];this.sourceToTarget=x;this.targetToSource=
v;this.levels=y;return ta},_inputFormatSetter:function(pa){if(!A.test(pa))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=pa},_outputFormatSetter:function(pa){if(!A.test(pa))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=pa},checkParameters:function(pa,Y){pa?this.set("inputFormat",pa):pa=this.inputFormat;Y?this.set("outputFormat",Y):Y=this.outputFormat;return pa===Y?!1:!0},checkContextual:function(pa){pa=c(pa);if("ltr"!==
pa&&"rtl"!==pa){try{pa=document.dir.toLowerCase()}catch(Y){}"ltr"!==pa&&"rtl"!==pa&&(pa="ltr")}return pa},hasBidiChar:function(pa){return G.test(pa)}});var x=[],v=[],y=[],D={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},E=5,C=6,z=0,w=1,A=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,G=/[\u0591-\u06ff\ufb1d-\ufefc]/,F=[["(",")"],[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]",
"["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],H=["\u0622","\u0623","\u0625","\u0627"],J=["\ufef5","\ufef7","\ufef9","\ufefb"],
K=["\ufef6","\ufef8","\ufefa","\ufefc"],Q="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),P="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),
I="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),N="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),
L="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),W="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),Z="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
aa=["\u0621","\u0641"],ia=["\u063a","\u064a"],R=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],S=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],M=0,X=1,fa=2,ea=3,ha=4,ra=5,Aa=6,Ea=7,va=8,Ga=11,ca=12,ja="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),wa=100;B=M;l=X;var za=fa,Fa=ea,O=ha,ya=ra,Ha=Aa,da=Ea,Oa=va,
Na=Ga,Ca=ca,V=[wa+0,B,B,B,B,wa+1,wa+2,wa+3,l,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,wa+4,O,O,O,B,O,B,O,B,O,O,O,B,B,O,O,B,B,B,B,B,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,B,B,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,B,B,O,O,B,B,O,O,B,B,O,O,O,O,O,O,O,O,O,O,O,
O,O,O,O,O,O,O,O,O,O,O,O,B,B,B,wa+5,da,da,wa+6,wa+7],oa=[[18,18,18,18,18,18,18,18,18,Ha,ya,Ha,Oa,ya,18,18,18,18,18,18,18,18,18,18,18,18,18,18,ya,ya,ya,Ha,Oa,O,O,Na,Na,Na,O,O,O,O,O,10,9,10,9,9,za,za,za,za,za,za,za,za,za,za,9,O,O,O,O,O,O,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O,O,O,O,O,O,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O,O,O,O,18,18,18,18,18,18,ya,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,O,Na,Na,Na,Na,O,O,O,O,B,O,O,18,O,O,Na,Na,
za,za,O,B,O,O,O,za,B,O,O,O,O,O,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O,B,B,B,B,B,B,B,B],[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O,O,O,O,O,O,O,O,O,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O,O,B,B,B,B,B,B,B,O,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O,B,O,O,O,O,O,O,O,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,
Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,l,Ca,l,Ca,Ca,l,Ca,Ca,l,Ca,O,O,O,O,O,O,O,O,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,O,O,O,O,O,l,l,l,l,l,O,O,O,O,O,O,O,O,O,O,O],[Fa,Fa,Fa,Fa,O,O,O,O,da,Na,Na,da,9,da,O,O,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,da,O,O,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,
Fa,Fa,Fa,Fa,Fa,Fa,Fa,Fa,Fa,Fa,Na,Fa,Fa,da,da,da,Ca,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Fa,O,Ca,Ca,Ca,Ca,Ca,Ca,da,da,Ca,Ca,O,Ca,Ca,Ca,Ca,da,da,za,za,za,za,za,za,za,za,za,za,da,da,da,da,da,da],[da,da,da,da,da,da,da,
da,da,da,da,da,da,da,O,da,da,Ca,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,O,O,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,
Ca,Ca,da,O,O,O,O,O,O,O,O,O,O,O,O,O,O,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,l,l,O,O,O,O,l,O,O,O,O,O],[Oa,Oa,Oa,Oa,Oa,Oa,Oa,Oa,Oa,Oa,Oa,18,18,18,B,l,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,Oa,ya,13,14,15,16,17,9,Na,Na,Na,Na,Na,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,9,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,Oa,18,18,18,18,18,O,O,O,O,O,18,18,18,18,18,18,za,B,O,O,za,za,za,za,za,za,10,10,O,O,O,B,za,za,za,za,za,za,za,za,
za,za,10,10,O,O,O,O,B,B,B,B,B,B,B,B,B,B,B,B,B,O,O,O,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,Na,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O],[B,B,B,B,B,B,B,O,O,O,O,O,O,O,O,O,O,O,O,B,B,B,B,B,O,O,O,O,O,l,Ca,l,l,l,l,l,l,l,l,l,l,10,l,l,l,l,l,l,l,l,l,l,l,l,l,O,l,l,l,l,l,O,l,O,l,l,O,l,l,O,l,l,l,l,l,l,l,l,l,l,da,da,da,da,da,da,da,da,da,da,da,da,
da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da],[Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,
Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,Ca,Ca,Ca,Ca,Ca,Ca,Ca,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,9,O,9,O,O,9,O,O,O,O,O,O,O,O,O,Na,O,O,10,10,O,O,O,O,O,Na,Na,O,O,O,O,O,da,da,da,da,da,O,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,
da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,O,O,18],[O,O,O,Na,Na,Na,O,O,O,O,O,10,9,10,9,9,za,za,za,za,za,za,za,za,za,za,9,O,O,O,O,O,O,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O,O,O,O,O,O,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O,O,O,O,O,O,O,O,O,O,O,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,
B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O,O,O,B,B,B,B,B,B,O,O,B,B,B,B,B,B,O,O,B,B,B,B,B,B,O,O,B,B,B,O,O,O,Na,Na,O,O,O,Na,Na,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O]];return f})},"esri/symbols/MarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(f,B,l,d,c,u){f=f(u,{declaredClass:"esri.symbol.MarkerSymbol",angle:0,xoffset:0,yoffset:0,size:12,constructor:function(t){t&&B.isObject(t)&&(this.size="auto"===
this.size?this.size:d.pt2px(this.size),this.xoffset=d.pt2px(this.xoffset),this.yoffset=d.pt2px(this.yoffset),this.angle&&(this.angle*=-1))},setAngle:function(t){this.angle=t;return this},setSize:function(t){this.size=t;return this},setOffset:function(t,e){this.xoffset=t;this.yoffset=e;return this},toJson:function(){var t=d.px2pt(this.size);t=isNaN(t)?void 0:t;var e=d.px2pt(this.xoffset);e=isNaN(e)?void 0:e;var r=d.px2pt(this.yoffset);r=isNaN(r)?void 0:r;return B.mixin(this.inherited("toJson",arguments),
{size:"auto"===this.size?this.size:t,angle:this.angle&&-1*this.angle,xoffset:e,yoffset:r})}});B.setObject("symbol.MarkerSymbol",f,c);return f})},"esri/symbols/Symbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../Color".split(" "),function(f,B,l,d,c,u){f=f(null,{declaredClass:"esri.symbol.Symbol",color:new u([0,0,0,1]),type:null,constructor:function(t){t&&B.isObject(t)&&(B.mixin(this,t),this.color&&c.isDefined(this.color[0])&&(this.color=u.toDojoColor(this.color)),
(t=this.type)&&0===t.indexOf("esri")&&(this.type={esriSMS:"simplemarkersymbol",esriPMS:"picturemarkersymbol",esriSLS:"simplelinesymbol",esriCLS:"cartographiclinesymbol",esriSFS:"simplefillsymbol",esriPFS:"picturefillsymbol",esriTS:"textsymbol",esriSHD:"shieldlabelsymbol"}[t]))},setColor:function(t){this.color=t;return this},toJson:function(){return{color:u.toJsonColor(this.color)}}});B.setObject("symbol.Symbol",f,d);return f})},"esri/Color":function(){define(["dojo/_base/declare","dojo/_base/Color",
"dojo/has","./kernel"],function(f,B,l,d){var c=f([B],{declaredClass:"esri.Color"});c.toJsonColor=function(u){return u&&[u.r,u.g,u.b,1<u.a?u.a:Math.round(255*u.a)]};c.toDojoColor=function(u){return u&&new c([u[0],u[1],u[2],u[3]/255])};l="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(f=0;f<l.length;f++)c[l[f]]=B[l[f]];return d.Color=c})},"esri/symbols/SimpleLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./LineSymbol".split(" "),
function(f,B,l,d,c,u,t,e){var r={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"},m={color:[0,0,0,1],style:r.STYLE_SOLID,width:1};f=f(e,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",marker:null,_styles:{solid:"esriSLSSolid",
dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(a,h,q){a?B.isString(a)?(this.style=a,h&&(this.color=h),q&&(this.width=q)):(this.style=t.valueOf(this._styles,a.style)||r.STYLE_SOLID,this.marker=
a.marker):(B.mixin(this,m),this.color=new l(this.color),this.width=c.pt2px(this.width))},setStyle:function(a){this.style=a;return this},setMarker:function(a){this.marker=a},getStroke:function(){return this.style===r.STYLE_NULL||0===this.width?null:{color:this.color,style:this.style,width:this.width}},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){return t.fixJson(B.mixin(this.inherited("toJson",
arguments),{type:"esriSLS",style:this._styles[this.style],marker:this.marker?B.clone(this.marker):void 0}))}});B.mixin(f,r);f.defaultProps=m;B.setObject("symbol.SimpleLineSymbol",f,u);u.symbol.defaultSimpleLineSymbol=m;return f})},"esri/symbols/LineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(f,B,l,d,c,u){f=f(u,{declaredClass:"esri.symbol.LineSymbol",constructor:function(t){B.isObject(t)?this.width=d.pt2px(this.width):
this.width=12},setWidth:function(t){this.width=t;return this},toJson:function(){var t=d.px2pt(this.width);t=isNaN(t)?void 0:t;return B.mixin(this.inherited("toJson",arguments),{width:t})}});B.setObject("symbol.LineSymbol",f,c);return f})},"esri/symbols/PictureMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol".split(" "),function(f,B,l,d,c,u,t,e){var r={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};f=
f(e,{declaredClass:"esri.symbol.PictureMarkerSymbol",type:"picturemarkersymbol",constructor:function(m,a,h){m?B.isString(m)?(this.url=m,a&&(this.width=a),h&&(this.height=h)):(this.width=d.pt2px(null==m.width?r.width:m.width),this.height=d.pt2px(null==m.height?r.height:m.height),a=m.imageData,9>l("ie")||!a||(h=this.url,this.url="data:"+(m.contentType||"image")+";base64,"+a,this.imageData=h)):(B.mixin(this,r),this.width=d.pt2px(this.width),this.height=d.pt2px(this.height))},getStroke:function(){return null},
getFill:function(){return null},setWidth:function(m){this.width=m;return this},setHeight:function(m){this.height=m;return this},setUrl:function(m){m!==this.url&&(delete this.imageData,delete this.contentType);this.url=m;return this},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var m=this.url,a=this.imageData;if(0===m.indexOf("data:")){var h=
m;m=a;a=h.indexOf(";base64,")+8;a=h.substr(a)}!B.isString(m)||0!==m.indexOf("/")&&0!==m.indexOf("//")&&0!==m.indexOf("./")&&0!==m.indexOf("../")||(m=t.getAbsoluteUrl(m));h=d.px2pt(this.width);h=isNaN(h)?void 0:h;var q=d.px2pt(this.height);q=isNaN(q)?void 0:q;m=u.fixJson(B.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:m,imageData:a,contentType:this.contentType,width:h,height:q}));delete m.color;delete m.size;m.imageData||delete m.imageData;return m}});f.defaultProps=r;B.setObject("symbol.PictureMarkerSymbol",
f,c);c.symbol.defaultPictureMarkerSymbol=r;return f})},"esri/symbols/CartographicLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./SimpleLineSymbol".split(" "),function(f,B,l,d,c,u,t,e){var r={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",
STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},m={color:[0,0,0,1],style:r.STYLE_SOLID,width:1,cap:r.CAP_BUTT,join:r.JOIN_MITER,miterLimit:10};f=f(e,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",
bevel:"esriLJSBevel"},constructor:function(a,h,q,n,k,g){a?B.isString(a)?(this.style=a,h&&(this.color=h),void 0!==q&&(this.width=q),n&&(this.cap=n),k&&(this.join=k),void 0!==g&&(this.miterLimit=g)):(this.cap=t.valueOf(this._caps,a.cap),this.join=t.valueOf(this._joins,a.join),this.width=c.pt2px(a.width),this.miterLimit=c.pt2px(a.miterLimit)):(B.mixin(this,m),this.color=new l(this.color),this.width=c.pt2px(this.width),this.miterLimit=c.pt2px(this.miterLimit))},setCap:function(a){this.cap=a;return this},
setJoin:function(a){this.join=a;return this},setMiterLimit:function(a){this.miterLimit=a;return this},getStroke:function(){return B.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:this.join===r.JOIN_MITER?this.miterLimit:this.join})},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){var a=c.px2pt(this.miterLimit);a=isNaN(a)?void 0:a;return t.fixJson(B.mixin(this.inherited("toJson",
arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:a}))}});B.mixin(f,r);f.defaultProps=m;B.setObject("symbol.CartographicLineSymbol",f,u);u.symbol.defaultCartographicLineSymbol=m;return f})},"esri/symbols/SimpleFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./FillSymbol ./SimpleLineSymbol require".split(" "),function(f,B,l,d,c,u,t,e,r,m){var a={STYLE_SOLID:"solid",STYLE_NULL:"none",
STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"},h={style:a.STYLE_SOLID,color:[0,0,0,.25]};f=f(e,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",
vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(q,n,k){q?B.isString(q)?(this.style=q,void 0!==n&&(this.outline=n),void 0!==k&&(this.color=k)):this.style=t.valueOf(this._styles,q.style):(B.mixin(this,h),this.outline=new r(this.outline),this.color=new l(this.color))},setStyle:function(q){this.style=q;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},
getFill:function(){var q=this.style;return q===a.STYLE_NULL?null:q===a.STYLE_SOLID?this.color:B.mixin({},c.defaultPattern,{src:m.toUrl("../images/symbol/sfs/"+q+".png"),width:10,height:10})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){return t.fixJson(B.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}))}});B.mixin(f,a);f.defaultProps=
h;B.setObject("symbol.SimpleFillSymbol",f,u);u.symbol.defaultSimpleFillSymbol=h;return f})},"esri/symbols/FillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Symbol ./SimpleLineSymbol".split(" "),function(f,B,l,d,c,u){f=f(c,{declaredClass:"esri.symbol.FillSymbol",constructor:function(t){t&&B.isObject(t)&&t.outline&&(this.outline=new u(t.outline))},setOutline:function(t){this.outline=t;return this},toJson:function(){var t=this.inherited("toJson",arguments);this.outline&&
(t.outline=this.outline.toJson());return t}});B.setObject("symbol.FillSymbol",f,d);return f})},"esri/symbols/PictureFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./FillSymbol".split(" "),function(f,B,l,d,c,u,t,e){var r={xoffset:0,yoffset:0,width:12,height:12};f=f(e,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(m,a,h,q){m?B.isString(m)?(this.url=
m,void 0!==a&&(this.outline=a),void 0!==h&&(this.width=h),void 0!==q&&(this.height=q)):(this.xoffset=d.pt2px(m.xoffset),this.yoffset=d.pt2px(m.yoffset),this.width=d.pt2px(m.width),this.height=d.pt2px(m.height),a=m.imageData,9>l("ie")||!a||(h=this.url,this.url="data:"+(m.contentType||"image")+";base64,"+a,this.imageData=h)):(B.mixin(this,r),this.width=d.pt2px(this.width),this.height=d.pt2px(this.height))},setWidth:function(m){this.width=m;return this},setHeight:function(m){this.height=m;return this},
setOffset:function(m,a){this.xoffset=m;this.yoffset=a;return this},setUrl:function(m){m!==this.url&&(delete this.imageData,delete this.contentType);this.url=m;return this},setXScale:function(m){this.xscale=m;return this},setYScale:function(m){this.yscale=m;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return B.mixin({},d.defaultPattern,{src:this.url,width:this.width*this.xscale,height:this.height*this.yscale,x:this.xoffset,y:this.yoffset})},getShapeDescriptors:function(){return{defaultShape:{type:"path",
path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var m=this.url,a=this.imageData;if(0===m.indexOf("data:")){var h=m;m=a;a=h.indexOf(";base64,")+8;a=h.substr(a)}!B.isString(m)||0!==m.indexOf("/")&&0!==m.indexOf("//")&&0!==m.indexOf("./")&&0!==m.indexOf("../")||(m=t.getAbsoluteUrl(m));h=d.px2pt(this.width);h=isNaN(h)?void 0:h;var q=d.px2pt(this.height);q=isNaN(q)?void 0:q;var n=d.px2pt(this.xoffset);n=isNaN(n)?void 0:n;var k=d.px2pt(this.yoffset);
k=isNaN(k)?void 0:k;m=u.fixJson(B.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:m,imageData:a,contentType:this.contentType,width:h,height:q,xoffset:n,yoffset:k,xscale:this.xscale,yscale:this.yscale}));m.imageData||delete m.imageData;return m}});f.defaultProps=r;B.setObject("symbol.PictureFillSymbol",f,c);c.symbol.defaultPictureFillSymbol=r;return f})},"esri/symbols/TextSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Symbol ./Font".split(" "),
function(f,B,l,d,c,u,t,e,r){var m={type:"textsymbol",x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:d.defaultFont,angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},a={start:"left",middle:"center",end:"right"},h={left:"start",center:"middle",right:"end",justify:"start"},q={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},n=document.createElement("canvas");f=f(e,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(k,
g,b){B.mixin(this,m);this.font=new r(this.font);this.color=new t(this.color);k&&(B.isObject(k)?(B.mixin(this,k),this.color&&u.isDefined(this.color[0])&&(this.color=t.toDojoColor(this.color)),this.type="textsymbol",this.font=new r(this.font),this.xoffset=d.pt2px(this.xoffset),this.yoffset=d.pt2px(this.yoffset),this.angle&&(this.angle*=-1),this.haloSize&&(this.haloSize=d.pt2px(this.haloSize)),this.haloColor&&(this.haloColor=t.toDojoColor(this.haloColor))):(this.text=k,g&&(this.font=g),b&&(this.color=
b)));this.setAlign(this.align||this.getSVGAlign())},setFont:function(k){this.font=k;return this},setSize:function(k){this.font.size=k;return this},setAngle:function(k){this.angle=k;return this},setOffset:function(k,g){this.xoffset=k;this.yoffset=g;return this},setHaloColor:function(k){this.haloColor=k;return this},setHaloSize:function(k){this.haloSize=k;return this},setAlign:function(k){this.align=k;this.setHorizontalAlignment(k&&a[k.toLowerCase()]||"center");return this},setHorizontalAlignment:function(k){this.horizontalAlignment=
k;return this},getSVGAlign:function(){var k=this.horizontalAlignment;return k=k&&h[k.toLowerCase()]||"middle"},setVerticalAlignment:function(k){this.verticalAlignment=k;return this},getSVGBaseline:function(){var k=this.verticalAlignment;return k&&q[k.toLowerCase()]||"alphabetic"},getSVGBaselineShift:function(){return"bottom"===this.verticalAlignment?"super":null},setDecoration:function(k){this.decoration=k;this.font||this.setFont(new r);this.font.setDecoration(k);return this},setRotated:function(k){this.rotated=
k;return this},setKerning:function(k){this.kerning=k;return this},setText:function(k){this.text=k;return this},getStroke:function(){return null},getFill:function(){return this.color},getWidth:function(){var k=n&&n.getContext&&n.getContext("2d");if(k){var g=this.font;k.font=(g.style?g.style:d.defaultFont.style)+" "+(g.weight?g.weight:d.defaultFont.weight)+" "+(g.size?g.size:d.defaultFont.size)+"px "+(g.family?g.family:d.defaultFont.family);return k.measureText(this.text).width}k=this.getHeight();g=
0;var b;for(b=0;b<this.text.length;b++){var x=this.text.charAt(b);g=x==x.toUpperCase()?g+.7*k:g+.5*k}return g},getHeight:function(){return d.normalizedLength(this.font.size)},getShapeDescriptors:function(){var k=this.font;if(k){var g={};k.size&&(g.size=k.size);k.style&&(g.style=k.style);k.variant&&(g.variant=k.variant);k.decoration&&(g.decoration=k.decoration);k.weight&&(g.weight=k.weight);k.family&&(g.family=k.family)}return{defaultShape:{type:"text",text:this.text,x:0,y:this.getHeight()/4,align:"middle",
decoration:this.decoration||k&&k.decoration,rotated:this.rotated,kerning:this.kerning},font:g,fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var k=d.px2pt(this.xoffset),g=d.px2pt(this.yoffset),b=d.px2pt(this.haloSize);k=isNaN(k)?void 0:k;g=isNaN(g)?void 0:g;b=isNaN(b)?void 0:b;return u.fixJson(B.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:b,haloColor:this.haloColor&&
t.toJsonColor(this.haloColor),verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:k,yoffset:g,text:this.text,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}))}});B.mixin(f,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});f.defaultProps=
m;B.setObject("symbol.TextSymbol",f,c);c.symbol.defaultTextSymbol=m;return f})},"esri/symbols/Font":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang".split(" "),function(f,B,l,d,c,u){f=f(null,{declaredClass:"esri.symbol.Font",constructor:function(t,e,r,m,a){t?B.isObject(t)?B.mixin(this,t):(this.size=t,parseFloat(this.size)==this.size&&(this.size+="px"),void 0!==e&&(this.style=e),void 0!==r&&(this.variant=r),void 0!==m&&(this.weight=m),void 0!==a&&
(this.family=a)):B.mixin(this,d.defaultFont);parseFloat(this.size)==this.size&&(this.size+="pt");9>l("ie")&&this.size&&B.isString(this.size)&&-1<this.size.indexOf("em")&&(this.size=d.pt2px(12*parseFloat(this.size))+"px");this.size=this._convert2PxSize(this.size)},setSize:function(t){this.size=this._convert2PxSize(t);return this},_convert2PxSize:function(t){var e;parseFloat(t)==t?e=t:B.isString(t)&&(-1<t.indexOf("pt")?e=d.pt2px(parseFloat(t)):-1<t.indexOf("px")?e=parseFloat(t):-1<t.indexOf("em")?e=
d.pt2px(12*parseFloat(t)):-1<t.indexOf("%")&&(e=d.pt2px(.12*parseFloat(t))));return e},setStyle:function(t){this.style=t;return this},setVariant:function(t){this.variant=t;return this},setWeight:function(t){this.weight=t;return this},setFamily:function(t){this.family=t;return this},setDecoration:function(t){this.decoration=t;return this},toJson:function(){return u.fixJson({size:d.px2pt(this.size),style:this.style,decoration:this.decoration,weight:this.weight,family:this.family})}});B.mixin(f,{STYLE_NORMAL:"normal",
STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});B.setObject("symbol.Font",f,c);return f})},"esri/graphicsUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","./kernel","./geometry/Extent"],function(f,B,l,d,c){l={graphicsExtent:function(u){if(!u||!u.length)return null;var t=null,e,r=u.length;for(e=0;e<r;e++){var m=u[e].geometry;if(m){var a=
m.getExtent();a||"point"!==m.type||null==m.x||null==m.y||(a=new c(m.x,m.y,m.x,m.y,m.spatialReference));a&&(t=t?t.union(a):a)}}return 0>t.getWidth()&&0>t.getHeight()?null:t},getGeometries:function(u){return B.map(u,function(t){return t.geometry})},_encodeGraphics:function(u,t){return B.map(u,function(e,r){e=e.toJson();var m={};e.geometry&&(r=t&&t[r],m.geometry=r&&r.toJson()||e.geometry);e.attributes&&(m.attributes=e.attributes);return m})}};f.mixin(d,l);return l})},"esri/tasks/JobInfo":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","./GPMessage"],function(f,B,l,d,c){f=f(null,{declaredClass:"esri.tasks.JobInfo",constructor:function(u){this.messages=[];B.mixin(this,u);u=this.messages;var t,e=u.length;for(t=0;t<e;t++)u[t]=new c(u[t])},jobId:"",jobStatus:""});B.mixin(f,{STATUS_CANCELLED:"esriJobCancelled",STATUS_CANCELLING:"esriJobCancelling",STATUS_DELETED:"esriJobDeleted",STATUS_DELETING:"esriJobDeleting",STATUS_EXECUTING:"esriJobExecuting",STATUS_FAILED:"esriJobFailed",STATUS_NEW:"esriJobNew",
STATUS_SUBMITTED:"esriJobSubmitted",STATUS_SUCCEEDED:"esriJobSucceeded",STATUS_TIMED_OUT:"esriJobTimedOut",STATUS_WAITING:"esriJobWaiting"});B.setObject("tasks.JobInfo",f,d);return f})},"esri/tasks/GPMessage":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,d){f=f(null,{declaredClass:"esri.tasks.GPMessage",constructor:function(c){B.mixin(this,c)}});B.mixin(f,{TYPE_INFORMATIVE:"esriJobMessageTypeInformative",TYPE_PROCESS_DEFINITION:"esriJobMessageTypeProcessDefinition",
TYPE_PROCESS_START:"esriJobMessageTypeProcessStart",TYPE_PROCESS_STOP:"esriJobMessageTypeProcessStop",TYPE_WARNING:"esriJobMessageTypeWarning",TYPE_ERROR:"esriJobMessageTypeError",TYPE_EMPTY:"esriJobMessageTypeEmpty",TYPE_ABORT:"esriJobMessageTypeAbort"});B.setObject("tasks.GPMessage",f,d);return f})},"esri/tasks/LinearUnit":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,d){f=f(null,{declaredClass:"esri.tasks.LinearUnit",constructor:function(c){c&&
B.mixin(this,c)},distance:0,units:null,toJson:function(){var c={};this.distance&&(c.distance=this.distance);this.units&&(c.units=this.units);return c}});B.setObject("tasks.LinearUnit",f,d);return f})},"esri/tasks/DataFile":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,d){f=f(null,{declaredClass:"esri.tasks.DataFile",constructor:function(c){c&&B.mixin(this,c)},url:null,itemID:null,toJson:function(){var c={};this.url&&(c.url=this.url);this.itemID&&
(c.itemID=this.itemID);return c}});B.setObject("tasks.DataFile",f,d);return f})},"esri/tasks/RasterData":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,d){f=f(null,{declaredClass:"esri.tasks.RasterData",constructor:function(c){c&&B.mixin(this,c)},url:null,format:null,itemID:null,toJson:function(){var c={};this.url&&(c.url=this.url);this.format&&(c.format=this.format);this.itemID&&(c.itemID=this.itemID);return c}});B.setObject("tasks.RasterData",f,
d);return f})},"esri/tasks/Date":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/date/locale","dojo/has","../kernel"],function(f,B,l,d,c){f=f(null,{declaredClass:"esri.tasks.Date",constructor:function(u){u&&(u.format&&(this.format=u.format),this.date=l.parse(u.date,{selector:"date",datePattern:this.format}))},date:new Date,format:"EEE MMM dd HH:mm:ss zzz yyyy",toJson:function(){return{date:l.format(this.date,{selector:"date",datePattern:this.format}),format:this.format}}});B.setObject("tasks.Date",
f,c);return f})},"esri/tasks/ParameterValue":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,d){f=f(null,{declaredClass:"esri.tasks.ParameterValue",constructor:function(c){B.mixin(this,c)}});B.setObject("tasks.ParameterValue",f,d);return f})},"esri/tasks/GPResultImageLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has dojo/io-query ../kernel ../layers/ArcGISDynamicMapServiceLayer".split(" "),function(f,B,l,d,c,u,t){f=
f(t,{declaredClass:"esri.tasks._GPResultImageLayer",constructor:function(e,r){r&&r.imageParameters&&r.imageParameters.extent&&(this.initialExtent=this.fullExtent=r.imageParameters.extent,this.spatialReference=this.initialExtent.spatialReference);this.getImageUrl=B.hitch(this,this.getImageUrl);this.loaded=!0;this.onLoad(this)},getImageUrl:function(e,r,m,a){var h=e.spatialReference.wkid;a(this._url.path+"?"+c.objectToQuery(B.mixin(this._params,{f:"image",bbox:l.toJson(e.toJson()),bboxSR:h,imageSR:h,
size:r+","+m})))}});B.setObject("tasks._GPResultImageLayer",f,u);return f})},"esri/layers/ArcGISDynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/sniff dojo/io-query ../kernel ../config ../lang ../request ../urlUtils ../layerUtils ../geometry/scaleUtils ./DynamicMapServiceLayer ./ArcGISMapServiceLayer ./TimeInfo ./LayerTimeOptions ./ImageParameters ./DynamicLayerInfo ./LayerMapSource".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,
k,g,b,x,v,y){f=f([n,k],{declaredClass:"esri.layers.ArcGISDynamicMapServiceLayer",_eventMap:{"visible-layers-change":["visibleLayers"]},constructor:function(D,E,C){D=E&&E.imageParameters;var z=B.hitch;if(D){var w=D.layerDefinitions;w&&this.setLayerDefinitions(w);D.layerOption===x.LAYER_OPTION_SHOW&&(this.visibleLayers=[].concat(D.layerIds),this.onVisibleLayersChange(this.visibleLayers))}this._setIsPNG32=z(this,this._setIsPNG32);this.dpi=D&&D.dpi||96;this.imageFormat=D&&D.format||"png8";this.imageTransparency=
D&&!1===D.transparent?!1:!0;this._setIsPNG32();this.gdbVersion=E&&E.gdbVersion;this._params.gdbVersion=this.gdbVersion;w=D&&D.layerDefinitions;B.mixin(this._params,this._url.query,{dpi:this.dpi,transparent:this.imageTransparency,format:this.imageFormat},D?D.toJson():{});w&&(this._params.layerDefs=w);this.getImageUrl=z(this,this.getImageUrl);this._initLayer=z(this,this._initLayer);this._load=z(this,this._load);this.useMapImage=E?E.useMapImage:!1;this._loadCallback=E&&E.loadCallback;(E=E&&E.resourceInfo)?
this._initLayer(E):(void 0===C||!1===C)&&this._load();this.registerConnectEvents()},disableClientCaching:!1,layerDefinitions:null,_initLayer:function(D,E){this.inherited(arguments);D.timeInfo&&(this.timeInfo=new g(D.timeInfo));this.loaded=!0;this.onLoad(this);var C=this._loadCallback;C&&(delete this._loadCallback,C(this))},getImageUrl:function(D,E,C,z){var w=this._url.path+"/export",A=this._params,G=A.token=this._getToken(),F=D.spatialReference.wkid||d.toJson(D.spatialReference.toJson()),H=this._errorHandler;
delete A._ts;B.mixin(A,{bbox:D.xmin+","+D.ymin+","+D.xmax+","+D.ymax,bboxSR:F,imageSR:F,size:E+","+C},this.disableClientCaching?{_ts:(new Date).getTime()}:{});A.layerDefs&&(D=h._serializeLayerDefinitions(A.layerDefs,10.5<=this.version),A=B.mixin({},A),delete A.layerDefs,A.layerDefs=D);D=a.addProxy(a.normalize(w)+"?"+u.objectToQuery(B.mixin({},A,{f:"image"})));D.length>e.defaults.io.postLength||this.useMapImage?this._jsonRequest=m({url:w,content:B.mixin(A,{f:"json"}),callbackParamName:"callback",load:function(J){J.imageData?
J="data:"+(J.contentType||"image")+";base64,"+J.imageData:(J=J.href,G&&(J+=-1===J.indexOf("?")?"?token\x3d"+G:"\x26token\x3d"+G),J=a.addProxy(J));z(J)},error:H}):z(D)},_setIsPNG32:function(){var D=this.imageFormat.toLowerCase(),E=c("ie");this.isPNG32=E&&6===E&&("png32"===D||"png24"===D)&&this.imageTransparency},_setTime:function(D){var E=this.timeInfo;D=this._params.time=D?D.toJson().join(","):null;if(10.02>this.version&&E)if(D)this._params.layerTimeOptions=h._serializeTimeOptions(this.layerTimeOptions);
else{var C=this.layerInfos;if(C){var z=this.layerTimeOptions,w=z?z.slice(0):[],A=[];l.forEach(C,function(G){G.subLayerIds||A.push(G.id)});A.length&&(l.forEach(A,function(G){if(!w[G]){var F=new b;F.useTime=!1;w[G]=F}}),this._params.layerTimeOptions=h._serializeTimeOptions(w,A))}}10.02<=this.version&&E&&!D&&!E.hasLiveData&&(this._params.time="null,null")},setDPI:function(D,E){this.dpi=this._params.dpi=D;E||this.refresh(!0)},setImageFormat:function(D,E){this.imageFormat=this._params.format=D;this._setIsPNG32();
E||this.refresh(!0)},setImageTransparency:function(D,E){this.imageTransparency=this._params.transparent=D;this._setIsPNG32();E||this.refresh(!0)},setVisibleLayers:function(D,E){this.visibleLayers=D;this._params.layers=x.LAYER_OPTION_SHOW+":"+(D.length?D.join():"-1");this._updateDynamicLayers();E||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},onVisibleLayersChange:function(){},setDefaultVisibleLayers:function(D){this.visibleLayers=this._defaultVisibleLayers;this._params.layers=null;
this._updateDynamicLayers();D||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},setLayerDefinitions:function(D,E){this.layerDefinitions=D;this._params.layerDefs=D;this._updateDynamicLayers();E||this.refresh(!0)},setDefaultLayerDefinitions:function(D){this.layerDefinitions=this._params.layerDefs=null;this._updateDynamicLayers();D||this.refresh(!0)},setDisableClientCaching:function(D){this.disableClientCaching=D},setLayerTimeOptions:function(D,E){this.layerTimeOptions=D;this._params.layerTimeOptions=
h._serializeTimeOptions(D);this._updateDynamicLayers();E||this.refresh(!0)},refresh:function(D){if(!0===D)this.inherited(arguments);else{var E=this.disableClientCaching;this.disableClientCaching=!0;this.inherited(arguments);this.disableClientCaching=E}},setLayerDrawingOptions:function(D,E){this.layerDrawingOptions=D;this._updateDynamicLayers();E||this.refresh(!0)},setDynamicLayerInfos:function(D,E){D&&0<D.length?(this.dynamicLayerInfos=D,this.visibleLayers=h._getDefaultVisibleLayers(D),this.onVisibleLayersChange(this.visibleLayers)):
this.dynamicLayerInfos=this.layerDrawingOptions=null;this._updateDynamicLayers();E||this.refresh(!0)},createDynamicLayerInfosFromLayerInfos:function(){var D=[],E;l.forEach(this.layerInfos,function(C){E=new v(C.toJson());E.source=new y({mapLayerId:C.id});D.push(E)});return D},_onDynamicLayersChange:function(){},_updateDynamicLayers:function(){if(this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length||this.layerDrawingOptions&&0<this.layerDrawingOptions.length){this.dynamicLayerInfos&&0!==this.dynamicLayerInfos.length||
(this.dynamicLayerInfos=this.createDynamicLayerInfosFromLayerInfos());var D=this._map&&q.getScale(this._map);D=this._getDynLayerObjs(D);D=d.toJson(D);this._params.dynamicLayers&&this._params.dynamicLayers.length===D.length&&this._params.dynamicLayers===D||(this._params.dynamicLayers=D,this._onDynamicLayersChange(this._params.dynamicLayers))}else this._params.dynamicLayers?(this._params.dynamicLayers=null,this._onDynamicLayersChange(null)):this._params.dynamicLayers=null},_getDynLayerObjs:function(D){var E=
this.dynamicLayerInfos,C=[],z=this.visibleLayers,w=D?h._getLayersForScale(D,E):z;l.forEach(E,function(A){if(!A.subLayerIds){var G=A.id;if(-1!==l.indexOf(z,G)&&-1!==l.indexOf(w,G)){var F={id:G,name:A.name};F.source=A.source&&A.source.toJson();var H;this.layerDefinitions&&this.layerDefinitions[G]&&(H=this.layerDefinitions[G]);H&&(F.definitionExpression=H);var J;this.layerDrawingOptions&&this.layerDrawingOptions[G]&&(J=this.layerDrawingOptions[G]);J&&(H=J.toJson(),this._fixMarkerColor(H.renderer),F.drawingInfo=
H);var K;this.layerTimeOptions&&this.layerTimeOptions[G]&&(K=this.layerTimeOptions[G]);K&&(F.layerTimeOptions=K.toJson());F.minScale=A.minScale||0;F.maxScale=A.maxScale||0;C.push(F)}}},this);return C},_fixMarkerColor:function(D){l.forEach(this._getAllSimpleMarkerSymbols(D),function(E){if(!E.color){var C=[0,0,0,0],z=E.outline&&E.outline.color;"esriSMSX"!==E.style&&"esriSMSCross"!==E.style||!z||(C=z.slice(0));E.color=C}})},_getAllSimpleMarkerSymbols:function(D){return l.filter(this._getAllSymbols(D),
function(E){return"esriSMS"===E.type})},_getAllSymbols:function(D){var E=[];D&&(E.push(D.symbol),E.push(D.defaultSymbol),l.forEach(D.uniqueValueInfos||D.classBreakInfos,function(C){E.push(C.symbol)}),E=l.filter(E,r.isDefined));return E},_onExtentChangeHandler:function(D,E,C){C&&this._updateDynamicLayers();this.inherited(arguments)},_setMap:function(D,E,C){this._map=D;this._updateDynamicLayers();return this.inherited(arguments)},onGDBVersionChange:function(){},setGDBVersion:function(D,E){this.gdbVersion=
D;this._params.gdbVersion=D;this.onGDBVersionChange();E||this.refresh(!0)},exportMapImage:function(D,E){var C=B.hitch(this,function(){var z=e.defaults.map,w=D&&D.layerDefinitions;D=D?D.toJson(this.normalization):{};w&&(D.layerDefs=w);D=B.mixin({size:z.width+","+z.height},this._params,D,{f:"json"});delete D._ts;D.layerDefs&&(z=h._serializeLayerDefinitions(D.layerDefs,10.5<=this.version),delete D.layerDefs,D.layerDefs=z);this._exportMapImage(this._url.path+"/export",D,E)});if(this.loaded)C();else this.on("load",
C)}});B.setObject("layers.ArcGISDynamicMapServiceLayer",f,t);return f})},"esri/layerUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","./kernel"],function(f,B,l,d,c){d={_serializeLayerDefinitions:function(u,t){var e=[],r=/[:;]/;if(u&&(B.forEach(u,function(a,h){a&&(e.push([h,a]),!t&&r.test(a)&&(t=!0))}),0<e.length)){if(t){var m={};B.forEach(e,function(a){m[a[0]]=a[1]});m=l.toJson(m)}else m=[],B.forEach(e,function(a){m.push(a[0]+":"+a[1])}),m=m.join(";");return m}return null},
_serializeTimeOptions:function(u,t){if(u){var e=[];B.forEach(u,function(r,m){r&&(r=r.toJson(),t&&-1!==B.indexOf(t,m)&&(r.useTime=!1),e.push('"'+m+'":'+l.toJson(r)))});if(e.length)return"{"+e.join(",")+"}"}},_getVisibleLayers:function(u,t){var e=[],r;if(!u)return e;if(t)for(e=t.concat(),r=0;r<u.length;r++){t=u[r];var m=B.indexOf(u,t.id);t.subLayerIds&&-1<m&&(e.splice(m,1),e=e.concat(t.subLayerIds))}else e=this._getDefaultVisibleLayers(u);return e},_getDefaultVisibleLayers:function(u){var t=[],e;if(!u)return t;
for(e=0;e<u.length;e++)0<=u[e].parentLayerId&&-1===B.indexOf(t,u[e].parentLayerId)&&B.some(u,function(r){return r.id===u[e].parentLayerId})||u[e].defaultVisibility&&t.push(u[e].id);return t},_getLayersForScale:function(u,t){var e=[];if(0<u&&t){var r;for(r=0;r<t.length;r++)if(!(0<=t[r].parentLayerId&&-1===B.indexOf(e,t[r].parentLayerId)&&B.some(t,function(q){return q.id===t[r].parentLayerId}))&&0<=t[r].id){var m=!0,a=t[r].maxScale,h=t[r].minScale;if(0<a||0<h)0<a&&0<h?m=a<=u&&u<=h:0<a?m=a<=u:0<h&&(m=
u<=h);m&&e.push(t[r].id)}}return e}};f.mixin(c,d);return d})},"esri/geometry/scaleUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../config","../WKIDUnitConversion"],function(f,B,l,d,c){function u(h,q,n){return h&&q?h.getWidth()/q*(n||e)*39.37*r.screenDPI:0}function t(h,q,n,k,g){return h.expand(k*q/(39.37*((g?n:m.values[m[n]])||e)*r.screenDPI)/h.getWidth())}var e=6370997*Math.PI/180,r=d.defaults,m=c,a={getUnitValueForSR:function(h){return this.getUnitValue(h)||e},getUnitValue:function(h){if(h)if("object"===
typeof h){var q=h.wkid;var n=h.wkt}else"number"===typeof h?q=h:"string"===typeof h&&(n=h);if(q)var k=m.values[m[q]];else n&&-1!==n.search(/^PROJCS/i)&&(h=/UNIT\[([^\]]+)\]\]$/i.exec(n))&&h[1]&&(k=parseFloat(h[1].split(",")[1]));return k},getScale:function(h,q,n){if(1<arguments.length&&null!=q&&!q.declaredClass){var k=h;var g=q;q=null;var b=a.getUnitValue(n)}else k=q||h.extent,g=h.width,b=a.getUnitValue(k&&k.spatialReference);return u(k,g,b)},getExtentForScale:function(h,q,n){return t(n||h.extent,
h.width,a.getUnitValue(h.spatialReference),q,!0)}};f.mixin(f.getObject("geometry",!0,l),a);l.geometry._getScale=u;l.geometry._getExtentForScale=t;return a})},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(f,B){var l={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,
8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,
8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,
8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,
10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,
24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,
31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,
102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,
103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,
103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,
103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for(f=2E3;2045>=f;f++)l[f]=0;for(f=2056;2065>=f;f++)l[f]=0;for(f=2067;2135>=f;f++)l[f]=0;for(f=2137;2154>=
f;f++)l[f]=0;for(f=2161;2170>=f;f++)l[f]=0;for(f=2172;2193>=f;f++)l[f]=0;for(f=2195;2198>=f;f++)l[f]=0;for(f=2200;2203>=f;f++)l[f]=0;for(f=2205;2217>=f;f++)l[f]=0;for(f=2222;2224>=f;f++)l[f]=1;for(f=2225;2250>=f;f++)l[f]=2;for(f=2251;2253>=f;f++)l[f]=1;for(f=2257;2264>=f;f++)l[f]=2;for(f=2274;2279>=f;f++)l[f]=2;for(f=2280;2282>=f;f++)l[f]=1;for(f=2283;2289>=f;f++)l[f]=2;for(f=2290;2292>=f;f++)l[f]=0;for(f=2308;2313>=f;f++)l[f]=0;for(f=2315;2491>=f;f++)l[f]=0;for(f=2494;2866>=f;f++)l[f]=0;for(f=2867;2869>=
f;f++)l[f]=1;for(f=2870;2888>=f;f++)l[f]=2;for(f=2891;2895>=f;f++)l[f]=2;for(f=2896;2898>=f;f++)l[f]=1;for(f=2902;2908>=f;f++)l[f]=2;for(f=2915;2920>=f;f++)l[f]=2;for(f=2921;2923>=f;f++)l[f]=1;for(f=2924;2930>=f;f++)l[f]=2;for(f=2931;2962>=f;f++)l[f]=0;for(f=2964;2968>=f;f++)l[f]=2;for(f=2969;2973>=f;f++)l[f]=0;for(f=2975;2991>=f;f++)l[f]=0;for(f=2995;3051>=f;f++)l[f]=0;for(f=3054;3079>=f;f++)l[f]=0;for(f=3081;3088>=f;f++)l[f]=0;for(f=3092;3101>=f;f++)l[f]=0;for(f=3106;3138>=f;f++)l[f]=0;for(f=3146;3151>=
f;f++)l[f]=0;for(f=3153;3166>=f;f++)l[f]=0;for(f=3168;3172>=f;f++)l[f]=0;for(f=3174;3203>=f;f++)l[f]=0;for(f=3294;3358>=f;f++)l[f]=0;for(f=3367;3403>=f;f++)l[f]=0;for(f=3408;3416>=f;f++)l[f]=0;for(f=3417;3438>=f;f++)l[f]=2;for(f=3441;3446>=f;f++)l[f]=2;for(f=3447;3450>=f;f++)l[f]=0;for(f=3451;3459>=f;f++)l[f]=2;for(f=3460;3478>=f;f++)l[f]=0;for(f=3554;3559>=f;f++)l[f]=0;for(f=3560;3570>=f;f++)l[f]=2;for(f=3571;3581>=f;f++)l[f]=0;for(f=3594;3597>=f;f++)l[f]=0;for(f=3601;3604>=f;f++)l[f]=0;for(f=3637;3639>=
f;f++)l[f]=0;for(f=3665;3667>=f;f++)l[f]=0;for(f=3693;3695>=f;f++)l[f]=0;for(f=3701;3727>=f;f++)l[f]=0;for(f=3728;3739>=f;f++)l[f]=2;for(f=3740;3751>=f;f++)l[f]=0;for(f=3753;3760>=f;f++)l[f]=2;for(f=3761;3773>=f;f++)l[f]=0;for(f=3775;3777>=f;f++)l[f]=0;for(f=3779;3781>=f;f++)l[f]=0;for(f=3783;3785>=f;f++)l[f]=0;for(f=3788;3791>=f;f++)l[f]=0;for(f=3797;3802>=f;f++)l[f]=0;for(f=3814;3816>=f;f++)l[f]=0;for(f=3825;3829>=f;f++)l[f]=0;for(f=3832;3841>=f;f++)l[f]=0;for(f=3844;3852>=f;f++)l[f]=0;for(f=3873;3885>=
f;f++)l[f]=0;for(f=3890;3893>=f;f++)l[f]=0;for(f=3907;3912>=f;f++)l[f]=0;for(f=3942;3950>=f;f++)l[f]=0;for(f=3968;3970>=f;f++)l[f]=0;for(f=3973;3976>=f;f++)l[f]=0;for(f=3986;3989>=f;f++)l[f]=0;for(f=3994;3997>=f;f++)l[f]=0;for(f=4048;4051>=f;f++)l[f]=0;for(f=4056;4063>=f;f++)l[f]=0;for(f=4093;4096>=f;f++)l[f]=0;for(f=4390;4398>=f;f++)l[f]=0;for(f=4399;4413>=f;f++)l[f]=2;for(f=4418;4433>=f;f++)l[f]=2;for(f=4455;4457>=f;f++)l[f]=2;for(f=4484;4489>=f;f++)l[f]=0;for(f=4491;4554>=f;f++)l[f]=0;for(f=4568;4589>=
f;f++)l[f]=0;for(f=4652;4656>=f;f++)l[f]=0;for(f=4766;4800>=f;f++)l[f]=0;for(f=5014;5016>=f;f++)l[f]=0;for(f=5069;5072>=f;f++)l[f]=0;for(f=5105;5130>=f;f++)l[f]=0;for(f=5167;5188>=f;f++)l[f]=0;for(f=5253;5259>=f;f++)l[f]=0;for(f=5269;5275>=f;f++)l[f]=0;for(f=5292;5311>=f;f++)l[f]=0;for(f=5329;5331>=f;f++)l[f]=0;for(f=5343;5349>=f;f++)l[f]=0;for(f=5355;5357>=f;f++)l[f]=0;for(f=5387;5389>=f;f++)l[f]=0;for(f=5459;5463>=f;f++)l[f]=0;for(f=5479;5482>=f;f++)l[f]=0;for(f=5518;5520>=f;f++)l[f]=0;for(f=5530;5539>=
f;f++)l[f]=0;for(f=5550;5552>=f;f++)l[f]=0;for(f=5562;5583>=f;f++)l[f]=0;for(f=5623;5625>=f;f++)l[f]=2;for(f=5631;5639>=f;f++)l[f]=0;for(f=5649;5653>=f;f++)l[f]=0;for(f=5663;5680>=f;f++)l[f]=0;for(f=5682;5685>=f;f++)l[f]=0;for(f=5875;5877>=f;f++)l[f]=0;for(f=5896;5899>=f;f++)l[f]=0;for(f=5921;5940>=f;f++)l[f]=0;for(f=6050;6125>=f;f++)l[f]=0;for(f=6244;6275>=f;f++)l[f]=0;for(f=6328;6348>=f;f++)l[f]=0;for(f=6350;6356>=f;f++)l[f]=0;for(f=6366;6372>=f;f++)l[f]=0;for(f=6381;6387>=f;f++)l[f]=0;for(f=6393;6404>=
f;f++)l[f]=0;for(f=6480;6483>=f;f++)l[f]=0;for(f=6511;6514>=f;f++)l[f]=0;for(f=6579;6581>=f;f++)l[f]=0;for(f=6619;6624>=f;f++)l[f]=0;for(f=6625;6627>=f;f++)l[f]=2;for(f=6628;6632>=f;f++)l[f]=0;for(f=6634;6637>=f;f++)l[f]=0;for(f=6669;6692>=f;f++)l[f]=0;for(f=6707;6709>=f;f++)l[f]=0;for(f=6720;6723>=f;f++)l[f]=0;for(f=6732;6738>=f;f++)l[f]=0;for(f=6931;6933>=f;f++)l[f]=0;for(f=6956;6959>=f;f++)l[f]=0;for(f=7005;7007>=f;f++)l[f]=0;for(f=7057;7070>=f;f++)l[f]=2;for(f=7074;7082>=f;f++)l[f]=0;for(f=7109;7118>=
f;f++)l[f]=0;for(f=7119;7127>=f;f++)l[f]=1;for(f=7374;7376>=f;f++)l[f]=0;for(f=7528;7586>=f;f++)l[f]=0;for(f=7587;7645>=f;f++)l[f]=2;for(f=7692;7696>=f;f++)l[f]=0;for(f=7755;7787>=f;f++)l[f]=0;for(f=7791;7795>=f;f++)l[f]=0;for(f=7799;7801>=f;f++)l[f]=0;for(f=7803;7805>=f;f++)l[f]=0;for(f=7825;7831>=f;f++)l[f]=0;for(f=7845;7859>=f;f++)l[f]=0;for(f=8013;8032>=f;f++)l[f]=0;for(f=8065;8068>=f;f++)l[f]=1;for(f=8518;8529>=f;f++)l[f]=2;for(f=8533;8536>=f;f++)l[f]=2;for(f=8538;8540>=f;f++)l[f]=2;for(f=8677;8679>=
f;f++)l[f]=0;for(f=8836;8840>=f;f++)l[f]=0;for(f=8857;8859>=f;f++)l[f]=0;for(f=8908;8910>=f;f++)l[f]=0;for(f=9154;9159>=f;f++)l[f]=0;for(f=9205;9218>=f;f++)l[f]=0;for(f=9271;9273>=f;f++)l[f]=0;for(f=9295;9297>=f;f++)l[f]=0;for(f=9356;9360>=f;f++)l[f]=0;for(f=9404;9407>=f;f++)l[f]=0;for(f=9476;9482>=f;f++)l[f]=0;for(f=9487;9494>=f;f++)l[f]=0;for(f=9697;9699>=f;f++)l[f]=0;for(f=9821;9865>=f;f++)l[f]=0;for(f=10285;10291>=f;f++)l[f]=0;for(f=10314;10317>=f;f++)l[f]=0;for(f=10448;10465>=f;f++)l[f]=0;for(f=
11114;11118>=f;f++)l[f]=0;for(f=20004;20032>=f;f++)l[f]=0;for(f=20047;20049>=f;f++)l[f]=0;for(f=20062;20092>=f;f++)l[f]=0;for(f=20135;20138>=f;f++)l[f]=0;for(f=20248;20258>=f;f++)l[f]=0;for(f=20348;20358>=f;f++)l[f]=0;for(f=20436;20440>=f;f++)l[f]=0;for(f=20822;20824>=f;f++)l[f]=0;for(f=20904;20932>=f;f++)l[f]=0;for(f=20934;20936>=f;f++)l[f]=0;for(f=21004;21032>=f;f++)l[f]=0;for(f=21035;21037>=f;f++)l[f]=0;for(f=21095;21097>=f;f++)l[f]=0;for(f=21148;21150>=f;f++)l[f]=0;for(f=21207;21264>=f;f++)l[f]=
0;for(f=21307;21364>=f;f++)l[f]=0;for(f=21413;21423>=f;f++)l[f]=0;for(f=21453;21463>=f;f++)l[f]=0;for(f=21473;21483>=f;f++)l[f]=0;for(f=21780;21782>=f;f++)l[f]=0;for(f=21891;21894>=f;f++)l[f]=0;for(f=21896;21899>=f;f++)l[f]=0;for(f=22171;22177>=f;f++)l[f]=0;for(f=22181;22187>=f;f++)l[f]=0;for(f=22191;22197>=f;f++)l[f]=0;for(f=22207;22222>=f;f++)l[f]=0;for(f=22229;22232>=f;f++)l[f]=0;for(f=22234;22236>=f;f++)l[f]=0;for(f=22243;22250>=f;f++)l[f]=0;for(f=22262;22265>=f;f++)l[f]=0;for(f=22307;22322>=
f;f++)l[f]=0;for(f=22348;22357>=f;f++)l[f]=0;for(f=22407;22422>=f;f++)l[f]=0;for(f=22462;22465>=f;f++)l[f]=0;for(f=22521;22525>=f;f++)l[f]=0;for(f=22607;22622>=f;f++)l[f]=0;for(f=22641;22646>=f;f++)l[f]=0;for(f=22648;22657>=f;f++)l[f]=0;for(f=22707;22722>=f;f++)l[f]=0;for(f=22762;22765>=f;f++)l[f]=0;for(f=22807;22822>=f;f++)l[f]=0;for(f=22991;22994>=f;f++)l[f]=0;for(f=23028;23038>=f;f++)l[f]=0;for(f=23301;23333>=f;f++)l[f]=2;for(f=23830;23853>=f;f++)l[f]=0;for(f=23866;23872>=f;f++)l[f]=0;for(f=23877;23884>=
f;f++)l[f]=0;for(f=23886;23894>=f;f++)l[f]=0;for(f=23946;23948>=f;f++)l[f]=0;for(f=24311;24313>=f;f++)l[f]=0;for(f=24342;24347>=f;f++)l[f]=0;for(f=24370;24374>=f;f++)l[f]=10;for(f=24375;24381>=f;f++)l[f]=0;for(f=24718;24721>=f;f++)l[f]=0;for(f=24817;24821>=f;f++)l[f]=0;for(f=24877;24882>=f;f++)l[f]=0;for(f=24891;24893>=f;f++)l[f]=0;for(f=25391;25395>=f;f++)l[f]=0;for(f=25828;25838>=f;f++)l[f]=0;for(f=26191;26195>=f;f++)l[f]=0;for(f=26391;26393>=f;f++)l[f]=0;for(f=26701;26722>=f;f++)l[f]=0;for(f=26729;26799>=
f;f++)l[f]=2;for(f=26801;26803>=f;f++)l[f]=2;for(f=26811;26813>=f;f++)l[f]=2;for(f=26847;26870>=f;f++)l[f]=2;for(f=26891;26899>=f;f++)l[f]=0;for(f=26901;26923>=f;f++)l[f]=0;for(f=26929;26946>=f;f++)l[f]=0;for(f=26948;26998>=f;f++)l[f]=0;for(f=27037;27040>=f;f++)l[f]=0;for(f=27205;27232>=f;f++)l[f]=0;for(f=27258;27260>=f;f++)l[f]=0;for(f=27391;27398>=f;f++)l[f]=0;for(f=27561;27564>=f;f++)l[f]=0;for(f=27571;27574>=f;f++)l[f]=0;for(f=27581;27584>=f;f++)l[f]=0;for(f=27591;27594>=f;f++)l[f]=0;for(f=28191;28193>=
f;f++)l[f]=0;for(f=28348;28358>=f;f++)l[f]=0;for(f=28402;28432>=f;f++)l[f]=0;for(f=28462;28492>=f;f++)l[f]=0;for(f=29118;29122>=f;f++)l[f]=0;for(f=29168;29172>=f;f++)l[f]=0;for(f=29177;29185>=f;f++)l[f]=0;for(f=29187;29195>=f;f++)l[f]=0;for(f=29900;29903>=f;f++)l[f]=0;for(f=30161;30179>=f;f++)l[f]=0;for(f=30491;30494>=f;f++)l[f]=0;for(f=30729;30732>=f;f++)l[f]=0;for(f=31251;31259>=f;f++)l[f]=0;for(f=31265;31268>=f;f++)l[f]=0;for(f=31275;31279>=f;f++)l[f]=0;for(f=31281;31297>=f;f++)l[f]=0;for(f=31461;31469>=
f;f++)l[f]=0;for(f=31491;31495>=f;f++)l[f]=0;for(f=31917;31922>=f;f++)l[f]=0;for(f=31965;32E3>=f;f++)l[f]=0;for(f=32001;32003>=f;f++)l[f]=2;for(f=32005;32031>=f;f++)l[f]=2;for(f=32033;32060>=f;f++)l[f]=2;for(f=32064;32067>=f;f++)l[f]=2;for(f=32074;32077>=f;f++)l[f]=2;for(f=32081;32086>=f;f++)l[f]=0;for(f=32107;32130>=f;f++)l[f]=0;for(f=32133;32159>=f;f++)l[f]=0;for(f=32164;32167>=f;f++)l[f]=2;for(f=32180;32199>=f;f++)l[f]=0;for(f=32201;32260>=f;f++)l[f]=0;for(f=32301;32360>=f;f++)l[f]=0;for(f=32401;32460>=
f;f++)l[f]=0;for(f=32501;32560>=f;f++)l[f]=0;for(f=32601;32662>=f;f++)l[f]=0;for(f=32664;32667>=f;f++)l[f]=2;for(f=32701;32761>=f;f++)l[f]=0;for(f=53001;53004>=f;f++)l[f]=0;for(f=53008;53019>=f;f++)l[f]=0;for(f=53021;53032>=f;f++)l[f]=0;for(f=53034;53037>=f;f++)l[f]=0;for(f=53042;53046>=f;f++)l[f]=0;for(f=53074;53080>=f;f++)l[f]=0;for(f=54001;54004>=f;f++)l[f]=0;for(f=54008;54019>=f;f++)l[f]=0;for(f=54021;54032>=f;f++)l[f]=0;for(f=54034;54037>=f;f++)l[f]=0;for(f=54042;54046>=f;f++)l[f]=0;for(f=54048;54053>=
f;f++)l[f]=0;for(f=54074;54080>=f;f++)l[f]=0;for(f=54098;54101>=f;f++)l[f]=0;for(f=102001;102040>=f;f++)l[f]=0;for(f=102042;102063>=f;f++)l[f]=0;for(f=102065;102067>=f;f++)l[f]=0;for(f=102070;102117>=f;f++)l[f]=0;for(f=102122;102216>=f;f++)l[f]=0;for(f=102221;102377>=f;f++)l[f]=0;for(f=102382;102388>=f;f++)l[f]=0;for(f=102389;102398>=f;f++)l[f]=2;for(f=102399;102444>=f;f++)l[f]=0;for(f=102445;102447>=f;f++)l[f]=2;for(f=102448;102458>=f;f++)l[f]=0;for(f=102459;102468>=f;f++)l[f]=2;for(f=102469;102499>=
f;f++)l[f]=0;for(f=102500;102519>=f;f++)l[f]=1;for(f=102520;102524>=f;f++)l[f]=0;for(f=102525;102529>=f;f++)l[f]=2;for(f=102530;102588>=f;f++)l[f]=0;for(f=102590;102598>=f;f++)l[f]=0;for(f=102601;102603>=f;f++)l[f]=0;for(f=102605;102628>=f;f++)l[f]=0;for(f=102629;102646>=f;f++)l[f]=2;for(f=102648;102700>=f;f++)l[f]=2;for(f=102701;102703>=f;f++)l[f]=0;for(f=102707;102730>=f;f++)l[f]=2;for(f=102733;102758>=f;f++)l[f]=2;for(f=102767;102900>=f;f++)l[f]=0;for(f=102901;102933>=f;f++)l[f]=2;for(f=102934;102950>=
f;f++)l[f]=13;for(f=102951;102955>=f;f++)l[f]=0;for(f=102961;102963>=f;f++)l[f]=0;for(f=102965;102969>=f;f++)l[f]=0;for(f=102971;102973>=f;f++)l[f]=0;for(f=102975;102989>=f;f++)l[f]=0;for(f=102990;102992>=f;f++)l[f]=1;for(f=102997;103002>=f;f++)l[f]=0;for(f=103003;103008>=f;f++)l[f]=2;for(f=103009;103011>=f;f++)l[f]=0;for(f=103012;103014>=f;f++)l[f]=2;for(f=103019;103021>=f;f++)l[f]=0;for(f=103022;103024>=f;f++)l[f]=2;for(f=103029;103031>=f;f++)l[f]=0;for(f=103032;103034>=f;f++)l[f]=2;for(f=103065;103068>=
f;f++)l[f]=0;for(f=103074;103076>=f;f++)l[f]=0;for(f=103077;103079>=f;f++)l[f]=1;for(f=103080;103082>=f;f++)l[f]=0;for(f=103083;103085>=f;f++)l[f]=2;for(f=103090;103093>=f;f++)l[f]=0;for(f=103097;103099>=f;f++)l[f]=0;for(f=103100;103102>=f;f++)l[f]=2;for(f=103107;103109>=f;f++)l[f]=0;for(f=103110;103112>=f;f++)l[f]=2;for(f=103113;103116>=f;f++)l[f]=0;for(f=103117;103120>=f;f++)l[f]=2;for(f=103153;103157>=f;f++)l[f]=0;for(f=103158;103162>=f;f++)l[f]=2;for(f=103163;103165>=f;f++)l[f]=0;for(f=103166;103168>=
f;f++)l[f]=1;for(f=103169;103171>=f;f++)l[f]=2;for(f=103186;103188>=f;f++)l[f]=0;for(f=103189;103191>=f;f++)l[f]=2;for(f=103192;103195>=f;f++)l[f]=0;for(f=103196;103199>=f;f++)l[f]=2;for(f=103200;103224>=f;f++)l[f]=0;for(f=103225;103227>=f;f++)l[f]=1;for(f=103232;103237>=f;f++)l[f]=0;for(f=103238;103243>=f;f++)l[f]=2;for(f=103244;103246>=f;f++)l[f]=0;for(f=103247;103249>=f;f++)l[f]=2;for(f=103254;103256>=f;f++)l[f]=0;for(f=103257;103259>=f;f++)l[f]=2;for(f=103264;103266>=f;f++)l[f]=0;for(f=103267;103269>=
f;f++)l[f]=2;for(f=103300;103375>=f;f++)l[f]=0;for(f=103381;103383>=f;f++)l[f]=0;for(f=103384;103386>=f;f++)l[f]=1;for(f=103387;103389>=f;f++)l[f]=0;for(f=103390;103392>=f;f++)l[f]=2;for(f=103397;103399>=f;f++)l[f]=0;for(f=103400;103471>=f;f++)l[f]=2;for(f=103476;103478>=f;f++)l[f]=0;for(f=103479;103481>=f;f++)l[f]=2;for(f=103486;103488>=f;f++)l[f]=0;for(f=103489;103491>=f;f++)l[f]=2;for(f=103492;103495>=f;f++)l[f]=0;for(f=103496;103499>=f;f++)l[f]=2;for(f=103528;103543>=f;f++)l[f]=0;for(f=103544;103548>=
f;f++)l[f]=2;for(f=103549;103551>=f;f++)l[f]=0;for(f=103552;103554>=f;f++)l[f]=1;for(f=103555;103557>=f;f++)l[f]=2;for(f=103558;103560>=f;f++)l[f]=0;for(f=103571;103573>=f;f++)l[f]=0;for(f=103574;103576>=f;f++)l[f]=2;for(f=103577;103580>=f;f++)l[f]=0;for(f=103581;103583>=f;f++)l[f]=2;for(f=103595;103694>=f;f++)l[f]=0;for(f=103696;103699>=f;f++)l[f]=0;for(f=103700;103793>=f;f++)l[f]=2;for(f=103794;103890>=f;f++)l[f]=0;for(f=103891;103896>=f;f++)l[f]=2;for(f=103900;103971>=f;f++)l[f]=2;for(f=103972;103977>=
f;f++)l[f]=0;for(f=112E3;112101>=f;f++)l[f]=0;return B.WKIDUnitConversion=l})},"esri/layers/DynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/dom-construct dojo/dom-style dojox/gfx/matrix ../kernel ../config ../sniff ../request ../domUtils ./layer ./MapImage".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h,q){var n=e.defaults.map.zoomDuration;f=f(h,{declaredClass:"esri.layers.DynamicMapServiceLayer",_eventMap:{"map-image-export":["mapImage"]},constructor:function(k,
g){this.useMapTime=g&&g.hasOwnProperty("useMapTime")?!!g.useMapTime:!0;this.extentProcessor=g&&g.extentProcessor;k=l.hitch;this._exportMapImageHandler=k(this,this._exportMapImageHandler);this._imgSrcFunc=k(this,this._imgSrcFunc);this._divAlphaImageFunc=k(this,this._divAlphaImageFunc);this._tileLoadHandler=k(this,this._tileLoadHandler);this._tileErrorHandler=k(this,this._tileErrorHandler);this.registerConnectEvents()},opacity:1,isPNG32:!1,_setMap:function(k,g,b){this.inherited(arguments);this._map=
k;var x=this._div=d.create("div",null,g),v=t._css.names,y={position:"absolute",width:k.width+"px",height:k.height+"px",overflow:"visible",opacity:this.opacity},D=r("ie"),E=B.connect,C=k.__visibleDelta;8===D&&delete y.opacity;"css-transforms"===k.navigationMode?(this._isChildLayer||(y[v.transform]=t._css.translate(C.x,C.y),c.set(x,y)),this._left=C.x,this._top=C.y):(y.left="0px",y.top="0px",c.set(x,y),this._left=this._top=0);c.set(x,y);this._onResizeHandler_connect=E(k,"onResize",this,"_onResizeHandler");
this._opacityChangeHandler_connect=E(this,"onOpacityChange",this,"_opacityChangeHandler");this._img_loading=null;this._dragOrigin={x:0,y:0};this.evaluateSuspension();if(this.suspended&&!k.loaded)var z=B.connect(k,"onLoad",this,function(){B.disconnect(z);z=null;this.evaluateSuspension()});this.extentProcessor&&(this._panEndEvalHandle=B.connect(k,"onPanEnd",this,this.evaluateSuspension),this._zoomEndEvalHandle=B.connect(k,"onZoomEnd",this,this.evaluateSuspension));return x},_unsetMap:function(k,g){this._img&&
this._clearEventListeners(this._img);this._img_loading&&this._clearEventListeners(this._img_loading);d.destroy(this._div);this._map=this._div=this._img=this._img_loading=null;var b=B.disconnect;b(this._onResizeHandler_connect);b(this._opacityChangeHandler_connect);b(this._panEndEvalHandle);b(this._zoomEndEvalHandle);this._panEndEvalHandle=this._zoomEndEvalHandle=this._onResizeHandler_connect=this._opacityChangeHandler_connect=null;this._fireUpdateEnd();this._toggleTime();clearTimeout(this._wakeTimer);
this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments)},_onResizeHandler:function(k,g,b){c.set(this._div,{width:g+"px",height:b+"px"});this._onExtentChangeHandler(k)},onSuspend:function(){this.inherited(arguments);this._fireUpdateEnd();this._toggleTime();a.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(){this.inherited(arguments);var k=this._map;this._toggleTime();"css-transforms"===k.navigationMode&&(k=k.__visibleDelta,
this._left=k.x,this._top=k.y,this._isChildLayer||c.set(this._div,t._css.names.transform,t._css.translate(this._left,this._top)));this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(l.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0)}),0)},canResume:function(){var k=this.inherited(arguments);if(k){var g=this._map.extent;this.extentProcessor&&g&&(k=!!this.extentProcessor({layer:this,extent:g,width:this._map.width}).extent)}return k},_enableDrawConnectors:function(){var k=
B.connect,g=this._map;g&&(this._onPanHandler_connect=k(g,"onPan",this,"_onPanHandler"),this._onExtentChangeHandler_connect=k(g,"onExtentChange",this,"_onExtentChangeHandler"),"css-transforms"===g.navigationMode?this._onScaleHandler_connect=k(g,"onScale",this,this._onScaleHandler):this._onZoomHandler_connect=k(g,"onZoom",this,"_onZoomHandler"))},_disableDrawConnectors:function(){var k=B.disconnect;k(this._onPanHandler_connect);k(this._onExtentChangeHandler_connect);k(this._onZoomHandler_connect);k(this._onScaleHandler_connect);
this._onPanHandler_connect=this._onExtentChangeHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=null},_toggleTime:function(){var k=this._map;this.timeInfo&&this.useMapTime&&k&&!this.suspended?(this._timeConnect||(this._timeConnect=B.connect(k,"onTimeExtentChange",this,this._onTimeExtentChangeHandler)),this._setTime(k.timeExtent)):(B.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},_setTime:function(k){this._params&&(this._params.time=k?k.toJson().join(","):
null)},_onPanHandler:function(k,g){this._panDx=g.x;this._panDy=g.y;k=this._dragOrigin;var b=this._map.__visibleDelta,x=this._img;x&&("css-transforms"===this._map.navigationMode?(this._left=b.x+g.x,this._top=b.y+g.y,this._isChildLayer||c.set(this._div,t._css.names.transform,t._css.translate(this._left,this._top))):c.set(x,{left:k.x+g.x+"px",top:k.y+g.y+"px"}))},_onExtentChangeHandler:function(k,g,b){if(!this.suspended){clearTimeout(this._wakeTimer);this._wakeTimer=null;var x=this._map,v=this._img,
y=v&&v.style,D=this._dragOrigin;!g||b||!v||g.x===this._panDx&&g.y===this._panDy||("css-transforms"===x.navigationMode?(g=x.__visibleDelta,this._left=g.x,this._top=g.y,this._isChildLayer||c.set(this._div,t._css.names.transform,t._css.translate(this._left,this._top))):c.set(v,{left:D.x+g.x+"px",top:D.y+g.y+"px"}));v?(D.x=parseInt(y.left,10),D.y=parseInt(y.top,10)):D.x=D.y=0;"css-transforms"===x.navigationMode&&b&&v&&(c.set(v,t._css.names.transition,"none"),v._multiply=v._multiply?u.multiply(v._matrix,
v._multiply):v._matrix);this._fireUpdateStart();if(b=this._img_loading)if(this._clearEventListeners(b),d.destroy(b),this._img_loading=null,b=this._jsonRequest){try{b.cancel()}catch(F){}this._jsonRequest=null}var E=x.width;b=x.height;g=E;var C=0;10<=this.version&&x.wrapAround180&&(k=k._normalize(!0));this.extentProcessor&&(C=this.extentProcessor({layer:this,extent:k,width:g}),k=C.extent,g=C.width,C=C.marginLeft||0);if(this.isPNG32)v=this._img_loading=d.create("div"),v.id=x.id+"_"+this.id+"_"+(new Date).getTime(),
c.set(v,{position:"absolute",left:"0px",top:"0px",width:g+"px",height:b+"px"}),x=v.appendChild(d.create("div")),c.set(x,{opacity:0,width:g+"px",height:b+"px"}),this.getImageUrl(k,g,b,this._divAlphaImageFunc),v=null;else{var z=this._img_loading=d.create("img"),w=t._css.names,A=r("ie"),G={position:"absolute",width:g+"px",height:b+"px"};z.setAttribute("decoding","sync");8===A&&(G.opacity=this.opacity);null!=C&&0!==C&&(G.marginLeft=C+"px");"css-transforms"===x.navigationMode?(G[w.transform]=t._css.translate(-this._left,
-this._top),z._tdx=-this._left,z._tdy=-this._top,G[w.transition]=w.transformName+" "+n+"ms ease",this.extentProcessor&&(G[w.origin]=E/2-C+"px "+b/2+"px")):(G.left="0px",G.top="0px");z.id=x.id+"_"+this.id+"_"+(new Date).getTime();c.set(z,G);z._onload_connect=B.connect(z,"onload",this,"_onLoadHandler");z._onerror_connect=B.connect(z,"onerror",this,"_onErrorHandler");z._onabort_connect=B.connect(z,"onabort",this,"_onErrorHandler");this._startRect={left:D.x,top:D.y,width:v?parseInt(y.width,10):g,height:v?
parseInt(y.height,10):b,marginLeft:v?parseInt(y.marginLeft||"0",10):C,zoom:y&&y.zoom?parseFloat(y.zoom):1};this.getImageUrl(k,g,b,this._imgSrcFunc);z=null}}},_onTimeExtentChangeHandler:function(k){this.suspended||(this._setTime(k),this.refresh(!0))},getImageUrl:function(k,g,b,x){},_imgSrcFunc:function(k){this._img_loading.src=k},_divAlphaImageFunc:function(k){c.set(this._img_loading,"filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+k+"', sizingMethod\x3d'scale')");this._onLoadHandler({currentTarget:this._img_loading})},
_onLoadHandler:function(k){k=k.currentTarget;var g=this._map;this._clearEventListeners(k);!g||g.__panning||g.__zooming?d.destroy(k):(this._img&&this._div.removeChild(this._img),this._img=k,g=k.style,this._startRect={left:0,top:0,width:parseInt(g.width,10),height:parseInt(g.height,10),marginLeft:parseInt(g.marginLeft||"0",10),zoom:1},this._div.appendChild(k),this.suspended||a.show(this._div),this._img_loading=null,k=this._dragOrigin,k.x=k.y=0,this.onUpdate());this._fireUpdateEnd()},_onErrorHandler:function(k){k=
k.currentTarget;c.set(k,"visibility","hidden");this._clearEventListeners(k);k=Error("Unable to load image: "+k.src);this.onError(k);this._fireUpdateEnd(k)},_clearEventListeners:function(k){B.disconnect(k._onload_connect);B.disconnect(k._onerror_connect);B.disconnect(k._onabort_connect);k._onload_connect=k._onerror_connect=k._onabort_connect=null},setUseMapTime:function(k,g){this.useMapTime=k;this._toggleTime();g||this.refresh(!0)},refresh:function(){this._map&&this._onExtentChangeHandler(this._map.extent)},
_onScaleHandler:function(k,g){var b={},x=t._css.names,v=this._img;if(v){c.set(v,x.transition,g?"none":x.transformName+" "+n+"ms ease");v._matrix=k;k=v._multiply?u.multiply(k,v._multiply):k;if(v._tdx||v._tdy)k=u.multiply(k,{xx:1,xy:0,yx:0,yy:1,dx:v._tdx,dy:v._tdy});b[x.transform]=t._css.matrix(k);c.set(v,b)}},_onZoomHandler:function(k,g,b){k=this._startRect;var x=k.width*g,v=k.height*g,y=k.marginLeft*g,D=this._img,E=r("ie");D&&(E&&8>E?c.set(D,{left:k.left-(x-k.width)*(b.x-k.left)/k.width+"px",top:k.top-
(v-k.height)*(b.y-k.top)/k.height+"px",zoom:g*k.zoom}):c.set(D,{left:k.left-(x-k.width)*(b.x-k.left)/k.width+"px",top:k.top-(v-k.height)*(b.y-k.top)/k.height+"px",width:x+"px",height:v+"px"}),null!=y&&0!==y&&c.set(D,{marginLeft:y+"px"}))},_exportMapImage:function(k,g,b){var x=this._exportMapImageHandler;g.token=this._getToken();m({url:k,content:g,callbackParamName:"callback",load:function(v,y){x(v,y,b)},error:e.defaults.io.errorHandler})},_exportMapImageHandler:function(k,g,b){k=new q(k);this.onMapImageExport(k);
b&&b(k)},onMapImageExport:function(){},setOpacity:function(k){if(this.opacity!=k)this.onOpacityChange(this.opacity=k)},onOpacityChange:function(){},_opacityChangeHandler:function(k){var g=8===r("ie")?this._img:this._div;c.set(g,"opacity",k)}});l.setObject("layers.DynamicMapServiceLayer",f,t);return f})},"esri/layers/layer":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k){var g=f([e],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],load:["layer"],"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},constructor:function(b,x){this._attrs={};b&&d.isString(b)?this._url=q.urlToObject(this.url=q.normalize(b)):(this.url=this._url=null,(x=x||b)&&(x.layerDefinition||x.query)&&(x=null));this.spatialReference=new n(4326);this.initialExtent=new k(-180,-90,180,90,new n(4326));this._map=this._div=
null;this.normalization=!0;x&&(x.id&&(this.id=x.id),this.arcgisProps=x.arcgisProps,this.parentLayer=x.parentLayer,!1===x.visible&&(this.visible=!1),m.isDefined(x.opacity)&&(this.opacity=x.opacity),m.isDefined(x.minScale)&&this.setMinScale(x.minScale),m.isDefined(x.maxScale)&&this.setMaxScale(x.maxScale),this.attributionDataUrl=x.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,m.isDefined(x.showAttribution)&&(this.showAttribution=x.showAttribution),this.className=x.className,
this.refreshInterval=x.refreshInterval||0);this._errorHandler=d.hitch(this,this._errorHandler);this._scheduledRefresh=d.hitch(this,this._scheduledRefresh);this.refresh=d.hitch(this,this.refresh);if(this.managedSuspension){var v=this._setMap;this._setMap=function(y){var D=v.apply(this,arguments);this._fireAttach(y);this.evaluateSuspension();if(this.suspended&&!y.loaded)var E=l.connect(y,"onLoad",this,function(){l.disconnect(E);E=null;this.evaluateSuspension()});return D}}this.registerConnectEvents()},
id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attached:!1,attributionDataUrl:"",hasAttributionData:!1,showAttribution:!0,refreshInterval:0,_errorHandler:function(b){this.loaded||(this.loadError=b);this.onError(b)},_setMap:function(b,x,v,y){this._map=b;this._lyrZEHandle=l.connect(b,"onZoomEnd",this,this._processMapScale);if(b.loaded)this.visibleAtMapScale=this._isMapAtVisibleScale();else var D=l.connect(b,"onLoad",this,function(){l.disconnect(D);
D=null;this._processMapScale()})},_unsetMap:function(b,x){l.disconnect(this._lyrZEHandle);this._map=this._lyrZEHandle=null;this._resumedOnce=void 0;this.suspended=!0;this._fireDetach(b)},_fireAttach:function(b){this.attached=!0;this.onAttach({map:b})},_fireDetach:function(b){this.attached=!1;this.onDetach({map:b})},_cleanUp:function(){this._map=this._div=null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart(),this._map&&this._map._incr())},
_fireUpdateEnd:function(b,x){this.updating&&(this.updating=!1,this.attr("data-updating"),this._refreshRT(),this.onUpdateEnd(b,x),this._map&&this._map._decr())},_getToken:function(){var b=this._url,x=this.credential;return b&&b.query&&b.query.token||x&&x.token||void 0},_findCredential:function(){this.credential=r.id&&this._url&&r.id.findCredential(this._url.path)},_useSSL:function(){var b=this._url,x=/^http:/i;this.url&&(this.url=this.url.replace(x,"https:"));b&&b.path&&(b.path=b.path.replace(x,"https:"))},
refresh:function(b){},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(b){this.setScaleRange(b)},setMaxScale:function(b){this.setScaleRange(null,b)},setScaleRange:function(b,x){var v=m.isDefined(b),y=m.isDefined(x);this.loaded||(this._hasMin=this._hasMin||v,this._hasMax=this._hasMax||y);var D=this.minScale,E=this.maxScale;this.minScale=(v?b:this.minScale)||0;this.maxScale=(y?x:this.maxScale)||0;if(D!==this.minScale||E!==this.maxScale)this.onScaleRangeChange(),
this._processMapScale()},suspend:function(){this._suspended=!0;this.evaluateSuspension()},resume:function(){this._suspended=!1;this.evaluateSuspension()},canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():this.suspended||this._suspend()},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this.onSuspend();if(this._map)this._map.onLayerSuspend(this)},
_resume:function(){this.suspended=!1;this.attr("data-suspended");var b=void 0===this._resumedOnce,x=this.className,v=this._attrs,y=this.getNode(),D;if(b){this._resumedOnce=!0;if(x&&y){var E=y.getAttribute("class")||"";(new RegExp("(^|\\s)"+x+"(\\s|$)","i")).test(E)||y.setAttribute("class",E+((E?" ":"")+x))}if(v&&y)for(D in v)v.hasOwnProperty(D)&&y.setAttribute(D,v[D])}this._refreshRT();this.onResume({firstOccurrence:b});if(this._map)this._map.onLayerResume(this)},_processMapScale:function(){var b=
this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();b!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},isVisibleAtScale:function(b){return b?g.prototype._isMapAtVisibleScale.apply(this,arguments):!1},_isMapAtVisibleScale:function(b,x){if(!(b||this._map&&this._map.loaded))return!1;var v=this._map;b=b||v.getScale();var y=this.minScale,D=this.maxScale,E=!y,C=!D,z;x&&(z=v.width>v.height?v.width:v.height);E||(b<=y?E=!0:x&&(E=Math.abs(y-b)/y<1/
z));C||(b>=D?C=!0:x&&(C=Math.abs(D-b)/D<1/z));return E&&C},getAttributionData:function(){var b=this.attributionDataUrl,x=new c(h._dfdCanceller);this.hasAttributionData&&b?(x._pendingDfd=a({url:b,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),x._pendingDfd.then(function(v){x.callback(v)},function(v){x.errback(v)})):(b=Error("Layer does not have attribution data"),b.log=!!B.isDebug,x.errback(b));return x},getResourceInfo:function(){var b=this.resourceInfo;return d.isString(b)?u.fromJson(b):
d.clone(b)},getMap:function(){return this._map},getNode:function(){return this._div},attr:function(b,x){var v=this.getNode();if("data-reference"===b&&11>t("ie"))return this;v&&(null==x?v.removeAttribute(b):v.setAttribute(b,x));this._attrs&&(null==x?delete this._attrs[b]:this._attrs[b]=x);return this},setRefreshInterval:function(b){var x=this.refreshInterval;this.refreshInterval=b;this._toggleRT(!1);b&&this._toggleRT(!0);if(x!==b)this.onRefreshIntervalChange();return this},_toggleRT:function(b){b&&
this.refreshInterval?(clearInterval(this._refreshTimer),this._refreshTimer=setInterval(this._scheduledRefresh,6E4*this.refreshInterval)):this._refreshTimer&&(clearInterval(this._refreshTimer),this._refreshTimer=null)},_refreshRT:function(){this._toggleRT(!1);this._toggleRT(!0)},_scheduledRefresh:function(){this.onRefreshTick();!this._map||this.suspended||this.updating||this.refresh({scheduled:!0})},_refreshTS:null,_reCheckTS:/[\?&]_ts=/ig,_reReplaceTS:/([\?&]_ts=)[0-9]+/ig,addTimestampToURL:function(b){var x=
this._refreshTS;x&&(b=this._reCheckTS.test(b)?b.replace(this._reReplaceTS,"$$$1"+x):b+((-1===b.indexOf("?")?"?":"\x26")+"_ts\x3d"+x));return b},setNormalization:function(b){this.normalization=b},setVisibility:function(b){this.visible!==b&&(this.visible=b,this.onVisibilityChange(this.visible),this.evaluateSuspension());this.attr("data-hidden",b?null:"")},onLoad:function(){},onAttach:function(b){},onDetach:function(b){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},
onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onRefreshTick:function(){},onError:function(){}});d.setObject("layers.Layer",g,r);return g})},"esri/layers/MapImage":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/has ../kernel ../domUtils ../geometry/Extent".split(" "),function(f,B,l,d,c,u,t){f=f(null,{declaredClass:"esri.layers.MapImage",constructor:function(e){B.mixin(this,
e);this.extent=new t(this.extent)},visible:!0,opacity:1,getLayer:function(){return this._layer},getNode:function(){return this._node},show:function(){if(!this.visible){this.visible=!0;var e=this._node,r=this._layer,m;if(e){if(m=r&&r._div)r.suspended||r._setPos(e,m._left,m._top),(r._active||m).appendChild(e);u.show(e)}}},hide:function(){if(this.visible){this.visible=!1;var e=this._node;e&&(u.hide(e),e.parentNode&&e.parentNode.removeChild(e))}},setOpacity:function(e){var r=this._node;this.opacity=e;
r&&l.set(r,"opacity",e)}});B.setObject("layers.MapImage",f,c);return f})},"esri/layers/ArcGISMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../request ../SpatialReference ../geometry/Extent ./LayerInfo".split(" "),function(f,B,l,d,c,u,t,e,r,m){f=f(null,{declaredClass:"esri.layers.ArcGISMapServiceLayer",infoTemplates:null,constructor:function(a,h){this.layerInfos=[];h&&(this.infoTemplates=h.infoTemplates||null);a=this._params={};if(h=
this._url.query?this._url.query.token:null)a.token=h},setInfoTemplates:function(a){this.infoTemplates=a},_load:function(){t({url:this._url.path,content:B.mixin({f:"json"},this._params),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler})},spatialReference:null,initialExtent:null,fullExtent:null,description:null,units:null,_initLayer:function(a,h){try{this._findCredential();(this.credential&&this.credential.ssl||a&&a._ssl)&&this._useSSL();this.description=a.description;this.copyright=
a.copyrightText;this.spatialReference=a.spatialReference&&new e(a.spatialReference);this.initialExtent=a.initialExtent&&new r(a.initialExtent);this.fullExtent=a.fullExtent&&new r(a.fullExtent);this.units=a.units;this.maxRecordCount=a.maxRecordCount;this.maxImageHeight=a.maxImageHeight;this.maxImageWidth=a.maxImageWidth;this.supportsDynamicLayers=a.supportsDynamicLayers;var q=this.layerInfos=[],n=a.layers,k=this._defaultVisibleLayers=[];l.forEach(n,function(g,b){q[b]=new m(g);g.defaultVisibility&&
k.push(g.id)});this.visibleLayers||(this.visibleLayers=k);this.version=a.currentVersion;this.cimVersion=a.cimVersion;this.version||(this.version="capabilities"in a||"tables"in a?10:"supportedImageFormatTypes"in a?9.31:9.3);this.capabilities=a.capabilities;u.isDefined(a.minScale)&&!this._hasMin&&this.setMinScale(a.minScale);u.isDefined(a.maxScale)&&!this._hasMax&&this.setMaxScale(a.maxScale)}catch(g){this._errorHandler(g)}}});B.setObject("layers.ArcGISMapServiceLayer",f,c);return f})},"esri/layers/LayerInfo":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../lang"],function(f,B,l,d,c){f=f(null,{declaredClass:"esri.layers.LayerInfo",constructor:function(u){B.mixin(this,u)},toJson:function(){return c.fixJson({defaultVisibility:this.defaultVisibility,id:this.id,maxScale:this.maxScale,minScale:this.minScale,name:this.name,parentLayerId:this.parentLayerId,subLayerIds:this.subLayerIds})}});B.setObject("layers.LayerInfo",f,d);return f})},"esri/layers/TimeInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../TimeExtent ./TimeReference ./LayerTimeOptions".split(" "),
function(f,B,l,d,c,u,t){f=f(null,{declaredClass:"esri.layers.TimeInfo",constructor:function(e){null!==e&&(B.mixin(this,e),e.exportOptions&&(this.exportOptions=new t(e.exportOptions)),this.timeExtent=null,e.timeExtent&&2===e.timeExtent.length&&(this.timeExtent=new c(e.timeExtent)),this.timeReference=new u(e.timeReference))}});B.mixin(f,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",
UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",UNIT_YEARS:"esriTimeUnitsYears"});B.setObject("layers.TimeInfo",f,d);return f})},"esri/TimeExtent":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel"],function(f,B,l,d){var c=f(null,{declaredClass:"esri.TimeExtent",constructor:function(u){if(1<arguments.length)this._create(arguments[0],arguments[1]);
else if(u)if(B.isArray(u)){var t=u[0],e=u[1];this.startTime=null===t||"null"===t?null:new Date(t);this.endTime=null===e||"null"===e?null:new Date(e)}else u instanceof Date&&this._create(u,null)},offset:function(u,t){var e=new c,r=this.startTime,m=this.endTime;r&&(e.startTime=this._getOffsettedDate(r,u,t));m&&(e.endTime=this._getOffsettedDate(m,u,t));return e},intersection:function(u){return this._intersection(this,u)},toJson:function(){var u=[],t=this.startTime;u.push(t?t.getTime():"null");t=this.endTime;
u.push(t?t.getTime():"null");return u},_create:function(u,t){this.startTime=u?new Date(u.getTime()):null;this.endTime=t?new Date(t.getTime()):null},_refData:{esriTimeUnitsMilliseconds:{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",multiplier:1},esriTimeUnitsSeconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},esriTimeUnitsMinutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},esriTimeUnitsHours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},esriTimeUnitsDays:{getter:"getUTCDate",
setter:"setUTCDate",multiplier:1},esriTimeUnitsWeeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},esriTimeUnitsMonths:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},esriTimeUnitsYears:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},esriTimeUnitsDecades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},esriTimeUnitsCenturies:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}},_intersection:function(u,t){if(u&&t){var e=u.startTime;u=u.endTime;
var r=t.startTime;t=t.endTime;e=e?e.getTime():-Infinity;r=r?r.getTime():-Infinity;u=u?u.getTime():Infinity;t=t?t.getTime():Infinity;var m,a;r>=e&&r<=u?m=r:e>=r&&e<=t&&(m=e);u>=r&&u<=t?a=u:t>=e&&t<=u&&(a=t);if(isNaN(m)||isNaN(a))return null;e=new c;e.startTime=-Infinity===m?null:new Date(m);e.endTime=Infinity===a?null:new Date(a);return e}return null},_getOffsettedDate:function(u,t,e){var r=this._refData;u=new Date(u.getTime());t&&e&&(r=r[e],u[r.setter](u[r.getter]()+t*r.multiplier));return u}});return d.TimeExtent=
c})},"esri/layers/TimeReference":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,d){f=f(null,{declaredClass:"esri.layers.TimeReference",constructor:function(c){c&&B.mixin(this,c)}});B.setObject("layers.TimeReference",f,d);return f})},"esri/layers/LayerTimeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(f,B,l,d,c){f=f(null,{declaredClass:"esri.layers.LayerTimeOptions",constructor:function(u){u&&
B.mixin(this,u)},toJson:function(){return c.fixJson({timeDataCumulative:this.timeDataCumulative,timeOffset:this.timeOffset,timeOffsetUnits:this.timeOffsetUnits,useTime:this.useTime})}});B.setObject("layers.LayerTimeOptions",f,d);return f})},"esri/layers/ImageParameters":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang ../layerUtils".split(" "),function(f,B,l,d,c,u,t,e){B=B(null,{declaredClass:"esri.layers.ImageParameters",constructor:function(){this.layerDefinitions=
[]},bbox:null,extent:null,width:null,height:null,dpi:null,format:null,imageSpatialReference:null,layerOption:null,layerIds:null,transparent:null,timeExtent:null,layerTimeOptions:null,toJson:function(r){this.bbox&&f.deprecated(this.declaredClass+" : Property 'bbox' deprecated. Use property 'extent'.");var m=this.bbox||this.extent;m=m&&r&&m._normalize(!0);r=this.layerOption;var a=m?m.spatialReference.wkid||d.toJson(m.spatialReference.toJson()):null,h=this.imageSpatialReference;m={dpi:this.dpi,format:this.format,
transparent:this.transparent,size:null!==this.width&&null!==this.height?this.width+","+this.height:null,bbox:m?m.xmin+","+m.ymin+","+m.xmax+","+m.ymax:null,bboxSR:a,layers:r?r+":"+this.layerIds.join(","):null,imageSR:h?h.wkid||d.toJson(h.toJson()):a};m.layerDefs=e._serializeLayerDefinitions(this.layerDefinitions);r=this.timeExtent;m.time=r?r.toJson().join(","):null;m.layerTimeOptions=e._serializeTimeOptions(this.layerTimeOptions);return t.filter(m,function(q){if(null!==q)return!0})}});l.mixin(B,{LAYER_OPTION_SHOW:"show",
LAYER_OPTION_HIDE:"hide",LAYER_OPTION_INCLUDE:"include",LAYER_OPTION_EXCLUDE:"exclude"});l.setObject("layers.ImageParameters",B,u);return B})},"esri/layers/DynamicLayerInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerInfo ./LayerMapSource ./LayerDataSource".split(" "),function(f,B,l,d,c,u,t,e){f=f(u,{declaredClass:"esri.layers.DynamicLayerInfo",defaultVisibility:!0,parentLayerId:-1,maxScale:0,minScale:0,constructor:function(r){r&&(r.source?r="mapLayer"===
r.source.type?new t(r.source):new e(r.source):(r=new t,r.mapLayerId=this.id),this.source=r)},toJson:function(){var r=this.inherited(arguments);r.source=this.source&&this.source.toJson();return c.fixJson(r)}});B.setObject("layers.DynamicLayerInfo",f,d);return f})},"esri/layers/LayerMapSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource".split(" "),function(f,B,l,d,c,u){f=f(u,{declaredClass:"esri.layers.LayerMapSource",type:"mapLayer",toJson:function(){return c.fixJson({type:"mapLayer",
mapLayerId:this.mapLayerId,gdbVersion:this.gdbVersion})}});B.setObject("layers.LayerMapSource",f,d);return f})},"esri/layers/LayerSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,d){f=f(null,{declaredClass:"esri.layers.LayerSource",type:null,constructor:function(c){c&&B.mixin(this,c)},toJson:function(){}});B.setObject("layers.LayerSource",f,d);return f})},"esri/layers/LayerDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource".split(" "),
function(f,B,l,d,c,u,t,e,r,m){f=f(u,{declaredClass:"esri.layers.LayerDataSource",type:"dataLayer",constructor:function(a){if(a&&a.dataSource){switch(a.dataSource.type){case "table":a=new t(a.dataSource);break;case "queryTable":a=new e(a.dataSource);break;case "joinTable":a=new r(a.dataSource);break;case "raster":a=new m(a.dataSource);break;default:a=a.dataSource}this.dataSource=a}},toJson:function(){var a={type:"dataLayer",dataSource:this.dataSource&&this.dataSource.toJson()};return c.fixJson(a)}});
B.setObject("layers.LayerDataSource",f,d);return f})},"esri/layers/TableDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(f,B,l,d,c,u){f=f(u,{declaredClass:"esri.layers.TableDataSource",toJson:function(){return c.fixJson({type:"table",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName,gdbVersion:this.gdbVersion})}});B.setObject("layers.TableDataSource",f,d);return f})},"esri/layers/DataSource":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,d){f=f(null,{declaredClass:"esri.layers.DataSource",constructor:function(c){c&&B.mixin(this,c)},toJson:function(){}});B.setObject("layers.DataSource",f,d);return f})},"esri/layers/QueryDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ../SpatialReference".split(" "),function(f,B,l,d,c,u,t){f=f(u,{declaredClass:"esri.layers.QueryDataSource",constructor:function(e){e&&(e.oidFields&&B.isString(e.oidFields)&&
(this.oidFields=e.oidFields.split(",")),e.spatialReference&&(this.spatialReference=new t(e.spatialReference)))},toJson:function(){var e={type:"queryTable",workspaceId:this.workspaceId,query:this.query,oidFields:this.oidFields&&this.oidFields.join(),spatialReference:this.spatialReference&&this.spatialReference.toJson()};if(this.geometryType){var r="point"===this.geometryType.toLowerCase()?"esriGeometryPoint":"multipoint"===this.geometryType.toLowerCase()?"esriGeometryMultipoint":"polyline"===this.geometryType.toLowerCase()?
"esriGeometryPolyline":"polygon"===this.geometryType.toLowerCase()?"esriGeometryPolygon":this.geometryType;e.geometryType=r}return c.fixJson(e)}});B.setObject("layers.QueryDataSource",f,d);return f})},"esri/layers/JoinDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ./LayerMapSource ./TableDataSource ./QueryDataSource ./RasterDataSource".split(" "),function(f,B,l,d,c,u,t,e,r,m){var a=f(u,{declaredClass:"esri.layers.JoinDataSource",constructor:function(h){h&&
(h.leftTableSource&&(this.leftTableSource=this._createLayerSource(h.leftTableSource)),h.rightTableSource&&(this.rightTableSource=this._createLayerSource(h.rightTableSource)))},_createLayerSource:function(h){if("mapLayer"===h.type)var q=new t(h);else{q={type:"dataLayer"};switch(h.dataSource.type){case "table":var n=new e(h.dataSource);break;case "queryTable":n=new r(h.dataSource);break;case "joinTable":n=new a(h.dataSource);break;case "raster":n=new m(h.dataSource);break;default:n=h.dataSource}q.dataSource=
n;q.toJson=function(){var k={type:"dataLayer",dataSource:n.toJson()};return c.fixJson(k)}}return q},toJson:function(){var h={type:"joinTable",leftTableSource:this.leftTableSource&&this.leftTableSource.toJson(),rightTableSource:this.rightTableSource&&this.rightTableSource.toJson(),leftTableKey:this.leftTableKey,rightTableKey:this.rightTableKey};var q="left-outer-join"===this.joinType.toLowerCase()?"esriLeftOuterJoin":"left-inner-join"===this.joinType.toLowerCase()?"esriLeftInnerJoin":this.joinType;
h.joinType=q;return c.fixJson(h)}});B.setObject("layers.JoinDataSource",a,d);return a})},"esri/layers/RasterDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(f,B,l,d,c,u){f=f(u,{declaredClass:"esri.layers.RasterDataSource",toJson:function(){return c.fixJson({type:"raster",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName})}});B.setObject("layers.RasterDataSource",f,d);return f})},"arcgisonline/pages/utils/queryHandler":function(){define(["require",
"exports"],function(f,B){Object.defineProperty(B,"__esModule",{value:!0});B.queryToObject=B.objectToQuery=void 0;B.objectToQuery=function(l){var d=new URLSearchParams,c=function(e,r){void 0!==r&&null!==r&&(Array.isArray(r)?0<r.length&&r.forEach(function(m){return d.append(e,m)}):d.append(e,String(r)))},u=0;for(l=Object.entries(l);u<l.length;u++){var t=l[u];c(t[0],t[1])}return d.toString()};B.queryToObject=function(l,d){l=new URLSearchParams(l);l=Array.from(l.entries());if(d){for(var c={},u=0;u<l.length;u++){var t=
l[u];d=t[0];t=t[1];var e=c[d];Array.isArray(e)?e.push(t):c[d]="string"===typeof c[d]?[c[d],t]:t}return c}c={};for(u=0;u<l.length;u++)t=l[u],d=t[0],t=t[1],c[d]=c[d]?c[d]+",".concat(t):t;return c}})},"arcgisonline/pages/components/ConfirmDialog":function(){define(["require","exports","preact","preact/hooks"],function(f,B,l,d){Object.defineProperty(B,"__esModule",{value:!0});B.default=function(c){var u=c.autoCloseOnOk,t=c.hideCancel,e=c.hideClose,r=c.renderHtmlDescription,m=c.strings,a=c.onOk,h=c.onCancel,
q=c.onBack,n=c.width,k=void 0===n?"m":n;n=c.color;n=void 0===n?void 0:n;var g=c.okColor;g=void 0===g?"blue":g;var b=c.cancelColor;b=void 0===b?"blue":b;var x=c.okDisabled;x=void 0===x?!1:x;var v=c.loading;v=void 0===v?!1:v;var y=c.showProcessingInButton;y=void 0===y?!1:y;var D=c.noticeMessage,E=c.noticeLinkText;c=c.noticeLinkURL;var C=(0,d.useState)(!1),z=C[0],w=C[1];C=(0,d.useState)(!1);var A=C[0],G=C[1],F=(0,d.useRef)();(0,d.useEffect)(function(){var H,J;F.current&&(e||(null===(J=(H=F.current).setFocus)||
void 0===J?void 0:J.call(H)),setTimeout(function(){w(!0)},15))},[F.current]);(0,d.useEffect)(function(){F.current&&("number"===typeof k?F.current.style.setProperty("--calcite-modal-width","".concat(k,"px")):F.current.width=k)},[F.current,k]);C=function(){A||(w(!1),h())};return(0,l.h)("calcite-modal",{open:z,role:"dialog","aria-modal":"true",ref:F,"data-test":"dialog",closeButtonDisabled:A||e,escapeDisabled:A,"aria-label":m.title,oncalciteModalClose:C,kind:"red"===n?"danger":"blue"===n?"info":"yellow"===
n?"warning":void 0,outsideCloseDisabled:!0,class:"bring-modal-to-front"},(0,l.h)("h3",{slot:"header",class:"font-size-2 trailer-0","data-test":"title"},m.title),!y&&A?(0,l.h)("calcite-loader",{slot:"content",class:"leader-half trailer-half",hidden:!A,label:"processing-loader",text:null===m||void 0===m?void 0:m.processing,"data-test":"loader"}):(0,l.h)("div",{slot:"content",class:"position-relative leader-half trailer-half","data-test":"description"},(0,l.h)(l.Fragment,null,D&&(0,l.h)("calcite-notice",
{open:!0,icon:"information",class:"trailer-1"},(0,l.h)("div",{slot:"message"},D),c&&(0,l.h)("calcite-link",{slot:"link",href:c,target:"_blank"},E)),r?(0,l.h)("div",{dangerouslySetInnerHTML:{__html:m.description}}):m.description)),(null===m||void 0===m?0:m.back)&&q?(0,l.h)("calcite-button",{slot:"back",kind:"neutral",width:"full",onClick:function(H){q(H)}},null===m||void 0===m?void 0:m.back):null,(0,l.h)("calcite-button",{slot:"primary",width:"full",kind:"red"===g?"danger":"brand",loading:v||y&&A,
appearance:"solid",disabled:A||x,onClick:function(){u?(w(!1),a()):(G(!0),a(function(){w(!1)}))},"data-test":"ok"},y&&A?null===m||void 0===m?void 0:m.processing:null===m||void 0===m?void 0:m.ok),t?null:(0,l.h)("calcite-button",{slot:"secondary",width:"full",appearance:"outline",kind:"red"===b?"danger":"brand",onClick:C,"data-test":"cancel",disabled:A},null===m||void 0===m?void 0:m.cancel))}})},"arcgisonline/pages/getThumbnail":function(){define("require exports tslib dojo/Deferred ../map/core/buildExportCall ../map/thumbnail/buildThumbnailURLFromKMLItem ../map/thumbnail/buildThumbnailURLFromFSItem ../map/thumbnail/buildThumbnailURLFromImageryItem ../map/thumbnail/createHiddenMap ../sharing/util ./utils/arrays".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a){function h(n,k,g){var b=new d.default;n=(0,c.default)(n,k,"4326",null,"800,532",null,"json",null,g||null);m.default.request({url:n},{addToken:!1}).then(function(x){b.resolve(x)},function(){b.resolve(m.default.getAbsoluteUrl("images/transparent.gif"))});return b}function q(n){return 2===(null===n||void 0===n?void 0:n.length)&&2===n[0].length&&2===n[1].length?Math.round(1E3*n[0][0])/1E3+","+Math.round(1E3*n[0][1])/1E3+","+Math.round(1E3*n[1][0])/1E3+","+Math.round(1E3*
n[1][1])/1E3:null}Object.defineProperty(B,"__esModule",{value:!0});d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);a=l.__importDefault(a);B.default=function(n,k){var g,b,x,v=new d.default,y=n.portal,D=y.getPortalUser(),E=(null===(g=null===D||void 0===D?void 0:D.credential)||void 0===g?0:g.token)?"?token\x3d".concat(D.credential.token):"",C=m.default.getAbsoluteUrl("images/transparent.gif"),
z=m.default.getAbsoluteUrl("images/arcgis-transparent-background-div.png"),w=m.default.getStaticImagesUrl();g=n.itemUrl||n.url;D=n.itemDataUrl;var A=n.serviceInfo||{},G=n.itemData||{},F=n.type.toLowerCase(),H=n.typeKeywords||[],J=n.thumbnail!==C&&(!y.isPortal&&-1===(null===(b=n.thumbnail)||void 0===b?void 0:b.indexOf("thumbnail/ago_downloaded."))||y.isPortal&&-1===(null===(x=n.thumbnail)||void 0===x?void 0:x.indexOf("Utilities/PrintingTools")));b=a.default.includes(H,"Tiled Imagery");x="image service"===
F&&!b;k=k&&("Feature Service"===n.type&&!J||"Vector Tile Service"===n.type&&!J);y=Array.isArray(n.extent)?q(n.extent):n.extent||"-180,-90,180,90";var K;n||v.resolve(z);if(n.thumbnail&&!k||"Image"===n.type||n.thumbnailUrl&&!k)v.resolve(n.thumbnail&&!n.thumbnail.startsWith("http")?"".concat(g,"/info/").concat(n.thumbnail).concat(E):n.thumbnailUrl);else if(n.isAdmin&&("image service"===F&&!b||"map service"===F))"image service"===F?(0,e.default)(n,[800,532]).then(function(P){v.resolve(P.dataURL?P:P.url||
z)},function(){return v.resolve(z)}):n.isHostedService?n.getSourceData().then(function(P){(K=null===P||void 0===P?void 0:P.thumbnailUrl)?(n.thumbnail=K,v.resolve(K)):(n.thumbnail="".concat(w,"/desktopapp.png"),v.resolve(n.thumbnail))},function(){n.thumbnail="".concat(w,"/desktopapp.png");v.resolve(n.thumbnail)}):h(g,y,A).then(function(P){v.resolve(P&&P.href||z)});else if(n.isLocationTrackingService)n.thumbnail="".concat(w,"/locationtrackingservice.png"),v.resolve(n.thumbnail);else if(n.isAdmin&&"feature service"===
F)n.isTable?(n.thumbnail="".concat(w,"/desktopapp.png"),v.resolve(n.thumbnail)):(0,t.default)(n,null,G.layers).then(function(P){v.resolve(P)},function(){v.resolve(C)});else if("vector tile service"===F){E=[[-180,-90],[180,90]];if("string"===typeof n.extent){var Q=n.extent.split(",");E=[[parseFloat(Q[0]),parseFloat(Q[1])],[parseFloat(Q[2]),parseFloat(Q[3])]]}else 0<(null===(Q=n.extent)||void 0===Q?void 0:Q.length)&&(E=n.extent);(0,r.default)({operationalLayers:[],baseMap:{baseMapLayers:[{id:n.id,type:"VectorTileLayer",
layerType:"VectorTileLayer",title:n.title,styleUrl:"".concat(n.itemUrl,"/resources/styles/root.json"),visibility:!0,opacity:1}],title:"Topographic"},spatialReference:{wkid:102100,latestWkid:3857},authoringApp:"WebMapViewer",authoringAppVersion:"5.3",version:"2.10"},E,function(P){(P=P.layerIds.map(P.getLayer.bind(P)).shift())?P.takeScreenshot({format:"png",width:800,height:532}).then(function(I){(null===I||void 0===I?0:I.dataURL)?v.resolve(I):v.resolve(C)},function(){v.resolve(C)}):v.resolve(C)},function(){return v.resolve(C)})}else n.isAdmin&&
"kml"===F?(0,u.default)(n).then(function(P){return v.resolve(P)}):"web mapping application"===F?v.resolve("".concat(w,"/webapp.png")):"mobile application"===F?v.resolve("".concat(w,"/mobileapp.png")):"image"===F?(Q=2097134<n.size?m.default.relativeToExplicitUrl("js/arcgisonline/sharing/dijit/css/images/image-thumb.png"):D,v.resolve(Q)):"workforce project"===F?v.resolve("".concat(w,"/workforceproject.png")):"hub initiative"===F?v.resolve("".concat(w,"/hubinitiative.png")):"hub page"===F?v.resolve("".concat(w,
"/hubpage.png")):"hub site application"===F?v.resolve("".concat(w,"/hubsite.png")):"hub event"===F?v.resolve("".concat(w,"/hubevent.png")):"hub project"===F?v.resolve("".concat(w,"/hubproject.png")):"dashboard"===F?(Q=a.default.includes(H,"ArcGIS Dashboards"),v.resolve("".concat(w).concat(Q?"/dashboards.png":"/opsdashboard.png"))):"geoprocessing service"===F?H.includes("Notebook Web Tool")?v.resolve("".concat(w,"/notebookwebtool.png")):v.resolve("".concat(w,"/webtool.png")):"web scene"===F||"scene service"===
F?v.resolve("".concat(w,"/scene.png")):"ortho mapping project"===F?v.resolve("".concat(w,"/orthomappingproject.png")):"ortho mapping template"===F?v.resolve("".concat(w,"/orthomappingtemplate.png")):"insights theme"===F?v.resolve("".concat(w,"/insightstheme.png")):"insights workbook package"===F?v.resolve("".concat(w,"/insightsworkbookpackage.png")):"solution"===F?v.resolve("".concat(w,"/solution.png")):"mobile scene package"===F?v.resolve("".concat(w,"/mobilescenepackage.png")):"deep learning package"===
F?v.resolve("".concat(w,"/deeplearningpackage.png")):"big data analytic"===F?v.resolve("".concat(w,"/bigdataanalytic.png")):"real time analytic"===F?v.resolve("".concat(w,"/realtimeanalytic.png")):"feed"===F?v.resolve("".concat(w,"/feed.png")):"excalibur imagery project"===F?v.resolve("".concat(w,"/excaliburimageryproject.png")):"notebook"===F?v.resolve(m.default.relativeToExplicitUrl("/js/arcgisonline/css/images/notebook-thumb.png")):"storymap"===F?(Q=a.default.includes(H,"storymapcollection")?"storymapcollection.png":
"storymap.png",v.resolve("".concat(w,"/").concat(Q))):"survey123 add in"===F?v.resolve("".concat(w,"/survey123addin.png")):"mission"===F?v.resolve("".concat(w,"/mission.png")):"mission template"===F?v.resolve("".concat(w,"/missiontemplate.png")):"quickcapture project"===F?v.resolve("".concat(w,"/quickcaptureproject.png")):"pro report"===F?v.resolve("".concat(w,"/proreport.png")):"pro package"===F?v.resolve("".concat(w,"/propackage.png")):"pro report template"===F?v.resolve("".concat(w,"/proreporttemplate.png")):
"urban model"===F?v.resolve("".concat(w,"/urbanmodel.png")):"web experience"===F?v.resolve("".concat(w,"/webexperience.png")):"web experience template"===F?v.resolve("".concat(w,"/webexperiencetemplate.png")):"experience builder widget"===F?v.resolve("".concat(w,"/experiencebuilderwidget.png")):"experience builder widget package"===F?v.resolve("".concat(w,"/experiencebuilderwidgetpackage.png")):"workflow"===F?v.resolve("".concat(w,"/workflow.png")):"insights script"===F?v.resolve("".concat(w,"/insightsscript.png")):
"kernel gateway connection"===F?v.resolve("".concat(w,"/kernelgatewayconnection.png")):"hub initiative template"===F?v.resolve("".concat(w,"/hubinitiativetemplate.png")):b?v.resolve("".concat(w,"/tiledimagerylayer.png")):x?v.resolve("".concat(w,"/imagerylayer.png")):"mission report"===F?v.resolve("".concat(w,"/missionreport.png")):"administrative report"===F?v.resolve("".concat(w,"/administrativereport.png")):"storymap theme"===F?v.resolve("".concat(w,"/storymaptheme.png")):"knowledge graph"===F?
v.resolve("".concat(w,"/knowledgegraph.png")):"knowledge studio project"===F?v.resolve("".concat(w,"/knowledgestudio.png")):"earth configuration"===F?v.resolve("".concat(w,"/earthconfiguration.png")):"raster function template"===F?v.resolve("".concat(w,"/rasterfunctiontemplate.png")):"link chart"===F?v.resolve("".concat(w,"/linkchart.png")):"investigation"===F?v.resolve("".concat(w,"/investigation.png")):"apache parquet"===F?v.resolve("".concat(w,"/apacheparquet.png")):"video service"===F?v.resolve("".concat(w,
"/mediaservice.png")):"geodata service"===F?v.resolve("".concat(w,"/geodataservice.png")):"notebook code snippets"===F||"notebook code snippet library"===F?v.resolve("".concat(w,"/notebookcodesnippets.png")):"suitability model"===F?v.resolve("".concat(w,"/suitabilitymodel.png")):"esri classifier definition"===F?v.resolve("".concat(w,"/classifierdefinition.png")):"deep learning studio project"===F?v.resolve("".concat(w,"/deeplearningstudioproject.png")):"esri classification schema"===F?v.resolve("".concat(w,
"/classificationschema.png")):"insights data engineering workbook"===F?v.resolve("".concat(w,"/dataengineeringworkbook.png")):"insights data engineering model"===F?v.resolve("".concat(w,"/dataengineeringmodel.png")):"discussion"===F?v.resolve("".concat(w,"/discussion.png")):"api key"===F?v.resolve("".concat(w,"/apikey.png")):"data pipeline"===F?v.resolve("".concat(w,"/datapipeline.png")):v.resolve("".concat(w,"/desktopapp.png"));return v}})},"arcgisonline/map/core/buildExportCall":function(){define(["require",
"exports"],function(f,B){return function(l,d,c,u,t,e,r,m,a){var h;if(!m&&-1<l.indexOf("/MapServer/")){m=void 0;e=l.indexOf("/MapServer/");var q=l.indexOf("?");-1<q?(m=l.substring(e+11,q),l="".concat(l.substring(0,e+10)).concat(l.substring(q))):(m=l.substring(e+11),l=l.substring(0,e+10))}q=-1<l.indexOf("/MapServer");!q&&a&&(q=a.capabilities?-1<a.capabilities.toLowerCase().indexOf("map"):a.supportedImageFormatTypes);e=l.indexOf("?");if(-1===e)if(q)l+="/export?";else{if("undefined"!==typeof a.currentVersion&&
10.1<=a.currentVersion)return l+"/info/thumbnail";l+="/exportImage?"}else if(q)l="".concat(l.substring(0,e),"/export").concat(l.substring(e,l.length),"\x26");else{if("undefined"!==typeof a.currentVersion&&10.1<=a.currentVersion)return l="".concat(l.substring(0,e),"/info/thumbnail").concat(l.substring(e,l.length));l="".concat(l.substring(0,e),"/exportImage").concat(l.substring(e,l.length),"\x26")}l+="size\x3d".concat(t,"\x26bbox\x3d").concat(d);null!==c&&0<c.length&&(l+="\x26bboxSR\x3d".concat(c));
null!==u&&0<u.length&&(l+="\x26imageSR\x3d".concat(u));l=q&&-1<(null===(h=null===a||void 0===a?void 0:a.supportedImageFormatTypes)||void 0===h?void 0:h.indexOf("PNG32"))?l+"\x26format\x3dpng32\x26f\x3d".concat(r):q?l+"\x26format\x3dpng24\x26f\x3d".concat(r):l+"\x26format\x3djpgpng\x26f\x3d".concat(r);q?null!==m&&0<m.length&&(l+="\x26layers\x3dshow:".concat(m)):l+="\x26interpolation\x3dRSP_NearestNeighbor\x26bandIds\x3dnull";return l}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromKMLItem":function(){define("dojo/Deferred dojo/_base/url dojo/_base/lang arcgisonline/sharing/util esri/SpatialReference arcgisonline/map/thumbnail/buildThumbnailURLFromItemWebMap".split(" "),
function(f,B,l,d,c,u){var t=window.esriGeowConfig;return function(e,r){var m={};m.baseMap=t.defaultBasemap||t.self.defaultBasemap;m.baseMap.title="basemap";m.operationalLayers=[];var a=e.url;a||"KML"!==e.type||(a=t.restBaseUrl+"content/items/"+e.id+"/data");var h=(new B(t.restBaseUrl)).authority;-1<a.indexOf(h)&&(h=d.getToken())&&(a+="?token\x3d"+h);m.operationalLayers.push({url:a,id:"KML_"+Math.random(),opacity:1,title:e.title,visibility:!0,type:"KML"});var q=new f;r||("string"==typeof e.extent?
(e=e.extent.split(","),r=[[parseFloat(e[0]),parseFloat(e[1])],[parseFloat(e[2]),parseFloat(e[3])]]):r=e.extent&&0<e.extent.length?e.extent:[[-180,-90],[180,90]]);u(m,r,new c({wkid:4326}),l.hitch(this,function(n){q.resolve(n)}),l.hitch(this,function(n){q.reject(n)}));return q}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromItemWebMap":function(){define(["dojo/json","dojo/_base/lang","dojo/_base/array","esri/tasks/Geoprocessor"],function(f,B,l,d){var c=window.esriGeowConfig;return function(u,t,
e,r,m){u=B.clone(u);l.forEach(u.baseMap.baseMapLayers,function(a){delete a.resourceInfo});u.mapOptions={showAttribution:!1,extent:{xmin:t[0][0],ymin:t[0][1],xmax:t[1][0],ymax:t[1][1],spatialReference:{wkid:4326}},spatialReference:e};u.exportOptions={dpi:96,outputSize:[600,400]};u.layoutOptions={};t=new d(c.self.helperServices.printTask.url);e={Web_Map_as_JSON:f.stringify(u),Format:"PNG32",Layout_Template:"MAP_ONLY"};t.execute(e).then(B.hitch(this,function(a){if(a){for(var h=!1,q=0;q<a.length;q++)if("Output_File"==
a[q].paramName){r(a[q].value.url);h=!0;break}!h&&m&&m()}else m&&m()}),B.hitch(this,function(a){m&&m()}))}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromFSItem":function(){define("dojo/on dojo/Deferred dojo/DeferredList dojo/_base/connect dojo/_base/array dojo/_base/lang esri/kernel esri/layers/FeatureLayer esri/geometry/Extent arcgisonline/sharing/util arcgisonline/map/thumbnail/buildThumbnailURLFromWebMap arcgisonline/map/thumbnail/getExtentWithFeatures arcgisonline/map/thumbnail/getItemData arcgisonline/map/layer/getServiceInfo".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n){return function(k,g,b){var x={};x.baseMap=u.clone(esriGeowConfig.defaultBasemap||esriGeowConfig.self.defaultBasemap);x.baseMap.title="basemap";for(var v=x.baseMap.baseMapLayers.length,y=!1===k.itemData?{}:k.itemData,D=0;D<v;D++){var E=x.baseMap.baseMapLayers[D];if(!E.isReference){!esriGeowConfig.allSSL&&"https:"!=location.protocol||!m.isHostedService(E.url)&&!m.supportsHttps(E.url)||(E.url=E.url.replace("http:","https:"));E.visibility=!1;x.baseMap.baseMapLayers=
[E];break}}x.operationalLayers=[];var C=new B;v=function(z,w){w?z&&c.forEach(z,function(G){c.forEach(w,function(F,H){F.id===G.id&&(F[H]=G)})}):w=[];z=function(G,F){F=G&&G.layers||[];for(G=F.length-1;0<=G;G--){var H=F[G],J=t.id.findCredential(m.urlToObject(k.url).path);J={url:k.url+"/"+H.id+(J?"?token\x3d"+J.token:""),id:(k.id||Math.random())+"_"+H.id,opacity:1,title:(k.title||"title")+"_"+H.id,visibility:!0};for(var K=!1,Q=0;Q<F.length;Q++)if(F[Q].id===H.id){K=!0;J.layerDefinition=F[Q].layerDefinition;
break}(!F.length||F.length&&K)&&x.operationalLayers.push(J)}var P=function(Z){C.resolve(Z)},I=function(Z){C.reject(Z)},N=[[-180,-90],[180,90]];"string"==typeof k.extent&&""!==k.extent?(G=k.extent.split(","),N=[[parseFloat(G[0]),parseFloat(G[1])],[parseFloat(G[2]),parseFloat(G[3])]]):k.extent&&0<k.extent.length&&(N=k.extent);if(1===x.operationalLayers.length)J=new e(x.operationalLayers[0].url),f(J,"load",u.hitch(this,function(Z){Z.layer&&(Z=Z.layer);h({layer:Z},g||N).then(u.hitch(this,function(aa,
ia){a(aa,ia,u.hitch(this,P),u.hitch(this,I))},x))}));else{G=g||k.extent||N;N=new r(G[0][0],G[0][1],G[1][0],G[1][1]);var L=function(Z,aa){var ia=20015077/180,R=t.config.defaults,S=t.WKIDUnitConversion,M=Z.spatialReference;if(M){var X=M.wkid;var fa=M.wkt}M=null;X?M=S.values[S[X]]:fa&&-1!==fa.search(/^PROJCS/i)&&(S=/UNIT\[([^\]]+)\]\]$/i.exec(fa))&&S[1]&&(M=parseFloat(S[1].split(",")[1]));return Z.getWidth()/aa*(M||ia)*39.37*R.screenDPI}(N,200),W=[];F=[];for(G=0;G<x.operationalLayers.length;G++)J=x.operationalLayers[G],
H=new B,F.push(H),J=new e(J.url),W.push(J),d.connect(J,"onLoad",u.hitch(this,function(Z,aa){aa.minScale<=L&&aa.maxScale>L?Z.resolve(!0):Z.resolve(!1)},H));(new l(F)).addCallback(function(Z){for(var aa=!1,ia=0;ia<Z.length;ia++)if(!0===Z[ia][1]){aa=!0;break}aa?a(x,g||k.extent,u.hitch(this,P),u.hitch(this,I)):h({layer:W[W.length-1]},g||k.extent).then(u.hitch(this,function(R,S){a(R,S,u.hitch(this,P),u.hitch(this,I))},x))})}};var A=function(G){C.reject(G)};k.serviceInfo&&!k.serviceInfo.error?z(k.serviceInfo):
n(k.url,"",u.hitch(this,z),u.hitch(this,A))};b?y?v(b,y):q(k.id,u.hitch(this,v,b),u.hitch(this,v)):k.id?y?v(null,y):q(k.id,u.hitch(this,v,null),u.hitch(this,v)):v();return C}})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(f,B,l){f.DeferredList=function(d,c,u,t,e){var r=[];B.call(this);var m=this;0!==d.length||c||this.resolve([0,[]]);var a=0;l.forEach(d,function(h,q){function n(k,g){r[q]=[k,g];a++;a===d.length&&m.resolve(r)}h.then(function(k){c?
m.resolve([q,k]):n(!0,k)},function(k){u?m.reject(k):n(!1,k);if(t)return null;throw k;})})};f.DeferredList.prototype=new B;f.DeferredList.prototype.gatherResults=function(d){d=new f.DeferredList(d,!1,!0,!1);d.addCallback(function(c){var u=[];l.forEach(c,function(t){u.push(t[1])});return u});return d};return f.DeferredList})},"esri/layers/FeatureLayer":function(){define("require module dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/date/locale dojo/io-query dojo/dom-construct dojo/i18n dojo/when dojo/global dojo/promise/all ../sniff ../kernel ../lang ../request ../config ../deferredUtils ../promiseList ../SpatialReference ../urlUtils ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/jsonUtils ../support/expressionUtils ../arcadeProfiles/labelingProfile ../tasks/QueryTask ../tasks/query ../tasks/FeatureSet ../tasks/StatisticDefinition ../geometry/Extent ../geometry/jsonUtils ../geometry/normalizeUtils ../geometry/scaleUtils ./GraphicsLayer ./Field ./TimeInfo ./TimeReference ./FeatureType ./FeatureTemplate ./FeatureSubtype ./FeatureEditResult ./LabelClass ./support/domainUtils ./SnapshotMode ./OnDemandMode ./SelectionMode ./StreamMode ./GridLayout ./TrackManager ./HeatmapManager ./clustering/ClusterManager dojo/i18n!../nls/jsapi ./agscommon".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E,C,z,w,A,G,F,H,J,K,Q,P,I,N,L,W,Z,aa,ia,R,S,M,X,fa,ea,ha,ra,Aa,Ea,va,Ga,ca,ja,wa,za,Fa,O,ya,Ha){var da=y.defaults,Oa=!!g("esri-pbf"),Na=!!g("esri-featurelayer-pbf"),Ca=l(S,{declaredClass:"esri.layers.FeatureLayer",invalidParams:"query contains one or more unsupported parameters",reSQLCurrentTimestamp:/current_timestamp|current_date|current_time/i,reHostedFS:/(https?:)?\/\/services.*\.arcgis\.com/i,maxPointCountForAuto:4E3,maxRecordCountForAuto:2E3,
maxVertexCountForAuto:25E4,generalizeForScale:4E3,_eventMap:{"add-attachment-complete":["result"],"before-apply-edits":["adds","updates","deletes"],"delete-attachments-complete":["results"],"edits-complete":["adds","updates","deletes"],"query-attachment-infos-complete":["results"],"query-count-complete":["count"],"query-features-complete":["featureSet"],"query-ids-complete":["objectIds"],"query-related-features-complete":["featureSets"],"selection-complete":["features","method"],"update-end":["error",
"info"]},constructor:function(V,oa){this._preventInit||this._initFeatureLayer(V,oa)},_initFeatureLayer:function(V,oa){oa=oa||{};this._tileWidth=oa.tileWidth||512;this._tileHeight=oa.tileHeight||512;this.i18n=Ha;this._featureReduction=this._featureReduction||oa.featureReduction;this._featureReductionEnabled=null!=oa.featureReductionEnabled?oa.featureReductionEnabled:!0;this._featureUpdatesCheckEnabled=null!=oa.featureUpdatesCheckEnabled?oa.featureUpdatesCheckEnabled:!0;this.showLabels=null!=oa.showLabels?
oa.showLabels:!0;this._outFields=oa.outFields;this._defnExpr=oa.definitionExpression;this._loadCallback=oa.loadCallback;this._trackIdField=oa.trackIdField;this.objectIdField=oa.objectIdField;var pa=null!=oa.resolution,Y=null!=oa.maxAllowableOffset;this._maxOffset=this._optMaxOffset=pa||Y?pa?oa.resolution:oa.maxAllowableOffset:this.maxAllowableOffset;this.quantize=null!=oa.quantize?oa.quantize:!0;this._optEditable=oa.editable;this._optAutoGen=oa.autoGeneralize;this.editSummaryCallback=oa.editSummaryCallback;
this.userId=oa.userId;this.userIsAdmin=oa.userIsAdmin;this.useMapTime=oa.hasOwnProperty("useMapTime")?!!oa.useMapTime:!0;this.source=oa.source;this.gdbVersion=oa.gdbVersion;this.orderByFields=oa.orderByFields;this.maxPointCountForAuto=null!=oa.maxPointCountForAuto?oa.maxPointCountForAuto:this.maxPointCountForAuto;this.maxRecordCountForAuto=null!=oa.maxRecordCountForAuto?oa.maxRecordCountForAuto:this.maxRecordCountForAuto;this.maxVertexCountForAuto=null!=oa.maxVertexCountForAuto?oa.maxVertexCountForAuto:
this.maxVertexCountForAuto;this.generalizeForScale=null!=oa.generalizeForScale?oa.generalizeForScale:this.generalizeForScale;this.queryPagination=this._optQueryPagination=null!=oa.queryPagination?oa.queryPagination:!0;this.multipatchOption=oa.multipatchOption;this.subtypeSublayerInfo=oa.subtypeSublayerInfo;this._selectedFeatures={};this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();pa=x.isDefined(oa.mode)?oa.mode:Ca.MODE_ONDEMAND;this._isStream&&(pa=Ca.MODE_STREAM);this.mode=
pa;switch(pa){case Ca.MODE_SNAPSHOT:this.currentMode=Ca.MODE_SNAPSHOT;this._mode=new Ga(this);break;case Ca.MODE_ONDEMAND:case Ca.MODE_AUTO:this.currentMode=Ca.MODE_ONDEMAND;this._mode=new ca(this);this.latticeTiling=oa.latticeTiling;break;case Ca.MODE_SELECTION:this.currentMode=Ca.MODE_SELECTION;this._mode=new ja(this);this._isSelOnly=!0;break;case Ca.MODE_STREAM:this.currentMode=Ca.MODE_STREAM,this._mode=new wa(this),this._isStream=!0}this._initLayer=c.hitch(this,this._initLayer);this._selectHandler=
c.hitch(this,this._selectHandler);this._editable=!1;if(c.isObject(V)&&V.layerDefinition)return this._collection=!0,this.mode=this._isStream?Ca.MODE_STREAM:Ca.MODE_SNAPSHOT,this._isStream||this._outFields||(this._outFields=["*"]),this._initLayer(V),this;this.source&&(V={source:this.source.toJson()},this._url.query=c.mixin(this._url.query,{layer:t.toJson(V)}));this.gdbVersion&&(this._url.query=c.mixin(this._url.query,{gdbVersion:this.gdbVersion}));this._task=new I(this.url,{source:this.source,gdbVersion:this.gdbVersion});
V=this._url.path;this._fserver=!1;-1!==V.search(/\/FeatureServer\//i)&&(this._fserver=!0);this._checkFeatureLimit();(oa=oa.resourceInfo)?this._initLayer(oa):v({url:V,content:c.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});this.registerConnectEvents()},_initLayer:function(V,oa){if(V||oa){this._json=V;oa=this.subtypeSublayerInfo;this._findCredential();if(this.credential&&this.credential.ssl||V&&V._ssl)this._useSSL(),this._task._useSSL();
this._collection&&(this._isStream||(this.currentMode=Ca.MODE_SNAPSHOT,this._mode=new Ga(this)),this._featureSet=V.featureSet,this._nextId=V.nextObjectId,V=V.layerDefinition);this.version=V.currentVersion;this.version||(this.version="capabilities"in V||"drawingInfo"in V||"hasAttachments"in V||"htmlPopupType"in V||"relationships"in V||"timeInfo"in V||"typeIdField"in V||"types"in V?10:9.3);this.geometryType=V.geometryType;V.bandCount&&V.fields&&1<V.fields.length&&(this.geometryType="esriGeometryPolygon",
this._isImageService=!0);"string"!==typeof this.multipatchOption&&"esriGeometryMultiPatch"===this.geometryType&&(this.multipatchOption="xyFootprint");if(V.hasOwnProperty("capabilities")){var pa=this.capabilities=V.capabilities;pa&&-1!==pa.toLowerCase().indexOf("editing")?this._editable=!0:this._editable=!1}else this._collection||(this._editable=this._fserver);x.isDefined(this._optEditable)?(this._editable=this._optEditable,delete this._optEditable):"esriGeometryMultiPatch"===this.geometryType&&(this._editable=
!1);this._isImageService&&(this._editable=!1);this._json=t.toJson(this._json);this.isEditable()?this._setMaxOffset(null):this._canAutoGeneralize()&&(this._autoGeneralize=x.isDefined(this._optAutoGen)?this._optAutoGen:this.mode===Ca.MODE_ONDEMAND||this.mode===Ca.MODE_AUTO,delete this._optAutoGen);pa=V.effectiveMinScale||V.minScale;var Y=V.effectiveMaxScale||V.maxScale;!this._hasMin&&pa&&this.setMinScale(pa);!this._hasMax&&Y&&this.setMaxScale(Y);this.layerId=V.id;this.name=oa&&oa.title||V.name;this.description=
V.description;this.copyright=V.copyrightText;this.type=V.type;this.displayField=V.displayField;this.defaultDefinitionExpression=V.definitionExpression||(V.isView?V.viewDefinitionQuery:V.definitionQuery);this.fullExtent=new Z(V.extent);this.initialExtent=new Z(this.fullExtent.toJson());this.fullExtent.spatialReference&&(this.spatialReference=new C(this.fullExtent.spatialReference.toJson()));this.defaultVisibility=V.defaultVisibility;this.editingInfo=V.editingInfo;this.supportsLastEditDate=!(!this.editingInfo||
null==this.editingInfo.lastEditDate);if("esriGeometryPoint"===this.geometryType||"esriGeometryMultipoint"===this.geometryType)this.latticeTiling=!1;this.hasM=V.hasM||!1;this.hasZ=V.hasZ||!1;this.indexedFields=V.indexedFields;this.indexes=V.indexes;this.maxRecordCount=V.maxRecordCount;this.canModifyLayer=V.canModifyLayer;this.supportsStatistics=V.supportsStatistics;this.supportsAdvancedQueries=this._collection?!1:V.supportsAdvancedQueries;this.supportsCalculate=V.supportsCalculate;this.supportsASyncCalculate=
V.supportsASyncCalculate;this.supportsAttachmentsByUploadId=V.supportsAttachmentsByUploadId;this.supportsCoordinatesQuantization=V.supportsCoordinatesQuantization;this.supportsQuantizationEditMode=V.supportsQuantizationEditMode;this.supportsFieldDescription=V.supportsFieldDescriptionProperty;this.supportsFormatPBF=V.supportedQueryFormats?-1!==u.map(V.supportedQueryFormats.toLowerCase().split(","),c.trim).indexOf("pbf"):!1;this.quantize=this.quantize&&this.supportsCoordinatesQuantization;this.hasLabels=
V.hasLabels;this.canScaleSymbols=V.canScaleSymbols;this.supportsRollbackOnFailureParameter=this.supportsRollbackOnFailure=V.supportsRollbackOnFailure;this.syncCanReturnChanges=V.syncCanReturnChanges;this.isDataVersioned=V.isDataVersioned;this.editFieldsInfo=V.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=V.ownershipBasedAccessControlForFeatures;this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures&&(this.creatorField=this.editFieldsInfo.creatorField);this.relationships=V.relationships;
this.allowGeometryUpdates=x.isDefined(V.allowGeometryUpdates)?V.allowGeometryUpdates:!0;this.allowUpdateWithoutMValues=!!V.allowUpdateWithoutMValues;this.enableZDefaults=!!V.enableZDefaults;this.zDefault=x.isDefined(V.zDefault)?V.zDefault:null;this.advancedQueryCapabilities=V.advancedQueryCapabilities||{supportsStatistics:this.supportsStatistics,supportsOrderBy:this.supportsAdvancedQueries,supportsDistinct:this.supportsAdvancedQueries};this.geometryProperties=V.hasGeometryProperties&&V.geometryProperties||
null;this.url&&(this.advancedQueryCapabilities.supportsPagination=this.advancedQueryCapabilities.supportsPagination&&(this.reHostedFS.test(this.url)||10.3<this.version));this.queryPagination=this._optQueryPagination&&this.advancedQueryCapabilities.supportsPagination;this.useStandardizedQueries=V.useStandardizedQueries;this.tileMaxRecordCount=V.tileMaxRecordCount;this.standardMaxRecordCount=V.standardMaxRecordCount;if(pa=V.dateFieldsTimeReference)this.dateFieldsTimeReference=new fa(pa);this._setMaxOffset(this._maxOffset,
!0);this._isTable="Table"===this.type;Y=V.fields;this._createFields(Y);if(!this.objectIdField&&(this.objectIdField=V.objectIdField,!this.objectIdField))for(Y=V.fields,pa=0;pa<Y.length;pa++){var ka=Y[pa];if("esriFieldTypeOID"===ka.type){this.objectIdField=ka.name;break}}if(!x.isDefined(this._nextId)){Y=this.objectIdField;ka=-1;if(this._collection&&Y){var ta=(pa=this._featureSet)&&pa.features,xa=ta?ta.length:0;for(pa=0;pa<xa;pa++){var Da=(Da=ta[pa].attributes)&&Da[Y];Da>ka&&(ka=Da)}}this._nextId=ka+
1}this.globalIdField=V.globalIdField;if(pa=this.typeIdField=V.typeIdField)if(pa=!this._getField(pa)&&this._getField(pa,!0))this.typeIdField=pa.name;this.visibilityField=V.visibilityField;if(Y=V.defaultSymbol)this.defaultSymbol=F.fromJson(Y);var Ja=this.types=[],La=V.types;ka=(pa=this.editFieldsInfo)&&pa.creatorField;ta=pa&&pa.editorField;Da=ka||ta;xa=[];if(La)for(pa=0;pa<La.length;pa++){var Ya=new ea(La[pa]);var Ua=Ya.templates;Da&&Ua&&Ua.length&&(xa=xa.concat(Ua));Ja.push(Ya)}La=V.templates;Ya=this.templates=
[];if(La)for(pa=0;pa<La.length;pa++)Ja=new ha(La[pa]),Da&&xa.push(Ja),Ya.push(Ja);for(pa=0;pa<xa.length;pa++)if(Da=c.getObject("prototype.attributes",!1,xa[pa]))ka&&delete Da[ka],ta&&delete Da[ta];if(pa=V.subtypeField)this.subtypeField=(pa=this.getField(pa))?pa.name:null;this.defaultSubtypeCode=V.defaultSubtypeCode;this.subtypes=u.map(V.subtypes,function(ob){return new ra(ob)});this._applySTSublayerInfo(oa);if(oa=V.timeInfo)this.timeInfo=new X(oa),this._startTimeField=oa.startTimeField,this._endTimeField=
oa.endTimeField,this._startTimeField&&this._endTimeField&&(this._twoTimeFields=!0),this._trackIdField?oa.trackIdField=this._trackIdField:this._trackIdField=oa.trackIdField;this.hasAttachments=!this._collection&&V.hasAttachments?!0:!1;this.htmlPopupType=V.htmlPopupType;oa=V.drawingInfo;(pa=oa&&oa.labelingInfo)&&!this.labelingInfo&&(this.labelingInfo=u.map(pa,function(ob){return new Ea(ob)}),this._fixLabelExpr());if(!this.renderer)if(oa&&oa.renderer){var Ta=oa.renderer;this.setRenderer(K.fromJson(Ta,
{geometryType:this.geometryType}));"classBreaks"===Ta.type&&this.renderer.setMaxInclusive(!0);if(!this._collection){var ab=Ta.type;pa=[];Ta=this.renderer;switch(ab){case "simple":pa.push(Ta.symbol);break;case "uniqueValue":case "classBreaks":pa.push(Ta.defaultSymbol),pa=pa.concat(u.map(Ta.infos,function(ob){return ob.symbol}))}pa=u.filter(pa,x.isDefined);var fb=this._url.path+"/images/",kb=this._getToken();u.forEach(pa,function(ob){var wb=ob.url;wb&&(-1===wb.search(/https?:/)&&-1===wb.indexOf("data:")&&
(ob.url=fb+wb),kb&&-1!==ob.url.search(/https?:/)&&(ob.url+="?token\x3d"+kb))})}}else if(Y)La=this.types,0<La.length?(Ta=new J(this.defaultSymbol,this.typeIdField),u.forEach(La,function(ob){Ta.addValue(ob.id,ob.symbol)})):Ta=new H(this.defaultSymbol),this.setRenderer(Ta);else if(!this._isTable){switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":ab=new w;break;case "esriGeometryPolyline":ab=new A;break;case "esriGeometryPolygon":ab=new G;break;default:this.hasXYFootprint()&&
(ab=new G)}this.setRenderer(ab?new H(ab):null)}ab=oa&&oa.transparency||0;!this.hasOwnProperty("opacity")&&0<ab&&(this.opacity=1-ab/100);(g("ie")||7<=g("trident")||g("safari"))&&this.isEditable()&&10.02>this.version&&(this._ts=!0);this.statistics=V.statistics;this._fixRendererFields();this._updateRequiredFieldsFromLabelingInfo();this._checkFields();this._updateCaps();var qb=function(){null==this._maxOffset||this._isFractionalOffsetAllowed()||this._setMaxOffset(this._maxOffset);this.loaded=!0;this.setFeatureReduction(this.getFeatureReduction());
this.currentMode!==Ca.MODE_SNAPSHOT&&(this.queryPagination=!1);this.onLoad(this);var ob=this._loadCallback;ob&&(delete this._loadCallback,ob(this))};V=[];this._collection?(ab=this._featureSet,this._featureSet=null,this._mode._drawFeatures(new L(ab)),this._fcAdded=!0):(V.push(this._forceIdentity()),this._limitPromise&&V.push(this._limitPromise));V.push(this._evalArcadeSupport());V.length?E(V).then(c.hitch(this,function(){qb.call(this)})):qb.call(this)}},_applySTSublayerInfo:function(V){V&&this.subtypeField&&
(this.subtypeCode=V.subtypeCode,this._applySTSublayerDefinitionExpression(V),this._filterSubtypes(V),this._applySTTemplates(V),this._applySTFieldOverrides(V))},_applySTSublayerDefinitionExpression:function(V){var oa=[],pa=this.getDefinitionExpression();pa&&oa.push(pa);(V=V.layerDefinition&&V.layerDefinition.definitionExpression)&&oa.push(V);1<oa.length&&(oa=u.map(oa,function(Y){return"("+Y+")"}));this.setDefinitionExpression(oa.length?oa.join(" AND "):null)},_applySTTemplates:function(V){if(V=V.layerDefinition&&
V.layerDefinition.templates)this.templates=u.map(V,function(oa){return new ha(oa)})},_filterSubtypes:function(){this.subtypes&&(this.subtypes=u.filter(this.subtypes,function(V){return V.code===this.subtypeCode},this))},_applySTFieldOverrides:function(V){var oa=V.layerDefinition&&V.layerDefinition.fieldOverrides;if(oa){this.fields=u.filter(this.fields,function(Y){return u.some(oa,function(ka){return ka.name===Y.name})});var pa=this.getSubtypeByCode(this.subtypeCode).domains;this.fields.forEach(function(Y){var ka=
u.filter(oa,function(ta){return ta.name===Y.name})[0];ka.alias&&(Y.alias=ka.alias);if(!1===ka.editable||Y.name===this.subtypeField)Y.editable=!1;pa&&(ka=pa[Y.name])&&"inherited"!==ka.type&&(Y.domain=va.fromJson(ka.toJson()))},this)}},setShowLabels:function(V){var oa=this.showLabels;this.showLabels=V;oa!==this.showLabels&&(this._evalSurfaceType(),this.onShowLabelsChange())},onShowLabelsChange:function(){},onRendererChange:function(V){this.inherited(arguments);var oa=this._map;this._ager=!!(V&&V.observationAger&&
V.observationRenderer);V&&"colors"in V&&"blurRadius"in V&&"maxPixelIntensity"in V?(this._evalSurfaceType(!0),"esriGeometryPoint"==this.geometryType&&!this._heatmapManager&&oa&&(this._heatmapManager=new O(this),this._heatmapManager.initialize(oa))):this.renderer&&this.renderer.getRendererInfo?u.some(this.renderer.rendererInfos,function(ka){return ka.renderer&&"colors"in ka.renderer&&"blurRadius"in ka.renderer})||(this._heatmapManager=null):this._heatmapManager=null;this.timeInfo&&oa&&(V&&(V.latestObservationRenderer||
V.trackRenderer)?this._trackManager||(this._trackManager=new Fa(this),this._trackManager.initialize(oa),this._childLayer=this._trackManager.container,this._mode._applyTimeFilter()):this._trackManager&&!this._isStream&&(this._trackManager.destroy(),this._trackManager=null));if(V){var pa=[];oa=u.filter([V,V.observationRenderer,V.latestObservationRenderer,V.trackRenderer],x.isDefined);var Y=function(ka){return null!=ka&&"function"!=typeof ka&&ka};u.forEach(oa,function(ka){var ta=Y(ka.attributeField),
xa=Y(ka.attributeField2);ka=Y(ka.attributeField3);!1!==ta&&pa.push(ta);!1!==xa&&pa.push(xa);!1!==ka&&pa.push(ka)});this._requiredFields=pa}else this._requiredFields=[];this.loaded&&(this._fixRendererFields(),this._checkFields(this._requiredFields),this._collection&&(this._typesDirty=!0))},setFeatureReduction:function(V){V&&(V=c.mixin({},V),null!=V.clusterSize&&null==V.clusterRadius&&(V.clusterRadius=V.clusterSize),delete V.clusterSize);this.loaded?this._isFeatureReductionSupported(V)?this._featureReduction=
V:this._featureReduction=null:this._featureReduction=V;this._evalFeatureReduction(this._featureReduction)},hasFeatureReduction:function(){return!!this._featureReduction},getFeatureReduction:function(){var V=this._featureReduction;if(V){V=c.mixin({},V);var oa=this._clusterManager;if(oa=oa&&oa.aggregationInfo)V.clusterRadius=oa.clusterRadius,V.infoTemplate=oa.infoTemplate}return V},isFeatureReductionActive:function(){var V=this._clusterManager;return!!(V&&V.isClusteringEnabled()&&V.isClusteringActive())},
isFeatureReductionEnabled:function(){return this._featureReductionEnabled},enableFeatureReduction:function(){this._featureReductionEnabled||(this._featureReductionEnabled=!0,this._evalFeatureReduction(this._featureReduction))},disableFeatureReduction:function(){this._featureReductionEnabled&&(this._featureReductionEnabled=!1,this._evalFeatureReduction(this._featureReduction))},isFeatureReductionApplied:function(){return this.hasFeatureReduction()&&this.isFeatureReductionEnabled()&&this._canCluster(this.getFeatureReduction())},
getAggregateGraphics:function(){return this._clusterManager?this._clusterManager.getAggregateGraphics():[]},getChildGraphics:function(V){return this._clusterManager?this._clusterManager.getFeaturesInCluster(V):[]},getSingleGraphics:function(){return this._clusterManager?this._clusterManager.getSingleGraphics():[]},getFeatureReductionRenderer:function(){return this.isFeatureReductionActive()?this._clusterManager.getClusterRenderer():null},getFeatureReductionLayer:function(){return this._clusterManager?
this._clusterManager.container:null},getFeatureReductionField:function(V){var oa,pa=this._clusterManager?this._clusterManager.getClusterFields():null;V=V?V.toLowerCase():"";u.some(pa,function(Y){V===Y.name.toLowerCase()&&(oa=Y);return!!oa});return oa},_isFeatureReductionSupported:function(V){return V&&"cluster"===V.type&&"esriGeometryPoint"===this.geometryType&&(this._collection||this._isStream||this._optQueryPagination&&this.advancedQueryCapabilities.supportsPagination)},_isReductionCompatibleRenderer:function(V){V=
V&&V.declaredClass||"";V=V.toLowerCase();return-1<V.indexOf("simplerenderer")||-1<V.indexOf("classbreaksrenderer")||-1<V.indexOf("uniquevaluerenderer")},_evalFeatureReduction:function(V){this.loaded&&this.getMap()&&(V=V||this.getFeatureReduction(),this._evalModeFromFReduction(V),V&&this.isFeatureReductionEnabled()?this._canCluster(V)?this._clusterManager?this._updateClusterManager(V):(this._clusterManager=this._createClusterManager(V),this.onFeatureReductionChange()):this._destroyClusterManager():
this._destroyClusterManager())},_canCluster:function(V){var oa=this._map;if(!oa)return!1;oa=oa.spatialReference;return this._isFeatureReductionSupported(V)&&this._isReductionCompatibleRenderer(this.renderer)&&(oa.isWebMercator()||4326===oa.wkid)},_createClusterManager:function(V){V=new ya({layer:this,aggregationInfo:V});this._clusterHandles=[V.on("renderer-change",c.hitch(this,function(){this.onFeatureReductionRendererChange()}))];V.initialize(this._map);return V},_updateClusterManager:function(V){var oa=
this._clusterManager;oa&&oa.setAggregationInfo(V)},_destroyClusterManager:function(V){u.forEach(this._clusterHandles,function(oa){oa.remove()});this._clusterHandles=null;this._clusterManager&&(this._clusterManager.destroy(V),this._clusterManager=null,this.onFeatureReductionChange())},redraw:function(){this.inherited(arguments);this._clusterManager&&this._clusterManager.redraw();this._trackManager&&this._trackManager.container&&this._trackManager.container.redraw()},_evalSDRenderer:function(V){this.inherited(arguments);
var oa=this._getRenderer();this._ager=!!(oa&&oa.observationAger&&oa.observationRenderer);this._trackManager&&this._trackManager.container&&this._trackManager.container.setRenderer(oa&&oa.trackRenderer);V&&this._evalFeatureReduction()},_graphicVisibilityChanged:function(V){this._clusterManager?this._clusterManager.toggleFeatureVisibility(V):this._heatmapManager&&this._heatmapManager.redraw()},setWebGLFetchOptions:function(V){this._hasOnDemandDrillMode()&&(V=V||{},null!=V.maxDrillLevel&&(this._mode.maxDrillLevel=
V.maxDrillLevel),null!=V.maxRecordCountFactor&&(this._mode.maxRecordCountFactor=V.maxRecordCountFactor),null!=V.enablePBFQuery&&(this._mode.enablePBFQuery=V.enablePBFQuery))},_isWebGLCompatible:function(){return this.loaded&&!this.isEditable()&&!this.isFeatureReductionApplied()&&(!this.labelingInfo||!1===this.showLabels)&&!this._isGeometryOperationsUsed()&&this._isRendererSupportedInWebGL()&&this.supportsCoordinatesQuantization&&("esriGeometryPolygon"!==this.geometryType||this.advancedQueryCapabilities.supportsReturningGeometryCentroid)&&
this.currentMode===Ca.MODE_ONDEMAND&&(!this._preSurfaceChangeState||this._preSurfaceChangeState.currentMode===Ca.MODE_ONDEMAND)},_isRendererSupportedInWebGL:function(){if(!this.renderer)return!1;var V=this.renderer,oa=V.declaredClass?V.declaredClass.toLowerCase():"";return(-1<oa.indexOf("simplerenderer")||-1<oa.indexOf("classbreaksrenderer")||-1<oa.indexOf("uniquevaluerenderer"))&&this._hasWebGLCompatibleSymbols(V)&&this._hasWebGLCompatibleVVs(V)},_hasWebGLCompatibleSymbols:function(V){V=this._getAllSymbolsInRenderer(V);
return!(this._hasSLSWithMarker(V)||this._hasIncompatibleSMSStyles(V)||this._hasGIFMarker(V))},_hasWebGLCompatibleVVs:function(V){return!u.some(V&&V.visualVariables,function(oa){var pa=oa.type;return("colorInfo"===pa||"opacityInfo"===pa)&&oa.stops&&8<oa.stops.length||"sizeInfo"===pa&&(oa.field||oa.valueExpression&&"$view.scale"!==oa.valueExpression||oa.expression&&"view.scale"!==oa.expression)&&oa.stops&&6<oa.stops.length?!0:!1})},_hasSLSWithMarker:function(V){return u.some(V,function(oa){return oa&&
"simplelinesymbol"===oa.type&&!!oa.marker})},_hasIncompatibleSMSStyles:function(V){var oa=void 0===g("ie")&&7==g("trident");return u.some(V,function(pa){return pa&&"simplemarkersymbol"===pa.type&&("triangle"===pa.style||"path"===pa.style&&oa)})},_hasGIFMarker:function(V){var oa=/\.gif$/,pa=/^image\/gif$/;return u.some(V,function(Y){return Y&&"picturemarkersymbol"===Y.type?oa.test(Y.url)||pa.test(Y.contentType):!1})},_getAllSymbolsInRenderer:function(V){var oa=[];V&&(oa.push(V.symbol),oa.push(V.defaultSymbol),
u.forEach(V.infos,function(pa){oa.push(pa.symbol)}),oa=u.filter(oa,function(pa){return!!pa}));return oa},_setMap:function(V){var oa=this.inherited(arguments),pa=this._mode,Y=this;pa&&V.loaded&&pa.initialize(V);this.geometryType&&this.attr("data-geometry-type",this.geometryType.replace(/esriGeometry/i,"").toLowerCase());this._addHandle=this.on("graphic-node-add",function(ka){ka=ka.graphic.attributes;(ka=Y._selectedFeatures[ka&&ka[Y.objectIdField]])&&ka.attr("data-selected","")});return oa},_unsetMap:function(V){this._suspendImpl(!0);
this._destroyClusterManager(!1);this._trackManager&&(this._trackManager.destroy(),this._trackManager=null);d.disconnect(this._zoomConnect);d.disconnect(this._addHandle);this._zoomConnect=this._addHandle=null;this.inherited("_unsetMap",arguments)},onAttach:function(){this._evalModeFromSurface()},onRefreshTick:function(){this.isFeatureUpdatesCheckActive()&&this._evalFeatureUpdates()},refresh:function(V){!this._needsRefresh&&V&&V.scheduled&&this.isFeatureUpdatesCheckActive()||(this._needsRefresh=!1,
(V=this._mode)&&V.refresh())},setFeatureUpdatesCheckEnabled:function(V){this._featureUpdatesCheckEnabled=V},isFeatureUpdatesCheckEnabled:function(){return!!this._featureUpdatesCheckEnabled},isFeatureUpdatesCheckActive:function(){return this.supportsLastEditDate&&this.isFeatureUpdatesCheckEnabled()&&!!this.refreshInterval&&!!c.getObject("onFeatureUpdatesResult.after",!1,this)},hasFeatureUpdates:function(){var V=new e;if(!this.supportsLastEditDate)return V.reject(Error("FeatureLayer does not support supportsLastEditDate")),
V.promise;if(!this._fetchMetadataPromise||this._fetchMetadataPromise.isFulfilled())this._fetchMetadataPromise=v({url:this._url.path,content:c.mixin({f:"json"},this._url.query),callbackParamName:"callback"}).then(c.hitch(this,function(oa){oa=oa.editingInfo.lastEditDate;var pa=this.editingInfo.lastEditDate!==oa;this.editingInfo.lastEditDate=oa;return pa}));this._fetchMetadataPromise.then(function(oa){V.isFulfilled()||V.resolve(oa)}).otherwise(function(oa){V.isFulfilled()||V.reject(oa)});return V.promise},
hasXYFootprint:function(){return"esriGeometryMultiPatch"===this.geometryType&&"xyFootprint"===this.multipatchOption},getOutFields:function(){return u.filter(this._getOutFields(),function(V){return"*"===V||!!this._getField(V)},this)},getField:function(V){return this._getField(V,!0)},isOutField:function(V){V=this.getField(V);if(!V)return!1;var oa=this.getOutFields();return-1<u.indexOf(oa,"*")||-1<u.indexOf(oa,V.name)},getFieldLabel:function(V){var oa=this.infoTemplate;oa=oa&&oa.getFieldInfo&&oa.getFieldInfo(V);
V=c.isFunction(V)?null:this.getField(V);var pa=oa||V,Y="";pa&&(Y=oa&&oa.label||V&&V.alias||pa.name||pa.fieldName);return Y},getDomain:function(V,oa){var pa,Y,ka=(oa=oa&&oa.feature)&&this.typeIdField&&oa.attributes&&oa.attributes[this.typeIdField];null!=ka&&u.some(this.types,function(ta){return ta.id==ka?((pa=ta.domains&&ta.domains[V])&&"inherited"===pa.type&&(pa=this._getLayerDomain(V),Y=!0),!0):!1},this);Y||pa||(pa=this._getLayerDomain(V));return pa},_getLayerDomain:function(V){this._createFieldsIndex();
var oa=this._fieldsIndex;if(oa)return oa=oa.caseSensitive,(oa=oa.get(V))?oa.domain:null;var pa;u.some(this.fields,function(Y){Y.name===V&&(pa=Y.domain);return!!pa});return pa},getType:function(V){return this.getTypeById(V&&this.typeIdField&&V.attributes&&V.attributes[this.typeIdField])},getTypeById:function(V){var oa;u.some(this.types,function(pa){pa.id==V&&(oa=pa);return!!oa});return oa},getSubtypeByCode:function(V){var oa;u.some(this.subtypes,function(pa){pa.code==V&&(oa=pa);return!!oa});return oa},
setEditable:function(V){if(!this._collection||this._isImageService)return this;if(!this.loaded)return this._optEditable=V,this;var oa=this._editable;this._editable=V;this._updateCaps();if(oa!==V)this.onCapabilitiesChange();return this},getEditCapabilities:function(V){var oa={canCreate:!1,canUpdate:!1,canDelete:!1,canUpdateGeometry:!1};if(!this.loaded||!this.isEditable())return oa;var pa=V&&V.feature;V=V&&V.userId||this.getUserId();var Y=u.map(this.capabilities?this.capabilities.toLowerCase().split(","):
[],c.trim),ka=(oa=-1<u.indexOf(Y,"editing"))&&-1<u.indexOf(Y,"create"),ta=oa&&-1<u.indexOf(Y,"update");Y=oa&&-1<u.indexOf(Y,"delete");var xa=this.ownershipBasedAccessControlForFeatures,Da=this.editFieldsInfo,Ja=Da&&Da.creatorField;Da=Da&&Da.realm;pa=(pa=pa&&pa.attributes)&&Ja?pa[Ja]:void 0;var La=!!this.userIsAdmin;Ja=!xa||La||!(!xa.allowOthersToUpdate&&!xa.allowUpdateToOthers);var Ya=!xa||La||!(!xa.allowOthersToDelete&&!xa.allowDeleteToOthers),Ua=!xa||La||!xa.hasOwnProperty("allowAnonymousToUpdate")||
xa.allowAnonymousToUpdate;xa=!xa||La||!xa.hasOwnProperty("allowAnonymousToDelete")||xa.allowAnonymousToDelete;V&&Da&&(V=V+"@"+Da);if(La||oa&&!(ka||ta||Y))ka=ta=Y=!0;oa={canCreate:ka,canUpdate:ta,canDelete:Y,canUpdateGeometry:La||this.allowGeometryUpdates};V||(oa.canUpdate=oa.canUpdate&&Ua,oa.canDelete=oa.canDelete&&xa);null===pa?(oa.canUpdate=oa.canUpdate&&Ja,oa.canDelete=oa.canDelete&&Ya):""!==pa&&pa&&V.toLowerCase()!==pa.toLowerCase()&&(oa.canUpdate=oa.canUpdate&&Ja,oa.canDelete=oa.canDelete&&Ya);
return oa},getUserId:function(){var V;this.loaded&&(V=this.credential&&this.credential.userId||this.userId||"");return V},setUserIsAdmin:function(V){this.userIsAdmin=V},setEditSummaryCallback:function(V){this.editSummaryCallback=V},getEditSummary:function(V,oa,pa){pa=x.isDefined(pa)?pa:(new Date).getTime();var Y="";pa=this.getEditInfo(V,oa,pa);(oa=oa&&oa.callback||this.editSummaryCallback)&&(pa=oa(V,pa)||"");if(c.isString(pa))Y=pa;else{if(pa){V=pa.action;oa=pa.userId;var ka=pa.timeValue,ta=0;V&&ta++;
oa&&ta++;x.isDefined(ka)&&ta++;1<ta&&(Y=("edit"===V?"edit":"create")+(oa?"User":"")+(x.isDefined(ka)?pa.displayPattern:""))}Y=Y&&x.substitute(pa,this.i18n.layers.FeatureLayer[Y])}return Y},getEditInfo:function(V,oa,pa){if(this.loaded){pa=x.isDefined(pa)?pa:(new Date).getTime();oa=oa&&oa.action||"last";var Y=this.editFieldsInfo,ka=Y&&Y.creatorField,ta=Y&&Y.creationDateField,xa=Y&&Y.editorField;Y=Y&&Y.editDateField;xa=(V=V&&V.attributes)&&xa?V[xa]:void 0;Y=V&&Y?V[Y]:null;ka=this._getEditData(V&&ka?
V[ka]:void 0,V&&ta?V[ta]:null,pa);pa=this._getEditData(xa,Y,pa);switch(oa){case "creation":var Da=ka;break;case "edit":Da=pa;break;case "last":Da=pa||ka}Da&&(Da.action=Da===pa?"edit":"creation");return Da}},_getEditData:function(V,oa,pa){if(x.isDefined(oa)){var Y=pa-oa;var ka=0>Y?"Full":6E4>Y?"Seconds":12E4>Y?"Minute":36E5>Y?"Minutes":72E5>Y?"Hour":864E5>Y?"Hours":6048E5>Y?"WeekDay":"Full"}if(void 0!==V||ka){var ta=ta||{};ta.userId=V;ka&&(V=r.format,pa=new Date(oa),ta.minutes=Math.floor(Y/6E4),ta.hours=
Math.floor(Y/36E5),ta.weekDay=V(pa,{datePattern:"EEEE",selector:"date"}),ta.formattedDate=V(pa,{selector:"date"}),ta.formattedTime=V(pa,{selector:"time"}),ta.displayPattern=ka,ta.timeValue=oa)}return ta},isEditable:function(){return!(!this._editable&&!this.userIsAdmin)},isQueryable:function(){var V=u.map(this.capabilities?this.capabilities.toLowerCase().split(","):[],c.trim);return this._isStream||this.userIsAdmin||this._collection||-1!==u.indexOf(V,"query")||-1!==u.indexOf(V,"catalog")},setResolution:function(V){return this.setMaxAllowableOffset(V)},
setMaxAllowableOffset:function(V){this.isEditable()||(this._optMaxOffset=V,this._setMaxOffset(V,!0));return this},_resetMaxAllowableOffset:function(){this.setMaxAllowableOffset(this._optMaxOffset);this._prevScale=null;this._refreshMaxAllowableOffset()},_refreshMaxAllowableOffset:function(){this._calcMaxOffsetForAutoSnapshot();this._updateMaxOffset();this._needsRefresh=!1},getResolution:function(){return this.getMaxAllowableOffset()},getMaxAllowableOffset:function(){var V=this._quantizationParameters?
this._quantizationParameters.tolerance:void 0;return null!=this._maxOffset?this._maxOffset:V},_setMaxOffset:function(V,oa){if(null==V)return delete this._maxOffset,delete this._quantizationParameters,this;this.quantize&&this.supportsCoordinatesQuantization?("esriGeometryPolyline"===this.geometryType?this._maxOffset=V:delete this._maxOffset,this._quantizationParameters=V?{mode:"view",originPosition:"upperLeft",tolerance:V,extent:this.fullExtent}:null):(this._isFractionalOffsetAllowed()&&oa||(V=Math.floor(V)),
isNaN(V)||0===V?delete this._maxOffset:this._maxOffset=V,delete this._quantizationParameters);return this},_isFractionalOffsetAllowed:function(){return null==this.version||10.1<=this.version||navigator.languages&&this._isLangWithDot(navigator.languages[0])},_isLangWithDot:function(V){V=(V=V&&V.split("-"))&&V[0]&&V[0].toLowerCase();return-1!==u.indexOf(this._langsWithDot,V)},_langsWithDot:"ar en et fr he ja ko th vi zh".split(" "),setAutoGeneralize:function(V){this.loaded?this._canAutoGeneralize()&&
((this._autoGeneralize=V)?(this._isAutoSnapshotMode()&&(this._prevScale=null),this._updateMaxOffset()):this._setMaxOffset(null)):this._optAutoGen=V;return this},_canAutoGeneralize:function(){return!this.isEditable()&&this.mode!==Ca.MODE_SNAPSHOT},setGDBVersion:function(V){this._collection||V===this.gdbVersion||!V&&!this.gdbVersion||(this.gdbVersion=V,this._task.gdbVersion=V,this._url.query=c.mixin(this._url.query,{gdbVersion:V}),this.loaded&&(this.clearSelection(),this._map&&this.refresh()),this.onGDBVersionChange());
return this},hasAllFeatures:function(){return this._mode?this._mode.hasAllFeatures():!0},hasUpdateError:function(){return this._mode?this._mode.hasUpdateError():!1},setDefinitionExpression:function(V){this._defnExpr=V;this._hasPendingLimitQuery()||((V=this._checkFeatureLimit())?this._evalModeAndApplyDefnExpr(V):this._applyDefnExpr());return this},_applyDefnExpr:function(){var V=this._mode;V&&V.propertyChangeHandler(1)},_evalModeAndApplyDefnExpr:function(V){V.then(c.hitch(this,function(oa){oa&&(oa instanceof
Error||!oa.modeChanged)&&this._applyDefnExpr()}))},getDefinitionExpression:function(){return this._defnExpr},hasDefinitionExpressionWithCurrentTimestamp:function(){return this.reSQLCurrentTimestamp.test(this.getDefinitionExpression())},setTimeDefinition:function(V){this._isSnapshotMode()&&(this._timeDefn=V,(V=this._mode)&&V.propertyChangeHandler(2));return this},getTimeDefinition:function(){return this._timeDefn},setTimeOffset:function(V,oa){this._timeOffset=V;this._timeOffsetUnits=oa;(V=this._mode)&&
V.propertyChangeHandler(0);return this},setUseMapTime:function(V){this.useMapTime=V;this._toggleTime(!this.suspended);(V=this._mode)&&V.propertyChangeHandler(0)},selectFeatures:function(V,oa,pa,Y){oa=oa||Ca.SELECTION_NEW;this._hasSelectionError=this._hasPartialSelectedFeatures=!1;V=this._getShallowClone(V);var ka=this._map,ta=this,xa=D._fixDfd(new e(D._dfdCanceller));V.outFields=this.getOutFields();V.returnGeometry=!0;V.multipatchOption=this.multipatchOption;ka&&(V.outSpatialReference=new C(ka.spatialReference.toJson()));
if(!this._applyQueryFilters(V,!0)){var Da={features:[]};this._selectHandler(Da,oa,pa,Y,xa);return xa}if(ka=this._canDoClientSideQuery(V))xa._pendingDfd=q(this._doQuery(V,ka)),xa._pendingDfd.then(function(La){Da={features:La};ta._selectHandler(Da,oa,pa,Y,xa)});else{if(this._collection)return this._resolve([Error("FeatureLayer::selectFeatures - "+this.invalidParams)],null,Y,xa,!0),xa;if(this.loaded&&!this.isQueryable())return this._resolve([Error("Layer does not support query capability.")],null,Y,
xa,!0),xa;var Ja=this;this._ts&&(V._ts=(new Date).getTime());ka=this._canFetchPBFForQuery(V);this._enableEditModeQuantization(V,ka);(xa._pendingDfd=this._task.execute(V,null,null,ka?{format:"pbf"}:null)).addCallbacks(function(La){Ja._selectHandler(La,oa,pa,Y,xa)},function(La){Ja._hasPartialSelectedFeatures=!0;Ja._hasSelectionError=!0;Ja._resolve([La],null,Y,xa,!0)})}return xa},getSelectedFeatures:function(){var V=this._selectedFeatures,oa=[],pa;for(pa in V)V.hasOwnProperty(pa)&&oa.push(V[pa]);return oa},
clearSelection:function(V){var oa=this._selectedFeatures,pa=this._mode,Y;for(Y in oa)oa.hasOwnProperty(Y)&&(this._unSelectFeatureIIf(Y,pa),pa._removeFeatureIIf(Y));this._selectedFeatures={};this._isSelOnly&&pa._applyTimeFilter(!0);if(!V)this.onSelectionClear();return this},setSelectionSymbol:function(V){if(this._selectionSymbol=V){var oa=this._selectedFeatures,pa;for(pa in oa)oa.hasOwnProperty(pa)&&oa[pa].setSymbol(V)}return this},getSelectionSymbol:function(){return this._selectionSymbol},setLabelingInfo:function(V){V?
(this.labelingInfo=V,this._fixLabelExpr()):delete this.labelingInfo;this._collection&&(this._typesDirty=!0);this._evalSurfaceType();this.onLabelingInfoChange()},_fixLabelExpr:function(){var V=/\[([^\[\]]+)\]/ig,oa,pa=this,Y=function(ka,ta){ka=pa._getField(ta,!0);return"["+(ka&&ka.name||ta)+"]"};u.forEach(this.labelingInfo,function(ka){if(oa=ka.labelExpression)ka.labelExpression=oa.replace(V,Y)})},_updateRequiredFieldsFromLabelingInfo:function(){var V=[];u.forEach(this.labelingInfo,function(oa){var pa=
oa.labelExpressionInfo;if(oa.labelExpression){var Y=/[\[\]]/ig;oa=oa.labelExpression.match(/\[[^\[\]]+\]/ig);(oa=u.map(oa,function(ta){return ta.replace(Y,"")}))&&(V=V.concat(oa))}if(pa){if(pa.value){var ka=/[\{\}]/ig;oa=pa.value.match(/\{[^\{\}]+\}/ig);(oa=u.map(oa,function(ta){return ta.replace(ka,"")}))&&(V=V.concat(oa))}pa.expression&&(oa=u.map(this.fields,function(ta){return ta.name},this),V=V.concat(Q.extractFieldNames(pa.expression,oa)))}},this);V=u.map(V,function(oa){var pa=this.getField(oa);
return pa?pa.name:oa},this);this._requiredFields&&(this._requiredFields=this._requiredFields.concat(V))},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(V,oa,pa,Y,ka,ta){var xa=ta.assembly,Da=ta.dfd;this._applyNormalized(V,xa&&xa[0]);this._applyNormalized(oa,xa&&xa[1]);this.onBeforeApplyEdits(V,oa,pa);var Ja={},La=this.objectIdField;xa={f:"json"};var Ya=!1;if(this._collection)ta={},ta.addResults=V?u.map(V,function(){Ya=!0;return{objectId:this._nextId++,success:!0}},this):
null,ta.updateResults=oa?u.map(oa,function(ab){Ya=!0;var fb=ab.attributes[La];Ja[fb]=ab;return{objectId:fb,success:!0}},this):null,ta.deleteResults=pa?u.map(pa,function(ab){Ya=!0;return{objectId:ab.attributes[La],success:!0}},this):null,Ya?this._editHandler(ta,V,Ja,Y,ka,Da):this._resolve([ta.addResults,ta.updateResults,ta.deleteResults],null,Y,Da);else{V&&0<V.length&&(xa.adds=this._convertFeaturesToJson(V,0,1),Ya=!0);if(oa&&0<oa.length){for(ta=0;ta<oa.length;ta++){var Ua=oa[ta];Ja[Ua.attributes[La]]=
Ua}xa.updates=this._convertFeaturesToJson(oa,0,0,1);Ya=!0}if(pa&&0<pa.length){oa=[];for(ta=0;ta<pa.length;ta++)oa.push(pa[ta].attributes[La]);xa.deletes=oa.join(",");Ya=!0}if(Ya){var Ta=this;return v({url:this._url.path+"/applyEdits",content:c.mixin(xa,this._url.query),callbackParamName:"callback",load:function(ab){Ta._editHandler(ab,V,Ja,Y,ka,Da)},error:function(ab){Ta._resolve([ab],null,ka,Da,!0)}},{usePost:!0})}this._resolve([],null,Y,Da)}},queryFeatures:function(V,oa,pa,Y){return this._query("execute",
"onQueryFeaturesComplete",V,oa,pa,Y)},queryRelatedFeatures:function(V,oa,pa){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",V,oa,pa)},queryIds:function(V,oa,pa,Y){return this._query("executeForIds","onQueryIdsComplete",V,oa,pa,Y)},queryCount:function(V,oa,pa,Y){return this._query("executeForCount","onQueryCountComplete",V,oa,pa,Y)},queryExtent:function(V,oa,pa,Y){return this._query("executeForExtent","onQueryExtentComplete",V,oa,pa,Y)},queryAttachmentInfos:function(V,
oa,pa){var Y=this._url.path+"/"+V+"/attachments",ka=new e(D._dfdCanceller),ta=this;Y=z.normalize(Y);ka._pendingDfd=v({url:Y,content:c.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(xa){xa=xa.attachmentInfos;var Da;u.forEach(xa,function(Ja){Da=m.objectToQuery({gdbVersion:ta._url.query&&ta._url.query.gdbVersion,layer:ta._url.query&&ta._url.query.layer,token:ta._getToken()});Ja.url=Y+"/"+Ja.id+(Da?"?"+Da:"");Ja.objectId=V});ta._resolve([xa],"onQueryAttachmentInfosComplete",
oa,ka)},error:function(xa){ta._resolve([xa],null,pa,ka,!0)}});return ka},addAttachment:function(V,oa,pa,Y){return this._sendAttachment("add",V,oa,pa,Y)},updateAttachment:function(V,oa,pa,Y,ka){pa.appendChild(a.create("input",{type:"hidden",name:"attachmentId",value:oa}));return this._sendAttachment("update",V,pa,Y,ka)},deleteAttachments:function(V,oa,pa,Y){var ka=this._url.path+"/"+V+"/deleteAttachments",ta=new e(D._dfdCanceller),xa=this;oa={f:"json",attachmentIds:oa.join(",")};ta._pendingDfd=v({url:ka,
content:c.mixin(oa,this._url.query),callbackParamName:"callback",load:c.hitch(this,function(Da){Da=Da.deleteAttachmentResults;Da=u.map(Da,function(Ja){Ja=new Aa(Ja);Ja.attachmentId=Ja.objectId;Ja.objectId=V;return Ja});xa._resolve([Da],"onDeleteAttachmentsComplete",pa,ta)}),error:function(Da){xa._resolve([Da],null,Y,ta,!0)}},{usePost:!0});return ta},addType:function(V){var oa=this.types;if(oa){if(u.some(oa,function(pa){return pa.id==V.id?!0:!1}))return!1;oa.push(V)}else this.types=[V];return this._typesDirty=
!0},deleteType:function(V){if(this._collection){var oa=this.types;if(oa){var pa=-1;u.some(oa,function(Y,ka){return Y.id==V?(pa=ka,!0):!1});if(-1<pa)return this._typesDirty=!0,oa.splice(pa,1)[0]}}},toJson:function(){var V=this._cloneJson();if(V){V=V.layerDefinition?V:{layerDefinition:V};var oa=V.layerDefinition,pa=this._collection;this._updateLayerDefinition(oa);var Y=null;if(!pa||this._fcAdded)Y={geometryType:oa.geometryType,features:this._convertFeaturesToJson(this.graphics,!0)};V.featureSet=c.mixin({},
V.featureSet||{},Y);if(V.featureSet.transform){var ka=V.featureSet.transform;delete V.featureSet.transform;Y=new L(V.featureSet);Y.quantize(ka);V.featureSet=Y.toJson()}pa&&(V.nextObjectId=this._nextId,oa.capabilities=this.capabilities);return V}},getLayerDefinition:function(){var V=this._cloneJson();(V=V?V.layerDefinition||V:null)&&this._updateLayerDefinition(V);return V},getFeatureCollectionLayer:function(V){var oa=new e,pa=this.getLayerDefinition();if(!pa)return oa.reject(Error("layerDefinition not available")),
oa.promise;V=V||[];var Y=new Ca({layerDefinition:pa,featureSet:{geometryType:pa.geometryType,features:u.map(V,function(xa){return xa.toJson()})}}),ka=Y.on("load",function(){ka.remove();ta.remove();oa.resolve(Y)}),ta=Y.on("error",function(){Y.loaded||(ka.remove(),ta.remove(),oa.reject(Y.loadError))});return oa.promise},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},
onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryExtentComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},onLabelingInfoChange:function(){},onFeatureReductionRendererChange:function(){},onFeatureReductionChange:function(){},onFeatureUpdatesResult:function(){},
_cloneJson:function(){var V=this._json;return c.isString(V)?t.fromJson(V):c.clone(V)},_updateLayerDefinition:function(V){if(this._collection&&this._typesDirty){V.types=u.map(this.types||[],function(ka){return ka.toJson()});var oa=this.renderer,pa=this.labelingInfo,Y=V.drawingInfo;!oa&&!pa||Y||(Y=V.drawingInfo={});Y&&oa&&-1===oa.declaredClass.indexOf("TemporalRenderer")&&(Y.renderer=oa.toJson());pa&&(Y.labelingInfo=u.map(pa,function(ka){return ka.toJson()}))}},_evalFeatureUpdates:function(){if(!this._featureUpdatesPromise||
this._featureUpdatesPromise.isFulfilled())this._featureUpdatesPromise=this.hasFeatureUpdates().otherwise(function(V){return!(V&&"cancel"===V.dojoType)}).always(c.hitch(this,function(V){this._featureUpdatesPromise=null;this.onFeatureUpdatesResult({hasUpdates:V})}))},_evalRefresh:function(V){(V.hasUpdates||this.hasDefinitionExpressionWithCurrentTimestamp())&&this.refresh()},_evalArcadeSupport:function(){var V=new e;setTimeout(c.hitch(this,function(){this._initializeArcadeEngine().always(function(){V.resolve()})}),
0);return V.promise},_initializeArcadeEngine:function(){var V=[],oa=this.infoTemplate;oa&&oa.initializeArcadeEngine&&V.push(oa.initializeArcadeEngine());(oa=this.renderer)&&oa.initializeArcadeEngine&&V.push(oa.initializeArcadeEngine());var pa=[];u.forEach(this.labelingInfo,function(Y){(Y=Y.labelExpressionInfo)&&Y.expression&&pa.push(Y.expression)});V.push(P.initialize(pa));return E(V)},_isGeometryOperationsUsed:function(){var V=this.infoTemplate,oa=this.renderer,pa=this.labelingInfo;return V&&V.hasGeometryOperations&&
V.hasGeometryOperations()||oa&&oa.hasGeometryOperations&&oa.hasGeometryOperations()||u.some(pa,function(Y){return Q.hasGeometryOperations(Y.labelExpressionInfo&&Y.labelExpressionInfo.expression)})?!0:!1},_forceIdentity:function(){var V=new e,oa=this,pa=this._url&&this._url.path;var Y=pa&&pa.toLowerCase().indexOf("/rest/services");var ka=this.editFieldsInfo;ka=ka&&(ka.creatorField||ka.editorField);(this.userIsAdmin||ka)&&!this._getToken()&&-1<Y&&b.id?(Y=pa.substring(0,Y)+"/rest/info",v({url:Y,content:{f:"json"},
handleAs:"json",callbackParamName:"callback"}).then(function(ta){if(ta.owningSystemUrl)return b.id.checkSignInStatus(ta.owningSystemUrl+"/sharing")}).then(function(ta){if(ta)return b.id.getCredential(pa)}).then(function(ta){ta&&oa._findCredential()}).always(function(){V.resolve()})):V.resolve();return V.promise},_isSnapshotMode:function(){return this._mode?this._mode.isInstanceOf(Ga):!1},_isOnDemandMode:function(){return this._mode?this._mode.isInstanceOf(ca):!1},_isAutoSnapshotMode:function(){return this._isAutoModeEnabled()&&
this.currentMode===Ca.MODE_SNAPSHOT},_getMaxFeaturesForAutoSnapshotMode:function(){var V=this.geometryType;if("esriGeometryPolyline"===V||"esriGeometryPolygon"===V||"esriGeometryMultipoint"===V||this.hasXYFootprint())var oa=this.maxRecordCountForAuto;else"esriGeometryPoint"===V&&(oa=this.maxPointCountForAuto);return oa},getLastExceedsLimitResult:function(){return this._lastExceedsLimitResult},_canUseSnapshotMode:function(V){this._lastExceedsLimitResult=V=(V=V&&V.features&&V.features[0])&&V.attributes&&
V.attributes.exceedslimit;return!(this.mode!==Ca.MODE_AUTO||this.isEditable()||0!==V||!(this._isPaginationAllowed()||this.maxRecordCount>=this._getMaxFeaturesForAutoSnapshotMode()))},_evalModeFromFLimit:function(V){this._canUseSnapshotMode(V)?this._enableAutoSnapshotMode():this._enableAutoOnDemandMode()},_enableAutoSnapshotMode:function(){var V=Ca.MODE_SNAPSHOT;this.isFeatureReductionApplied()?this._updatePreFReductionState(V):this._preSurfaceChangeState?(this._updatePreSurfaceChangeState(V),this._evalSurfaceType(!0)):
this.currentMode!==V&&this._setFetchMode(Ca.MODE_AUTO,V)},_enableAutoOnDemandMode:function(){var V=Ca.MODE_ONDEMAND;this.isFeatureReductionApplied()?this._updatePreFReductionState(V):this._preSurfaceChangeState?this._updatePreSurfaceChangeState(V):this.currentMode!==V&&(this._setFetchMode(Ca.MODE_AUTO,V),this._evalSurfaceType())},_evalModeFromFReduction:function(V){this.loaded&&(V&&this.isFeatureReductionEnabled()&&this._canCluster(V)?this._enableFReductionMode():this._disableFReductionMode())},_enableFReductionMode:function(){this._evalSurfaceType(!0);
if(!this._preFReductionState){var V=this.currentMode;V!==Ca.MODE_SNAPSHOT&&V!==Ca.MODE_STREAM&&V!==Ca.MODE_SELECTION&&(this._preFReductionState={mode:this.mode,currentMode:this.currentMode},this._setFetchMode(this.mode===Ca.MODE_AUTO?Ca.MODE_AUTO:Ca.MODE_SNAPSHOT,Ca.MODE_SNAPSHOT))}},_disableFReductionMode:function(){var V=this._preFReductionState;this._preFReductionState=null;!V||V.mode===this.mode&&V.currentMode===this.currentMode||(this._setFetchMode(V.mode,V.currentMode),this._evalSurfaceType())},
_updatePreFReductionState:function(V){this._preFReductionState=this._preFReductionState||{};this._preFReductionState.mode=Ca.MODE_AUTO;this._preFReductionState.currentMode=V},_evalModeFromSurface:function(){this.hasWebGLSurface()?this._enableWebGLSurfaceMode():this._disableWebGLSurfaceMode()},_enableWebGLSurfaceMode:function(){this._preSurfaceChangeState||(this._preSurfaceChangeState={mode:this.mode,currentMode:this.currentMode},this._setFetchMode(this.mode===Ca.MODE_AUTO?Ca.MODE_AUTO:Ca.MODE_ONDEMAND,
Ca.MODE_ONDEMAND,this.webglDeps.OnDemandDrillMode))},_disableWebGLSurfaceMode:function(){var V=this._preSurfaceChangeState;V&&(this._preSurfaceChangeState=null,this._setFetchMode(V.mode,V.currentMode))},_updatePreSurfaceChangeState:function(V){this._preSurfaceChangeState=this._preSurfaceChangeState||{};this._preSurfaceChangeState.mode=Ca.MODE_AUTO;this._preSurfaceChangeState.currentMode=V},_setFetchMode:function(V,oa,pa){this.clearSelection();this._mode.suspend();this._mode.destroy();this.mode=V;
this.currentMode=oa;pa=pa||this._getModeConstructor(oa);this._mode=new pa(this);this.queryPagination=oa===Ca.MODE_ONDEMAND&&-1===pa.prototype.declaredClass.toLowerCase().indexOf("ondemanddrillmode")?!1:this._isPaginationAllowed();(V=this.getMap())&&V.loaded&&(this._resetMaxAllowableOffset(),this._mode.initialize(V),this._mode.startup())},_isPaginationAllowed:function(){return!(!this._optQueryPagination||this.loaded&&!this.advancedQueryCapabilities.supportsPagination)},_getModeConstructor:function(V){var oa;
V===Ca.MODE_SNAPSHOT?oa=Ga:V===Ca.MODE_ONDEMAND&&(oa=ca);return oa},_hasOnDemandDrillMode:function(){var V=this._mode;V=V&&V.declaredClass;return!!(V&&-1<V.toLowerCase().indexOf("ondemanddrillmode"))},_checkFeatureLimit:function(){this._limitPromise&&(this._limitPromise.cancel(),this._limitPromise=null);var V=this._queryLimit();V&&(this._lastExceedsLimitResult=null,this._limitPromise=V.then(c.hitch(this,function(oa){var pa=this.currentMode;this._evalModeFromFLimit(oa);return{modeChanged:this.currentMode!==
pa}})).always(c.hitch(this,function(oa){this._limitPromise=null;return oa})));return this._limitPromise},_hasPendingLimitQuery:function(){return!!this._exceedsLimitTimer},_queryLimit:function(){if(this._isAutoModeEnabled()){var V,oa,pa=new e(function(){clearTimeout(V);V=null;oa&&!oa.isFulfilled()&&oa.cancel();oa=null});this._exceedsLimitTimer=V=setTimeout(c.hitch(this,function(){this._exceedsLimitTimer=null;var Y=new N,ka=new W;ka.statisticType="exceedslimit";ka.maxPointCount=this.maxPointCountForAuto;
ka.maxRecordCount=this.maxRecordCountForAuto;ka.maxVertexCount=this.maxVertexCountForAuto;ka.outStatisticFieldName="exceedslimit";Y.outStatistics=[ka];oa=this.queryFeatures(Y).promise.then(function(ta){pa.resolve(ta)}).otherwise(function(ta){pa.reject(ta)})}),0);return pa.promise}},_isAutoModeEnabled:function(){return this.mode===Ca.MODE_AUTO&&this.reHostedFS.test(this.url)},_updateCaps:function(){var V=this._editable,oa=c.trim(this.capabilities||""),pa=u.map(oa?oa.split(","):[],c.trim),Y=u.map(oa?
oa.toLowerCase().split(","):[],c.trim);oa=u.indexOf(Y,"editing");var ka;Y={Create:u.indexOf(Y,"create"),Update:u.indexOf(Y,"update"),Delete:u.indexOf(Y,"delete")};if(V&&-1===oa)pa.push("Editing");else if(!V&&-1<oa){V=[oa];for(ka in Y)-1<Y[ka]&&V.push(Y[ka]);V.sort();for(ka=V.length-1;0<=ka;ka--)pa.splice(V[ka],1)}this.capabilities=pa.join(",")},_counter:{value:0},_getUniqueId:function(){return this._counter.value++},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(V){this._toggleTime(!1);
this._refreshHandle&&(this._refreshHandle.remove(),this._refreshHandle=null);var oa=this._mode;oa&&(oa.suspend(),V&&oa.destroy())},onResume:function(V){this.inherited(arguments);this._toggleTime(!0);this._refreshHandle=this.on("feature-updates-result",c.hitch(this,this._evalRefresh));var oa=this._map,pa=this._getRenderer();if(V.firstOccurrence){if(this._fixRendererFields(),this._updateRequiredFieldsFromLabelingInfo(),this._checkFields(),this.clearSelection(),this._evalFeatureReduction(),this.timeInfo&&
!this._trackManager&&(this._trackIdField||pa&&(pa.latestObservationRenderer||pa.trackRenderer))&&(this._trackManager=new Fa(this),this._trackManager.initialize(oa),this._childLayer=this._trackManager.container),pa&&"colors"in pa&&"blurRadius"in pa&&"maxPixelIntensity"in pa&&"esriGeometryPoint"==this.geometryType&&!this._heatmapManager&&(this._heatmapManager=new O(this),this._heatmapManager.initialize(oa)),this._zoomConnect=d.connect(oa,"onZoomEnd",this,this._zoomEndHandler),this._refreshMaxAllowableOffset(),
pa=this._mode)pa._init||pa.initialize(oa),pa.startup()}else this._zoomEndHandler(),this._mode&&this._mode.resume()},_zoomEndHandler:function(){var V=this._map;this._updateMaxOffset();this._prevScale=V.getScale();!this.suspended&&this._needsRefresh&&this.refresh()},_updateMaxOffset:function(){var V=this._map;V&&V.loaded&&this._autoGeneralize&&(this._isAutoSnapshotMode()?(V=this.getMaxAllowableOffset(),this._setMaxOffset(this._getMaxOffsetForScale(),!0),this._needsRefresh||(this._needsRefresh=V!=this.getMaxAllowableOffset())):
this._setMaxOffset(V.extent.getWidth()/V.width,!V.extent.spatialReference.isWebMercator()))},_getMaxOffsetForScale:function(){if(this._map){var V=this._map.getScale(),oa=this._calculatedScale,pa=this._calcMaxOffset,Y=this._prevScale;return V>=oa&&(null==Y||Y<oa)?pa:V<oa&&(null==Y||Y>=oa)?null:this.getMaxAllowableOffset()}},_calcMaxOffsetForAutoSnapshot:function(){var V=this._map;if(V&&this._canAutoGeneralize()&&this._isAutoSnapshotMode()&&this._autoGeneralize&&null==this.getMaxAllowableOffset()){var oa=
this.generalizeForScale;this._calculatedScale=oa=this.maxScale?this.maxScale:this.minScale?Math.min(oa,this.minScale):Math.min(oa,R.getScale(V,this.initialExtent));this._calcMaxOffset=V.extent.getWidth()/V.width/V.getScale()*oa}else this._calculatedScale=this._calcMaxOffset=void 0},_toggleTime:function(V){var oa=this._map;V&&this.timeInfo&&this.useMapTime&&oa?(this._mapTimeExtent=oa.timeExtent,this._timeConnect||(this._timeConnect=d.connect(oa,"onTimeExtentChange",this,this._timeChangeHandler))):
(this._mapTimeExtent=null,d.disconnect(this._timeConnect),this._timeConnect=null)},_timeChangeHandler:function(V){this._mapTimeExtent=V;(V=this._mode)&&V.propertyChangeHandler(0)},_getOffsettedTE:function(V){var oa=this._timeOffset,pa=this._timeOffsetUnits;return V&&oa&&pa?V.offset(-1*oa,pa):V},_getTimeOverlap:function(V,oa){return V&&oa?V.intersection(oa):V||oa},_getTimeFilter:function(V){var oa=this.getTimeDefinition();if(oa){var pa=this._getTimeOverlap(oa,null);if(!pa)return[!1]}if(V){if(V=pa?
this._getTimeOverlap(V,pa):V,!V)return[!1]}else V=pa;return[!0,V]},_getAttributeFilter:function(V){var oa=[],pa=this.getDefinitionExpression();pa&&oa.push(pa);V&&oa.push(V);this.subtypeField&&this.subtypeCode&&oa.push(this.subtypeField+" \x3d "+this.subtypeCode);1<oa.length&&(oa=u.map(oa,function(Y){return"("+Y+")"}));return oa.length?oa.join(" AND "):null},_applyQueryFilters:function(V,oa){V.where=this._getAttributeFilter(V.where);V.returnGeometry&&null==V.maxAllowableOffset&&!V.quantizationParameters&&
(V.maxAllowableOffset=this._maxOffset,V.quantizationParameters=this._quantizationParameters);oa&&this.supportsAdvancedQueries&&(V.orderByFields=V.orderByFields||this.getOrderByFields());if(this.timeInfo)if(oa=this._getTimeFilter(V.timeExtent),oa[0])V.timeExtent=oa[1];else return!1;return!0},_add:function(V){var oa=this._selectionSymbol,pa=V.attributes,Y=this.visibilityField;oa&&this._isSelOnly&&V.setSymbol(oa);if(Y&&pa&&pa.hasOwnProperty(Y))V[pa[Y]?"show":"hide"]();return this.add.apply(this,arguments)},
_remove:function(){return this.remove.apply(this,arguments)},_canDoClientSideQuery:function(V,oa){var pa=[],Y=this._map,ka;if((this._collection||!this._isTable&&Y)&&!(V.text||V.where&&V.where!==this.getDefinitionExpression()||V.orderByFields&&V.orderByFields.length&&(ka=this.getOrderByFields()||[])&&V.orderByFields.join()!==ka.join()||V.outStatistics||V.returnDistinctValues)){ka=this._isSnapshotMode();var ta=this._isSelOnly;oa=ka?null:oa?this._getExtentOfTiles(Y.extent):Y.extent;if(Y=V.geometry){if(ta||
V.spatialRelationship!==N.SPATIAL_REL_INTERSECTS||"extent"!==Y.type||!ka&&!oa.contains(Y))return;pa.push(1)}if(oa=V.objectIds)if(ka)pa.push(2);else{Y=oa.length;var xa=this._mode,Da=0,Ja;for(Ja=0;Ja<Y;Ja++)xa._getFeature(oa[Ja])&&Da++;if(Da===Y)pa.push(2);else return}if(this.timeInfo)if(V=V.timeExtent,oa=this._mapTimeExtent,ka)V&&pa.push(3);else if(ta){if(V)return}else if(oa)if(-1!==u.indexOf(pa,2))V&&pa.push(3);else if(-1!==u.indexOf(pa,1))V==oa&&pa.push(3);else return;else if(0<pa.length)V&&pa.push(3);
else if(V)return;return 0<pa.length?pa:null}},_getAbsMid:function(V){return f.toAbsMid?f.toAbsMid(V):B.id.replace(/\/[^\/]*$/ig,"/")+V},_doQuery:function(V,oa,pa){var Y=[],ka=this.objectIdField,ta=this,xa=new e,Da=new e,Ja=this.graphics;if(-1!==u.indexOf(oa,1)){var La=this.spatialIndex||this._map&&this._map.spatialIndex,Ya,Ua=V.geometry._normalize(null,!0);null==La&&da.autoSpatialIndexing?Ya=(this._map||this).addPlugin(this._getAbsMid("../plugins/spatialIndex")).then(c.hitch(this,c.partial(this._getFromIndex,
Ua,La)),function(Ta){Da.resolve(c.hitch(this,c.partial(this._filterByExtent,Ja,Ua)))}):La&&(Ya=this._getFromIndex(Ua,La));Ya?Ya.then(function(Ta){for(var ab=0;ab<Ta.length;ab++)Ta[ab].results&&(Y=Y.concat(Ta[ab].results));Da.resolve(Y)}).otherwise(function(Ta){Da.reject(Ta)}):Da.resolve(this._filterByExtent(Ja,Ua))}else Da.resolve(Ja);Da.then(function(Ta){Y=Ta;if(-1!==u.indexOf(oa,2)){var ab=V.objectIds;Y=u.filter(Y,function(fb){return-1<u.indexOf(ab,fb.attributes[ka])})}-1!==u.indexOf(oa,3)&&ta.timeInfo&&
(Ta=V.timeExtent,Y=ta._filterByTime(Y,Ta.startTime,Ta.endTime).match);pa&&(Y=u.map(Y,function(fb){return fb.attributes[ka]},this));xa.resolve(Y)});return xa},_getFromIndex:function(V,oa){oa=oa||this.spatialIndex||this._map.spatialIndex;V instanceof Array||(V=[V]);var pa=this.id;return k(u.map(V,function(Y){return oa.intersects(Y,pa)}))},_filterByExtent:function(V,oa){for(var pa=[],Y=0,ka=V.length;Y<ka;Y++){var ta=V[Y],xa=ta.geometry;xa&&(this.normalization&&oa.length?(oa[0].intersects(xa)||oa[1].intersects(xa))&&
pa.push(ta):oa.intersects(xa)&&pa.push(ta))}return pa},_filterByTime:function(V,oa,pa){var Y=this._startTimeField,ka=this._endTimeField,ta;this._twoTimeFields||(ta=Y||ka);var xa=x.isDefined,Da=[],Ja=[],La,Ya=V.length;oa=oa?oa.getTime():-Infinity;pa=pa?pa.getTime():Infinity;if(ta)for(La=0;La<Ya;La++){var Ua=V[La];var Ta=Ua.attributes;Y=Ta[ta];Y>=oa&&Y<=pa?Da.push(Ua):Ja.push(Ua)}else for(La=0;La<Ya;La++)Ua=V[La],Ta=Ua.attributes,ta=Ta[Y],Ta=Ta[ka],ta=xa(ta)?ta:-Infinity,Ta=xa(Ta)?Ta:Infinity,ta>=oa&&
ta<=pa||Ta>=oa&&Ta<=pa||oa>=ta&&pa<=Ta?Da.push(Ua):Ja.push(Ua);return{match:Da,noMatch:Ja}},_getSizeVariables:function(V){return V&&u.filter(V.getVisualVariablesForType("sizeInfo",!1),function(oa){return!(!oa.field&&!oa.valueExpression)})},_needClientSideSorting:function(V){return this._collection?!(!V||!V.length):u.some(V,function(oa){return!!oa.valueExpression})},_sortFeatures:function(V){var oa=this.renderer,pa=this._getSizeVariables(oa);if(V&&1<V.length&&this._needClientSideSorting(pa)){var Y=
pa[0],ka=this;V.sort(function(ta,xa){ta._layer||(ta._layer=ka);xa._layer||(xa._layer=ka);ta=oa._getDataValue(ta,Y,"sizeInfo");xa=oa._getDataValue(xa,Y,"sizeInfo");return null==ta?-1:null==xa?1:xa-ta})}return V},_resolve:function(V,oa,pa,Y,ka){oa&&this[oa].apply(this,V);pa&&pa.apply(null,V);Y&&D._resDfd(Y,V,ka)},_getShallowClone:function(V){var oa=new N,pa;for(pa in V)V.hasOwnProperty(pa)&&(oa[pa]=V[pa]);return oa},_canFetchPBF:function(){return!!(Oa&&Na&&this.supportsFormatPBF)},_canFetchPBFForQuery:function(V){return!(!this._canFetchPBF()||
!this._isCacheHintEnabled(V)&&this._isAutoSnapshotMode()||!(V.quantizationParameters||!this.isEditable()&&this.supportsQuantizationEditMode)||V.outStatistics)},_enableEditModeQuantization:function(V,oa){V&&oa&&!V.quantizationParameters&&(V.quantizationParameters={mode:"edit"})},_enableCacheHint:function(V,oa){var pa=this.advancedQueryCapabilities;pa&&pa.supportsQueryWithCacheHint?null==V.cacheHint&&(V.cacheHint=!0):pa&&pa.supportsQueryWithResultType&&this.reHostedFS.test(this.url)&&!V.resultType&&
(V.resultType=oa||"coherent")},_isCacheHintSupported:function(){var V=this.advancedQueryCapabilities;return V?!!(V.supportsQueryWithCacheHint||V.supportsQueryWithResultType&&this.reHostedFS.test(this.url)):!1},_isCacheHintEnabled:function(V){var oa=this.advancedQueryCapabilities;return V&&oa?!!(oa.supportsQueryWithCacheHint&&V.cacheHint||oa.supportsQueryWithResultType&&this.reHostedFS.test(this.url)&&("coherent"===V.resultType||"tile"===V.resultType)):!1},_query:function(V,oa,pa,Y,ka,ta){var xa=this,
Da=this._map;ta=ta&&ta.snapToTiles;var Ja=new e(D._dfdCanceller),La=pa,Ya,Ua,Ta;if("executeRelationshipQuery"!==V){La=this._getShallowClone(pa);var ab=this.getOutFields();La.outFields||(La.outFields=ab);La.outFields&&La.outFields.length&&(Ua=-1<u.indexOf(ab,"*")?!1:!u.every(La.outFields,function(kb){return-1<u.indexOf(ab,kb)}));La.returnGeometry=pa.hasOwnProperty("returnGeometry")?pa.returnGeometry:!pa.outStatistics;La.returnGeometry&&(La.multipatchOption=this.multipatchOption,null!=La.maxAllowableOffset||
La.quantizationParameters)&&(pa=null!=La.maxAllowableOffset?La.maxAllowableOffset:La.quantizationParameters.tolerance,null!=pa&&pa!==this.getMaxAllowableOffset()&&(Ta=!0));Da&&(Da=Da&&Da.spatialReference,(pa=La.outSpatialReference)?Ya=!pa.equals(Da):La.outSpatialReference=new C(Da.toJson()));ta&&(Da=La.geometry)&&"extent"===Da.type&&(La.geometry=this._getExtentOfTiles(Da),Da!==La.geometry&&this._enableCacheHint(La));if(!this._applyQueryFilters(La,"execute"===V&&!La.outStatistics)){switch(V){case "execute":var fb=
new L({features:[]});break;case "executeForIds":fb=[];break;case "executeForCount":fb=0;break;case "executeForExtent":fb={}}this._resolve([fb],oa,Y,Ja);return Ja}if(ta="executeForExtent"!==V&&!Ya&&!Ua&&!Ta&&this._canDoClientSideQuery(La,ta))return Ja._pendingDfd=q(this._doQuery(La,ta,"executeForIds"===V||"executeForCount"===V)),Ja._pendingDfd.then(function(kb){switch(V){case "execute":fb=new L;fb.features=kb;break;case "executeForIds":fb=kb;break;case "executeForCount":fb=kb.length}xa._resolve([fb],
oa,Y,Ja)}),Ja}if(this._collection)return this._resolve([Error("FeatureLayer::_query - "+this.invalidParams)],null,ka,Ja,!0),Ja;if(this.loaded&&!this.isQueryable())return this._resolve([Error("Layer does not support query capability.")],null,ka,Ja,!0),Ja;this._ts&&(La._ts=(new Date).getTime());ta="execute"===V&&this._canFetchPBFForQuery(La);this._enableEditModeQuantization(La,ta);(Ja._pendingDfd=this._task[V](La,null,null,ta?{format:"pbf"}:null)).addCallbacks(function(kb){var qb=!!La.outStatistics||
Ya||Ua||Ta;if("execute"===V||"executeRelationshipQuery"===V)if("execute"===V){var ob=kb.features;var wb=ob.length;for(--wb;0<=wb;wb--)if(ob[wb]._layer=xa,!qb&&!xa._isTable){var Fb=xa._mode._getFeature(ob[wb].attributes[xa.objectIdField]);Fb&&ob.splice(wb,1,Fb)}}else for(Fb in kb)if(kb.hasOwnProperty(Fb))for(ob=kb[Fb].features,wb=ob.length,--wb;0<=wb;wb--)ob[wb]._layer=xa;xa._resolve([kb],oa,Y,Ja)},function(kb){xa._resolve([kb],null,ka,Ja,!0)});return Ja},_getExtentOfTiles:function(V){var oa=this._isOnDemandMode()&&
this._mode._gridLayer||za.createFromFeatureLayer({layer:this}),pa=this.getMap();pa=pa&&pa.getTargetExtent(V);return oa&&pa&&oa.getExtentOfIntersectingCells(pa)||V},_convertFeaturesToJson:function(V,oa,pa,Y){var ka=[],ta=this._selectionSymbol,xa=this.visibilityField,Da,Ja=this.objectIdField;this.loaded&&(pa||Y)&&(Da=u.filter(this.fields,function(fb){return!1===fb.editable&&(!Y||fb.name!==Ja)}));for(pa=0;pa<V.length;pa++){var La=V[pa],Ya={},Ua=La.geometry,Ta=La.attributes,ab=La.symbol;!Ua||Y&&this.loaded&&
!this.allowGeometryUpdates||(Ya.geometry=Ua.toJson());xa?(Ya.attributes=Ta=c.mixin({},Ta),Ta[xa]=La.visible?1:0):Ta&&(Ya.attributes=c.mixin({},Ta));Ya.attributes&&Da&&Da.length&&u.forEach(Da,function(fb){delete Ya.attributes[fb.name]});ab&&ab!==ta&&(Ya.symbol=ab.toJson());ka.push(Ya)}return oa?ka:t.toJson(ka)},_selectHandler:function(V,oa,pa,Y,ka){switch(oa){case Ca.SELECTION_NEW:this.clearSelection(!0);var ta=!0;break;case Ca.SELECTION_ADD:ta=!0;break;case Ca.SELECTION_SUBTRACT:ta=!1}Y=V.features;
var xa=this._mode,Da=[],Ja=this.objectIdField;if(ta)for(ta=0;ta<Y.length;ta++){var La=Y[ta];var Ya=La.attributes[Ja];La=xa._addFeatureIIf(Ya,La);Da.push(La);this._selectFeatureIIf(Ya,La,xa)}else for(ta=0;ta<Y.length;ta++)La=Y[ta],Ya=La.attributes[Ja],this._unSelectFeatureIIf(Ya,xa),Ya=xa._removeFeatureIIf(Ya),Da.push(Ya||La);this._isSelOnly&&xa._applyTimeFilter(!0);this._isImageService&&10.7>this.version&&void 0===V.exceededTransferLimit&&(V.exceededTransferLimit=Y.length===this.maxRecordCount);this._hasPartialSelectedFeatures=
!!V.exceededTransferLimit;this._resolve([Da,oa,V.exceededTransferLimit?{queryLimitExceeded:!0}:null],"onSelectionComplete",pa,ka);if(V.exceededTransferLimit)this.onQueryLimitExceeded()},_selectFeatureIIf:function(V,oa,pa){var Y=this._selectedFeatures,ka=Y[V];ka||(pa._incRefCount(V),Y[V]=oa,this._isTable||(this._setSelectSymbol(oa),oa.attr("data-selected","")));return ka||oa},_unSelectFeatureIIf:function(V,oa){var pa=this._selectedFeatures[V];pa&&(oa._decRefCount(V),delete this._selectedFeatures[V],
this._isTable||(this._setUnSelectSymbol(pa),pa.attr("data-selected")));return pa},_setSelectSymbol:function(V){var oa=this._selectionSymbol;oa&&!this._isSelOnly&&V.setSymbol(oa)},_setUnSelectSymbol:function(V){var oa=this._selectionSymbol;oa&&!this._isSelOnly&&oa===V.symbol&&V.setSymbol(null,!0)},_getOutFields:function(){var V=[this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._requiredFields).concat(this.dataAttributes);
V=u.filter(V,function(pa,Y,ka){return!!pa&&u.indexOf(ka,pa)===Y});var oa=c.clone(this._outFields);if(oa){if(-1!==u.indexOf(oa,"*"))return oa;u.forEach(V,function(pa){-1===u.indexOf(oa,pa)&&oa.push(pa)});return oa}return V},_checkFields:function(V){var oa=V||this._getOutFields();u.forEach(oa,function(pa){"*"!==pa&&this._getField(pa)},this);V||this._isTable||this._fserver||this._collection||this._isStream||u.some(this.fields,function(pa){return pa&&"esriFieldTypeGeometry"===pa.type?!0:!1})},_fixFieldCase:function(V,
oa,pa){var Y=V&&V[oa],ka;if(Y&&!c.isFunction(Y)){if(ka=!this._getField(Y)&&this._getField(Y,!0))Y=V[oa]=ka.name;pa&&pa.push(Y)}return Y},_fixRendererFields:function(){var V=this.renderer;this._orderBy=null;this._requiredFields=[];if(V&&0<this.fields.length){var oa=[],pa;V=u.filter([V,V.observationRenderer,V.latestObservationRenderer,V.trackRenderer],x.isDefined);var Y=[].concat(V);u.forEach(V,function(ka){u.forEach(ka.rendererInfos,function(ta){ta.renderer&&Y.push(ta.renderer)})});u.forEach(Y,function(ka){this._fixFieldCase(ka,
"attributeField",oa);this._fixFieldCase(ka,"attributeField2",oa);this._fixFieldCase(ka,"attributeField3",oa);this._fixFieldCase(ka.rotationInfo,"field",oa);(pa=this._fixFieldCase(ka.sizeInfo,"field",oa))&&!this._orderBy&&(this._orderBy=[pa+" DESC"]);this._fixFieldCase(ka.sizeInfo,"normalizationField",oa);this._fixFieldCase(ka.colorInfo,"field",oa);this._fixFieldCase(ka.colorInfo,"normalizationField",oa);this._fixFieldCase(ka.field,"field",oa);this._fixFieldCase(ka.opacityInfo,"field",oa);this._fixFieldCase(ka.opacityInfo,
"normalizationField",oa);u.forEach(ka.visualVariables,function(xa){pa=this._fixFieldCase(xa,"field",oa);"sizeInfo"===xa.type&&pa&&!this._orderBy&&(this._orderBy=[pa+" DESC"]);this._fixFieldCase(xa,"normalizationField",oa)},this);var ta=u.map(this.fields,function(xa){return xa.name},this);ta=u.map(ka.getFieldsUsedInExpressions(ta),function(xa){var Da=this.getField(xa);return Da?Da.name:xa},this);oa=oa.concat(ta);this._orderBy||!ka.addBreak||c.isFunction(ka.attributeField)||!ka.backgroundFillSymbol&&
!this._hasSizeDiff(ka)||(this._orderBy=[ka.attributeField+" DESC"])},this);this._requiredFields=u.filter(oa,x.isDefined)}},_hasSizeDiff:function(V){var oa=Number.MAX_VALUE,pa=-Number.MAX_VALUE,Y,ka;u.forEach(V.infos,function(ta){if(ka=ta.symbol){Y=0;switch(ka.type){case "simplemarkersymbol":Y=ka.size;break;case "picturemarkersymbol":Y=(ka.width+ka.height)/2;break;case "simplelinesymbol":case "cartographiclinesymbol":Y=ka.width;break;case "simplefillsymbol":case "picturefillsymbol":Y=ka.outline&&ka.outline.width}Y&&
(oa=Math.min(oa,Y),pa=Math.max(pa,Y))}});return oa!==Number.MAX_VALUE&&pa!==-Number.MAX_VALUE&&1<Math.abs(pa-oa)},getOrderByFields:function(){var V=this.orderByFields||this._orderBy;return this.supportsAdvancedQueries&&V?u.filter(V,function(oa){oa=oa.split(" ")[0];return!!this._getField(oa,!0)},this):null},_createFields:function(V){var oa=V?V.length:0,pa,Y=[];for(pa=0;pa<oa;pa++)Y.push(new M(V[pa]));this.fields=Y},_createFieldsIndex:function(){if(this._fieldsIndexDirty){var V=this.fields,oa=V?V.length:
0;if(50<oa&&this._canUseFieldsIndex()){var pa=new Map;for(var Y=new Map,ka=0;ka<oa;ka++){var ta=V[ka];pa.set(ta.name,ta);Y.set(ta.name.toLowerCase(),ta)}pa={caseSensitive:pa,caseInsensitive:Y}}this._fieldsIndex=pa;this._fieldsIndexDirty=!1}},_canUseFieldsIndex:function(){var V=n.Map;return!("function"!==typeof n.Proxy||"function"!==typeof n.Proxy.revocable||"function"!==typeof V||!V.prototype||"function"!==typeof V.prototype.set)},_getField:function(V,oa){var pa=this.fields;if(!pa||0===pa.length)return null;
oa&&(V=V.toLowerCase());this._createFieldsIndex();var Y=this._fieldsIndex;if(Y)return Y=oa?Y.caseInsensitive:Y.caseSensitive,Y.get(V);var ka;u.some(pa,function(ta){var xa=!1;(xa=oa?ta&&ta.name.toLowerCase()===V?!0:!1:ta&&ta.name===V?!0:!1)&&(ka=ta);return xa});return ka},_getDateOpts:function(){this._dtOpts||(this._dtOpts={properties:u.map(u.filter(this.fields,function(V){return!(!V||"esriFieldTypeDate"!==V.type)}),function(V){return V.name})});return this._dtOpts},_applyNormalized:function(V,oa){V&&
oa&&u.forEach(V,function(pa,Y){pa&&oa[Y]&&pa.setGeometry(oa[Y])})},_editHandler:function(V,oa,pa,Y,ka,ta){ka=V.addResults;var xa=V.updateResults;V=V.deleteResults;var Da,Ja=this.objectIdField,La=this._mode,Ya=this._isTable;var Ua=this.editFieldsInfo;var Ta=this.getOutFields()||[];var ab=Ua&&Ua.creatorField,fb=Ua&&Ua.creationDateField,kb=Ua&&Ua.editorField,qb=Ua&&Ua.editDateField;Ua=Ua&&Ua.realm;-1===u.indexOf(Ta,"*")&&(ab&&-1===u.indexOf(Ta,ab)&&(ab=null),fb&&-1===u.indexOf(Ta,fb)&&(fb=null),kb&&
-1===u.indexOf(Ta,kb)&&(kb=null),qb&&-1===u.indexOf(Ta,qb)&&(qb=null));var ob=fb||qb?(new Date).getTime():null,wb=ab||kb?this.getUserId():void 0;wb&&Ua&&(wb=wb+"@"+Ua);if(ka){var Fb=this.globalIdField;for(Ua=0;Ua<ka.length;Ua++)if(ka[Ua]=new Aa(ka[Ua]),!Ya){var yb=ka[Ua];if(yb.success){var lb=yb.objectId;Ta=oa[Ua];(Da=Ta._graphicsLayer)&&Da!==this&&Da.remove(Ta);Da=Ta.attributes||{};Da[Ja]=lb;lb=yb.globalId;Fb&&lb&&(Da[Fb]=lb);ab&&(Da[ab]=wb);kb&&(Da[kb]=wb);fb&&(Da[fb]=ob);qb&&(Da[qb]=ob);Ta.setAttributes(Da);
La._init&&La.drawFeature(Ta)}}}if(xa)for(Ua=0;Ua<xa.length;Ua++)if(xa[Ua]=new Aa(xa[Ua]),!Ya&&(yb=xa[Ua],yb.success)){lb=yb.objectId;Ta=pa[lb];if(oa=La._getFeature(lb))oa.geometry!==Ta.geometry&&Ta.geometry&&oa.setGeometry(aa.fromJson(Ta.geometry.toJson())),oa.attributes!==Ta.attributes&&Ta.attributes&&oa.setAttributes(c.mixin(oa.attributes,Ta.attributes)),this._repaint(oa,lb);Ta=oa||Ta;Da=Ta.attributes||{};kb&&(Da[kb]=wb);qb&&(Da[qb]=ob);Ta.setAttributes(Da)}if(V){pa=[];for(Ua=0;Ua<V.length;Ua++)if(V[Ua]=
new Aa(V[Ua]),!Ya&&(yb=V[Ua],yb.success&&(lb=yb.objectId,Ta=La._getFeature(lb))))this._unSelectFeatureIIf(lb,La)&&pa.push(Ta),Ta._count=0,La._removeFeatureIIf(lb);if(0<pa.length)this.onSelectionComplete(pa,Ca.SELECTION_SUBTRACT)}this._resolve([ka,xa,V],"onEditsComplete",Y,ta)},_sendAttachment:function(V,oa,pa,Y,ka){var ta=this;return v({url:this._url.path+"/"+oa+"/"+("add"===V?"addAttachment":"updateAttachment"),form:pa,content:c.mixin(this._url.query,{f:"json",token:this._getToken()||void 0}),callbackParamName:"callback.html",
handleAs:"json"}).addCallback(function(xa){var Da="add"===V?"onAddAttachmentComplete":"onUpdateAttachmentComplete";xa=new Aa(xa["add"===V?"addAttachmentResult":"updateAttachmentResult"]);xa.attachmentId=xa.objectId;xa.objectId=oa;ta._resolve([xa],Da,Y);return xa}).addErrback(function(xa){ta._resolve([xa],null,ka,null,!0)})},_repaint:function(V,oa,pa){oa=x.isDefined(oa)?oa:V.attributes[this.objectIdField];oa in this._selectedFeatures&&this._selectionSymbol||V.setSymbol(V.symbol,pa)},_getKind:function(V){var oa=
this._trackManager;return oa?oa.isLatestObservation(V)?1:0:0}});c.mixin(Ca,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,MODE_AUTO:6,MODE_STREAM:7,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});ia._createWrappers(Ca);Object.defineProperty(Ca.prototype,"graphics",{get:function(){return this._hasOnDemandDrillMode()?this._mode.graphics:this._graphicsVal},set:function(V){this._graphicsVal=
V}});Object.defineProperty(Ca.prototype,"name",{get:function(){return this.arcgisProps&&this.arcgisProps.title?this.arcgisProps.title:this._name},set:function(V){this._name=V;this.loaded&&this.arcgisProps&&(this.arcgisProps.title=null)}});Object.defineProperty(Ca.prototype,"fields",{get:function(){return this._fields},set:function(V){V&&this._canUseFieldsIndex()&&(V=new Proxy(V,{set:c.hitch(this,function(oa,pa,Y){if(pa)if("length"===pa)this._fieldsIndexDirty=!0;else{var ka=Number(pa);"number"!==typeof ka||
isNaN(ka)||(this._fieldsIndexDirty=!0)}oa[pa]=Y;return!0})}));this._fields=V;this._fieldsIndexDirty=!0}});c.setObject("layers.FeatureLayer",Ca,b);return Ca})},"esri/promiseList":function(){define(["dojo/_base/array","dojo/Deferred","dojo/when"],function(f,B,l){var d=f.forEach;return function(c){function u(n,k){a[k]=n;h.progress([n,k]);0===--q&&h.resolve(a)}var t,e;c instanceof Array?e=c:c&&"object"===typeof c&&(t=c);var r=[];if(t){e=[];for(var m in t)Object.hasOwnProperty.call(t,m)&&(r.push(m),e.push(t[m]));
var a={}}else e&&(a=[]);if(!e||!e.length)return(new B).resolve(a);var h=new B;h.promise.always(function(){a=r=null});var q=e.length;d(e,function(n,k){t||r.push(k);l(n,function(g){h.isFulfilled()||u(g,r[k])},function(g){h.isFulfilled()||u(g,r[k])})});return h.promise}})},"esri/renderers/SimpleRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "),function(f,B,l,d,c,u,t){f=f(t,{declaredClass:"esri.renderer.SimpleRenderer",
constructor:function(e,r){if(e&&!e.declaredClass){var m=e;this.symbol=(e=m.symbol)&&(e.declaredClass?e:u.fromJson(e,r));this.label=m.label;this.description=m.description}else this.symbol=e},getSymbol:function(e){return this.symbol},toJson:function(){var e=B.mixin(this.inherited(arguments),{type:"simple",label:this.label,description:this.description,symbol:this.symbol&&this.symbol.toJson()});return c.fixJson(e)}});B.setObject("renderer.SimpleRenderer",f,d);return f})},"esri/renderers/Renderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojox/gfx/_base ../kernel ../Color ../layers/support/attributeUtils ../support/expressionUtils ../arcadeProfiles/visualizationProfile".split(" "),
function(f,B,l,d,c,u,t,e,r,m){var a=Math.PI;f=f(null,{declaredClass:"esri.renderer.Renderer",constructor:function(h){this._cache={};if(h&&!h.declaredClass){this.rotationInfo=h.rotationInfo;if(!this.rotationInfo){var q=h.rotationType,n=h.rotationExpression;if(q||n)this.rotationInfo={type:q,expression:n}}this.setRotationInfo(this.rotationInfo);this.setSizeInfo(this._readSizeInfo(h.sizeInfo));this.setColorInfo(this._readColorInfo(h.colorInfo));this.setOpacityInfo(this._readOpacityInfo(h.transparencyInfo));
this.setVisualVariables(this._readVariables(h.visualVariables));this.setAuthoringInfo(h.authoringInfo)}this.getSymbol=B.hitch(this,this.getSymbol)},getSymbol:function(h){},_readSizeInfo:function(h){if(h){var q=h.minSize,n=h.maxSize;q&&(h.minSize="number"===typeof q?c.pt2px(q):this._readSizeInfo(q));n&&(h.maxSize="number"===typeof n?c.pt2px(n):this._readSizeInfo(n));h.stops&&l.forEach(h.stops,function(k){k.size&&"number"===typeof k.size&&(k.size=c.pt2px(k.size))})}return h},_readColorInfo:function(h){h&&
(l.forEach(h.colors,function(q,n){B.isArray(q)&&(h.colors[n]=t.toDojoColor(q))}),l.forEach(h.stops,function(q,n){q.color&&B.isArray(q.color)&&(h.stops[n].color=t.toDojoColor(q.color))}));return h},_readOpacityInfo:function(h){if(h){var q=B.mixin({},h);q.transparencyValues&&(q.opacityValues=l.map(q.transparencyValues,function(n){return 1-n/100}),delete q.transparencyValues);q.stops&&(q.stops=l.map(q.stops,function(n){n=B.mixin({},n);n.opacity=1-n.transparency/100;delete n.transparency;return n}))}return q},
_readVariables:function(h){h&&(h=l.map(h,function(q){"sizeInfo"===q.type?q=this._readSizeInfo(q):"colorInfo"===q.type?q=this._readColorInfo(q):"transparencyInfo"===q.type&&(q=this._readOpacityInfo(q),q.type="opacityInfo");return q},this));return h},setAuthoringInfo:function(h){this.authoringInfo=h},setRotationInfo:function(h){if(h=this.rotationInfo="string"===typeof h?{field:h}:h){if(h.expression&&!B.isFunction(h.expression)&&!h.field){var q=h.expression.match(this.rotationRE);q&&q[1]&&(h.field=q[1])}h.rotationType=
h.type}this._cache.rotationInfo=this._processRotationInfo(h);return this},rotationRE:/^\[([^\]]+)\]$/i,_processRotationInfo:function(h){h&&!h.rotationType&&(h.rotationType="geographic");return this._createCache(h)},getRotationAngle:function(h,q){var n=this._getVarInfo(q&&q.rotationInfo,"rotationInfo");q=n.variable;n=this._cache[n.cacheKey];var k="arithmetic"===this._getRotationType(q),g=n&&n.hasExpr,b=null;if(q.field||g)b=this._getDataValue(h,q,null,n),null!=b&&(b=(b+(k?-90:0))*(k?-1:1));return b},
_getRotationType:function(h){return h&&("rotationInfo"===h.type?h.rotationType:h.type)},_getDataValue:function(h,q,n,k,g){k||(k=this._getVarInfo(q,n),q=k.variable,k=this._cache[k.cacheKey],"sizeInfo"===n&&(k=k.root));return h._getDataValue(q,k,r,g)},setVisualVariables:function(h){var q=this._cache;l.forEach(this.visualVariables,function(n,k){q.hasOwnProperty(k)&&(q[k]=null)},this);this.visualVariables=h;l.some(h,function(n){return!!n.target})&&h.sort(function(n,k){return n.target===k.target?0:n.target?
1:-1});l.forEach(h,function(n,k){"colorInfo"===n.type?q[k]=this._processColorInfo(n):"opacityInfo"===n.type?q[k]=this._processOpacityInfo(n):"sizeInfo"===n.type?q[k]=this._processSizeInfo(n):"rotationInfo"===n.type&&(q[k]=this._processRotationInfo(n))},this);return this},getVisualVariableValues:function(h){var q=this.visualVariables,n;q&&(n=l.map(q,function(k){switch(k.type){case "sizeInfo":var g=this.getSize(h,{sizeInfo:k});break;case "colorInfo":g=this.getColor(h,{colorInfo:k});break;case "opacityInfo":g=
this.getOpacity(h,{opacityInfo:k});break;case "rotationInfo":g=this.getRotationAngle(h,{rotationInfo:k})}return{variable:k,value:g}},this));return n},getFieldsUsedInExpressions:function(h){var q=[];l.forEach(this._getCacheObjects(),function(n){n.syntaxTree&&(q=q.concat(r.extractFieldNames(n.syntaxTree,h)))});q.sort();return l.filter(q,function(n,k){return 0===k||q[k-1]!==n})},hasGeometryOperations:function(){return l.some(this._getCacheObjects(),function(h){return h.syntaxTree?r.hasGeometryOperations(h.syntaxTree):
!1})},initializeArcadeEngine:function(){var h=[];l.forEach(this._getCacheObjects(),function(q){q.syntaxTree&&h.push(q.syntaxTree)});return m.initialize(h)},hasVisualVariables:function(h,q){return h?!!this.getVisualVariablesForType(h,q):!!(this.getVisualVariablesForType("sizeInfo",q)||this.getVisualVariablesForType("colorInfo",q)||this.getVisualVariablesForType("opacityInfo",q)||this.getVisualVariablesForType("rotationInfo",q))},getVisualVariablesForType:function(h,q){var n=this.visualVariables;if(!q&&
this[h]){"rotationInfo"===h&&(this[h].rotationType=this[h].type);var k=[this[h]]}else n&&(k=l.filter(n,function(g){return g.type===h&&("string"===typeof q?g.target===q:!1===q?!g.target:!0)}))&&0===k.length&&(k=void 0);return k},setSizeInfo:function(h){this.sizeInfo=this.proportionalSymbolInfo=h;this._cache.sizeInfo=this._processSizeInfo(h);return this},_processSizeInfo:function(h){return h&&{root:this._createCache(h),minSize:this._createCache(h.minSize),maxSize:this._createCache(h.maxSize)}},_convertExpressionToArcade:function(h){h&&
h.expression&&(h.valueExpression="$view.scale")},_getVarInfo:function(h,q){if(h&&h.type===q){var n=l.indexOf(this.visualVariables,h);h=this.visualVariables[n]}else n=q,h=this[q];return{variable:h,cacheKey:n}},setProportionalSymbolInfo:function(h){this.setSizeInfo(h);return this},getSize:function(h,q){var n=this._getVarInfo(q&&q.sizeInfo,"sizeInfo"),k=n.variable;n=this._cache[n.cacheKey];var g=null;if(k){var b=k.minSize;g=k.maxSize;b="object"===typeof b&&b?this._getSize(h,b,n&&n.minSize,q):b;g="object"===
typeof g&&g?this._getSize(h,g,n&&n.maxSize,q):g;g=this._getSize(h,k,n&&n.root,q,[b,g])}return g},_getSize:function(h,q,n,k,g){var b=q.stops,x=0,v=n&&n.hasExpr,y=n&&n.ipData,D=n&&n.isScaleDriven,E="object"===typeof h&&!!h,C="number"===typeof h?h:null;if(q.field||D||v){var z=k&&k.scale;v=g?g[0]:q.minSize;g=g?g[1]:q.maxSize;var w=q.minDataValue,A=q.maxDataValue,G=q.valueUnit||"unknown",F=q.valueRepresentation,H=q.scaleBy,J=k&&k.shape;D?C=z:"number"!==typeof C&&E&&(C=this._getDataValue(h,q,null,n));if(!this._isValidNumber(C))return null;
if(b)v=this._lookupData(C,y),C=v[0],g=v[1],C===g?x=b[C].size:(C=b[C].size,b=b[g].size,x=C+(b-C)*v[2]);else if(null!=v&&null!=g&&null!=w&&null!=A)C<=w?x=v:C>=A?x=g:(b=(C-w)/(A-w),"area"===H&&J?(v=(C="circle"===J)?a*Math.pow(v/2,2):v*v,b=v+b*((C?a*Math.pow(g/2,2):g*g)-v),x=C?2*Math.sqrt(b/a):Math.sqrt(b)):x=v+b*(g-v));else if("unknown"===G)null!=v&&null!=w&&(v&&w?(b=C/w,x="circle"===J?2*Math.sqrt(b*Math.pow(v/2,2)):"square"===J||"diamond"===J||"image"===J?Math.sqrt(b*Math.pow(v,2)):b*v):x=C+(v||w),
x=x<v?v:x,null!=g&&x>g&&(x=g));else{b=(k&&k.resolution?k.resolution:1)*this._meterIn[G];if("area"===F)x=Math.sqrt(C/a)/b,x*=2;else if(x=C/b,"radius"===F||"distance"===F)x*=2;null!=v&&x<v&&(x=v);null!=g&&x>g&&(x=g)}}else x=b&&b[0]&&b[0].size,null==x&&(x=q.minSize);return x=isNaN(x)?0:x},getSizeRangeAtScale:function(h,q){h=this._getVarInfo(h,"sizeInfo");var n=this._cache[h.cacheKey],k={scale:q};if((h=h.variable)&&q){var g=h.minSize;q=h.maxSize;var b=h.stops;b&&b.length?(h=b[0].size,n=b[b.length-1].size):
(h="object"===typeof g&&g?this._getSize({},g,n&&n.minSize,k):g,n="object"===typeof q&&q?this._getSize({},q,n&&n.maxSize,k):q);if(null!=h||null!=n){if(h>n){var x=n;n=h;h=x}x={minSize:h,maxSize:n}}}return x},setColorInfo:function(h){this.colorInfo=h;this._cache.colorInfo=this._processColorInfo(h);return this},_createCache:function(h,q){if(q=e.createAttributeCache(h,q))q.ipData=this._interpolateData(h);return q},_getCacheObjects:function(h){var q;h=h||this._cache;var n=[];for(q in h){var k=h[q];h.hasOwnProperty(q)&&
k&&"object"===typeof k&&(k.hasOwnProperty("idSource")?n.push(k):n=n.concat(this._getCacheObjects(k)))}return n},_processColorInfo:function(h){h&&(l.forEach(h.colors,function(q,n){B.isArray(q)&&(h.colors[n]=new t(q))}),l.forEach(h.stops,function(q,n){q.color&&B.isArray(q.color)&&(h.stops[n].color=new t(q.color))}));return this._createCache(h)},getColor:function(h,q){q=this._getVarInfo(q&&q.colorInfo,"colorInfo");return this._getColorComponent(h,q.variable,this._cache[q.cacheKey])},setOpacityInfo:function(h){this.opacityInfo=
h;this._cache.opacityInfo=this._processOpacityInfo(h);return this},_processOpacityInfo:function(h){return this._createCache(h)},getOpacity:function(h,q){q=this._getVarInfo(q&&q.opacityInfo,"opacityInfo");return this._getColorComponent(h,q.variable,this._cache[q.cacheKey],!0)},_getColorComponent:function(h,q,n,k,g){var b="number"===typeof h?h:null,x=n&&n.hasExpr,v=n&&n.ipData,y;q&&q.field||x?("number"!==typeof b&&"object"===typeof h&&h&&(b=this._getDataValue(h,q,null,n)),this._isValidNumber(b)||(b=
null),null!=b&&(y=k?this._getOpacity(b,q,v):this._getColor(b,q,v))):q&&(h=q.stops,k?(y=h&&h[0]&&h[0].opacity,null==y&&(y=q.opacityValues&&q.opacityValues[0])):y=h&&h[0]&&h[0].color||q.colors&&q.colors[0]);g&&(g.data=b,g.value=y);return g||y},_isValidNumber:function(h){return"number"===typeof h&&!isNaN(h)&&Infinity!==h&&-Infinity!==h},_interpolateData:function(h){if(h)if(h.colors||h.opacityValues){var q=(h.colors||h.opacityValues).length,n=h.minDataValue,k=(h.maxDataValue-n)/(q-1);var g=[];for(h=0;h<
q;h++)g[h]=n+h*k}else h.stops&&(g=l.map(h.stops,function(b){return b.value}));return g},_getOpacity:function(h,q,n){h=this._lookupData(h,n);q=q||this.opacityInfo;if(h){n=h[0];var k=h[1];n===k?k=this._getOpacValue(q,n):(n=this._getOpacValue(q,n),q=this._getOpacValue(q,k),k=n+(q-n)*h[2])}return k},_getOpacValue:function(h,q){return h.opacityValues?h.opacityValues[q]:h.stops[q].opacity},_getColor:function(h,q,n){h=this._lookupData(h,n);q=q||this.colorInfo;if(h){var k=h[0];n=h[1];k=k===n?this._getColorObj(q,
k):t.blendColors(this._getColorObj(q,k),this._getColorObj(q,n),h[2])}return k},_getColorObj:function(h,q){return h.colors?h.colors[q]:h.stops[q].color},_lookupData:function(h,q){if(q){var n=0,k=q.length-1;l.some(q,function(b,x){if(h<b)return k=x,!0;n=x;return!1});var g=[n,k,(h-q[n])/(q[k]-q[n])]}return g},_meterIn:{inches:1/.0254,feet:1/.3048,yards:1/.9144,miles:1/1609.344,"nautical-miles":1/1852,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:.001,"decimal-degrees":180/20015077},
_writeSizeInfo:function(h){if(h){h=B.mixin({},h);this._convertExpressionToArcade(h);var q=h.minSize,n=h.maxSize;q&&(h.minSize="number"===typeof q?c.px2pt(q):this._writeSizeInfo(q));n&&(h.maxSize="number"===typeof n?c.px2pt(n):this._writeSizeInfo(n));if(q=h.legendOptions)if(h.legendOptions=B.mixin({},q),q=q.customValues)h.legendOptions.customValues=q.slice(0);h.stops&&(h.stops=l.map(h.stops,function(k){k=B.mixin({},k);k.size&&"number"===typeof k.size&&(k.size=c.px2pt(k.size));return k}))}return h},
_writeColorInfo:function(h){h&&(h=B.mixin({},h),h.colors&&(h.colors=l.map(h.colors,function(q){return t.toJsonColor(q)})),h.stops&&(h.stops=l.map(h.stops,function(q){q=B.mixin({},q);q.color&&(q.color=t.toJsonColor(q.color));return q})),h.legendOptions&&(h.legendOptions=B.mixin({},h.legendOptions)));return h},_writeOpacityInfo:function(h){if(h){var q=B.mixin({},h);q.opacityValues&&(q.transparencyValues=l.map(q.opacityValues,function(n){return 100*(1-n)}),delete q.opacityValues);q.stops&&(q.stops=l.map(q.stops,
function(n){n=B.mixin({},n);n.transparency=100*(1-n.opacity);delete n.opacity;return n}));q.legendOptions&&(q.legendOptions=B.mixin({},q.legendOptions))}return q},toJson:function(h){var q=this.visualVariables,n=B.clone(this.authoringInfo),k=h&&h.useLegacyRotationProperties,g=(h=(h=this.getVisualVariablesForType("rotationInfo",!1))&&h[0])&&h.field,b;h&&(h===this.rotationInfo||k)&&(b=h.expression||g&&(B.isFunction(g)?g:"["+g+"]"));q&&(q=l.map(q,function(x){"sizeInfo"===x.type?x=this._writeSizeInfo(x):
"colorInfo"===x.type?x=this._writeColorInfo(x):"opacityInfo"===x.type?(x=this._writeOpacityInfo(x),x.type="transparencyInfo"):"rotationInfo"===x.type&&(x=k?null:B.mixin({},x));return x},this),q=l.filter(q,function(x){return null!=x}));n&&l.forEach(n.visualVariables,function(x){"opacityInfo"===x.type&&(x.type="transparencyInfo")});return{rotationType:b&&(this._getRotationType(h)||"geographic"),rotationExpression:b,colorInfo:this._writeColorInfo(this.colorInfo),transparencyInfo:this._writeOpacityInfo(this.opacityInfo),
sizeInfo:this._writeSizeInfo(this.sizeInfo),visualVariables:q,authoringInfo:n}}});B.setObject("renderer.Renderer",f,u);return f})},"esri/layers/support/attributeUtils":function(){define("dojo/_base/lang dojo/has dojox/encoding/digests/_base dojox/encoding/digests/MD5 ../../kernel ../../support/expressionUtils".split(" "),function(f,B,l,d,c,u){var t={viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,getAttributeId:function(e){return"string"===typeof e?d(e,l.outputTypes.Hex):null},getAttributeIdSource:function(e){if(!e)return null;
var r=e.field,m=e.valueExpression,a=null;if(m)a=m;else if(f.isFunction(r))a=r.toString();else if(r){var h=(m=e.normalizationField)?"field":e.normalizationType;e=parseFloat(e.normalizationTotal);h&&(h=h.toLowerCase(),a=r.toLowerCase()+",norm:"+h,m?a+=","+m.toLowerCase():"percent-of-total"===h&&(r=e,"number"===typeof r&&!isNaN(r)&&Infinity!==r&&-Infinity!==r&&0!==e||(e=null),a+=","+e))}return a},createAttributeCache:function(e,r){if(!e)return null;var m=e.valueExpression,a=u.createSyntaxTree(m),h=t.getAttributeIdSource(e);
return{attributeInfo:e,isNumeric:!r,idSource:h,id:t.getAttributeId(h),hasExpr:!!m,compiledFunc:u.createFunction(a),syntaxTree:a,isScaleDriven:!!e.expression||t.viewScaleRE.test(m),dependsOnView:a?u.dependsOnView(a):!1,dependsOnGeometry:a?u.hasGeometryOperations(a):!1,isJSFunc:f.isFunction(e.field)}}};f.setObject("layers.support.attributeUtils",t,c);return t})},"dojox/encoding/digests/_base":function(){define(["dojo/_base/lang"],function(f){f=f.getObject("dojox.encoding.digests",!0);f.outputTypes=
{Base64:0,Hex:1,String:2,Raw:3};f.addWords=function(B,l){var d=(B&65535)+(l&65535);return(B>>16)+(l>>16)+(d>>16)<<16|d&65535};f.stringToWord=function(B){for(var l=[],d=0,c=8*B.length;d<c;d+=8)l[d>>5]|=(B.charCodeAt(d/8)&255)<<d%32;return l};f.wordToString=function(B){for(var l=[],d=0,c=32*B.length;d<c;d+=8)l.push(String.fromCharCode(B[d>>5]>>>d%32&255));return l.join("")};f.wordToHex=function(B){for(var l=[],d=0,c=4*B.length;d<c;d++)l.push("0123456789abcdef".charAt(B[d>>2]>>d%4*8+4&15)+"0123456789abcdef".charAt(B[d>>
2]>>d%4*8&15));return l.join("")};f.wordToBase64=function(B){for(var l=[],d=0,c=4*B.length;d<c;d+=3)for(var u=(B[d>>2]>>d%4*8&255)<<16|(B[d+1>>2]>>(d+1)%4*8&255)<<8|B[d+2>>2]>>(d+2)%4*8&255,t=0;4>t;t++)8*d+6*t>32*B.length?l.push("\x3d"):l.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(u>>6*(3-t)&63));return l.join("")};f.stringToUtf8=function(B){for(var l="",d=-1,c,u;++d<B.length;)c=B.charCodeAt(d),u=d+1<B.length?B.charCodeAt(d+1):0,55296<=c&&56319>=c&&56320<=u&&57343>=
u&&(c=65536+((c&1023)<<10)+(u&1023),d++),127>=c?l+=String.fromCharCode(c):2047>=c?l+=String.fromCharCode(192|c>>>6&31,128|c&63):65535>=c?l+=String.fromCharCode(224|c>>>12&15,128|c>>>6&63,128|c&63):2097151>=c&&(l+=String.fromCharCode(240|c>>>18&7,128|c>>>12&63,128|c>>>6&63,128|c&63));return l};return f})},"dojox/encoding/digests/MD5":function(){define(["./_base"],function(f){function B(t,e,r,m,a,h){var q=f.addWords;t=f.addWords(f.addWords(e,t),f.addWords(m,h));return q.call(f,t<<a|t>>>32-a,r)}function l(t,
e,r,m,a,h,q){return B(e&r|~e&m,t,e,a,h,q)}function d(t,e,r,m,a,h,q){return B(e&m|r&~m,t,e,a,h,q)}function c(t,e,r,m,a,h,q){return B(r^(e|~m),t,e,a,h,q)}function u(t,e){t[e>>5]|=128<<e%32;t[(e+64>>>9<<4)+14]=e;e=1732584193;for(var r=-271733879,m=-1732584194,a=271733878,h=0;h<t.length;h+=16){var q=e,n=r,k=m,g=a;e=l(e,r,m,a,t[h+0],7,-680876936);a=l(a,e,r,m,t[h+1],12,-389564586);m=l(m,a,e,r,t[h+2],17,606105819);r=l(r,m,a,e,t[h+3],22,-1044525330);e=l(e,r,m,a,t[h+4],7,-176418897);a=l(a,e,r,m,t[h+5],12,
1200080426);m=l(m,a,e,r,t[h+6],17,-1473231341);r=l(r,m,a,e,t[h+7],22,-45705983);e=l(e,r,m,a,t[h+8],7,1770035416);a=l(a,e,r,m,t[h+9],12,-1958414417);m=l(m,a,e,r,t[h+10],17,-42063);r=l(r,m,a,e,t[h+11],22,-1990404162);e=l(e,r,m,a,t[h+12],7,1804603682);a=l(a,e,r,m,t[h+13],12,-40341101);m=l(m,a,e,r,t[h+14],17,-1502002290);r=l(r,m,a,e,t[h+15],22,1236535329);e=d(e,r,m,a,t[h+1],5,-165796510);a=d(a,e,r,m,t[h+6],9,-1069501632);m=d(m,a,e,r,t[h+11],14,643717713);r=d(r,m,a,e,t[h+0],20,-373897302);e=d(e,r,m,a,
t[h+5],5,-701558691);a=d(a,e,r,m,t[h+10],9,38016083);m=d(m,a,e,r,t[h+15],14,-660478335);r=d(r,m,a,e,t[h+4],20,-405537848);e=d(e,r,m,a,t[h+9],5,568446438);a=d(a,e,r,m,t[h+14],9,-1019803690);m=d(m,a,e,r,t[h+3],14,-187363961);r=d(r,m,a,e,t[h+8],20,1163531501);e=d(e,r,m,a,t[h+13],5,-1444681467);a=d(a,e,r,m,t[h+2],9,-51403784);m=d(m,a,e,r,t[h+7],14,1735328473);r=d(r,m,a,e,t[h+12],20,-1926607734);e=B(r^m^a,e,r,t[h+5],4,-378558);a=B(e^r^m,a,e,t[h+8],11,-2022574463);m=B(a^e^r,m,a,t[h+11],16,1839030562);r=
B(m^a^e,r,m,t[h+14],23,-35309556);e=B(r^m^a,e,r,t[h+1],4,-1530992060);a=B(e^r^m,a,e,t[h+4],11,1272893353);m=B(a^e^r,m,a,t[h+7],16,-155497632);r=B(m^a^e,r,m,t[h+10],23,-1094730640);e=B(r^m^a,e,r,t[h+13],4,681279174);a=B(e^r^m,a,e,t[h+0],11,-358537222);m=B(a^e^r,m,a,t[h+3],16,-722521979);r=B(m^a^e,r,m,t[h+6],23,76029189);e=B(r^m^a,e,r,t[h+9],4,-640364487);a=B(e^r^m,a,e,t[h+12],11,-421815835);m=B(a^e^r,m,a,t[h+15],16,530742520);r=B(m^a^e,r,m,t[h+2],23,-995338651);e=c(e,r,m,a,t[h+0],6,-198630844);a=c(a,
e,r,m,t[h+7],10,1126891415);m=c(m,a,e,r,t[h+14],15,-1416354905);r=c(r,m,a,e,t[h+5],21,-57434055);e=c(e,r,m,a,t[h+12],6,1700485571);a=c(a,e,r,m,t[h+3],10,-1894986606);m=c(m,a,e,r,t[h+10],15,-1051523);r=c(r,m,a,e,t[h+1],21,-2054922799);e=c(e,r,m,a,t[h+8],6,1873313359);a=c(a,e,r,m,t[h+15],10,-30611744);m=c(m,a,e,r,t[h+6],15,-1560198380);r=c(r,m,a,e,t[h+13],21,1309151649);e=c(e,r,m,a,t[h+4],6,-145523070);a=c(a,e,r,m,t[h+11],10,-1120210379);m=c(m,a,e,r,t[h+2],15,718787259);r=c(r,m,a,e,t[h+9],21,-343485551);
e=f.addWords(e,q);r=f.addWords(r,n);m=f.addWords(m,k);a=f.addWords(a,g)}return[e,r,m,a]}f.MD5=function(t,e){e=e||f.outputTypes.Base64;t=u(f.stringToWord(t),8*t.length);switch(e){case f.outputTypes.Raw:return t;case f.outputTypes.Hex:return f.wordToHex(t);case f.outputTypes.String:return f.wordToString(t);default:return f.wordToBase64(t)}};f.MD5._hmac=function(t,e,r){r=r||f.outputTypes.Base64;var m=f.stringToWord(e);16<m.length&&(m=u(m,8*e.length));var a=[];e=[];for(var h=0;16>h;h++)a[h]=m[h]^909522486,
e[h]=m[h]^1549556828;t=u(a.concat(f.stringToWord(t)),512+8*t.length);t=u(e.concat(t),640);switch(r){case f.outputTypes.Raw:return t;case f.outputTypes.Hex:return f.wordToHex(t);case f.outputTypes.String:return f.wordToString(t);default:return f.wordToBase64(t)}};return f.MD5})},"esri/support/expressionUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../kernel ../arcade/arcade ../arcade/Feature ../arcade/languageUtils".split(" "),function(f,B,l,d,c,u,t,e){function r(k){var g=
new d;k.then(function(b){if(!g.isFulfilled())return e.isDate(b)&&(b=b.toJSDate()),g.resolve(b)},function(b){if(!g.isFulfilled())return g.reject(b)});return g.promise}function m(k){var g=new d;k.then(function(b){if(!g.isFulfilled())return g.resolve(b)},function(b){if(!g.isFulfilled())return g.reject(b)});return g.promise}function a(k){return k.replace(/[|\\{}()[\]^$+*?.]/g,"\\$\x26")}var h={vars:{$feature:"any",$view:"any"}},q=/^\$(feature|aggregatedFeatures)\./i,n={_getSyntaxTree:function(k){return"string"===
typeof k?n.createSyntaxTree(k):k},createSyntaxTree:function(k){try{var g=k?u.parseScript(k):null}catch(b){g=null}return g},createFunction:function(k,g){g=g||f.clone(h);k=n._getSyntaxTree(k);try{var b=k?u.compileScript(k,g):null}catch(x){b=null}return b},createExecContext:function(k,g){return{vars:{$feature:k?t.createFromGraphic(k):new t,$view:g&&g.view},spatialReference:g&&g.sr}},evalSyntaxTree:function(k,g){try{var b=u.executeScript(k,g)}catch(x){b=null}return b},executeFunction:function(k,g){try{var b=
k?k(g):null}catch(x){b=null}return e.isDate(b)?b.toJSDate():b},executeAsyncFunction:function(k,g){try{var b=k?r(k(g)):(new d).reject(Error("expressionUtils.executeAsyncFunction: Invalid argument. compiledFunc is missing."))}catch(x){b=(new d).reject(x)}return b},extractFieldNames:function(k,g){k=n._getSyntaxTree(k);k=u.extractExpectedFieldLiterals(k);var b=[];B.forEach(k,function(v){q.test(v)&&(v=v.replace(q,""),b.push(v))});var x=B.filter(b,function(v){return-1!==v.indexOf("*")});b=B.filter(b,function(v){return-1===
x.indexOf(v)});g&&B.forEach(x,function(v){var y=new RegExp("^"+v.split(/\*+/).map(a).join(".*")+"$","i");B.forEach(g,function(D){y.test(D)&&b.push(D)})});b.sort();return B.filter(b,function(v,y){return 0===y||b[y-1]!==v})},dependsOnView:function(k){return n.hasVariable(k,"$view")},hasGeometryFunctions:function(k){return(k=n._getSyntaxTree(k))?u.scriptTouchesGeometry(k):!1},hasGeometryOperations:function(k){return(k=n._getSyntaxTree(k))?u.scriptUsesGeometryEngine(k):!1},enableGeometryOperations:function(){return m(u.enableGeometrySupport())},
hasVariable:function(k,g){return(k=n._getSyntaxTree(k))?u.referencesMember(k,g):!1},hasFunction:function(k,g){return(k=n._getSyntaxTree(k))?u.referencesFunction(k,g):!1},createFeatureSetFromLayer:function(k,g){g=g||{};var b=u.featureSetUtils();return b?b.constructFeatureSet(k,g.spatialReference,g.outFields,g.returnGeometry,g.cache):null},createFeatureSetFromLayerUrl:function(k,g){g=g||{};var b=u.featureSetUtils();return b?b.constructFeatureSetFromUrlRaw(k,g.spatialReference,g.outFields,g.returnGeometry,
g.cache):null},createFeatureSetCollectionFromMap:function(k,g){var b=u.featureSetUtils();return b?b.createFeatureSetCollectionFromMap(k,k.spatialReference,g&&g.cache):null},createFeatureSetCollectionFromServiceUrl:function(k,g){g=g||{};var b=u.featureSetUtils();return b?b.createFeatureSetCollectionFromService(k,g.spatialReference,g.cache):null},hasFeatureSetOperations:function(k){return(k=n._getSyntaxTree(k))?u.scriptUsesFeatureSet(k):!1},enableFeatureSetOperations:function(){return m(u.enableFeatureSetSupport().then(function(){var k=
u.featureSetUtils();k&&k.initialiseMetaDataCache()}))},enableAsyncOperations:function(){return m(u.enableAsyncSupport())}};f.setObject("support.expressionUtils",n,c);return n})},"esri/arcade/arcade":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./arcadeCompiler ./ArcadeModuleResolver ./arcadeRuntime ./executionError ./parser ./treeAnalysis dojo/has ./polyfill/maybe".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h){function q(Z,aa){if(null===Q)throw new e.ArcadeExecutionError(null,
e.ExecutionErrorCodes.AsyncNotEnabled,null);if(a("esri-csp-restrictions")||!1===H)return function(ia){return Q.executeScript(Z,ia)};try{return c.compileScript(Z,aa,!0)}catch(ia){if("esri.arcade.arcadeuncompilableerror"===ia.declaredRootClass)return function(R){return Q.executeScript(Z,R)};throw ia;}}function n(Z,aa){void 0===aa&&(aa=[]);return r.parseScript(Z,aa)}function k(Z,aa){if(!0===aa.useAsync||!0===Z.isAsync){if(null===Q)throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.AsyncNotEnabled,
null);return Q.executeScript(Z,aa)}return t.executeScript(Z,aa)}function g(Z,aa){return m.referencesMember(Z,aa)}function b(Z,aa){void 0===aa&&(aa=[]);void 0===Z.usesGeometry&&m.findScriptDependencies(Z,aa);return!0===Z.usesGeometry}function x(){return I?I:I=v()}function v(){return l(this,void 0,void 0,function(){return d(this,function(Z){return[2,new Promise(function(aa,ia){f(["../geometry/geometryEngine","./functions/geomsync"],function(R,S){K=!0;S.setGeometryEngine(R);aa(!0)},function(R){ia(R)})})]})})}
function y(){return null!==N?N:N=D()}function D(){return l(this,void 0,void 0,function(){var Z,aa,ia;return d(this,function(R){switch(R.label){case 0:return[4,c.enableAsyncSupport()];case 1:return R.sent(),[4,new Promise(function(S,M){f(["./arcadeAsyncRuntime"],function(X){S(X)},M)})];case 2:Q=R.sent();Z=0;for(aa=P;Z<aa.length;Z++)ia=aa[Z],Q.extend(ia),c.extend(ia,"async");P=null;return[2,!0]}})})}function E(){return Q?!0:!1}function C(){return L?L:L=z()}function z(){return l(this,void 0,void 0,function(){var Z;
return d(this,function(aa){switch(aa.label){case 0:return[4,y()];case 1:return aa.sent(),[4,new Promise(function(ia,R){f(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(S,M,X,fa,ea){ia({featuresetutils:S,libraries:[M,X,fa,ea]})},R)})];case 2:return Z=aa.sent(),W=Z.featuresetutils,Q.extend(Z.libraries),c.extend(Z.libraries,"async"),J=!0,[2,!0]}})})}function w(Z,aa){void 0===aa&&(aa=[]);void 0===Z.usesFeatureSet&&
m.findScriptDependencies(Z,aa);return!0===Z.usesFeatureSet}function A(Z,aa,ia,R,S,M){void 0===R&&(R=[]);void 0===S&&(S=!1);void 0===M&&(M=null);return l(this,void 0,void 0,function(){var X,fa;return d(this,function(ea){switch(ea.label){case 0:X="string"===typeof aa?n(aa):aa;fa=[];if(X&&(!1===K&&(b(X)||S)&&fa.push(x()),!1===E()&&(!0===X.isAsync||ia)&&fa.push(y()),!1===J)){if(!(ea=w(X)))a:{ea=X;if(R)for(var ha=0,ra=R;ha<ra.length;ha++)if(g(ea,ra[ha])){ea=!0;break a}ea=!1}ea&&fa.push(C())}return fa.length?
[4,Promise.all(fa)]:[3,2];case 1:ea.sent(),ea.label=2;case 2:return[4,G(Z,X,M,ia,S)];case 3:return ea.sent(),[2,!0]}})})}function G(Z,aa,ia,R,S){void 0===ia&&(ia=null);void 0===R&&(R=!1);void 0===S&&(S=!1);return l(this,void 0,void 0,function(){var M,X,fa,ea,ha,ra;return d(this,function(Aa){switch(Aa.label){case 0:M=m.findModuleImports(aa),null===ia&&0<M.length&&(ia=u.ArcadeModuleResolver.getDefault()),aa.loadedModules={},X=0,fa=M,Aa.label=1;case 1:if(!(X<fa.length))return[3,5];ea=fa[X];h.assertIsSome(ia);
ha=ia.normalizeModuleUri(ea.source);if(Z.has(ha.uri))throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.CircularModules,null);Z.add(ha.uri);return[4,ia.fetchModule(ha)];case 2:return ra=Aa.sent(),[4,A(Z,ra,R,[],S,ia)];case 3:Aa.sent(),Z.delete(ha.uri),ra.isAsync&&(aa.isAsync=!0),ra.usesFeatureSet&&(aa.usesFeatureSet=!0),ra.usesGeometry&&(aa.usesGeometry=!0),aa.loadedModules[ea.libname]={uri:ha.uri,script:ra},Aa.label=4;case 4:return X++,[3,1];case 5:return[2]}})})}Object.defineProperty(B,
"__esModule",{value:!0});B.featureSetUtils=B.scriptTouchesGeometry=B.loadDependentModules=B.scriptUsesModules=B._loadScriptDependenciesImpl=B.loadScriptDependencies=B.scriptIsAsync=B.scriptUsesFeatureSet=B.enableFeatureSetSupportImpl=B.enableFeatureSetSupport=B.isGeometryEnabled=B.isAsyncEnabled=B.isFeatureSetSupportEnabled=B.enableAsyncSupportImpl=B.enableAsyncSupport=B.enableGeometrySupportImpl=B.enableGeometrySupport=B.scriptUsesGeometryEngine=B.extractExpectedFieldLiterals=B.extractFieldLiterals=
B.referencesFunction=B.referencesMember=B.executeScript=B.parseAndExecuteScript=B.parseScript=B.extend=B.compileScript=void 0;var F="feature angle bearing centroid envelopeintersects extent geometry isselfintersecting ringisclockwise".split(" "),H=function(){if(a("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(Z){return!1}}(),J=!1,K=!1,Q=null,P=[];B.compileScript=function(Z,aa){if(!0===aa.useAsync||!0===Z.isAsync)return q(Z,aa);if(a("esri-csp-restrictions"))return function(ia){return t.executeScript(Z,
ia)};try{return c.compileScript(Z,aa)}catch(ia){if("esri.arcade.arcadeuncompilableerror"===ia.declaredRootClass)return function(R){return t.executeScript(Z,R)};throw ia;}};B.extend=function(Z){t.extend(Z);c.extend(Z,"sync");null===Q?P.push(Z):(c.extend(Z,"async"),Q.extend(Z))};B.parseScript=n;B.parseAndExecuteScript=function(Z,aa,ia){void 0===ia&&(ia=[]);Z=r.parseScript(Z,ia);return k(Z,aa)};B.executeScript=k;B.referencesMember=g;B.referencesFunction=function(Z,aa){return m.referencesFunction(Z,aa)};
B.extractFieldLiterals=function(Z,aa){void 0===aa&&(aa=!1);void 0===aa&&(aa=!1);return m.findFieldLiterals(Z)};B.extractExpectedFieldLiterals=function(Z){return m.findExpectedFieldLiterals(Z)};B.scriptUsesGeometryEngine=b;var I=null;B.enableGeometrySupport=x;B.enableGeometrySupportImpl=v;var N=null;B.enableAsyncSupport=y;B.enableAsyncSupportImpl=D;B.isFeatureSetSupportEnabled=function(){return J};B.isAsyncEnabled=E;B.isGeometryEnabled=function(){return K};var L=null;B.enableFeatureSetSupport=C;B.enableFeatureSetSupportImpl=
z;B.scriptUsesFeatureSet=w;B.scriptIsAsync=function(Z,aa){void 0===aa&&(aa=[]);void 0===Z.isAsync&&m.findScriptDependencies(Z,aa);return!0===Z.isAsync};B.loadScriptDependencies=function(Z,aa,ia,R,S){void 0===ia&&(ia=[]);void 0===R&&(R=!1);void 0===S&&(S=null);return l(this,void 0,void 0,function(){return d(this,function(M){return[2,A(new Set,Z,aa,ia,R,S)]})})};B._loadScriptDependenciesImpl=A;B.scriptUsesModules=function(Z,aa){void 0===aa&&(aa=[]);void 0===Z.usesModules&&m.findScriptDependencies(Z,
aa);return!0===Z.usesModules};B.loadDependentModules=G;B.scriptTouchesGeometry=function(Z){if(b(Z))return!0;Z=m.findFunctionCalls(Z);for(var aa=!1,ia=0;ia<Z.length;ia++)if(F.includes(Z[ia])){aa=!0;break}return aa};var W=null;B.featureSetUtils=function(){return W}})},"esri/arcade/polyfill/tsSupport/awaiter":function(){define([],function(){return function(){return function(f,B,l,d){function c(u){return u instanceof l?u:new l(function(t){t(u)})}return new (l||(l=Promise))(function(u,t){function e(a){try{m(d.next(a))}catch(h){t(h)}}
function r(a){try{m(d["throw"](a))}catch(h){t(h)}}function m(a){a.done?u(a.value):c(a.value).then(e,r)}m((d=d.apply(f,B||[])).next())})}}()})},"esri/arcade/polyfill/tsSupport/generator":function(){define([],function(){return function(){return function(f,B){function l(m){return function(a){return d([m,a])}}function d(m){if(u)throw new TypeError("Generator is already executing.");for(;c;)try{if(u=1,t&&(e=m[0]&2?t["return"]:m[0]?t["throw"]||((e=t["return"])&&e.call(t),0):t.next)&&!(e=e.call(t,m[1])).done)return e;
if(t=0,e)m=[m[0]&2,e.value];switch(m[0]){case 0:case 1:e=m;break;case 4:return c.label++,{value:m[1],done:!1};case 5:c.label++;t=m[1];m=[0];continue;case 7:m=c.ops.pop();c.trys.pop();continue;default:if(!(e=c.trys,e=0<e.length&&e[e.length-1])&&(6===m[0]||2===m[0])){c=0;continue}if(3===m[0]&&(!e||m[1]>e[0]&&m[1]<e[3]))c.label=m[1];else if(6===m[0]&&c.label<e[1])c.label=e[1],e=m;else if(e&&c.label<e[2])c.label=e[2],c.ops.push(m);else{e[2]&&c.ops.pop();c.trys.pop();continue}}m=B.call(f,c)}catch(a){m=
[6,a],t=0}finally{u=e=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}var c={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},u,t,e,r;return r={next:l(0),"throw":l(1),"return":l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r}}()})},"esri/arcade/arcadeCompiler":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./polyfill/tsSupport/extends ./Dictionary ./Feature ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ./polyfill/promiseUtils ../geometry/Geometry ../SpatialReference ./ArcadeModuleLoader ./ArcadeModule ./FunctionWrapper ./executionError".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E,C,z,w){function A(ca,ja,wa){try{return wa(ca,null,ja.arguments)}catch(za){throw za;}}function G(ca,ja){try{switch(ja.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return I(ca,ja);case "VariableDeclaration":for(var wa=[],za=0;za<ja.declarations.length;za++)wa.push(G(ca,ja.declarations[za]));return wa.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":case "Program":return Q(ca,ja);case "FunctionDeclaration":var Fa=
ja.id.name.toLowerCase();P(Fa);var O="",ya=!1;void 0!==ca.globalScope[Fa]?O=Fa:void 0!==ca.globalScope._SymbolsMap[Fa]?O=ca.globalScope._SymbolsMap[Fa]:ca.undeclaredGlobalsInFunctions.has(Fa)?(O=ca.undeclaredGlobalsInFunctions.get(Fa).manglename,ca.globalScope._SymbolsMap[Fa]=O,ca.mangleMap[Fa]=O,ca.undeclaredGlobalsInFunctions.delete(Fa),ya=!0):(O=W(ca),ca.globalScope._SymbolsMap[Fa]=O,ca.mangleMap[Fa]=O);wa={isAsync:ca.isAsync,console:ca.console,exports:ca.exports,undeclaredGlobalsInFunctions:ca.undeclaredGlobalsInFunctions,
customfunctions:ca.customfunctions,moduleFactory:ca.moduleFactory,moduleFactoryMap:ca.moduleFactoryMap,libraryResolver:ca.libraryResolver,lrucache:ca.lrucache,interceptor:ca.interceptor,services:ca.services,symbols:ca.symbols,mangleMap:ca.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:ca.depthCounter,globalScope:ca.globalScope};var Ha="new lang.UserDefinedCompiledFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(Fa=0;Fa<ja.params.length;Fa++){za=ja.params[Fa].name.toLowerCase();P(za);var da=W(ca);wa.localScope._SymbolsMap[za]=da;wa.mangleMap[za]=da;Ha+="lscope['"+da+"']\x3darguments["+Fa.toString()+"];\n"}!0===ca.isAsync?(Ha=Ha+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(Q(wa,ja.body)+"\n return lastStatement; "),Ha=Ha+"});  }, runtimeCtx),"+(ja.params.length+")")):Ha+=Q(wa,ja.body)+"\n return lastStatement; }, runtimeCtx),"+ja.params.length+")";Ha+="\n lastStatement \x3d lc.voidOperation; \n";
return ya?"gscope[lang.setAssig('"+O+"', runtimeCtx)]\x3d"+Ha:"gscope['"+O+"']\x3d"+Ha;case "ImportDeclaration":var Oa,Na,Ca=ja.specifiers[0].local.name.toLowerCase();P(Ca);var V=null===(Oa=ca.libraryResolver)||void 0===Oa?void 0:Oa.loadLibrary(Ca),oa=W(ca);void 0===ca.moduleFactory[V.uri]&&(ca.moduleFactory[V.uri]=X(V.syntax,{interceptor:ca.interceptor,services:ca.services,moduleFactory:ca.moduleFactory,lrucache:ca.lrucache,timeReference:null!==(Na=ca.timeReference)&&void 0!==Na?Na:null,libraryResolver:ca.libraryResolver,
customfunctions:ca.customfunctions,vars:{}},ca.isAsync));ca.moduleFactoryMap[oa]=V.uri;ja="";ja=ca.isAsync?"(yield lang.loadModule('"+oa+"', runtimeCtx) ); ":"lang.loadModule('"+oa+"', runtimeCtx); ";if(void 0!==ca.globalScope[Ca])var pa="gscope['"+Ca+"']\x3d"+ja;else void 0!==ca.globalScope._SymbolsMap[Ca]?pa="gscope['"+ca.globalScope._SymbolsMap[Ca]+"']\x3d"+ja:(wa="",ca.undeclaredGlobalsInFunctions.has(Ca)?(wa=ca.undeclaredGlobalsInFunctions.get(Ca).manglename,ca.undeclaredGlobalsInFunctions.delete(Ca)):
wa=W(ca),ca.globalScope._SymbolsMap[Ca]=wa,ca.mangleMap[Ca]=wa,pa="gscope[lang.setAssig('"+wa+"', runtimeCtx)]\x3d"+ja);return pa;case "ExportNamedDeclaration":var Y=G(ca,ja.declaration);if("FunctionDeclaration"===ja.declaration.type)ca.exports[ja.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===ja.declaration.type){wa=0;for(var ka=ja.declaration.declarations;wa<ka.length;wa++)ca.exports[ka[wa].id.name.toLowerCase()]="variable"}return Y;case "ReturnStatement":var ta=null===
ja.argument?"return lc.voidOperation":"return "+G(ca,ja.argument);return ta;case "IfStatement":return K(ca,ja);case "ExpressionStatement":var xa="AssignmentExpression"===ja.expression.type?"lastStatement \x3d lc.voidOperation; "+G(ca,ja.expression)+"; \n ":"lastStatement \x3d "+G(ca,ja.expression)+"; ";return xa;case "AssignmentExpression":return H(ca,ja);case "UpdateExpression":return F(ca,ja);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{wa=
[];da=za=0;for(ya=ja.quasis;da<ya.length;da++)Ha=ya[da],wa.push(Ha.value?JSON.stringify(Ha.value.cooked):JSON.stringify("")),!1===Ha.tail&&(wa.push(ja.expressions[za]?"lang.castString(lang.aCheck("+G(ca,ja.expressions[za])+", 'TemplateLiteral'))":""),za++);O="(["+wa.join(",")+"]).join('')"}catch(Eb){throw Eb;}return O;case "TemplateElement":return JSON.stringify(ja.value?ja.value.cooked:"");case "ForStatement":wa="lastStatement \x3d lc.voidOperation; \n";null!==ja.init&&(wa+=G(ca,ja.init)+"; ");var Da=
Z(ca),Ja=Z(ca);wa+="var "+Da+" \x3d true; \n do { ";null!==ja.update&&(wa+=" if ("+Da+"\x3d\x3d\x3dfalse) {\n "+G(ca,ja.update)+"  \n}\n "+Da+"\x3dfalse; \n");null!==ja.test&&(wa+="var "+Ja+" \x3d "+G(ca,ja.test)+"; ",wa+="if ("+Ja+"\x3d\x3d\x3dfalse) { break; } else if ("+Ja+"!\x3d\x3dtrue) { lang.error('"+w.ExecutionErrorCodes.BooleanConditionRequired+"');   }\n");wa+=G(ca,ja.body);null!==ja.update&&(wa+="\n "+G(ca,ja.update));return wa+("\n"+Da+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");
case "ForInStatement":var La=Z(ca),Ya=Z(ca),Ua=Z(ca),Ta="var "+La+" \x3d "+G(ca,ja.right)+";\n";"VariableDeclaration"===ja.left.type&&(Ta+=G(ca,ja.left));var ab="VariableDeclaration"===ja.left.type?ja.left.declarations[0].id.name:ja.left.name;ab=ab.toLowerCase();P(ab);wa="";null!==ca.localScope&&(void 0!==ca.localScope[ab]?wa="lscope['"+ab+"']":void 0!==ca.localScope._SymbolsMap[ab]&&(wa="lscope['"+ca.localScope._SymbolsMap[ab]+"']"));za="";if(""===wa)if(void 0!==ca.globalScope[ab])wa="gscope['"+
ab+"']";else if(void 0!==ca.globalScope._SymbolsMap[ab])wa="gscope['"+ca.globalScope._SymbolsMap[ab]+"']";else if(null!==ca.localScope)if(ca.undeclaredGlobalsInFunctions.has(ab))wa="gscope['"+ca.undeclaredGlobalsInFunctions.get(ab).manglename+"']",za=ca.undeclaredGlobalsInFunctions.get(ab).manglename;else{var fb={manglename:W(ca),node:ja.left};ca.undeclaredGlobalsInFunctions.set(ab,fb);wa="gscope['"+fb.manglename+"']";za=fb.manglename}za&&(Ta+="lang.chkAssig('"+za+"',runtimeCtx); \n");Ta=Ta+("if ("+
La+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+(La+") || lc.isString("+La+")) {var ")+(Ya+"\x3d"+La+".length; \nfor(var ")+(Ua+"\x3d0; "+Ua+"\x3c"+Ya+"; "+Ua+"++) {\n");Ta+=wa+"\x3d"+Ua+";\n";Ta+=G(ca,ja.body);Ta+="\n}\n";Ta+=" lastStatement \x3d lc.voidOperation; \n";Ta+=" \n}\n";Ta+="else if (lc.isImmutableArray("+La+")) {";Ta=Ta+("var "+Ya+"\x3d"+La+".length(); \nfor(var ")+(Ua+"\x3d0; "+Ua+"\x3c"+Ya+"; "+Ua+"++) {\n");Ta+=wa+"\x3d"+Ua+";\n";Ta+=G(ca,ja.body);
Ta+="\n}\n";Ta+=" lastStatement \x3d lc.voidOperation; \n";Ta+=" \n}\n";Ta+="else if (( "+La+" instanceof lang.Dictionary) || ( "+La+" instanceof lang.Feature)) {";Ta=Ta+("var "+Ya+"\x3d"+La+".keys(); \nfor(var ")+(Ua+"\x3d0; "+Ua+"\x3c"+Ya+".length; "+Ua+"++) {\n");Ta+=wa+"\x3d"+Ya+"["+Ua+"];\n";Ta+=G(ca,ja.body);Ta+="\n}\n";Ta+=" lastStatement \x3d lc.voidOperation; \n";Ta+=" \n}\n";ca.isAsync&&(Ta+="else if (lc.isFeatureSet("+La+")) {",Ta=Ta+("var "+Ya+"\x3d"+La+".iterator(runtimeCtx.abortSignal); \nfor(var ")+
(Ua+"\x3dlang. graphicToFeature( yield "+Ya+".next(),"+La+", runtimeCtx); "+Ua+"!\x3dnull; "+Ua+"\x3dlang. graphicToFeature( yield "+Ya+".next(),"+La+", runtimeCtx)) {\n")+(wa+"\x3d"+Ua+";\n"),Ta+=G(ca,ja.body),Ta+="\n}\n",Ta+=" lastStatement \x3d lc.voidOperation; \n",Ta+=" \n}\n");return Ta+"else { lastStatement \x3d lc.voidOperation; } \n";case "WhileStatement":wa="lastStatement \x3d lc.voidOperation; \n";var kb=Z(ca);return wa+="\n  var "+kb+" \x3d true;\n    do {\n      "+kb+" \x3d "+G(ca,ja.test)+
";\n      if ("+kb+"\x3d\x3dfalse) {\n        break;\n      }\n      if ("+kb+"!\x3d\x3dtrue) {\n        lang.error('"+w.ExecutionErrorCodes.BooleanConditionRequired+"');\n      }\n      "+G(ca,ja.body)+"\n    }\n    while ("+kb+" !\x3d\x3d false);\n    lastStatement \x3d lc.voidOperation;\n  ";case "Identifier":return N(ca,ja);case "MemberExpression":try{wa=void 0;!0===ja.computed?wa=G(ca,ja.property):(wa="'"+ja.property.name+"'",P(ja.property.name));var qb="lang.member("+G(ca,ja.object)+","+wa+
")"}catch(Eb){throw Eb;}return qb;case "Literal":return null===ja.value||void 0===ja.value?"null":JSON.stringify(ja.value);case "CallExpression":return L(ca,ja);case "UnaryExpression":try{var ob="lang.unary("+G(ca,ja.argument)+",'"+ja.operator+"')"}catch(Eb){throw Eb;}return ob;case "BinaryExpression":try{var wb="lang.binary("+G(ca,ja.left)+","+G(ca,ja.right)+",'"+ja.operator+"')"}catch(Eb){throw Eb;}return wb;case "LogicalExpression":try{if("AssignmentExpression"===ja.left.type||"UpdateExpression"===
ja.left.type)throw new w.ArcadeCompilationError(ca,w.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,ja);if("AssignmentExpression"===ja.right.type||"UpdateExpression"===ja.right.type)throw new w.ArcadeCompilationError(ca,w.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,ja);if("\x26\x26"===ja.operator||"||"===ja.operator)var Fb="(lang.logicalCheck("+G(ca,ja.left)+") "+ja.operator+" lang.logicalCheck("+G(ca,ja.right)+"))";else throw new w.ArcadeCompilationError(null,w.ExecutionErrorCodes.LogicExpressionOrAnd,
null);}catch(Eb){throw Eb;}return Fb;case "ArrayExpression":try{wa=[];for(za=0;za<ja.elements.length;za++)"Literal"===ja.elements[za].type?wa.push(G(ca,ja.elements[za])):wa.push("lang.aCheck("+G(ca,ja.elements[za])+",'ArrayExpression')");var yb="["+wa.join(",")+"]"}catch(Eb){throw Eb;}return yb;case "ObjectExpression":wa="lang.dictionary([";for(za=0;za<ja.properties.length;za++){var lb=ja.properties[za];P(lb.key.name);var Db="Identifier"===lb.key.type?"'"+lb.key.name+"'":G(ca,lb.key),Sb=G(ca,lb.value);
0<za&&(wa+=",");wa+="lang.strCheck("+Db+",'ObjectExpression'),lang.aCheck("+Sb+", 'ObjectExpression')"}return wa+"])";case "Property":throw new w.ArcadeCompilationError(ca,w.ExecutionErrorCodes.NeverReach,ja);case "Array":throw new w.ArcadeCompilationError(ca,w.ExecutionErrorCodes.NeverReach,ja);default:throw new w.ArcadeCompilationError(ca,w.ExecutionErrorCodes.Unrecognised,ja);}}catch(Eb){throw Eb;}}function F(ca,ja){var wa=null,za="";if("MemberExpression"===ja.argument.type)return wa=G(ca,ja.argument.object),
!0===ja.argument.computed?za=G(ca,ja.argument.property):(za="'"+ja.argument.property.name+"'",P(ja.argument.property.name)),"lang.memberupdate("+wa+","+za+",'"+ja.operator+"',"+ja.prefix+")";wa=ja.argument.name.toLowerCase();P(wa);if(null!==ca.localScope){if(void 0!==ca.localScope[wa])return"lang.update(lscope, '"+wa+"','"+ja.operator+"',"+ja.prefix+")";if(void 0!==ca.localScope._SymbolsMap[wa])return"lang.update(lscope, '"+ca.localScope._SymbolsMap[wa]+"','"+ja.operator+"',"+ja.prefix+")"}if(void 0!==
ca.globalScope[wa])return"lang.update(gscope, '"+wa+"','"+ja.operator+"',"+ja.prefix+")";if(void 0!==ca.globalScope._SymbolsMap[wa])return"lang.update(gscope, '"+ca.globalScope._SymbolsMap[wa]+"','"+ja.operator+"',"+ja.prefix+")";if(null!==ca.localScope){if(ca.undeclaredGlobalsInFunctions.has(wa))return"lang.update(gscope,lang.chkAssig( '"+ca.undeclaredGlobalsInFunctions.get(wa).manglename+"',runtimeCtx),'"+ja.operator+"',"+ja.prefix+")";za={manglename:W(ca),node:ja.argument};ca.undeclaredGlobalsInFunctions.set(wa,
za);return"lang.update(gscope, lang.chkAssig('"+za.manglename+"',runtimeCtx),'"+ja.operator+"',"+ja.prefix+")"}throw new w.ArcadeExecutionError(ca,w.ExecutionErrorCodes.InvalidIdentifier,ja);}function H(ca,ja){var wa=G(ca,ja.right),za=null,Fa="";if("MemberExpression"===ja.left.type)return za=G(ca,ja.left.object),!0===ja.left.computed?Fa=G(ca,ja.left.property):(Fa="'"+ja.left.property.name+"'",P(ja.left.property.name)),"lang.assignmember("+za+","+Fa+",'"+ja.operator+"',"+wa+")";za=ja.left.name.toLowerCase();
P(za);if(null!==ca.localScope){if(void 0!==ca.localScope[za])return"lscope['"+za+"']\x3dlang.assign("+wa+",'"+ja.operator+"', lscope['"+za+"'])";if(void 0!==ca.localScope._SymbolsMap[za])return"lscope['"+ca.localScope._SymbolsMap[za]+"']\x3dlang.assign("+wa+",'"+ja.operator+"', lscope['"+ca.localScope._SymbolsMap[za]+"'])"}if(void 0!==ca.globalScope[za])return"gscope['"+za+"']\x3dlang.assign("+wa+",'"+ja.operator+"', gscope['"+za+"'])";if(void 0!==ca.globalScope._SymbolsMap[za])return"gscope['"+ca.globalScope._SymbolsMap[za]+
"']\x3dlang.assign("+wa+",'"+ja.operator+"', gscope['"+ca.globalScope._SymbolsMap[za]+"'])";if(null!==ca.localScope){if(ca.undeclaredGlobalsInFunctions.has(za))return"gscope[lang.chkAssig('"+ca.undeclaredGlobalsInFunctions.get(za).manglename+"',runtimeCtx)]\x3dlang.assign("+wa+",'"+ja.operator+"', gscope['"+ca.undeclaredGlobalsInFunctions.get(za).manglename+"'])";Fa={manglename:W(ca),node:ja.argument};ca.undeclaredGlobalsInFunctions.set(za,Fa);return"gscope[lang.chkAssig('"+Fa.manglename+"',runtimeCtx)]\x3dlang.assign("+
wa+",'"+ja.operator+"', gscope['"+Fa.manglename+"'])"}throw new w.ArcadeExecutionError(ca,w.ExecutionErrorCodes.InvalidIdentifier,ja);}function J(ca,ja){return"BlockStatement"===ja.type?G(ca,ja):"ReturnStatement"===ja.type||"BreakStatement"===ja.type||"ContinueStatement"===ja.type?G(ca,ja)+"; ":"UpdateExpression"===ja.type?"lastStatement \x3d "+G(ca,ja)+"; ":"ExpressionStatement"===ja.type?G(ca,ja):"ObjectExpression"===ja.type?"lastStatement \x3d "+G(ca,ja)+"; ":G(ca,ja)+"; "}function K(ca,ja){if("AssignmentExpression"===
ja.test.type||"UpdateExpression"===ja.test.type)throw new w.ArcadeCompilationError(ca,w.ExecutionErrorCodes.BooleanConditionRequired,ja);return"if (lang.mustBoolean("+G(ca,ja.test)+", runtimeCtx) \x3d\x3d\x3d true) {\n    "+J(ca,ja.consequent)+"\n  } "+(null!==ja.alternate?"IfStatement"===ja.alternate.type?" else "+K(ca,ja.alternate):" else {\n      "+J(ca,ja.alternate)+"\n    }\n":" else {\n      lastStatement \x3d lc.voidOperation;\n    }\n")}function Q(ca,ja){for(var wa="",za=0;za<ja.body.length;za++)"EmptyStatement"!==
ja.body[za].type&&(wa="ReturnStatement"===ja.body[za].type?wa+(G(ca,ja.body[za])+"; \n"):"BreakStatement"===ja.body[za].type?wa+(G(ca,ja.body[za])+"; \n"):"ContinueStatement"===ja.body[za].type?wa+(G(ca,ja.body[za])+"; \n"):"UpdateExpression"===ja.body[za].type?wa+("lastStatement \x3d "+G(ca,ja.body[za])+"; \n"):"ObjectExpression"===ja.body[za].type?wa+("lastStatement \x3d "+G(ca,ja.body[za])+"; \n"):wa+(G(ca,ja.body[za])+" \n"));return wa}function P(ca){if("iif"===ca)throw new w.ArcadeUncompilableError;
if("decode"===ca)throw new w.ArcadeUncompilableError;if("when"===ca)throw new w.ArcadeUncompilableError;}function I(ca,ja){var wa=null===ja.init?null:G(ca,ja.init);wa===m.voidOperation&&(wa=null);ja=ja.id.name.toLowerCase();P(ja);if(null!==ca.localScope){if(void 0!==ca.localScope[ja])return"lscope['"+ja+"']\x3d"+wa+"; ";if(void 0!==ca.localScope._SymbolsMap[ja])return"lscope['"+ca.localScope._SymbolsMap[ja]+"']\x3d"+wa+"; ";var za=W(ca);ca.localScope._SymbolsMap[ja]=za;ca.mangleMap[ja]=za;return"lscope['"+
za+"']\x3d"+wa+"; "}if(void 0!==ca.globalScope[ja])return"gscope['"+ja+"']\x3d"+wa+"; ";if(void 0!==ca.globalScope._SymbolsMap[ja])return"gscope['"+ca.globalScope._SymbolsMap[ja]+"']\x3d"+wa+"; ";if(ca.undeclaredGlobalsInFunctions.has(ja))return za=ca.undeclaredGlobalsInFunctions.get(ja).manglename,ca.globalScope._SymbolsMap[ja]=za,ca.mangleMap[ja]=za,ca.undeclaredGlobalsInFunctions.delete(ja),"gscope[lang.setAssig('"+za+"', runtimeCtx)]\x3d"+wa+"; ";za=W(ca);ca.globalScope._SymbolsMap[ja]=za;ca.mangleMap[ja]=
za;return"gscope['"+za+"']\x3d"+wa+"; "}function N(ca,ja){try{var wa=ja.name.toLowerCase();P(wa);if(null!==ca.localScope){if(void 0!==ca.localScope[wa])return"lscope['"+wa+"']";if(void 0!==ca.localScope._SymbolsMap[wa])return"lscope['"+ca.localScope._SymbolsMap[wa]+"']"}if(void 0!==ca.globalScope[wa])return"gscope['"+wa+"']";if(void 0!==ca.globalScope._SymbolsMap[wa])return"gscope['"+ca.globalScope._SymbolsMap[wa]+"']";if(null!==ca.localScope){if(ca.undeclaredGlobalsInFunctions.has(wa))return"gscope[lang.chkAssig('"+
ca.undeclaredGlobalsInFunctions.get(wa).manglename+"',runtimeCtx)]";var za={manglename:W(ca),node:ja.argument};ca.undeclaredGlobalsInFunctions.set(wa,za);return"gscope[lang.chkAssig('"+za.manglename+"',runtimeCtx)]"}throw new w.ArcadeCompilationError(ca,w.ExecutionErrorCodes.InvalidIdentifier,ja);}catch(Fa){throw Fa;}}function L(ca,ja){try{if("MemberExpression"===ja.callee.type){var wa=void 0;!0===ja.callee.computed?wa=G(ca,ja.callee.property):(wa="'"+ja.callee.property.name+"'",P(ja.callee.property.name));
for(var za="[",Fa=0;Fa<ja.arguments.length;Fa++)0<Fa&&(za+=", "),za+=G(ca,ja.arguments[Fa]);za+="]";return ca.isAsync?"(yield lang.callModuleFunction("+G(ca,ja.callee.object)+","+za+","+wa+",runtimeCtx))":"lang.callModuleFunction("+G(ca,ja.callee.object)+","+za+","+wa+",runtimeCtx)"}if("Identifier"!==ja.callee.type)throw new w.ArcadeCompilationError(ca,w.ExecutionErrorCodes.FuncionNotFound,ja);var O=ja.callee.name.toLowerCase();if("iif"===O){try{if(3!==ja.arguments.length)throw new w.ArcadeCompilationError(ca,
w.ExecutionErrorCodes.WrongNumberOfParameters,ja);var ya=Z(ca);var Ha=(ca.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {")+"\n        var "+ya+" \x3d "+G(ca,ja.arguments[0])+";\n       \n        if ("+ya+" \x3d\x3d\x3d true) {\n          return  "+G(ca,ja.arguments[1])+";\n        }\n        else if ("+ya+" \x3d\x3d\x3d false) {\n          return "+G(ca,ja.arguments[2])+";\n        }\n        else {\n          lang.error('ExecutionErrorCodes.BooleanConditionRequired');\n        }\n      "+
(ca.isAsync?"})}()))":"}()")}catch(oa){throw oa;}return Ha}if("when"===O){try{if(3>ja.arguments.length)throw new w.ArcadeCompilationError(ca,w.ExecutionErrorCodes.WrongNumberOfParameters,ja);if(0===ja.arguments.length%2)throw new w.ArcadeCompilationError(ca,w.ExecutionErrorCodes.WrongNumberOfParameters,ja);var da=Z(ca);za="var ";for(Fa=0;Fa<ja.arguments.length-1;Fa+=2)za+=da+" \x3d lang.mustBoolean("+G(ca,ja.arguments[Fa])+", runtimeCtx);\n      if ("+da+" \x3d\x3d\x3d true ) {\n        return "+
G(ca,ja.arguments[Fa+1])+" \n      }\n";wa=(ca.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {")+"\n        "+za+"\n        return "+G(ca,ja.arguments[ja.arguments.length-1])+"\n        "+(ca.isAsync?"})}()))":"}()")}catch(oa){throw oa;}return wa}if("decode"===O){try{if(2>ja.arguments.length)throw new w.ArcadeCompilationError(ca,w.ExecutionErrorCodes.WrongNumberOfParameters,ja);if(2===ja.arguments.length)var Oa="("+G(ca,ja.arguments[1])+")";
else{if(0===(ja.arguments.length-1)%2)throw new w.ArcadeCompilationError(ca,w.ExecutionErrorCodes.WrongNumberOfParameters,ja);var Na=Z(ca),Ca=Z(ca);za="var ";for(Fa=1;Fa<ja.arguments.length-1;Fa+=2)za+=Ca+" \x3d "+G(ca,ja.arguments[Fa])+";\n      if (lang.binary("+Ca+", "+Na+', "\x3d\x3d") \x3d\x3d\x3d true ) {\n        return '+G(ca,ja.arguments[Fa+1])+" \n      }\n";Oa=(ca.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {")+"\n        var "+
Na+" \x3d "+G(ca,ja.arguments[0])+";\n        "+za+"\n        return "+G(ca,ja.arguments[ja.arguments.length-1])+"\n        "+(ca.isAsync?"})}()))":"}()")}}catch(oa){throw oa;}return Oa}wa="";null!==ca.localScope&&(void 0!==ca.localScope[O]?wa="lscope['"+O+"']":void 0!==ca.localScope._SymbolsMap[O]&&(wa="lscope['"+ca.localScope._SymbolsMap[O]+"']"));if(""===wa)if(void 0!==ca.globalScope[O])wa="gscope['"+O+"']";else if(void 0!==ca.globalScope._SymbolsMap[O])wa="gscope['"+ca.globalScope._SymbolsMap[O]+
"']";else if(null!==ca.localScope)if(ca.undeclaredGlobalsInFunctions.has(O))wa="gscope[lang.chkAssig('"+ca.undeclaredGlobalsInFunctions.get(O).manglename+"',runtimeCtx)]";else{var V={manglename:W(ca),node:ja.argument};ca.undeclaredGlobalsInFunctions.set(O,V);wa="gscope[lang.chkAssig('"+V.manglename+"',runtimeCtx)]"}if(""!==wa){za="[";for(Fa=0;Fa<ja.arguments.length;Fa++)0<Fa&&(za+=", "),za+=G(ca,ja.arguments[Fa]);za+="]";return ca.isAsync?"(yield lang.callfunc("+wa+","+za+",runtimeCtx) )":"lang.callfunc("+
wa+","+za+",runtimeCtx)"}throw new w.ArcadeCompilationError(ca,w.ExecutionErrorCodes.FuncionNotFound,ja);}catch(oa){throw oa;}}function W(ca){ca.symbols.symbolCounter++;return"_T"+ca.symbols.symbolCounter.toString()}function Z(ca){ca.symbols.symbolCounter++;return"_Tvar"+ca.symbols.symbolCounter.toString()}function aa(ca,ja,wa){var za={};ca||(ca={});wa||(wa={});za._SymbolsMap={};za.textformatting=1;za.infinity=1;za.pi=1;for(var Fa in ja)za[Fa]=1;for(Fa in wa)za[Fa]=1;for(Fa in ca)za[Fa]=1;return za}
function ia(ca,ja,wa,za){wa=wa?new Aa:new ra;ca||(ca={});ja||(ja={});var Fa=new e({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});Fa.immutable=!1;wa._SymbolsMap={textformatting:1,infinity:1,pi:1};wa.textformatting=Fa;wa.infinity=Number.POSITIVE_INFINITY;wa.pi=Math.PI;for(var O in ja)wa[O]=ja[O],wa._SymbolsMap[O]=1;for(O in ca)wa._SymbolsMap[O]=1,wa[O]=ca[O]&&"esri.Graphic"===ca[O].declaredClass?r.createFromGraphic(ca[O],null!==za&&void 0!==za?za:null):
ca[O];return wa}function R(ca,ja){for(var wa={mode:ja,compiled:!0,functions:{},signatures:[],standardFunction:A,standardFunctionAsync:A,evaluateIdentifier:S},za=0;za<ca.length;za++)ca[za].registerFunctions(wa);if("sync"===ja){for(var Fa in wa.functions)fa[Fa]=new z.NativeFunction(wa.functions[Fa]),ra.prototype[Fa]=fa[Fa];for(za=0;za<wa.signatures.length;za++)a.addFunctionDeclaration(wa.signatures[za],"sync")}else{for(Fa in wa.functions)ea[Fa]=new z.NativeFunction(wa.functions[Fa]),Aa.prototype[Fa]=
ea[Fa];for(za=0;za<wa.signatures.length;za++)a.addFunctionDeclaration(wa.signatures[za],"async")}}function S(ca,ja){ja=ja.name;if("_SymbolsMap"===ja)throw new w.ArcadeExecutionError(ca,w.ExecutionErrorCodes.InvalidIdentifier,null);if(0<ca.localStack.length){if("_t"!==ja.substr(0,2).toLowerCase()&&void 0!==ca.localStack[ca.localStack.length-1][ja])return ca.localStack[ca.localStack.length-1][ja];var wa=ca.mangleMap[ja];if(void 0!==wa&&void 0!==ca.localStack[ca.localStack.length-1][wa])return ca.localStack[ca.localStack.length-
1][wa]}if("_t"!==ja.substr(0,2).toLowerCase()&&void 0!==ca.globalScope[ja]||1===ca.globalScope._SymbolsMap[ja])return ca.globalScope[ja];ja=ca.mangleMap[ja];if(void 0!==ja)return ca.globalScope[ja]}function M(ca){}function X(ca,ja,wa){var za;void 0===wa&&(wa=!1);var Fa={isAsync:wa,moduleFactory:ja.moduleFactory,moduleFactoryMap:{},libraryResolver:new E.ArcadeModuleLoader(null,ca.loadedModules),globalScope:aa(ja.vars,wa?ea:fa,ja.customfunctions),customfunctions:ja.customfunctions,localScope:null,mangleMap:{},
undeclaredGlobalsInFunctions:new Map,depthCounter:{depth:1},exports:{},console:M,lrucache:ja.lrucache,timeReference:null!==(za=ja.timeReference)&&void 0!==za?za:null,interceptor:ja.interceptor,services:ja.services,symbols:{symbolCounter:0}};ca=G(Fa,ca);""===ca&&(ca="lc.voidOperation; ");var O=Fa.moduleFactory,ya=Fa.moduleFactoryMap,Ha=Fa.exports,da={},Oa;for(Oa in Ha)da[Oa]=void 0!==Fa.mangleMap[Oa]?Fa.mangleMap[Oa]:Oa;Fa={lc:m,lang:va,mangles:Fa.mangleMap,prepareModule:function(Na){return new Ga(Na)},
prepare:function(Na,Ca){var V,oa=Na.spatialReference;if(null===oa||void 0===oa)oa=new D({wkid:102100});var pa=ia(Na.vars,Na.customfunctions,Ca,Na.timeReference);return{localStack:[],isAsync:Ca,exports:Ha,exportmangle:da,gdefs:{},moduleFactory:O,moduleFactoryMap:ya,moduleSingletons:Na.moduleSingletons,mangleMap:this.mangles,spatialReference:oa,globalScope:pa,abortSignal:void 0===Na.abortSignal||null===Na.abortSignal?{aborted:!1}:Na.abortSignal,localScope:null,services:Na.services,console:Na.console?
Na.console:M,lrucache:Na.lrucache,timeReference:null!==(V=Na.timeReference)&&void 0!==V?V:null,interceptor:Na.interceptor,symbols:{symbolCounter:0},depthCounter:Na.depthCounter}}};return(new Function("context","spatialReference",wa?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
ca+"\n return lastStatement; }); } \n yield mainBody(); \n return this.prepareModule(runtimeCtx); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+ca+"\n return lastStatement; } \n mainBody(); \n return this.prepareModule(runtimeCtx); ")).bind(Fa)}Object.defineProperty(B,"__esModule",{value:!0});B.enableAsyncSupport=B.compileScript=B.executeScript=
B.extend=B.functionHelper=B.UserDefinedCompiledFunction=void 0;l=function(ca){function ja(wa,za){var Fa=ca.call(this)||this;Fa.paramCount=za;Fa.fn=wa;return Fa}t(ja,ca);ja.prototype.createFunction=function(wa){var za=this;return function(){for(var Fa=[],O=0;O<arguments.length;O++)Fa[O]=arguments[O];if(Fa.length!==za.paramCount)throw new w.ArcadeExecutionError(wa,w.ExecutionErrorCodes.WrongNumberOfParameters,null);return za.fn.apply(za,Fa)}};ja.prototype.call=function(wa,za){return this.fn.apply(this,
za.arguments)};ja.prototype.marshalledCall=function(wa,za,Fa,O){var ya=this;return O(wa,za,function(Ha,da,Oa){Oa=Oa.map(function(Na){return!m.isFunctionParameter(Na)||Na instanceof z.ScopeMarshalledFunction?Na:z.wrapModuleScopedResponse(Na,wa,O)});Ha=ya.call(Fa,{arguments:Oa});return v.isPromiseLike(Ha)?Ha.then(function(Na){return z.wrapModuleScopedResponse(Na,Fa,O)}):Ha})};return ja}(z.ArcadeFunction);B.UserDefinedCompiledFunction=l;var fa={};q.registerFunctions(fa,A);x.registerFunctions(fa,A);g.registerFunctions(fa,
A);n.registerFunctions(fa,A);b.registerFunctions(fa,A);fa.iif=function(ca,ja){try{return A(ca,ja,function(wa,za,Fa){throw new w.ArcadeExecutionError(ca,w.ExecutionErrorCodes.Unrecognised,ja);})}catch(wa){throw wa;}};fa.decode=function(ca,ja){try{return A(ca,ja,function(wa,za,Fa){throw new w.ArcadeExecutionError(ca,w.ExecutionErrorCodes.Unrecognised,ja);})}catch(wa){throw wa;}};fa.when=function(ca,ja){try{return A(ca,ja,function(wa,za,Fa){throw new w.ArcadeExecutionError(ca,w.ExecutionErrorCodes.Unrecognised,
ja);})}catch(wa){throw wa;}};var ea={},ha;for(ha in fa)ea[ha]=new z.NativeFunction(fa[ha]);k.registerFunctions(fa,A);for(ha in fa)fa[ha]=new z.NativeFunction(fa[ha]);var ra=function(){};ra.prototype=fa;var Aa=function(){};Aa.prototype=ea;B.functionHelper={fixSpatialReference:m.fixSpatialReference,parseArguments:function(ca,ja){for(var wa=[],za=0;za<ja.arguments.length;za++)wa.push(G(ca,ja.arguments[za]));return wa},standardFunction:A};B.extend=R;R([h],"sync");R([h],"async");B.executeScript=function(ca,
ja){return ca(ja)};var Ea=0,va={error:function(ca){throw new w.ArcadeExecutionError(null,ca,null);},__awaiter:function(ca,ja,wa,za){return new Promise(function(Fa,O){function ya(Oa){try{da(za.next(Oa))}catch(Na){O(Na)}}function Ha(Oa){try{da(za["throw"](Oa))}catch(Na){O(Na)}}function da(Oa){Oa.done?Fa(Oa.value):Oa.value&&Oa.value.then?Oa.value.then(ya,Ha):(Ea++,0===Ea%100?setTimeout(function(){Ea=0;ya(Oa.value)},0):ya(Oa.value))}da((za=za.apply(ca,ja||[])).next())})},functionDepthchecker:function(ca,
ja){return function(){ja.depthCounter.depth++;ja.localStack.push([]);if(64<ja.depthCounter.depth)throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.MaximumCallDepth,null);var wa=ca.apply(this,arguments);if(v.isPromiseLike(wa))return wa.then(function(za){ja.depthCounter.depth--;--ja.localStack.length;return za});ja.depthCounter.depth--;--ja.localStack.length;return wa}},chkAssig:function(ca,ja){if(void 0===ja.gdefs[ca])throw new w.ArcadeExecutionError(ja,w.ExecutionErrorCodes.InvalidIdentifier,
null);return ca},mustBoolean:function(ca,ja){if(!0===ca||!1===ca)return ca;throw new w.ArcadeExecutionError(ja,w.ExecutionErrorCodes.BooleanConditionRequired,null);},setAssig:function(ca,ja){ja.gdefs[ca]=1;return ca},castString:function(ca){return m.toString(ca)},aCheck:function(ca,ja){if(m.isFunctionParameter(ca)){if("ArrayExpression"===ja)throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.NoFunctionInArray,null);if("ObjectExpression"===ja)throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.NoFunctionInDictionary,
null);throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.NoFunctionInTemplateLiteral,null);}return ca===m.voidOperation?null:ca},Dictionary:e,Feature:r,UserDefinedCompiledFunction:l,dictionary:function(ca){for(var ja={},wa=new Map,za=0;za<ca.length;za+=2){if(m.isFunctionParameter(ca[za+1]))throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.NoFunctionInDictionary,null);if(!1===m.isString(ca[za]))throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.KeyMustBeString,null);var Fa=
ca[za].toString(),O=Fa.toLowerCase();wa.has(O)?Fa=wa.get(O):wa.set(O,Fa);ja[Fa]=ca[za+1]===m.voidOperation?null:ca[za+1]}ca=new e(ja);ca.immutable=!1;return ca},strCheck:function(ca){if(!1===m.isString(ca))throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.KeyMustBeString,null);return ca},unary:function(ca,ja){if(m.isBoolean(ca)){if("!"===ja)return!ca;if("-"===ja)return-1*m.toNumber(ca);if("+"===ja)return 1*m.toNumber(ca);if("~"===ja)return~m.toNumber(ca);throw new w.ArcadeExecutionError(null,
w.ExecutionErrorCodes.UnsupportedUnaryOperator,null);}if("-"===ja)return-1*m.toNumber(ca);if("+"===ja)return 1*m.toNumber(ca);if("~"===ja)return~m.toNumber(ca);throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.UnsupportedUnaryOperator,null);},logicalCheck:function(ca){if(!1===m.isBoolean(ca))throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.LogicExpressionOrAnd,null);return ca},logical:function(ca,ja,wa){if(m.isBoolean(ca)&&m.isBoolean(ja))switch(wa){case "||":return ca||ja;case "\x26\x26":return ca&&
ja}throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.LogicExpressionOrAnd,null);},binary:function(ca,ja,wa){switch(wa){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return m.binaryOperator(m.toNumber(ca),m.toNumber(ja),wa);case "\x3d\x3d":return m.equalityTest(ca,ja);case "\x3d":return m.equalityTest(ca,ja);case "!\x3d":return!m.equalityTest(ca,ja);case "\x3c":return m.greaterThanLessThan(ca,ja,wa);case "\x3e":return m.greaterThanLessThan(ca,ja,wa);case "\x3c\x3d":return m.greaterThanLessThan(ca,
ja,wa);case "\x3e\x3d":return m.greaterThanLessThan(ca,ja,wa);case "+":return m.isString(ca)||m.isString(ja)?m.toString(ca)+m.toString(ja):m.toNumber(ca)+m.toNumber(ja);case "-":return m.toNumber(ca)-m.toNumber(ja);case "*":return m.toNumber(ca)*m.toNumber(ja);case "/":return m.toNumber(ca)/m.toNumber(ja);case "%":return m.toNumber(ca)%m.toNumber(ja);default:throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.UnsupportedOperator,null);}},assign:function(ca,ja,wa){switch(ja){case "\x3d":return ca===
m.voidOperation?null:ca;case "/\x3d":return m.toNumber(wa)/m.toNumber(ca);case "*\x3d":return m.toNumber(wa)*m.toNumber(ca);case "-\x3d":return m.toNumber(wa)-m.toNumber(ca);case "+\x3d":return m.isString(wa)||m.isString(ca)?m.toString(wa)+m.toString(ca):m.toNumber(wa)+m.toNumber(ca);case "%\x3d":return m.toNumber(wa)%m.toNumber(ca);default:throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.UnsupportedOperator,null);}},update:function(ca,ja,wa,za){var Fa=m.toNumber(ca[ja]);ca[ja]="++"===
wa?Fa+1:Fa-1;return!1===za?Fa:"++"===wa?Fa+1:Fa-1},graphicToFeature:function(ca,ja,wa){return null===ca?null:r.createFromGraphicLikeObject(ca.geometry,ca.attributes,ja,wa.timeReference)},memberupdate:function(ca,ja,wa,za){if(m.isArray(ca))if(m.isNumber(ja)){0>ja&&(ja=ca.length+ja);if(0>ja||ja>=ca.length)throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.OutOfBounds,null);var Fa=m.toNumber(ca[ja]);ca[ja]="++"===wa?Fa+1:Fa-1}else throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.ArrayAccessorMustBeNumber,
null);else if(ca instanceof e){if(!1===m.isString(ja))throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===ca.hasField(ja))Fa=m.toNumber(ca.field(ja)),ca.setField(ja,"++"===wa?Fa+1:Fa-1);else throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.FieldNotFound,null,{key:ja});}else if(m.isFeature(ca)){if(!1===m.isString(ja))throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===ca.hasField(ja))Fa=m.toNumber(ca.field(ja)),
ca.setField(ja,"++"===wa?Fa+1:Fa-1);else throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.FieldNotFound,null);}else{if(m.isImmutableArray(ca))throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.Immutable,null);if(ca instanceof Ga){if(!1===m.isString(ja))throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.ModuleAccessorMustBeString,null);if(!0===ca.hasGlobal(ja))Fa=m.toNumber(ca.global(ja)),ca.setGlobal(ja,"++"===wa?Fa+1:Fa-1);else throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.ModuleExportNotFound,
null);}else throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.InvalidIdentifier,null);}return!1===za?Fa:"++"===wa?Fa+1:Fa-1},assignmember:function(ca,ja,wa,za){if(m.isArray(ca))if(m.isNumber(ja)){0>ja&&(ja=ca.length+ja);if(0>ja||ja>ca.length)throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.OutOfBounds,null);if(ja===ca.length&&"\x3d"!==wa)throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.OutOfBounds,null);ca[ja]=this.assign(za,wa,ca[ja])}else throw new w.ArcadeExecutionError(null,
w.ExecutionErrorCodes.ArrayAccessorMustBeNumber,null);else if(ca instanceof e){if(!1===m.isString(ja))throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===ca.hasField(ja))ca.setField(ja,this.assign(za,wa,ca.field(ja)));else{if("\x3d"!==wa)throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.FieldNotFound,null);ca.setField(ja,this.assign(za,wa,null))}}else if(m.isFeature(ca)){if(!1===m.isString(ja))throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.KeyAccessorMustBeString,
null);if(!0===ca.hasField(ja))ca.setField(ja,this.assign(za,wa,ca.field(ja)));else{if("\x3d"!==wa)throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.FieldNotFound,null);ca.setField(ja,this.assign(za,wa,null))}}else{if(m.isImmutableArray(ca))throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.Immutable,null);if(ca instanceof Ga){if(!1===m.isString(ja))throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.ModuleAccessorMustBeString,null);if(ca.hasGlobal(ja))ca.setGlobal(ja,this.assign(za,
wa,ca.global(ja)));else throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.ModuleExportNotFound,null);}else throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.InvalidIdentifier,null);}},member:function(ca,ja){if(null===ca)throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.MemberOfNull,null);if(ca instanceof e||m.isFeature(ca)){if(m.isString(ja))return ca.field(ja);throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(ca instanceof y){if(m.isString(ja))return n.geometryMember(ca,
ja,null,null);throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(m.isArray(ca)){if(m.isNumber(ja)&&isFinite(ja)&&Math.floor(ja)===ja){0>ja&&(ja=ca.length+ja);if(ja>=ca.length||0>ja)throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.OutOfBounds,null);return ca[ja]}throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(m.isString(ca)){if(m.isNumber(ja)&&isFinite(ja)&&Math.floor(ja)===ja){0>ja&&(ja=ca.length+ja);
if(ja>=ca.length||0>ja)throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.OutOfBounds,null);return ca[ja]}throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(m.isImmutableArray(ca)){if(m.isNumber(ja)&&isFinite(ja)&&Math.floor(ja)===ja){0>ja&&(ja=ca.length()+ja);if(ja>=ca.length()||0>ja)throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.OutOfBounds,null);return ca.get(ja)}throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.InvalidMemberAccessKey,
null);}if(ca instanceof Ga&&m.isString(ja))return ca.global(ja);throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.InvalidMemberAccessKey,null);},callfunc:function(ca,ja,wa){return ca.call(wa,{arguments:ja,preparsed:!0})},loadModule:function(ca,ja){ca=ja.moduleFactoryMap[ca];if(ja.moduleSingletons[ca])return ja.moduleSingletons[ca];var wa=ja.moduleFactory[ca]({vars:{},moduleSingletons:ja.moduleSingletons,depthCounter:ja.depthCounter,console:ja.console,abortSignal:ja.abortSignal,isAsync:ja.isAsync,
services:ja.services,lrucache:ja.lrucache,timeReference:ja.timeReference?ja.timeReference:null,interceptor:ja.interceptor},ja.spatialReference);return ja.moduleSingletons[ca]=wa},callModuleFunction:function(ca,ja,wa,za){if(!(ca instanceof Ga))throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.FuncionNotFound,null);ca=ca.global(wa);if(!1===m.isFunctionParameter(ca))throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.CallNonFunction,null);return ca.call(za,{preparsed:!0,arguments:ja})}};
B.compileScript=function(ca,ja,wa){var za;void 0===wa&&(wa=!1);null===ja&&(ja={vars:{},customfunctions:{}});var Fa=null;ca.usesModules&&(Fa=new E.ArcadeModuleLoader(null,ca.loadedModules));Fa={isAsync:wa,globalScope:aa(ja.vars,wa?ea:fa,ja.customfunctions),moduleFactory:{},moduleFactoryMap:{},undeclaredGlobalsInFunctions:new Map,customfunctions:ja.customfunctions,libraryResolver:Fa,localScope:null,mangleMap:{},depthCounter:{depth:1},exports:{},console:M,lrucache:ja.lrucache,timeReference:null!==(za=
ja.timeReference)&&void 0!==za?za:null,interceptor:ja.interceptor,services:ja.services,symbols:{symbolCounter:0}};ca=G(Fa,ca);""===ca&&(ca="lc.voidOperation; ");0<Fa.undeclaredGlobalsInFunctions.size&&Fa.undeclaredGlobalsInFunctions.forEach(function(Na){throw new w.ArcadeCompilationError(ja,w.ExecutionErrorCodes.InvalidIdentifier,Na.node);});var O=Fa.moduleFactory,ya=Fa.moduleFactoryMap,Ha=Fa.exports,da={};for(Oa in Ha)da[Oa]=void 0!==Fa.mangleMap[Oa]?Fa.mangleMap[Oa]:Oa;var Oa={lc:m,lang:va,mangles:Fa.mangleMap,
postProcess:function(Na){Na instanceof m.ReturnResult&&(Na=Na.value);Na instanceof m.ImplicitResult&&(Na=Na.value);Na===m.voidOperation&&(Na=null);if(Na===m.breakResult)throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.IllegalResult,null);if(Na===m.continueResult)throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.IllegalResult,null);if(m.isFunctionParameter(Na))throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.IllegalResult,null);return Na},prepare:function(Na,Ca){var V,
oa=Na.spatialReference;if(null===oa||void 0===oa)oa=new D({wkid:102100});var pa=ia(Na.vars,Na.customfunctions,Ca,Na.timeReference);return{localStack:[],isAsync:Ca,moduleFactory:O,moduleFactoryMap:ya,mangleMap:this.mangles,moduleSingletons:{},exports:Ha,gdefs:{},exportmangle:da,spatialReference:oa,globalScope:pa,abortSignal:void 0===Na.abortSignal||null===Na.abortSignal?{aborted:!1}:Na.abortSignal,localScope:null,services:Na.services,console:Na.console?Na.console:M,lrucache:Na.lrucache,timeReference:null!==
(V=Na.timeReference)&&void 0!==V?V:null,interceptor:Na.interceptor,symbols:{symbolCounter:0},depthCounter:{depth:1}}}};return(new Function("context","spatialReference",wa?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+ca+
"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+ca+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(Oa)};B.enableAsyncSupport=function(){return new Promise(function(ca,ja){f(["./functions/geomasync"],function(wa){R([wa],"async");ca(!0)},
function(wa){ja(wa)})})};var Ga=function(ca){function ja(wa){var za=ca.call(this,null)||this;za.moduleContext=wa;return za}t(ja,ca);ja.prototype.hasGlobal=function(wa){void 0===this.moduleContext.exports[wa]&&(wa=wa.toLowerCase());return void 0!==this.moduleContext.exports[wa]?!0:!1};ja.prototype.setGlobal=function(wa,za){var Fa=this.moduleContext.globalScope;wa=wa.toLowerCase();if(m.isFunctionParameter(za))throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.AssignModuleFunction,null);Fa[this.moduleContext.exportmangle[wa]]=
za};ja.prototype.global=function(wa){var za=this.moduleContext.globalScope;wa=wa.toLowerCase();var Fa=za[this.moduleContext.exportmangle[wa]];if(void 0===Fa)throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.InvalidIdentifier,null);if(m.isFunctionParameter(Fa)&&!(Fa instanceof z.ScopeMarshalledFunction)){var O=new z.ScopeMarshalledFunction;O.fn=Fa;O.parameterEvaluator=A;O.context=this.moduleContext;return za[this.moduleContext.exportmangle[wa]]=O}return Fa};return ja}(C.ArcadeModule)})},
"esri/arcade/polyfill/tsSupport/assign":function(){define([],function(){return function(){return function(){return(Object.assign||function(f){for(var B,l=1,d=arguments.length;l<d;l++){B=arguments[l];for(var c in B)Object.prototype.hasOwnProperty.call(B,c)&&(f[c]=B[c])}return f}).apply(this,arguments)}}()})},"esri/arcade/polyfill/tsSupport/spreadarray":function(){define([],function(){return function(){return function(f,B,l){if(l||2===arguments.length)for(var d=0,c=B.length,u;d<c;d++)!u&&d in B||(u||
(u=Array.prototype.slice.call(B,0,d)),u[d]=B[d]);return f.concat(u||Array.prototype.slice.call(B))}}()})},"esri/arcade/polyfill/tsSupport/extends":function(){define([],function(){return function(){var f=function(B,l){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(d[u]=c[u])};return f(B,l)};return function(B,l){function d(){this.constructor=B}if("function"!==typeof l&&null!==l)throw new TypeError("Class extends value "+
String(l)+" is not a constructor or null");f(B,l);B.prototype=null===l?Object.create(l):(d.prototype=l.prototype,new d)}}()})},"esri/arcade/Dictionary":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./ArcadeDate ./executionError ./ImmutableArray ./languageUtils ../geometry/Geometry".split(" "),function(f,B,l,d,c,u,t,e,r){function m(h,q,n){void 0===n&&(n=!1);if(null===h||void 0===h)return null;if(e.isNumber(h))return e.toNumber(h);if(e.isBoolean(h))return e.toBoolean(h);
if(e.isString(h))return e.toString(h);if(e.isDate(h))return e.toDate(h,q);if(e.isArray(h)){for(var k=[],g=0;g<h.length;g++)k.push(m(h[g],q,n));return k}g=new a;g.immutable=!1;for(var b=0,x=Object.keys(h);b<x.length;b++){var v=x[b];k=h[v];void 0!==k&&g.setField(v,m(k,q,n))}g.immutable=n;return g}var a=function(){function h(q){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=q instanceof h?q.attributes:void 0===q?{}:null===q?{}:q}h.prototype.field=
function(q){var n=q.toLowerCase(),k=this.attributes[q];if(void 0!==k)return k;for(var g in this.attributes)if(g.toLowerCase()===n)return this.attributes[g];throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.FieldNotFound,null,{key:q});};h.prototype.setField=function(q,n){if(this.immutable)throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.Immutable,null);if(e.isFunctionParameter(n))throw new u.ArcadeExecutionError(null,u.ExecutionErrorCodes.NoFunctionInDictionary,null);var k=q.toLowerCase();
n instanceof Date&&(n=c.ArcadeDate.dateJSToArcadeDate(n));if(void 0===this.attributes[q])for(var g in this.attributes)if(g.toLowerCase()===k){this.attributes[g]=n;return}this.attributes[q]=n};h.prototype.hasField=function(q){var n=q.toLowerCase();if(void 0!==this.attributes[q])return!0;for(var k in this.attributes)if(k.toLowerCase()===n)return!0;return!1};h.prototype.keys=function(){var q=[],n;for(n in this.attributes)q.push(n);return q=q.sort()};h.prototype.castToText=function(q){void 0===q&&(q=
!1);var n="",k;for(k in this.attributes){""!==n&&(n+=",");var g=this.attributes[k];null==g?n+=JSON.stringify(k)+":null":e.isBoolean(g)||e.isNumber(g)||e.isString(g)?n+=JSON.stringify(k)+":"+JSON.stringify(g):g instanceof r?n+=JSON.stringify(k)+":"+e.toStringExplicit(g):g instanceof t?n+=JSON.stringify(k)+":"+e.toStringExplicit(g,null,q):g instanceof Array?n+=JSON.stringify(k)+":"+e.toStringExplicit(g,null,q):g instanceof c.ArcadeDate?n=q?n+(JSON.stringify(k)+":"+JSON.stringify(g.getTime())):n+(JSON.stringify(k)+
":"+g.stringify()):null!==g&&"object"===typeof g&&void 0!==g.castToText&&(n+=JSON.stringify(k)+":"+g.castToText(q))}return"{"+n+"}"};h.convertObjectToArcadeDictionary=function(q,n,k){void 0===k&&(k=!0);var g=new h;g.immutable=!1;for(var b in q){var x=q[b];void 0!==x&&g.setField(b.toString(),m(x,n))}g.immutable=k;return g};h.convertJsonToArcade=function(q,n,k){void 0===k&&(k=!1);return m(q,n,k)};h.prototype.castAsJson=function(q){void 0===q&&(q=null);var n={};for(g in this.attributes){var k=this.attributes[g];
if(void 0!==k){if(null===q||void 0===q?0:q.keyTranslate)var g=q.keyTranslate(g);n[g]=e.castAsJson(k,q)}}return n};h.prototype.castDictionaryValueAsJsonAsync=function(q,n,k,g,b){void 0===g&&(g=null);return l(this,void 0,void 0,function(){var x;return d(this,function(v){switch(v.label){case 0:return[4,e.castAsJsonAsync(k,g,b)];case 1:return x=v.sent(),q[n]=x,[2,x]}})})};h.prototype.castAsJsonAsync=function(q,n){void 0===q&&(q=null);void 0===n&&(n=null);return l(this,void 0,void 0,function(){var k,g,
b,x;return d(this,function(v){switch(v.label){case 0:k={};g=[];for(b in this.attributes){x=this.attributes[b];if(null===n||void 0===n?0:n.keyTranslate)b=n.keyTranslate(b);void 0!==x&&(e.isSimpleType(x)||x instanceof r||x instanceof c.ArcadeDate?k[b]=e.castAsJson(x,n):g.push(this.castDictionaryValueAsJsonAsync(k,b,x,q,n)))}return 0<g.length?[4,Promise.all(g)]:[3,2];case 1:v.sent(),v.label=2;case 2:return[2,k]}})})};return h}();return a})},"esri/arcade/ArcadeDate":function(){define(["require","exports",
"./polyfill/tsSupport/extends","./executionError","../libs/luxon/luxon"],function(f,B,l,d,c){function u(a){if(a instanceof c.Zone)return a;if("system"===a.toLowerCase())return"system";if("utc"===a.toLowerCase())return"utc";if("unknown"===a.toLowerCase())return e.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(a)){var h=c.FixedOffsetZone.parseSpecifier("UTC"+(a.startsWith("+")||a.startsWith("-")?"":"+")+a);if(h)return h}a=c.IANAZone.create(a);if(!a.isValid)throw new m(r.TimeZoneNotRecognised);
return a}var t;Object.defineProperty(B,"__esModule",{value:!0});B.createDateTimeZone=B.ArcadeDate=B.ArcadeDateError=B.ArcadeDateErrorMessages=B.ArcadeDateErrorCodes=B.UnknownTimeZone=void 0;var e=function(){function a(){}a.instance=new c.IANAZone("Etc/UTC");return a}();B.UnknownTimeZone=e;var r;(r=B.ArcadeDateErrorCodes||(B.ArcadeDateErrorCodes={})).TimeZoneNotRecognised="TimeZoneNotRecognised";B.ArcadeDateErrorMessages=(t={},t[r.TimeZoneNotRecognised]="Timezone identifier has not been recognised.",
t);var m=function(a){function h(q,n){q=a.call(this,d.doSubstitutions(B.ArcadeDateErrorMessages[q],n))||this;q.declaredRootClass="esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(q,h);return q}l(h,a);return h}(Error);B.ArcadeDateError=m;f=function(){function a(h){this._date=h;this.declaredRootClass="esri.arcade.arcadedate"}a.fromParts=function(h,q,n,k,g,b,x,v){void 0===h&&(h=0);void 0===q&&(q=1);void 0===n&&(n=1);void 0===k&&(k=0);void 0===g&&(g=0);void 0===b&&(b=
0);void 0===x&&(x=0);if(isNaN(h)||isNaN(q)||isNaN(n)||isNaN(k)||isNaN(g)||isNaN(b)||isNaN(x))return null;var y=0,D=c.DateTime.local(h,q).daysInMonth;1>n&&(y=n-1,n=1);n>D&&(y=n-D,n=D);D=0;12<q?(D=q-12,q=12):1>q&&(D=q-1,q=1);var E=0;59<g?(E=g-59,g=59):0>g&&(E=g,g=0);var C=0;59<b?(C=b-59,b=59):0>b&&(C=b,b=0);var z=0;999<x?(z=x-999,x=999):0>x&&(z=x,x=0);h=c.DateTime.fromObject({day:n,year:h,month:q,hour:k,minute:g,second:b,millisecond:x},{zone:u(v)});0!==D&&(h=h.plus({months:D}));0!==y&&(h=h.plus({days:y}));
0!==E&&(h=h.plus({minutes:E}));0!==C&&(h=h.plus({seconds:C}));0!==z&&(h=h.plus({milliseconds:z}));return new a(h)};Object.defineProperty(a,"systemTimeZoneCanonicalName",{get:function(){var h;return null!==(h=Intl.DateTimeFormat().resolvedOptions().timeZone)&&void 0!==h?h:"system"},enumerable:!1,configurable:!0});a.arcadeDateAndZoneToArcadeDate=function(h,q){var n=u(q);return h.isUnknownTimeZone||n===e.instance?a.fromParts(h.year,h.monthJS+1,h.day,h.hour,h.minute,h.second,h.millisecond,n):new a(h._date.setZone(q))};
a.dateJSToArcadeDate=function(h){return new a(c.DateTime.fromJSDate(h,{zone:"system"}))};a.dateJSAndZoneToArcadeDate=function(h,q){void 0===q&&(q="system");return new a(c.DateTime.fromJSDate(h,{zone:q}))};a.unknownEpochToArcadeDate=function(h){return new a(c.DateTime.fromMillis(h,{zone:e.instance}))};a.unknownDateJSToArcadeDate=function(h){return a.arcadeDateAndZoneToArcadeDate(a.dateJSToArcadeDate(h),e.instance)};a.epochToArcadeDate=function(h,q){void 0===q&&(q="system");return new a(c.DateTime.fromMillis(h,
{zone:q}))};a.dateTimeToArcadeDate=function(h){return new a(h)};a.prototype.changeTimeZone=function(h){h=u(h);return a.dateTimeToArcadeDate(this._date.setZone(h))};a.dateTimeAndZoneToArcadeDate=function(h,q){q=u(q);return h.zone===e.instance||q===e.instance?a.fromParts(h.year,h.month,h.day,h.hour,h.minute,h.second,h.millisecond,q):new a(h.setZone(q))};a.nowToArcadeDate=function(h){return new a(c.DateTime.fromJSDate(new Date,{zone:h}))};a.nowUTCToArcadeDate=function(){return new a(c.DateTime.utc())};
Object.defineProperty(a.prototype,"isSystem",{get:function(){return"system"===this.timeZone||this.timeZone===a.systemTimeZoneCanonicalName},enumerable:!1,configurable:!0});a.prototype.equals=function(h){return this.isSystem&&h.isSystem?this.toNumber()===h.toNumber():this.isUnknownTimeZone!==h.isUnknownTimeZone?!1:this._date.equals(h._date)};Object.defineProperty(a.prototype,"isUnknownTimeZone",{get:function(){return this._date.zone===e.instance},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,
"isValid",{get:function(){return this._date.isValid},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"hour",{get:function(){return this._date.hour},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"second",{get:function(){return this._date.second},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"day",{get:function(){return this._date.day},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"dayOfWeekISO",{get:function(){return this._date.weekday},
enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"dayOfWeekJS",{get:function(){var h=this._date.weekday;6<h&&(h=0);return h},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"millisecond",{get:function(){return this._date.millisecond},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"monthISO",{get:function(){return this._date.month},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"weekISO",{get:function(){return this._date.weekNumber},
enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"yearISO",{get:function(){return this._date.weekYear},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"monthJS",{get:function(){return this._date.month-1},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"year",{get:function(){return this._date.year},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"minute",{get:function(){return this._date.minute},enumerable:!1,configurable:!0});
Object.defineProperty(a.prototype,"zone",{get:function(){return this._date.zone},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"timeZoneOffset",{get:function(){return this.isUnknownTimeZone?0:this._date.offset},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"timeZone",{get:function(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";var h=this.zone;return"fixed"===h.type?0===h.fixed?"utc":h.formatOffset(0,"short"):h.name},
enumerable:!1,configurable:!0});a.prototype.stringify=function(){return JSON.stringify(this.toJSDate())};a.prototype.plus=function(h){return new a(this._date.plus(h))};a.prototype.diff=function(h,q){void 0===q&&(q="milliseconds");return this._date.diff(h._date,q)[q]};a.prototype.toISOString=function(h){return h?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})};a.prototype.toFormat=function(h,q){return this._date.toFormat(h,
q)};a.prototype.toJSDate=function(){return this._date.toJSDate()};a.prototype.toSQLString=function(){return"timestamp '"+this._date.toFormat("yyyy-LL-dd HH:mm:ss")+"'"};a.prototype.toDateTime=function(){return this._date};a.prototype.toNumber=function(){return this._date.toMillis()};a.prototype.getTime=function(){return this._date.toMillis()};a.prototype.toUTC=function(){return new a(this._date.toUTC())};a.prototype.toLocal=function(){return new a(this._date.toLocal())};a.prototype.toString=function(){return this.toISOString(!0)};
return a}();B.ArcadeDate=f;B.createDateTimeZone=u})},"esri/arcade/executionError":function(){define(["require","exports","./polyfill/tsSupport/assign","./polyfill/tsSupport/spreadarray","./polyfill/tsSupport/extends"],function(f,B,l,d,c){function u(a){var h,q;return a&&a.loc?"Line : "+(null===(h=a.loc.start)||void 0===h?void 0:h.line)+", "+(null===(q=a.loc.start)||void 0===q?void 0:q.column)+": ":""}function t(a,h){try{if(!h)return a;for(var q in h){var n=h[q];n||(n="");a=a.replace("{"+q+"}",h[q])}}catch(k){}return a}
var e,r;Object.defineProperty(B,"__esModule",{value:!0});B.parsingValidationMessage=B.ModuleError=B.ModuleErrorMessages=B.ModuleErrorCodes=B.ensureArcadeExecutionError=B.doSubstitutions=B.ArcadeUncompilableError=B.ArcadeCompilationError=B.ArcadeExecutionError=B.LocatableArcadeExecutionError=B.ErrorWithCause=B.ExecutionErrorMessages=B.ExecutionErrorCodes=void 0;(function(a){a.AsyncNotEnabled="AsyncNotEnabled";a.ModulesNotSupported="ModulesNotSupported";a.CircularModules="CircularModules";a.NeverReach=
"NeverReach";a.UnsupportedHashType="UnsupportedHashType";a.InvalidParameter="InvalidParameter";a.UnexpectedToken="UnexpectedToken";a.Unrecognised="Unrecognised";a.UnrecognisedType="UnrecognisedType";a.MaximumCallDepth="MaximumCallDepth";a.BooleanConditionRequired="BooleanConditionRequired";a.TypeNotAllowedInFeature="TypeNotAllowedInFeature";a.KeyMustBeString="KeyMustBeString";a.WrongNumberOfParameters="WrongNumberOfParameters";a.CallNonFunction="CallNonFunction";a.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";
a.NoFunctionInDictionary="NoFunctionInDictionary";a.NoFunctionInArray="NoFunctionInArray";a.AssignModuleFunction="AssignModuleFunction";a.LogicExpressionOrAnd="LogicExpressionOrAnd";a.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";a.FuncionNotFound="FunctionNotFound";a.InvalidMemberAccessKey="InvalidMemberAccessKey";a.UnsupportedUnaryOperator="UnsupportUnaryOperator";a.InvalidIdentifier="InvalidIdentifier";a.MemberOfNull="MemberOfNull";a.UnsupportedOperator="UnsupportedOperator";a.Cancelled=
"Cancelled";a.ModuleAccessorMustBeString="ModuleAccessorMustBeString";a.ModuleExportNotFound="ModuleExportNotFound";a.Immutable="Immutable";a.OutOfBounds="OutOfBounds";a.IllegalResult="IllegalResult";a.FieldNotFound="FieldNotFound";a.PortalRequired="PortalRequired";a.LogicError="LogicError";a.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";a.KeyAccessorMustBeString="KeyAccessorMustBeString";a.WrongSpatialReference="WrongSpatialReference"})(f=B.ExecutionErrorCodes||(B.ExecutionErrorCodes={}));
B.ExecutionErrorMessages=(e={},e[f.TypeNotAllowedInFeature]="Feature attributes only support dates, numbers, strings, guids.",e[f.LogicError]="Logic error - {reason}",e[f.NeverReach]="Encountered unreachable logic",e[f.AsyncNotEnabled]="Async Arcade must be enabled for this script",e[f.ModuleAccessorMustBeString]="Module accessor must be a string",e[f.ModuleExportNotFound]="Module has no export with provided identifier",e[f.ModulesNotSupported]="Current profile does not support modules",e[f.ArrayAccessorMustBeNumber]=
"Array accessor must be a number",e[f.FuncionNotFound]="Function not found",e[f.FieldNotFound]="Key not found - {key}",e[f.CircularModules]="Circular module dependencies are not allowed",e[f.Cancelled]="Execution cancelled",e[f.UnsupportedHashType]="Type not supported in hash function",e[f.IllegalResult]="Value is not a supported return type",e[f.PortalRequired]="Portal is required",e[f.InvalidParameter]="Invalid parameter",e[f.WrongNumberOfParameters]="Call with wrong number of parameters",e[f.Unrecognised]=
"Unrecognised code structure",e[f.UnrecognisedType]="Unrecognised type",e[f.WrongSpatialReference]="Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",e[f.BooleanConditionRequired]="Conditions must use booleans",e[f.NoFunctionInDictionary]="Dictionaries cannot contain functions.",e[f.NoFunctionInArray]="Arrays cannot contain functions.",e[f.NoFunctionInTemplateLiteral]="Template Literals do not expect functions by value.",e[f.KeyAccessorMustBeString]=
"Accessor must be a string",e[f.KeyMustBeString]="Object keys must be a string",e[f.Immutable]="Object is immutable",e[f.InvalidParameter]="Invalid parameter",e[f.UnexpectedToken]="Unexpected token",e[f.MemberOfNull]="Cannot access property of null object",e[f.MaximumCallDepth]="Exceeded maximum function depth",e[f.OutOfBounds]="Out of bounds",e[f.InvalidIdentifier]="Identifier not recognised",e[f.FuncionNotFound]="Function not found",e[f.CallNonFunction]="Expression is not a function",e[f.InvalidMemberAccessKey]=
"Cannot access value using a key of this type",e[f.AssignModuleFunction]="Cannot assign function to module variable",e[f.UnsupportedUnaryOperator]="Unsupported unary operator",e[f.UnsupportedOperator]="Unsupported operator",e[f.LogicalExpressionOnlyBoolean]="Logical expressions must be boolean",e[f.LogicExpressionOrAnd]="Logical expression can only be combined with || or \x26\x26",e);e=function(a){function h(){for(var q=[],n=0;n<arguments.length;n++)q[n]=arguments[n];return a.apply(this,q)||this}
c(h,a);return h}(Error);B.ErrorWithCause=e;var m=function(a){function h(q,n){q=a.call(this,u(n)+q.message,{cause:q})||this;q.loc=null;Error.captureStackTrace&&Error.captureStackTrace(q,h);n&&n.loc&&(q.loc=n.loc);return q}c(h,a);return h}(e);B.LocatableArcadeExecutionError=m;e=function(a){function h(q,n,k,g){q=a.call(this,"Execution error - "+u(k)+t(B.ExecutionErrorMessages[n],g))||this;q.loc=null;q.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(q,
h);k&&k.loc&&(q.loc=k.loc);return q}c(h,a);return h}(Error);B.ArcadeExecutionError=e;e=function(a){function h(q,n,k,g){q=a.call(this,"Compilation error - "+u(k)+t(B.ExecutionErrorMessages[n],g))||this;q.loc=null;q.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(q,h);k&&k.loc&&(q.loc=k.loc);return q}c(h,a);return h}(Error);B.ArcadeCompilationError=e;e=function(a){function h(){var q=a.call(this,"Uncompilable code structures")||this;q.declaredRootClass=
"esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(q,h);return q}c(h,a);return h}(Error);B.ArcadeUncompilableError=e;B.doSubstitutions=t;B.ensureArcadeExecutionError=function(a,h,q){return"esri.arcade.arcadeexecutionerror"===q.declaredRootClass||"esri.arcade.arcadecompilationerror"===q.declaredRootClass?null===q.loc&&h&&h.loc?new m(q,{cause:q}):q:h&&h.loc?new m(q,{cause:q}):q};(function(a){a.UnrecognisedUri="UnrecognisedUri";a.UnsupportedUriProtocol="UnsupportedUriProtocol"})(e=
B.ModuleErrorCodes||(B.ModuleErrorCodes={}));B.ModuleErrorMessages=(r={},r[e.UnrecognisedUri]="Unrecognised uri - {uri}",r[e.UnsupportedUriProtocol]="Unrecognised uri protocol",r);r=function(a){function h(q,n){q=a.call(this,t(B.ModuleErrorMessages[q],n))||this;q.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(q,h);return q}c(h,a);return h}(Error);B.ModuleError=r;B.parsingValidationMessage=function(a,h,q){return"Parsing error - "+u(a)+t(B.ExecutionErrorMessages[h],
q)}})},"esri/libs/luxon/luxon":function(){define(["exports"],function(f){function B(la,qa){for(var U=0;U<qa.length;U++){var ma=qa[U];ma.enumerable=ma.enumerable||!1;ma.configurable=!0;"value"in ma&&(ma.writable=!0);var ua=Object,Ia=ua.defineProperty;a:{var Qa=ma.key;if("object"===typeof Qa&&null!==Qa){var $a=Qa[Symbol.toPrimitive];if(void 0!==$a){Qa=$a.call(Qa,"string");if("object"!==typeof Qa)break a;throw new TypeError("@@toPrimitive must return a primitive value.");}Qa=String(Qa)}}Ia.call(ua,la,
"symbol"===typeof Qa?Qa:String(Qa),ma)}}function l(la,qa,U){qa&&B(la.prototype,qa);U&&B(la,U);Object.defineProperty(la,"prototype",{writable:!1});return la}function d(){d=Object.assign?Object.assign.bind():function(la){for(var qa=1;qa<arguments.length;qa++){var U=arguments[qa],ma;for(ma in U)Object.prototype.hasOwnProperty.call(U,ma)&&(la[ma]=U[ma])}return la};return d.apply(this,arguments)}function c(la,qa){la.prototype=Object.create(qa.prototype);la.prototype.constructor=la;t(la,qa)}function u(la){u=
Object.setPrototypeOf?Object.getPrototypeOf.bind():function(qa){return qa.__proto__||Object.getPrototypeOf(qa)};return u(la)}function t(la,qa){t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(U,ma){U.__proto__=ma;return U};return t(la,qa)}function e(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(la){return!1}}function r(la,
qa,U){r=e()?Reflect.construct.bind():function(ma,ua,Ia){var Qa=[null];Qa.push.apply(Qa,ua);ma=new (Function.bind.apply(ma,Qa));Ia&&t(ma,Ia.prototype);return ma};return r.apply(null,arguments)}function m(la){var qa="function"===typeof Map?new Map:void 0;m=function(U){function ma(){return r(U,arguments,u(this).constructor)}if(null===U||-1===Function.toString.call(U).indexOf("[native code]"))return U;if("function"!==typeof U)throw new TypeError("Super expression must either be null or a function");if("undefined"!==
typeof qa){if(qa.has(U))return qa.get(U);qa.set(U,ma)}ma.prototype=Object.create(U.prototype,{constructor:{value:ma,enumerable:!1,writable:!0,configurable:!0}});return t(ma,U)};return m(la)}function a(la,qa){if(null==la)return{};var U={},ma=Object.keys(la),ua;for(ua=0;ua<ma.length;ua++){var Ia=ma[ua];0<=qa.indexOf(Ia)||(U[Ia]=la[Ia])}return U}function h(la,qa){if(la){if("string"===typeof la)return q(la,qa);var U=Object.prototype.toString.call(la).slice(8,-1);"Object"===U&&la.constructor&&(U=la.constructor.name);
if("Map"===U||"Set"===U)return Array.from(la);if("Arguments"===U||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U))return q(la,qa)}}function q(la,qa){if(null==qa||qa>la.length)qa=la.length;for(var U=0,ma=Array(qa);U<qa;U++)ma[U]=la[U];return ma}function n(la,qa){var U="undefined"!==typeof Symbol&&la[Symbol.iterator]||la["@@iterator"];if(U)return(U=U.call(la)).next.bind(U);if(Array.isArray(la)||(U=h(la))||qa&&la&&"number"===typeof la.length){U&&(la=U);var ma=0;return function(){return ma>=la.length?
{done:!0}:{done:!1,value:la[ma++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function k(la,qa){void 0===qa&&(qa={});var U=JSON.stringify([la,qa]),ma=Jb[U];ma||(ma=new Intl.DateTimeFormat(la,qa),Jb[U]=ma);return ma}function g(la){for(var qa=[],U=1;12>=U;U++){var ma=Tb.utc(2016,U,1);qa.push(la(ma))}return qa}function b(la){for(var qa=[],U=1;7>=U;U++){var ma=Tb.utc(2016,11,13+U);qa.push(la(ma))}return qa}
function x(la,qa,U,ma,ua){la=la.listingMode(U);return"error"===la?null:"en"===la?ma(qa):ua(qa)}function v(la,qa){if(y(la)||null===la)return qa;if(la instanceof Bb)return la;if("string"===typeof la){var U=la.toLowerCase();return"default"===U?qa:"local"===U||"system"===U?fc.instance:"utc"===U||"gmt"===U?bc.utcInstance:bc.parseSpecifier(U)||rc.create(la)}return D(la)?bc.instance(la):"object"===typeof la&&la.offset&&"number"===typeof la.offset?la:new Tc(la)}function y(la){return"undefined"===typeof la}
function D(la){return"number"===typeof la}function E(la){return"number"===typeof la&&0===la%1}function C(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(la){return!1}}function z(la,qa,U){if(0!==la.length)return la.reduce(function(ma,ua){ua=[qa(ua),ua];return ma?U(ma[0],ua[0])===ma[0]?ma:ua:ua},null)[1]}function w(la,qa){return qa.reduce(function(U,ma){U[ma]=la[ma];return U},{})}function A(la,qa){return Object.prototype.hasOwnProperty.call(la,qa)}function G(la,qa,U){return E(la)&&
la>=qa&&la<=U}function F(la,qa){void 0===qa&&(qa=2);return 0>la?"-"+(""+-la).padStart(qa,"0"):(""+la).padStart(qa,"0")}function H(la){if(!y(la)&&null!==la&&""!==la)return parseInt(la,10)}function J(la){if(!y(la)&&null!==la&&""!==la)return parseFloat(la)}function K(la){if(!y(la)&&null!==la&&""!==la)return la=1E3*parseFloat("0."+la),Math.floor(la)}function Q(la,qa,U){void 0===U&&(U=!1);qa=Math.pow(10,qa);return(U?Math.trunc:Math.round)(la*qa)/qa}function P(la){return 0===la%4&&(0!==la%100||0===la%400)}
function I(la,qa){var U=qa-1;U=U-12*Math.floor(U/12)+1;return 2===U?P(la+(qa-U)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][U-1]}function N(la){var qa=Date.UTC(la.year,la.month-1,la.day,la.hour,la.minute,la.second,la.millisecond);100>la.year&&0<=la.year&&(qa=new Date(qa),qa.setUTCFullYear(qa.getUTCFullYear()-1900));return+qa}function L(la){var qa=la-1;qa=(qa+Math.floor(qa/4)-Math.floor(qa/100)+Math.floor(qa/400))%7;return 4===(la+Math.floor(la/4)-Math.floor(la/100)+Math.floor(la/400))%7||3===
qa?53:52}function W(la){return 99<la?la:la>Kb.twoDigitCutoffYear?1900+la:2E3+la}function Z(la,qa,U,ma){void 0===ma&&(ma=null);la=new Date(la);var ua={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};ma&&(ua.timeZone=ma);qa=d({timeZoneName:qa},ua);return(U=(new Intl.DateTimeFormat(U,qa)).formatToParts(la).find(function(Ia){return"timezonename"===Ia.type.toLowerCase()}))?U.value:null}function aa(la,qa){la=parseInt(la,10);Number.isNaN(la)&&(la=0);qa=parseInt(qa,
10)||0;qa=0>la||Object.is(la,-0)?-qa:qa;return 60*la+qa}function ia(la){var qa=Number(la);if("boolean"===typeof la||""===la||Number.isNaN(qa))throw new Nb("Invalid unit value "+la);return qa}function R(la,qa){var U={},ma;for(ma in la)if(A(la,ma)){var ua=la[ma];void 0!==ua&&null!==ua&&(U[qa(ma)]=ia(ua))}return U}function S(la,qa){var U=Math.trunc(Math.abs(la/60)),ma=Math.trunc(Math.abs(la%60));la=0<=la?"+":"-";switch(qa){case "short":return""+la+F(U,2)+":"+F(ma,2);case "narrow":return""+la+U+(0<ma?
":"+ma:"");case "techie":return""+la+F(U,2)+F(ma,2);default:throw new RangeError("Value format "+qa+" is out of range for property format");}}function M(la){return w(la,["hour","minute","second","millisecond"])}function X(la){switch(la){case "narrow":return[].concat(id);case "short":return[].concat(Qc);case "long":return[].concat(Rc);case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function fa(la){switch(la){case "narrow":return[].concat(jd);
case "short":return[].concat(ad);case "long":return[].concat(bd);case "numeric":return"1234567".split("");default:return null}}function ea(la){switch(la){case "narrow":return[].concat(kd);case "short":return[].concat(ld);case "long":return[].concat(Kc);default:return null}}function ha(la,qa,U,ma){void 0===U&&(U="always");void 0===ma&&(ma=!1);var ua={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute",
"min."],seconds:["second","sec."]},Ia=-1===["hours","minutes","seconds"].indexOf(la);if("auto"===U&&Ia)switch(U="days"===la,qa){case 1:return U?"tomorrow":"next "+ua[la][0];case -1:return U?"yesterday":"last "+ua[la][0];case 0:return U?"today":"this "+ua[la][0]}U=Object.is(qa,-0)||0>qa;qa=Math.abs(qa);Ia=1===qa;var Qa=ua[la];la=ma?Ia?Qa[1]:Qa[2]||Qa[1]:Ia?ua[la][0]:la;return U?qa+" "+la+" ago":"in "+qa+" "+la}function ra(la,qa){var U="";la=n(la);for(var ma;!(ma=la()).done;)ma=ma.value,U=ma.literal?
U+ma.val:U+qa(ma.val);return U}function Aa(){for(var la=arguments.length,qa=Array(la),U=0;U<la;U++)qa[U]=arguments[U];la=qa.reduce(function(ma,ua){return ma+ua.source},"");return RegExp("^"+la+"$")}function Ea(){for(var la=arguments.length,qa=Array(la),U=0;U<la;U++)qa[U]=arguments[U];return function(ma){return qa.reduce(function(ua,Ia){var Qa=ua[0],$a=ua[1];ua=Ia(ma,ua[2]);Ia=ua[1];var jb=ua[2];return[d({},Qa,ua[0]),Ia||$a,jb]},[{},null,1]).slice(0,2)}}function va(la){if(null==la)return[null,null];
for(var qa=arguments.length,U=Array(1<qa?qa-1:0),ma=1;ma<qa;ma++)U[ma-1]=arguments[ma];for(qa=0;qa<U.length;qa++){var ua=U[qa];ma=ua[1];if(ua=ua[0].exec(la))return ma(ua)}return[null,null]}function Ga(){for(var la=arguments.length,qa=Array(la),U=0;U<la;U++)qa[U]=arguments[U];return function(ma,ua){var Ia={},Qa;for(Qa=0;Qa<qa.length;Qa++)Ia[qa[Qa]]=H(ma[ua+Qa]);return[Ia,null,ua+Qa]}}function ca(la,qa,U){la=la[qa];return y(la)?U:H(la)}function ja(la,qa){return[{hours:ca(la,qa,0),minutes:ca(la,qa+1,
0),seconds:ca(la,qa+2,0),milliseconds:K(la[qa+3])},null,qa+4]}function wa(la,qa){var U=!la[qa]&&!la[qa+1];la=aa(la[qa+1],la[qa+2]);return[{},U?null:bc.instance(la),qa+3]}function za(la,qa){return[{},la[qa]?rc.create(la[qa]):null,qa+1]}function Fa(la){var qa=la[2],U=la[3],ma=la[4],ua=la[5],Ia=la[6],Qa=la[7],$a=la[8],jb="-"===la[0][0],pb=Qa&&"-"===Qa[0],xb=function(zb,ub){void 0===ub&&(ub=!1);return void 0!==zb&&(ub||zb&&jb)?-zb:zb};return[{years:xb(J(la[1])),months:xb(J(qa)),weeks:xb(J(U)),days:xb(J(ma)),
hours:xb(J(ua)),minutes:xb(J(Ia)),seconds:xb(J(Qa),"-0"===Qa),milliseconds:xb(K($a),pb)}]}function O(la,qa,U,ma,ua,Ia,Qa){qa={year:2===qa.length?W(H(qa)):H(qa),month:Qc.indexOf(U)+1,day:H(ma),hour:H(ua),minute:H(Ia)};Qa&&(qa.second=H(Qa));la&&(qa.weekday=3<la.length?bd.indexOf(la)+1:ad.indexOf(la)+1);return qa}function ya(la){var qa=la[8],U=la[9],ma=la[10],ua=la[11];la=O(la[1],la[4],la[3],la[2],la[5],la[6],la[7]);qa=qa?md[qa]:U?0:aa(ma,ua);return[la,new bc(qa)]}function Ha(la){return[O(la[1],la[4],
la[3],la[2],la[5],la[6],la[7]),bc.utcInstance]}function da(la){return[O(la[1],la[7],la[2],la[3],la[4],la[5],la[6]),bc.utcInstance]}function Oa(la,qa,U){void 0===U&&(U=!1);la={values:U?qa.values:d({},la.values,qa.values||{}),loc:la.loc.clone(qa.loc),conversionAccuracy:qa.conversionAccuracy||la.conversionAccuracy,matrix:qa.matrix||la.matrix};return new Ba(la)}function Na(la,qa,U,ma,ua){la=la[ua][U];var Ia=qa[U]/la;Ia=Math.sign(Ia)!==Math.sign(ma[ua])&&0!==ma[ua]&&1>=Math.abs(Ia)?0>Ia?Math.floor(Ia):
Math.ceil(Ia):Math.trunc(Ia);ma[ua]+=Ia;qa[U]-=Ia*la}function Ca(la,qa){sa.reduce(function(U,ma){if(y(qa[ma]))return U;U&&Na(la,qa,U,qa,ma);return ma},null)}function V(la,qa){var U=function(ma){return ma.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()};la=U(qa)-U(la);return Math.floor(Ba.fromMillis(la).as("days"))}function oa(la,qa,U){for(var ma={},ua=la,Ia,Qa,$a=0,jb=[["years",function(zb,ub){return ub.year-zb.year}],["quarters",function(zb,ub){return ub.quarter-zb.quarter+4*(ub.year-zb.year)}],
["months",function(zb,ub){return ub.month-zb.month+12*(ub.year-zb.year)}],["weeks",function(zb,ub){zb=V(zb,ub);return(zb-zb%7)/7}],["days",V]];$a<jb.length;$a++){var pb=jb[$a],xb=pb[0];pb=pb[1];0<=U.indexOf(xb)&&(Ia=xb,ma[xb]=pb(la,qa),Qa=ua.plus(ma),Qa>qa?(ma[xb]--,la=ua.plus(ma)):la=Qa)}return[la,ma,Qa,Ia]}function pa(la,qa,U,ma){var ua=oa(la,qa,U);la=ua[0];var Ia=ua[1],Qa=ua[2],$a=ua[3];ua=qa-la;U=U.filter(function(xb){return 0<=["hours","minutes","seconds","milliseconds"].indexOf(xb)});if(0===
U.length){if(Qa<qa){var jb;Qa=la.plus((jb={},jb[$a]=1,jb))}Qa!==la&&(Ia[$a]=(Ia[$a]||0)+ua/(Qa-la))}qa=Ba.fromObject(Ia,ma);if(0<U.length){var pb;return(pb=Ba.fromMillis(ua,ma)).shiftTo.apply(pb,U).plus(qa)}return qa}function Y(la,qa){la=la.numberingSystem;void 0===qa&&(qa="");return new RegExp(""+ib[la||"latn"]+qa)}function ka(la,qa){void 0===qa&&(qa=function(U){return U});return{regex:la,deser:function(U){var ma=qa;U=U[0];var ua=parseInt(U,10);if(isNaN(ua)){ua="";for(var Ia=0;Ia<U.length;Ia++){var Qa=
U.charCodeAt(Ia);if(-1!==U[Ia].search(ib.hanidec))ua+=vb.indexOf(U[Ia]);else for(pb in rb){var $a=rb[pb],jb=$a[0];$a=$a[1];Qa>=jb&&Qa<=$a&&(ua+=Qa-jb)}}var pb=parseInt(ua,10)}else pb=ua;return ma(pb)}}}function ta(la){return la.replace(/\./g,"\\.?").replace(Gb,sb)}function xa(la,qa){return null===la?null:{regex:RegExp(la.map(ta).join("|")),deser:function(U){var ma=U[0];return la.findIndex(function(ua){return ma.replace(/\./g,"").replace(Gb," ").toLowerCase()===ua.replace(/\./g,"").replace(Gb," ").toLowerCase()})+
qa}}}function Da(la,qa){return{regex:la,deser:function(U){return aa(U[1],U[2])},groups:qa}}function Ja(la){return{regex:la,deser:function(qa){return qa[0]}}}function La(la,qa){var U=Y(qa),ma=Y(qa,"{2}"),ua=Y(qa,"{3}"),Ia=Y(qa,"{4}"),Qa=Y(qa,"{6}"),$a=Y(qa,"{1,2}"),jb=Y(qa,"{1,3}"),pb=Y(qa,"{1,6}"),xb=Y(qa,"{1,9}"),zb=Y(qa,"{2,4}"),ub=Y(qa,"{4,6}"),Ob=function(Uc){return{regex:RegExp(Uc.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:function(Kd){return Kd[0]},literal:!0}},oc=function(Uc){if(la.literal)return Ob(Uc);
switch(Uc.val){case "G":return xa(qa.eras("short",!1),0);case "GG":return xa(qa.eras("long",!1),0);case "y":return ka(pb);case "yy":return ka(zb,W);case "yyyy":return ka(Ia);case "yyyyy":return ka(ub);case "yyyyyy":return ka(Qa);case "M":return ka($a);case "MM":return ka(ma);case "MMM":return xa(qa.months("short",!0,!1),1);case "MMMM":return xa(qa.months("long",!0,!1),1);case "L":return ka($a);case "LL":return ka(ma);case "LLL":return xa(qa.months("short",!1,!1),1);case "LLLL":return xa(qa.months("long",
!1,!1),1);case "d":return ka($a);case "dd":return ka(ma);case "o":return ka(jb);case "ooo":return ka(ua);case "HH":return ka(ma);case "H":return ka($a);case "hh":return ka(ma);case "h":return ka($a);case "mm":return ka(ma);case "m":return ka($a);case "q":return ka($a);case "qq":return ka(ma);case "s":return ka($a);case "ss":return ka(ma);case "S":return ka(jb);case "SSS":return ka(ua);case "u":return Ja(xb);case "uu":return Ja($a);case "uuu":return ka(U);case "a":return xa(qa.meridiems(),0);case "kkkk":return ka(Ia);
case "kk":return ka(zb,W);case "W":return ka($a);case "WW":return ka(ma);case "E":case "c":return ka(U);case "EEE":return xa(qa.weekdays("short",!1,!1),1);case "EEEE":return xa(qa.weekdays("long",!1,!1),1);case "ccc":return xa(qa.weekdays("short",!0,!1),1);case "cccc":return xa(qa.weekdays("long",!0,!1),1);case "Z":case "ZZ":return Da(new RegExp("([+-]"+$a.source+")(?::("+ma.source+"))?"),2);case "ZZZ":return Da(new RegExp("([+-]"+$a.source+")("+ma.source+")?"),2);case "z":return Ja(/[a-z_+-/]{1,256}?/i);
default:return Ob(Uc)}}(la)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};oc.token=la;return oc}function Ya(la){return["^"+la.map(function(qa){return qa.regex}).reduce(function(qa,U){return qa+"("+U.source+")"},"")+"$",la]}function Ua(la,qa,U){if(la=la.match(qa)){qa={};var ma=1,ua;for(ua in U)if(A(U,ua)){var Ia=U[ua],Qa=Ia.groups?Ia.groups+1:1;!Ia.literal&&Ia.token&&(qa[Ia.token.val[0]]=Ia.deser(la.slice(ma,ma+Qa)));ma+=Qa}return[la,qa]}return[la,{}]}function Ta(la){var qa=
function(ua){switch(ua){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}},U=null;y(la.z)||(U=rc.create(la.z));if(!y(la.Z)){U||(U=new bc(la.Z));var ma=la.Z}y(la.q)||(la.M=3*(la.q-1)+1);y(la.h)||(12>la.h&&1===la.a?
la.h+=12:12===la.h&&0===la.a&&(la.h=0));0===la.G&&la.y&&(la.y=-la.y);y(la.u)||(la.S=K(la.u));return[Object.keys(la).reduce(function(ua,Ia){var Qa=qa(Ia);Qa&&(ua[Qa]=la[Ia]);return ua},{}),U,ma]}function ab(la,qa){var U;return(U=Array.prototype).concat.apply(U,la.map(function(ma){if(!ma.literal){var ua=gc.macroTokenToFormatOpts(ma.val);ua=kb(ua,qa);ma=null==ua||ua.includes(void 0)?ma:ua}return ma}))}function fb(la,qa,U){U=ab(gc.parseFormat(U),la);var ma=U.map(function(pb){return La(pb,la)}),ua=ma.find(function(pb){return pb.invalidReason});
if(ua)return{input:qa,tokens:U,invalidReason:ua.invalidReason};ua=Ya(ma);ma=RegExp(ua[0],"i");var Ia=Ua(qa,ma,ua[1]);ua=Ia[0];var Qa=(Ia=Ia[1])?Ta(Ia):[null,null,void 0],$a=Qa[0],jb=Qa[1];Qa=Qa[2];if(A(Ia,"a")&&A(Ia,"H"))throw new Xb("Can't include meridiem when specifying 24-hour format");return{input:qa,tokens:U,regex:ma,rawMatches:ua,matches:Ia,result:$a,zone:jb,specificOffset:Qa}}function kb(la,qa){if(!la)return null;qa=gc.create(qa,la);var U=qa.formatDateTimeParts;Vc||(Vc=Tb.fromMillis(1555555555555));
return U.call(qa,Vc).map(function(ma){var ua=ma.type;ma=ma.value;"literal"===ua?ua={literal:!0,val:ma}:(ma=la[ua],ua=Lc[ua],"object"===typeof ua&&(ua=ua[ma]),ua=ua?{literal:!1,val:ua}:void 0);return ua})}function qb(la,qa){return new hc("unit out of range","you specified "+qa+" (of type "+typeof qa+") as a "+la+", which is invalid")}function ob(la,qa,U){qa=new Date(Date.UTC(la,qa-1,U));100>la&&0<=la&&qa.setUTCFullYear(qa.getUTCFullYear()-1900);la=qa.getUTCDay();return 0===la?7:la}function wb(la,qa){la=
P(la)?nd:od;var U=la.findIndex(function(ma){return ma<qa});return{month:U+1,day:qa-la[U]}}function Fb(la){var qa=la.year,U=la.month,ma=la.day;var ua=ma+(P(qa)?nd:od)[U-1];U=ob(qa,U,ma);ua=Math.floor((ua-U+10)/7);1>ua?(--qa,ua=L(qa)):ua>L(qa)&&(qa+=1,ua=1);return d({weekYear:qa,weekNumber:ua,weekday:U},M(la))}function yb(la){var qa=la.weekYear,U=la.weekNumber,ma=la.weekday,ua=ob(qa,1,4),Ia=P(qa)?366:365;U=7*U+ma-ua-3;1>U?(Ia=qa-1,U+=P(Ia)?366:365):U>Ia?(Ia=qa+1,U-=P(qa)?366:365):Ia=qa;qa=wb(Ia,U);
return d({year:Ia,month:qa.month,day:qa.day},M(la))}function lb(la){var qa=la.year;var U=la.month;U=la.day+(P(qa)?nd:od)[U-1];return d({year:qa,ordinal:U},M(la))}function Db(la){var qa=la.year,U=wb(qa,la.ordinal);return d({year:qa,month:U.month,day:U.day},M(la))}function Sb(la){var qa=E(la.year),U=G(la.month,1,12),ma=G(la.day,1,I(la.year,la.month));return qa?U?ma?!1:qb("day",la.day):qb("month",la.month):qb("year",la.year)}function Eb(la){var qa=la.hour,U=la.minute,ma=la.second;la=la.millisecond;var ua=
G(qa,0,23)||24===qa&&0===U&&0===ma&&0===la,Ia=G(U,0,59),Qa=G(ma,0,59),$a=G(la,0,999);return ua?Ia?Qa?$a?!1:qb("millisecond",la):qb("second",ma):qb("minute",U):qb("hour",qa)}function Hb(la){return new hc("unsupported zone",'the zone "'+la.name+'" is not supported')}function Pb(la){null===la.weekData&&(la.weekData=Fb(la.c));return la.weekData}function Zb(la,qa){la={ts:la.ts,zone:la.zone,c:la.c,o:la.o,loc:la.loc,invalid:la.invalid};return new Tb(d({},la,qa,{old:la}))}function Qb(la,qa,U){var ma=la-6E4*
qa,ua=U.offset(ma);if(qa===ua)return[ma,qa];ma-=6E4*(ua-qa);qa=U.offset(ma);return ua===qa?[ma,ua]:[la-6E4*Math.min(ua,qa),Math.max(ua,qa)]}function cc(la,qa){la=new Date(la+6E4*qa);return{year:la.getUTCFullYear(),month:la.getUTCMonth()+1,day:la.getUTCDate(),hour:la.getUTCHours(),minute:la.getUTCMinutes(),second:la.getUTCSeconds(),millisecond:la.getUTCMilliseconds()}}function Ub(la,qa,U){return Qb(N(la),qa,U)}function wc(la,qa){var U=la.o,ma=la.c.year+Math.trunc(qa.years),ua=la.c.month+Math.trunc(qa.months)+
3*Math.trunc(qa.quarters);ma=d({},la.c,{year:ma,month:ua,day:Math.min(la.c.day,I(ma,ua))+Math.trunc(qa.days)+7*Math.trunc(qa.weeks)});qa=Ba.fromObject({years:qa.years-Math.trunc(qa.years),quarters:qa.quarters-Math.trunc(qa.quarters),months:qa.months-Math.trunc(qa.months),weeks:qa.weeks-Math.trunc(qa.weeks),days:qa.days-Math.trunc(qa.days),hours:qa.hours,minutes:qa.minutes,seconds:qa.seconds,milliseconds:qa.milliseconds}).as("milliseconds");ma=N(ma);ma=Qb(ma,U,la.zone);U=ma[0];ma=ma[1];0!==qa&&(U+=
qa,ma=la.zone.offset(U));return{ts:U,o:ma}}function ic(la,qa,U,ma,ua,Ia){var Qa=U.setZone,$a=U.zone;return la&&0!==Object.keys(la).length?(la=Tb.fromObject(la,d({},U,{zone:qa||$a,specificOffset:Ia})),Qa?la:la.setZone($a)):Tb.invalid(new hc("unparsable",'the input "'+ua+"\" can't be parsed as "+ma))}function jc(la,qa,U){void 0===U&&(U=!0);return la.isValid?gc.create(Lb.create("en-US"),{allowZ:U,forceSimple:!0}).formatDateTimeFromString(la,qa):null}function xc(la,qa){var U=9999<la.c.year||0>la.c.year,
ma="";U&&0<=la.c.year&&(ma+="+");ma+=F(la.c.year,U?6:4);qa?(ma=ma+"-"+F(la.c.month),ma=ma+"-"+F(la.c.day)):(ma+=F(la.c.month),ma+=F(la.c.day));return ma}function yc(la,qa,U,ma,ua,Ia){var Qa=F(la.c.hour);qa?(Qa=Qa+":"+F(la.c.minute),0===la.c.second&&U||(Qa+=":")):Qa+=F(la.c.minute);0===la.c.second&&U||(Qa+=F(la.c.second),0===la.c.millisecond&&ma||(Qa=Qa+"."+F(la.c.millisecond,3)));ua&&(la.isOffsetFixed&&0===la.offset&&!Ia?Qa+="Z":0>la.o?(Qa=Qa+"-"+F(Math.trunc(-la.o/60)),Qa=Qa+":"+F(Math.trunc(-la.o%
60))):(Qa=Qa+"+"+F(Math.trunc(la.o/60)),Qa=Qa+":"+F(Math.trunc(la.o%60))));Ia&&(Qa+="["+la.zone.ianaName+"]");return Qa}function Dc(la){var qa={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",
weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[la.toLowerCase()];if(!qa)throw new Mc(la);return qa}function Nc(la,qa){var U=v(qa.zone,Kb.defaultZone);qa=Lb.fromObject(qa);var ma=Kb.now();if(y(la.year))la=ma;else{var ua=0;for(var Ia=Id;ua<Ia.length;ua++){var Qa=Ia[ua];y(la[Qa])&&(la[Qa]=Jd[Qa])}if(ua=Sb(la)||Eb(la))return Tb.invalid(ua);ma=U.offset(ma);ma=Ub(la,ma,U);la=ma[0];ua=ma[1]}return new Tb({ts:la,zone:U,loc:qa,o:ua})}function Ec(la,qa,U){var ma=y(U.round)?!0:U.round,ua=function(pb,
xb){pb=Q(pb,ma||U.calendary?0:2,!0);return qa.loc.clone(U).relFormatter(U).format(pb,xb)},Ia=function(pb){return U.calendary?qa.hasSame(la,pb)?0:qa.startOf(pb).diff(la.startOf(pb),pb).get(pb):qa.diff(la,pb).get(pb)};if(U.unit)return ua(Ia(U.unit),U.unit);for(var Qa=n(U.units),$a;!($a=Qa()).done;){$a=$a.value;var jb=Ia($a);if(1<=Math.abs(jb))return ua(jb,$a)}return ua(la>qa?-0:0,U.units[U.units.length-1])}function zc(la){var qa={};0<la.length&&"object"===typeof la[la.length-1]?(qa=la[la.length-1],
la=Array.from(la).slice(0,la.length-1)):la=Array.from(la);return[qa,la]}function sc(la){if(Tb.isDateTime(la))return la;if(la&&la.valueOf&&D(la.valueOf()))return Tb.fromJSDate(la);if(la&&"object"===typeof la)return Tb.fromObject(la);throw new Nb("Unknown datetime argument: "+la+", of type "+typeof la);}var Yb=function(la){function qa(){return la.apply(this,arguments)||this}c(qa,la);return qa}(m(Error)),Oc=function(la){function qa(U){return la.call(this,"Invalid DateTime: "+U.toMessage())||this}c(qa,
la);return qa}(Yb),dc=function(la){function qa(U){return la.call(this,"Invalid Interval: "+U.toMessage())||this}c(qa,la);return qa}(Yb),ec=function(la){function qa(U){return la.call(this,"Invalid Duration: "+U.toMessage())||this}c(qa,la);return qa}(Yb),Xb=function(la){function qa(){return la.apply(this,arguments)||this}c(qa,la);return qa}(Yb),Mc=function(la){function qa(U){return la.call(this,"Invalid unit "+U)||this}c(qa,la);return qa}(Yb),Nb=function(la){function qa(){return la.apply(this,arguments)||
this}c(qa,la);return qa}(Yb),$b=function(la){function qa(){return la.call(this,"Zone is an abstract class")||this}c(qa,la);return qa}(Yb),Fc={year:"numeric",month:"numeric",day:"numeric"},Mb={year:"numeric",month:"short",day:"numeric"},na={year:"numeric",month:"short",day:"numeric",weekday:"short"},Ra={year:"numeric",month:"long",day:"numeric"},Sa={year:"numeric",month:"long",day:"numeric",weekday:"long"},Ka={hour:"numeric",minute:"numeric"},Ma={hour:"numeric",minute:"numeric",second:"numeric"},Xa=
{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Wa={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},Pa={hour:"numeric",minute:"numeric",hourCycle:"h23"},Za={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},cb={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},eb={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},nb={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",
minute:"numeric"},db={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},mb={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},gb={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},tb={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},Vb={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},Ac={year:"numeric",
month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Cc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Bc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},Bb=function(){function la(){}var qa=la.prototype;qa.offsetName=function(U,ma){throw new $b;};qa.formatOffset=function(U,ma){throw new $b;};qa.offset=function(U){throw new $b;
};qa.equals=function(U){throw new $b;};l(la,[{key:"type",get:function(){throw new $b;}},{key:"name",get:function(){throw new $b;}},{key:"ianaName",get:function(){return this.name}},{key:"isUniversal",get:function(){throw new $b;}},{key:"isValid",get:function(){throw new $b;}}]);return la}(),kc=null,fc=function(la){function qa(){return la.apply(this,arguments)||this}c(qa,la);var U=qa.prototype;U.offsetName=function(ma,ua){return Z(ma,ua.format,ua.locale)};U.formatOffset=function(ma,ua){return S(this.offset(ma),
ua)};U.offset=function(ma){return-(new Date(ma)).getTimezoneOffset()};U.equals=function(ma){return"system"===ma.type};l(qa,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){null===kc&&(kc=new qa);return kc}}]);return qa}(Bb),lc={},Pc={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6},Gc={},rc=function(la){function qa(ma){var ua=
la.call(this)||this;ua.zoneName=ma;ua.valid=qa.isValidZone(ma);return ua}c(qa,la);qa.create=function(ma){Gc[ma]||(Gc[ma]=new qa(ma));return Gc[ma]};qa.resetCache=function(){Gc={};lc={}};qa.isValidSpecifier=function(ma){return this.isValidZone(ma)};qa.isValidZone=function(ma){if(!ma)return!1;try{return(new Intl.DateTimeFormat("en-US",{timeZone:ma})).format(),!0}catch(ua){return!1}};var U=qa.prototype;U.offsetName=function(ma,ua){return Z(ma,ua.format,ua.locale,this.name)};U.formatOffset=function(ma,
ua){return S(this.offset(ma),ua)};U.offset=function(ma){ma=new Date(ma);if(isNaN(ma))return NaN;var ua=this.name;lc[ua]||(lc[ua]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:ua,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}));ua=lc[ua];if(ua.formatToParts){ua=ua.formatToParts(ma);for(var Ia=[],Qa=0;Qa<ua.length;Qa++){var $a=ua[Qa],jb=$a.type;$a=$a.value;var pb=Pc[jb];"era"===jb?Ia[pb]=$a:y(pb)||(Ia[pb]=parseInt($a,10))}ua=Ia}else ua=
ua.format(ma).replace(/\u200E/g,""),ua=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(ua),ua=[ua[3],ua[1],ua[2],ua[4],ua[5],ua[6],ua[7]];Ia=ua[0];Qa=ua[1];jb=ua[2];$a=ua[4];pb=ua[5];var xb=ua[6];"BC"===ua[3]&&(Ia=-Math.abs(Ia)+1);ua=N({year:Ia,month:Qa,day:jb,hour:24===$a?0:$a,minute:pb,second:xb,millisecond:0});ma=+ma;Ia=ma%1E3;return(ua-(ma-(0<=Ia?Ia:1E3+Ia)))/6E4};U.equals=function(ma){return"iana"===ma.type&&ma.name===this.name};l(qa,[{key:"type",get:function(){return"iana"}},{key:"name",
get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]);return qa}(Bb),Wb=["base"],tc=["padTo","floor"],mc={},Jb={},ac={},nc={},pc=null,pd=function(){function la(qa,U,ma){this.padTo=ma.padTo||0;this.floor=ma.floor||!1;ma.padTo;ma.floor;var ua=a(ma,tc);if(!U||0<Object.keys(ua).length)U=d({useGrouping:!1},ma),0<ma.padTo&&(U.minimumIntegerDigits=ma.padTo),ma=U,void 0===ma&&(ma={}),U=JSON.stringify([qa,ma]),ua=ac[U],ua||(ua=
new Intl.NumberFormat(qa,ma),ac[U]=ua),this.inf=ua}la.prototype.format=function(qa){if(this.inf)return this.inf.format(this.floor?Math.floor(qa):qa);qa=this.floor?Math.floor(qa):Q(qa,3);return F(qa,this.padTo)};return la}(),qd=function(){function la(U,ma,ua){this.opts=ua;var Ia=void 0;U.zone.isUniversal?(Ia=U.offset/60*-1,Ia=0<=Ia?"Etc/GMT+"+Ia:"Etc/GMT"+Ia,0!==U.offset&&rc.create(Ia).valid?this.dt=U:(Ia="UTC",this.dt=ua.timeZoneName?U:0===U.offset?U:Tb.fromMillis(U.ts+6E4*U.offset))):"system"===
U.zone.type?this.dt=U:(this.dt=U,Ia=U.zone.name);U=d({},this.opts);U.timeZone=U.timeZone||Ia;this.dtf=k(ma,U)}var qa=la.prototype;qa.format=function(){return this.dtf.format(this.dt.toJSDate())};qa.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())};qa.resolvedOptions=function(){return this.dtf.resolvedOptions()};return la}(),Rb=function(){function la(U,ma,ua){this.opts=d({style:"long"},ua);if(!ma&&C()){ma=ua;void 0===ma&&(ma={});ua=ma;ua.base;ua=a(ua,Wb);ua=JSON.stringify([U,
ua]);var Ia=nc[ua];Ia||(Ia=new Intl.RelativeTimeFormat(U,ma),nc[ua]=Ia);this.rtf=Ia}}var qa=la.prototype;qa.format=function(U,ma){return this.rtf?this.rtf.format(U,ma):ha(ma,U,this.opts.numeric,"long"!==this.opts.style)};qa.formatToParts=function(U,ma){return this.rtf?this.rtf.formatToParts(U,ma):[]};return la}(),Lb=function(){function la(U,ma,ua,Ia){var Qa=U.indexOf("-x-");-1!==Qa&&(U=U.substring(0,Qa));Qa=U.indexOf("-u-");if(-1===Qa)var $a=[U];else{try{$a=k(U).resolvedOptions();var jb=U}catch(pb){jb=
U.substring(0,Qa),$a=k(jb).resolvedOptions()}$a=[jb,$a.numberingSystem,$a.calendar]}jb=$a[1];U=$a[2];this.locale=$a[0];this.numberingSystem=ma||jb||null;this.outputCalendar=ua||U||null;ma=this.locale;ua=this.numberingSystem;if(($a=this.outputCalendar)||ua)ma.includes("-u-")||(ma+="-u"),$a&&(ma+="-ca-"+$a),ua&&(ma+="-nu-"+ua);this.intl=ma;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=Ia;this.fastNumbersCached=
null}la.fromOpts=function(U){return la.create(U.locale,U.numberingSystem,U.outputCalendar,U.defaultToEN)};la.create=function(U,ma,ua,Ia){void 0===Ia&&(Ia=!1);U=U||Kb.defaultLocale;var Qa;(Qa=U)||(Ia?Ia="en-US":(pc||(pc=(new Intl.DateTimeFormat).resolvedOptions().locale),Ia=pc),Qa=Ia);return new la(Qa,ma||Kb.defaultNumberingSystem,ua||Kb.defaultOutputCalendar,U)};la.resetCache=function(){pc=null;Jb={};ac={};nc={}};la.fromObject=function(U){U=void 0===U?{}:U;return la.create(U.locale,U.numberingSystem,
U.outputCalendar)};var qa=la.prototype;qa.listingMode=function(){var U=this.isEnglish(),ma=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return U&&ma?"en":"intl"};qa.clone=function(U){return U&&0!==Object.getOwnPropertyNames(U).length?la.create(U.locale||this.specifiedLocale,U.numberingSystem||this.numberingSystem,U.outputCalendar||this.outputCalendar,U.defaultToEN||!1):this};qa.redefaultToEN=function(U){void 0===U&&(U=
{});return this.clone(d({},U,{defaultToEN:!0}))};qa.redefaultToSystem=function(U){void 0===U&&(U={});return this.clone(d({},U,{defaultToEN:!1}))};qa.months=function(U,ma,ua){var Ia=this;void 0===ma&&(ma=!1);void 0===ua&&(ua=!0);return x(this,U,ua,X,function(){var Qa=ma?{month:U,day:"numeric"}:{month:U},$a=ma?"format":"standalone";Ia.monthsCache[$a][U]||(Ia.monthsCache[$a][U]=g(function(jb){return Ia.extract(jb,Qa,"month")}));return Ia.monthsCache[$a][U]})};qa.weekdays=function(U,ma,ua){var Ia=this;
void 0===ma&&(ma=!1);void 0===ua&&(ua=!0);return x(this,U,ua,fa,function(){var Qa=ma?{weekday:U,year:"numeric",month:"long",day:"numeric"}:{weekday:U},$a=ma?"format":"standalone";Ia.weekdaysCache[$a][U]||(Ia.weekdaysCache[$a][U]=b(function(jb){return Ia.extract(jb,Qa,"weekday")}));return Ia.weekdaysCache[$a][U]})};qa.meridiems=function(U){var ma=this;void 0===U&&(U=!0);return x(this,void 0,U,function(){return cd},function(){if(!ma.meridiemCache){var ua={hour:"numeric",hourCycle:"h12"};ma.meridiemCache=
[Tb.utc(2016,11,13,9),Tb.utc(2016,11,13,19)].map(function(Ia){return ma.extract(Ia,ua,"dayperiod")})}return ma.meridiemCache})};qa.eras=function(U,ma){var ua=this;void 0===ma&&(ma=!0);return x(this,U,ma,ea,function(){var Ia={era:U};ua.eraCache[U]||(ua.eraCache[U]=[Tb.utc(-40,1,1),Tb.utc(2017,1,1)].map(function(Qa){return ua.extract(Qa,Ia,"era")}));return ua.eraCache[U]})};qa.extract=function(U,ma,ua){return(U=this.dtFormatter(U,ma).formatToParts().find(function(Ia){return Ia.type.toLowerCase()===
ua}))?U.value:null};qa.numberFormatter=function(U){void 0===U&&(U={});return new pd(this.intl,U.forceSimple||this.fastNumbers,U)};qa.dtFormatter=function(U,ma){void 0===ma&&(ma={});return new qd(U,this.intl,ma)};qa.relFormatter=function(U){void 0===U&&(U={});return new Rb(this.intl,this.isEnglish(),U)};qa.listFormatter=function(U){void 0===U&&(U={});var ma=this.intl;void 0===U&&(U={});var ua=JSON.stringify([ma,U]),Ia=mc[ua];Ia||(Ia=new Intl.ListFormat(ma,U),mc[ua]=Ia);return Ia};qa.isEnglish=function(){return"en"===
this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")};qa.equals=function(U){return this.locale===U.locale&&this.numberingSystem===U.numberingSystem&&this.outputCalendar===U.outputCalendar};l(la,[{key:"fastNumbers",get:function(){if(null==this.fastNumbersCached){var U=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;
this.fastNumbersCached=U}return this.fastNumbersCached}}]);return la}(),Sc=null,bc=function(la){function qa(ma){var ua=la.call(this)||this;ua.fixed=ma;return ua}c(qa,la);qa.instance=function(ma){return 0===ma?qa.utcInstance:new qa(ma)};qa.parseSpecifier=function(ma){return ma&&(ma=ma.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new qa(aa(ma[1],ma[2])):null};var U=qa.prototype;U.offsetName=function(){return this.name};U.formatOffset=function(ma,ua){return S(this.fixed,ua)};U.offset=function(){return this.fixed};
U.equals=function(ma){return"fixed"===ma.type&&ma.fixed===this.fixed};l(qa,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+S(this.fixed,"narrow")}},{key:"ianaName",get:function(){return 0===this.fixed?"Etc/UTC":"Etc/GMT"+S(-this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){null===Sc&&(Sc=new qa(0));return Sc}}]);return qa}(Bb),Tc=function(la){function qa(ma){var ua=
la.call(this)||this;ua.zoneName=ma;return ua}c(qa,la);var U=qa.prototype;U.offsetName=function(){return null};U.formatOffset=function(){return""};U.offset=function(){return NaN};U.equals=function(){return!1};l(qa,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]);return qa}(Bb),dd=function(){return Date.now()},Wc="system",Ib=null,Hc=null,Ic=null,ed=60,fd,Kb=function(){function la(){}
la.resetCaches=function(){Lb.resetCache();rc.resetCache()};l(la,null,[{key:"now",get:function(){return dd},set:function(qa){dd=qa}},{key:"defaultZone",get:function(){return v(Wc,fc.instance)},set:function(qa){Wc=qa}},{key:"defaultLocale",get:function(){return Ib},set:function(qa){Ib=qa}},{key:"defaultNumberingSystem",get:function(){return Hc},set:function(qa){Hc=qa}},{key:"defaultOutputCalendar",get:function(){return Ic},set:function(qa){Ic=qa}},{key:"twoDigitCutoffYear",get:function(){return ed},
set:function(qa){ed=qa%100}},{key:"throwOnInvalid",get:function(){return fd},set:function(qa){fd=qa}}]);return la}(),Rc="January February March April May June July August September October November December".split(" "),Qc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),id="JFMAMJJASOND".split(""),bd="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),ad="Mon Tue Wed Thu Fri Sat Sun".split(" "),jd="MTWTFSS".split(""),cd=["AM","PM"],Kc=["Before Christ","Anno Domini"],
ld=["BC","AD"],kd=["B","A"],rd={D:Fc,DD:Mb,DDD:Ra,DDDD:Sa,t:Ka,tt:Ma,ttt:Xa,tttt:Wa,T:Pa,TT:Za,TTT:cb,TTTT:eb,f:nb,ff:mb,fff:Vb,ffff:Cc,F:db,FF:gb,FFF:Ac,FFFF:Bc},gc=function(){function la(U,ma){this.opts=ma;this.loc=U;this.systemLoc=null}la.create=function(U,ma){void 0===ma&&(ma={});return new la(U,ma)};la.parseFormat=function(U){for(var ma=null,ua="",Ia=!1,Qa=[],$a=0;$a<U.length;$a++){var jb=U.charAt($a);"'"===jb?(0<ua.length&&Qa.push({literal:Ia,val:ua}),ma=null,ua="",Ia=!Ia):Ia?ua+=jb:jb===ma?
ua+=jb:(0<ua.length&&Qa.push({literal:!1,val:ua}),ma=ua=jb)}0<ua.length&&Qa.push({literal:Ia,val:ua});return Qa};la.macroTokenToFormatOpts=function(U){return rd[U]};var qa=la.prototype;qa.formatWithSystemDefault=function(U,ma){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(U,d({},this.opts,ma)).format()};qa.formatDateTime=function(U,ma){void 0===ma&&(ma={});return this.loc.dtFormatter(U,d({},this.opts,ma)).format()};qa.formatDateTimeParts=function(U,
ma){void 0===ma&&(ma={});return this.loc.dtFormatter(U,d({},this.opts,ma)).formatToParts()};qa.formatInterval=function(U,ma){void 0===ma&&(ma={});return this.loc.dtFormatter(U.start,d({},this.opts,ma)).dtf.formatRange(U.start.toJSDate(),U.end.toJSDate())};qa.resolvedOptions=function(U,ma){void 0===ma&&(ma={});return this.loc.dtFormatter(U,d({},this.opts,ma)).resolvedOptions()};qa.num=function(U,ma){void 0===ma&&(ma=0);if(this.opts.forceSimple)return F(U,ma);var ua=d({},this.opts);0<ma&&(ua.padTo=
ma);return this.loc.numberFormatter(ua).format(U)};qa.formatDateTimeFromString=function(U,ma){var ua=this,Ia="en"===this.loc.listingMode(),Qa=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,$a=function(ub,Ob){return ua.loc.extract(U,ub,Ob)},jb=function(ub){return U.isOffsetFixed&&0===U.offset&&ub.allowZ?"Z":U.isValid?U.zone.formatOffset(U.ts,ub.format):""},pb=function(ub,Ob){return Ia?X(ub)[U.month-1]:$a(Ob?{month:ub}:{month:ub,day:"numeric"},"month")},xb=function(ub,Ob){return Ia?fa(ub)[U.weekday-
1]:$a(Ob?{weekday:ub}:{weekday:ub,month:"long",day:"numeric"},"weekday")},zb=function(ub){return Ia?ea(ub)[0>U.year?0:1]:$a({era:ub},"era")};return ra(la.parseFormat(ma),function(ub){switch(ub){case "S":return ua.num(U.millisecond);case "u":case "SSS":return ua.num(U.millisecond,3);case "s":return ua.num(U.second);case "ss":return ua.num(U.second,2);case "uu":return ua.num(Math.floor(U.millisecond/10),2);case "uuu":return ua.num(Math.floor(U.millisecond/100));case "m":return ua.num(U.minute);case "mm":return ua.num(U.minute,
2);case "h":return ua.num(0===U.hour%12?12:U.hour%12);case "hh":return ua.num(0===U.hour%12?12:U.hour%12,2);case "H":return ua.num(U.hour);case "HH":return ua.num(U.hour,2);case "Z":return jb({format:"narrow",allowZ:ua.opts.allowZ});case "ZZ":return jb({format:"short",allowZ:ua.opts.allowZ});case "ZZZ":return jb({format:"techie",allowZ:ua.opts.allowZ});case "ZZZZ":return U.zone.offsetName(U.ts,{format:"short",locale:ua.loc.locale});case "ZZZZZ":return U.zone.offsetName(U.ts,{format:"long",locale:ua.loc.locale});
case "z":return U.zoneName;case "a":return Ia?cd[12>U.hour?0:1]:$a({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return Qa?$a({day:"numeric"},"day"):ua.num(U.day);case "dd":return Qa?$a({day:"2-digit"},"day"):ua.num(U.day,2);case "c":return ua.num(U.weekday);case "ccc":return xb("short",!0);case "cccc":return xb("long",!0);case "ccccc":return xb("narrow",!0);case "E":return ua.num(U.weekday);case "EEE":return xb("short",!1);case "EEEE":return xb("long",!1);case "EEEEE":return xb("narrow",
!1);case "L":return Qa?$a({month:"numeric",day:"numeric"},"month"):ua.num(U.month);case "LL":return Qa?$a({month:"2-digit",day:"numeric"},"month"):ua.num(U.month,2);case "LLL":return pb("short",!0);case "LLLL":return pb("long",!0);case "LLLLL":return pb("narrow",!0);case "M":return Qa?$a({month:"numeric"},"month"):ua.num(U.month);case "MM":return Qa?$a({month:"2-digit"},"month"):ua.num(U.month,2);case "MMM":return pb("short",!1);case "MMMM":return pb("long",!1);case "MMMMM":return pb("narrow",!1);
case "y":return Qa?$a({year:"numeric"},"year"):ua.num(U.year);case "yy":return Qa?$a({year:"2-digit"},"year"):ua.num(U.year.toString().slice(-2),2);case "yyyy":return Qa?$a({year:"numeric"},"year"):ua.num(U.year,4);case "yyyyyy":return Qa?$a({year:"numeric"},"year"):ua.num(U.year,6);case "G":return zb("short");case "GG":return zb("long");case "GGGGG":return zb("narrow");case "kk":return ua.num(U.weekYear.toString().slice(-2),2);case "kkkk":return ua.num(U.weekYear,4);case "W":return ua.num(U.weekNumber);
case "WW":return ua.num(U.weekNumber,2);case "o":return ua.num(U.ordinal);case "ooo":return ua.num(U.ordinal,3);case "q":return ua.num(U.quarter);case "qq":return ua.num(U.quarter,2);case "X":return ua.num(Math.floor(U.ts/1E3));case "x":return ua.num(U.ts);default:var Ob=la.macroTokenToFormatOpts(ub);ub=Ob?ua.formatWithSystemDefault(U,Ob):ub;return ub}})};qa.formatDurationFromString=function(U,ma){var ua=this,Ia=function($a){switch($a[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";
case "h":return"hour";case "d":return"day";case "w":return"week";case "M":return"month";case "y":return"year";default:return null}};ma=la.parseFormat(ma);var Qa=ma.reduce(function($a,jb){var pb=jb.val;return jb.literal?$a:$a.concat(pb)},[]);U=U.shiftTo.apply(U,Qa.map(Ia).filter(function($a){return $a}));return ra(ma,function($a){return function(jb){var pb=Ia(jb);return pb?ua.num($a.get(pb),jb.length):jb}}(U))};return la}(),hc=function(){function la(qa,U){this.reason=qa;this.explanation=U}la.prototype.toMessage=
function(){return this.explanation?this.reason+": "+this.explanation:this.reason};return la}(),Xc=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,Yc=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Zc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,gd=RegExp(""+Zc.source+("(?:"+Yc.source+"?(?:\\[("+Xc.source+")\\])?)?")),qc=RegExp("(?:T"+gd.source+")?"),sd=Ga("weekYear","weekNumber","weekDay"),hb=Ga("year","ordinal"),Cb=RegExp(Zc.source+" ?(?:"+Yc.source+"|("+Xc.source+"))?"),
uc=RegExp("(?: "+Cb.source+")?"),td=RegExp("^T?"+Zc.source+"$"),ud=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/,md={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},vd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,
wd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,xd=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,yd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,zd=Aa(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,qc),Ad=Aa(/(\d{4})-?W(\d\d)(?:-?(\d))?/,
qc),Bd=Aa(/(\d{4})-?(\d{3})/,qc),Cd=Aa(gd),hd=Ea(function(la,qa){return[{year:ca(la,qa),month:ca(la,qa+1,1),day:ca(la,qa+2,1)},null,qa+3]},ja,wa,za),Dd=Ea(sd,ja,wa,za),Ed=Ea(hb,ja,wa,za),Fd=Ea(ja,wa,za),Gd=Ea(ja),vc=Aa(/(\d{4})-(\d\d)-(\d\d)/,uc),Jc=Aa(Cb),$c=Ea(ja,wa,za),Ab={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},
seconds:{milliseconds:1E3}},Hd=d({years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6}},Ab),T=d({years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,
days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3}},Ab),ba="years quarters months weeks days hours minutes seconds milliseconds".split(" "),sa=ba.slice(0).reverse(),Ba=function(){function la(U){var ma="longterm"===U.conversionAccuracy||!1,ua=ma?T:Hd;U.matrix&&(ua=U.matrix);this.values=U.values;this.loc=U.loc||Lb.create();this.conversionAccuracy=ma?"longterm":
"casual";this.invalid=U.invalid||null;this.matrix=ua;this.isLuxonDuration=!0}la.fromMillis=function(U,ma){return la.fromObject({milliseconds:U},ma)};la.fromObject=function(U,ma){void 0===ma&&(ma={});if(null==U||"object"!==typeof U)throw new Nb("Duration.fromObject: argument expected to be an object, got "+(null===U?"null":typeof U));return new la({values:R(U,la.normalizeUnit),loc:Lb.fromObject(ma),conversionAccuracy:ma.conversionAccuracy,matrix:ma.matrix})};la.fromDurationLike=function(U){if(D(U))return la.fromMillis(U);
if(la.isDuration(U))return U;if("object"===typeof U)return la.fromObject(U);throw new Nb("Unknown duration argument "+U+" of type "+typeof U);};la.fromISO=function(U,ma){var ua=va(U,[ud,Fa])[0];return ua?la.fromObject(ua,ma):la.invalid("unparsable",'the input "'+U+"\" can't be parsed as ISO 8601")};la.fromISOTime=function(U,ma){var ua=va(U,[td,Gd])[0];return ua?la.fromObject(ua,ma):la.invalid("unparsable",'the input "'+U+"\" can't be parsed as ISO 8601")};la.invalid=function(U,ma){void 0===ma&&(ma=
null);if(!U)throw new Nb("need to specify a reason the Duration is invalid");U=U instanceof hc?U:new hc(U,ma);if(Kb.throwOnInvalid)throw new ec(U);return new la({invalid:U})};la.normalizeUnit=function(U){var ma={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[U?
U.toLowerCase():U];if(!ma)throw new Mc(U);return ma};la.isDuration=function(U){return U&&U.isLuxonDuration||!1};var qa=la.prototype;qa.toFormat=function(U,ma){void 0===ma&&(ma={});ma=d({},ma,{floor:!1!==ma.round&&!1!==ma.floor});return this.isValid?gc.create(this.loc,ma).formatDurationFromString(this,U):"Invalid Duration"};qa.toHuman=function(U){var ma=this;void 0===U&&(U={});var ua=ba.map(function(Ia){var Qa=ma.values[Ia];return y(Qa)?null:ma.loc.numberFormatter(d({style:"unit",unitDisplay:"long"},
U,{unit:Ia.slice(0,-1)})).format(Qa)}).filter(function(Ia){return Ia});return this.loc.listFormatter(d({type:"conjunction",style:U.listStyle||"narrow"},U)).format(ua)};qa.toObject=function(){return this.isValid?d({},this.values):{}};qa.toISO=function(){if(!this.isValid)return null;var U="P";0!==this.years&&(U+=this.years+"Y");if(0!==this.months||0!==this.quarters)U+=this.months+3*this.quarters+"M";0!==this.weeks&&(U+=this.weeks+"W");0!==this.days&&(U+=this.days+"D");if(0!==this.hours||0!==this.minutes||
0!==this.seconds||0!==this.milliseconds)U+="T";0!==this.hours&&(U+=this.hours+"H");0!==this.minutes&&(U+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)U+=Q(this.seconds+this.milliseconds/1E3,3)+"S";"P"===U&&(U+="T0S");return U};qa.toISOTime=function(U){void 0===U&&(U={});if(!this.isValid)return null;var ma=this.toMillis();if(0>ma||864E5<=ma)return null;U=d({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},U);ma=this.shiftTo("hours","minutes","seconds",
"milliseconds");var ua="basic"===U.format?"hhmm":"hh:mm";U.suppressSeconds&&0===ma.seconds&&0===ma.milliseconds||(ua+="basic"===U.format?"ss":":ss",U.suppressMilliseconds&&0===ma.milliseconds||(ua+=".SSS"));ma=ma.toFormat(ua);U.includePrefix&&(ma="T"+ma);return ma};qa.toJSON=function(){return this.toISO()};qa.toString=function(){return this.toISO()};qa.toMillis=function(){return this.as("milliseconds")};qa.valueOf=function(){return this.toMillis()};qa.plus=function(U){if(!this.isValid)return this;
U=la.fromDurationLike(U);for(var ma={},ua=0;ua<ba.length;ua++){var Ia=ba[ua];if(A(U.values,Ia)||A(this.values,Ia))ma[Ia]=U.get(Ia)+this.get(Ia)}return Oa(this,{values:ma},!0)};qa.minus=function(U){if(!this.isValid)return this;U=la.fromDurationLike(U);return this.plus(U.negate())};qa.mapUnits=function(U){if(!this.isValid)return this;for(var ma={},ua=0,Ia=Object.keys(this.values);ua<Ia.length;ua++){var Qa=Ia[ua];ma[Qa]=ia(U(this.values[Qa],Qa))}return Oa(this,{values:ma},!0)};qa.get=function(U){return this[la.normalizeUnit(U)]};
qa.set=function(U){if(!this.isValid)return this;U=d({},this.values,R(U,la.normalizeUnit));return Oa(this,{values:U})};qa.reconfigure=function(U){U=void 0===U?{}:U;var ma=U.conversionAccuracy,ua=U.matrix;U={loc:this.loc.clone({locale:U.locale,numberingSystem:U.numberingSystem}),matrix:ua,conversionAccuracy:ma};return Oa(this,U)};qa.as=function(U){return this.isValid?this.shiftTo(U).get(U):NaN};qa.normalize=function(){if(!this.isValid)return this;var U=this.toObject();Ca(this.matrix,U);return Oa(this,
{values:U},!0)};qa.rescale=function(){if(!this.isValid)return this;var U=this.normalize().shiftToAll().toObject(),ma={},ua=0;for(U=Object.entries(U);ua<U.length;ua++){var Ia=U[ua],Qa=Ia[0];Ia=Ia[1];0!==Ia&&(ma[Qa]=Ia)}return Oa(this,{values:ma},!0)};qa.shiftTo=function(){for(var U=arguments.length,ma=Array(U),ua=0;ua<U;ua++)ma[ua]=arguments[ua];if(!this.isValid||0===ma.length)return this;ma=ma.map(function(oc){return la.normalizeUnit(oc)});U={};ua={};for(var Ia=this.toObject(),Qa,$a=0;$a<ba.length;$a++){var jb=
ba[$a];if(0<=ma.indexOf(jb)){Qa=jb;var pb=0,xb;for(xb in ua)pb+=this.matrix[xb][jb]*ua[xb],ua[xb]=0;D(Ia[jb])&&(pb+=Ia[jb]);var zb=Math.trunc(pb);U[jb]=zb;ua[jb]=(1E3*pb-1E3*zb)/1E3;for(var ub in Ia)ba.indexOf(ub)>ba.indexOf(jb)&&Na(this.matrix,Ia,ub,U,jb)}else D(Ia[jb])&&(ua[jb]=Ia[jb])}for(var Ob in ua)0!==ua[Ob]&&(U[Qa]+=Ob===Qa?ua[Ob]:ua[Ob]/this.matrix[Qa][Ob]);return Oa(this,{values:U},!0).normalize()};qa.shiftToAll=function(){return this.isValid?this.shiftTo("years","months","weeks","days",
"hours","minutes","seconds","milliseconds"):this};qa.negate=function(){if(!this.isValid)return this;for(var U={},ma=0,ua=Object.keys(this.values);ma<ua.length;ma++){var Ia=ua[ma];U[Ia]=0===this.values[Ia]?0:-this.values[Ia]}return Oa(this,{values:U},!0)};qa.equals=function(U){if(!this.isValid||!U.isValid||!this.loc.equals(U.loc))return!1;for(var ma=0;ma<ba.length;ma++){var ua=ba[ma];var Ia=this.values[ua];ua=U.values[ua];Ia=void 0===Ia||0===Ia?void 0===ua||0===ua:Ia===ua;if(!Ia)return!1}return!0};
l(la,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?
this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",
get:function(){return this.invalid?this.invalid.explanation:null}}]);return la}(),Va=function(){function la(U){this.s=U.start;this.e=U.end;this.invalid=U.invalid||null;this.isLuxonInterval=!0}la.invalid=function(U,ma){void 0===ma&&(ma=null);if(!U)throw new Nb("need to specify a reason the Interval is invalid");U=U instanceof hc?U:new hc(U,ma);if(Kb.throwOnInvalid)throw new dc(U);return new la({invalid:U})};la.fromDateTimes=function(U,ma){U=sc(U);ma=sc(ma);var ua=U&&U.isValid?ma&&ma.isValid?ma<U?Va.invalid("end before start",
"The end of an interval must be after its start, but you had start\x3d"+U.toISO()+" and end\x3d"+ma.toISO()):null:Va.invalid("missing or invalid end"):Va.invalid("missing or invalid start");return null==ua?new la({start:U,end:ma}):ua};la.after=function(U,ma){ma=Ba.fromDurationLike(ma);U=sc(U);return la.fromDateTimes(U,U.plus(ma))};la.before=function(U,ma){ma=Ba.fromDurationLike(ma);U=sc(U);return la.fromDateTimes(U.minus(ma),U)};la.fromISO=function(U,ma){var ua=(U||"").split("/",2),Ia=ua[0];ua=ua[1];
if(Ia&&ua){try{var Qa=Tb.fromISO(Ia,ma);var $a=Qa.isValid}catch(xb){$a=!1}try{var jb=Tb.fromISO(ua,ma);var pb=jb.isValid}catch(xb){pb=!1}if($a&&pb)return la.fromDateTimes(Qa,jb);if($a){if(jb=Ba.fromISO(ua,ma),jb.isValid)return la.after(Qa,jb)}else if(pb&&(Qa=Ba.fromISO(Ia,ma),Qa.isValid))return la.before(jb,Qa)}return la.invalid("unparsable",'the input "'+U+"\" can't be parsed as ISO 8601")};la.isInterval=function(U){return U&&U.isLuxonInterval||!1};var qa=la.prototype;qa.length=function(U){void 0===
U&&(U="milliseconds");return this.isValid?this.toDuration.apply(this,[U]).get(U):NaN};qa.count=function(U){void 0===U&&(U="milliseconds");if(!this.isValid)return NaN;var ma=this.start.startOf(U),ua=this.end.startOf(U);return Math.floor(ua.diff(ma,U).get(U))+1};qa.hasSame=function(U){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,U):!1};qa.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()};qa.isAfter=function(U){return this.isValid?this.s>U:!1};qa.isBefore=function(U){return this.isValid?
this.e<=U:!1};qa.contains=function(U){return this.isValid?this.s<=U&&this.e>U:!1};qa.set=function(U){U=void 0===U?{}:U;return this.isValid?la.fromDateTimes(U.start||this.s,U.end||this.e):this};qa.splitAt=function(){var U=this;if(!this.isValid)return[];for(var ma=arguments.length,ua=Array(ma),Ia=0;Ia<ma;Ia++)ua[Ia]=arguments[Ia];ma=ua.map(sc).filter(function(jb){return U.contains(jb)}).sort();ua=[];Ia=this.s;for(var Qa=0;Ia<this.e;){var $a=ma[Qa]||this.e;$a=+$a>+this.e?this.e:$a;ua.push(la.fromDateTimes(Ia,
$a));Ia=$a;Qa+=1}return ua};qa.splitBy=function(U){U=Ba.fromDurationLike(U);if(!this.isValid||!U.isValid||0===U.as("milliseconds"))return[];for(var ma=this.s,ua=1,Ia,Qa=[];ma<this.e;)Ia=this.start.plus(U.mapUnits(function($a){return $a*ua})),Ia=+Ia>+this.e?this.e:Ia,Qa.push(la.fromDateTimes(ma,Ia)),ma=Ia,ua+=1;return Qa};qa.divideEqually=function(U){return this.isValid?this.splitBy(this.length()/U).slice(0,U):[]};qa.overlaps=function(U){return this.e>U.s&&this.s<U.e};qa.abutsStart=function(U){return this.isValid?
+this.e===+U.s:!1};qa.abutsEnd=function(U){return this.isValid?+U.e===+this.s:!1};qa.engulfs=function(U){return this.isValid?this.s<=U.s&&this.e>=U.e:!1};qa.equals=function(U){return this.isValid&&U.isValid?this.s.equals(U.s)&&this.e.equals(U.e):!1};qa.intersection=function(U){if(!this.isValid)return this;var ma=this.s>U.s?this.s:U.s;U=this.e<U.e?this.e:U.e;return ma>=U?null:la.fromDateTimes(ma,U)};qa.union=function(U){return this.isValid?la.fromDateTimes(this.s<U.s?this.s:U.s,this.e>U.e?this.e:U.e):
this};la.merge=function(U){var ma=U.sort(function(ua,Ia){return ua.s-Ia.s}).reduce(function(ua,Ia){var Qa=ua[0];return(ua=ua[1])?ua.overlaps(Ia)||ua.abutsStart(Ia)?[Qa,ua.union(Ia)]:[Qa.concat([ua]),Ia]:[Qa,Ia]},[[],null]);U=ma[0];(ma=ma[1])&&U.push(ma);return U};la.xor=function(U){var ma,ua=null,Ia=0,Qa=[];U=U.map(function(jb){return[{time:jb.s,type:"s"},{time:jb.e,type:"e"}]});var $a=(ma=Array.prototype).concat.apply(ma,U).sort(function(jb,pb){return jb.time-pb.time});for(ma=n($a);!(U=ma()).done;)U=
U.value,Ia+="s"===U.type?1:-1,1===Ia?ua=U.time:(ua&&+ua!==+U.time&&Qa.push(la.fromDateTimes(ua,U.time)),ua=null);return la.merge(Qa)};qa.difference=function(){for(var U=this,ma=arguments.length,ua=Array(ma),Ia=0;Ia<ma;Ia++)ua[Ia]=arguments[Ia];return la.xor([this].concat(ua)).map(function(Qa){return U.intersection(Qa)}).filter(function(Qa){return Qa&&!Qa.isEmpty()})};qa.toString=function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":"Invalid Interval"};qa.toLocaleString=function(U,
ma){void 0===U&&(U=Fc);void 0===ma&&(ma={});return this.isValid?gc.create(this.s.loc.clone(ma),U).formatInterval(this):"Invalid Interval"};qa.toISO=function(U){return this.isValid?this.s.toISO(U)+"/"+this.e.toISO(U):"Invalid Interval"};qa.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():"Invalid Interval"};qa.toISOTime=function(U){return this.isValid?this.s.toISOTime(U)+"/"+this.e.toISOTime(U):"Invalid Interval"};qa.toFormat=function(U,ma){ma=(void 0===ma?{}:ma).separator;
ma=void 0===ma?" \u2013 ":ma;return this.isValid?""+this.s.toFormat(U)+ma+this.e.toFormat(U):"Invalid Interval"};qa.toDuration=function(U,ma){return this.isValid?this.e.diff(this.s,U,ma):Ba.invalid(this.invalidReason)};qa.mapEndpoints=function(U){return la.fromDateTimes(U(this.s),U(this.e))};l(la,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",
get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]);return la}(),bb=function(){function la(){}la.hasDST=function(qa){void 0===qa&&(qa=Kb.defaultZone);var U=Tb.now().setZone(qa).set({month:12});return!qa.isUniversal&&U.offset!==U.set({month:6}).offset};la.isValidIANAZone=function(qa){return rc.isValidZone(qa)};la.normalizeZone=function(qa){return v(qa,Kb.defaultZone)};la.months=function(qa,U){void 0===
qa&&(qa="long");var ma=void 0===U?{}:U;U=ma.locale;var ua=ma.numberingSystem,Ia=ma.locObj;ma=ma.outputCalendar;return((void 0===Ia?null:Ia)||Lb.create(void 0===U?null:U,void 0===ua?null:ua,void 0===ma?"gregory":ma)).months(qa)};la.monthsFormat=function(qa,U){void 0===qa&&(qa="long");var ma=void 0===U?{}:U;U=ma.locale;var ua=ma.numberingSystem,Ia=ma.locObj;ma=ma.outputCalendar;return((void 0===Ia?null:Ia)||Lb.create(void 0===U?null:U,void 0===ua?null:ua,void 0===ma?"gregory":ma)).months(qa,!0)};la.weekdays=
function(qa,U){void 0===qa&&(qa="long");var ma=void 0===U?{}:U;U=ma.locale;var ua=ma.numberingSystem;ma=ma.locObj;return((void 0===ma?null:ma)||Lb.create(void 0===U?null:U,void 0===ua?null:ua,null)).weekdays(qa)};la.weekdaysFormat=function(qa,U){void 0===qa&&(qa="long");var ma=void 0===U?{}:U;U=ma.locale;var ua=ma.numberingSystem;ma=ma.locObj;return((void 0===ma?null:ma)||Lb.create(void 0===U?null:U,void 0===ua?null:ua,null)).weekdays(qa,!0)};la.meridiems=function(qa){qa=(void 0===qa?{}:qa).locale;
return Lb.create(void 0===qa?null:qa).meridiems()};la.eras=function(qa,U){void 0===qa&&(qa="short");U=(void 0===U?{}:U).locale;return Lb.create(void 0===U?null:U,null,"gregory").eras(qa)};la.features=function(){return{relative:C()}};return la}(),ib={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",
knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},rb={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],
mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},vb=ib.hanidec.replace(/[\[|\]]/g,"").split(""),sb="[ "+String.fromCharCode(160)+"]",Gb=new RegExp(sb,"g"),Lc={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},
timeZoneName:{long:"ZZZZZ",short:"ZZZ"}},Vc=null,od=[0,31,59,90,120,151,181,212,243,273,304,334],nd=[0,31,60,91,121,152,182,213,244,274,305,335],Jd={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ld={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Md={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Id="year month day hour minute second millisecond".split(" "),Nd="weekYear weekNumber weekday hour minute second millisecond".split(" "),Od="year ordinal hour minute second millisecond".split(" "),
Tb=function(){function la(U){var ma=U.zone||Kb.defaultZone,ua=U.invalid||(Number.isNaN(U.ts)?new hc("invalid input"):null)||(ma.isValid?null:Hb(ma));this.ts=y(U.ts)?Kb.now():U.ts;var Ia=null,Qa=null;ua||(U.old&&U.old.ts===this.ts&&U.old.zone.equals(ma)?(Qa=[U.old.c,U.old.o],Ia=Qa[0],Qa=Qa[1]):(Qa=ma.offset(this.ts),Ia=cc(this.ts,Qa),Ia=(ua=Number.isNaN(Ia.year)?new hc("invalid input"):null)?null:Ia,Qa=ua?null:Qa));this._zone=ma;this.loc=U.loc||Lb.create();this.invalid=ua;this.weekData=null;this.c=
Ia;this.o=Qa;this.isLuxonDateTime=!0}la.now=function(){return new la({})};la.local=function(){var U=zc(arguments),ma=U[1];return Nc({year:ma[0],month:ma[1],day:ma[2],hour:ma[3],minute:ma[4],second:ma[5],millisecond:ma[6]},U[0])};la.utc=function(){var U=zc(arguments),ma=U[0],ua=U[1];U=ua[0];var Ia=ua[1],Qa=ua[2],$a=ua[3],jb=ua[4],pb=ua[5];ua=ua[6];ma.zone=bc.utcInstance;return Nc({year:U,month:Ia,day:Qa,hour:$a,minute:jb,second:pb,millisecond:ua},ma)};la.fromJSDate=function(U,ma){void 0===ma&&(ma=
{});U="[object Date]"===Object.prototype.toString.call(U)?U.valueOf():NaN;if(Number.isNaN(U))return la.invalid("invalid input");var ua=v(ma.zone,Kb.defaultZone);return ua.isValid?new la({ts:U,zone:ua,loc:Lb.fromObject(ma)}):la.invalid(Hb(ua))};la.fromMillis=function(U,ma){void 0===ma&&(ma={});if(D(U))return-864E13>U||864E13<U?la.invalid("Timestamp out of range"):new la({ts:U,zone:v(ma.zone,Kb.defaultZone),loc:Lb.fromObject(ma)});throw new Nb("fromMillis requires a numerical input, but received a "+
typeof U+" with value "+U);};la.fromSeconds=function(U,ma){void 0===ma&&(ma={});if(D(U))return new la({ts:1E3*U,zone:v(ma.zone,Kb.defaultZone),loc:Lb.fromObject(ma)});throw new Nb("fromSeconds requires a numerical input");};la.fromObject=function(U,ma){void 0===ma&&(ma={});U=U||{};var ua=v(ma.zone,Kb.defaultZone);if(!ua.isValid)return la.invalid(Hb(ua));var Ia=Kb.now(),Qa=y(ma.specificOffset)?ua.offset(Ia):ma.specificOffset,$a=R(U,Dc),jb=!y($a.ordinal),pb=!y($a.year),xb=!y($a.month)||!y($a.day);pb=
pb||xb;var zb=$a.weekYear||$a.weekNumber;ma=Lb.fromObject(ma);if((pb||jb)&&zb)throw new Xb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(xb&&jb)throw new Xb("Can't mix ordinal dates with month/day");xb=zb||$a.weekday&&!pb;zb=cc(Ia,Qa);if(xb){var ub=Nd;Ia=Ld;zb=Fb(zb)}else jb?(ub=Od,Ia=Md,zb=lb(zb)):(ub=Id,Ia=Jd);var Ob=!1;ub=n(ub);for(var oc;!(oc=ub()).done;)oc=oc.value,y($a[oc])?$a[oc]=Ob?Ia[oc]:zb[oc]:Ob=!0;xb?(Ia=E($a.weekYear),zb=G($a.weekNumber,1,L($a.weekYear)),Ob=
G($a.weekday,1,7),Ia=Ia?zb?Ob?!1:qb("weekday",$a.weekday):qb("week",$a.week):qb("weekYear",$a.weekYear)):jb?(Ia=E($a.year),zb=G($a.ordinal,1,P($a.year)?366:365),Ia=Ia?zb?!1:qb("ordinal",$a.ordinal):qb("year",$a.year)):Ia=Sb($a);if(Ia=Ia||Eb($a))return la.invalid(Ia);jb=xb?yb($a):jb?Db($a):$a;Qa=Ub(jb,Qa,ua);ua=new la({ts:Qa[0],zone:ua,o:Qa[1],loc:ma});return $a.weekday&&pb&&U.weekday!==ua.weekday?la.invalid("mismatched weekday","you can't specify both a weekday of "+$a.weekday+" and a date of "+ua.toISO()):
ua};la.fromISO=function(U,ma){void 0===ma&&(ma={});var ua=va(U,[zd,hd],[Ad,Dd],[Bd,Ed],[Cd,Fd]);return ic(ua[0],ua[1],ma,"ISO 8601",U)};la.fromRFC2822=function(U,ma){void 0===ma&&(ma={});var ua=va(U.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[vd,ya]);return ic(ua[0],ua[1],ma,"RFC 2822",U)};la.fromHTTP=function(U,ma){void 0===ma&&(ma={});U=va(U,[wd,Ha],[xd,Ha],[yd,da]);return ic(U[0],U[1],ma,"HTTP",ma)};la.fromFormat=function(U,ma,ua){void 0===ua&&(ua={});if(y(U)||y(ma))throw new Nb("fromFormat requires an input string and a format");
var Ia=ua,Qa=Ia.locale;Ia=Ia.numberingSystem;Qa=Lb.fromOpts({locale:void 0===Qa?null:Qa,numberingSystem:void 0===Ia?null:Ia,defaultToEN:!0});Qa=fb(Qa,U,ma);var $a=[Qa.result,Qa.zone,Qa.specificOffset,Qa.invalidReason];Qa=$a[0];Ia=$a[1];var jb=$a[2];return($a=$a[3])?la.invalid($a):ic(Qa,Ia,ua,"format "+ma,U,jb)};la.fromString=function(U,ma,ua){void 0===ua&&(ua={});return la.fromFormat(U,ma,ua)};la.fromSQL=function(U,ma){void 0===ma&&(ma={});var ua=va(U,[vc,hd],[Jc,$c]);return ic(ua[0],ua[1],ma,"SQL",
U)};la.invalid=function(U,ma){void 0===ma&&(ma=null);if(!U)throw new Nb("need to specify a reason the DateTime is invalid");U=U instanceof hc?U:new hc(U,ma);if(Kb.throwOnInvalid)throw new Oc(U);return new la({invalid:U})};la.isDateTime=function(U){return U&&U.isLuxonDateTime||!1};la.parseFormatForOpts=function(U,ma){void 0===ma&&(ma={});return(U=kb(U,Lb.fromObject(ma)))?U.map(function(ua){return ua?ua.val:null}).join(""):null};la.expandFormat=function(U,ma){void 0===ma&&(ma={});return ab(gc.parseFormat(U),
Lb.fromObject(ma)).map(function(ua){return ua.val}).join("")};var qa=la.prototype;qa.get=function(U){return this[U]};qa.resolvedLocaleOptions=function(U){void 0===U&&(U={});U=gc.create(this.loc.clone(U),U).resolvedOptions(this);return{locale:U.locale,numberingSystem:U.numberingSystem,outputCalendar:U.calendar}};qa.toUTC=function(U,ma){void 0===U&&(U=0);void 0===ma&&(ma={});return this.setZone(bc.instance(U),ma)};qa.toLocal=function(){return this.setZone(Kb.defaultZone)};qa.setZone=function(U,ma){var ua=
void 0===ma?{}:ma;ma=ua.keepLocalTime;ma=void 0===ma?!1:ma;ua=ua.keepCalendarTime;ua=void 0===ua?!1:ua;U=v(U,Kb.defaultZone);if(U.equals(this.zone))return this;if(U.isValid){var Ia=this.ts;if(ma||ua)ma=U.offset(this.ts),ua=this.toObject(),Ia=Ub(ua,ma,U)[0];return Zb(this,{ts:Ia,zone:U})}return la.invalid(Hb(U))};qa.reconfigure=function(U){U=void 0===U?{}:U;U=this.loc.clone({locale:U.locale,numberingSystem:U.numberingSystem,outputCalendar:U.outputCalendar});return Zb(this,{loc:U})};qa.setLocale=function(U){return this.reconfigure({locale:U})};
qa.set=function(U){if(!this.isValid)return this;U=R(U,Dc);var ma=!y(U.weekYear)||!y(U.weekNumber)||!y(U.weekday),ua=!y(U.ordinal),Ia=!y(U.year),Qa=!y(U.month)||!y(U.day),$a=U.weekYear||U.weekNumber;if((Ia||Qa||ua)&&$a)throw new Xb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Qa&&ua)throw new Xb("Can't mix ordinal dates with month/day");ma?ma=yb(d({},Fb(this.c),U)):y(U.ordinal)?(ma=d({},this.toObject(),U),y(U.day)&&(ma.day=Math.min(I(ma.year,ma.month),ma.day))):ma=Db(d({},
lb(this.c),U));U=Ub(ma,this.o,this.zone);return Zb(this,{ts:U[0],o:U[1]})};qa.plus=function(U){if(!this.isValid)return this;U=Ba.fromDurationLike(U);return Zb(this,wc(this,U))};qa.minus=function(U){if(!this.isValid)return this;U=Ba.fromDurationLike(U).negate();return Zb(this,wc(this,U))};qa.startOf=function(U){if(!this.isValid)return this;var ma={};U=Ba.normalizeUnit(U);switch(U){case "years":ma.month=1;case "quarters":case "months":ma.day=1;case "weeks":case "days":ma.hour=0;case "hours":ma.minute=
0;case "minutes":ma.second=0;case "seconds":ma.millisecond=0}"weeks"===U&&(ma.weekday=1);"quarters"===U&&(ma.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(ma)};qa.endOf=function(U){var ma;return this.isValid?this.plus((ma={},ma[U]=1,ma)).startOf(U).minus(1):this};qa.toFormat=function(U,ma){void 0===ma&&(ma={});return this.isValid?gc.create(this.loc.redefaultToEN(ma)).formatDateTimeFromString(this,U):"Invalid DateTime"};qa.toLocaleString=function(U,ma){void 0===U&&(U=Fc);void 0===ma&&(ma=
{});return this.isValid?gc.create(this.loc.clone(ma),U).formatDateTime(this):"Invalid DateTime"};qa.toLocaleParts=function(U){void 0===U&&(U={});return this.isValid?gc.create(this.loc.clone(U),U).formatDateTimeParts(this):[]};qa.toISO=function(U){var ma=void 0===U?{}:U,ua=ma.format;U=ma.suppressSeconds;U=void 0===U?!1:U;var Ia=ma.suppressMilliseconds;Ia=void 0===Ia?!1:Ia;var Qa=ma.includeOffset;Qa=void 0===Qa?!0:Qa;ma=ma.extendedZone;ma=void 0===ma?!1:ma;if(!this.isValid)return null;ua="extended"===
(void 0===ua?"extended":ua);var $a=xc(this,ua);return $a=$a+"T"+yc(this,ua,U,Ia,Qa,ma)};qa.toISODate=function(U){U=(void 0===U?{}:U).format;return this.isValid?xc(this,"extended"===(void 0===U?"extended":U)):null};qa.toISOWeekDate=function(){return jc(this,"kkkk-'W'WW-c")};qa.toISOTime=function(U){var ma=void 0===U?{}:U;U=ma.suppressMilliseconds;var ua=ma.suppressSeconds,Ia=ma.includeOffset,Qa=ma.includePrefix,$a=ma.extendedZone;ma=ma.format;return this.isValid?((void 0===Qa?0:Qa)?"T":"")+yc(this,
"extended"===(void 0===ma?"extended":ma),void 0===ua?!1:ua,void 0===U?!1:U,void 0===Ia?!0:Ia,void 0===$a?!1:$a):null};qa.toRFC2822=function(){return jc(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)};qa.toHTTP=function(){return jc(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")};qa.toSQLDate=function(){return this.isValid?xc(this,!0):null};qa.toSQLTime=function(U){var ma=void 0===U?{}:U;U=ma.includeOffset;U=void 0===U?!0:U;var ua=ma.includeZone;ua=void 0===ua?!1:ua;ma=ma.includeOffsetSpace;ma=void 0===
ma?!0:ma;var Ia="HH:mm:ss.SSS";if(ua||U)ma&&(Ia+=" "),ua?Ia+="z":U&&(Ia+="ZZ");return jc(this,Ia,!0)};qa.toSQL=function(U){void 0===U&&(U={});return this.isValid?this.toSQLDate()+" "+this.toSQLTime(U):null};qa.toString=function(){return this.isValid?this.toISO():"Invalid DateTime"};qa.valueOf=function(){return this.toMillis()};qa.toMillis=function(){return this.isValid?this.ts:NaN};qa.toSeconds=function(){return this.isValid?this.ts/1E3:NaN};qa.toUnixInteger=function(){return this.isValid?Math.floor(this.ts/
1E3):NaN};qa.toJSON=function(){return this.toISO()};qa.toBSON=function(){return this.toJSDate()};qa.toObject=function(U){void 0===U&&(U={});if(!this.isValid)return{};var ma=d({},this.c);U.includeConfig&&(ma.outputCalendar=this.outputCalendar,ma.numberingSystem=this.loc.numberingSystem,ma.locale=this.loc.locale);return ma};qa.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)};qa.diff=function(U,ma,ua){void 0===ma&&(ma="milliseconds");void 0===ua&&(ua={});if(!this.isValid||!U.isValid)return Ba.invalid("created by diffing an invalid DateTime");
ua=d({locale:this.locale,numberingSystem:this.numberingSystem},ua);var Ia=(Array.isArray(ma)?ma:[ma]).map(Ba.normalizeUnit);ma=U.valueOf()>this.valueOf();U=pa(ma?this:U,ma?U:this,Ia,ua);return ma?U.negate():U};qa.diffNow=function(U,ma){void 0===U&&(U="milliseconds");void 0===ma&&(ma={});return this.diff(la.now(),U,ma)};qa.until=function(U){return this.isValid?Va.fromDateTimes(this,U):this};qa.hasSame=function(U,ma){if(!this.isValid)return!1;var ua=U.valueOf();U=this.setZone(U.zone,{keepLocalTime:!0});
return U.startOf(ma)<=ua&&ua<=U.endOf(ma)};qa.equals=function(U){return this.isValid&&U.isValid&&this.valueOf()===U.valueOf()&&this.zone.equals(U.zone)&&this.loc.equals(U.loc)};qa.toRelative=function(U){void 0===U&&(U={});if(!this.isValid)return null;var ma=U.base||la.fromObject({},{zone:this.zone}),ua=U.padding?this<ma?-U.padding:U.padding:0,Ia="years months days hours minutes seconds".split(" "),Qa=U.unit;Array.isArray(U.unit)&&(Ia=U.unit,Qa=void 0);return Ec(ma,this.plus(ua),d({},U,{numeric:"always",
units:Ia,unit:Qa}))};qa.toRelativeCalendar=function(U){void 0===U&&(U={});return this.isValid?Ec(U.base||la.fromObject({},{zone:this.zone}),this,d({},U,{numeric:"auto",units:["years","months","days"],calendary:!0})):null};la.min=function(){for(var U=arguments.length,ma=Array(U),ua=0;ua<U;ua++)ma[ua]=arguments[ua];if(!ma.every(la.isDateTime))throw new Nb("min requires all arguments be DateTimes");return z(ma,function(Ia){return Ia.valueOf()},Math.min)};la.max=function(){for(var U=arguments.length,
ma=Array(U),ua=0;ua<U;ua++)ma[ua]=arguments[ua];if(!ma.every(la.isDateTime))throw new Nb("max requires all arguments be DateTimes");return z(ma,function(Ia){return Ia.valueOf()},Math.max)};la.fromFormatExplain=function(U,ma,ua){void 0===ua&&(ua={});var Ia=ua;ua=Ia.locale;Ia=Ia.numberingSystem;ua=Lb.fromOpts({locale:void 0===ua?null:ua,numberingSystem:void 0===Ia?null:Ia,defaultToEN:!0});return fb(ua,U,ma)};la.fromStringExplain=function(U,ma,ua){void 0===ua&&(ua={});return la.fromFormatExplain(U,ma,
ua)};l(la,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",
get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:
NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?Pb(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?Pb(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?Pb(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?lb(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?
bb.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?bb.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?bb.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?bb.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}},{key:"isInLeapYear",get:function(){return P(this.year)}},{key:"daysInMonth",
get:function(){return I(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?P(this.year)?366:365:NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?L(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return Fc}},{key:"DATE_MED",get:function(){return Mb}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return na}},{key:"DATE_FULL",get:function(){return Ra}},{key:"DATE_HUGE",get:function(){return Sa}},{key:"TIME_SIMPLE",get:function(){return Ka}},{key:"TIME_WITH_SECONDS",
get:function(){return Ma}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return Xa}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return Wa}},{key:"TIME_24_SIMPLE",get:function(){return Pa}},{key:"TIME_24_WITH_SECONDS",get:function(){return Za}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return cb}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return eb}},{key:"DATETIME_SHORT",get:function(){return nb}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return db}},{key:"DATETIME_MED",get:function(){return mb}},
{key:"DATETIME_MED_WITH_SECONDS",get:function(){return gb}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return tb}},{key:"DATETIME_FULL",get:function(){return Vb}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return Ac}},{key:"DATETIME_HUGE",get:function(){return Cc}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return Bc}}]);return la}();f.DateTime=Tb;f.Duration=Ba;f.FixedOffsetZone=bc;f.IANAZone=rc;f.Info=bb;f.Interval=Va;f.InvalidZone=Tc;f.Settings=Kb;f.SystemZone=fc;f.VERSION="3.2.1";
f.Zone=Bb;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(f,B){return function(){function l(d){void 0===d&&(d=[]);this._elements=d}l.prototype.length=function(){return this._elements.length};l.prototype.get=function(d){return this._elements[d]};l.prototype.toArray=function(){for(var d=[],c=0;c<this.length();c++)d.push(this.get(c));return d};return l}()})},"esri/arcade/languageUtils":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ./ArcadeDate ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../libs/luxon/luxon dojo/number dojo/_base/kernel ./featureset/support/shared ./ArcadeModule ./executionError".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E,C){function z(O,ya,Ha){return""===ya||null===ya||void 0===ya||ya===Ha||ya===Ha?O:O=O.split(ya).join(Ha)}function w(O){return O instanceof t.ArcadeFunction}function A(O){return O instanceof E.ArcadeModule}function G(O){return F(O)||J(O)||L(O)||H(O)||null===O||O===B.voidOperation||"number"===typeof O?!0:!1}function F(O){return"string"===typeof O||O instanceof String}function H(O){return"boolean"===typeof O}function J(O){return"number"===typeof O}
function K(O){return O instanceof Array}function Q(O){return"esri.arcade.Feature"===(null===O||void 0===O?void 0:O.arcadeDeclaredClass)?!0:!1}function P(O){return"esri.arcade.featureset.support.FeatureSet"===(null===O||void 0===O?void 0:O.declaredRootClass)}function I(O){return"esri.arcade.featureSetCollection"===(null===O||void 0===O?void 0:O.declaredRootClass)}function N(O){return O instanceof e}function L(O){return O instanceof a.ArcadeDate}function W(O){return null!=O&&"object"===typeof O}function Z(O){return O instanceof
Date}function aa(O,ya){if(!isNaN(O)){if(void 0===ya||null===ya||""===ya)return O.toString();ya=z(ya,"\u2030","");ya=z(ya,"\u00a4","");return v.format(O,{pattern:ya})}return O.toString()}function ia(O,ya){return void 0===ya||null===ya||""===ya?O.toISOString(!0):O.toFormat(R(ya),{locale:y.locale,numberingSystem:"latn"})}function R(O){O=O.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");var ya="",Ha=0;for(O=O.match(/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g)||
[];Ha<O.length;Ha++){var da=O[Ha];switch(da){case "D":ya+="d";break;case "DD":ya+="dd";break;case "DDD":ya+="o";break;case "d":ya+="c";break;case "ddd":ya+="ccc";break;case "dddd":ya+="cccc";break;case "M":ya+="L";break;case "MM":ya+="LL";break;case "MMM":ya+="LLL";break;case "MMMM":ya+="LLLL";break;case "YY":ya+="yy";break;case "Y":case "YYYY":ya+="yyyy";break;case "Q":ya+="q";break;case "Z":ya+="ZZ";break;case "ZZ":ya+="ZZZ";break;case "S":ya+="'S'";break;case "SS":ya+="'SS'";break;case "SSS":ya+=
"u";break;case "A":case "a":ya+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":ya+=da;break;default:ya=2<=da.length&&"["===da.slice(0,1)&&"]"===da.slice(-1)?ya+("'"+da.slice(1,-1)+"'"):ya+("'"+da+"'")}}return ya}function S(O,ya,Ha){switch(Ha){case "\x3e":return O>ya;case "\x3c":return O<ya;case "\x3e\x3d":return O>=ya;case "\x3c\x3d":return O<=ya}return!1}function M(O,ya){if(O===ya||null===O&&ya===B.voidOperation||null===ya&&O===B.voidOperation)return!0;
if(L(O)&&L(ya))return O.equals(ya);if(O instanceof r||O instanceof m)return O.equalityTest(ya);if(O instanceof k&&ya instanceof k){var Ha=O.getCacheValue("_arcadeCacheId"),da=ya.getCacheValue("_arcadeCacheId");if(void 0!==Ha&&null!==Ha)return Ha===da}return W(O)&&W(ya)&&(O._arcadeCacheId===ya._arcadeCacheId&&void 0!==O._arcadeCacheId&&null!==O._arcadeCacheId||O._underlyingGraphic===ya._underlyingGraphic&&void 0!==O._underlyingGraphic&&null!==O._underlyingGraphic)?!0:!1}function X(O,ya){if(F(O))return O;
if(null===O)return"";if(J(O))return aa(O,ya);if(H(O))return O.toString();if(L(O))return ia(O,ya);if(O instanceof q)return JSON.stringify(O.toJson());if(K(O)){ya=[];for(var Ha=0;Ha<O.length;Ha++)ya[Ha]=ea(O[Ha]);return"["+ya.join(",")+"]"}if(O instanceof e){ya=[];for(Ha=0;Ha<O.length();Ha++)ya[Ha]=ea(O.get(Ha));return"["+ya.join(",")+"]"}return null!==O&&"object"===typeof O&&void 0!==O.castToText?O.castToText():w(O)?"object, Function":O===B.voidOperation?"":A(O)?"object, Module":""}function fa(O,ya,
Ha){void 0===Ha&&(Ha=!1);if(F(O))return O;if(null===O)return"";if(J(O))return aa(O,ya);if(H(O))return O.toString();if(L(O))return ia(O,ya);if(O instanceof q)return O instanceof h?'{"xmin":'+O.xmin.toString()+',"ymin":'+O.ymin.toString()+","+(O.hasZ?'"zmin":'+O.zmin.toString()+",":"")+(O.hasM?'"mmin":'+O.mmin.toString()+",":"")+'"xmax":'+O.xmax.toString()+',"ymax":'+O.ymax.toString()+","+(O.hasZ?'"zmax":'+O.zmax.toString()+",":"")+(O.hasM?'"mmax":'+O.mmax.toString()+",":"")+'"spatialReference":'+Ga(O.spatialReference)+
"}":Ga(O.toJson(),function(Oa,Na){return Oa.key===Na.key?0:"spatialReference"===Oa.key?1:"spatialReference"===Na.key||Oa.key<Na.key?-1:Oa.key>Na.key?1:0});if(K(O)){ya=[];for(var da=0;da<O.length;da++)ya[da]=ea(O[da],Ha);return"["+ya.join(",")+"]"}if(O instanceof e){ya=[];for(da=0;da<O.length();da++)ya[da]=ea(O.get(da),Ha);return"["+ya.join(",")+"]"}return null!==O&&"object"===typeof O&&void 0!==O.castToText?O.castToText(Ha):w(O)?"object, Function":O===B.voidOperation?"":A(O)?"object, Module":""}function ea(O,
ya){void 0===ya&&(ya=!1);return null===O?"null":H(O)||J(O)||F(O)?JSON.stringify(O):O instanceof q||O instanceof e||O instanceof Array?fa(O,null,ya):L(O)?ya?JSON.stringify(O.getTime()):JSON.stringify(ia(O,"")):null!==O&&"object"===typeof O&&void 0!==O.castToText?O.castToText(ya):"null"}function ha(O,ya){return J(O)?O:null===O||""===O?0:L(O)?NaN:H(O)?O?1:0:K(O)||""===O||void 0===O?NaN:void 0!==ya&&F(O)?(ya=z(ya,"\u2030",""),ya=z(ya,"\u00a4",""),v.parse(O,{pattern:ya})):O===B.voidOperation?0:Number(O)}
function ra(O,ya){if(!O||!O.domain)return ya;var Ha=null;if("string"===O.field.type||"esriFieldTypeString"===O.field.type)ya=X(ya);else{if(null===ya||void 0===ya)return null;if(""===ya)return ya;ya=ha(ya)}for(var da=0;da<O.domain.codedValues.length;da++){var Oa=O.domain.codedValues[da];Oa.code===ya&&(Ha=Oa)}return null===Ha?ya:Ha.name}function Aa(O,ya){if(!O||!O.domain)return ya;var Ha=null;ya=X(ya);for(var da=0;da<O.domain.codedValues.length;da++){var Oa=O.domain.codedValues[da];Oa.name===ya&&(Ha=
Oa)}return null===Ha?ya:Ha.code}function Ea(O,ya,Ha,da){void 0===Ha&&(Ha=null);void 0===da&&(da=null);if(!ya||!ya.fields)return null;for(var Oa=null,Na=0;Na<ya.fields.length;Na++){var Ca=ya.fields[Na];Ca.name.toLowerCase()===O.toString().toLowerCase()&&(Oa=Ca)}if(null===Oa)throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.FieldNotFound,null,{key:O});var V,oa;null===da&&Ha&&ya.typeIdField&&(da=Ha.hasField(ya.typeIdField)?Ha.field(ya.typeIdField):null);null!==da&&void 0!==da&&ya.types.some(function(pa){return pa.id===
da?((V=pa.domains&&pa.domains[Oa.name])&&"inherited"===V.type&&(V=va(Oa.name,ya),oa=!0),!0):!1});oa||V||(V=va(O,ya));return{field:Oa,domain:V}}function va(O,ya){var Ha;ya.fields.some(function(da){da.name.toLowerCase()===O.toLowerCase()&&(Ha=da.domain);return!!Ha});return Ha}function Ga(O,ya){ya||(ya={});"function"===typeof ya&&(ya={cmp:ya});var Ha="boolean"===typeof ya.cycles?ya.cycles:!1,da=ya.cmp&&function(Na){return function(Ca){return function(V,oa){return Na({key:V,value:Ca[V]},{key:oa,value:Ca[oa]})}}}(ya.cmp),
Oa=[];return function V(Ca){Ca&&Ca.toJson&&"function"===typeof Ca.toJson&&(Ca=Ca.toJson());if(void 0!==Ca){if("number"===typeof Ca)return isFinite(Ca)?""+Ca:"null";if("object"!==typeof Ca)return JSON.stringify(Ca);var oa;if(Array.isArray(Ca)){var pa="[";for(oa=0;oa<Ca.length;oa++)oa&&(pa+=","),pa+=V(Ca[oa])||"null";return pa+"]"}if(null===Ca)return"null";if(Oa.includes(Ca)){if(Ha)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var Y=Oa.push(Ca)-1,ka=
Object.keys(Ca).sort(da&&da(Ca));pa="";for(oa=0;oa<ka.length;oa++){var ta=ka[oa],xa=V(Ca[ta]);xa&&(pa&&(pa+=","),pa+=JSON.stringify(ta)+":"+xa)}Oa.splice(Y,1);return"{"+pa+"}"}}(O)}function ca(O,ya){if(ya instanceof k)O.push([ya.x,ya.y]);else throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.InvalidParameter,null);}function ja(O,ya){void 0===ya&&(ya=null);if(null!=O){if(H(O)||J(O)||F(O))return O;if(O instanceof q)return!0===(null===ya||void 0===ya?void 0:ya.keepGeometryType)?O:O.toJson();
if(O instanceof e)return O.toArray().map(function(Ha){return ja(Ha,ya)});if(O instanceof Array)return O.map(function(Ha){return ja(Ha,ya)});if(Z(O))return O;if(L(O))return O.toJSDate();if(null!==O&&"object"===typeof O&&void 0!==O.castAsJson)return O.castAsJson(ya)}return null}function wa(O,ya,Ha,da,Oa){return l(this,void 0,void 0,function(){var Na;return d(this,function(Ca){switch(Ca.label){case 0:return[4,za(O,ya,Ha)];case 1:return Na=Ca.sent(),Oa[da]=Na,[2]}})})}function za(O,ya,Ha){void 0===ya&&
(ya=null);void 0===Ha&&(Ha=null);return l(this,void 0,void 0,function(){var da,Oa,Na,Ca,V;return d(this,function(oa){switch(oa.label){case 0:return O instanceof e&&(O=O.toArray()),null!=O?[3,1]:[2,null];case 1:return G(O)||O instanceof q||Z(O)||L(O)?[2,ja(O,Ha)]:[3,2];case 2:if(!(O instanceof Array))return[3,5];da=[];Oa=[];Na=0;for(Ca=O;Na<Ca.length;Na++)V=Ca[Na],null===V||G(V)||V instanceof q||Z(V)||L(V)?Oa.push(ja(V,Ha)):(Oa.push(null),da.push(wa(V,ya,Ha,Oa.length-1,Oa)));return 0<da.length?[4,
Promise.all(da)]:[3,4];case 3:oa.sent(),oa.label=4;case 4:return[2,Oa];case 5:if(null!==O&&"object"===typeof O&&void 0!==O.castAsJsonAsync)return[2,O.castAsJsonAsync(ya,Ha)];oa.label=6;case 6:return[2,null]}})})}Object.defineProperty(B,"__esModule",{value:!0});B.featureSchema=B.defaultTimeZone=B.featureDomainCodeLookup=B.featureDomainValueLookup=B.featureSubtypes=B.featureFullDomain=B.castAsJsonAsync=B.castAsJson=B.binaryOperator=B.tick=B.toStringArray=B.autoCastArrayOfPointsToMultiPoint=B.autoCastArrayOfPointsToPolyline=
B.autoCastArrayOfPointsToPolygon=B.autoCastFeatureToGeometry=B.stableStringify=B.getDomain=B.getDomainCode=B.getDomainValue=B.fixNullGeometry=B.fixSpatialReference=B.toBoolean=B.toDate=B.toNumber=B.toStringExplicit=B.toNumberArray=B.toString=B.equalityTest=B.greaterThanLessThan=B.standardiseDateFormat=B.formatDate=B.formatNumber=B.generateUUID=B.absRound=B.pcCheck=B.isJsDate=B.isObject=B.isDate=B.isImmutableArray=B.isFeatureSetCollection=B.isFeatureSet=B.isFeature=B.isArray=B.isInteger=B.isNumber=
B.isBoolean=B.isString=B.getType=B.defaultUndefined=B.isSimpleType=B.isModule=B.isFunctionParameter=B.multiReplace=B.continueResult=B.breakResult=B.voidOperation=B.ReturnResult=B.ImplicitResult=B.ImplicitResultE=B.ReturnResultE=void 0;f=function(){return function(O){this.value=O}}();B.ReturnResultE=f;c=function(){return function(O){this.value=O}}();B.ImplicitResultE=c;B.ImplicitResult=c;B.ReturnResult=f;B.voidOperation={type:"VOID"};B.breakResult={type:"BREAK"};B.continueResult={type:"CONTINUE"};
B.multiReplace=z;B.isFunctionParameter=w;B.isModule=A;B.isSimpleType=G;B.defaultUndefined=function(O,ya){return void 0===O?ya:O};B.getType=function(O){return null==O?"":K(O)||N(O)?"Array":L(O)?"Date":F(O)?"String":H(O)?"Boolean":J(O)?"Number":"esri.arcade.Attachment"===(null===O||void 0===O?void 0:O.declaredClass)?"Attachment":"esri.arcade.Portal"===(null===O||void 0===O?void 0:O.declaredClass)?"Portal":"esri.arcade.Dictionary"===(null===O||void 0===O?void 0:O.declaredClass)?"Dictionary":O instanceof
E.ArcadeModule?"Module":Q(O)?"Feature":O instanceof k?"Point":O instanceof g?"Polygon":O instanceof b?"Polyline":O instanceof n?"Multipoint":O instanceof h?"Extent":w(O)?"Function":P(O)?"FeatureSet":I(O)?"FeatureSetCollection":O===B.voidOperation?"":"number"===typeof O&&isNaN(O)?"Number":"Unrecognised Type"};B.isString=F;B.isBoolean=H;B.isNumber=J;B.isInteger=function(O){return"number"===typeof O&&isFinite(O)&&Math.floor(O)===O};B.isArray=K;B.isFeature=Q;B.isFeatureSet=P;B.isFeatureSetCollection=
I;B.isImmutableArray=N;B.isDate=L;B.isObject=W;B.isJsDate=Z;B.pcCheck=function(O,ya,Ha,da,Oa){if(O.length<ya||O.length>Ha)throw new C.ArcadeExecutionError(da,C.ExecutionErrorCodes.WrongNumberOfParameters,Oa);};B.absRound=function(O){return 0>O?-Math.round(-O):Math.round(O)};B.generateUUID=function(){var O=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ya){var Ha=(O+16*Math.random())%16|0;O=Math.floor(O/16);return("x"===ya?Ha:Ha&3|8).toString(16)})};B.formatNumber=
aa;B.formatDate=ia;B.standardiseDateFormat=R;B.greaterThanLessThan=function(O,ya,Ha){if(null===O){if(null===ya||ya===B.voidOperation)return S(null,null,Ha);if(J(ya))return S(0,ya,Ha);if(F(ya)||H(ya))return S(0,ha(ya),Ha);if(L(ya))return S(0,ya.toNumber(),Ha)}if(O===B.voidOperation){if(null===ya||ya===B.voidOperation)return S(null,null,Ha);if(J(ya))return S(0,ya,Ha);if(F(ya)||H(ya))return S(0,ha(ya),Ha);if(L(ya))return S(0,ya.toNumber(),Ha)}else if(J(O)){if(J(ya))return S(O,ya,Ha);if(H(ya))return S(O,
ha(ya),Ha);if(null===ya||ya===B.voidOperation)return S(O,0,Ha);if(F(ya))return S(O,ha(ya),Ha);if(L(ya))return S(O,ya.toNumber(),Ha)}else if(F(O)){if(F(ya))return S(X(O),X(ya),Ha);if(L(ya))return S(ha(O),ya.toNumber(),Ha);if(J(ya))return S(ha(O),ya,Ha);if(null===ya||ya===B.voidOperation)return S(ha(O),0,Ha);if(H(ya))return S(ha(O),ha(ya),Ha)}else if(L(O)){if(L(ya))return S(O.toNumber(),ya.toNumber(),Ha);if(null===ya||ya===B.voidOperation)return S(O.toNumber(),0,Ha);if(J(ya))return S(O.toNumber(),ya,
Ha);if(H(ya)||F(ya))return S(O.toNumber(),ha(ya),Ha)}else if(H(O)){if(H(ya))return S(O,ya,Ha);if(J(ya))return S(ha(O),ha(ya),Ha);if(L(ya))return S(ha(O),ya.toNumber(),Ha);if(null===ya||ya===B.voidOperation)return S(ha(O),0,Ha);if(F(ya))return S(ha(O),ha(ya),Ha)}return!M(O,ya)||"\x3c\x3d"!==Ha&&"\x3e\x3d"!==Ha?!1:!0};B.equalityTest=M;B.toString=X;B.toNumberArray=function(O){var ya=[];if(!K(O))return null;if(O instanceof e){for(var Ha=0;Ha<O.length();Ha++)ya[Ha]=ha(O.get(Ha));return ya}for(Ha=0;Ha<
O.length;Ha++)ya[Ha]=ha(O[Ha]);return ya};B.toStringExplicit=fa;B.toNumber=ha;B.toDate=function(O,ya){if(L(O))return O;if(F(O)){a:{var Ha=/ (\d\d)/,da=a.createDateTimeZone(ya);da=x.DateTime.fromISO(O,{zone:da});if(da.isValid)ya=da;else{if(Ha.test(O)&&(O=O.replace(Ha,"T$1"),da=x.DateTime.fromISO(O,{zone:ya}),da.isValid)){ya=da;break a}ya=null}}if(ya)return a.ArcadeDate.dateTimeToArcadeDate(ya)}return null};B.toBoolean=function(O){return H(O)?O:F(O)?(O=O.toLowerCase(),"true"===O?!0:!1):J(O)?0===O||
isNaN(O)?!1:!0:!1};B.fixSpatialReference=function(O,ya){if(null===O||void 0===O)return null;if(null===O.spatialReference||void 0===O.spatialReference)O.spatialReference=ya;return O};B.fixNullGeometry=function(O){if(null===O)return null;if(O instanceof k)return"NaN"===O.x||null===O.x||isNaN(O.x)?null:O;if(O instanceof g){if(0===O.rings.length)return null;for(var ya=0,Ha=O.rings;ya<Ha.length;ya++){var da=Ha[ya];if(0<da.length)return O}return null}if(O instanceof b){if(0===O.paths.length)return null;
ya=0;for(Ha=O.paths;ya<Ha.length;ya++)if(da=Ha[ya],0<da.length)return O;return null}return O instanceof n?0===O.points.length?null:O:O instanceof h?"NaN"===O.xmin||null===O.xmin||isNaN(O.xmin)?null:O:null};B.getDomainValue=ra;B.getDomainCode=Aa;B.getDomain=Ea;B.stableStringify=Ga;B.autoCastFeatureToGeometry=function(O){if(null===O)return null;for(var ya=[],Ha=0;Ha<O.length;Ha++){var da=O[Ha];da&&da.arcadeDeclaredClass&&"esri.arcade.Feature"===da.arcadeDeclaredClass?ya.push(da.geometry()):ya.push(da)}return ya};
B.autoCastArrayOfPointsToPolygon=function(O,ya){if(K(O)||N(O)){var Ha=!1,da=!1,Oa=[];if(K(O)){for(var Na=0;Na<O.length;Na++){var Ca=O[Na];ca(Oa,Ca)}0<Oa.length&&(ya=O[0].spatialReference,Ha=O[0].hasZ,da=O[0].hasM)}else if(O instanceof m)Oa=O._elements,0<Oa.length&&(Ha=O._hasZ,da=O._hasM,ya=O.get(0).spatialReference);else if(N(O)){Na=0;for(var V=O.toArray();Na<V.length;Na++)Ca=V[Na],ca(Oa,Ca);0<Oa.length&&(ya=O.get(0).spatialReference,Ha=!0===O.get(0).hasZ,da=!0===O.get(0).hasM)}else throw new C.ArcadeExecutionError(null,
C.ExecutionErrorCodes.InvalidParameter,null);if(0===Oa.length)return null;(new g({rings:[],spatialReference:{wkid:4326}})).isClockwise(Oa)||(Oa=Oa.slice(0).reverse());return new g({rings:[Oa],spatialReference:ya,hasZ:Ha,hasM:da})}return O};B.autoCastArrayOfPointsToPolyline=function(O,ya){if(K(O)||N(O)){var Ha=!1,da=!1,Oa=[];if(K(O)){for(var Na=0;Na<O.length;Na++){var Ca=O[Na];ca(Oa,Ca)}0<Oa.length&&(ya=O[0].spatialReference,Ha=!0===O[0].hasZ,da=!0===O[0].hasM)}else if(O instanceof m)Oa=O._elements,
0<Oa.length&&(Ha=O._hasZ,da=O._hasM,ya=O.get(0).spatialReference);else if(N(O)){Na=0;for(var V=O.toArray();Na<V.length;Na++)Ca=V[Na],ca(Oa,Ca);0<Oa.length&&(ya=O.get(0).spatialReference,Ha=!0===O.get(0).hasZ,da=!0===O.get(0).hasM)}return 0===Oa.length?null:new b({paths:[Oa],spatialReference:ya,hasZ:Ha,hasM:da})}return O};B.autoCastArrayOfPointsToMultiPoint=function(O,ya){if(K(O)||N(O)){var Ha=!1,da=!1,Oa=[];if(K(O)){for(var Na=0;Na<O.length;Na++){var Ca=O[Na];ca(Oa,Ca)}0<Oa.length&&(ya=O[0].spatialReference,
Ha=!0===O[0].hasZ,da=!0===O[0].hasM)}else if(O instanceof m)Oa=O._elements,0<Oa.length&&(Ha=O._hasZ,da=O._hasM,ya=O.get(0).spatialReference);else if(N(O)){Na=0;for(var V=O.toArray();Na<V.length;Na++)Ca=V[Na],ca(Oa,Ca);0<Oa.length&&(ya=O.get(0).spatialReference,Ha=!0===O.get(0).hasZ,da=!0===O.get(0).hasM)}return 0===Oa.length?null:new n({points:Oa,spatialReference:ya,hasZ:Ha,hasM:da})}return O};B.toStringArray=function(O,ya){void 0===ya&&(ya=!1);var Ha=[];if(null===O)return Ha;if(!0===K(O)){for(var da=
0;da<O.length;da++){var Oa=X(O[da]);""===Oa&&!0!==ya||Ha.push(Oa)}return Ha}if(O instanceof e){for(da=0;da<O.length();da++)Oa=X(O.get(da)),""===Oa&&!0!==ya||Ha.push(Oa);return Ha}return G(O)?(Oa=X(O),""===Oa&&!0!==ya||Ha.push(Oa),Ha):[]};var Fa=0;B.tick=function(O){Fa++;return 0===Fa%100?(Fa=0,new Promise(function(ya){setTimeout(function(){ya(O)},0)})):O};B.binaryOperator=function(O,ya,Ha){switch(Ha){case "\x26":return O&ya;case "|":return O|ya;case "^":return O^ya;case "\x3c\x3c":return O<<ya;case "\x3e\x3e":return O>>
ya;case "\x3e\x3e\x3e":return O>>>ya}};B.castAsJson=ja;B.castAsJsonAsync=za;B.featureFullDomain=function(O,ya,Ha){var da=O.fullSchema();return null!==da&&da.fields?Ea(ya,da,O,Ha):null};B.featureSubtypes=function(O){O=O.fullSchema();return null!==O&&O.fields?O.typeIdField?{subtypeField:O.typeIdField,subtypes:O.types?O.types.map(function(ya){return{name:ya.name,code:ya.id}}):[]}:null:null};B.featureDomainValueLookup=function(O,ya,Ha,da){var Oa=O.fullSchema();if(null===Oa||!Oa.fields)return null;da=
Ea(ya,Oa,O,da);if(void 0===Ha)try{Ha=O.field(ya)}catch(Na){return null}return ra(da,Ha)};B.featureDomainCodeLookup=function(O,ya,Ha,da){var Oa=O.fullSchema();if(null===Oa||!Oa.fields)return null;if(void 0===Ha){try{Ha=O.field(ya)}catch(Na){return null}return Ha}O=Ea(ya,Oa,O,da);return Aa(O,Ha)};B.defaultTimeZone=function(O){var ya,Ha;return(null===(ya=null===O||void 0===O?void 0:O.timeReference)||void 0===ya?0:ya.timeZone)?null===(Ha=null===O||void 0===O?void 0:O.timeReference)||void 0===Ha?void 0:
Ha.timeZone:"system"};B.featureSchema=function(O){O=O.fullSchema();if(null===O||!O.fields)return null;for(var ya=[],Ha=0,da=O.fields;Ha<da.length;Ha++)ya.push(D.esriFieldToJson(da[Ha]));return{objectIdField:O.objectIdField,globalIdField:O.globalIdField,geometryType:void 0===D.layerGeometryEsriRestConstants[O.geometryType]?"":D.layerGeometryEsriRestConstants[O.geometryType],fields:ya}}})},"esri/arcade/FunctionWrapper":function(){define("require exports ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./polyfill/tsSupport/extends ./polyfill/promiseUtils".split(" "),
function(f,B,l,d,c,u){function t(m,a,h){if(m instanceof e&&!(m instanceof r)){var q=new r;q.fn=m;q.parameterEvaluator=h;q.context=a;return q}return m}Object.defineProperty(B,"__esModule",{value:!0});B.ScopeMarshalledFunction=B.NativeFunction=B.wrapModuleScopedResponse=B.ArcadeFunction=void 0;var e=function(){return function(){}}();B.ArcadeFunction=e;B.wrapModuleScopedResponse=t;f=function(m){function a(h){var q=m.call(this)||this;q.fn=h;return q}c(a,m);a.prototype.createFunction=function(h){var q=
this;return function(){for(var n=[],k=0;k<arguments.length;k++)n[k]=arguments[k];return q.fn(h,{preparsed:!0,arguments:n})}};a.prototype.call=function(h,q){return this.fn(h,q)};a.prototype.marshalledCall=function(h,q,n,k){var g=this;return k(h,q,function(b,x,v){v=v.map(function(y){return y instanceof e&&!(y instanceof r)?t(y,h,k):y});b=g.call(n,{args:v});return u.isPromiseLike(b)?b.then(function(y){return t(y,n,k)}):b})};return a}(e);B.NativeFunction=f;var r=function(m){function a(){var h=null!==
m&&m.apply(this,arguments)||this;h.fn=null;h.context=null;return h}c(a,m);a.prototype.createFunction=function(h){return this.fn.createFunction(this.context)};a.prototype.call=function(h,q){return this.fn.marshalledCall(h,q,this.context,this.parameterEvaluator)};a.prototype.marshalledCall=function(h,q,n){return this.fn.marshalledCall(h,q,this.context,this.parameterEvaluator)};return a}(e);B.ScopeMarshalledFunction=r})},"esri/arcade/polyfill/promiseUtils":function(){define(["require","exports","dojo/Deferred"],
function(f,B,l){function d(u){void 0===u&&(u=void 0);var t=new l;t.resolve(u);return t.promise}function c(u){return u&&"function"===typeof u.then?u:d(u)}Object.defineProperty(B,"__esModule",{value:!0});B.create=B.when=B.resolve=B.isPromiseLike=void 0;B.isPromiseLike=function(u){return u&&"function"===typeof u.then};B.resolve=d;B.when=c;B.create=function(u,t){var e=new l(t);u(function(r){return c(r).then(e.resolve)},e.reject);return e.promise}})},"esri/arcade/ImmutablePathArray":function(){define(["require",
"exports","./polyfill/tsSupport/extends","./ImmutableArray","./ImmutablePointArray"],function(f,B,l,d,c){return function(u){function t(e,r,m,a,h){e=u.call(this,e)||this;e._lazyPath=[];e._hasZ=!1;e._hasM=!1;e._hasZ=m;e._hasM=a;e._spRef=r;e._cacheId=h;return e}l(t,u);t.prototype.get=function(e){if(void 0===this._lazyPath[e]){var r=this._elements[e];if(void 0===r)return;this._lazyPath[e]=new c(r,this._spRef,this._hasZ,this._hasM,this._cacheId,e)}return this._lazyPath[e]};t.prototype.equalityTest=function(e){return e===
this?!0:null===e||!1===e instanceof t?!1:e.getUniqueHash()===this.getUniqueHash()};t.prototype.getUniqueHash=function(){return this._cacheId.toString()};return t}(d)})},"esri/arcade/ImmutablePointArray":function(){define(["require","exports","./polyfill/tsSupport/extends","./ImmutableArray","../geometry/Point"],function(f,B,l,d,c){return function(u){function t(e,r,m,a,h,q){e=u.call(this,e)||this;e._lazyPt=[];e._hasZ=!1;e._hasM=!1;e._spRef=r;e._hasZ=m;e._hasM=a;e._cacheId=h;e._partId=q;return e}l(t,
u);t.prototype.get=function(e){if(void 0===this._lazyPt[e]){var r=this._elements[e];if(void 0===r)return;var m=this._hasZ,a=this._hasM,h=null;h=m&&!a?new c(r[0],r[1],r[2],void 0,this._spRef):a&&!m?new c(r[0],r[1],void 0,r[2],this._spRef):m&&a?new c(r[0],r[1],r[2],r[3],this._spRef):new c(r[0],r[1],this._spRef);h.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+"-"+e.toString());this._lazyPt[e]=h}return this._lazyPt[e]};t.prototype.equalityTest=function(e){return e===
this?!0:null===e||!1===e instanceof t?!1:e.getUniqueHash()===this.getUniqueHash()};t.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return t}(d)})},"esri/arcade/featureset/support/shared":function(){define("require exports ../../polyfill/tsSupport/assign ../../polyfill/tsSupport/spreadarray ../../ArcadeDate ../../../geometry/Extent ../../../layers/Field".split(" "),function(f,B,l,d,c,u,t){function e(a){var h=null;a.domain&&(h="range"===a.domain.type?
{type:"range",range:[a.domain.minValue,a.domain.maxValue]}:{type:"codedValue",codedValues:a.domain.toJson().codedValues});return l(l({name:a.name,type:a.type,alias:a.alias},void 0!==a.length?{length:a.length}:{}),{editable:!0===a.editable,nullable:!0===a.nullable,domain:h})}function r(a){return a instanceof Date}function m(a){return a instanceof c.ArcadeDate}Object.defineProperty(B,"__esModule",{value:!0});B.stableStringify=B.extractServiceUrl=B.toEsriGeometryType=B.layerFieldEsriConstants=B.layerGeometryEsriRestConstants=
B.layerGeometryEsriConstants=B.callback=B.errback=B.defaultMaxRecords=B.sameGeomType=B.convertLinearUnitsToCode=B.shapeExtent=B.convertSquareUnitsToCode=B.cloneAttributes=B.equalityTest=B.isArcadeDate=B.isDate=B.isArray=B.isNumber=B.isBoolean=B.isString=B.IdState=B.esriFieldToJson=B.cloneField=B.FeatureServiceDatabaseType=void 0;(function(a){a[a.Standardised=0]="Standardised";a[a.StandardisedNoInterval=1]="StandardisedNoInterval";a[a.SqlServer=2]="SqlServer";a[a.Oracle=3]="Oracle";a[a.Postgres=4]=
"Postgres";a[a.PGDB=5]="PGDB";a[a.FILEGDB=6]="FILEGDB";a[a.NotEvaluated=7]="NotEvaluated"})(B.FeatureServiceDatabaseType||(B.FeatureServiceDatabaseType={}));B.cloneField=function(a){return new t(e(a))};B.esriFieldToJson=e;(function(a){a[a.InFeatureSet=0]="InFeatureSet";a[a.NotInFeatureSet=1]="NotInFeatureSet";a[a.Unknown=2]="Unknown"})(B.IdState||(B.IdState={}));B.isString=function(a){return"string"===typeof a||a instanceof String};B.isBoolean=function(a){return"boolean"===typeof a};B.isNumber=function(a){return"number"===
typeof a};B.isArray=function(a){return a instanceof Array};B.isDate=r;B.isArcadeDate=m;B.equalityTest=function(a,h){return a===h?!0:(r(a)||m(a))&&(r(h)||m(h))?a.getTime()===h.getTime():!1};B.cloneAttributes=function(a){var h={},q;for(q in a)h[q]=a[q];return h};B.convertSquareUnitsToCode=function(a){if(null==a)return null;if("number"===typeof a)return a;switch(a.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109439;case "kilometers":case "kilometer":case "km":return 109414}return null};
B.shapeExtent=function(a){if(null==a)return null;switch(a.type){case "polygon":case "multipoint":case "polyline":return a.getExtent();case "point":return new u({xmin:a.x,ymin:a.y,xmax:a.x,ymax:a.y,spatialReference:a.spatialReference});case "extent":return a}return null};B.convertLinearUnitsToCode=function(a){if(null==a)return null;if("number"===typeof a||"number"===typeof a)return a;switch(a.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9093;case "kilometers":case "kilometer":case "km":return 9036}return null};
B.sameGeomType=function(a,h){return a===h||"point"===a&&"esriGeometryPoint"===h||"polyline"===a&&"esriGeometryPolyline"===h||"polygon"===a&&"esriGeometryPolygon"===h||"extent"===a&&"esriGeometryEnvelope"===h||"multipoint"===a&&"esriGeometryMultipoint"===h||"point"===h&&"esriGeometryPoint"===a||"polyline"===h&&"esriGeometryPolyline"===a||"polygon"===h&&"esriGeometryPolygon"===a||"extent"===h&&"esriGeometryEnvelope"===a||"multipoint"===h&&"esriGeometryMultipoint"===a?!0:!1};B.defaultMaxRecords=1E3;
B.errback=function(a){return function(h){a.reject(h)}};B.callback=function(a,h){return function(){try{a.apply(null,arguments)}catch(q){h.reject(q)}}};B.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};B.layerGeometryEsriRestConstants={point:"esriGeometryPoint",
polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};B.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger","long":"esriFieldTypeLong",
single:"esriFieldTypeSingle","double":"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",
esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};B.toEsriGeometryType=function(a){switch(a){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";
case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};B.extractServiceUrl=function(a){if(void 0===a)return"";a=a.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");a=a.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return a=a.split("?")[0]};B.stableStringify=function(a,h){h||(h={});"function"===typeof h&&(h={cmp:h});var q="boolean"===typeof h.cycles?h.cycles:!1,n=h.cmp&&function(g){return function(b){return function(x,v){return g({key:x,value:b[x]},{key:v,value:b[v]})}}}(h.cmp),
k=[];return function x(b){b&&b.toJson&&"function"===typeof b.toJson&&(b=b.toJson());if(void 0!==b){if("number"===typeof b)return isFinite(b)?""+b:"null";if("object"!==typeof b)return JSON.stringify(b);var v;if(Array.isArray(b)){var y="[";for(v=0;v<b.length;v++)v&&(y+=","),y+=x(b[v])||"null";return y+"]"}if(null===b)return"null";if(k.includes(b)){if(q)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var D=k.push(b)-1,E=Object.keys(b).sort(n&&n(b));y=
"";for(v=0;v<E.length;v++){var C=E[v],z=x(b[C]);z&&(y&&(y+=","),y+=JSON.stringify(C)+":"+z)}k.splice(D,1);return"{"+y+"}"}}(a)}})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./RangeDomain ./CodedValueDomain".split(" "),function(f,B,l,d,c,u,t){f=f(null,{declaredClass:"esri.layers.Field",constructor:function(e){if(e&&B.isObject(e)&&(this.name=e.name,this.type=e.type,this.alias=e.alias,this.length=e.length,this.editable=e.editable,this.nullable=
e.nullable,this.defaultValue=e.defaultValue,this.description=e.description?JSON.parse(e.description):null,this.isViewOverride=!!e.isViewOverride,(e=e.domain)&&B.isObject(e)))switch(e.type){case "range":this.domain=new u(e);break;case "codedValue":this.domain=new t(e)}},toJson:function(){return c.fixJson({name:this.name,type:this.type,alias:this.alias,length:this.length,editable:this.editable,nullable:this.nullable,defaultValue:this.defaultValue,description:this.description?JSON.stringify(this.description):
null,domain:this.domain?this.domain.toJson():null,isViewOverride:this.isViewOverride||void 0})},toJSON:function(){return this.toJson()}});B.setObject("layers.Field",f,d);return f})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(f,B,l,d,c,u){f=f([u],{declaredClass:"esri.layers.RangeDomain",constructor:function(t){t&&B.isObject(t)&&(this.minValue=t.range[0],this.maxValue=t.range[1])},toJson:function(){var t=this.inherited(arguments);
t.range=[this.minValue,this.maxValue];return c.fixJson(t)}});B.setObject("layers.RangeDomain",f,d);return f})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(f,B,l,d,c){f=f(null,{declaredClass:"esri.layers.Domain",constructor:function(u){u&&B.isObject(u)&&(this.name=u.name,this.type=u.type)},toJson:function(){return c.fixJson({name:this.name,type:this.type})}});B.setObject("layers.Domain",f,d);return f})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),
function(f,B,l,d,c,u,t){f=f([t],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(e){e&&B.isObject(e)&&(this.codedValues=e.codedValues)},getName:function(e){var r;l.some(this.codedValues,function(m){m.code==e&&(r=m.name);return!!r});return r},toJson:function(){var e=this.inherited(arguments);e.codedValues=B.clone(this.codedValues);return u.fixJson(e)}});B.setObject("layers.CodedValueDomain",f,c);return f})},"esri/arcade/ArcadeModule":function(){define(["require","exports"],function(f,
B){Object.defineProperty(B,"__esModule",{value:!0});B.ArcadeModule=void 0;f=function(){return function(l){this.source=l}}();B.ArcadeModule=f})},"esri/arcade/Feature":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/jsonUtils ./polyfill/maybe ./ArcadeDate ./executionError".split(" "),function(f,B,
l,d,c,u,t,e,r,m,a,h,q,n,k){return function(){function g(){this.arcadeDeclaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=null;this._datesfixed=!0;this.contextTimeReference=this.dateTimeReferenceFieldIndex=null;this.immutable=!0;this._datefields=null;this.immutable=!0}g.createFromGraphic=function(b,x){var v=new g;v.contextTimeReference=null!==x&&void 0!==x?x:null;v._geometry=q.isSome(b.geometry)?b.geometry:null;v.attributes=void 0===b.attributes?{}:null===b.attributes?{}:
b.attributes;b._sourceLayer?(v._layer=b._sourceLayer,v._datesfixed=!1):b._layer?(v._layer=b._layer,v._datesfixed=!1):b.layer&&"fields"in b.layer?(v._layer=b.layer,v._datesfixed=!1):b.sourceLayer&&"fields"in b.sourceLayer&&(v._layer=b.sourceLayer,v._datesfixed=!1);return v};g.createFromArcadeFeature=function(b){var x=new g;x._datesfixed=b._datesfixed;x.attributes=b.attributes;x._geometry=b._geometry;b._layer&&(x._layer=b._layer);x.dateTimeReferenceFieldIndex=b.dateTimeReferenceFieldIndex;x.contextTimeReference=
b.contextTimeReference;return x};g.createFromArcadeDictionary=function(b){var x=new g;x.attributes=b.field("attributes");null!==x.attributes?x.attributes instanceof t?(x.attributes=x.attributes.attributes,null===x.attributes&&(x.attributes={})):x.attributes={}:x.attributes={};x._geometry=b.field("geometry");null!==x._geometry&&(x._geometry instanceof t?x._geometry=g.parseGeometryFromDictionary(x._geometry):x._geometry instanceof m||(x._geometry=null));return x};g.createFromGraphicLikeObject=function(b,
x,v,y){void 0===v&&(v=null);var D=new g;D.contextTimeReference=null!==y&&void 0!==y?y:null;null===x&&(x={});D.attributes=x;D._geometry=b?b:null;D._layer=v;D._layer&&(D._datesfixed=!1);return D};g.prototype.repurposeFromGraphicLikeObject=function(b,x,v){void 0===v&&(v=null);null===x&&(x={});this.attributes=x;this._geometry=b?b:null;this._datesfixed=(this._layer=v)?!1:!0};Object.defineProperty(g.prototype,"layerPreferredTimeZone",{get:function(){var b,x;return null!==(x=null===(b=this.dateTimeReferenceFieldIndex)||
void 0===b?void 0:b.layerPreferredTimeZone)&&void 0!==x?x:""},enumerable:!1,configurable:!0});g.prototype.fieldSourceTimeZone=function(b){var x,v;return null!==(v=null===(x=this.dateTimeReferenceFieldIndex)||void 0===x?void 0:x.fieldTimeZone(b))&&void 0!==v?v:""};g.prototype.castToText=function(b){void 0===b&&(b=!1);var x="";!1===this._datesfixed&&this._fixDates();for(var v in this.attributes){""!==x&&(x+=",");var y=this.attributes[v];null==y?x+=JSON.stringify(v)+":null":r.isBoolean(y)||r.isNumber(y)||
r.isString(y)?x+=JSON.stringify(v)+":"+JSON.stringify(y):y instanceof m?x+=JSON.stringify(v)+":"+r.toStringExplicit(y):y instanceof e?x+=JSON.stringify(v)+":"+r.toStringExplicit(y,null,b):y instanceof Array?x+=JSON.stringify(v)+":"+r.toStringExplicit(y,null,b):y instanceof n.ArcadeDate?x=b?x+(JSON.stringify(v)+":"+JSON.stringify(y.getTime())):x+(JSON.stringify(v)+":"+y.stringify()):null!==y&&"object"===typeof y&&void 0!==y.castToText&&(x+=JSON.stringify(v)+":"+y.castToText(b))}return'{"geometry":'+
(null===this.geometry()?"null":r.toStringExplicit(this.geometry()))+',"attributes":{'+x+"}}"};g.prototype._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);else{for(var b=[],x=this._layer.fields,v=0;v<x.length;v++){var y=x[v],D=y.type;"date"!==D&&"esriFieldTypeDate"!==D||b.push(y.name)}this._datefields=b;0<b.length&&this._fixDateFields(b)}this._datesfixed=!0};g.prototype.isUnknownDateTimeField=function(b){var x;return"unknown"===(null===
(x=this.dateTimeReferenceFieldIndex)||void 0===x?void 0:x.fieldTimeZone(b))};g.prototype._fixDateFields=function(b){var x,v;this.attributes=c({},this.attributes);var y=null!==(v=null===(x=this.contextTimeReference)||void 0===x?void 0:x.timeZone)&&void 0!==v?v:"system";for(x=0;x<b.length;x++)if(v=this.attributes[b[x]],null!==v)if(void 0===v)for(var D in this.attributes){if(D.toLowerCase()===b[x].toLowerCase()){v=this.attributes[D];if(null!==v){var E=this.isUnknownDateTimeField(D);r.isDate(v)?this.attributes[D]=
v:this.attributes[D]=v instanceof Date?E?n.ArcadeDate.unknownDateJSToArcadeDate(v):n.ArcadeDate.dateJSAndZoneToArcadeDate(v,y):E?n.ArcadeDate.unknownEpochToArcadeDate(v):n.ArcadeDate.epochToArcadeDate(v,y)}break}}else E=this.isUnknownDateTimeField(b[x]),r.isDate(v)?this.attributes[b[x]]=v:this.attributes[b[x]]=v instanceof Date?E?n.ArcadeDate.unknownDateJSToArcadeDate(v):n.ArcadeDate.dateJSAndZoneToArcadeDate(v,y):E?n.ArcadeDate.unknownEpochToArcadeDate(v):n.ArcadeDate.epochToArcadeDate(v,y)};g.prototype.geometry=
function(){if(null===this._geometry)return this._geometry;this._geometry instanceof m||(this._geometry=h.fromJson(this._geometry));return this._geometry};g.prototype.field=function(b){!1===this._datesfixed&&this._fixDates();var x=this.attributes[b];if(void 0!==x)return x;x=b.toLowerCase();for(var v in this.attributes)if(v.toLowerCase()===x)return this.attributes[v];if(this._hasFieldDefinition(x))return null;throw new k.ArcadeExecutionError(null,k.ExecutionErrorCodes.FieldNotFound,null,{key:b});};
g.prototype._hasFieldDefinition=function(b){if(null===this._layer)return!1;for(var x=0;x<this._layer.fields.length;x++)if(this._layer.fields[x].name.toLowerCase()===b)return!0;return!1};g.prototype.setField=function(b,x){if(this.immutable)throw new k.ArcadeExecutionError(null,k.ExecutionErrorCodes.Immutable,null);x instanceof Date&&(x=this.isUnknownDateTimeField(b)?n.ArcadeDate.unknownDateJSToArcadeDate(x):n.ArcadeDate.dateJSToArcadeDate(x));if(!1===r.isSimpleType(x))throw new k.ArcadeExecutionError(null,
k.ExecutionErrorCodes.TypeNotAllowedInFeature,null);var v=b.toLowerCase();if(void 0===this.attributes[b])for(var y in this.attributes)if(y.toLowerCase()===v){this.attributes[y]=x;return}this.attributes[b]=x};g.prototype.hasField=function(b){var x=b.toLowerCase();if(void 0!==this.attributes[b])return!0;for(var v in this.attributes)if(v.toLowerCase()===x)return!0;return this._hasFieldDefinition(x)?!0:!1};g.prototype.keys=function(){var b=[],x={},v;for(v in this.attributes)b.push(v),x[v.toLowerCase()]=
1;if(null!==this._layer)for(v=0;v<this._layer.fields.length;v++){var y=this._layer.fields[v];1!==x[y.name.toLowerCase()]&&b.push(y.name)}return b=b.sort()};g.parseGeometryFromDictionary=function(b){b=g._convertDictionaryToJson(b,!0);void 0!==b.hasm&&(b.hasM=b.hasm,delete b.hasm);void 0!==b.hasz&&(b.hasZ=b.hasz,delete b.hasz);void 0!==b.spatialreference&&(b.spatialReference=b.spatialreference,delete b.spatialreference);void 0!==b.rings&&(b.rings=this._fixPathArrays(b.rings,!0===b.hasZ,!0===b.hasZ));
void 0!==b.paths&&(b.paths=this._fixPathArrays(b.paths,!0===b.hasZ,!0===b.hasM));void 0!==b.points&&(b.points=this._fixPointArrays(b.points,!0===b.hasZ,!0===b.hasM));return h.fromJson(b)};g._fixPathArrays=function(b,x,v){var y=[];if(b instanceof Array)for(var D=0;D<b.length;D++)y.push(this._fixPointArrays(b[D],x,v));else if(b instanceof e)for(D=0;D<b.length();D++)y.push(this._fixPointArrays(b.get(D),x,v));return y};g._fixPointArrays=function(b,x,v){var y=[];if(b instanceof Array)for(var D=0;D<b.length;D++){var E=
b[D];E instanceof a?x&&v?y.push([E.x,E.y,E.z,E.m]):x?y.push([E.x,E.y,E.z]):v?y.push([E.x,E.y,E.m]):y.push([E.x,E.y]):E instanceof e?y.push(E.toArray()):y.push(E)}else if(b instanceof e)for(D=0;D<b.length();D++)E=b.get(D),E instanceof a?x&&v?y.push([E.x,E.y,E.z,E.m]):x?y.push([E.x,E.y,E.z]):v?y.push([E.x,E.y,E.m]):y.push([E.x,E.y]):E instanceof e?y.push(E.toArray()):y.push(E);return y};g._convertDictionaryToJson=function(b,x){void 0===x&&(x=!1);var v={},y;for(y in b.attributes){var D=b.attributes[y];
D instanceof t&&(D=g._convertDictionaryToJson(D));x?v[y.toLowerCase()]=D:v[y]=D}return v};g.parseAttributesFromDictionary=function(b){var x={},v;for(v in b.attributes){var y=b.attributes[v];if(r.isSimpleType(y))x[v]=y;else throw new k.ArcadeExecutionError(null,k.ExecutionErrorCodes.InvalidParameter,null);}return x};g.fromJson=function(b,x){var v=null;null!==b.geometry&&void 0!==b.geometry&&(v=h.fromJson(b.geometry));var y={};if(null!==b.attributes&&void 0!==b.attributes)for(var D in b.attributes){var E=
b.attributes[D];if(null===E)y[D]=E;else if(r.isString(E)||r.isNumber(E)||r.isBoolean(E)||r.isDate(E))y[D]=E;else throw new k.ArcadeExecutionError(null,k.ExecutionErrorCodes.InvalidParameter,null);}return g.createFromGraphicLikeObject(v,y,null,null!==x&&void 0!==x?x:null)};g.prototype.fullSchema=function(){return this._layer};g.prototype.gdbVersion=function(){if(null===this._layer)return"";var b=this._layer.gdbVersion;return void 0===b?"":""===b&&this._layer.capabilities&&this._layer.capabilities.isVersioned?
"SDE.DEFAULT":b};g.prototype.castAsJson=function(b){var x,v,y={attributes:{},geometry:!0===(null===b||void 0===b?void 0:b.keepGeometryType)?this.geometry():null!==(v=null===(x=this.geometry())||void 0===x?void 0:x.toJson())&&void 0!==v?v:null},D;for(D in this.attributes)x=this.attributes[D],void 0!==x&&(y.attributes[D]=r.castAsJson(x,b));return y};g.prototype.castAsJsonAsync=function(b,x){void 0===b&&(b=null);return l(this,void 0,void 0,function(){return d(this,function(v){return[2,this.castAsJson(x)]})})};
return g}()})},"esri/arcade/polyfill/maybe":function(){define(["require","exports"],function(f,B){function l(d,c){if(null==d)throw Error(null!==c&&void 0!==c?c:"value is None");}Object.defineProperty(B,"__esModule",{value:!0});B.unwrapOrThrow=B.assertIsSome=B.isNone=B.isSome=B.none=void 0;B.none=null;B.isSome=function(d){return null!=d};B.isNone=function(d){return null==d};B.assertIsSome=l;B.unwrapOrThrow=function(d,c){l(d,c);return d}})},"esri/arcade/treeAnalysis":function(){define(["require","exports",
"./polyfill/tsSupport/awaiter","./polyfill/tsSupport/generator"],function(f,B,l,d){function c(k){return"string"===typeof k||k instanceof String}function u(k,g){if(k)for(var b=0;b<k.length;b++)t(k[b],g)}function t(k,g){if(k&&!1!==g(k))switch(k.type){case "ImportDeclaration":u(k.specifiers,g);t(k.source,g);break;case "ExportNamedDeclaration":t(k.declaration,g);break;case "ArrayExpression":u(k.elements,g);break;case "AssignmentExpression":case "BinaryExpression":t(k.left,g);t(k.right,g);break;case "BlockStatement":u(k.body,
g);break;case "Program":u(k.body,g);break;case "CallExpression":t(k.callee,g);u(k.arguments,g);break;case "ExpressionStatement":t(k.expression,g);break;case "ForInStatement":t(k.left,g);t(k.right,g);t(k.body,g);break;case "ForStatement":t(k.init,g);t(k.test,g);t(k.update,g);t(k.body,g);break;case "WhileStatement":t(k.test,g);t(k.body,g);break;case "FunctionDeclaration":t(k.id,g);u(k.params,g);t(k.body,g);break;case "IfStatement":t(k.test,g);t(k.consequent,g);t(k.alternate,g);break;case "LogicalExpression":t(k.left,
g);t(k.right,g);break;case "MemberExpression":t(k.object,g);t(k.property,g);break;case "ObjectExpression":u(k.properties,g);break;case "Property":t(k.key,g);t(k.value,g);break;case "ReturnStatement":t(k.argument,g);break;case "UnaryExpression":t(k.argument,g);break;case "UpdateExpression":t(k.argument,g);break;case "VariableDeclaration":u(k.declarations,g);break;case "VariableDeclarator":t(k.id,g);t(k.init,g);break;case "TemplateLiteral":u(k.expressions,g),u(k.quasis,g)}}function e(k,g){var b=!1,
x=g.toLowerCase();t(k,function(v){if(b)return!1;"Identifier"===v.type&&v.name&&v.name.toLowerCase()===x&&(b=!0);return!0});return b}function r(k){var g=[];t(k,function(b){"ImportDeclaration"===b.type&&b.source&&b.source.value&&g.push({libname:b.specifiers[0].local.name.toLowerCase(),source:b.source.value});return!0});return g}function m(k){var g=[];t(k,function(b){"CallExpression"===b.type&&"Identifier"===b.callee.type&&g.push(b.callee.name.toLowerCase());return!0});return g}Object.defineProperty(B,
"__esModule",{value:!0});B.scriptUsesFeatureSet=B.findScriptDependencies=B.findFunctionCalls=B.extractFunctionDeclaration=B.findExpectedFieldLiterals=B.findFieldLiterals=B.referencesFunction=B.findModuleImports=B.referencesMember=B.walk=B.addFunctionDeclaration=B.fullArcadeApiAsync=B.fullArcadeApiSync=void 0;f={all:{min:2,max:2},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},fromcharcode:{min:1,max:-1},tocodepoint:{min:1,
max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,max:2},isoweek:{min:1,max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,max:-1},push:{min:2,max:2},pop:{min:1,
max:1},includes:{min:2,max:2},array:{min:1,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},now:{min:0,max:0},timestamp:{min:0,max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,max:1},weekday:{min:1,max:1},toutc:{min:1,
max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},decode:{min:2,max:-1},when:{min:2,max:-1},defaultvalue:{min:2,max:2},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,max:1},polyline:{min:1,max:1},extent:{min:1,
max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,max:2},round:{min:1,max:2},cos:{min:1,max:1},exp:{min:1,max:1},log:{min:1,max:1},min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},sin:{min:1,max:1},tan:{min:1,max:1},abs:{min:1,
max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,max:-1},typeof:{min:1,max:1},reverse:{min:1,max:1},replace:{min:3,max:4},sort:{min:1,max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,max:2},crosses:{min:2,max:2},within:{min:2,max:2},
contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},area:{min:1,max:2},areageodetic:{min:1,max:2},length:{min:1,max:2},lengthgeodetic:{min:1,max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,max:4},buffer:{min:2,max:3},buffergeodetic:{min:2,
max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,max:1},isselfintersecting:{min:1,max:1},multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1}};B.fullArcadeApiSync={functionDefinitions:new Map,
constantDefinitions:new Map};B.fullArcadeApiAsync={functionDefinitions:new Map,constantDefinitions:new Map};l=0;for(d=["pi","infinity"];l<d.length;l++){var a=d[l];B.fullArcadeApiAsync.constantDefinitions.set(a,{type:"constant"});B.fullArcadeApiSync.constantDefinitions.set(a,{type:"constant"})}B.fullArcadeApiAsync.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},
{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"newline",type:"constant"}]});B.fullArcadeApiSync.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"newline",type:"constant"}]});for(var h in f)l=f[h],B.fullArcadeApiAsync.functionDefinitions.set(h,{overloads:[{type:"function",
parametersInfo:{min:l.min,max:l.max}}]}),B.fullArcadeApiSync.functionDefinitions.set(h,{overloads:[{type:"function",parametersInfo:{min:l.min,max:l.max}}]});var q="featureset featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl getfeatureset getuser attachments featuresetbyportalitem".split(" "),n="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length length3d lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple convexhull simplify multiparttosinglepart".split(" ");
B.addFunctionDeclaration=function(k,g){var b;g="sync"===g?B.fullArcadeApiSync:B.fullArcadeApiAsync;g.functionDefinitions.has(k.name.toLowerCase())?null===(b=g.functionDefinitions.get(k.name.toLowerCase()))||void 0===b?void 0:b.overloads.push({type:"function",parametersInfo:{min:k.min,max:k.max}}):g.functionDefinitions.set(k.name.toLowerCase(),{overloads:[{type:"function",parametersInfo:{min:k.min,max:k.max}}]})};B.walk=t;B.referencesMember=e;B.findModuleImports=r;B.referencesFunction=function(k,g){var b=
!1,x=g.toLowerCase();t(k,function(v){return b?!1:"CallExpression"===v.type&&"Identifier"===v.callee.type&&v.callee.name&&v.callee.name.toLowerCase()===x?(b=!0,!1):!0});return b};B.findFieldLiterals=function(k){var g=[];t(k,function(b){var x;if("MemberExpression"!==b.type||"Identifier"!==b.object.type)return!0;!1===b.computed&&b.object&&b.object.name&&b.property&&"Identifier"===b.property.type&&b.property.name?g.push(b.object.name.toLowerCase()+"."+b.property.name.toLowerCase()):b.object&&b.object.name&&
b.property&&"Literal"===b.property.type&&"string"===typeof b.property.value&&g.push(b.object.name.toLowerCase()+"."+(null===(x=b.property.value)||void 0===x?void 0:x.toString().toLowerCase()));return!1});return g};B.findExpectedFieldLiterals=function(k){var g=[];t(k,function(b){if("CallExpression"===b.type){if("Identifier"===b.callee.type&&"expects"===b.callee.name.toLowerCase()){var x="";for(var v=0;v<(b.arguments||[]).length;v++)0===v?"Identifier"===b.arguments[v].type&&(x=b.arguments[v].name.toLowerCase()):
x&&"Literal"===b.arguments[v].type&&c(b.arguments[v].value)&&g.push(x+"."+b.arguments[v].value.toLowerCase());return!1}if("Identifier"===b.callee.type&&["domainname","domaincode","domain","haskey"].includes(b.callee.name.toLowerCase())&&2<=b.arguments.length)return x="","Identifier"===b.arguments[0].type&&(x=b.arguments[0].name.toLowerCase()),x&&"Literal"===b.arguments[1].type&&c(b.arguments[1].value)&&g.push(x+"."+b.arguments[1].value.toLowerCase()),!1}if("MemberExpression"!==b.type||"Identifier"!==
b.object.type)return!0;!1===b.computed&&b.object&&b.object.name&&b.property&&"Identifier"===b.property.type&&b.property.name?g.push(b.object.name.toLowerCase()+"."+b.property.name.toLowerCase()):b.object&&b.object.name&&b.property&&"Literal"===b.property.type&&"string"===typeof b.property.value&&g.push(b.object.name.toLowerCase()+"."+(null===(x=b.property.value)||void 0===x?void 0:x.toString().toLowerCase()));return!1});return g};B.extractFunctionDeclaration=function(k,g){var b=[];if(void 0!==g.params&&
null!==g.params)for(var x=0;x<g.params.length;x++)b.push("any");return{name:k,return:"any",params:b}};B.findFunctionCalls=m;B.findScriptDependencies=function(k,g){void 0===g&&(g=[]);var b=null;if(void 0===k.usesFeatureSet){null===b&&(b=m(k));k.usesFeatureSet=!1;for(var x=0;x<b.length;x++)q.includes(b[x])&&(k.usesFeatureSet=!0,k.isAsync=!0);if(!1===k.usesFeatureSet&&g&&0<g.length)for(x=0;x<g.length;x++)if(e(k,g[x])){k.usesFeatureSet=!0;k.isAsync=!0;break}}void 0===k.usesModules&&(k.usesModules=!1,
0<r(k).length&&(k.usesModules=!0));if(void 0===k.usesGeometry)for(k.usesGeometry=!1,null===b&&(b=m(k)),x=0;x<b.length;x++)n.includes(b[x])&&(k.usesGeometry=!0)};B.scriptUsesFeatureSet=function(k){k=m(k);for(var g=0;g<k.length;g++)if(q.includes(k[g]))return!0;return!1}})},"esri/arcade/functions/array":function(){define("require exports ../polyfill/tsSupport/awaiter ../polyfill/tsSupport/generator ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../executionError ../ImmutableArray ../languageUtils ../polyfill/promiseUtils".split(" "),
function(f,B,l,d,c,u,t,e,r,m){Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=void 0;B.registerFunctions=function(a){function h(b,x,v){if(b instanceof e)return b.toArray();if(r.isArray(b))return b;throw new t.ArcadeExecutionError(x,t.ExecutionErrorCodes.InvalidParameter,v);}function q(b,x){var v=b.length,y=Math.floor(v/2);if(0===v)return[];if(1===v)return[b[0]];var D=q(b.slice(0,y),x);b=q(b.slice(y,v),x);for(v=[];0<D.length||0<b.length;)0<D.length&&0<b.length?(y=x(D[0],b[0]),
isNaN(y)&&(y=0),0>=y?(v.push(D[0]),D=D.slice(1)):(v.push(b[0]),b=b.slice(1))):0<D.length?(v.push(D[0]),D=D.slice(1)):0<b.length&&(v.push(b[0]),b=b.slice(1));return v}function n(b,x){return l(this,void 0,void 0,function(){var v,y,D,E;return d(this,function(C){switch(C.label){case 0:return v=b.length,y=Math.floor(v/2),0===v?[2,[]]:1===v?[2,[b[0]]]:[4,n(b.slice(0,y),x)];case 1:return E=[C.sent()],[4,n(b.slice(y,v),x)];case 2:return D=E.concat([C.sent()]),[2,k(D[0],D[1],x,[])]}})})}function k(b,x,v,y){return l(this,
void 0,void 0,function(){var D,E;return d(this,function(C){switch(C.label){case 0:return D=y,0<b.length||0<x.length?0<b.length&&0<x.length?[4,v(b[0],x[0])]:[3,2]:[3,4];case 1:return E=C.sent(),isNaN(E)&&(E=1),0>=E?(D.push(b[0]),b=b.slice(1)):(D.push(x[0]),x=x.slice(1)),[2,k(b,x,v,y)];case 2:if(0<b.length)return D.push(b[0]),b=b.slice(1),[2,k(b,x,v,y)];if(0<x.length)return D.push(x[0]),x=x.slice(1),[2,k(b,x,v,y)];C.label=3;case 3:return[3,5];case 4:return[2,y];case 5:return[2]}})})}function g(b,x,
v,y){r.pcCheck(v,1,2,b,x);var D=v[0];r.isImmutableArray(D)&&(D=D.toArray());if(!1===r.isArray(D))throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,x);if(1<v.length){if(!1===r.isFunctionParameter(v[1]))throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,x);var E=D,C=v[1].createFunction(b);return y?n(E,C):E=q(E,function(z,w){return C(z,w)})}b=D;if(0===b.length)return[];v={};for(y=0;y<b.length;y++)x=r.getType(b[y]),""!==x&&(v[x]=!0);if(!0===v.Array||!0===
v.Dictionary||!0===v.Feature||!0===v.Point||!0===v.Polygon||!0===v.Polyline||!0===v.Multipoint||!0===v.Extent||!0===v.Function)return b.slice(0);y=0;x="";for(E in v)y++,x=E;return b=1<y||"String"===x?q(b,function(z,w){if(null===z||void 0===z||z===r.voidOperation)return null===w||void 0===w||w===r.voidOperation?0:1;if(null===w||void 0===w||w===r.voidOperation)return-1;z=r.toString(z);w=r.toString(w);return z<w?-1:z===w?0:1}):"Number"===x?q(b,function(z,w){return z-w}):"Boolean"===x?q(b,function(z,
w){return z===w?0:w?-1:1}):"Date"===x?q(b,function(z,w){return w-z}):b.slice(0)}a.functions.array=function(b,x){return a.standardFunction(b,x,function(v,y,D){r.pcCheck(D,1,2,b,x);v=r.toNumber(D[0]);if(isNaN(v)||!1===r.isInteger(v))throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,x);D=r.defaultUndefined(D[1],null);v=Array(v);v.fill(D);return v})};a.functions.front=function(b,x){return a.standardFunction(b,x,function(v,y,D){r.pcCheck(D,1,1,b,x);if(r.isImmutableArray(D[0])){if(0>=
D[0].length())throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.OutOfBounds,x);return D[0].get(0)}if(r.isArray(D[0])){if(0>=D[0].length)throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.OutOfBounds,x);return D[0][0]}throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,x);})};a.functions.back=function(b,x){return a.standardFunction(b,x,function(v,y,D){r.pcCheck(D,1,1,b,x);if(r.isImmutableArray(D[0])){if(0>=D[0].length())throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.OutOfBounds,
x);return D[0].get(D[0].length()-1)}if(r.isArray(D[0])){if(0>=D[0].length)throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.OutOfBounds,x);return D[0][D[0].length-1]}throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,x);})};a.functions.push=function(b,x){return a.standardFunction(b,x,function(v,y,D){r.pcCheck(D,1,2,b,x);if(r.isArray(D[0]))return D[0][D[0].length]=D[1],D[0].length;throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,x);})};a.functions.pop=
function(b,x){return a.standardFunction(b,x,function(v,y,D){r.pcCheck(D,1,1,b,x);if(r.isArray(D[0])){if(0>=D[0].length)throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.OutOfBounds,x);v=D[0][D[0].length-1];--D[0].length;return v}throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,x);})};a.functions.erase=function(b,x){return a.standardFunction(b,x,function(v,y,D){r.pcCheck(D,2,2,b,x);if(r.isArray(D[0])){v=r.toNumber(D[1]);if(isNaN(v)||!1===r.isInteger(v))throw new t.ArcadeExecutionError(b,
t.ExecutionErrorCodes.InvalidParameter,x);D=D[0];if(0>=D.length)throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.OutOfBounds,x);0>v&&(v=D.length+v);if(0>v)throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.OutOfBounds,x);if(v>=D.length)throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.OutOfBounds,x);D.splice(v,1);return r.voidOperation}throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,x);})};a.functions.insert=function(b,x){return a.standardFunction(b,
x,function(v,y,D){r.pcCheck(D,3,3,b,x);if(r.isArray(D[0])){v=r.toNumber(D[1]);if(isNaN(v)||!1===r.isInteger(v))throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,x);y=D[2];D=D[0];if(v>D.length)throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.OutOfBounds,x);if(0>v&&v<-1*D.length)throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.OutOfBounds,x);if(v===D.length)return D[v]=y,r.voidOperation;D.splice(v,0,y);return r.voidOperation}throw new t.ArcadeExecutionError(b,
t.ExecutionErrorCodes.InvalidParameter,x);})};a.functions.resize=function(b,x){return a.standardFunction(b,x,function(v,y,D){r.pcCheck(D,2,3,b,x);if(r.isArray(D[0])){y=r.toNumber(D[1]);if(isNaN(y)||!1===r.isInteger(y))throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,x);if(0>y)throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,x);v=r.defaultUndefined(D[2],null);D=D[0];if(D.length>=y)return D.length=y,r.voidOperation;var E=D.length;D.length=y;for(y=E;y<
D.length;y++)D[y]=v;return r.voidOperation}throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,x);})};a.functions.includes=function(b,x){return a.standardFunction(b,x,function(v,y,D){r.pcCheck(D,2,2,b,x);if(r.isArray(D[0])){var E=D[1];v=D[0];return-1<v.findIndex(function(z){return r.equalityTest(z,E)})?!0:!1}if(r.isImmutableArray(D[0])){var C=D[1];v=D[0].toArray();return-1<v.findIndex(function(z){return r.equalityTest(z,C)})?!0:!1}throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,
x);})};a.functions.slice=function(b,x){return a.standardFunction(b,x,function(v,y,D){r.pcCheck(D,1,3,b,x);if(r.isArray(D[0])){v=r.toNumber(r.defaultUndefined(D[1],0));y=r.toNumber(r.defaultUndefined(D[2],D[0].length));if(isNaN(v)||!1===r.isInteger(v))throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,x);if(isNaN(y)||!1===r.isInteger(y))throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,x);var E=D[0];return E.slice(v,y)}if(r.isImmutableArray(D[0])){E=D[0];
v=r.toNumber(r.defaultUndefined(D[1],0));y=r.toNumber(r.defaultUndefined(D[2],E.length()));if(isNaN(v)||!1===r.isInteger(v))throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,x);if(isNaN(y)||!1===r.isInteger(y))throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,x);return E.toArray().slice(v,y)}throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,x);})};a.functions.splice=function(b,x){return a.standardFunction(b,x,function(v,y,D){v=
[];for(y=0;y<D.length;y++)r.isArray(D[y])?v.push.apply(v,D[y]):r.isImmutableArray(D[y])?v.push.apply(v,D[y].toArray()):v.push(D[y]);return v})};a.functions.top=function(b,x){return a.standardFunction(b,x,function(v,y,D){r.pcCheck(D,2,2,b,x);if(r.isArray(D[0]))return r.toNumber(D[1])>=D[0].length?D[0].slice(0):D[0].slice(0,r.toNumber(D[1]));if(r.isImmutableArray(D[0]))return r.toNumber(D[1])>=D[0].length()?D[0].slice(0):D[0].slice(0,r.toNumber(D[1]));throw new t.ArcadeExecutionError(b,t.ExecutionErrorCodes.InvalidParameter,
x);})};a.functions.first=function(b,x){return a.standardFunction(b,x,function(v,y,D){r.pcCheck(D,1,1,b,x);return r.isArray(D[0])?0===D[0].length?null:D[0][0]:r.isImmutableArray(D[0])?0===D[0].length()?null:D[0].get(0):null})};"sync"===a.mode&&(a.functions.sort=function(b,x){return a.standardFunction(b,x,function(v,y,D){return g(b,x,D,!1)})},a.functions.any=function(b,x){return a.standardFunction(b,x,function(v,y,D){r.pcCheck(D,2,2,b,x);v=D[1].createFunction(b);y=0;for(D=h(D[0],b,x);y<D.length;y++){var E=
v(D[y]);if(r.isBoolean(E)&&!0===E)return!0}return!1})},a.functions.all=function(b,x){return a.standardFunction(b,x,function(v,y,D){r.pcCheck(D,2,2,b,x);v=D[1].createFunction(b);y=0;for(D=h(D[0],b,x);y<D.length;y++)if(!0!==v(D[y]))return!1;return!0})},a.functions.none=function(b,x){return a.standardFunction(b,x,function(v,y,D){r.pcCheck(D,2,2,b,x);v=D[1].createFunction(b);y=0;for(D=h(D[0],b,x);y<D.length;y++)if(!0===v(D[y]))return!1;return!0})},a.functions.reduce=function(b,x){return a.standardFunction(b,
x,function(v,y,D){r.pcCheck(D,2,3,b,x);var E=D[1].createFunction(b);v=h(D[0],b,x);return 2===D.length?0===v.length?null:v.reduce(function(C,z){C=E(C,z);return C=void 0!==C&&C!==r.voidOperation?C:null}):v.reduce(function(C,z){C=E(C,z);return C=void 0!==C&&C!==r.voidOperation?C:null},D[2])})},a.functions.map=function(b,x){return a.standardFunction(b,x,function(v,y,D){r.pcCheck(D,2,2,b,x);v=D[1].createFunction(b);y=[];var E=0;for(D=h(D[0],b,x);E<D.length;E++){var C=v(D[E]);void 0!==C&&C!==r.voidOperation?
y.push(C):y.push(null)}return y})},a.functions.filter=function(b,x){return a.standardFunction(b,x,function(v,y,D){r.pcCheck(D,2,2,b,x);v=D[1].createFunction(b);y=[];var E=0;for(D=h(D[0],b,x);E<D.length;E++){var C=D[E];!0===v(C)&&y.push(C)}return y})});"async"===a.mode&&(a.functions.sort=function(b,x){return a.standardFunctionAsync(b,x,function(v,y,D){return g(b,x,D,!0)})},a.functions.any=function(b,x){var v=this;return a.standardFunctionAsync(b,x,function(y,D,E){return l(v,void 0,void 0,function(){var C,
z,w,A,G,F,H;return d(this,function(J){switch(J.label){case 0:r.pcCheck(E,2,2,b,x),C=E[1].createFunction(b),z=h(E[0],b,x),w=0,A=z,J.label=1;case 1:if(!(w<A.length))return[3,7];G=A[w];return[4,C(G)];case 2:return F=J.sent(),H=null,m.isPromiseLike(H)?[4,F]:[3,4];case 3:return H=J.sent(),[3,5];case 4:H=F,J.label=5;case 5:if(r.isBoolean(H)&&!0===H)return[2,!0];J.label=6;case 6:return w++,[3,1];case 7:return[2,!1]}})})})},a.functions.all=function(b,x){var v=this;return a.standardFunctionAsync(b,x,function(y,
D,E){return l(v,void 0,void 0,function(){var C,z,w,A,G,F,H;return d(this,function(J){switch(J.label){case 0:r.pcCheck(E,2,2,b,x),C=E[1].createFunction(b),z=h(E[0],b,x),w=0,A=z,J.label=1;case 1:if(!(w<A.length))return[3,7];G=A[w];return[4,C(G)];case 2:return F=J.sent(),H=null,m.isPromiseLike(H)?[4,F]:[3,4];case 3:return H=J.sent(),[3,5];case 4:H=F,J.label=5;case 5:if(!0!==H)return[2,!1];J.label=6;case 6:return w++,[3,1];case 7:return[2,!0]}})})})},a.functions.none=function(b,x){var v=this;return a.standardFunctionAsync(b,
x,function(y,D,E){return l(v,void 0,void 0,function(){var C,z,w,A,G,F,H;return d(this,function(J){switch(J.label){case 0:r.pcCheck(E,2,2,b,x),C=E[1].createFunction(b),z=h(E[0],b,x),w=0,A=z,J.label=1;case 1:if(!(w<A.length))return[3,7];G=A[w];return[4,C(G)];case 2:return F=J.sent(),H=null,m.isPromiseLike(H)?[4,F]:[3,4];case 3:return H=J.sent(),[3,5];case 4:H=F,J.label=5;case 5:if(!0===H)return[2,!1];J.label=6;case 6:return w++,[3,1];case 7:return[2,!0]}})})})},a.functions.filter=function(b,x){var v=
this;return a.standardFunctionAsync(b,x,function(y,D,E){return l(v,void 0,void 0,function(){var C,z,w,A,G,F,H,J;return d(this,function(K){switch(K.label){case 0:r.pcCheck(E,2,2,b,x),C=E[1].createFunction(b),z=h(E[0],b,x),w=[],A=0,G=z,K.label=1;case 1:if(!(A<G.length))return[3,7];F=G[A];return[4,C(F)];case 2:return H=K.sent(),J=null,m.isPromiseLike(J)?[4,H]:[3,4];case 3:return J=K.sent(),[3,5];case 4:J=H,K.label=5;case 5:!0===J&&w.push(F),K.label=6;case 6:return A++,[3,1];case 7:return[2,w]}})})})},
a.functions.reduce=function(b,x){var v=this;return a.standardFunctionAsync(b,x,function(y,D,E){r.pcCheck(E,2,3,b,x);var C=E[1].createFunction(b);y=h(E[0],b,x);D=null;if(2<E.length)E=r.defaultUndefined(E[2],null),D=y.reduce(function(z,w){return l(v,void 0,void 0,function(){var A;return d(this,function(G){switch(G.label){case 0:return[4,z];case 1:A=G.sent();if(void 0===A||A===r.voidOperation)A=null;return[2,C(A,w)]}})})},Promise.resolve(E));else{if(0===y.length)return null;D=y.reduce(function(z,w,A){return l(v,
void 0,void 0,function(){var G;return d(this,function(F){switch(F.label){case 0:return 1>=A?[2,C(z,w)]:[4,z];case 1:G=F.sent();if(void 0===G||G===r.voidOperation)G=null;return[2,C(G,w)]}})})})}return D.then(function(z){return void 0!==z&&z!==r.voidOperation?z:null})})},a.functions.map=function(b,x){var v=this;return a.standardFunctionAsync(b,x,function(y,D,E){return l(v,void 0,void 0,function(){var C,z,w,A,G,F,H,J;return d(this,function(K){switch(K.label){case 0:r.pcCheck(E,2,2,b,x),C=E[1].createFunction(b),
z=h(E[0],b,x),w=[],A=0,G=z,K.label=1;case 1:if(!(A<G.length))return[3,7];F=G[A];return[4,C(F)];case 2:return H=K.sent(),J=null,m.isPromiseLike(J)?[4,H]:[3,4];case 3:return J=K.sent(),[3,5];case 4:J=H,K.label=5;case 5:void 0!==J&&J!==r.voidOperation?w.push(J):w.push(null),K.label=6;case 6:return A++,[3,1];case 7:return[2,w]}})})})})}})},"esri/arcade/functions/date":function(){define("require exports ../ArcadeDate ../languageUtils ../executionError ../../libs/luxon/luxon dojo/_base/kernel".split(" "),
function(f,B,l,d,c,u,t){function e(h){return null===h?h:!1===h.isValid?null:h}function r(h,q){return""===h||"default"===h.toLowerCase().trim()?d.defaultTimeZone(q):h}Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=void 0;var m=[0,31,59,90,120,151,181,212,243,273,304,334],a=[0,31,60,91,121,152,182,213,244,274,305,335];B.registerFunctions=function(h,q){h.today=function(n,k){return q(n,k,function(g,b,x){d.pcCheck(x,0,0,n,k);g=new Date;g.setHours(0,0,0,0);return l.ArcadeDate.dateJSAndZoneToArcadeDate(g,
d.defaultTimeZone(n))})};h.changetimezone=function(n,k){return q(n,k,function(g,b,x){d.pcCheck(x,2,2,n,k);g=d.toDate(x[0],d.defaultTimeZone(n));if(null===g)return null;x=l.ArcadeDate.arcadeDateAndZoneToArcadeDate(g,r(d.toString(x[1]),n));return!1===x.isValid?null:x})};h.timezone=function(n,k){return q(n,k,function(g,b,x){d.pcCheck(x,1,2,n,k);g=d.toDate(x[0],d.defaultTimeZone(n));if(null===g)return null;g=g.timeZone;return"system"===g?l.ArcadeDate.systemTimeZoneCanonicalName:g})};h.timezoneoffset=
function(n,k){return q(n,k,function(g,b,x){d.pcCheck(x,1,1,n,k);g=d.toDate(x[0],d.defaultTimeZone(n));return null===g?null:g.timeZoneOffset})};h.now=function(n,k){return q(n,k,function(g,b,x){d.pcCheck(x,0,0,n,k);g=l.ArcadeDate.nowToArcadeDate(d.defaultTimeZone(n));return!1===g.isValid?null:g})};h.timestamp=function(n,k){return q(n,k,function(g,b,x){d.pcCheck(x,0,0,n,k);g=l.ArcadeDate.nowUTCToArcadeDate();return!1===g.isValid?null:g})};h.toutc=function(n,k){return q(n,k,function(g,b,x){d.pcCheck(x,
1,1,n,k);g=d.toDate(x[0],d.defaultTimeZone(n));return null===g?null:g.toUTC()})};h.tolocal=function(n,k){return q(n,k,function(g,b,x){d.pcCheck(x,1,1,n,k);g=d.toDate(x[0],d.defaultTimeZone(n));return null===g?null:g.toLocal()})};h.day=function(n,k){return q(n,k,function(g,b,x){d.pcCheck(x,1,1,n,k);g=d.toDate(x[0],d.defaultTimeZone(n));return null===g?NaN:g.day})};h.month=function(n,k){return q(n,k,function(g,b,x){d.pcCheck(x,1,1,n,k);g=d.toDate(x[0],d.defaultTimeZone(n));return null===g?NaN:g.monthJS})};
h.year=function(n,k){return q(n,k,function(g,b,x){d.pcCheck(x,1,1,n,k);g=d.toDate(x[0],d.defaultTimeZone(n));return null===g?NaN:g.year})};h.hour=function(n,k){return q(n,k,function(g,b,x){d.pcCheck(x,1,1,n,k);g=d.toDate(x[0],d.defaultTimeZone(n));return null===g?NaN:g.hour})};h.second=function(n,k){return q(n,k,function(g,b,x){d.pcCheck(x,1,1,n,k);g=d.toDate(x[0],d.defaultTimeZone(n));return null===g?NaN:g.second})};h.millisecond=function(n,k){return q(n,k,function(g,b,x){d.pcCheck(x,1,1,n,k);g=
d.toDate(x[0],d.defaultTimeZone(n));return null===g?NaN:g.millisecond})};h.minute=function(n,k){return q(n,k,function(g,b,x){d.pcCheck(x,1,1,n,k);g=d.toDate(x[0],d.defaultTimeZone(n));return null===g?NaN:g.minute})};h.week=function(n,k){return q(n,k,function(g,b,x){d.pcCheck(x,1,2,n,k);b=d.toDate(x[0],d.defaultTimeZone(n));if(null===b)return NaN;x=d.toNumber(d.defaultUndefined(x[1],0));if(0>x||6<x)throw new c.ArcadeExecutionError(n,c.ExecutionErrorCodes.InvalidParameter,k);g=b.dayOfWeekJS;var v=b.year;
b=b.day+(0!==v%4||0===v%100&&0!==v%400?m:a)[b.monthJS]-1;v=Math.floor(b/7);return g-x+(0>g-x?7:0)<b-7*v?v+1:v})};h.weekday=function(n,k){return q(n,k,function(g,b,x){d.pcCheck(x,1,1,n,k);g=d.toDate(x[0],d.defaultTimeZone(n));return null===g?NaN:g.dayOfWeekJS})};h.isoweekday=function(n,k){return q(n,k,function(g,b,x){d.pcCheck(x,1,1,n,k);g=d.toDate(x[0],d.defaultTimeZone(n));return null===g?NaN:g.dayOfWeekISO})};h.isomonth=function(n,k){return q(n,k,function(g,b,x){d.pcCheck(x,1,1,n,k);g=d.toDate(x[0],
d.defaultTimeZone(n));return null===g?NaN:g.monthISO})};h.isoweek=function(n,k){return q(n,k,function(g,b,x){d.pcCheck(x,1,1,n,k);g=d.toDate(x[0],d.defaultTimeZone(n));return null===g?NaN:g.weekISO})};h.isoyear=function(n,k){return q(n,k,function(g,b,x){d.pcCheck(x,1,1,n,k);g=d.toDate(x[0],d.defaultTimeZone(n));return null===g?NaN:g.yearISO})};h.date=function(n,k){return q(n,k,function(g,b,x){d.pcCheck(x,0,8,n,k);if(3===x.length)return e(l.ArcadeDate.fromParts(d.toNumber(x[0]),d.toNumber(x[1])+1,
d.toNumber(x[2]),0,0,0,0,d.defaultTimeZone(n)));if(4===x.length)return e(l.ArcadeDate.fromParts(d.toNumber(x[0]),d.toNumber(x[1])+1,d.toNumber(x[2]),d.toNumber(x[3]),0,0,0,d.defaultTimeZone(n)));if(5===x.length)return e(l.ArcadeDate.fromParts(d.toNumber(x[0]),d.toNumber(x[1])+1,d.toNumber(x[2]),d.toNumber(x[3]),d.toNumber(x[4]),0,0,d.defaultTimeZone(n)));if(6===x.length)return e(l.ArcadeDate.fromParts(d.toNumber(x[0]),d.toNumber(x[1])+1,d.toNumber(x[2]),d.toNumber(x[3]),d.toNumber(x[4]),d.toNumber(x[5]),
0,d.defaultTimeZone(n)));if(7===x.length)return e(l.ArcadeDate.fromParts(d.toNumber(x[0]),d.toNumber(x[1])+1,d.toNumber(x[2]),d.toNumber(x[3]),d.toNumber(x[4]),d.toNumber(x[5]),d.toNumber(x[6]),d.defaultTimeZone(n)));if(8===x.length)return e(l.ArcadeDate.fromParts(d.toNumber(x[0]),d.toNumber(x[1])+1,d.toNumber(x[2]),d.toNumber(x[3]),d.toNumber(x[4]),d.toNumber(x[5]),d.toNumber(x[6]),r(d.toString(x[7]),n)));if(2===x.length){g=d.toString(x[1]);if(""===g)return null;g=d.standardiseDateFormat(g);b=void 0;
b="X"===g?u.DateTime.fromSeconds(d.toNumber(x[0])):"x"===g?u.DateTime.fromMillis(d.toNumber(x[0])):u.DateTime.fromFormat(d.toString(x[0]),g,{locale:t.locale,numberingSystem:"latn"});return b.isValid?l.ArcadeDate.dateTimeToArcadeDate(b):null}if(1===x.length){if(d.isString(x[0])){if(""===x[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(x[0]))return d.toDate(x[0]+"-01-01",d.defaultTimeZone(n))}g=d.toNumber(x[0]);return!1===isNaN(g)?(b=u.DateTime.fromMillis(g),
b.isValid?l.ArcadeDate.dateTimeAndZoneToArcadeDate(b,d.defaultTimeZone(n)):null):d.toDate(x[0],d.defaultTimeZone(n))}return 0===x.length?l.ArcadeDate.nowToArcadeDate(d.defaultTimeZone(n)):null})};h.datediff=function(n,k){return q(n,k,function(g,b,x){d.pcCheck(x,2,4,n,k);g=d.toDate(x[0],d.defaultTimeZone(n));b=d.toDate(x[1],d.defaultTimeZone(n));if(null===g||null===b)return NaN;var v=d.defaultUndefined(x[3],"");""!==v&&null!==v?(v=d.toString(v),g=l.ArcadeDate.arcadeDateAndZoneToArcadeDate(g,v),b=l.ArcadeDate.arcadeDateAndZoneToArcadeDate(b,
v)):g.timeZone!==b.timeZone&&(g.isUnknownTimeZone?g=l.ArcadeDate.arcadeDateAndZoneToArcadeDate(g,b.timeZone):b=l.ArcadeDate.arcadeDateAndZoneToArcadeDate(b,g.timeZone));switch(d.toString(x[2]).toLowerCase()){case "days":case "day":case "d":return g.diff(b,"days");case "months":case "month":return g.diff(b,"months");case "minutes":case "minute":case "m":return"M"===x[2]?g.diff(b,"months"):g.diff(b,"minutes");case "seconds":case "second":case "s":return g.diff(b,"seconds");case "milliseconds":case "millisecond":case "ms":return g.diff(b);
case "hours":case "hour":case "h":return g.diff(b,"hours");case "years":case "year":case "y":return g.diff(b,"years");default:return g.diff(b)}})};h.dateadd=function(n,k){return q(n,k,function(g,b,x){var v;d.pcCheck(x,2,3,n,k);g=d.toDate(x[0],d.defaultTimeZone(n));if(null===g)return null;b=d.toNumber(x[1]);if(isNaN(b))return g;var y="milliseconds";switch(d.toString(x[2]).toLowerCase()){case "days":case "day":case "d":y="days";b=d.absRound(b);break;case "months":case "month":y="months";b=d.absRound(b);
break;case "minutes":case "minute":case "m":y="M"===x[2]?"months":"minutes";break;case "seconds":case "second":case "s":y="seconds";break;case "milliseconds":case "millisecond":case "ms":y="milliseconds";break;case "hours":case "hour":case "h":y="hours";break;case "years":case "year":case "y":y="years"}return g.plus((v={},v[y]=b,v))})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/jsonUtils ../executionError ../ImmutablePathArray".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x){function v(E){return E&&"esri.arcade.Feature"===E.arcadeDeclaredClass}function y(E,C,z,w,A){void 0===A&&(A=1);C=C.toLowerCase();switch(C){case "hasz":return E=E.hasZ,void 0===E?!1:E;case "hasm":return E=E.hasM,void 0===E?!1:E;case "spatialreference":return C=E.spatialReference._arcadeCacheId,void 0===C&&(z=!0,Object.freeze&&Object.isFrozen(E.spatialReference)&&(z=!1),z&&(D++,C=E.spatialReference._arcadeCacheId=D)),E=new c({wkt:E.spatialReference.wkt,wkid:E.spatialReference.wkid}),
void 0!==C&&(E._arcadeCacheId="SPREF"+C.toString()),E}switch(E.type){case "extent":switch(C){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return E=E[C],void 0!==E?E:null;case "type":return"Extent"}break;case "polygon":switch(C){case "rings":return C=E.getCacheValue("_arcadeCacheId"),void 0===C&&(D++,C=D,E.setCacheValue("_arcadeCacheId",C)),E=new x(E.rings,E.spatialReference,!0===E.hasZ,!0===E.hasM,C);case "type":return"Polygon"}break;case "point":switch(C){case "x":case "y":case "z":case "m":return void 0!==
E[C]?E[C]:null;case "type":return"Point"}break;case "polyline":switch(C){case "paths":return C=E.getCacheValue("_arcadeCacheId"),void 0===C&&(D++,C=D,E.setCacheValue("_arcadeCacheId",C)),E=new x(E.paths,E.spatialReference,!0===E.hasZ,!0===E.hasM,C);case "type":return"Polyline"}break;case "multipoint":switch(C){case "points":return C=E.getCacheValue("_arcadeCacheId"),void 0===C&&(D++,C=D,E.setCacheValue("_arcadeCacheId",C)),E=new t(E.points,E.spatialReference,!0===E.hasZ,!0===E.hasM,C,1);case "type":return"Multipoint"}}if(1===
A)throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidIdentifier,w);return 2===A?{keystate:"notfound"}:null}Object.defineProperty(B,"__esModule",{value:!0});B.geometryMember=B.registerFunctions=void 0;B.registerFunctions=function(E,C){E.ringisclockwise=function(z,w){return C(z,w,function(A,G,F){e.pcCheck(F,1,1,z,w);A=[];if(null===F[0])return!1;if(e.isArray(F[0])){var H=0;for(F=F[0];H<F.length;H++)if(G=F[H],G instanceof h)A.push([G.x,G.y]);else throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,
w);}else if(F[0]instanceof t)A=F[0]._elements;else if(e.isImmutableArray(F[0])){H=0;for(var J=F[0].toArray();H<J.length;H++)if(G=J[H],G instanceof h)A.push([G.x,G.y]);else throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,w);0<A.length&&(F[0].get(0),F[0].get(0))}else throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,w);return 3>A.length?!1:(new q({rings:[],spatialReference:{wkid:4326}})).isClockwise(A)})};E.polygon=function(z,w){return C(z,w,function(A,
G,F){e.pcCheck(F,1,1,z,w);A=null;if(F[0]instanceof c){if(A=e.fixSpatialReference(u.parseGeometryFromDictionary(F[0]),z.spatialReference),!1===A instanceof q)throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,w);}else A=F[0]instanceof q?g.fromJson(F[0].toJson()):e.fixSpatialReference(new q(JSON.parse(F[0])),z.spatialReference);if(null!==A&&!1===A.spatialReference.equals(z.spatialReference))throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.WrongSpatialReference,w);return e.fixNullGeometry(A)})};
E.polyline=function(z,w){return C(z,w,function(A,G,F){e.pcCheck(F,1,1,z,w);A=null;if(F[0]instanceof c){if(A=e.fixSpatialReference(u.parseGeometryFromDictionary(F[0]),z.spatialReference),!1===A instanceof n)throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,w);}else A=F[0]instanceof n?g.fromJson(F[0].toJson()):e.fixSpatialReference(new n(JSON.parse(F[0])),z.spatialReference);if(null!==A&&!1===A.spatialReference.equals(z.spatialReference))throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.WrongSpatialReference,
w);return e.fixNullGeometry(A)})};E.point=function(z,w){return C(z,w,function(A,G,F){e.pcCheck(F,1,1,z,w);A=null;if(F[0]instanceof c){if(A=e.fixSpatialReference(u.parseGeometryFromDictionary(F[0]),z.spatialReference),!1===A instanceof h)throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,w);}else A=F[0]instanceof h?g.fromJson(F[0].toJson()):e.fixSpatialReference(new h(JSON.parse(F[0])),z.spatialReference);if(null!==A&&!1===A.spatialReference.equals(z.spatialReference))throw new b.ArcadeExecutionError(z,
b.ExecutionErrorCodes.WrongSpatialReference,w);return e.fixNullGeometry(A)})};E.multipoint=function(z,w){return C(z,w,function(A,G,F){e.pcCheck(F,1,1,z,w);A=null;if(F[0]instanceof c){if(A=e.fixSpatialReference(u.parseGeometryFromDictionary(F[0]),z.spatialReference),!1===A instanceof a)throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,w);}else A=F[0]instanceof a?g.fromJson(F[0].toJson()):e.fixSpatialReference(new a(JSON.parse(F[0])),z.spatialReference);if(null!==A&&!1===A.spatialReference.equals(z.spatialReference))throw new b.ArcadeExecutionError(z,
b.ExecutionErrorCodes.WrongSpatialReference,w);return e.fixNullGeometry(A)})};E.extent=function(z,w){return C(z,w,function(A,G,F){F=e.autoCastFeatureToGeometry(F);e.pcCheck(F,1,1,z,w);A=null;F[0]instanceof c?A=e.fixSpatialReference(u.parseGeometryFromDictionary(F[0]),z.spatialReference):F[0]instanceof h?(A={xmin:F[0].x,ymin:F[0].y,xmax:F[0].x,ymax:F[0].y,spatialReference:F[0].spatialReference.toJson()},F=F[0],F.hasZ?(A.zmin=F.z,A.zmax=F.z):F.hasM&&(A.mmin=F.m,A.mmax=F.m),A=g.fromJson(A)):A=F[0]instanceof
q?g.fromJson(F[0].getExtent().toJson()):F[0]instanceof n?g.fromJson(F[0].getExtent().toJson()):F[0]instanceof a?g.fromJson(F[0].getExtent().toJson()):F[0]instanceof r?g.fromJson(F[0].toJson()):e.fixSpatialReference(new r(JSON.parse(F[0])),z.spatialReference);if(null!==A&&!1===A.spatialReference.equals(z.spatialReference))throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.WrongSpatialReference,w);return e.fixNullGeometry(A)})};E.geometry=function(z,w){return C(z,w,function(A,G,F){e.pcCheck(F,
1,1,z,w);A=null;if(null===F[0])return null;A=v(F[0])?e.fixSpatialReference(F[0].geometry(),z.spatialReference):F[0]instanceof c?e.fixSpatialReference(u.parseGeometryFromDictionary(F[0]),z.spatialReference):e.fixSpatialReference(g.fromJson(JSON.parse(F[0])),z.spatialReference);if(null!==A&&!1===A.spatialReference.equals(z.spatialReference))throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.WrongSpatialReference,w);return e.fixNullGeometry(A)})};E.setgeometry=function(z,w){return C(z,w,function(A,
G,F){e.pcCheck(F,2,2,z,w);if(v(F[0])){if(!0===F[0].immutable)throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.Immutable,w);if(F[1]instanceof m||null===F[1])F[0]._geometry=F[1];else throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,w);}else throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,w);return e.voidOperation})};E.feature=function(z,w){return C(z,w,function(A,G,F){if(0===F.length)throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.WrongNumberOfParameters,
w);A=null;if(1===F.length)if(e.isString(F[0]))A=u.fromJson(JSON.parse(F[0]),z.timeReference);else if(v(F[0]))A=u.createFromArcadeFeature(F[0]);else if(F[0]instanceof m)A=u.createFromGraphicLikeObject(F[0],null,null,z.timeReference);else if(F[0]instanceof c)A=F[0].hasField("geometry")?F[0].field("geometry"):null,G=F[0].hasField("attributes")?F[0].field("attributes"):null,null!==A&&A instanceof c&&(A=u.parseGeometryFromDictionary(A)),null!==G&&(G=u.parseAttributesFromDictionary(G)),A=u.createFromGraphicLikeObject(A,
G,null,z.timeReference);else throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,w);else{if(2===F.length){G=A=null;if(null!==F[0])if(F[0]instanceof m)A=F[0];else if(A instanceof c)A=u.parseGeometryFromDictionary(F[0]);else throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,w);if(null!==F[1])if(F[1]instanceof c)G=u.parseAttributesFromDictionary(F[1]);else throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,w);}else{A=null;G={};if(null!==
F[0])if(F[0]instanceof m)A=F[0];else if(A instanceof c)A=u.parseGeometryFromDictionary(F[0]);else throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,w);for(var H=1;H<F.length;H+=2){var J=e.toString(F[H]),K=F[H+1];if(null===K||void 0===K||e.isString(K)||isNaN(K)||e.isDate(K)||e.isNumber(K)||e.isBoolean(K)){if(e.isFunctionParameter(K)||!1===e.isSimpleType(K))throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,w);G[J]=K===e.voidOperation?null:K}else throw new b.ArcadeExecutionError(z,
b.ExecutionErrorCodes.InvalidParameter,w);}}A=u.createFromGraphicLikeObject(A,G,null,z.timeReference)}A._geometry=e.fixSpatialReference(A.geometry(),z.spatialReference);A.immutable=!1;return A})};E.dictionary=function(z,w){return C(z,w,function(A,G,F){if(0===F.length)return F=new c,F.immutable=!1,F;if(1===F.length&&e.isString(F[0]))try{var H=JSON.parse(F[0]),J=c.convertObjectToArcadeDictionary(H,e.defaultTimeZone(z),!1);J.immutable=!1;return J}catch(K){throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,
w);}if(0!==F.length%2)throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.WrongNumberOfParameters,w);A={};for(G=0;G<F.length;G+=2)if(H=e.toString(F[G]),J=F[G+1],null===J||void 0===J||e.isString(J)||isNaN(J)||e.isDate(J)||e.isNumber(J)||e.isBoolean(J)||e.isArray(J)||e.isImmutableArray(J)){if(e.isFunctionParameter(J))throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,w);A[H]=J===e.voidOperation?null:J}else throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,
w);F=new c(A);F.immutable=!1;return F})};E.haskey=function(z,w){return C(z,w,function(A,G,F){e.pcCheck(F,2,2,z,w);A=e.toString(F[1]);if(v(F[0])||F[0]instanceof c)return F[0].hasField(A);if(F[0]instanceof m)return(F=y(F[0],A,null,null,2))&&"notfound"===F.keystate?!1:!0;throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,w);})};E.hasvalue=function(z,w){return C(z,w,function(A,G,F){e.pcCheck(F,2,2,z,w);if(null===F[0]||null===F[1])return!1;A=e.toString(F[1]);return e.isFeature(F[0])||
F[0]instanceof c?F[0].hasField(A)&&null!==F[0].field(A)?!0:!1:F[0]instanceof m?null===y(F[0],A,null,null,0)?!1:!0:!1})};E.indexof=function(z,w){return C(z,w,function(A,G,F){e.pcCheck(F,2,2,z,w);A=F[1];if(e.isArray(F[0])){for(G=0;G<F[0].length;G++)if(e.equalityTest(A,F[0][G]))return G;return-1}if(e.isImmutableArray(F[0])){var H=F[0].length();for(G=0;G<H;G++)if(e.equalityTest(A,F[0].get(G)))return G;return-1}throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,w);})};E.angle=function(z,
w){return C(z,w,function(A,G,F){F=e.autoCastFeatureToGeometry(F);e.pcCheck(F,2,3,z,w);if(!(F[0]instanceof h))throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,w);if(!(F[1]instanceof h))throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,w);if(2<F.length&&!(F[2]instanceof h))throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,w);return 2===F.length?k.angle2D(F[0],F[1]):k.angleBetween2D(F[0],F[1],F[2])})};E.bearing=function(z,w){return C(z,
w,function(A,G,F){F=e.autoCastFeatureToGeometry(F);e.pcCheck(F,2,3,z,w);if(!(F[0]instanceof h))throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,w);if(!(F[1]instanceof h))throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,w);if(2<F.length&&!(F[2]instanceof h))throw new b.ArcadeExecutionError(z,b.ExecutionErrorCodes.InvalidParameter,w);return 2===F.length?k.bearing2D(F[0],F[1]):k.bearingBetween2D(F[0],F[1],F[2])})};E.isselfintersecting=function(z,w){return C(z,
w,function(A,G,F){F=e.autoCastFeatureToGeometry(F);e.pcCheck(F,1,1,z,w);A=F[0];if(A instanceof q)return A.isSelfIntersecting(A);if(A instanceof n)return A=A.paths,k.pathsSelfIntersecting(A);if(A instanceof a)for(G=A.points,F=0;F<G.length;F++)for(var H=0;H<G.length;H++)if(H!==F){for(var J=!0,K=0;K<G[F].length;K++)if(G[F][K]!==G[H][K]){J=!1;break}if(!0===J)return!0}return e.isArray(A)||e.isImmutableArray(A)?(A=e.autoCastArrayOfPointsToPolyline(A,z.spatialReference),null!==A&&(A=A.paths),k.pathsSelfIntersecting(A)):
!1})}};var D=0;B.geometryMember=y})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(f,B,l){function d(a,h,q){var n={x:0,y:0};h&&(n.z=0);q&&(n.m=0);for(var k=0,g=a[0],b=0;b<a.length;b++){var x=a[b];a:if(x.length!==g.length)var v=!1;else{for(v=0;v<x.length;v++)if(x[v]!==g[v]){v=!1;break a}v=!0}if(!1===v){v=c(g,x,h);var y=x,D=h,E=q,C={x:(g[0]+y[0])/2,y:(g[1]+y[1])/2};D&&(C.z=(g[2]+y[2])/2);D&&E?C.m=(g[3]+y[3])/2:E&&(C.m=(g[2]+y[2])/2);g=C;g.x*=
v;g.y*=v;n.x+=g.x;n.y+=g.y;h&&(g.z*=v,n.z+=g.z);q&&(g.m*=v,n.m+=g.m);k+=v;g=x}}0<k?(n.x/=k,n.y/=k,h&&(n.z/=k),q&&(n.m/=k)):(n.x=a[0][0],n.y=a[0][1],h&&(n.z=a[0][2]),q&&h?n.m=a[0][3]:q&&(n.m=a[0][2]));return n}function c(a,h,q){var n=h[0]-a[0];a=h[1]-a[1];return q?(h=h[2]-h[2],Math.sqrt(n*n+a*a+h*h)):Math.sqrt(n*n+a*a)}function u(a,h,q){for(void 0===q&&(q=0);a<q;)a+=h;for(q+=h;a>=q;)a-=h;return a}function t(a,h){return Math.atan2(h.y-a.y,h.x-a.x)}function e(a,h,q){var n=a.x-h.x;a=a.y-h.y;var k=q.x-
h.x;h=q.y-h.y;return Math.atan2(n*h-k*a,n*k+a*h)}function r(a,h,q,n,k){var g=a[0];a=a[1];var b=h[0];h=h[1];var x=q[0],v=q[1];q=n[0]-x;x=g-x;var y=b-g;n=n[1]-v;v=a-v;var D=h-a,E=n*y-q*D;if(0===E)return!1;q=(q*v-n*x)/E;x=(y*v-D*x)/E;return 0<=q&&1>=q&&0<=x&&1>=x?(k&&(k[0]=g+q*(b-g),k[1]=a+q*(h-a)),!0):!1}Object.defineProperty(B,"__esModule",{value:!0});B.pathsSelfIntersecting=B.bearingBetween2D=B.angleBetween2D=B.angleBetweenRad=B.bearing2D=B.angle2D=B.angleRad=B.centroidMultiPoint=B.centroidPolyline=
void 0;B.centroidPolyline=function(a){for(var h={x:0,y:0,spatialReference:a.spatialReference.toJson()},q={x:0,y:0,spatialReference:a.spatialReference.toJson()},n=0,k=0,g=0;g<a.paths.length;g++)if(0!==a.paths[g].length){var b=a.paths[g];var x=!0===a.hasZ;if(1>=b.length)b=0;else{for(var v=0,y=1;y<b.length;y++)v+=c(b[y-1],b[y],x);b=v}0===b?(x=d(a.paths[g],!0===a.hasZ,!0===a.hasM),h.x+=x.x,h.y+=x.y,!0===a.hasZ&&(h.z+=x.z),!0===a.hasM&&(h.m+=x.m),++n):(x=d(a.paths[g],!0===a.hasZ,!0===a.hasM),q.x+=x.x*
b,q.y+=x.y*b,!0===a.hasZ&&(q.z+=x.z*b),!0===a.hasM&&(q.m+=x.m*b),k+=b)}return 0<k?(q.x/=k,q.y/=k,!0===a.hasZ&&(q.z/=k),!0===a.hasM&&(q.m/=k),new l(q)):0<n?(h.x/=n,h.y/=n,!0===a.hasZ&&(q.z/=n),!0===a.hasM&&(h.m/=n),new l(h)):null};B.centroidMultiPoint=function(a){if(0===a.points.length)return null;for(var h=0,q=0,n=0,k=0,g=0;g<a.points.length;g++){var b=a.getPoint(g);!0===b.hasZ&&(n+=b.z);!0===b.hasM&&(k+=b.m);h+=b.x;q+=b.y;k+=b.m}h={x:h/a.points.length,y:q/a.points.length,spatialReference:null};h.spatialReference=
a.spatialReference.toJson();!0===a.hasZ&&(h.z=n/a.points.length);!0===a.hasM&&(h.m=k/a.points.length);return new l(h)};B.angleRad=t;B.angle2D=function(a,h){return u(t(a,h),2*Math.PI)*(180/Math.PI)};B.bearing2D=function(a,h){return u(Math.PI/2-t(a,h),2*Math.PI)*(180/Math.PI)};B.angleBetweenRad=e;B.angleBetween2D=function(a,h,q){return u(e(a,h,q),2*Math.PI)*(180/Math.PI)};B.bearingBetween2D=function(a,h,q){return u(-1*e(a,h,q),2*Math.PI)*(180/Math.PI)};var m=[0,0];B.pathsSelfIntersecting=function(a){for(var h=
0;h<a.length;h++){for(var q=a[h],n=0;n<q.length-1;n++)for(var k=q[n],g=q[n+1],b=h+1;b<a.length;b++)for(var x=0;x<a[b].length-1;x++){var v=a[b][x],y=a[b][x+1],D=r(k,g,v,y,m);if(D&&!(m[0]===k[0]&&m[1]===k[1]||m[0]===v[0]&&m[1]===v[1]||m[0]===g[0]&&m[1]===g[1]||m[0]===y[0]&&m[1]===y[1]))return!0}x=q.length;if(!(3>x))for(n=0;n<=x-2;n++)for(k=q[n],g=q[n+1],b=n+2;b<=x-2;b++)if(v=q[b],y=q[b+1],(D=r(k,g,v,y,m))&&!(m[0]===k[0]&&m[1]===k[1]||m[0]===v[0]&&m[1]===v[1]||m[0]===g[0]&&m[1]===g[1]||m[0]===y[0]&&
m[1]===y[1]))return!0}return!1}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/jsonUtils ../executionError".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h,q,n){function k(b){return 0===l.version.indexOf("4.")?a.fromExtent(b):new a({spatialReference:b.spatialReference,rings:[[[b.xmin,
b.ymin],[b.xmin,b.ymax],[b.xmax,b.ymax],[b.xmax,b.ymin],[b.xmin,b.ymin]]]})}Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=B.setGeometryEngine=void 0;var g=null;B.setGeometryEngine=function(b){g=b};B.registerFunctions=function(b,x){function v(y,D,E){c.pcCheck(E,2,2,y,D);if(!(E[0]instanceof e&&E[1]instanceof e||E[0]instanceof e&&null===E[1]||E[1]instanceof e&&null===E[0]||null===E[0]&&null===E[1]))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);}b.disjoint=
function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);v(y,D,z);return null===z[0]||null===z[1]?!0:g.disjoint(z[0],z[1])})};b.intersects=function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);v(y,D,z);return null===z[0]||null===z[1]?!1:g.intersects(z[0],z[1])})};b.touches=function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);v(y,D,z);return null===z[0]||null===z[1]?!1:g.touches(z[0],z[1])})};b.crosses=function(y,D){return x(y,D,function(E,
C,z){z=c.autoCastFeatureToGeometry(z);v(y,D,z);return null===z[0]||null===z[1]?!1:g.crosses(z[0],z[1])})};b.within=function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);v(y,D,z);return null===z[0]||null===z[1]?!1:g.within(z[0],z[1])})};b.contains=function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);v(y,D,z);return null===z[0]||null===z[1]?!1:g.contains(z[0],z[1])})};b.overlaps=function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);
v(y,D,z);return null===z[0]||null===z[1]?!1:g.overlaps(z[0],z[1])})};b.equals=function(y,D){return x(y,D,function(E,C,z){c.pcCheck(z,2,2,y,D);return z[0]===z[1]?!0:z[0]instanceof e&&z[1]instanceof e?g.equals(z[0],z[1]):c.isDate(z[0])&&c.isDate(z[1])?z[0].equals(z[1]):!1})};b.relate=function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);c.pcCheck(z,3,3,y,D);if(z[0]instanceof e&&z[1]instanceof e)return g.relate(z[0],z[1],c.toString(z[2]));if(z[0]instanceof e&&null===z[1]||z[1]instanceof
e&&null===z[0]||null===z[0]&&null===z[1])return!1;throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);})};b.intersection=function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);v(y,D,z);return null===z[0]||null===z[1]?null:g.intersect(z[0],z[1])})};b.union=function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);E=[];if(0===z.length)throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.WrongNumberOfParameters,D);if(1===z.length)if(c.isArray(z[0]))for(z=
c.autoCastFeatureToGeometry(z[0]),C=0;C<z.length;C++){if(null!==z[C]){if(!(z[C]instanceof e))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);E.push(z[C])}}else if(c.isImmutableArray(z[0]))for(z=c.autoCastFeatureToGeometry(z[0].toArray()),C=0;C<z.length;C++){if(null!==z[C]){if(!(z[C]instanceof e))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);E.push(z[C])}}else{if(z[0]instanceof e)return c.fixSpatialReference(d.cloneGeometry(z[0]),y.spatialReference);
if(null===z[0])return null;throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);}else for(C=0;C<z.length;C++)if(null!==z[C]){if(!(z[C]instanceof e))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);E.push(z[C])}return 0===E.length?null:g.union(E)})};b.difference=function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);v(y,D,z);return null!==z[0]&&null===z[1]?d.cloneGeometry(z[0]):null===z[0]?null:g.difference(z[0],z[1])})};b.symmetricdifference=
function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);v(y,D,z);return null===z[0]&&null===z[1]?null:null===z[0]?d.cloneGeometry(z[1]):null===z[1]?d.cloneGeometry(z[0]):g.symmetricDifference(z[0],z[1])})};b.clip=function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);c.pcCheck(z,2,2,y,D);if(!(z[1]instanceof t)&&null!==z[1])throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);if(null===z[0])return null;if(!(z[0]instanceof e))throw new n.ArcadeExecutionError(y,
n.ExecutionErrorCodes.InvalidParameter,D);return null===z[1]?null:g.clip(z[0],z[1])})};b.cut=function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);c.pcCheck(z,2,2,y,D);if(!(z[1]instanceof h)&&null!==z[1])throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);if(null===z[0])return[];if(!(z[0]instanceof e))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);return null===z[1]?[d.cloneGeometry(z[0])]:g.cut(z[0],z[1])})};b.area=function(y,
D){return x(y,D,function(E,C,z){c.pcCheck(z,1,2,y,D);z=c.autoCastFeatureToGeometry(z);if(null===z[0])return 0;if(c.isArray(z[0])||c.isImmutableArray(z[0]))return E=c.autoCastArrayOfPointsToPolygon(z[0],y.spatialReference),null===E?0:g.planarArea(E,d.convertSquareUnitsToCode(c.defaultUndefined(z[1],-1)));if(!(z[0]instanceof e))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);return g.planarArea(z[0],d.convertSquareUnitsToCode(c.defaultUndefined(z[1],-1)))})};b.areageodetic=
function(y,D){return x(y,D,function(E,C,z){c.pcCheck(z,1,2,y,D);z=c.autoCastFeatureToGeometry(z);if(null===z[0])return 0;if(c.isArray(z[0])||c.isImmutableArray(z[0]))return E=c.autoCastArrayOfPointsToPolygon(z[0],y.spatialReference),null===E?0:g.geodesicArea(E,d.convertSquareUnitsToCode(c.defaultUndefined(z[1],-1)));if(!(z[0]instanceof e))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);return g.geodesicArea(z[0],d.convertSquareUnitsToCode(c.defaultUndefined(z[1],-1)))})};
b.length=function(y,D){return x(y,D,function(E,C,z){c.pcCheck(z,1,2,y,D);z=c.autoCastFeatureToGeometry(z);if(null===z[0])return 0;if(c.isArray(z[0])||c.isImmutableArray(z[0]))return E=c.autoCastArrayOfPointsToPolyline(z[0],y.spatialReference),null===E?0:g.planarLength(E,d.convertLinearUnitsToCode(c.defaultUndefined(z[1],-1)));if(!(z[0]instanceof e))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);return g.planarLength(z[0],d.convertLinearUnitsToCode(c.defaultUndefined(z[1],
-1)))})};b.length3d=function(y,D){return x(y,D,function(E,C,z){c.pcCheck(z,1,2,y,D);z=c.autoCastFeatureToGeometry(z);if(null===z[0])return 0;if(c.isArray(z[0])||c.isImmutableArray(z[0]))return E=c.autoCastArrayOfPointsToPolyline(z[0],y.spatialReference),null===E?0:g.planarLength(E,d.convertLinearUnitsToCode(c.defaultUndefined(z[1],-1)));if(!(z[0]instanceof e))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);return g.planarLength(z[0],d.convertLinearUnitsToCode(c.defaultUndefined(z[1],
-1)))})};b.lengthgeodetic=function(y,D){return x(y,D,function(E,C,z){c.pcCheck(z,1,2,y,D);z=c.autoCastFeatureToGeometry(z);if(null===z[0])return 0;if(c.isArray(z[0])||c.isImmutableArray(z[0]))return E=c.autoCastArrayOfPointsToPolyline(z[0],y.spatialReference),null===E?0:g.geodesicLength(E,d.convertLinearUnitsToCode(c.defaultUndefined(z[1],-1)));if(!(z[0]instanceof e))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);return g.geodesicLength(z[0],d.convertLinearUnitsToCode(c.defaultUndefined(z[1],
-1)))})};b.distance=function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);c.pcCheck(z,2,3,y,D);E=z[0];if(c.isArray(z[0])||c.isImmutableArray(z[0]))E=c.autoCastArrayOfPointsToMultiPoint(z[0],y.spatialReference);C=z[1];if(c.isArray(z[1])||c.isImmutableArray(z[1]))C=c.autoCastArrayOfPointsToMultiPoint(z[1],y.spatialReference);if(!(E instanceof e))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);if(!(C instanceof e))throw new n.ArcadeExecutionError(y,
n.ExecutionErrorCodes.InvalidParameter,D);return g.distance(E,C,d.convertLinearUnitsToCode(c.defaultUndefined(z[2],-1)))})};b.distancegeodetic=function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);c.pcCheck(z,2,3,y,D);E=z[0];C=z[1];if(!(E instanceof m))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);if(!(C instanceof m))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);var w=new h({paths:[],spatialReference:E.spatialReference});
w.addPath([E,C]);return g.geodesicLength(w,d.convertLinearUnitsToCode(c.defaultUndefined(z[2],-1)))})};b.densify=function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);c.pcCheck(z,2,3,y,D);if(null===z[0])return null;if(!(z[0]instanceof e))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);E=c.toNumber(z[1]);if(isNaN(E))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);if(0>=E)throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,
D);return z[0]instanceof a||z[0]instanceof h?g.densify(z[0],E,d.convertLinearUnitsToCode(c.defaultUndefined(z[2],-1))):z[0]instanceof t?g.densify(k(z[0]),E,d.convertLinearUnitsToCode(c.defaultUndefined(z[2],-1))):z[0]})};b.densifygeodetic=function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);c.pcCheck(z,2,3,y,D);if(null===z[0])return null;if(!(z[0]instanceof e))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);E=c.toNumber(z[1]);if(isNaN(E))throw new n.ArcadeExecutionError(y,
n.ExecutionErrorCodes.InvalidParameter,D);if(0>=E)throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);return z[0]instanceof a||z[0]instanceof h?g.geodesicDensify(z[0],E,d.convertLinearUnitsToCode(c.defaultUndefined(z[2],-1))):z[0]instanceof t?g.geodesicDensify(k(z[0]),E,d.convertLinearUnitsToCode(c.defaultUndefined(z[2],-1))):z[0]})};b.generalize=function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);c.pcCheck(z,2,4,y,D);if(null===z[0])return null;if(!(z[0]instanceof
e))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);E=c.toNumber(z[1]);if(isNaN(E))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);return g.generalize(z[0],E,c.toBoolean(c.defaultUndefined(z[2],!0)),d.convertLinearUnitsToCode(c.defaultUndefined(z[3],-1)))})};b.buffer=function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);c.pcCheck(z,2,3,y,D);if(null===z[0])return null;if(!(z[0]instanceof e))throw new n.ArcadeExecutionError(y,
n.ExecutionErrorCodes.InvalidParameter,D);E=c.toNumber(z[1]);if(isNaN(E))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);return 0===E?d.cloneGeometry(z[0]):g.buffer(z[0],E,d.convertLinearUnitsToCode(c.defaultUndefined(z[2],-1)))})};b.buffergeodetic=function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);c.pcCheck(z,2,3,y,D);if(null===z[0])return null;if(!(z[0]instanceof e))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);
E=c.toNumber(z[1]);if(isNaN(E))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);return 0===E?d.cloneGeometry(z[0]):g.geodesicBuffer(z[0],E,d.convertLinearUnitsToCode(c.defaultUndefined(z[2],-1)))})};b.offset=function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);c.pcCheck(z,2,6,y,D);if(null===z[0])return null;if(!(z[0]instanceof a||z[0]instanceof h))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);E=c.toNumber(z[1]);if(isNaN(E))throw new n.ArcadeExecutionError(y,
n.ExecutionErrorCodes.InvalidParameter,D);C=c.toNumber(c.defaultUndefined(z[4],10));if(isNaN(C))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);var w=c.toNumber(c.defaultUndefined(z[5],0));if(isNaN(w))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);return g.offset(z[0],E,d.convertLinearUnitsToCode(c.defaultUndefined(z[2],-1)),c.toString(c.defaultUndefined(z[3],"round")).toLowerCase(),C,w)})};b.rotate=function(y,D){return x(y,D,function(E,C,
z){z=c.autoCastFeatureToGeometry(z);c.pcCheck(z,2,3,y,D);E=z[0];if(null===E)return null;if(!(E instanceof e))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);E instanceof t&&(E=a.fromExtent(E));C=c.toNumber(z[1]);if(isNaN(C))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);z=c.defaultUndefined(z[2],null);if(null===z)return g.rotate(E,C);if(z instanceof m)return g.rotate(E,C,z);throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,
D);})};b.centroid=function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);c.pcCheck(z,1,1,y,D);if(null===z[0])return null;E=z[0];if(c.isArray(z[0])||c.isImmutableArray(z[0]))E=c.autoCastArrayOfPointsToMultiPoint(z[0],y.spatialReference);if(null===E)return null;if(!(E instanceof e))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);return E instanceof m?c.fixSpatialReference(d.cloneGeometry(z[0]),y.spatialReference):E instanceof a?E.getCentroid():E instanceof
h?u.centroidPolyline(E):E instanceof r?u.centroidMultiPoint(E):E instanceof t?E.getCenter():null})};b.multiparttosinglepart=function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);c.pcCheck(z,1,1,y,D);C=[];if(null===z[0])return null;if(!(z[0]instanceof e))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);if(z[0]instanceof m||z[0]instanceof t)return[c.fixSpatialReference(d.cloneGeometry(z[0]),y.spatialReference)];E=g.simplify(z[0]);if(E instanceof a){C=
[];var w=[];for(z=0;z<E.rings.length;z++)if(E.isClockwise(E.rings[z])){var A=q.fromJson({rings:[E.rings[z]],hasZ:!0===E.hasZ,hasM:!0===E.hasM,spatialReference:E.spatialReference.toJson()});C.push(A)}else w.push({ring:E.rings[z],pt:E.getPoint(z,0)});for(E=0;E<w.length;E++)for(z=0;z<C.length;z++)if(C[z].contains(w[E].pt)){C[z].addRing(w[E].ring);break}return C}if(E instanceof h){C=[];for(z=0;z<E.paths.length;z++)w=q.fromJson({paths:[E.paths[z]],hasZ:!0===E.hasZ,hasM:!0===E.hasM,spatialReference:E.spatialReference.toJson()}),
C.push(w);return C}if(z[0]instanceof r){E=c.fixSpatialReference(d.cloneGeometry(z[0]),y.spatialReference);for(z=0;z<E.points.length;z++)C.push(E.getPoint(z));return C}return null})};b.issimple=function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);c.pcCheck(z,1,1,y,D);if(null===z[0])return!0;if(!(z[0]instanceof e))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);return g.isSimple(z[0])})};b.simplify=function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);
c.pcCheck(z,1,1,y,D);if(null===z[0])return null;if(!(z[0]instanceof e))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);return g.simplify(z[0])})};b.convexhull=function(y,D){return x(y,D,function(E,C,z){z=c.autoCastFeatureToGeometry(z);c.pcCheck(z,1,1,y,D);if(null===z[0])return null;if(!(z[0]instanceof e))throw new n.ArcadeExecutionError(y,n.ExecutionErrorCodes.InvalidParameter,D);return g.convexHull(z[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports",
"../geometry/Extent","../geometry/jsonUtils"],function(f,B,l,d){Object.defineProperty(B,"__esModule",{value:!0});B.cloneGeometry=B.sameGeomType=B.convertLinearUnitsToCode=B.shapeExtent=B.convertSquareUnitsToCode=void 0;B.convertSquareUnitsToCode=function(c){if(null==c)return null;if("number"===typeof c)return c;c=c.toLowerCase();c=c.replace(/\s/g,"");c=c.replace(/-/g,"");switch(c){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109439;
case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};
B.shapeExtent=function(c){if(null==c)return null;switch(c.type){case "polygon":case "multipoint":case "polyline":return c.extent;case "point":return new l({xmin:c.x,ymin:c.y,xmax:c.x,ymax:c.y,spatialReference:c.spatialReference});case "extent":return c}return null};B.convertLinearUnitsToCode=function(c){if(null==c)return null;if("number"===typeof c)return c;c=c.toLowerCase();c=c.replace(/\s/g,"");c=c.replace(/-/g,"");switch(c){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":return 9093;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};B.sameGeomType=function(c,u){return c===
u||"point"===c&&"esriGeometryPoint"===u||"polyline"===c&&"esriGeometryPolyline"===u||"polygon"===c&&"esriGeometryPolygon"===u||"extent"===c&&"esriGeometryEnvelope"===u||"multipoint"===c&&"esriGeometryMultipoint"===u||"point"===u&&"esriGeometryPoint"===c||"polyline"===u&&"esriGeometryPolyline"===c||"polygon"===u&&"esriGeometryPolygon"===c||"extent"===u&&"esriGeometryEnvelope"===c||"multipoint"===u&&"esriGeometryMultipoint"===c?!0:!1};B.cloneGeometry=function(c){if(null==c)return null;var u=d.fromJson(c.toJson());
c.getCacheValue("_geVersion")&&u.setCacheValue("_geVersion",c.getCacheValue("_geVersion"));return u}})},"esri/arcade/functions/maths":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../languageUtils dojo/number".split(" "),function(f,B,l,d,c,u){function t(e,r,m){if("undefined"===typeof m||0===+m)return Math[e](r);r=+r;m=+m;if(isNaN(r)||"number"!==typeof m||0!==m%1)return NaN;r=r.toString().split("e");r=Math[e](+(r[0]+"e"+(r[1]?+r[1]-m:-m)));r=r.toString().split("e");
return+(r[0]+"e"+(r[1]?+r[1]+m:m))}Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=void 0;B.registerFunctions=function(e,r){function m(a,h,q){a=c.toNumber(a);return isNaN(a)?a:isNaN(h)||isNaN(q)||h>q?NaN:a<h?h:a>q?q:a}e.number=function(a,h){return r(a,h,function(q,n,k){c.pcCheck(k,1,2,a,h);q=k[0];return c.isNumber(q)?q:null===q?0:c.isDate(q)?q.toNumber():c.isBoolean(q)?Number(q):c.isArray(q)?NaN:""===q||void 0===q?Number(q):c.isString(q)?void 0!==k[1]?(k=c.multiReplace(k[1],"\u2030",
""),k=c.multiReplace(k,"\u00a4",""),u.parse(q,{pattern:k})):Number(q.trim()):Number(q)})};e.abs=function(a,h){return r(a,h,function(q,n,k){c.pcCheck(k,1,1,a,h);return Math.abs(c.toNumber(k[0]))})};e.acos=function(a,h){return r(a,h,function(q,n,k){c.pcCheck(k,1,1,a,h);return Math.acos(c.toNumber(k[0]))})};e.asin=function(a,h){return r(a,h,function(q,n,k){c.pcCheck(k,1,1,a,h);return Math.asin(c.toNumber(k[0]))})};e.atan=function(a,h){return r(a,h,function(q,n,k){c.pcCheck(k,1,1,a,h);return Math.atan(c.toNumber(k[0]))})};
e.atan2=function(a,h){return r(a,h,function(q,n,k){c.pcCheck(k,2,2,a,h);return Math.atan2(c.toNumber(k[0]),c.toNumber(k[1]))})};e.ceil=function(a,h){return r(a,h,function(q,n,k){c.pcCheck(k,1,2,a,h);return 2===k.length?(q=c.toNumber(k[1]),isNaN(q)&&(q=0),t("ceil",c.toNumber(k[0]),-1*q)):Math.ceil(c.toNumber(k[0]))})};e.round=function(a,h){return r(a,h,function(q,n,k){c.pcCheck(k,1,2,a,h);return 2===k.length?(q=c.toNumber(k[1]),isNaN(q)&&(q=0),t("round",c.toNumber(k[0]),-1*q)):Math.round(c.toNumber(k[0]))})};
e.floor=function(a,h){return r(a,h,function(q,n,k){c.pcCheck(k,1,2,a,h);return 2===k.length?(q=c.toNumber(k[1]),isNaN(q)&&(q=0),t("floor",c.toNumber(k[0]),-1*q)):Math.floor(c.toNumber(k[0]))})};e.cos=function(a,h){return r(a,h,function(q,n,k){c.pcCheck(k,1,1,a,h);return Math.cos(c.toNumber(k[0]))})};e.isnan=function(a,h){return r(a,h,function(q,n,k){c.pcCheck(k,1,1,a,h);return"number"===typeof k[0]&&isNaN(k[0])})};e.exp=function(a,h){return r(a,h,function(q,n,k){c.pcCheck(k,1,1,a,h);return Math.exp(c.toNumber(k[0]))})};
e.log=function(a,h){return r(a,h,function(q,n,k){c.pcCheck(k,1,1,a,h);return Math.log(c.toNumber(k[0]))})};e.pow=function(a,h){return r(a,h,function(q,n,k){c.pcCheck(k,2,2,a,h);return Math.pow(c.toNumber(k[0]),c.toNumber(k[1]))})};e.random=function(a,h){return r(a,h,function(q,n,k){c.pcCheck(k,0,0,a,h);return Math.random()})};e.sin=function(a,h){return r(a,h,function(q,n,k){c.pcCheck(k,1,1,a,h);return Math.sin(c.toNumber(k[0]))})};e.sqrt=function(a,h){return r(a,h,function(q,n,k){c.pcCheck(k,1,1,
a,h);return Math.sqrt(c.toNumber(k[0]))})};e.tan=function(a,h){return r(a,h,function(q,n,k){c.pcCheck(k,1,1,a,h);return Math.tan(c.toNumber(k[0]))})};e.defaultvalue=function(a,h){return r(a,h,function(q,n,k){c.pcCheck(k,2,2,a,h);return null===k[0]||""===k[0]||void 0===k[0]?k[1]:k[0]})};e.isempty=function(a,h){return r(a,h,function(q,n,k){c.pcCheck(k,1,1,a,h);return null===k[0]||""===k[0]||void 0===k[0]?!0:!1})};e["boolean"]=function(a,h){return r(a,h,function(q,n,k){c.pcCheck(k,1,1,a,h);return c.toBoolean(k[0])})};
e.constrain=function(a,h){return r(a,h,function(q,n,k){c.pcCheck(k,3,3,a,h);q=c.toNumber(k[1]);n=c.toNumber(k[2]);if(c.isArray(k[0])){var g=[],b=0;for(k=k[0];b<k.length;b++)g.push(m(k[b],q,n));return g}if(c.isImmutableArray(k[0])){g=[];for(b=0;b<k[0].length();b++)g.push(m(k[0].get(b),q,n));return g}return m(k[0],q,n)})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../executionError","../languageUtils","./fieldStats"],function(f,B,l,d,c){function u(t,e,r,m){if(1===m.length){if(d.isArray(m[0]))return c.calculateStat(t,
m[0],-1);if(d.isImmutableArray(m[0]))return c.calculateStat(t,m[0].toArray(),-1)}return c.calculateStat(t,m,-1)}Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=void 0;B.registerFunctions=function(t,e){t.stdev=function(r,m){return e(r,m,function(a,h,q){return u("stdev",a,h,q)})};t.variance=function(r,m){return e(r,m,function(a,h,q){return u("variance",a,h,q)})};t.average=function(r,m){return e(r,m,function(a,h,q){return u("mean",a,h,q)})};t.mean=function(r,m){return e(r,m,function(a,
h,q){return u("mean",a,h,q)})};t.sum=function(r,m){return e(r,m,function(a,h,q){return u("sum",a,h,q)})};t.min=function(r,m){return e(r,m,function(a,h,q){return u("min",a,h,q)})};t.max=function(r,m){return e(r,m,function(a,h,q){return u("max",a,h,q)})};t.distinct=function(r,m){return e(r,m,function(a,h,q){return u("distinct",a,h,q)})};t.count=function(r,m){return e(r,m,function(a,h,q){d.pcCheck(q,1,1,r,m);if(d.isArray(q[0])||d.isString(q[0]))return q[0].length;if(d.isImmutableArray(q[0]))return q[0].length();
throw new l.ArcadeExecutionError(r,l.ExecutionErrorCodes.InvalidParameter,m);})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(f,B,l){function d(u){for(var t=0,e=0;e<u.length;e++)t+=u[e];return t/u.length}function c(u){for(var t=d(u),e=0,r=0;r<u.length;r++)e+=Math.pow(t-u[r],2);return e/u.length}Object.defineProperty(B,"__esModule",{value:!0});B.calculateStat=B.decodeStatType=void 0;B.decodeStatType=function(u){switch(u.toLowerCase()){case "distinct":return"distinct";
case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};B.calculateStat=function(u,t,e){void 0===e&&(e=1E3);switch(u.toLowerCase()){case "distinct":a:{u=e;e=[];for(var r={},m=[],a=0;a<t.length;a++){if(void 0!==t[a]&&null!==t[a]&&t[a]!==l.voidOperation){var h=t[a];if(l.isNumber(h)||l.isString(h))void 0===r[h]&&(e.push(h),r[h]=1);else{for(var q=
!1,n=0;n<m.length;n++)!0===l.equalityTest(m[n],h)&&(q=!0);!1===q&&(m.push(h),e.push(h))}}if(e.length>=u&&-1!==u){t=e;break a}}t=e}return t;case "avg":case "mean":return d(l.toNumberArray(t));case "min":return Math.min.apply(Math,l.toNumberArray(t));case "sum":t=l.toNumberArray(t);for(e=u=0;e<t.length;e++)u+=t[e];return u;case "max":return Math.max.apply(Math,l.toNumberArray(t));case "stdev":case "stddev":return Math.sqrt(c(l.toNumberArray(t)));case "var":case "variance":return c(l.toNumberArray(t));
case "count":return t.length}return 0}})},"esri/arcade/functions/string":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../ArcadePortal ../Attachment ../Dictionary ../executionError ../languageUtils ../featureset/support/shared ./convertdirection ./hash ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../SpatialReference ../../arcgis/Portal".split(" "),function(f,B,l,d,c,u,t,e,
r,m,a,h,q,n,k,g,b,x,v){function y(E,C){return E&&C?E.x===C.x&&E.y===C.y?!0:!1:E===C}function D(E,C,z){if(null===E)C.updateUint8Array([0,139]);else if(r.isArray(E)){C.updateUint8Array([61]);if(z.map.has(E))E=z.map.get(E),C.updateIntArray([E^61237541]);else{z.map.set(E,z.currentLength++);for(var w=0;w<E.length;w++){var A=E[w];D(A,C,z)}z.map.delete(E);z.currentLength--}C.updateUint8Array([199])}else if(r.isImmutableArray(E)){C.updateUint8Array([61]);if(z.map.has(E))E=z.map.get(E),C.updateIntArray([E^
61237541]);else{z.map.set(E,z.currentLength++);w=0;for(var G=E.toArray();w<G.length;w++)A=G[w],D(A,C,z);z.map.delete(E);z.currentLength--}C.updateUint8Array([199])}else if(r.isDate(E))C.updateIntArray([E.toNumber()]),C.updateUint8Array([241]);else if(r.isString(E))C.updateIntArray([E.length]),C.updateWithString(E),C.updateUint8Array([41]);else if(r.isBoolean(E))C.updateUint8Array([!0===E?1:0,113]);else if(r.isNumber(E))C.updateFloatArray([E]),C.updateUint8Array([173]);else{if(E instanceof u)throw new e.ArcadeExecutionError(z.context,
e.ExecutionErrorCodes.UnsupportedHashType,z.node);if(E instanceof c)throw new e.ArcadeExecutionError(z.context,e.ExecutionErrorCodes.UnsupportedHashType,z.node);if(E instanceof t){C.updateUint8Array([223]);if(z.map.has(E))E=z.map.get(E),C.updateIntArray([E^61237541]);else{z.map.set(E,z.currentLength++);w=0;for(G=E.keys();w<G.length;w++)A=G[w],C.updateIntArray([A.length]),C.updateWithString(A),C.updateUint8Array([251]),A=E.field(A),D(A,C,z),C.updateUint8Array([239]);z.map.delete(E);z.currentLength--}C.updateUint8Array([73])}else{if(r.isFeature(E))throw new e.ArcadeExecutionError(z.context,
e.ExecutionErrorCodes.UnsupportedHashType,z.node);if(E instanceof k)C.updateIntArray([3833836621]),C.updateIntArray([0]),C.updateFloatArray([E.x]),C.updateIntArray([1]),C.updateFloatArray([E.y]),C.updateIntArray([3765347959]),D(E.spatialReference.wkid,C,z);else if(E instanceof g){C.updateIntArray([1266616829]);for(w=0;w<E.rings.length;w++){G=E.rings[w];var F=[],H=null,J=null;for(A=0;A<G.length;A++){var K=E.getPoint(w,A);if(0===A)H=K;else if(y(J,K))continue;J=K;A===G.length-1&&y(H,K)||F.push(K)}C.updateIntArray([1397116793,
F.length]);for(A=0;A<F.length;A++)K=F[A],C.updateIntArray([3962308117,A]),D(K,C,z),C.updateIntArray([2716288009]);C.updateIntArray([2278822459])}C.updateIntArray([3878477243]);D(E.spatialReference.wkid,C,z)}else if(E instanceof b){C.updateIntArray([4106883559]);for(w=0;w<E.paths.length;w++){G=E.paths[w];C.updateIntArray([1397116793,G.length]);for(A=0;A<G.length;A++)C.updateIntArray([3962308117,A]),D(E.getPoint(w,A),C,z),C.updateIntArray([2716288009]);C.updateIntArray([2278822459])}C.updateIntArray([2568784753]);
D(E.spatialReference.wkid,C,z)}else if(E instanceof n){C.updateIntArray([588535921,E.points.length]);for(A=0;A<E.points.length;A++)w=E.getPoint(A),C.updateIntArray([A]),D(w,C,z);C.updateIntArray([1700171621]);D(E.spatialReference.wkid,C,z)}else if(E instanceof q)C.updateIntArray([3483648373]),C.updateIntArray([0]),C.updateFloatArray([E.xmax]),C.updateIntArray([1]),C.updateFloatArray([E.xmin]),C.updateIntArray([2]),C.updateFloatArray([E.ymax]),C.updateIntArray([3]),C.updateFloatArray([E.ymin]),C.updateIntArray([3622027469]),
D(E.spatialReference.wkid,C,z);else if(E instanceof x)C.updateIntArray([14]),void 0!==E.wkid&&null!==E.wkid&&C.updateIntArray([E.wkid]),E.wkt&&C.updateWithString(E.wkt);else{if(r.isFunctionParameter(E))throw new e.ArcadeExecutionError(z.context,e.ExecutionErrorCodes.UnsupportedHashType,z.node);if(r.isFeatureSet(E))throw new e.ArcadeExecutionError(z.context,e.ExecutionErrorCodes.UnsupportedHashType,z.node);r.isFeatureSetCollection(E);throw new e.ArcadeExecutionError(z.context,e.ExecutionErrorCodes.UnsupportedHashType,
z.node);}}}}Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=void 0;B.registerFunctions=function(E,C){E.portal=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,1,1,z,w);return new c(r.toString(F[0]))})};E.typeof=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,1,1,z,w);A=r.getType(F[0]);if("Unrecognised Type"===A)throw new e.ArcadeExecutionError(z,e.ExecutionErrorCodes.UnrecognisedType,w);return A})};E.trim=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,1,1,
z,w);return r.toString(F[0]).trim()})};E.tohex=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,1,1,z,w);A=r.toNumber(F[0]);return isNaN(A)?A:A.toString(16)})};E.upper=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,1,1,z,w);return r.toString(F[0]).toUpperCase()})};E.proper=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,1,2,z,w);A=1;2===F.length&&"firstword"===r.toString(F[1]).toLowerCase()&&(A=2);G=/\s/;F=r.toString(F[0]);for(var H="",J=!0,K=0;K<F.length;K++){var Q=F[K];G.test(Q)?
1===A&&(J=!0):Q.toUpperCase()!==Q.toLowerCase()&&(J?(Q=Q.toUpperCase(),J=!1):Q=Q.toLowerCase());H+=Q}return H})};E.lower=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,1,1,z,w);return r.toString(F[0]).toLowerCase()})};E.guid=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,0,1,z,w);if(0<F.length)switch(r.toString(F[0]).toLowerCase()){case "digits":return r.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return r.generateUUID();case "digits-hyphen-parentheses":return"("+
r.generateUUID()+")"}return"{"+r.generateUUID()+"}"})};E.standardizeguid=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,2,2,z,w);A=r.toString(F[0]);if(""===A||null===A)return"";A=/^(\{|\()?([0-9a-z]{8})(\-?)([0-9a-z]{4})(\-?)([0-9a-z]{4})(\-?)([0-9a-z]{4})(\-?)([0-9a-z]{12})(\}|\))?$/gim.exec(A);if(!A)return"";G=[];for(var H=1;H<A.length;H++){var J=A[H];void 0!==J&&""!==J&&null!==J&&0>["-","}","{","(",")"].indexOf(J)&&G.push(J)}if(5!==G.length)return"";A=G[0]+"-"+G[1]+"-"+G[2]+"-"+G[3]+"-"+
G[4];switch(r.toString(F[1]).toLowerCase()){case "digits":return A.replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return A;case "digits-hyphen-parentheses":return"("+A+")"}return"{"+A+"}"})};E.console=function(z,w){return C(z,w,function(A,G,F){0!==F.length&&(1===F.length?z.console(r.toString(F[0])):z.console(r.toString(F)));return r.voidOperation})};E.mid=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,2,3,z,w);A=r.toNumber(F[1]);if(isNaN(A))return"";0>
A&&(A=0);if(2===F.length)return r.toString(F[0]).substr(A);G=r.toNumber(F[2]);if(isNaN(G))return"";0>G&&(G=0);return r.toString(F[0]).substr(A,G)})};E.find=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,2,3,z,w);A=0;if(2<F.length){A=r.toNumber(r.defaultUndefined(F[2],0));if(isNaN(A))return-1;0>A&&(A=0)}return r.toString(F[1]).indexOf(r.toString(F[0]),A)})};E.left=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,2,2,z,w);A=r.toNumber(F[1]);if(isNaN(A))return"";0>A&&(A=0);return r.toString(F[0]).substr(0,
A)})};E.right=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,2,2,z,w);A=r.toNumber(F[1]);if(isNaN(A))return"";0>A&&(A=0);return r.toString(F[0]).substr(-1*A,A)})};E.split=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,2,4,z,w);A=r.toNumber(r.defaultUndefined(F[2],-1));G=r.toBoolean(r.defaultUndefined(F[3],!1));-1===A||null===A||!0===G?F=r.toString(F[0]).split(r.toString(F[1])):(isNaN(A)&&(A=-1),-1>A&&(A=-1),F=r.toString(F[0]).split(r.toString(F[1]),A));if(!1===G)return F;G=[];for(var H=
0;H<F.length&&!(-1!==A&&G.length>=A);H++)""!==F[H]&&void 0!==F[H]&&G.push(F[H]);return G})};E.text=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,1,2,z,w);return r.toStringExplicit(F[0],F[1])})};E.concatenate=function(z,w){return C(z,w,function(A,G,F){A=[];if(1>F.length)return"";if(r.isArray(F[0])){G=r.defaultUndefined(F[2],"");for(var H=0;H<F[0].length;H++)A[H]=r.toStringExplicit(F[0][H],G);return 1<F.length?A.join(F[1]):A.join("")}if(r.isImmutableArray(F[0])){G=r.defaultUndefined(F[2],"");
for(H=0;H<F[0].length();H++)A[H]=r.toStringExplicit(F[0].get(H),G);return 1<F.length?A.join(F[1]):A.join("")}for(H=0;H<F.length;H++)A[H]=r.toStringExplicit(F[H]);return A.join("")})};E.reverse=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,1,1,z,w);if(r.isArray(F[0]))return A=F[0].slice(0),A.reverse(),A;if(r.isImmutableArray(F[0]))return A=F[0].toArray().slice(0),A.reverse(),A;throw new e.ArcadeExecutionError(z,e.ExecutionErrorCodes.InvalidParameter,w);})};E.replace=function(z,w){return C(z,
w,function(A,G,F){r.pcCheck(F,3,4,z,w);A=r.toString(F[0]);G=r.toString(F[1]);var H=r.toString(F[2]);return(4===F.length?r.toBoolean(F[3]):1)?r.multiReplace(A,G,H):A.replace(G,H)})};E.schema=function(z,w){return C(z,w,function(A,G,F){if(r.isFeature(F[0]))return(A=r.featureSchema(F[0]))?t.convertObjectToArcadeDictionary(A,r.defaultTimeZone(z)):null;throw new e.ArcadeExecutionError(z,e.ExecutionErrorCodes.InvalidParameter,w);})};E.subtypes=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,1,1,z,
w);if(r.isFeature(F[0]))return(A=r.featureSubtypes(F[0]))?t.convertObjectToArcadeDictionary(A,r.defaultTimeZone(z)):null;throw new e.ArcadeExecutionError(z,e.ExecutionErrorCodes.InvalidParameter,w);})};E.subtypecode=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,1,1,z,w);if(r.isFeature(F[0])){G=r.featureSubtypes(F[0]);if(!G)return null;if(G.subtypeField&&F[0].hasField(G.subtypeField))for(F=F[0].field(G.subtypeField),A=0,G=G.subtypes;A<G.length;A++){var H=G[A];if(H.code===F)return H.code}return null}throw new e.ArcadeExecutionError(z,
e.ExecutionErrorCodes.InvalidParameter,w);})};E.subtypename=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,1,1,z,w);if(r.isFeature(F[0])){G=r.featureSubtypes(F[0]);if(!G)return"";if(G.subtypeField&&F[0].hasField(G.subtypeField))for(F=F[0].field(G.subtypeField),A=0,G=G.subtypes;A<G.length;A++){var H=G[A];if(H.code===F)return H.name}return""}throw new e.ArcadeExecutionError(z,e.ExecutionErrorCodes.InvalidParameter,w);})};E.gdbversion=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,1,
1,z,w);if(r.isFeature(F[0]))return F[0].gdbVersion();throw new e.ArcadeExecutionError(z,e.ExecutionErrorCodes.InvalidParameter,w);})};E.domain=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,2,3,z,w);if(r.isFeature(F[0]))return(A=r.featureFullDomain(F[0],r.toString(F[1]),void 0===F[2]?void 0:r.toNumber(F[2])))&&A.domain?"coded-value"===A.domain.type||"codedValue"===A.domain.type?t.convertObjectToArcadeDictionary({type:"codedValue",name:A.domain.name,dataType:m.layerFieldEsriConstants[A.field.type],
codedValues:A.domain.codedValues.map(function(H){return{name:H.name,code:H.code}})},r.defaultTimeZone(z)):t.convertObjectToArcadeDictionary({type:"range",name:A.domain.name,dataType:m.layerFieldEsriConstants[A.field.type],min:A.domain.min,max:A.domain.max},r.defaultTimeZone(z)):null;throw new e.ArcadeExecutionError(z,e.ExecutionErrorCodes.InvalidParameter,w);})};E.domainname=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,2,4,z,w);if(r.isFeature(F[0]))return r.featureDomainValueLookup(F[0],
r.toString(F[1]),F[2],void 0===F[3]?void 0:r.toNumber(F[3]));throw new e.ArcadeExecutionError(z,e.ExecutionErrorCodes.InvalidParameter,w);})};E.domaincode=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,2,4,z,w);if(r.isFeature(F[0]))return r.featureDomainCodeLookup(F[0],r.toString(F[1]),F[2],void 0===F[3]?void 0:r.toNumber(F[3]));throw new e.ArcadeExecutionError(z,e.ExecutionErrorCodes.InvalidParameter,w);})};E.urlencode=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,1,1,z,w);if(null===
F[0])return"";if(F[0]instanceof t){A="";G=0;for(var H=F[0].keys();G<H.length;G++){var J=H[G],K=F[0].field(J);""!==A&&(A+="\x26");A=null===K?A+(encodeURIComponent(J)+"\x3d"):A+(encodeURIComponent(J)+"\x3d"+encodeURIComponent(K))}return A}return encodeURIComponent(r.toString(F[0]))})};E.hash=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,1,1,z,w);A=new h.XXH(0);D(F[0],A,{context:z,node:w,map:new Map,currentLength:0});return A.digest()})};E.convertdirection=function(z,w){return C(z,w,function(A,
G,F){r.pcCheck(F,3,3,z,w);return a.convertDirection(F[0],F[1],F[2])})};E.fromjson=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,1,1,z,w);if(!1===r.isString(F[0]))throw new e.ArcadeExecutionError(z,e.ExecutionErrorCodes.InvalidParameter,w);return t.convertJsonToArcade(JSON.parse(r.toString(F[0])),r.defaultTimeZone(z))})};E.expects=function(z,w){return C(z,w,function(A,G,F){if(1>F.length)throw new e.ArcadeExecutionError(z,e.ExecutionErrorCodes.WrongNumberOfParameters,w);return r.voidOperation})};
E.tocharcode=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,1,2,z,w);A=r.toNumber(r.defaultUndefined(F[1],0));G=r.toString(F[0]);if(0===G.length&&1===F.length)return null;if(G.length<=A||0>A)throw new e.ArcadeExecutionError(z,e.ExecutionErrorCodes.OutOfBounds,w);return G.charCodeAt(A)})};E.tocodepoint=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,1,2,z,w);A=r.toNumber(r.defaultUndefined(F[1],0));G=r.toString(F[0]);if(0===G.length&&1===F.length)return null;if(G.length<=A||0>A)throw new e.ArcadeExecutionError(z,
e.ExecutionErrorCodes.OutOfBounds,w);return G.codePointAt(A)})};E.fromcharcode=function(z,w){return C(z,w,function(A,G,F){if(1>F.length)throw new e.ArcadeExecutionError(z,e.ExecutionErrorCodes.WrongNumberOfParameters,w);A=F.map(function(H){return Math.trunc(r.toNumber(H))}).filter(function(H){return 0<=H&&65535>=H});return 0===A.length?null:String.fromCharCode.apply(null,A)})};E.fromcodepoint=function(z,w){return C(z,w,function(A,G,F){if(1>F.length)throw new e.ArcadeExecutionError(z,e.ExecutionErrorCodes.WrongNumberOfParameters,
w);try{var H=F.map(function(J){return Math.trunc(r.toNumber(J))}).filter(function(J){return 1114111>=J&&J>>>0===J})}catch(J){return null}return 0===H.length?null:String.fromCodePoint.apply(null,H)})};E.getuser=function(z,w){return C(z,w,function(A,G,F){r.pcCheck(F,0,2,z,w);A=r.defaultUndefined(F[1],"");A=!0===A||!1===A?"":r.toString(A);if(null!==A&&""!==A)return null;if(0===F.length||F[0]instanceof c){G=null;z.services&&z.services.portal&&(G=z.services.portal);if(0<F.length){F=F[0].field("url");var H=
G;F=F?(new v.Portal(F)).portalUrl===((null===H||void 0===H?void 0:H.portalUrl)||""):!1;if(!F)return null}if(!G)return null;if(""===A){a:{A=G;if(A.getPortalUser()&&(A=A.getPortalUser())){G={};F=0;for(H="username id fullName availableCredits assignedCredits firstName lastName preferredView description email idpUsername favGroupId lastLogin mfaEnabled access storageUsage storageQuota orgId role privileges".split(" ");F<H.length;F++){var J=H[F];void 0!==A[J]&&(G[J]=A[J])}A=G;break a}A=null}if(A){A=JSON.parse(JSON.stringify(A));
G=0;for(F=["lastLogin","created","modified"];G<F.length;G++)H=F[G],void 0!==A[H]&&null!==A[H]&&(A[H]=new Date(A[H]));return t.convertObjectToArcadeDictionary(A,r.defaultTimeZone(z))}}return null}throw new e.ArcadeExecutionError(z,e.ExecutionErrorCodes.InvalidParameter,w);})}}})},"esri/arcade/ArcadePortal":function(){define(["require","exports","./polyfill/tsSupport/extends","./Dictionary"],function(f,B,l,d){return function(c){function u(t){var e=c.call(this)||this;e.declaredClass="esri.arcade.Portal";
e.immutable=!1;e.setField("url",t);e.immutable=!0;return e}l(u,c);return u}(d)})},"esri/arcade/Attachment":function(){define(["require","exports","./polyfill/tsSupport/extends","./Dictionary"],function(f,B,l,d){return function(c){function u(t,e,r,m,a,h){var q=c.call(this)||this;q.attachmentUrl=a;q.declaredClass="esri.arcade.Attachment";q.immutable=!1;q.setField("id",t);q.setField("name",e);q.setField("contenttype",r);q.setField("size",m);q.setField("exifinfo",h);q.immutable=!0;return q}l(u,c);return u}(d)})},
"esri/arcade/functions/convertdirection":function(){define("require exports ../Dictionary ../executionError ../languageUtils ../polyfill/maybe".split(" "),function(f,B,l,d,c,u){function t(R){if(!1===c.isString(R))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidParameter,null);return R}function e(R,S){S=Math.pow(10,S);return Math.round(R*S)/S}function r(R){var S=parseFloat,M=R.toString(),X=M.replace;var fa=+R;fa=isFinite(fa)?fa-fa%1||(0>fa?-0:0===fa?fa:0):fa;S=S(X.call(M,fa.toString(),
"0"))*((0<R)-(0>R)||+R);return 0>R?{fraction:S,integer:Math.ceil(R)}:{fraction:S,integer:Math.floor(R)}}function m(R,S){switch(R){case 0:return"SHORT"===S?"N":"North";case 1:return"SHORT"===S?"E":"East";case 2:return"SHORT"===S?"S":"South";case 3:return"SHORT"===S?"W":"West"}}function a(R,S,M){for(;R.length<M;)R=S+R;return R}function h(R,S){return R-Math.floor(R/S)*S}function q(R){switch(R){case 6:case 1:return 360;case 4:return H;case 5:return 400;case 2:return 1296E3;case 7:return 60;case 8:return 60;
default:throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicError,null,{reason:"unsupported evaluations"});}}function n(R){switch(R.toUpperCase().trim()){case "NORTH":case "NORTHAZIMUTH":case "NORTH AZIMUTH":return 1;case "POLAR":return 2;case "QUADRANT":return 3;case "SOUTH":case "SOUTHAZIMUTH":case "SOUTH AZIMUTH":return 4}throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicError,null,{reason:"unsupported directionType"});}function k(R){switch(R.toUpperCase().trim()){case "D":case "DD":case "DECIMALDEGREE":case "DECIMAL DEGREE":case "DEGREE":case "DECIMALDEGREES":case "DECIMAL DEGREES":case "DEGREES":return 1;
case "DMS":case "DEGREESMINUTESSECONDS":case "DEGREES MINUTES SECONDS":return 3;case "R":case "RAD":case "RADS":case "RADIAN":case "RADIANS":return 4;case "G":case "GON":case "GONS":case "GRAD":case "GRADS":case "GRADIAN":case "GRADIANS":return 5}throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicError,null,{reason:"unsupported units"});}function g(R,S,M){var X=null;switch(S){case 1:X=B.preciseMultiply(R,3600);break;case 2:X=R;break;case 5:X=B.preciseMultiply(R,3240);break;case 4:X=
B.preciseMultiply(R,J);break;default:throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}switch(M){case 1:return B.preciseDivide(X,3600);case 2:return X;case 5:return B.preciseDivide(X,3240);case 4:return X/J;default:throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}}function b(R){u.assertIsSome(R);switch(R){case 1:case 6:case 3:return 1;case 5:return 5;case 7:return 7;case 4:return 4;
case 2:case 8:return 2}}function x(R){switch(c.toNumber(R)){case 1:return{first:0,second:1};case 2:return{first:2,second:1};case 3:return{first:2,second:3};case 4:return{first:0,second:3}}return null}function v(R){switch(R.toUpperCase().trim()){case "N":case "NORTH":return 0;case "E":case "EAST":return 1;case "S":case "SOUTH":return 2;case "W":case "WEST":return 3}return null}function y(R){R=parseFloat(R);if(c.isNumber(R)){if(isNaN(R))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicError,
null,{reason:"invalid conversion"});return R}throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}function D(R,S,M){var X=3===M,fa=null,ea=null,ha=0,ra=0;ra=0;if(X){if(2>R.length)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});ra=1;(ea=x(c.toString(R[R.length-1])))?(fa=ea.first,ea=ea.second):(ha=1,fa=v(c.toString(R[0])),ea=v(c.toString(R[R.length-1])));if(null===fa||null===ea)throw new d.ArcadeExecutionError(null,
d.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}switch(S){case 1:case 4:case 5:if(0===R.length)break;return X?Z.createFromAngleMeridianAndDirection(aa.createFromAngleAndUnits(y(R[ha]),b(S)),fa,ea):Z.createFromAngleAndDirection(aa.createFromAngleAndUnits(y(R[ha]),b(S)),M);case 3:ra=R.length-ra-ha;if(3===ra)return R=aa.createFromDegreesMinutesSeconds(y(R[ha]),y(R[ha+1]),y(R[ha+2])),X?Z.createFromAngleMeridianAndDirection(R,fa,ea):Z.createFromAngleAndDirection(R,M);if(1===ra)return R=
y(R[ha]),R=L.numberToDms(R),R=aa.createFromDegreesMinutesSeconds(R.m_degrees,R.m_minutes,R.m_seconds),X?Z.createFromAngleMeridianAndDirection(R,fa,ea):Z.createFromAngleAndDirection(R,M)}throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}function E(R){for(var S=[" ","-","/","'",'"',"\\","^","\u00b0",K,"\t","\r","\n","*"],M="",X=0;X<R.length;X++){var fa=R.charAt(X);M=S.includes(fa)?M+"RRSPLITRRSPLITRR":M+fa}return M.split("RRSPLITRRSPLITRR").filter(function(ea){return""!==
ea})}function C(R,S,M){for(var X={padding:0,rounding:0,newpos:S},fa=!1;S<R.length;){var ea=R[S];if(ea===M)fa?X.rounding++:X.padding++,S++;else if("."===ea)fa=!0,S++;else break}X.newpos=S-1;return X}Object.defineProperty(B,"__esModule",{value:!0});B.convertDirection=B.preciseDivide=B.preciseMultiply=B.preciseMinus=B.preciseAdd=void 0;var z=function(R){return function(S,M,X){X=X||14;return+R(S,M).toFixed(X)}},w=function(R,S){return R+S},A=function(R,S){return R-S},G=function(R,S){return R*S},F=function(R,
S){return R/S};B.preciseAdd=function(R,S,M){return z(w)(R,S,M)};B.preciseMinus=function(R,S,M){return z(A)(R,S,M)};B.preciseMultiply=function(R,S,M){return z(G)(R,S,M)};B.preciseDivide=function(R,S,M){return z(F)(R,S,M)};var H=2*Math.PI,J=648E3/Math.PI,K=String.fromCharCode(7501),Q;(function(R){R[R.north=0]="north";R[R.east=1]="east";R[R.south=2]="south";R[R.west=3]="west"})(Q||(Q={}));var P;(function(R){R[R.decimal_degrees=1]="decimal_degrees";R[R.seconds=2]="seconds";R[R.degrees_minutes_seconds=
3]="degrees_minutes_seconds";R[R.radians=4]="radians";R[R.gradians=5]="gradians";R[R.truncated_degrees=6]="truncated_degrees";R[R.fractional_degree_minutes=7]="fractional_degree_minutes";R[R.fractional_minute_seconds=8]="fractional_minute_seconds"})(P||(P={}));var I;(function(R){R[R.north_azimuth=1]="north_azimuth";R[R.polar=2]="polar";R[R.quadrant=3]="quadrant";R[R.south_azimuth=4]="south_azimuth"})(I||(I={}));var N;(function(R){R[R.meridian=0]="meridian";R[R.direction=1]="direction"})(N||(N={}));
var L=function(){function R(S,M,X){this.m_degrees=S;this.m_minutes=M;this.m_seconds=X}R.prototype.getField=function(S){switch(S){case 1:case 6:return this.m_degrees;case 7:return this.m_minutes;case 2:case 8:return this.m_seconds;default:throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}};R.secondsToDMS=function(S){var M=r(S).fraction;S=r(S).integer;var X=Math.floor(S/3600);S-=3600*X;var fa=Math.floor(S/60);return new R(X,fa,S-60*fa+M)};
R.numberToDms=function(S){var M=r(S).fraction;S=r(S).integer;var X=B.preciseMultiply(r(100*M).fraction,100);M=r(100*M).integer;return new R(S,M,X)};R.prototype.format=function(S,M){M=e(this.m_seconds,M);var X=this.m_minutes,fa=this.m_degrees;if(2===S||8===S)60<=M&&(M-=60,++X),60<=X&&(X=0,++fa),360<=fa&&(fa=0);else if(7===S)M=0,X=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,fa=this.m_degrees,60<=X&&(X=0,++fa),360<=fa&&(fa=0);else if(1===S||6===S)S=B.preciseDivide(this.m_seconds,3600),M=B.preciseDivide(this.m_minutes,
60),fa=Math.round(this.m_degrees+M+S),M=X=0;return new R(fa,X,M)};R.dmsToSeconds=function(S,M,X){return 3600*S+60*M+X};return R}(),W=function(){function R(S,M,X){this.meridian=S;this.angle=M;this.direction=X}R.prototype.fetchAzimuth=function(S){return S===N.meridian?this.meridian:this.direction};return R}(),Z=function(){function R(S){this._angle=S}R.createFromAngleAndDirection=function(S,M){return new R(new aa(R._convertDirectionFormat(S.extractAngularUnits(2),M,1)))};R.prototype.getAngle=function(S){var M=
this._angle.extractAngularUnits(2);switch(S){case 1:case 4:case 2:return S=new aa(R._convertDirectionFormat(M,1,S));case 3:return S=R.secondsNorthAzimuthToQuadrant(M),S=new aa(S.angle)}};R.prototype.getMeridian=function(S){var M=this._angle.extractAngularUnits(2);switch(S){case 1:return 0;case 4:return 2;case 2:return 1;case 3:return R.secondsNorthAzimuthToQuadrant(M).meridian}};R.prototype.getDirection=function(S){var M=this._angle.extractAngularUnits(2);switch(S){case 1:return 1;case 4:return 3;
case 2:return 0;case 3:return R.secondsNorthAzimuthToQuadrant(M).direction}};R.secondsNorthAzimuthToQuadrant=function(S){var M=324E3>=S||972E3<=S?0:2;return new W(M,0===M?Math.min(1296E3-S,S):Math.abs(S-648E3),648E3<S?3:1)};R.createFromAngleMeridianAndDirection=function(S,M,X){return new R(new aa(R.secondsQuadrantToNorthAzimuth(S.extractAngularUnits(2),M,X)))};R.secondsQuadrantToNorthAzimuth=function(S,M,X){return 0===M?1===X?S:1296E3-S:1===X?648E3-S:648E3+S};R._convertDirectionFormat=function(S,
M,X){var fa=0;switch(M){case 1:fa=S;break;case 2:fa=324E3-S;break;case 3:throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});case 4:fa=S+648E3}S=0;switch(X){case 1:S=fa;break;case 2:S=324E3-fa;break;case 3:throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});case 4:S=fa-648E3}S%=1296E3;return 0>S?1296E3+S:S};return R}(),aa=function(){function R(S){this._seconds=S}R.createFromAngleAndUnits=
function(S,M){return new R(g(S,M,2))};R.prototype.extractAngularUnits=function(S){return g(this._seconds,2,b(S))};R.createFromDegreesMinutesSeconds=function(S,M,X){return new R(B.preciseAdd(B.preciseAdd(B.preciseMultiply(S,3600),B.preciseMultiply(M,60)),X))};return R}(),ia=function(){function R(S,M,X,fa){this.view=S;this.angle=M;this.merdian=X;this.direction=fa;this._formattedDms=this._dms=null}R.createFromStringAndBearing=function(S,M,X){return new R(S,M.getAngle(X),M.getMeridian(X),M.getDirection(X))};
R.prototype.fetchAngle=function(){return this.angle};R.prototype.fetchMeridian=function(){return this.merdian};R.prototype.fetchDirection=function(){return this.direction};R.prototype.fetchView=function(){return this.view};R.prototype.fetchDms=function(){null===this._dms&&this._calculateDms();return this._dms};R.prototype.fetchFormattedDms=function(){null===this._formattedDms&&this._calculateDms();return this._formattedDms};R.prototype._calculateDms=function(){var S=null,M=6,X=0;for(S=0;S<this.view.length;S++){var fa=
this.view[S];switch(fa){case "m":S=C(this.view,S,fa);M=6===M?7:M;S=S.newpos;continue;case "s":S=C(this.view,S,fa),M=8,X=X<S.rounding?S.rounding:X,S=S.newpos}}this._dms=L.secondsToDMS(this.angle.extractAngularUnits(2));this._formattedDms=L.secondsToDMS(this.angle.extractAngularUnits(2)).format(M,X)};return R}();B.convertDirection=function(R,S,M){if(!(S instanceof l))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidParameter,null);if(!1===S.hasField("directionType"))throw new d.ArcadeExecutionError(null,
d.ExecutionErrorCodes.LogicError,null,{reason:"missing directionType"});if(!1===S.hasField("angleType"))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicError,null,{reason:"missing angleType"});var X=n(t(S.field("directiontype")));S=k(t(S.field("angletype")));if(c.isNumber(R)){R=c.toNumber(R);if(3===X)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});3===S?(R=L.numberToDms(R),S=Z.createFromAngleAndDirection(aa.createFromDegreesMinutesSeconds(R.m_degrees,
R.m_minutes,R.m_seconds),X)):S=Z.createFromAngleAndDirection(aa.createFromAngleAndUnits(R,b(S)),X)}else if(c.isString(R))S=D(E(R),S,X);else if(c.isArray(R))S=D(R,S,X);else if(c.isImmutableArray(R))S=D(R.toArray(),S,X);else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});if(!(M instanceof l))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidParameter,null);if(!1===M.hasField("directionType"))throw new d.ArcadeExecutionError(null,
d.ExecutionErrorCodes.LogicError,null,{reason:"missing directionType"});if(!1===M.hasField("outputType"))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicError,null,{reason:"missing angleType"});X=n(t(M.field("directiontype")));R=M.hasField("angleType")?k(t(M.field("angletype"))):null;var fa=t(M.field("outputType")).toUpperCase().trim();if(!X||!fa)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});if(!(R||"TEXT"===fa&&M.hasField("format")))throw new d.ArcadeExecutionError(null,
d.ExecutionErrorCodes.LogicError,null,{reason:"invalid unit"});switch(fa){case "VALUE":if(3===X||3===R)return M=S,S=M.getAngle(X),3===X&&3===R?(R=L.secondsToDMS(S.extractAngularUnits(2)),X=[m(M.getMeridian(X),"SHORT"),R.m_degrees,R.m_minutes,R.m_seconds,m(M.getDirection(X),"SHORT")]):3===R?(R=L.secondsToDMS(S.extractAngularUnits(2)),X=[R.m_degrees,R.m_minutes,R.m_seconds]):X=3===X?[m(M.getMeridian(X),"SHORT"),S.extractAngularUnits(R),m(M.getDirection(X),"SHORT")]:[S.extractAngularUnits(R)],X;M=S;
if((S=b(R))&&3!==R)X=M.getAngle(X).extractAngularUnits(S);else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});return X;case "TEXT":fa="";M.hasField("format")&&(fa=c.toString(M.field("format")));if(null===fa||""===fa){M="";switch(R){case 1:M=3===X?"DD.DD\u00b0":"DDD.DD\u00b0";break;case 3:M=3===X?"dd\u00b0 mm' ss\"":"ddd\u00b0 mm' ss.ss\"";break;case 4:M="R.RR";break;case 5:M="GGG.GG"+K;break;default:throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicError,
null,{reason:"conversion error"});}3===X&&(M="p "+M+" b");fa=M}M=S;R=fa;var ea="",ha=null,ra=null;S=ia.createFromStringAndBearing(R,M,X);fa={D:1,d:6,m:7,s:8,R:4,G:5};for(ra=0;ra<R.length;ra++){var Aa=R[ra];switch(Aa){case "[":ha=R;Aa={escaped:"",newpos:ra};for(ra++;ra<ha.length;){var Ea=ha[ra];ra++;if("]"===Ea)break;Aa.escaped+=Ea}Aa.newpos=ra-1;ha=Aa;ea+=ha.escaped;ra=ha.newpos;continue;case "D":case "d":case "m":case "s":case "R":case "G":ha=C(R,ra,Aa);ra=M.getAngle(X);a:{Aa=fa[Aa];Ea=ha.padding;
var va=ha.rounding,Ga=S,ca=null;switch(Aa){case 1:case 4:case 5:ca=h(e(ra.extractAngularUnits(Aa),va),q(Aa));ra=a(ca.toFixed(va),"0",Ea+va+(0<va?1:0));break a;case 6:case 7:ca=h(Ga.fetchFormattedDms().getField(Aa),q(Aa));ra=a(ca.toFixed(va),"0",Ea+va+(0<va?1:0));break a;case 8:ca=h(e(Ga.fetchDms().getField(Aa),va),q(Aa));ra=a(ca.toFixed(va),"0",Ea+va+(0<va?1:0));break a;default:throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}}ea+=ra;ra=
ha.newpos;continue;case "P":case "p":ea+=m(S.fetchMeridian(),"p"===Aa?"SHORT":"LONG");continue;case "B":case "b":ea+=m(S.fetchDirection(),"b"===Aa?"SHORT":"LONG");continue;default:ea+=Aa}}return ea;default:throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidParameter,null);}}})},"esri/arcade/functions/hash":function(){define(["require","exports"],function(f,B){function l(d){for(var c=[],u=0,t=d.length;u<t;u++){var e=d.charCodeAt(u);128>e?c.push(e):2048>e?c.push(192|e>>6,128|e&63):55296>
e||57344<=e?c.push(224|e>>12,128|e>>6&63,128|e&63):(u++,e=65536+((e&1023)<<10|d.charCodeAt(u)&1023),c.push(240|e>>18,128|e>>12&63,128|e>>6&63,128|e&63))}return new Uint8Array(c)}Object.defineProperty(B,"__esModule",{value:!0});B.XXH=void 0;f=function(){function d(c){this._seed=c;this._totallen=0;this._bufs=[];this.init()}d.prototype.init=function(){this._bufs=[];this._totallen=0;return this};d.prototype.updateFloatArray=function(c){for(var u=[],t=0;t<c.length;t++){var e=c[t];isNaN(e)?u.push("NaN"):
Infinity===e?u.push("Infinity"):-Infinity===e?u.push("-Infinity"):0===e?u.push("0"):u.push(e.toString(16))}this.update(l(u.join("")))};d.prototype.updateIntArray=function(c){c=Int32Array.from(c);this.update(new Uint8Array(c.buffer))};d.prototype.updateUint8Array=function(c){this.update(Uint8Array.from(c))};d.prototype.updateWithString=function(c){return this.update(l(c))};d.prototype.update=function(c){this._bufs.push(c);this._totallen+=c.length;return this};d.prototype.digest=function(){for(var c=
new Uint8Array(this._totallen),u=0,t=0,e=this._bufs;t<e.length;t++){var r=e[t];c.set(r,u);u+=r.length}this.init();return this._xxHash32(c,this._seed)};d.prototype._xxHash32=function(c,u){void 0===u&&(u=0);var t=u+374761393&4294967295,e=0;if(16<=c.length){t=[u+2654435761+2246822519&4294967295,u+2246822519&4294967295,u+0&4294967295,u-2654435761&4294967295];var r=c.length-16;for(e=u=0;(e&4294967280)<=r;e+=4){var m=e,a=c[m+0]+(c[m+1]<<8);m=c[m+2]+(c[m+3]<<8);a=t[u]+(2246822519*a+(2246822519*m<<16))&4294967295;
a=a<<13|a>>>19;t[u]=2654435761*(a&65535)+(2654435761*(a>>>16)<<16)&4294967295;u=u+1&3}t=(t[0]<<1|t[0]>>>31)+(t[1]<<7|t[1]>>>25)+(t[2]<<12|t[2]>>>20)+(t[3]<<18|t[3]>>>14)&4294967295}t=t+c.length&4294967295;for(u=c.length-4;e<=u;e+=4)m=e,a=c[m+0]+(c[m+1]<<8),m=c[m+2]+(c[m+3]<<8),t=t+(3266489917*a+(3266489917*m<<16))&4294967295,t=t<<17|t>>>15,t=668265263*(t&65535)+(668265263*(t>>>16)<<16)&4294967295;for(;e<c.length;++e)u=c[e],t+=374761393*u,t=t<<11|t>>>21,t=2654435761*(t&65535)+(2654435761*(t>>>16)<<
16)&4294967295;t^=t>>>15;t=(2246822519*(t&65535)&4294967295)+(2246822519*(t>>>16)<<16);t^=t>>>13;t=(3266489917*(t&65535)&4294967295)+(3266489917*(t>>>16)<<16);t^=t>>>16;return 0>t?t+4294967296:t};return d}();B.XXH=f})},"esri/arcade/ArcadeModuleLoader":function(){define(["require","exports"],function(f,B){Object.defineProperty(B,"__esModule",{value:!0});B.ArcadeModuleLoader=void 0;f=function(){function l(d,c){this._moduleSingletons=d;this._syntaxModules=c}l.prototype.loadLibrary=function(d){return null==
this._syntaxModules?null:(d=this._syntaxModules[d.toLowerCase()])?{syntax:d.script,uri:d.uri}:null};return l}();B.ArcadeModuleLoader=f})},"esri/arcade/ArcadeModuleResolver":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ../request ./parser ./featureset/support/RecentlyUsedCache ./executionError".split(" "),function(f,B,l,d,c,u,t,e,r,m){Object.defineProperty(B,"__esModule",{value:!0});B.ArcadeModuleResolver=
void 0;f=function(){function a(h){this.portalUri=h}a.prototype.extractRegexGroups=function(h,q){for(var n=[],k=0;k<q.length;k++)n[q[k]]="";k=0;for(var g=1;g<h.length;g++){var b=h[g];if(null!==b&&void 0!==b&&(n[q[k]]=b,k++,k>=q.length))break}return n};a.prototype.normalizeModuleUri=function(h){var q=/^[a-z0-9A-Z]+(@[0-9]+\.[0-9]+\.[0-9]+)?([\?|\/].*)?$/gi,n=/(.+)\/home\/item\.html\?id=(.+)$/gi,k=/(.+)\/sharing\/rest\/content\/users\/[a-zA-Z0-9]+\/items\/(.+)$/gi,g=/(.+)\/sharing\/rest\/content\/items\/(.+)$/gi,
b=/(.*)@([0-9]+\.[0-9]+\.[0-9]+)([\?|\/].*)?$/gi;if(h.startsWith("portal+")){var x=h.substring(7),v="",y=x,D=!1,E=0;for(n=[n,g,k];E<n.length;E++)if(k=n[E].exec(x),null!==k){D=this.extractRegexGroups(k,["portalurl","itemid"]);y=D.itemid;v=D.portalurl;D=!0;break}if(!1===D)if(q.test(x))y=x,v=this.portalUri;else throw new m.ModuleError(m.ModuleErrorCodes.UnsupportedUriProtocol,{uri:h});y.includes("/")&&(y=y.split("/")[0]);y.includes("?")&&(y=y.split("?")[0]);h="current";b=b.exec(y);null!==b&&(D=this.extractRegexGroups(b,
["itemid","versionstring"]),y=D.itemid,h=D.versionstring);v=(x||v).replace(/\/+$/,"");x=(-1!==v.indexOf("/sharing")?v+"/":v+"/sharing/rest/")+"content/items/"+y+"/resources/"+h+".arc";return{url:x,scheme:"portal",uri:"PO:"+x}}if(h.startsWith("mock")){if("mock"===h)return{url:"",scheme:"mock",data:'\n      export var hello \x3d 1;\n      export function helloWorld() {\n          return "Hello World " + hello;\n      }\n  ',uri:"mock"};x=h.replace("mock:","");if(void 0!==a.mocks[x])return{url:"",scheme:"mock",
data:a.mocks[x],uri:h}}throw new m.ModuleError(m.ModuleErrorCodes.UnrecognisedUri,{uri:h});};a.prototype.fetchModule=function(h){return l(this,void 0,void 0,function(){var q,n,k,g;return d(this,function(b){switch(b.label){case 0:if(q=a.cachedModules.getFromCache(h.uri))return[2,q];n=this.fetchSource(h);a.cachedModules.addToCache(h.uri,n);k=null;b.label=1;case 1:return b.trys.push([1,3,,4]),[4,n];case 2:return k=b.sent(),[3,4];case 3:throw g=b.sent(),a.cachedModules.removeFromCache(h.uri),g;case 4:return[2,
k]}})})};a.prototype.fetchSource=function(h){var q;return l(this,void 0,void 0,function(){var n;return d(this,function(k){switch(k.label){case 0:return"portal"!==h.scheme?[3,2]:[4,t({url:h.url,handleAs:"text",content:{},callbackParamName:"callback"})];case 1:if(n=k.sent())return[2,e.parseScript(n,[])];k.label=2;case 2:if("mock"===h.scheme)return[2,e.parseScript(null!==(q=h.data)&&void 0!==q?q:"",[])];throw new m.ModuleError(m.ModuleErrorCodes.UnsupportedUriProtocol);}})})};a.create=function(h){return new a(h)};
a.getDefault=function(){var h;return null!==(h=this._default)&&void 0!==h?h:a._default=a._moduleResolverFactory()};Object.defineProperty(a,"moduleResolverClass",{set:function(h){this._moduleResolverFactory=h;this._default=null},enumerable:!1,configurable:!0});a.mocks={};a.cachedModules=new r(30);a._default=null;a._moduleResolverFactory=function(){return new a("https://www.arcgis.com")};return a}();B.ArcadeModuleResolver=f})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis",
"./lib/arcade-parser","./lib/arcade-parser"],function(f,B,l,d,c){Object.defineProperty(B,"__esModule",{value:!0});B.parseScript=void 0;B.parseScript=function(u,t){void 0===t&&(t=[]);u=d.parse(u);if(null===u.body||void 0===u.body)throw new c.ParsingError({index:0,line:0,column:0,data:null,description:"",code:c.ParsingErrorCodes.InvalidExpression});if(0===u.body.length)throw new c.ParsingError({index:0,line:0,column:0,data:null,description:"",code:c.ParsingErrorCodes.InvalidExpression});if(0===u.body.length)throw new c.ParsingError({index:0,
line:0,column:0,data:null,description:"",code:c.ParsingErrorCodes.InvalidExpression});u.loadedModules={};l.findScriptDependencies(u,t);return u}})},"esri/arcade/lib/arcade-parser":function(){define("require exports ../polyfill/tsSupport/exportstar ./parser ./tokenizer ./types".split(" "),function(f,B,l,d,c,u){Object.defineProperty(B,"__esModule",{value:!0});B.tokenize=B.parse=void 0;l(u,B);B.parse=function(t,e,r){return(new d.Parser(t,e,r)).parseScript()};B.tokenize=function(t,e,r){t=new c.Tokenizer(t,
e);e=[];var m=void 0;try{for(var a=void 0;a=t.getNextToken();)r&&(a=r(a)),e.push(a)}catch(h){t.errorHandler.tolerate(h)}t.errorHandler.tolerant&&(m=t.errors());return{tokens:e,errors:m}}})},"esri/arcade/polyfill/tsSupport/exportstar":function(){define([],function(){return function(){var f=this&&this.__createBinding||(Object.create?function(B,l,d,c){void 0===c&&(c=d);Object.defineProperty(B,c,{enumerable:!0,get:function(){return l[d]}})}:function(B,l,d,c){void 0===c&&(c=d);B[c]=l[d]});return function(B,
l){for(var d in B)"default"===d||Object.prototype.hasOwnProperty.call(l,d)||f(l,B,d)}}()})},"esri/arcade/lib/parser":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../polyfill/tsSupport/extends ./comment-handler ./error-handler ./scanner ./types".split(" "),function(f,B,l,d,c,u,t,e,r){function m(k,g){void 0===g&&(g=0);var b=k.start-k.lineStart,x=k.lineNumber;0>b&&(b+=g,x--);return{index:k.start,line:x,column:b}}function a(k){return[l({index:k.range[0]},
k.loc.start),l({index:k.range[1]},k.loc.end)]}function h(k){var g;return null!==(g=r.OperatorPrecedence[k])&&void 0!==g?g:0}Object.defineProperty(B,"__esModule",{value:!0});B.Parser=B.binaryOperatorPrecedence=void 0;var q;(function(k){k[k.None=0]="None";k[k.Function=1]="Function";k[k.IfClause=2]="IfClause";k[k.ForLoop=4]="ForLoop";k[k.WhileLoop=8]="WhileLoop"})(q||(q={}));var n;(function(k){k[k.AsObject=0]="AsObject";k[k.Automatic=1]="Automatic"})(n||(n={}));B.binaryOperatorPrecedence=h;f=function(){function k(g,
b,x){void 0===b&&(b={});this.delegate=x;this.hasLineTerminator=!1;this.options={tokens:"boolean"===typeof b.tokens&&b.tokens,comments:"boolean"===typeof b.comments&&b.comments,tolerant:"boolean"===typeof b.tolerant&&b.tolerant};this.options.comments&&(this.commentHandler=new u.CommentHandler);this.errorHandler=new t.ErrorHandler(this.options.tolerant);this.scanner=new e.Scanner(g,this.errorHandler);this.context={isAssignmentTarget:!1,blockContext:q.None,curlyParsingType:n.AsObject};this.rawToken=
{type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.tokens=[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};this.endMarker={index:0,line:this.scanner.lineNumber,column:0};this.readNextRawToken();this.endMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}k.prototype.throwIfInvalidType=function(g,b,x){var v=x.validTypes;x=x.invalidTypes;(null===v||void 0===v?0:v.some(function(y){return g.type===
y}))||null!==x&&void 0!==x&&x.some(function(y){return g.type===y})&&this.throwError(r.ParsingErrorCodes.InvalidExpression,b)};k.prototype.throwError=function(g,b,x){void 0===x&&(x=this.endMarker);var v=b.index;this.errorHandler.throwError({code:g,index:v,line:b.line,column:b.column+1,len:x.index-v-1})};k.prototype.tolerateError=function(g,b){throw Error("######################################### !!!");};k.prototype.unexpectedTokenError=function(g){void 0===g&&(g={});var b=g.rawToken,x=g.code;g=g.data;
if(b){if(!x)switch(b.type){case 2:x=r.ParsingErrorCodes.UnexpectedEndOfScript;break;case 3:x=r.ParsingErrorCodes.UnexpectedIdentifier;break;case 6:x=r.ParsingErrorCodes.UnexpectedNumber;break;case 8:x=r.ParsingErrorCodes.UnexpectedString;break;case 10:x=r.ParsingErrorCodes.UnexpectedTemplate}var v=b.value.toString()}else v="ILLEGAL";x=null!==x&&void 0!==x?x:r.ParsingErrorCodes.UnexpectedToken;g||(g={value:v});v=t.formatErrorDescription(x,g);if(b)return new r.ParsingError({code:x,index:b.start,line:b.lineNumber,
column:b.start-b.lineStart+1,len:b.end-b.start-1,data:g,description:v});b=this.endMarker;return new r.ParsingError({code:x,index:b.index,line:b.line,column:this.endMarker.column+1,data:g,description:v})};k.prototype.throwUnexpectedToken=function(g){var b;void 0===g&&(g={});g.rawToken=null!==(b=g.rawToken)&&void 0!==b?b:this.rawToken;throw this.unexpectedTokenError(g);};k.prototype.collectComments=function(g){var b=this,x=this.commentHandler;x&&g.length&&g.forEach(function(v){v={type:v.multiLine?"BlockComment":
"LineComment",value:b.getSourceValue(v),range:v.range,loc:v.loc};x.collectComment(v)})};k.prototype.peekAhead=function(g){var b=this,x=this.scanner.saveState();g=g.call(this,function(){b.scanner.scanComments();return b.scanner.lex()});this.scanner.restoreState(x);return g};k.prototype.getSourceValue=function(g){return this.scanner.source.slice(g.start,g.end)};k.prototype.convertToToken=function(g){return{type:r.TokenNames[g.type],value:this.getSourceValue(g),range:[g.start,g.end],loc:{start:{line:this.startMarker.line,
column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}}};k.prototype.readNextRawToken=function(){this.endMarker.index=this.scanner.index;this.endMarker.line=this.scanner.lineNumber;this.endMarker.column=this.scanner.index-this.scanner.lineStart;var g=this.rawToken;this.collectComments(this.scanner.scanComments());this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,
this.startMarker.column=this.scanner.index-this.scanner.lineStart);this.rawToken=this.scanner.lex();this.hasLineTerminator=g.lineNumber!==this.rawToken.lineNumber;this.options.tokens&&2!==this.rawToken.type&&this.tokens.push(this.convertToToken(this.rawToken))};k.prototype.captureStartMarker=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}};k.prototype.getItemLocation=function(g){return{range:[g.index,this.endMarker.index],loc:{start:{line:g.line,
column:g.column},end:{line:this.endMarker.line,column:this.endMarker.column}}}};k.prototype.finalize=function(g){var b,x;if(this.delegate||this.commentHandler)null===(b=this.commentHandler)||void 0===b?void 0:b.attachComments(g),null===(x=this.delegate)||void 0===x?void 0:x.call(this,g);return g};k.prototype.expectPunctuator=function(g){var b=this.rawToken;this.matchPunctuator(g)?this.readNextRawToken():this.throwUnexpectedToken({rawToken:b,code:r.ParsingErrorCodes.PunctuatorExpected,data:{value:g}})};
k.prototype.expectKeyword=function(g){4===this.rawToken.type&&this.rawToken.value.toLowerCase()===g?this.readNextRawToken():this.throwUnexpectedToken({rawToken:this.rawToken})};k.prototype.expectContextualKeyword=function(g){3===this.rawToken.type&&this.rawToken.value.toLowerCase()===g?this.readNextRawToken():this.throwUnexpectedToken({rawToken:this.rawToken})};k.prototype.matchKeyword=function(g){return 4===this.rawToken.type&&this.rawToken.value.toLowerCase()===g};k.prototype.matchContextualKeyword=
function(g){return 3===this.rawToken.type&&this.rawToken.value===g};k.prototype.matchPunctuator=function(g){return 7===this.rawToken.type&&this.rawToken.value===g};k.prototype.getMatchingPunctuator=function(g){"string"===typeof g&&(g=g.split(""));if(7===this.rawToken.type&&null!==g&&void 0!==g&&g.length)return g.find(this.matchPunctuator,this)};k.prototype.isolateCoverGrammar=function(g){var b=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;g=g.call(this);this.context.isAssignmentTarget=
b;return g};k.prototype.inheritCoverGrammar=function(g){var b=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;g=g.call(this);this.context.isAssignmentTarget=this.context.isAssignmentTarget&&b;return g};k.prototype.withBlockContext=function(g,b){var x=this.context.blockContext;this.context.blockContext|=g;g=this.context.curlyParsingType;this.context.curlyParsingType=n.Automatic;b=b.call(this);this.context.blockContext=x;this.context.curlyParsingType=g;return b};k.prototype.consumeSemicolon=
function(){this.matchPunctuator(";")?this.readNextRawToken():this.hasLineTerminator||(2===this.rawToken.type||this.matchPunctuator("}")?(this.endMarker.index=this.startMarker.index,this.endMarker.line=this.startMarker.line,this.endMarker.column=this.startMarker.column):this.throwUnexpectedToken({rawToken:this.rawToken}))};k.prototype.parsePrimaryExpression=function(){var g=this.captureStartMarker(),b=this.rawToken;switch(b.type){case 3:return this.readNextRawToken(),this.finalize(l({type:"Identifier",
name:b.value},this.getItemLocation(g)));case 6:case 8:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize(l({type:"Literal",value:b.value,raw:this.getSourceValue(b),isString:"string"===typeof b.value},this.getItemLocation(g)));case 1:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize(l({type:"Literal",value:b.value.toLowerCase()===r.Keywords.True,raw:this.getSourceValue(b),isString:!1},this.getItemLocation(g)));case 5:return this.context.isAssignmentTarget=
!1,this.readNextRawToken(),this.finalize(l({type:"Literal",value:null,raw:this.getSourceValue(b),isString:!1},this.getItemLocation(g)));case 10:return this.parseTemplateLiteral();case 7:switch(b.value){case "(":return this.inheritCoverGrammar(this.parseGroupExpression);case "[":return this.inheritCoverGrammar(this.parseArrayInitializer);case "{":return this.inheritCoverGrammar(this.parseObjectExpression);default:return this.throwUnexpectedToken({rawToken:this.rawToken})}case 4:return this.context.isAssignmentTarget=
!1,this.throwUnexpectedToken({rawToken:this.rawToken});default:return this.throwUnexpectedToken({rawToken:this.rawToken})}};k.prototype.parseArrayInitializer=function(){var g=this.captureStartMarker();this.expectPunctuator("[");for(var b=[];!this.matchPunctuator("]");){var x=this.captureStartMarker();this.matchPunctuator(",")?(this.readNextRawToken(),this.throwError(r.ParsingErrorCodes.InvalidExpression,x)):(b.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.matchPunctuator("]")||
this.expectPunctuator(","))}this.expectPunctuator("]");return this.finalize(l({type:"ArrayExpression",elements:b},this.getItemLocation(g)))};k.prototype.parseObjectPropertyKey=function(){var g=this.captureStartMarker(),b=this.rawToken;switch(b.type){case 8:return this.readNextRawToken(),this.finalize(l({type:"Literal",value:b.value,raw:this.getSourceValue(b),isString:!0},this.getItemLocation(g)));case 3:case 1:case 5:case 4:return this.readNextRawToken(),this.finalize(l({type:"Identifier",name:b.value},
this.getItemLocation(g)));default:this.throwError(r.ParsingErrorCodes.KeyMustBeString,g)}};k.prototype.parseObjectProperty=function(){var g=this.rawToken,b=this.captureStartMarker(),x=this.parseObjectPropertyKey(),v=!1,y=null;this.matchPunctuator(":")?(this.readNextRawToken(),y=this.inheritCoverGrammar(this.parseAssignmentExpression)):3===g.type?(v=!0,y=this.finalize(l({type:"Identifier",name:g.value},this.getItemLocation(b)))):this.throwUnexpectedToken({rawToken:this.rawToken});return this.finalize(l({type:"Property",
kind:"init",key:x,value:y,shorthand:v},this.getItemLocation(b)))};k.prototype.parseObjectExpression=function(){var g=this.captureStartMarker();this.expectPunctuator("{");for(var b=[];!this.matchPunctuator("}");)b.push(this.parseObjectProperty()),this.matchPunctuator("}")||this.expectPunctuator(",");this.expectPunctuator("}");return this.finalize(l({type:"ObjectExpression",properties:b},this.getItemLocation(g)))};k.prototype.parseTemplateElement=function(g){void 0===g&&(g=!1);var b=this.rawToken;10!==
b.type&&this.throwUnexpectedToken({rawToken:b});g&&!b.head&&this.throwUnexpectedToken({code:r.ParsingErrorCodes.InvalidTemplateHead,rawToken:b});var x=this.captureStartMarker();this.readNextRawToken();g=b.tail;b=this.finalize(l({type:"TemplateElement",value:{raw:b.value,cooked:b.cooked},tail:g},this.getItemLocation(x)));b.loc.start.column++;b.loc.end.column-=g?1:2;return b};k.prototype.parseTemplateLiteral=function(){var g=this.captureStartMarker(),b=[],x=[],v=this.parseTemplateElement(!0);for(x.push(v);!v.tail;)b.push(this.parseExpression()),
v=this.parseTemplateElement(),x.push(v);return this.finalize(l({type:"TemplateLiteral",quasis:x,expressions:b},this.getItemLocation(g)))};k.prototype.parseGroupExpression=function(){this.expectPunctuator("(");var g=this.inheritCoverGrammar(this.parseAssignmentExpression);this.expectPunctuator(")");return g};k.prototype.parseArguments=function(){this.expectPunctuator("(");var g=[];if(!this.matchPunctuator(")"))for(;;){var b=this.isolateCoverGrammar(this.parseAssignmentExpression);g.push(b);if(this.matchPunctuator(")"))break;
this.expectPunctuator(",");if(this.matchPunctuator(")"))break}this.expectPunctuator(")");return g};k.prototype.parseMemberName=function(){var g=this.rawToken,b=this.captureStartMarker();this.readNextRawToken();5!==g.type&&3!==g.type&&4!==g.type&&1!==g.type&&this.throwUnexpectedToken({rawToken:g});return this.finalize(l({type:"Identifier",name:g.value},this.getItemLocation(b)))};k.prototype.parseLeftHandSideExpression=function(){for(var g=this.captureStartMarker(),b=this.inheritCoverGrammar(this.parsePrimaryExpression),
x=this.captureStartMarker(),v;v=this.getMatchingPunctuator("([.");)switch(v){case "(":this.context.isAssignmentTarget=!1;"Identifier"!==b.type&&"MemberExpression"!==b.type&&this.throwError(r.ParsingErrorCodes.IdentiferExpected,g,x);v=this.parseArguments();b=this.finalize(l({type:"CallExpression",callee:b,arguments:v},this.getItemLocation(g)));continue;case "[":this.context.isAssignmentTarget=!0;this.expectPunctuator("[");v=this.isolateCoverGrammar(this.parseExpression);this.expectPunctuator("]");
b=this.finalize(l({type:"MemberExpression",computed:!0,object:b,property:v},this.getItemLocation(g)));continue;case ".":this.context.isAssignmentTarget=!0,this.expectPunctuator("."),v=this.parseMemberName(),b=this.finalize(l({type:"MemberExpression",computed:!1,object:b,property:v},this.getItemLocation(g)))}return b};k.prototype.parseUpdateExpression=function(){var g=this.captureStartMarker(),b=this.getMatchingPunctuator(r.UpdateOperators);if(b){this.readNextRawToken();var x=this.captureStartMarker(),
v=this.inheritCoverGrammar(this.parseUnaryExpression);"Identifier"!==v.type&&"MemberExpression"!==v.type&&"CallExpression"!==v.type&&this.throwError(r.ParsingErrorCodes.InvalidExpression,x);this.context.isAssignmentTarget||this.tolerateError(r.ParsingErrorCodes.InvalidLeftHandSideInAssignment,g);this.context.isAssignmentTarget=!1;return this.finalize(l({type:"UpdateExpression",operator:b,argument:v,prefix:!0},this.getItemLocation(g)))}x=this.captureStartMarker();v=this.inheritCoverGrammar(this.parseLeftHandSideExpression);
var y=this.captureStartMarker();if(this.hasLineTerminator)return v;b=this.getMatchingPunctuator(r.UpdateOperators);if(!b)return v;"Identifier"!==v.type&&"MemberExpression"!==v.type&&this.throwError(r.ParsingErrorCodes.InvalidExpression,x,y);this.context.isAssignmentTarget||this.tolerateError(r.ParsingErrorCodes.InvalidLeftHandSideInAssignment,g);this.readNextRawToken();this.context.isAssignmentTarget=!1;return this.finalize(l({type:"UpdateExpression",operator:b,argument:v,prefix:!1},this.getItemLocation(g)))};
k.prototype.parseUnaryExpression=function(){var g=this.getMatchingPunctuator(r.UnaryOperators);if(g){var b=this.captureStartMarker();this.readNextRawToken();var x=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.isAssignmentTarget=!1;return this.finalize(l({type:"UnaryExpression",operator:g,argument:x,prefix:!0},this.getItemLocation(b)))}return this.parseUpdateExpression()};k.prototype.parseBinaryExpression=function(){var g=this.rawToken,b=this.inheritCoverGrammar(this.parseUnaryExpression);
if(7!==this.rawToken.type)return b;var x=this.rawToken.value,v=h(x);if(0===v)return b;this.readNextRawToken();this.context.isAssignmentTarget=!1;g=[g,this.rawToken];var y=this.inheritCoverGrammar(this.parseUnaryExpression);x=[b,x,y];for(var D=[v];7===this.rawToken.type&&0<(v=h(this.rawToken.value));){for(;2<x.length&&v<=D[D.length-1];){y=x.pop();var E=x.pop();D.pop();b=x.pop();g.pop();var C=g[g.length-1];C=m(C,C.lineStart);x.push(this.finalize(this.createBinaryOrLogicalExpression(C,E,b,y)))}x.push(this.rawToken.value);
D.push(v);g.push(this.rawToken);this.readNextRawToken();x.push(this.inheritCoverGrammar(this.parseUnaryExpression))}v=x.length-1;b=x[v];for(C=g.pop();1<v;){y=g.pop();if(!y)break;C=m(y,null===C||void 0===C?void 0:C.lineStart);b=this.finalize(this.createBinaryOrLogicalExpression(C,x[v-1],x[v-2],b));v-=2;C=y}return b};k.prototype.createBinaryOrLogicalExpression=function(g,b,x,v){var y=r.LogicalOperators.includes(b)?"LogicalExpression":"BinaryExpression";if("BinaryExpression"===y)return l({type:y,operator:b,
left:x,right:v},this.getItemLocation(g));"AssignmentExpression"!==x.type&&"UpdateExpression"!==x.type||this.throwError.apply(this,d([r.ParsingErrorCodes.InvalidExpression],a(x)));"AssignmentExpression"!==v.type&&"UpdateExpression"!==v.type||this.throwError.apply(this,d([r.ParsingErrorCodes.InvalidExpression],a(x)));return l({type:y,operator:b,left:x,right:v},this.getItemLocation(g))};k.prototype.parseAssignmentExpression=function(){var g=this.captureStartMarker(),b=this.inheritCoverGrammar(this.parseBinaryExpression),
x=this.captureStartMarker(),v=this.getMatchingPunctuator(r.AssignmentOperators);if(!v)return b;"Identifier"!==b.type&&"MemberExpression"!==b.type&&this.throwError(r.ParsingErrorCodes.InvalidExpression,g,x);this.context.isAssignmentTarget||this.tolerateError(r.ParsingErrorCodes.InvalidLeftHandSideInAssignment,g);this.matchPunctuator("\x3d")||(this.context.isAssignmentTarget=!1);this.readNextRawToken();x=this.isolateCoverGrammar(this.parseAssignmentExpression);return this.finalize(l({type:"AssignmentExpression",
left:b,operator:v,right:x},this.getItemLocation(g)))};k.prototype.parseExpression=function(){return this.isolateCoverGrammar(this.parseAssignmentExpression)};k.prototype.parseStatements=function(g){for(var b=[];2!==this.rawToken.type&&!this.matchPunctuator(g);){var x=this.parseStatementListItem();r.isEmptyStatement(x)||b.push(x)}return b};k.prototype.parseStatementListItem=function(){this.context.isAssignmentTarget=!0;return this.matchKeyword(r.Keywords.Function)?this.parseFunctionDeclaration():this.matchKeyword(r.Keywords.Export)?
this.parseExportDeclaration():this.matchKeyword(r.Keywords.Import)?this.parseImportDeclaration():this.parseStatement()};k.prototype.parseBlock=function(){var g=this.captureStartMarker();this.expectPunctuator("{");var b=this.parseStatements("}");this.expectPunctuator("}");return this.finalize(l({type:"BlockStatement",body:b},this.getItemLocation(g)))};k.prototype.parseObjectStatement=function(){var g=this.captureStartMarker(),b=this.parseObjectExpression();return this.finalize(l({type:"ExpressionStatement",
expression:b},this.getItemLocation(g)))};k.prototype.parseBlockOrObjectStatement=function(){return this.context.curlyParsingType===n.AsObject||this.peekAhead(function(g){var b=g();if(3!==b.type&&8!==b.type)return!1;b=g();return 7!==b.type||":"!==b.value?!1:!0})?this.parseObjectStatement():this.parseBlock()};k.prototype.parseIdentifier=function(){var g=this.rawToken;if(3!==g.type)return null;var b=this.captureStartMarker();this.readNextRawToken();return this.finalize(l({type:"Identifier",name:g.value},
this.getItemLocation(b)))};k.prototype.parseVariableDeclarator=function(){var g=this.captureStartMarker(),b=this.parseIdentifier();b||this.throwUnexpectedToken({code:r.ParsingErrorCodes.IdentiferExpected});var x=null;if(this.matchPunctuator("\x3d")){this.readNextRawToken();var v=this.rawToken;try{x=this.isolateCoverGrammar(this.parseAssignmentExpression)}catch(y){this.throwUnexpectedToken({rawToken:v,code:r.ParsingErrorCodes.InvalidVariableAssignment})}}return this.finalize(l({type:"VariableDeclarator",
id:b,init:x},this.getItemLocation(g)))};k.prototype.parseVariableDeclarationList=function(){for(var g=[this.parseVariableDeclarator()];this.matchPunctuator(",");)this.readNextRawToken(),g.push(this.parseVariableDeclarator());return g};k.prototype.parseVariableDeclaration=function(){var g=this.captureStartMarker();this.expectKeyword(r.Keywords.Var);var b=this.parseVariableDeclarationList();this.consumeSemicolon();return this.finalize(l({type:"VariableDeclaration",declarations:b,kind:"var"},this.getItemLocation(g)))};
k.prototype.parseEmptyStatement=function(){var g=this.captureStartMarker();this.expectPunctuator(";");return this.finalize(l({type:"EmptyStatement"},this.getItemLocation(g)))};k.prototype.parseExpressionStatement=function(){var g=this.captureStartMarker(),b=this.parseExpression();this.consumeSemicolon();return this.finalize(l({type:"ExpressionStatement",expression:b},this.getItemLocation(g)))};k.prototype.parseIfClause=function(){return this.withBlockContext(q.IfClause,this.parseStatement)};k.prototype.parseIfStatement=
function(){var g=this.captureStartMarker();this.expectKeyword(r.Keywords.If);this.expectPunctuator("(");var b=this.captureStartMarker(),x=this.parseExpression(),v=this.captureStartMarker();this.expectPunctuator(")");"AssignmentExpression"!==x.type&&"UpdateExpression"!==x.type||this.throwError(r.ParsingErrorCodes.InvalidExpression,b,v);b=this.parseIfClause();v=null;this.matchKeyword(r.Keywords.Else)&&(this.readNextRawToken(),v=this.parseIfClause());return this.finalize(l({type:"IfStatement",test:x,
consequent:b,alternate:v},this.getItemLocation(g)))};k.prototype.parseWhileStatement=function(){var g=this.captureStartMarker();this.expectKeyword(r.Keywords.While);this.expectPunctuator("(");var b=this.captureStartMarker(),x=this.parseExpression(),v=this.captureStartMarker();this.expectPunctuator(")");"AssignmentExpression"!==x.type&&"UpdateExpression"!==x.type||this.throwError(r.ParsingErrorCodes.InvalidExpression,b,v);b=this.withBlockContext(q.WhileLoop,this.parseStatement);return this.finalize(l({type:"WhileStatement",
test:x,body:b},this.getItemLocation(g)))};k.prototype.parseForStatement=function(){var g=this,b=null,x=null,v=null,y=null,D=null,E=this.captureStartMarker();this.expectKeyword(r.Keywords.For);this.expectPunctuator("(");if(this.matchPunctuator(";"))this.readNextRawToken();else if(this.matchKeyword(r.Keywords.Var)){var C=this.captureStartMarker();this.readNextRawToken();var z=this.parseVariableDeclarationList();1===z.length&&this.matchKeyword(r.Keywords.In)?(z[0].init&&this.throwError(r.ParsingErrorCodes.ForInOfLoopInitializer,
C),y=this.finalize(l({type:"VariableDeclaration",declarations:z,kind:"var"},this.getItemLocation(C))),this.readNextRawToken(),D=this.parseExpression()):(this.matchKeyword(r.Keywords.In)&&this.throwError(r.ParsingErrorCodes.InvalidLeftHandSideInForIn,C),b=this.finalize(l({type:"VariableDeclaration",declarations:z,kind:"var"},this.getItemLocation(C))),this.expectPunctuator(";"))}else z=this.context.isAssignmentTarget,C=this.captureStartMarker(),b=this.inheritCoverGrammar(this.parseAssignmentExpression),
this.matchKeyword(r.Keywords.In)?(this.context.isAssignmentTarget||this.tolerateError(r.ParsingErrorCodes.InvalidLeftHandSideInForIn,C),"Identifier"!==b.type&&this.throwError(r.ParsingErrorCodes.InvalidLeftHandSideInForIn,C),this.readNextRawToken(),y=b,D=this.parseExpression(),b=null):(this.context.isAssignmentTarget=z,this.expectPunctuator(";"));y||(this.matchPunctuator(";")||(x=this.isolateCoverGrammar(this.parseExpression)),this.expectPunctuator(";"),this.matchPunctuator(")")||(v=this.isolateCoverGrammar(this.parseExpression)));
this.expectPunctuator(")");C=this.withBlockContext(q.ForLoop,function(){return g.isolateCoverGrammar(g.parseStatement)});return y&&D?this.finalize(l({type:"ForInStatement",left:y,right:D,body:C},this.getItemLocation(E))):this.finalize(l({type:"ForStatement",init:b,test:x,update:v,body:C},this.getItemLocation(E)))};k.prototype.parseContinueStatement=function(){var g=this.captureStartMarker();this.expectKeyword(r.Keywords.Continue);this.consumeSemicolon();return this.finalize(l({type:"ContinueStatement"},
this.getItemLocation(g)))};k.prototype.parseBreakStatement=function(){var g=this.captureStartMarker();this.expectKeyword(r.Keywords.Break);this.consumeSemicolon();return this.finalize(l({type:"BreakStatement"},this.getItemLocation(g)))};k.prototype.parseReturnStatement=function(){var g=this.captureStartMarker();this.expectKeyword(r.Keywords.Return);var b=(this.matchPunctuator(";")||this.matchPunctuator("}")||this.hasLineTerminator||2===this.rawToken.type)&&8!==this.rawToken.type&&10!==this.rawToken.type?
null:this.parseExpression();this.consumeSemicolon();return this.finalize(l({type:"ReturnStatement",argument:b},this.getItemLocation(g)))};k.prototype.parseStatement=function(){switch(this.rawToken.type){case 1:case 5:case 6:case 8:case 10:case 3:return this.parseExpressionStatement();case 7:return"{"===this.rawToken.value?this.parseBlockOrObjectStatement():"("===this.rawToken.value?this.parseExpressionStatement():";"===this.rawToken.value?this.parseEmptyStatement():this.parseExpressionStatement();
case 4:switch(this.rawToken.value.toLowerCase()){case r.Keywords.Break:return this.parseBreakStatement();case r.Keywords.Continue:return this.parseContinueStatement();case r.Keywords.For:return this.parseForStatement();case r.Keywords.Function:return this.parseFunctionDeclaration();case r.Keywords.If:return this.parseIfStatement();case r.Keywords.Return:return this.parseReturnStatement();case r.Keywords.Var:return this.parseVariableDeclaration();case r.Keywords.While:return this.parseWhileStatement();
default:return this.parseExpressionStatement()}default:return this.throwUnexpectedToken({rawToken:this.rawToken})}};k.prototype.parseFormalParameters=function(){var g=[];this.expectPunctuator("(");if(!this.matchPunctuator(")"))for(;2!==this.rawToken.type;){var b=this.parseIdentifier();b||this.throwUnexpectedToken({rawToken:this.rawToken,code:r.ParsingErrorCodes.IdentiferExpected});g.push(b);if(this.matchPunctuator(")"))break;this.expectPunctuator(",");if(this.matchPunctuator(")"))break}this.expectPunctuator(")");
return g};k.prototype.parseFunctionDeclaration=function(){(this.context.blockContext&q.Function)===q.Function&&this.throwUnexpectedToken({code:r.ParsingErrorCodes.NoFunctionInsideFunction});(this.context.blockContext&q.WhileLoop)!==q.WhileLoop&&(this.context.blockContext&q.IfClause)!==q.IfClause||this.throwUnexpectedToken({code:r.ParsingErrorCodes.NoFunctionInsideBlock});var g=this.captureStartMarker();this.expectKeyword(r.Keywords.Function);var b=this.parseIdentifier();b||this.throwUnexpectedToken({code:r.ParsingErrorCodes.InvalidFunctionIdentifier});
var x=this.parseFormalParameters(),v=this.context.blockContext;this.context.blockContext|=q.Function;var y=this.parseBlock();this.context.blockContext=v;return this.finalize(l({type:"FunctionDeclaration",id:b,params:x,body:y},this.getItemLocation(g)))};k.prototype.parseScript=function(){var g=this.captureStartMarker(),b=this.parseStatements();g=this.finalize(l({type:"Program",body:b},this.getItemLocation(g)));this.options.tokens&&(g.tokens=this.tokens);this.options.tolerant&&(g.errors=this.errorHandler.errors);
return g};k.prototype.parseExportDeclaration=function(){this.context.blockContext!==q.None&&this.throwUnexpectedToken({code:r.ParsingErrorCodes.ModuleExportRootOnly});var g=null,b=this.captureStartMarker();this.expectKeyword(r.Keywords.Export);this.matchKeyword(r.Keywords.Var)?g=this.parseVariableDeclaration():this.matchKeyword("function")?g=this.parseFunctionDeclaration():this.throwUnexpectedToken({code:r.ParsingErrorCodes.InvalidExpression});return this.finalize(l({type:"ExportNamedDeclaration",
declaration:g,specifiers:[],source:null},this.getItemLocation(b)))};k.prototype.parseModuleSpecifier=function(){var g=this.captureStartMarker(),b=this.rawToken;if(8===b.type)return this.readNextRawToken(),this.finalize(l({type:"Literal",value:b.value,raw:this.getSourceValue(b),isString:!0},this.getItemLocation(g)));this.throwError(r.ParsingErrorCodes.InvalidModuleUri,g)};k.prototype.parseDefaultSpecifier=function(){var g=this.captureStartMarker(),b=this.parseIdentifier();b||this.throwUnexpectedToken({code:r.ParsingErrorCodes.IdentiferExpected});
return this.finalize(l({type:"ImportDefaultSpecifier",local:b},this.getItemLocation(g)))};k.prototype.parseImportDeclaration=function(){this.context.blockContext!==q.None&&this.throwUnexpectedToken({code:r.ParsingErrorCodes.ModuleImportRootOnly});var g=this.captureStartMarker();this.expectKeyword(r.Keywords.Import);var b=this.parseDefaultSpecifier();this.expectContextualKeyword(r.Keywords.From);var x=this.parseModuleSpecifier();return this.finalize(l({type:"ImportDeclaration",specifiers:[b],source:x},
this.getItemLocation(g)))};return k}();B.Parser=f})},"esri/arcade/lib/comment-handler":function(){define(["require","exports","../polyfill/tsSupport/assign","../polyfill/tsSupport/spreadarray","./types"],function(f,B,l,d,c){function u(t,e){return e?e.loc.end.line===t.loc.start.line&&e.loc.end.column<=t.loc.start.column:!1}Object.defineProperty(B,"__esModule",{value:!0});B.CommentHandler=void 0;f=function(){function t(){this.comments=[];this._nodeStack=[];this._newComments=[]}t.prototype.insertInnerComments=
function(e){if(c.isBlockStatement(e)&&0===e.body.length){for(var r=[],m=this._newComments.length-1;0<=m;--m){var a=this._newComments[m];e.range[1]>=a.range[0]&&(r.unshift(a),this._newComments.splice(m,1))}r.length&&(e.innerComments=r)}};t.prototype.attachTrailingComments=function(e){var r,m;if(e){var a=this._nodeStack[this._nodeStack.length-1];if(c.isBlockStatement(e)&&a.range[0]>=e.range[0]&&a.range[1]<=e.range[1])for(var h=this._newComments.length-1;0<=h;--h){var q=this._newComments[h];q.range[0]>=
e.range[0]&&q.range[1]<=e.range[1]&&(a.trailingComments=d(d([],null!==(r=a.trailingComments)&&void 0!==r?r:[]),[q]),this._newComments.splice(h,1))}r=[];if(0<this._newComments.length)for(h=this._newComments.length-1;0<=h;--h)q=this._newComments[h],u(q,a)?(a.trailingComments=d(d([],null!==(m=a.trailingComments)&&void 0!==m?m:[]),[q]),this._newComments.splice(h,1)):u(q,e)&&(r.unshift(q),this._newComments.splice(h,1));(null===a||void 0===a?0:a.trailingComments)&&u(a.trailingComments[0],e)&&(r=d(d([],
r),a.trailingComments),delete a.trailingComments);0<r.length&&(e.trailingComments=r)}};t.prototype.attachLeadingComments=function(e){var r,m,a,h;if(e){for(var q;0<this._nodeStack.length;){var n=this._nodeStack[this._nodeStack.length-1];if(e.range[0]<=n.range[0])q=n,this._nodeStack.pop();else break}n=[];var k=[];if(q){for(var g=(null!==(m=null===(r=q.leadingComments)||void 0===r?void 0:r.length)&&void 0!==m?m:0)-1;0<=g;--g)r=q.leadingComments[g],e.range[0]>=r.range[1]?(n.unshift(r),q.leadingComments.splice(g,
1)):c.isVariableDeclarator(e)&&!c.isBlockComment(r)&&(k.unshift(r),q.leadingComments.splice(g,1));0===(null===(a=q.leadingComments)||void 0===a?void 0:a.length)&&delete q.leadingComments;n.length&&(e.leadingComments=n);k.length&&(e.trailingComments=d(d([],k),null!==(h=e.trailingComments)&&void 0!==h?h:[]))}else{for(g=this._newComments.length-1;0<=g;--g)r=this._newComments[g],e.range[0]>=r.range[0]&&(n.unshift(r),this._newComments.splice(g,1));n.length&&(e.leadingComments=n)}}};t.prototype.attachComments=
function(e){var r;if(c.isProgram(e)&&0<e.body.length){var m=this._nodeStack[this._nodeStack.length-1];m?(m.trailingComments=d(d([],null!==(r=m.trailingComments)&&void 0!==r?r:[]),this._newComments),this._newComments.length=0,this._nodeStack.pop()):(e.trailingComments=d([],this._newComments),this._newComments.length=0)}else this.attachTrailingComments(e),this.attachLeadingComments(e),this.insertInnerComments(e),this._nodeStack.push(e)};t.prototype.collectComment=function(e){this.comments.push(e);this._newComments.push(e)};
return t}();B.CommentHandler=f})},"esri/arcade/lib/types":function(){define(["require","exports","../polyfill/tsSupport/extends"],function(f,B,l){var d;Object.defineProperty(B,"__esModule",{value:!0});B.isTemplateElement=B.isProperty=B.isVariableDeclarator=B.isUpdateExpression=B.isUnaryExpression=B.isMemberExpression=B.isTemplateLiteral=B.isObjectExpression=B.isLogicalExpression=B.isLiteral=B.isIdentifier=B.isCallExpression=B.isBinaryExpression=B.isAssignmentExpression=B.isArrayExpression=B.isExpression=
B.isVariableDeclaration=B.isReturnStatement=B.isIfStatement=B.isFunctionDeclaration=B.isForStatement=B.isForInStatement=B.isExpressionStatement=B.isEmptyStatement=B.isContinueStatement=B.isBreakStatement=B.isBlockComment=B.isBlockStatement=B.isStatement=B.isProgram=B.ParsingError=B.ParsingErrorMessages=B.ParsingErrorCodes=B.TokenNames=B.TokenType=B.OperatorPrecedence=B.BinaryOperators=B.LogicalOperators=B.AssignmentOperators=B.UnaryOperators=B.UpdateOperators=B.Syntax=B.Keywords=void 0;(function(c){c.Break=
"break";c.Continue="continue";c.Else="else";c.False="false";c.For="for";c.From="from";c.Function="function";c.If="if";c.Import="import";c.Export="export";c.In="in";c.Null="null";c.Return="return";c.True="true";c.Var="var";c.While="while"})(B.Keywords||(B.Keywords={}));(function(c){c.AssignmentExpression="AssignmentExpression";c.ArrayExpression="ArrayExpression";c.BlockComment="BlockComment";c.BlockStatement="BlockStatement";c.BinaryExpression="BinaryExpression";c.BreakStatement="BreakStatement";c.CallExpression=
"CallExpression";c.ContinueStatement="ContinueStatement";c.EmptyStatement="EmptyStatement";c.ExpressionStatement="ExpressionStatement";c.ExportNamedDeclaration="ExportNamedDeclaration";c.ExportSpecifier="ExportSpecifier";c.ForStatement="ForStatement";c.ForInStatement="ForInStatement";c.FunctionDeclaration="FunctionDeclaration";c.Identifier="Identifier";c.IfStatement="IfStatement";c.ImportDeclaration="ImportDeclaration";c.ImportDefaultSpecifier="ImportDefaultSpecifier";c.LineComment="LineComment";
c.Literal="Literal";c.LogicalExpression="LogicalExpression";c.MemberExpression="MemberExpression";c.ObjectExpression="ObjectExpression";c.Program="Program";c.Property="Property";c.ReturnStatement="ReturnStatement";c.TemplateElement="TemplateElement";c.TemplateLiteral="TemplateLiteral";c.UnaryExpression="UnaryExpression";c.UpdateExpression="UpdateExpression";c.VariableDeclaration="VariableDeclaration";c.VariableDeclarator="VariableDeclarator";c.WhileStatement="WhileStatement"})(B.Syntax||(B.Syntax=
{}));B.UpdateOperators=["++","--"];B.UnaryOperators=["-","+","!","~"];B.AssignmentOperators="\x3d /\x3d *\x3d %\x3d +\x3d -\x3d".split(" ");B.LogicalOperators=["||","\x26\x26"];B.BinaryOperators="| \x26 \x3e\x3e \x3c\x3c \x3e\x3e\x3e ^ \x3d\x3d !\x3d \x3c \x3c\x3d \x3e \x3e\x3d + - * / %".split(" ");B.OperatorPrecedence={"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":10,"/":10,"%":10};
(function(c){c[c.Unknown=0]="Unknown";c[c.BooleanLiteral=1]="BooleanLiteral";c[c.EOF=2]="EOF";c[c.Identifier=3]="Identifier";c[c.Keyword=4]="Keyword";c[c.NullLiteral=5]="NullLiteral";c[c.NumericLiteral=6]="NumericLiteral";c[c.Punctuator=7]="Punctuator";c[c.StringLiteral=8]="StringLiteral";c[c.Template=10]="Template"})(B.TokenType||(B.TokenType={}));B.TokenNames="Unknown Boolean \x3cend\x3e Identifier Keyword Null Numeric Punctuator String RegularExpression Template".split(" ");(function(c){c.InvalidModuleUri=
"InvalidModuleUri";c.ForInOfLoopInitializer="ForInOfLoopInitializer";c.IdentiferExpected="IdentiferExpected";c.InvalidEscapedReservedWord="InvalidEscapedReservedWord";c.InvalidExpression="InvalidExpression";c.InvalidFunctionIdentifier="InvalidFunctionIdentifier";c.InvalidHexEscapeSequence="InvalidHexEscapeSequence";c.InvalidLeftHandSideInAssignment="InvalidLeftHandSideInAssignment";c.InvalidLeftHandSideInForIn="InvalidLeftHandSideInForIn";c.InvalidTemplateHead="InvalidTemplateHead";c.InvalidVariableAssignment=
"InvalidVariableAssignment";c.KeyMustBeString="KeyMustBeString";c.NoFunctionInsideBlock="NoFunctionInsideBlock";c.NoFunctionInsideFunction="NoFunctionInsideFunction";c.ModuleExportRootOnly="ModuleExportRootOnly";c.ModuleImportRootOnly="ModuleImportRootOnly";c.PunctuatorExpected="PunctuatorExpected";c.TemplateOctalLiteral="TemplateOctalLiteral";c.UnexpectedBoolean="UnexpectedBoolean";c.UnexpectedEndOfScript="UnexpectedEndOfScript";c.UnexpectedIdentifier="UnexpectedIdentifier";c.UnexpectedKeyword="UnexpectedKeyword";
c.UnexpectedNull="UnexpectedNull";c.UnexpectedNumber="UnexpectedNumber";c.UnexpectedPunctuator="UnexpectedPunctuator";c.UnexpectedString="UnexpectedString";c.UnexpectedTemplate="UnexpectedTemplate";c.UnexpectedToken="UnexpectedToken"})(f=B.ParsingErrorCodes||(B.ParsingErrorCodes={}));B.ParsingErrorMessages=(d={},d[f.InvalidModuleUri]="Module uri must be a text literal.",d[f.ForInOfLoopInitializer]="for-in loop variable declaration may not have an initializer.",d[f.IdentiferExpected]="'${value}' is an invalid identifier.",
d[f.InvalidEscapedReservedWord]="Keyword cannot contain escaped characters.",d[f.InvalidExpression]="Invalid expression.",d[f.InvalidFunctionIdentifier]="'${value}' is an invalid function identifier.",d[f.InvalidHexEscapeSequence]="Invalid hexadecimal escape sequence.",d[f.InvalidLeftHandSideInAssignment]="Invalid left-hand side in assignment.",d[f.InvalidLeftHandSideInForIn]="Invalid left-hand side in for-in.",d[f.InvalidTemplateHead]="Invalid template structure.",d[f.InvalidVariableAssignment]=
"Invalid variable assignment.",d[f.KeyMustBeString]="Object property keys must be a word starting with a letter.",d[f.NoFunctionInsideBlock]="Functions cannot be declared inside of code blocks.",d[f.NoFunctionInsideFunction]="Functions cannot be declared inside another function.",d[f.ModuleExportRootOnly]="Module exports cannot be declared inside of code blocks.",d[f.ModuleImportRootOnly]="Module import cannot be declared inside of code blocks.",d[f.PunctuatorExpected]="'${value}' expected.",d[f.TemplateOctalLiteral]=
"Octal literals are not allowed in template literals.",d[f.UnexpectedBoolean]="Unexpected boolean literal.",d[f.UnexpectedEndOfScript]="Unexpected end of Arcade expression.",d[f.UnexpectedIdentifier]="Unexpected identifier.",d[f.UnexpectedKeyword]="Unexpected keyword.",d[f.UnexpectedNull]="Unexpected null literal.",d[f.UnexpectedNumber]="Unexpected number.",d[f.UnexpectedPunctuator]="Unexpected ponctuator.",d[f.UnexpectedString]="Unexpected text literal.",d[f.UnexpectedTemplate]="Unexpected quasi '${value}'.",
d[f.UnexpectedToken]="Unexpected token '${value}'.",d);d=function(c){function u(t){var e=t.code,r=t.index,m=t.line,a=t.column,h=t.len;h=void 0===h?0:h;var q=t.description;t=t.data;var n,k,g=c.call(this,""+(null!==q&&void 0!==q?q:e))||this;g.declaredRootClass="esri.arcade.lib.parsingerror";g.name="ParsingError";g.code=e;g.index=r;g.line=m;g.column=a;g.len=h;g.data=t;g.description=q;g.range={start:{line:m,column:a-1},end:{line:m,column:a+h}};null===(k=(n=Error).captureStackTrace)||void 0===k?void 0:
k.call(n,g,u);return g}l(u,c);return u}(Error);B.ParsingError=d;B.isProgram=function(c){return"Program"===(null===c||void 0===c?void 0:c.type)};B.isStatement=function(c){switch(null===c||void 0===c?void 0:c.type){case "BlockStatement":case "BreakStatement":case "ContinueStatement":case "EmptyStatement":case "ExpressionStatement":case "ForInStatement":case "ForStatement":case "FunctionDeclaration":case "IfStatement":case "ReturnStatement":case "VariableDeclaration":return!0;default:return!1}};B.isBlockStatement=
function(c){return"BlockStatement"===(null===c||void 0===c?void 0:c.type)};B.isBlockComment=function(c){return"BlockComment"===(null===c||void 0===c?void 0:c.type)};B.isBreakStatement=function(c){return"BreakStatement"===(null===c||void 0===c?void 0:c.type)};B.isContinueStatement=function(c){return"ContinueStatement"===(null===c||void 0===c?void 0:c.type)};B.isEmptyStatement=function(c){return"EmptyStatement"===(null===c||void 0===c?void 0:c.type)};B.isExpressionStatement=function(c){return"ExpressionStatement"===
(null===c||void 0===c?void 0:c.type)};B.isForInStatement=function(c){return"ForInStatement"===(null===c||void 0===c?void 0:c.type)};B.isForStatement=function(c){return"ForStatement"===(null===c||void 0===c?void 0:c.type)};B.isFunctionDeclaration=function(c){return"FunctionDeclaration"===(null===c||void 0===c?void 0:c.type)};B.isIfStatement=function(c){return"IfStatement"===(null===c||void 0===c?void 0:c.type)};B.isReturnStatement=function(c){return"ReturnStatement"===(null===c||void 0===c?void 0:
c.type)};B.isVariableDeclaration=function(c){return"VariableDeclaration"===(null===c||void 0===c?void 0:c.type)};B.isExpression=function(c){switch(null===c||void 0===c?void 0:c.type){case "ArrayExpression":case "AssignmentExpression":case "BinaryExpression":case "CallExpression":case "Identifier":case "Literal":case "LogicalExpression":case "MemberExpression":case "ObjectExpression":case "TemplateLiteral":case "UpdateExpression":case "UnaryExpression":return!0;default:return!1}};B.isArrayExpression=
function(c){return"ArrayExpression"===(null===c||void 0===c?void 0:c.type)};B.isAssignmentExpression=function(c){return"AssignmentExpression"===(null===c||void 0===c?void 0:c.type)};B.isBinaryExpression=function(c){return"BinaryExpression"===(null===c||void 0===c?void 0:c.type)};B.isCallExpression=function(c){return"CallExpression"===(null===c||void 0===c?void 0:c.type)};B.isIdentifier=function(c){return"Identifier"===(null===c||void 0===c?void 0:c.type)};B.isLiteral=function(c){return"Literal"===
(null===c||void 0===c?void 0:c.type)};B.isLogicalExpression=function(c){return"LogicalExpression"===(null===c||void 0===c?void 0:c.type)};B.isObjectExpression=function(c){return"ObjectExpression"===(null===c||void 0===c?void 0:c.type)};B.isTemplateLiteral=function(c){return"TemplateLiteral"===(null===c||void 0===c?void 0:c.type)};B.isMemberExpression=function(c){return"MemberExpression"===(null===c||void 0===c?void 0:c.type)};B.isUnaryExpression=function(c){return"UnaryExpression"===(null===c||void 0===
c?void 0:c.type)};B.isUpdateExpression=function(c){return"UpdateExpression"===(null===c||void 0===c?void 0:c.type)};B.isVariableDeclarator=function(c){return"VariableDeclarator"===(null===c||void 0===c?void 0:c.type)};B.isProperty=function(c){return"Property"===(null===c||void 0===c?void 0:c.type)};B.isTemplateElement=function(c){return"TemplateElement"===(null===c||void 0===c?void 0:c.type)}})},"esri/arcade/lib/error-handler":function(){define(["require","exports","./types"],function(f,B,l){function d(c,
u){c=l.ParsingErrorMessages[c];return u?c.replace(/\${(.*?)}/g,function(t,e){var r,m;return null!==(m=null===(r=u[e])||void 0===r?void 0:r.toString())&&void 0!==m?m:""}):c}Object.defineProperty(B,"__esModule",{value:!0});B.ErrorHandler=B.formatErrorDescription=void 0;B.formatErrorDescription=d;f=function(){function c(u){void 0===u&&(u=!1);this.tolerant=u;this.errors=[]}c.prototype.recordError=function(u){this.errors.push(u)};c.prototype.tolerate=function(u){if(this.tolerant)this.recordError(u);else throw u;
};c.prototype.throwError=function(u){var t;u.description=null!==(t=u.description)&&void 0!==t?t:d(u.code,u.data);throw new l.ParsingError(u);};c.prototype.tolerateError=function(u){var t;u.description=null!==(t=u.description)&&void 0!==t?t:d(u.code,u.data);u=new l.ParsingError(u);if(this.tolerant)this.recordError(u);else throw u;};return c}();B.ErrorHandler=f})},"esri/arcade/lib/scanner":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../polyfill/tsSupport/extends ./assert ./character ./types".split(" "),
function(f,B,l,d,c,u,t,e){Object.defineProperty(B,"__esModule",{value:!0});B.Scanner=void 0;var r=[[],[],[]];e.UpdateOperators.forEach(function(m){return r[m.length-1].push(m)});e.UnaryOperators.forEach(function(m){return r[m.length-1].push(m)});e.LogicalOperators.forEach(function(m){return r[m.length-1].push(m)});e.AssignmentOperators.forEach(function(m){return r[m.length-1].push(m)});e.BinaryOperators.forEach(function(m){return r[m.length-1].push(m)});f=function(){function m(a,h){this.source=a;
this.errorHandler=h;this._length=a.length;this.index=0;this.lineNumber=1;this.lineStart=0;this.curlyStack=[]}m.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}};m.prototype.restoreState=function(a){this.index=a.index;this.lineNumber=a.lineNumber;this.lineStart=a.lineStart;this.curlyStack=a.curlyStack};m.prototype.eof=function(){return this.index>=this._length};m.prototype.throwUnexpectedToken=function(a){void 0===
a&&(a=e.ParsingErrorCodes.UnexpectedToken);this.errorHandler.throwError({code:a,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})};m.prototype.tolerateUnexpectedToken=function(a){void 0===a&&(a=e.ParsingErrorCodes.UnexpectedToken);this.errorHandler.tolerateError({code:a,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})};m.prototype.skipSingleLineComment=function(a){for(var h=[],q=this.index-a,n={start:{line:this.lineNumber,column:this.index-this.lineStart-
a},end:{line:0,column:0}};!this.eof();){var k=this.source.charCodeAt(this.index);++this.index;if(t.Character.isLineTerminator(k))return n&&(n.end={line:this.lineNumber,column:this.index-this.lineStart-1},a={multiLine:!1,start:q+a,end:this.index-1,range:[q,this.index-1],loc:n},h.push(a)),13===k&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,h}n&&(n.end={line:this.lineNumber,column:this.index-this.lineStart},a={multiLine:!1,start:q+a,end:this.index,
range:[q,this.index],loc:n},h.push(a));return h};m.prototype.skipMultiLineComment=function(){for(var a=[],h=this.index-2,q={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}};!this.eof();){var n=this.source.charCodeAt(this.index);if(t.Character.isLineTerminator(n))13===n&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===n&&47===this.source.charCodeAt(this.index+1))return this.index+=2,
q&&(q.end={line:this.lineNumber,column:this.index-this.lineStart},h={multiLine:!0,start:h+2,end:this.index-2,range:[h,this.index],loc:q},a.push(h)),a;++this.index}}q&&(q.end={line:this.lineNumber,column:this.index-this.lineStart},h={multiLine:!0,start:h+2,end:this.index,range:[h,this.index],loc:q},a.push(h));this.tolerateUnexpectedToken();return a};m.prototype.scanComments=function(){for(var a=[];!this.eof();){var h=this.source.charCodeAt(this.index);if(t.Character.isWhiteSpace(h))++this.index;else if(t.Character.isLineTerminator(h))++this.index,
13===h&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index;else if(47===h)if(h=this.source.charCodeAt(this.index+1),47===h)this.index+=2,h=this.skipSingleLineComment(2),a=d(d([],a),h);else if(42===h)this.index+=2,h=this.skipMultiLineComment(),a=d(d([],a),h);else break;else break}return a};m.prototype.isKeyword=function(a){a=a.toLowerCase();switch(a.length){case 2:return a===e.Keywords.If||a===e.Keywords.In;case 3:return a===e.Keywords.Var||a===e.Keywords.For;
case 4:return a===e.Keywords.Else;case 5:return a===e.Keywords.Break||a===e.Keywords.While;case 6:return a===e.Keywords.Return||a===e.Keywords.Import||a===e.Keywords.Export;case 8:return a===e.Keywords.Function||a===e.Keywords.Continue;default:return!1}};m.prototype.codePointAt=function(a){var h=this.source.charCodeAt(a);55296<=h&&56319>=h&&(a=this.source.charCodeAt(a+1),56320<=a&&57343>=a&&(h=1024*(h-55296)+a-56320+65536));return h};m.prototype.scanHexEscape=function(a){a="u"===a?4:2;for(var h=0,
q=0;q<a;++q)if(!this.eof()&&t.Character.isHexDigit(this.source.charCodeAt(this.index)))h=16*h+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;return String.fromCharCode(h)};m.prototype.scanUnicodeCodePointEscape=function(){var a=this.source[this.index],h=0;for("}"===a&&this.throwUnexpectedToken();!this.eof();){a=this.source[this.index++];if(!t.Character.isHexDigit(a.charCodeAt(0)))break;h=16*h+"0123456789abcdef".indexOf(a.toLowerCase())}(1114111<h||"}"!==a)&&this.throwUnexpectedToken();
return t.Character.fromCodePoint(h)};m.prototype.getIdentifier=function(){for(var a=this.index++;!this.eof();){var h=this.source.charCodeAt(this.index);if(92===h||55296<=h&&57343>h)return this.index=a,this.getComplexIdentifier();if(t.Character.isIdentifierPart(h))++this.index;else break}return this.source.slice(a,this.index)};m.prototype.getComplexIdentifier=function(){var a=this.codePointAt(this.index),h=t.Character.fromCodePoint(a);this.index+=h.length;if(92===a){117!==this.source.charCodeAt(this.index)&&
this.throwUnexpectedToken();++this.index;if("{"===this.source[this.index]){++this.index;var q=this.scanUnicodeCodePointEscape()}else q=this.scanHexEscape("u"),null!==q&&"\\"!==q&&t.Character.isIdentifierStart(q.charCodeAt(0))||this.throwUnexpectedToken();h=q}for(;!this.eof();){a=this.codePointAt(this.index);if(!t.Character.isIdentifierPart(a))break;q=t.Character.fromCodePoint(a);h+=q;this.index+=q.length;92===a&&(h=h.substring(0,h.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),
++this.index,"{"===this.source[this.index]?(++this.index,q=this.scanUnicodeCodePointEscape()):(q=this.scanHexEscape("u"),null!==q&&"\\"!==q&&t.Character.isIdentifierPart(q.charCodeAt(0))||this.throwUnexpectedToken()),h+=q)}return h};m.prototype.octalToDecimal=function(a){var h="0"!==a,q="01234567".indexOf(a);!this.eof()&&t.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(h=!0,q=8*q+"01234567".indexOf(this.source[this.index++]),"0123".includes(a)&&!this.eof()&&t.Character.isOctalDigit(this.source.charCodeAt(this.index))&&
(q=8*q+"01234567".indexOf(this.source[this.index++])));return{code:q,octal:h}};m.prototype.scanIdentifier=function(){var a=this.index,h=92===this.source.charCodeAt(a)?this.getComplexIdentifier():this.getIdentifier();var q=1===h.length?3:this.isKeyword(h)?4:h.toLowerCase()===e.Keywords.Null?5:h.toLowerCase()===e.Keywords.True||h.toLowerCase()===e.Keywords.False?1:3;if(3!==q&&a+h.length!==this.index){var n=this.index;this.index=a;this.tolerateUnexpectedToken(e.ParsingErrorCodes.InvalidEscapedReservedWord);
this.index=n}return{type:q,value:h,lineNumber:this.lineNumber,lineStart:this.lineStart,start:a,end:this.index}};m.prototype.scanPunctuator=function(){var a=this.index,h=this.source[this.index];switch(h){case "(":case "{":"{"===h&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;break;case "}":++this.index;this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;break;default:for(var q=r.length;0<q;q--)if(h=this.source.substring(this.index,
this.index+q),r[q-1].includes(h)){this.index+=q;break}}this.index===a&&this.throwUnexpectedToken();return{type:7,value:h,lineNumber:this.lineNumber,lineStart:this.lineStart,start:a,end:this.index}};m.prototype.scanHexLiteral=function(a){for(var h="";!this.eof()&&t.Character.isHexDigit(this.source.charCodeAt(this.index));)h+=this.source[this.index++];0===h.length&&this.throwUnexpectedToken();t.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,
value:parseInt("0x"+h,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:a,end:this.index}};m.prototype.scanBinaryLiteral=function(a){for(var h="";!this.eof();){var q=this.source[this.index];if("0"!==q&&"1"!==q)break;h+=this.source[this.index++]}0===h.length&&this.throwUnexpectedToken();this.eof()||(q=this.source.charCodeAt(this.index),(t.Character.isIdentifierStart(q)||t.Character.isDecimalDigit(q))&&this.throwUnexpectedToken());return{type:6,value:parseInt(h,2),lineNumber:this.lineNumber,
lineStart:this.lineStart,start:a,end:this.index}};m.prototype.scanOctalLiteral=function(a,h){var q="",n=!1;t.Character.isOctalDigit(a.charCodeAt(0))?(n=!0,q="0"+this.source[this.index++]):++this.index;for(;!this.eof()&&t.Character.isOctalDigit(this.source.charCodeAt(this.index));)q+=this.source[this.index++];n||0!==q.length||this.throwUnexpectedToken();(t.Character.isIdentifierStart(this.source.charCodeAt(this.index))||t.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken();
return{type:6,value:parseInt(q,8),lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}};m.prototype.scanNumericLiteral=function(){var a=this.index,h=this.source[a];u.assert(t.Character.isDecimalDigit(h.charCodeAt(0))||"."===h,"Numeric literal must start with a decimal digit or a decimal point");var q="";if("."!==h){q=this.source[this.index++];h=this.source[this.index];if("0"===q){if("x"===h||"X"===h)return++this.index,this.scanHexLiteral(a);if("b"===h||"B"===h)return++this.index,
this.scanBinaryLiteral(a);if("o"===h||"O"===h)return this.scanOctalLiteral(h,a)}for(;t.Character.isDecimalDigit(this.source.charCodeAt(this.index));)q+=this.source[this.index++];h=this.source[this.index]}if("."===h){for(q+=this.source[this.index++];t.Character.isDecimalDigit(this.source.charCodeAt(this.index));)q+=this.source[this.index++];h=this.source[this.index]}if("e"===h||"E"===h){q+=this.source[this.index++];h=this.source[this.index];if("+"===h||"-"===h)q+=this.source[this.index++];if(t.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;t.Character.isDecimalDigit(this.source.charCodeAt(this.index));)q+=
this.source[this.index++];else this.throwUnexpectedToken()}t.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,value:parseFloat(q),lineNumber:this.lineNumber,lineStart:this.lineStart,start:a,end:this.index}};m.prototype.scanStringLiteral=function(){var a=this.index,h=this.source[a];u.assert("'"===h||'"'===h,"String literal must starts with a quote");++this.index;for(var q="";!this.eof();){var n=this.source[this.index++];if(n===h){h="";break}if("\\"===
n)if((n=this.source[this.index++])&&t.Character.isLineTerminator(n.charCodeAt(0)))++this.lineNumber,"\r"===n&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(n){case "u":"{"===this.source[this.index]?(++this.index,q+=this.scanUnicodeCodePointEscape()):(n=this.scanHexEscape(n),null===n&&this.throwUnexpectedToken(),q+=n);break;case "x":n=this.scanHexEscape(n);null===n&&this.throwUnexpectedToken(e.ParsingErrorCodes.InvalidHexEscapeSequence);q+=n;break;case "n":q+="\n";
break;case "r":q+="\r";break;case "t":q+="\t";break;case "b":q+="\b";break;case "f":q+="\f";break;case "v":q+="\v";break;case "8":case "9":q+=n;this.tolerateUnexpectedToken();break;default:n&&t.Character.isOctalDigit(n.charCodeAt(0))?(n=this.octalToDecimal(n),q+=String.fromCharCode(n.code)):q+=n}else if(t.Character.isLineTerminator(n.charCodeAt(0)))break;else q+=n}""!==h&&(this.index=a,this.throwUnexpectedToken());return{type:8,value:q,lineNumber:this.lineNumber,lineStart:this.lineStart,start:a,end:this.index}};
m.prototype.scanTemplate=function(){var a="",h=!1,q=this.index,n="`"===this.source[q],k=!1,g=2;for(++this.index;!this.eof();){var b=this.source[this.index++];if("`"===b){g=1;h=k=!0;break}if("$"===b){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;h=!0;break}a+=b}else if("\\"===b)if(b=this.source[this.index++],t.Character.isLineTerminator(b.charCodeAt(0)))++this.lineNumber,"\r"===b&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(b){case "n":a+=
"\n";break;case "r":a+="\r";break;case "t":a+="\t";break;case "u":if("{"===this.source[this.index])++this.index,a+=this.scanUnicodeCodePointEscape();else{var x=this.index,v=this.scanHexEscape(b);null!==v?a+=v:(this.index=x,a+=b)}break;case "x":b=this.scanHexEscape(b);null===b&&this.throwUnexpectedToken(e.ParsingErrorCodes.InvalidHexEscapeSequence);a+=b;break;case "b":a+="\b";break;case "f":a+="\f";break;case "v":a+="\v";break;default:"0"===b?(t.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&
this.throwUnexpectedToken(e.ParsingErrorCodes.TemplateOctalLiteral),a+="\x00"):t.Character.isOctalDigit(b.charCodeAt(0))?this.throwUnexpectedToken(e.ParsingErrorCodes.TemplateOctalLiteral):a+=b}else t.Character.isLineTerminator(b.charCodeAt(0))?(++this.lineNumber,"\r"===b&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,a+="\n"):a+=b}h||this.throwUnexpectedToken();n||this.curlyStack.pop();return{type:10,value:this.source.slice(q+1,this.index-g),cooked:a,head:n,tail:k,lineNumber:this.lineNumber,
lineStart:this.lineStart,start:q,end:this.index}};m.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var a=this.source.charCodeAt(this.index);return t.Character.isIdentifierStart(a)?this.scanIdentifier():40===a||41===a||59===a?this.scanPunctuator():39===a||34===a?this.scanStringLiteral():46===a?t.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():
t.Character.isDecimalDigit(a)?this.scanNumericLiteral():96===a||125===a&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():55296<=a&&57343>a&&t.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()};return m}();B.Scanner=f})},"esri/arcade/lib/assert":function(){define(["require","exports"],function(f,B){Object.defineProperty(B,"__esModule",{value:!0});B.assert=void 0;B.assert=function(l,d){if(!l)throw Error("ASSERT: "+d);}})},"esri/arcade/lib/character":function(){define(["require",
"exports"],function(f,B){Object.defineProperty(B,"__esModule",{value:!0});B.Character=void 0;var l=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
d=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
B.Character={fromCodePoint:function(c){return 65536>c?String.fromCharCode(c):String.fromCharCode(55296+(c-65536>>10))+String.fromCharCode(56320+(c-65536&1023))},isWhiteSpace:function(c){return 32===c||9===c||11===c||12===c||160===c||5760<=c&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(c)},isLineTerminator:function(c){return 10===c||13===c||8232===c||8233===c},isIdentifierStart:function(c){return 36===c||95===c||65<=c&&90>=c||97<=c&&122>=c||92===c||
128<=c&&l.test(B.Character.fromCodePoint(c))},isIdentifierPart:function(c){return 36===c||95===c||65<=c&&90>=c||97<=c&&122>=c||48<=c&&57>=c||92===c||128<=c&&d.test(B.Character.fromCodePoint(c))},isDecimalDigit:function(c){return 48<=c&&57>=c},isHexDigit:function(c){return 48<=c&&57>=c||65<=c&&70>=c||97<=c&&102>=c},isOctalDigit:function(c){return 48<=c&&55>=c}}})},"esri/arcade/lib/tokenizer":function(){define(["require","exports","./error-handler","./scanner","./types"],function(f,B,l,d,c){Object.defineProperty(B,
"__esModule",{value:!0});B.Tokenizer=void 0;f=function(){function u(t,e){this.errorHandler=new l.ErrorHandler;this.errorHandler.tolerant=e?"boolean"===typeof e.tolerant&&e.tolerant:!1;this.scanner=new d.Scanner(t,this.errorHandler);this.trackComments=e?"boolean"===typeof e.comment&&e.comment:!1;this.buffer=[]}u.prototype.errors=function(){return this.errorHandler.errors};u.prototype.getNextToken=function(){var t=this;if(0===this.buffer.length){var e=this.scanner.scanComments();this.trackComments&&
e&&e.forEach(function(a){var h=t.scanner.source.slice(a.start,a.end);t.buffer.push({type:a.multiLine?"BlockComment":"LineComment",value:h,range:a.range,loc:a.loc})});if(!this.scanner.eof()){e={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart};var r=this.scanner.lex(),m={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart};e={type:c.TokenNames[r.type],value:this.scanner.source.slice(r.start,r.end),range:[r.start,r.end],loc:{start:e,end:m}};this.buffer.push(e)}}return this.buffer.shift()};
return u}();B.Tokenizer=f})},"esri/arcade/featureset/support/RecentlyUsedCache":function(){define(["require","exports"],function(f,B){var l=function(){function c(u){var t=this;t._keys=[];t._values=[];t.length=0;u&&u.forEach(function(e){t.set(e[0],e[1])})}c.prototype.entries=function(){var u=this;return[].slice.call(this.keys().map(function(t,e){return[t,u._values[e]]}))};c.prototype.keys=function(){return[].slice.call(this._keys)};c.prototype.values=function(){return[].slice.call(this._values)};c.prototype.has=
function(u){return this._keys.includes(u)};c.prototype.get=function(u){u=this._keys.indexOf(u);return-1<u?this._values[u]:null};c.prototype.deepGet=function(u){if(!u||!u.length)return null;var t=function(e,r){return null==e?null:r.length?t(e instanceof c?e.get(r[0]):e[r[0]],r.slice(1)):e};return t(this.get(u[0]),u.slice(1))};c.prototype.set=function(u,t){var e=this._keys.indexOf(u);-1<e?this._values[e]=t:(this._keys.push(u),this._values.push(t),this.length=this._values.length);return this};c.prototype.sortedSet=
function(u,t,e,r){var m=this._keys.length;e=e||0;r=void 0!==r?r:m-1;if(0===m)return this._keys.push(u),this._values.push(t),this;if(u===this._keys[e])return this._values.splice(e,0,t),this;if(u===this._keys[r])return this._values.splice(r,0,t),this;if(u>this._keys[r])return this._keys.splice(r+1,0,u),this._values.splice(r+1,0,t),this;if(u<this._keys[e])return this._values.splice(e,0,t),this._keys.splice(e,0,u),this;if(e>=r)return this;m=e+Math.floor((r-e)/2);return u<this._keys[m]?this.sortedSet(u,
t,e,m-1):u>this._keys[m]?this.sortedSet(u,t,m+1,r):this};c.prototype.size=function(){return this.length};c.prototype.clear=function(){this._keys.length=this.length=this._values.length=0;return this};c.prototype.delete=function(u){u=this._keys.indexOf(u);return-1<u?(this._keys.splice(u,1),this._values.splice(u,1),this.length=this._keys.length,!0):!1};c.prototype.forEach=function(u){var t=this;this._keys.forEach(function(e,r){u(t._values[r],e,r)})};c.prototype.map=function(u){var t=this;return this.keys().map(function(e,
r){return u(t._values[r],e,r)})};c.prototype.filter=function(u){var t=this;t._keys.forEach(function(e,r){!1===u(t._values[r],e,r)&&t.delete(e)});return this};c.prototype.clone=function(){return new c(this.entries())};return c}(),d=function(){function c(u){void 0===u&&(u=20);this._maxEntries=u;this._values=new l}c.prototype.delete=function(u){this._values.has(u)&&this._values.delete(u)};c.prototype.get=function(u){var t=null;this._values.has(u)&&(t=this._values.get(u),this._values.delete(u),this._values.set(u,
t));return t};c.prototype.put=function(u,t){if(this._values.size()>=this._maxEntries){var e=this._values.keys()[0];this._values.delete(e)}this._values.set(u,t)};return c}();return function(){function c(u){void 0===u&&(u=20);this._maxEntries=u;this._cache=new d(this._maxEntries)}c.prototype.clear=function(){this._cache=new d(this._maxEntries)};c.prototype.addToCache=function(u,t){this._cache.put(u,t)};c.prototype.removeFromCache=function(u){this._cache.delete(u)};c.prototype.getFromCache=function(u){return this._cache.get(u)};
return c}()})},"esri/arcade/arcadeRuntime":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./polyfill/tsSupport/extends ./ArcadeModule ./ArcadeModuleLoader ./Dictionary ./executionError ./Feature ./FunctionWrapper ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Geometry ../SpatialReference".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E,C,z){function w(ea,ha){for(var ra=[],Aa=0;Aa<ha.arguments.length;Aa++)ra.push(G(ea,ha.arguments[Aa]));return ra}function A(ea,ha,ra){try{return!0===ha.preparsed?ra(ea,null,ha.arguments):ra(ea,ha,w(ea,ha))}catch(Aa){throw Aa;}}function G(ea,ha){try{switch(null===ha||void 0===ha?void 0:ha.type){case "EmptyStatement":return n.voidOperation;case "VariableDeclarator":var ra=null===ha.init?null:G(ea,ha.init);ra===n.voidOperation&&(ra=null);if("Identifier"!==
ha.id.type)throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.InvalidIdentifier,ha);var Aa=ha.id.name.toLowerCase();null!=ea.localScope?ea.localScope[Aa]={value:ra,valueset:!0,node:ha.init}:ea.globalScope[Aa]={value:ra,valueset:!0,node:ha.init};return n.voidOperation;case "VariableDeclaration":for(var Ea=0;Ea<ha.declarations.length;Ea++)G(ea,ha.declarations[Ea]);return n.voidOperation;case "ImportDeclaration":var va,Ga,ca=ha.specifiers[0].local.name.toLowerCase(),ja=ea.libraryResolver.loadLibrary(ca);
Ea=null;(null===(va=ea.libraryResolver._moduleSingletons)||void 0===va?0:va.has(ja.uri))?Ea=ea.libraryResolver._moduleSingletons.get(ja.uri):(Ea=new S(ja),Ea.loadModule(ea),null===(Ga=ea.libraryResolver._moduleSingletons)||void 0===Ga?void 0:Ga.set(ja.uri,Ea));ea.globalScope[ca]={value:Ea,valueset:!0,node:ha};return n.voidOperation;case "ExportNamedDeclaration":G(ea,ha.declaration);if("FunctionDeclaration"===ha.declaration.type)ea.exports[ha.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===
ha.declaration.type){Ea=0;for(var wa=ha.declaration.declarations;Ea<wa.length;Ea++)ea.exports[wa[Ea].id.name.toLowerCase()]="variable"}return n.voidOperation;case "BlockStatement":case "Program":a:{var za=n.voidOperation;for(Ea=0;Ea<ha.body.length;Ea++)if(za=G(ea,ha.body[Ea]),za instanceof n.ReturnResult||za===n.breakResult||za===n.continueResult){var Fa=za;break a}Fa=za}return Fa;case "FunctionDeclaration":var O=ha.id.name.toLowerCase();ea.globalScope[O]={valueset:!0,node:null,value:new R(ha,ea)};
return n.voidOperation;case "ReturnStatement":if(null===ha.argument)var ya=new n.ReturnResult(n.voidOperation);else{var Ha=G(ea,ha.argument);ya=new n.ReturnResult(Ha)}return ya;case "IfStatement":var da=G(ea,ha.test);if(!0===da)var Oa=G(ea,ha.consequent);else if(!1===da)Oa=null!==ha.alternate?G(ea,ha.alternate):n.voidOperation;else throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.BooleanConditionRequired,ha);return Oa;case "ExpressionStatement":if("AssignmentExpression"===ha.expression.type||
"UpdateExpression"===ha.expression.type)var Na=G(ea,ha.expression);else{var Ca=G(ea,ha.expression);Na=Ca===n.voidOperation?n.voidOperation:new n.ImplicitResult(Ca)}return Na;case "AssignmentExpression":Ea=null;var V="";if("MemberExpression"===ha.left.type){Ea=G(ea,ha.left.object);if(!0===ha.left.computed)V=G(ea,ha.left.property);else if("Identifier"===ha.left.property.type)V=ha.left.property.name;else throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.InvalidIdentifier,ha);var oa=G(ea,ha.right);
if(n.isArray(Ea))if(n.isNumber(V)){0>V&&(V=Ea.length+V);if(0>V||V>Ea.length)throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.OutOfBounds,ha);if(V===Ea.length&&"\x3d"!==ha.operator)throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.OutOfBounds,ha);Ea[V]=H(oa,ha.operator,Ea[V],ha,ea)}else throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.ArrayAccessorMustBeNumber,ha);else if(Ea instanceof m){if(!1===n.isString(V))throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.KeyAccessorMustBeString,
ha);if(!0===Ea.hasField(V))Ea.setField(V,H(oa,ha.operator,Ea.field(V),ha,ea));else{if("\x3d"!==ha.operator)throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.FieldNotFound,ha,{key:V});Ea.setField(V,H(oa,ha.operator,null,ha,ea))}}else if(n.isFeature(Ea)){if(!1===n.isString(V))throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.KeyAccessorMustBeString,ha);if(!0===Ea.hasField(V))Ea.setField(V,H(oa,ha.operator,Ea.field(V),ha,ea));else{if("\x3d"!==ha.operator)throw new a.ArcadeExecutionError(ea,
a.ExecutionErrorCodes.FieldNotFound,ha,{key:V});Ea.setField(V,H(oa,ha.operator,null,ha,ea))}}else{if(n.isImmutableArray(Ea))throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.Immutable,ha);if(Ea instanceof S){if(!1===n.isString(V))throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.ModuleAccessorMustBeString,ha);if(!0===Ea.hasGlobal(V))Ea.setGlobal(V,H(oa,ha.operator,Ea.global(V),ha,ea));else throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.ModuleExportNotFound,ha);}else throw new a.ArcadeExecutionError(ea,
a.ExecutionErrorCodes.InvalidIdentifier,ha);}var pa=n.voidOperation}else{Ea=ha.left.name.toLowerCase();var Y=G(ea,ha.right);if(null!=ea.localScope&&void 0!==ea.localScope[Ea])ea.localScope[Ea]={value:H(Y,ha.operator,ea.localScope[Ea].value,ha,ea),valueset:!0,node:ha.right},pa=n.voidOperation;else if(void 0!==ea.globalScope[Ea])ea.globalScope[Ea]={value:H(Y,ha.operator,ea.globalScope[Ea].value,ha,ea),valueset:!0,node:ha.right},pa=n.voidOperation;else throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.InvalidIdentifier,
ha);}return pa;case "UpdateExpression":Ea=null;V="";if("MemberExpression"===ha.argument.type){Ea=G(ea,ha.argument.object);!0===ha.argument.computed?V=G(ea,ha.argument.property):"Identifier"===ha.argument.property.type&&(V=ha.argument.property.name);if(n.isArray(Ea))if(n.isNumber(V)){0>V&&(V=Ea.length+V);if(0>V||V>=Ea.length)throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.OutOfBounds,ha);var ka=n.toNumber(Ea[V]);Ea[V]="++"===ha.operator?ka+1:ka-1}else throw new a.ArcadeExecutionError(ea,
a.ExecutionErrorCodes.ArrayAccessorMustBeNumber,ha);else if(Ea instanceof m){if(!1===n.isString(V))throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.KeyAccessorMustBeString,ha);if(!0===Ea.hasField(V))ka=n.toNumber(Ea.field(V)),Ea.setField(V,"++"===ha.operator?ka+1:ka-1);else throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.FieldNotFound,ha);}else if(n.isFeature(Ea)){if(!1===n.isString(V))throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.KeyAccessorMustBeString,ha);if(!0===
Ea.hasField(V))ka=n.toNumber(Ea.field(V)),Ea.setField(V,"++"===ha.operator?ka+1:ka-1);else throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.FieldNotFound,ha);}else{if(n.isImmutableArray(Ea))throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.Immutable,ha);if(Ea instanceof S){if(!1===n.isString(V))throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.ModuleAccessorMustBeString,ha);if(!0===Ea.hasGlobal(V))ka=n.toNumber(Ea.global(V)),Ea.setGlobal(V,"++"===ha.operator?ka+1:ka-1);else throw new a.ArcadeExecutionError(ea,
a.ExecutionErrorCodes.ModuleExportNotFound,ha);}else throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.InvalidParameter,ha);}var ta=!1===ha.prefix?ka:"++"===ha.operator?ka+1:ka-1}else{Ea="Identifier"===ha.argument.type?ha.argument.name.toLowerCase():"";if(!Ea)throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.InvalidIdentifier,ha);if(null!=ea.localScope&&void 0!==ea.localScope[Ea])ka=n.toNumber(ea.localScope[Ea].value),ea.localScope[Ea]={value:"++"===ha.operator?ka+1:ka-1,valueset:!0,
node:ha},ta=!1===ha.prefix?ka:"++"===ha.operator?ka+1:ka-1;else if(void 0!==ea.globalScope[Ea])ka=n.toNumber(ea.globalScope[Ea].value),ea.globalScope[Ea]={value:"++"===ha.operator?ka+1:ka-1,valueset:!0,node:ha},ta=!1===ha.prefix?ka:"++"===ha.operator?ka+1:ka-1;else throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.InvalidIdentifier,ha);}return ta;case "BreakStatement":return n.breakResult;case "ContinueStatement":return n.continueResult;case "TemplateElement":return ha.value?ha.value.cooked:
"";case "TemplateLiteral":var xa="",Da=0;pa=0;for(Ea=ha.quasis;pa<Ea.length;pa++)if(V=Ea[pa],xa+=V.value?V.value.cooked:"",!1===V.tail){if(ha.expressions[Da]){oa=n;var Ja=oa.toString,La=G(ea,ha.expressions[Da]);Y=ea;ta=ha;if(n.isFunctionParameter(La))throw new a.ArcadeExecutionError(Y,a.ExecutionErrorCodes.NoFunctionInTemplateLiteral,ta);var Ya=Ja.call(oa,La)}else Ya="";xa+=Ya;Da++}return xa;case "ForStatement":null!==ha.init&&G(ea,ha.init);Da={testResult:!0,lastAction:n.voidOperation};do b:{Ea=ea;
V=ha;Ya=Da;if(null!==V.test){Ya.testResult=G(Ea,V.test);if(!1===Ya.testResult)break b;if(!0!==Ya.testResult)throw new a.ArcadeExecutionError(Ea,a.ExecutionErrorCodes.BooleanConditionRequired,V);}Ya.lastAction=G(Ea,V.body);Ya.lastAction===n.breakResult?Ya.testResult=!1:Ya.lastAction instanceof n.ReturnResult?Ya.testResult=!1:null!==V.update&&G(Ea,V.update)}while(!0===Da.testResult);xa=Da.lastAction instanceof n.ReturnResult?Da.lastAction:n.voidOperation;return xa;case "ForInStatement":return F(ea,
ha);case "WhileStatement":Ea=!0;var Ua=n.voidOperation;Ea=G(ea,ha.test);if(!1===Ea)var Ta=n.voidOperation;else{if(!0!==Ea)throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.BooleanConditionRequired,ha);for(;!0===Ea;){Ua=G(ea,ha.body);if(Ua===n.breakResult)break;if(Ua instanceof n.ReturnResult)break;Ea=G(ea,ha.test);if(!0!==Ea&&!1!==Ea)throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.BooleanConditionRequired,ha);}Ta=Ua instanceof n.ReturnResult?Ua:n.voidOperation}return Ta;case "Identifier":return I(ea,
ha);case "MemberExpression":return J(ea,ha);case "Literal":return ha.value;case "CallExpression":a:try{if("MemberExpression"===ha.callee.type){var ab=G(ea,ha.callee.object);if(!(ab instanceof S))throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.FuncionNotFound,ha);var fb=!1===ha.callee.computed?ha.callee.property.name:G(ea,ha.callee.property);if(!ab.hasGlobal(fb))throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.FuncionNotFound,ha);var kb=ab.global(fb);if(!n.isFunctionParameter(kb))throw new a.ArcadeExecutionError(ea,
a.ExecutionErrorCodes.CallNonFunction,ha);var qb=kb.call(ea,ha)}else{if("Identifier"!==ha.callee.type)throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.FuncionNotFound,ha);if(null!=ea.localScope&&void 0!==ea.localScope[ha.callee.name.toLowerCase()]){var ob=ea.localScope[ha.callee.name.toLowerCase()];if(n.isFunctionParameter(ob.value)){qb=ob.value.call(ea,ha);break a}throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.CallNonFunction,ha);}if(void 0!==ea.globalScope[ha.callee.name.toLowerCase()]){ob=
ea.globalScope[ha.callee.name.toLowerCase()];if(n.isFunctionParameter(ob.value)){qb=ob.value.call(ea,ha);break a}throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.CallNonFunction,ha);}throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.FuncionNotFound,ha);}}catch(Hb){throw Hb;}return qb;case "UnaryExpression":return K(ea,ha);case "BinaryExpression":return Q(ea,ha);case "LogicalExpression":return P(ea,ha);case "ArrayExpression":try{Ea=[];for(V=0;V<ha.elements.length;V++){var wb=G(ea,
ha.elements[V]);if(n.isFunctionParameter(wb))throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.NoFunctionInArray,ha);wb===n.voidOperation?Ea.push(null):Ea.push(wb)}var Fb=Ea}catch(Hb){throw Hb;}return Fb;case "ObjectExpression":Ea={};var yb=new Map;for(V=0;V<ha.properties.length;V++){var lb=G(ea,ha.properties[V]);if(n.isFunctionParameter(lb.value))throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.NoFunctionInDictionary,ha);if(!1===n.isString(lb.key))throw new a.ArcadeExecutionError(ea,
a.ExecutionErrorCodes.KeyMustBeString,ha);var Db=lb.key.toString(),Sb=Db.toLowerCase();yb.has(Sb)?Db=yb.get(Sb):yb.set(Sb,Db);Ea[Db]=lb.value===n.voidOperation?null:lb.value}var Eb=new m(Ea);Eb.immutable=!1;return Eb;case "Property":return{key:"Identifier"===ha.key.type?ha.key.name:G(ea,ha.key),value:G(ea,ha.value)};default:throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.Unrecognised,ha);}}catch(Hb){throw a.ensureArcadeExecutionError(ea,ha,Hb);}}function F(ea,ha){var ra=G(ea,ha.right);"VariableDeclaration"===
ha.left.type&&G(ea,ha.left);var Aa=null,Ea="";if("VariableDeclaration"===ha.left.type){var va=ha.left.declarations[0].id;"Identifier"===va.type&&(Ea=va.name)}else"Identifier"===ha.left.type&&(Ea=ha.left.name);if(!Ea)throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.InvalidIdentifier,ha);Ea=Ea.toLowerCase();null!=ea.localScope&&void 0!==ea.localScope[Ea]&&(Aa=ea.localScope[Ea]);null===Aa&&void 0!==ea.globalScope[Ea]&&(Aa=ea.globalScope[Ea]);if(null===Aa)throw new a.ArcadeExecutionError(ea,
a.ExecutionErrorCodes.InvalidIdentifier,ha);if(n.isArray(ra)||n.isString(ra)){ra=ra.length;for(va=0;va<ra;va++){Aa.value=va;Ea=G(ea,ha.body);if(Ea===n.breakResult)break;if(Ea instanceof n.ReturnResult)return Ea}return n.voidOperation}if(n.isImmutableArray(ra)){for(va=0;va<ra.length();va++){Aa.value=va;Ea=G(ea,ha.body);if(Ea===n.breakResult)break;if(Ea instanceof n.ReturnResult)return Ea}return n.voidOperation}if(ra instanceof m||n.isFeature(ra))for(ra=ra.keys(),va=0;va<ra.length;va++){Aa.value=ra[va];
Ea=G(ea,ha.body);if(Ea===n.breakResult)break;if(Ea instanceof n.ReturnResult)return Ea}else return n.voidOperation}function H(ea,ha,ra,Aa,Ea){switch(ha){case "\x3d":return ea===n.voidOperation?null:ea;case "/\x3d":return n.toNumber(ra)/n.toNumber(ea);case "*\x3d":return n.toNumber(ra)*n.toNumber(ea);case "-\x3d":return n.toNumber(ra)-n.toNumber(ea);case "+\x3d":return n.isString(ra)||n.isString(ea)?n.toString(ra)+n.toString(ea):n.toNumber(ra)+n.toNumber(ea);case "%\x3d":return n.toNumber(ra)%n.toNumber(ea);
default:throw new a.ArcadeExecutionError(Ea,a.ExecutionErrorCodes.UnsupportedOperator,Aa);}}function J(ea,ha){try{var ra=G(ea,ha.object);if(null===ra)throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.MemberOfNull,ha);if(!1===ha.computed){if("Identifier"===ha.property.type){if(ra instanceof m||n.isFeature(ra))return ra.field(ha.property.name);if(ra instanceof C)return x.geometryMember(ra,ha.property.name,ha,ea);if(ra instanceof S){if(!ra.hasGlobal(ha.property.name))throw new a.ArcadeExecutionError(ea,
a.ExecutionErrorCodes.InvalidIdentifier,ha);return ra.global(ha.property.name)}}throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.InvalidMemberAccessKey,ha);}var Aa=G(ea,ha.property);if(ra instanceof m||n.isFeature(ra)){if(n.isString(Aa))return ra.field(Aa);throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.InvalidMemberAccessKey,ha);}if(ra instanceof S){if(n.isString(Aa))return ra.global(Aa);throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.InvalidMemberAccessKey,ha);}if(ra instanceof
C){if(n.isString(Aa))return x.geometryMember(ra,Aa,ha,ea);throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.InvalidMemberAccessKey,ha);}if(n.isArray(ra)){if(n.isNumber(Aa)&&isFinite(Aa)&&Math.floor(Aa)===Aa){0>Aa&&(Aa=ra.length+Aa);if(Aa>=ra.length||0>Aa)throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.OutOfBounds,ha);return ra[Aa]}throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.InvalidMemberAccessKey,ha);}if(n.isString(ra)){if(n.isNumber(Aa)&&isFinite(Aa)&&Math.floor(Aa)===
Aa){0>Aa&&(Aa=ra.length+Aa);if(Aa>=ra.length||0>Aa)throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.OutOfBounds,ha);return ra[Aa]}throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.InvalidMemberAccessKey,ha);}if(n.isImmutableArray(ra)&&n.isNumber(Aa)&&isFinite(Aa)&&Math.floor(Aa)===Aa){0>Aa&&(Aa=ra.length()+Aa);if(Aa>=ra.length()||0>Aa)throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.OutOfBounds,ha);return ra.get(Aa)}throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.InvalidMemberAccessKey,
ha);}catch(Ea){throw Ea;}}function K(ea,ha){try{var ra=G(ea,ha.argument);if(n.isBoolean(ra)){if("!"===ha.operator)return!ra;if("-"===ha.operator)return-1*n.toNumber(ra);if("+"===ha.operator)return 1*n.toNumber(ra);if("~"===ha.operator)return~n.toNumber(ra);throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.UnsupportedUnaryOperator,ha);}if("~"===ha.operator)return~n.toNumber(ra);if("-"===ha.operator)return-1*n.toNumber(ra);if("+"===ha.operator)return 1*n.toNumber(ra);throw new a.ArcadeExecutionError(ea,
a.ExecutionErrorCodes.UnsupportedUnaryOperator,ha);}catch(Aa){throw Aa;}}function Q(ea,ha){try{var ra=[G(ea,ha.left),G(ea,ha.right)],Aa=ra[0],Ea=ra[1];switch(ha.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return n.binaryOperator(n.toNumber(Aa),n.toNumber(Ea),ha.operator);case "\x3d\x3d":return n.equalityTest(Aa,Ea);case "!\x3d":return!n.equalityTest(Aa,Ea);case "\x3c":return n.greaterThanLessThan(Aa,Ea,ha.operator);case "\x3e":return n.greaterThanLessThan(Aa,
Ea,ha.operator);case "\x3c\x3d":return n.greaterThanLessThan(Aa,Ea,ha.operator);case "\x3e\x3d":return n.greaterThanLessThan(Aa,Ea,ha.operator);case "+":return n.isString(Aa)||n.isString(Ea)?n.toString(Aa)+n.toString(Ea):n.toNumber(Aa)+n.toNumber(Ea);case "-":return n.toNumber(Aa)-n.toNumber(Ea);case "*":return n.toNumber(Aa)*n.toNumber(Ea);case "/":return n.toNumber(Aa)/n.toNumber(Ea);case "%":return n.toNumber(Aa)%n.toNumber(Ea);default:throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.UnsupportedOperator,
ha);}}catch(va){throw va;}}function P(ea,ha){try{var ra=G(ea,ha.left);if(n.isBoolean(ra))switch(ha.operator){case "||":if(!0===ra)return ra;var Aa=G(ea,ha.right);if(n.isBoolean(Aa))return Aa;throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.LogicExpressionOrAnd,ha);case "\x26\x26":if(!1===ra)return ra;Aa=G(ea,ha.right);if(n.isBoolean(Aa))return Aa;throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.LogicExpressionOrAnd,ha);default:throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.LogicExpressionOrAnd,
ha);}throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,ha);}catch(Ea){throw Ea;}}function I(ea,ha){try{var ra=ha.name.toLowerCase();if(null!=ea.localScope&&void 0!==ea.localScope[ra]){var Aa=ea.localScope[ra];if(!0===Aa.valueset)return Aa.value;Aa.value=G(ea,Aa.node);Aa.valueset=!0;return Aa.value}if(void 0!==ea.globalScope[ra]){Aa=ea.globalScope[ra];if(!0===Aa.valueset)return Aa.value;Aa.value=G(ea,Aa.node);Aa.valueset=!0;return Aa.value}throw new a.ArcadeExecutionError(ea,
a.ExecutionErrorCodes.InvalidIdentifier,ha);}catch(Ea){throw Ea;}}function N(ea,ha,ra,Aa){try{var Ea=G(ea,ha.arguments[ra]);if(n.equalityTest(Ea,Aa))return G(ea,ha.arguments[ra+1]);var va=ha.arguments.length-ra;return 1===va?G(ea,ha.arguments[ra]):2===va?null:3===va?G(ea,ha.arguments[ra+2]):N(ea,ha,ra+2,Aa)}catch(Ga){throw Ga;}}function L(ea,ha,ra,Aa){try{if(!0===Aa)return G(ea,ha.arguments[ra+1]);if(3===ha.arguments.length-ra)return G(ea,ha.arguments[ra+2]);var Ea=G(ea,ha.arguments[ra+2]);if(!1===
n.isBoolean(Ea))throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.BooleanConditionRequired,ha.arguments[ra+2]);return L(ea,ha,ra+2,Ea)}catch(va){throw va;}}function W(ea,ha,ra,Aa){try{var Ea=ea.body;if(ra.length!==ea.params.length)throw new a.ArcadeExecutionError(ha,a.ExecutionErrorCodes.WrongNumberOfParameters,Aa);if(null!=ha.localScope)for(var va=0;va<ra.length;va++)ha.localScope[ea.params[va].name.toLowerCase()]={value:ra[va],valueset:!0,node:null};var Ga=G(ha,Ea);if(Ga instanceof n.ReturnResult)return Ga.value;
if(Ga===n.breakResult)throw new a.ArcadeExecutionError(ha,a.ExecutionErrorCodes.UnexpectedToken,Aa);if(Ga===n.continueResult)throw new a.ArcadeExecutionError(ha,a.ExecutionErrorCodes.UnexpectedToken,Aa);return Ga instanceof n.ImplicitResult?Ga.value:Ga}catch(ca){throw ca;}}function Z(ea,ha,ra){var Aa=new fa;ea||(ea={});ha||(ha={});var Ea=new m({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});Ea.immutable=!1;Aa.textformatting={value:Ea,valueset:!0,node:null};
for(var va in ha)Aa[va]={value:new q.NativeFunction(ha[va]),native:!0,valueset:!0,node:null};for(va in ea)Aa[va]=ea[va]&&"esri.Graphic"===ea[va].declaredClass?{value:h.createFromGraphic(ea[va],ra),valueset:!0,node:null}:{value:ea[va],valueset:!0,node:null};return Aa}function aa(ea){}function ia(ea){for(var ha={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:A,evaluateIdentifier:I},ra=0;ra<ea.length;ra++)ea[ra].registerFunctions(ha);for(var Aa in ha.functions)M[Aa]={value:new q.NativeFunction(ha.functions[Aa]),
valueset:!0,node:null},fa.prototype[Aa]=M[Aa];for(ra=0;ra<ha.signatures.length;ra++)k.addFunctionDeclaration(ha.signatures[ra],"sync")}Object.defineProperty(B,"__esModule",{value:!0});B.executeScript=B.extend=B.functionHelper=void 0;var R=function(ea){function ha(ra,Aa){var Ea=ea.call(this)||this;Ea.definition=null;Ea.context=null;Ea.definition=ra;Ea.context=Aa;return Ea}t(ha,ea);ha.prototype.createFunction=function(ra){var Aa=this;return function(){for(var Ea=[],va=0;va<arguments.length;va++)Ea[va]=
arguments[va];va={spatialReference:Aa.context.spatialReference,console:Aa.context.console,timeReference:Aa.context.timeReference?Aa.context.timeReference:null,lrucache:Aa.context.lrucache,exports:Aa.context.exports,libraryResolver:Aa.context.libraryResolver,interceptor:Aa.context.interceptor,localScope:{},depthCounter:{depth:ra.depthCounter.depth+1},globalScope:Aa.context.globalScope};if(64<va.depthCounter.depth)throw new a.ArcadeExecutionError(ra,a.ExecutionErrorCodes.MaximumCallDepth,null);return W(Aa.definition,
va,Ea,null)}};ha.prototype.call=function(ra,Aa){var Ea=this;return A(ra,Aa,function(va,Ga,ca){var ja;va={spatialReference:ra.spatialReference,globalScope:ra.globalScope,depthCounter:{depth:ra.depthCounter.depth+1},libraryResolver:ra.libraryResolver,exports:ra.exports,timeReference:null!==(ja=ra.timeReference)&&void 0!==ja?ja:null,console:ra.console,lrucache:ra.lrucache,interceptor:ra.interceptor,localScope:{}};if(64<va.depthCounter.depth)throw new a.ArcadeExecutionError(ra,a.ExecutionErrorCodes.MaximumCallDepth,
Aa);return W(Ea.definition,va,ca,Aa)})};ha.prototype.marshalledCall=function(ra,Aa,Ea,va){var Ga=this;return va(ra,Aa,function(ca,ja,wa){var za;ca={spatialReference:ra.spatialReference,globalScope:Ea.globalScope,depthCounter:{depth:ra.depthCounter.depth+1},libraryResolver:ra.libraryResolver,exports:ra.exports,console:ra.console,timeReference:null!==(za=ra.timeReference)&&void 0!==za?za:null,lrucache:ra.lrucache,interceptor:ra.interceptor,localScope:{}};wa=wa.map(function(Fa){return!n.isFunctionParameter(Fa)||
Fa instanceof q.ScopeMarshalledFunction?Fa:q.wrapModuleScopedResponse(Fa,ra,va)});return q.wrapModuleScopedResponse(W(Ga.definition,ca,wa,Aa),Ea,va)})};return ha}(q.ArcadeFunction),S=function(ea){function ha(ra){return ea.call(this,ra)||this}t(ha,ea);ha.prototype.global=function(ra){ra=this.executingContext.globalScope[ra.toLowerCase()];ra.valueset||(ra.value=G(this.executingContext,ra.node),ra.valueset=!0);if(n.isFunctionParameter(ra.value)&&!(ra.value instanceof q.ScopeMarshalledFunction)){var Aa=
new q.ScopeMarshalledFunction;Aa.fn=ra.value;Aa.parameterEvaluator=A;Aa.context=this.executingContext;ra.value=Aa}return ra.value};ha.prototype.setGlobal=function(ra,Aa){if(n.isFunctionParameter(Aa))throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.AssignModuleFunction,null);this.executingContext.globalScope[ra.toLowerCase()]={value:Aa,valueset:!0,node:null}};ha.prototype.hasGlobal=function(ra){void 0===this.executingContext.exports[ra]&&(ra=ra.toLowerCase());return void 0!==this.executingContext.exports[ra]?
!0:!1};ha.prototype.loadModule=function(ra){var Aa,Ea=ra.spatialReference;if(null===Ea||void 0===Ea)Ea=new z({wkid:102100});this.moduleScope=Z({},ra.customfunctions,ra.timeReference);this.executingContext={spatialReference:Ea,globalScope:this.moduleScope,localScope:null,libraryResolver:new r.ArcadeModuleLoader(ra.libraryResolver._moduleSingletons,this.source.syntax.loadedModules),exports:{},console:ra.console?ra.console:aa,timeReference:null!==(Aa=ra.timeReference)&&void 0!==Aa?Aa:null,lrucache:ra.lrucache,
interceptor:ra.interceptor,depthCounter:{depth:1}};G(this.executingContext,this.source.syntax)};return ha}(e.ArcadeModule),M={};b.registerFunctions(M,A);E.registerFunctions(M,A);y.registerFunctions(M,A);x.registerFunctions(M,A);D.registerFunctions(M,A);v.registerFunctions(M,A);M.iif=function(ea,ha){try{n.pcCheck(null===ha.arguments?[]:ha.arguments,3,3,ea,ha);var ra=G(ea,ha.arguments[0]);if(!1===n.isBoolean(ra))throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.BooleanConditionRequired,ha);
return!0===ra?G(ea,ha.arguments[1]):G(ea,ha.arguments[2])}catch(Aa){throw Aa;}};M.decode=function(ea,ha){try{if(2>ha.arguments.length)throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.WrongNumberOfParameters,ha);if(2===ha.arguments.length)return G(ea,ha.arguments[1]);if(0===(ha.arguments.length-1)%2)throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.WrongNumberOfParameters,ha);var ra=G(ea,ha.arguments[0]);return N(ea,ha,1,ra)}catch(Aa){throw Aa;}};M.when=function(ea,ha){try{if(3>ha.arguments.length)throw new a.ArcadeExecutionError(ea,
a.ExecutionErrorCodes.WrongNumberOfParameters,ha);if(0===ha.arguments.length%2)throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.WrongNumberOfParameters,ha);var ra=G(ea,ha.arguments[0]);if(!1===n.isBoolean(ra))throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.BooleanConditionRequired,ha.arguments[0]);return L(ea,ha,0,ra)}catch(Aa){throw Aa;}};for(var X in M)M[X]={value:new q.NativeFunction(M[X]),valueset:!0,node:null};var fa=function(){};fa.prototype=M;fa.prototype.infinity={value:Number.POSITIVE_INFINITY,
valueset:!0,node:null};fa.prototype.pi={value:Math.PI,valueset:!0,node:null};B.functionHelper={fixSpatialReference:n.fixSpatialReference,parseArguments:w,standardFunction:A};B.extend=ia;ia([g]);B.executeScript=function(ea,ha){var ra,Aa=ha.spatialReference;if(null===Aa||void 0===Aa)Aa=new z({wkid:102100});var Ea=null;ea.usesModules&&(Ea=new r.ArcadeModuleLoader(new Map,ea.loadedModules));var va=Z(ha.vars,ha.customfunctions,ha.timeReference);Aa={spatialReference:Aa,globalScope:va,localScope:null,exports:{},
libraryResolver:Ea,console:ha.console?ha.console:aa,timeReference:null!==(ra=ha.timeReference)&&void 0!==ra?ra:null,lrucache:ha.lrucache,interceptor:ha.interceptor,depthCounter:{depth:1}};ea=G(Aa,ea);ea instanceof n.ReturnResult&&(ea=ea.value);ea instanceof n.ImplicitResult&&(ea=ea.value);ea===n.voidOperation&&(ea=null);if(ea===n.breakResult)throw new a.ArcadeExecutionError(Aa,a.ExecutionErrorCodes.IllegalResult,null);if(ea===n.continueResult)throw new a.ArcadeExecutionError(Aa,a.ExecutionErrorCodes.IllegalResult,
null);if(n.isFunctionParameter(ea))throw new a.ArcadeExecutionError(Aa,a.ExecutionErrorCodes.IllegalResult,null);return ea}})},"esri/arcadeProfiles/visualizationProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../support/expressionUtils ./utils".split(" "),function(f,B,l,d,c,u,t){f=new (f(null,{declaredClass:"esri.arcadeProfiles.VisualizationProfile",initialize:function(e){var r=[];t.hasGeometryOperations(e)&&r.push(u.enableGeometryOperations());return c(r)}}));
B.setObject("arcadeProfiles.visualizationProfile",f,d);return f})},"esri/arcadeProfiles/utils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","../kernel","../support/expressionUtils"],function(f,B,l,d,c){var u=/(\/(MapServer|FeatureServer)).*/ig;l={hasGeometryOperations:function(t){return B.some(t,function(e){return e.hasGeometryOperations?e.hasGeometryOperations():c.hasGeometryOperations(e)})},hasFeatureSetOperations:function(t){return B.some(t,function(e){return e.hasFeatureSetOperations?
e.hasFeatureSetOperations():c.hasFeatureSetOperations(e)})},hasVariables:function(t,e){return B.some(t,function(r){return B.some(e,function(m){return r.hasVariable?r.hasVariable(m):c.hasVariable(r,m)})})},isAsync:function(t){return B.some(t,function(e){return e.async})},getServiceUrl:function(t){return u.test(t)?t.replace(u,"$1"):null}};f.setObject("arcadeProfiles.utils",l,d);return l})},"esri/renderers/UniqueValueRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),
function(f,B,l,d,c,u,t,e,r){f=f(e,{declaredClass:"esri.renderer.UniqueValueRenderer",constructor:function(m,a,h,q,n,k){this.values=[];this._symbols={};this.infos=[];m&&!m.declaredClass?(a=m,h=k&&k.geometryType,this.defaultSymbol=(m=a.defaultSymbol)&&(m.declaredClass?m:t.fromJson(m,k)),this.attributeField=a.field1,this.attributeField2=a.field2,this.attributeField3=a.field3,this.fieldDelimiter=a.fieldDelimiter,this.defaultLabel=a.defaultLabel,this.setValueExpression(a.valueExpression),this.valueExpressionTitle=
a.valueExpressionTitle,this.legendOptions=a.legendOptions,a.backgroundFillSymbol&&(this.backgroundFillSymbol=t.fromJson(a.backgroundFillSymbol,h?{geometryType:"esriGeometryPolygon"}:null)),"esriGeometryPolygon"===h&&this.hasVisualVariables("sizeInfo",!1)&&(k={geometryType:"esriGeometryPoint"}),B.forEach(a.uniqueValueInfos,function(g){this._addValueInfo(g,k)},this)):(this.defaultSymbol=m,this.attributeField=a,this.attributeField2=h,this.attributeField3=q,this.fieldDelimiter=n);this._multiple=!!this.attributeField2},
addValue:function(m,a){m=l.isObject(m)?m:{value:m,symbol:a};this._addValueInfo(m)},removeValue:function(m){var a=B.indexOf(this.values,m);-1!==a&&(this.values.splice(a,1),this._hasNullKeyword=this._evalNullKeyword(this.values),delete this._symbols[m],this.infos.splice(a,1))},getUniqueValueInfo:function(m){var a=this.attributeField,h=m.attributes;if(this.valueExpression)a=this._getDataValue(m,this._uvInfo,null,this._cache.uvInfo),a=this._normalizeNullValue(a);else if(this._multiple){m=this.attributeField2;
var q=this.attributeField3,n=[];a&&n.push(this._normalizeNullValue(h[a]));m&&n.push(this._normalizeNullValue(h[m]));q&&n.push(this._normalizeNullValue(h[q]));a=n.join(this.fieldDelimiter||"")}else a=l.isFunction(a)?a(m):h[a],a=this._normalizeNullValue(a);return this._symbols[a]},setValueExpression:function(m){this.valueExpression=m;this._uvInfo={valueExpression:m};this._cache.uvInfo=this._createCache(this._uvInfo,!0)},getFieldsUsedInExpressions:function(m){var a=this.inherited(arguments);this.valueExpression&&
(a=a.concat(r.extractFieldNames(this.valueExpression,m)));a.sort();return B.filter(a,function(h,q){return 0===q||a[q-1]!==h})},getSymbol:function(m){return(m=this.getUniqueValueInfo(m))&&m.symbol||this.defaultSymbol},_addValueInfo:function(m,a){var h=m.value;this.values.push(h);this._hasNullKeyword=this._evalNullKeyword(this.values);this.infos.push(m);var q=m.symbol;q&&!q.declaredClass&&(m.symbol=t.fromJson(q,a));this._symbols[h]=m},_nullCode:"\x3cNull\x3e",_normalizeNullValue:function(m){return this._hasNullKeyword&&
null==m?this._nullCode:m},_evalNullKeyword:function(m){var a=this.fieldDelimiter||"",h=new RegExp("(^|"+a+")("+this._nullCode+")("+a+"|$)");return B.some(m,function(q){return h.test(q)})},toJson:function(){var m=u.fixJson;var a={type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:l.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&
this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:B.map(this.infos||[],function(h){h=l.mixin({},h);h.symbol=h.symbol&&h.symbol.toJson();h.value+="";return m(h)})};this.backgroundFillSymbol&&(a.backgroundFillSymbol=this.backgroundFillSymbol.toJson());a=l.mixin(this.inherited(arguments),a);return m(a)}});l.setObject("renderer.UniqueValueRenderer",f,c);return f})},"esri/renderers/jsonUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../Color ../symbols/jsonUtils ./SimpleRenderer ./UniqueValueRenderer ./ClassBreaksRenderer ./VectorFieldRenderer ./DotDensityRenderer ./ScaleDependentRenderer ./TimeClassBreaksAger ./TimeRampAger ./TemporalRenderer ./HeatmapRenderer ./StretchRenderer ./ShadedReliefRenderer ./ColormapRenderer".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y){var D={createDefaultRenderer:function(E){E=t.createDefaultSymbol(E);return new e(E)},fromJson:function(E,C){switch(E.type||""){case "simple":E=new e(E,C);break;case "uniqueValue":E=new r(E,null,null,null,null,C);break;case "classBreaks":E=new m(E,null,C);break;case "vectorField":E=new a(E);break;case "scaleDependent":E=this._scaleDependentFromJson(E);break;case "dotDensity":E=E.attributes?D.createDefaultRenderer("esriGeometryPolygon"):this._dotDensityFromJson(E);
break;case "temporal":E=this._temporalFromJson(E,C);break;case "heatmap":E=this._heatmapFromJson(E);break;case "rasterStretch":E=new x(E);break;case "rasterShadedRelief":E=new v(E);break;case "rasterColormap":E=new y(E);break;default:E=(E=C&&C.geometryType)?D.createDefaultRenderer(E):null}return E},_scaleDependentFromJson:function(E){var C={},z=E.minScale;C.rendererInfos=f.map(E.rendererInfos,function(w){var A=w.maxScale;w={minScale:z,maxScale:A,renderer:w.renderer&&this.fromJson(w.renderer)};z=A;
return w},this);return new q(C)},_dotDensityFromJson:function(E){E.backgroundColor&&B.isArray(E.backgroundColor)&&(E.backgroundColor=u.toDojoColor(E.backgroundColor));0<E.dotSize&&(E.dotSize=d.pt2px(E.dotSize));E.fields&&f.forEach(E.fields,function(C){C&&B.isArray(C.color)&&(C.color=u.toDojoColor(C.color))});E.legendOptions&&(E.legendOptions.backgroundColor&&B.isArray(E.legendOptions.backgroundColor)&&(E.legendOptions.backgroundColor=u.toDojoColor(E.legendOptions.backgroundColor)),E.legendOptions.outline&&
(E.legendOptions.outline=t.fromJson(E.legendOptions.outline)));E.outline&&(E.outline=t.fromJson(E.outline));return new h(E)},_temporalFromJson:function(E,C){var z=C&&C.geometryType;E=E||{};var w=this.fromJson(E.observationRenderer,C);C=E.latestObservationRenderer?this.fromJson(E.latestObservationRenderer,C):null;z=E.trackRenderer?this.fromJson(E.trackRenderer,z?{geometryType:"esriGeometryPolyline"}:null):null;E=this._agerFromJson(E.observationAger);return new g(w,C,z,E)},_agerFromJson:function(E){var C;
E=E||{};E.colorRange||E.sizeRange||E.alphaRange?C=this._timeRampFromJson(E):E.agerClassBreakInfos&&(C=this._timeClassBreaksFromJson(E));return C},_timeRampFromJson:function(E){var C,z,w;E.colorRange&&1<E.colorRange.length&&(C=[u.toDojoColor(E.colorRange[0]),u.toDojoColor(E.colorRange[1])]);E.sizeRange&&1<E.sizeRange.length&&(z=[E.sizeRange[0],E.sizeRange[1]]);E.alphaRange&&1<E.alphaRange.length&&(w=[E.alphaRange[0]/255,E.alphaRange[1]/255]);return new k(C,z,w)},_timeClassBreaksFromJson:function(E){var C=
E.agerClassBreakInfos,z=[],w;var A=n.UNIT_DAYS;switch(E.timeUnits){case "esriTimeUnitsSeconds":A=n.UNIT_SECONDS;break;case "esriTimeUnitsMilliseconds":A=n.UNIT_MILLISECONDS;break;case "esriTimeUnitsHours":A=n.UNIT_HOURS;break;case "esriTimeUnitsMinutes":A=n.UNIT_MINUTES;break;case "esriTimeUnitsMonths":A=n.UNIT_MONTHS;break;case "esriTimeUnitsWeeks":A=n.UNIT_WEEKS;break;case "esriTimeUnitsYears":A=n.UNIT_YEARS}for(w=0;w<C.length;w+=1){E=C[w];var G={minAge:0,maxAge:E.oldestAge||Infinity};E.color&&
(G.color=u.toDojoColor(E.color));E.alpha&&(G.alpha=E.alpha/255);G.size=E.size;z[w]=G}return new n(z,A)},_heatmapFromJson:function(E){var C=E.colorStops;C&&C instanceof Array&&f.forEach(C,function(z){z.color=u.toDojoColor(z.color)});return new b(E)}};B.mixin(B.getObject("renderer",!0,c),D);return D})},"esri/renderers/ClassBreaksRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),
function(f,B,l,d,c,u,t,e,r){f=f(e,{declaredClass:"esri.renderer.ClassBreaksRenderer",constructor:function(m,a,h){this.breaks=[];this._symbols={};this.infos=[];this.isMaxInclusive=!0;if(m&&!m.declaredClass){var q=m;a=h&&h.geometryType;this.attributeField=q.field;this.setValueExpression(q.valueExpression);this.valueExpressionTitle=q.valueExpressionTitle;this.legendOptions=q.legendOptions;this.defaultSymbol=(m=q.defaultSymbol)&&(m.declaredClass?m:t.fromJson(m,h));this.backgroundFillSymbol=(m=q.backgroundFillSymbol)&&
(m.declaredClass?m:t.fromJson(m,a?{geometryType:"esriGeometryPolygon"}:null));this._copy(["defaultLabel","classificationMethod:rest","normalizationType:rest","normalizationField","normalizationTotal"],q,this);var n=q.minValue;(m=q.classBreakInfos)&&m[0]&&u.isDefined(m[0].classMaxValue)&&B.forEach(m,function(k){var g=k.classMaxValue;k.minValue=n;n=k.maxValue=g},this);"esriGeometryPolygon"===a&&(this.hasVisualVariables("sizeInfo",!1)||t.isPointSymbol(t.getFirstSupportedSymbol(B.map(m,function(k){return k.symbol}))))&&
(h={geometryType:"esriGeometryPoint"});B.forEach(m,function(k){this._addBreakInfo(k,h)},this)}else this.defaultSymbol=m,this.attributeField=a},addBreak:function(m,a,h){m=l.isObject(m)?m:{minValue:m,maxValue:a,symbol:h};this._addBreakInfo(m)},removeBreak:function(m,a){var h=this.breaks,q,n=h.length,k=this._symbols;for(q=0;q<n;q++){var g=h[q];if(g[0]==m&&g[1]==a){h.splice(q,1);delete k[m+"-"+a];this.infos.splice(q,1);break}}},clearBreaks:function(){this.breaks=[];this._symbols={};this.infos=[]},getBreakIndex:function(m){var a=
this.attributeField,h=m.attributes,q=this.breaks,n=q.length,k=this.isMaxInclusive;if(this.valueExpression)m=this._getDataValue(m,this._cbInfo,null,this._cache.cbInfo);else if(l.isFunction(a))m=a(m);else if(m=parseFloat(h[a]),a=this.normalizationType,a){var g=parseFloat(this.normalizationTotal);h=parseFloat(h[this.normalizationField]);if("log"===a)m=Math.log(m)*Math.LOG10E;else if("percent-of-total"===a&&!isNaN(g))m=m/g*100;else if("field"===a){if(isNaN(m)||isNaN(h))return-1;m/=h}}if(null!=m&&!isNaN(m)&&
"number"===typeof m)for(h=0;h<n;h++)if(a=q[h],a[0]<=m&&(k?m<=a[1]:m<a[1]))return h;return-1},getBreakInfo:function(m){m=this.getBreakIndex(m);return-1!==m?this.infos[m]:null},getSymbol:function(m){return(m=this.breaks[this.getBreakIndex(m)])?this._symbols[m[0]+"-"+m[1]]:this.defaultSymbol},setMaxInclusive:function(m){this.isMaxInclusive=m},setValueExpression:function(m){this.valueExpression=m;this._cbInfo={valueExpression:m};this._cache.cbInfo=this._createCache(this._cbInfo)},getFieldsUsedInExpressions:function(m){var a=
this.inherited(arguments);this.valueExpression&&(a=a.concat(r.extractFieldNames(this.valueExpression,m)));a.sort();return B.filter(a,function(h,q){return 0===q||a[q-1]!==h})},isContinuousRenderer:function(){var m=!1;if(this.infos&&1===this.infos.length){var a=this.attributeField,h=this.normalizationField,q=this.valueExpression;m=this.getVisualVariablesForType("colorInfo",!1)||[];var n=this.getVisualVariablesForType("sizeInfo",!1)||[],k=this.getVisualVariablesForType("opacityInfo",!1)||[];m=m.concat(n).concat(k);
m=B.some(m,function(g){return(g.field===a||g.valueExpression===q)&&g.normalizationField==h})}return m},_normalizationTypeEnums:[["field","esriNormalizeByField"],["log","esriNormalizeByLog"],["percent-of-total","esriNormalizeByPercentOfTotal"]],_classificationMethodEnums:[["natural-breaks","esriClassifyNaturalBreaks"],["equal-interval","esriClassifyEqualInterval"],["quantile","esriClassifyQuantile"],["standard-deviation","esriClassifyStandardDeviation"],["geometrical-interval","esriClassifyGeometricalInterval"],
["defined-interval","esriClassifyDefinedInterval"],["manual-interval","esriClassifyManual"]],_copy:function(m,a,h){B.forEach(m,function(q){var n=q.split(":");if(1<n.length){q=n[0];var k=this["_"+q+"Enums"];if("rest"===n[1]){var g="1";var b="0"}else"sdk"===n[1]&&(g="0",b="1")}n=a[q];if(void 0!==n&&(h[q]=n,k&&g)){var x,v=k.length;for(x=0;x<v;x++)if(k[x][g]===n){h[q]=k[x][b];break}}},this)},_addBreakInfo:function(m,a){var h=m.minValue,q=m.maxValue;this.breaks.push([h,q]);this.infos.push(m);var n=m.symbol;
n&&!n.declaredClass&&(m.symbol=t.fromJson(n,a));this._symbols[h+"-"+q]=m.symbol},toJson:function(){var m=this.infos||[],a=u.fixJson,h=m[0]&&m[0].minValue,q=this.backgroundFillSymbol;m=l.mixin(this.inherited(arguments),{type:"classBreaks",field:this.attributeField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:l.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),backgroundFillSymbol:q&&q.toJson(),minValue:-Infinity===
h?-Number.MAX_VALUE:h,classBreakInfos:B.map(m,function(n){n=l.mixin({},n);n.symbol=n.symbol&&n.symbol.toJson();n.classMaxValue=Infinity===n.maxValue?Number.MAX_VALUE:n.maxValue;delete n.minValue;delete n.maxValue;return a(n)})});this._copy(["defaultLabel","classificationMethod:sdk","normalizationType:sdk","normalizationField","normalizationTotal"],this,m);m.hasOwnProperty("normalizationType")&&!m.normalizationType&&delete m.normalizationType;m.hasOwnProperty("classificationMethod")&&!m.classificationMethod&&
delete m.classificationMethod;return a(m)}});l.setObject("renderer.ClassBreaksRenderer",f,c);return f})},"esri/renderers/VectorFieldRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/_base/array ../kernel ../lang ../Color ./Renderer ./ClassBreaksRenderer ../symbols/SimpleMarkerSymbol ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/jsonUtils require".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h,q,n){var k={STYLE_WIND_BARBS:"wind_speed",STYLE_SINGLE_ARROW:"single_arrow",
STYLE_CLASSIFIED_ARROW:"classified_arrow",STYLE_BEAUFORT_KN:"beaufort_kn",STYLE_BEAUFORT_METER:"beaufort_m",STYLE_BEAUFORT_MILE:"beaufort_mi",STYLE_BEAUFORT_FEET:"beaufort_ft",STYLE_BEAUFORT_KM:"beaufort_km",STYLE_OCEAN_CURRENT_M:"ocean_current_m",STYLE_OCEAN_CURRENT_KN:"ocean_current_kn",STYLE_SCALAR:"simple_scalar"},g=f(e,{declaredClass:"esri.renderer.VectorFieldRenderer",iconFolderPath:"../images/symbol/sfs/",constructor:function(b){u.isDefined(b)||(b={});b.attributeField=b.attributeField||"Magnitude";
b.rotationInfo=b.rotationInfo||this._getRotationInfo(b);f.safeMixin(this,b);this.setRotationInfo(this.rotationInfo);this.style=this.style||g.STYLE_SINGLE_ARROW;this.singleArrowSymbol&&(this.singleArrowSymbol=this.singleArrowSymbol.declaredClass?this.singleArrowSymbol:q.fromJson(this.singleArrowSymbol));this.renderer=new r(this._getDefaultSymbol(),b.attributeField);this._updateRenderer(this.style);this.flowRepresentation=this.flowRepresentation||this.FLOW_FROM},getSymbol:function(b){return this.renderer&&
this.renderer.getSymbol(b)},setVisualVariables:function(b){b=d.filter(b,function(x){if("sizeInfo"===x.type)return u.isDefined(this._updateSizeInfo(x))},this);this.inherited(arguments);return this},setSizeInfo:function(b){this._updateSizeInfo(b);this.inherited(arguments);return this},setProportionalSymbolInfo:function(b){this.setSizeInfo(b);return this},setColorInfo:function(b){return this},_updateRenderer:function(b){return u.isDefined(this.renderer)?b===g.STYLE_SINGLE_ARROW?this._createSingleArrowRenderer():
b===g.STYLE_BEAUFORT_KN?this._createBeaufortKnotsRenderer():b===g.STYLE_BEAUFORT_METER?this._createBeaufortMeterRenderer():b===g.STYLE_BEAUFORT_FEET?this._createBeaufortFeetRenderer():b===g.STYLE_BEAUFORT_MILE?this._createBeaufortMilesRenderer():b===g.STYLE_BEAUFORT_KM?this._createBeaufortKilometersRenderer():b===g.STYLE_OCEAN_CURRENT_M?this._createCurrentMeterRenderer():b===g.STYLE_OCEAN_CURRENT_KN?this._createCurrentKnotsRenderer():b===g.STYLE_SCALAR?this._createSimpleScalarRenderer():b===g.STYLE_WIND_BARBS?
this._createWindBarbsRenderer():this._createClassifiedArrowRenderer():Error("Invalid Renderer!")},_updateSizeInfo:function(b){return b&&u.isDefined(b.minSize)&&u.isDefined(b.maxSize)&&u.isDefined(b.minDataValue)&&u.isDefined(b.maxDataValue)?(this.style===g.STYLE_WIND_BARBS&&(b.minSize=b.maxSize),b.field=b.field||"Magnitude",b.type="sizeInfo",this.minDataValue=b.minDataValue,this.maxDataValue=b.maxDataValue,b):null},_createClassifiedArrowRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new t([56,
168,0]));var b=[0,1E-6,3.5,7,10.5,14];if(u.isDefined(this.minDataValue)&&u.isDefined(this.maxDataValue)){var x=(this.maxDataValue-this.minDataValue)/5;b=[];var v;var y=this.minDataValue;for(v=0;6>v;v++)b[v]=y,y+=x}this._addBreaks(b,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])},_createSingleArrowRenderer:function(){this.renderer.defaultSymbol=this.singleArrowSymbol||this._getDefaultSymbol()},_createBeaufortMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new t([214,
47,39]));this._addBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new t([214,47,39]));this._addBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,
250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]])},_createBeaufortFeetRenderer:function(){var b=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];d.forEach(b,function(x,v){b[v]*=3.28084});this.renderer.defaultSymbol=this._getDefaultSymbol(new t([214,47,39]));this._addBreaks(b,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortMilesRenderer:function(){var b=
[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];d.forEach(b,function(x,v){b[v]*=2.23694});this.renderer.defaultSymbol=this._getDefaultSymbol(new t([214,47,39]));this._addBreaks(b,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKilometersRenderer:function(){var b=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];d.forEach(b,function(x,v){b[v]*=3.6});this.renderer.defaultSymbol=
this._getDefaultSymbol(new t([214,47,39]));this._addBreaks(b,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createCurrentMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new t([177,177,177]));this._addBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]])},_createCurrentKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new t([177,
177,177]));this._addBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])},_createSimpleScalarRenderer:function(){this.renderer.defaultSymbol=new a({url:n.toUrl(this.iconFolderPath+"scalar.png"),height:20,width:20,type:"esriPMS",angle:0})},_createWindBarbsRenderer:function(){var b=[],x;for(x=0;150>=x;x+=5)b.push(x);var v="M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20;M25 0 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40;M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35;M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15 M25 10 M25 5 L17.5 7.5".split(";");
var y=new a({url:n.toUrl(this.iconFolderPath+"windbarb.png"),height:20,width:20,type:"esriPMS",angle:0});this.renderer.defaultSymbol=y;for(x=0;x<b.length-1;x++)0===x?this.renderer.addBreak({minValue:b[x],maxValue:b[x+1],symbol:y}):this.renderer.addBreak({minValue:b[x],maxValue:b[x+1],symbol:(new m).setPath(v[x]).setOutline((new h).setWidth(1.5)).setSize(20).setColor(new t([0,0,0,255]))})},_getDefaultSymbol:function(b){return(new m).setPath("M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z").setOutline((new h).setWidth(0)).setSize(20).setColor(b||
new t([0,92,230]))},_getRotationInfo:function(b){var x=b&&b.rotationField||"Direction",v=(b&&b.flowRepresentation||g.FLOW_FROM)===g.FLOW_FROM;!b.style||b.style!==k.STYLE_OCEAN_CURRENT_KN&&b.style!==k.STYLE_OCEAN_CURRENT_M||(v=!v);return{field:function(y){y=y.attributes[x];return v?y:y+180},type:"geographic"}},_addBreaks:function(b,x){if(!u.isDefined(this.renderer))return Error("Invalid Renderer!");if(!(b&&x&&b.length&&x.length&&b.length>=x.length))return Error("AddBreaks: Input arguments break values and colors not valid");
var v;for(v=0;v<x.length;v++)this.renderer.addBreak({minValue:b[v],maxValue:b[v+1],symbol:this._getDefaultSymbol(new t(x[v]))})},toJson:function(){var b=B.mixin(this.inherited(arguments),{type:"vectorField",style:this.style,attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,symbolTileSize:this.symbolTileSize,inputUnit:this.inputUnit,outputUnit:this.outputUnit});this.renderer&&this.renderer.defaultSymbol&&this.style===g.STYLE_SINGLE_ARROW&&(b.singleArrowSymbol=this.renderer.defaultSymbol.toJson());
return u.fixJson(b)}});B.mixin(g,k,{FLOW_FROM:"flow_from",FLOW_TO:"flow_to"});B.setObject("renderer.VectorFieldRenderer",g,c);return g})},"esri/renderers/DotDensityRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Renderer ../symbols/PictureFillSymbol ../geometry/ScreenPoint ../geometry/Point".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h,q){f=f(m,{declaredClass:"esri.renderer.DotDensityRenderer",
constructor:function(n){this.dotSize=n.dotSize||3;this.dotValue=n.dotValue;this.fields=n.fields;this.outline=n.outline;this.backgroundColor=n.backgroundColor;this.exactCount=n.exactCount||!0;this.dotShape=n.dotShape||"square";this.legendOptions=n.legendOptions;this._exactCountMinArea=1E4;this._currentMapScale=this._map=this._canvas=null;this._symbolMap={};this._currentGraphic=this._currentResolution=this._objectIdField=null;this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1},getSymbol:function(n){this._currentGraphic=
n;if(!this._supportsCanvas)return null;this._map||(this._map=n.getLayer()._map,this._objectIdField=n.getLayer().objectIdField,this._currentMapScale=this._map.getScale(),this._currentResolution=this._map.extent.getWidth()/this._map.width,this._map.on("zoom-end",B.hitch(this,function(b){this._currentMapScale=this._map.getScale();this._currentResolution=b.extent.getWidth()/this._map.width;this._symbolMap[this._currentMapScale]={}})));if(this._symbolMap[this._currentMapScale]&&this._symbolMap[this._currentMapScale][n.attributes[this._objectIdField]]){var k=
this._symbolMap[this._currentMapScale][n.attributes[this._objectIdField]];var g=this._getShapeProperties(n);k.setOffset(g.dx,g.dy);return k}k=this._generateFieldsCount(this.fields,n.attributes,this.dotValue);g=this._getShapeProperties(n);if(!g.width||!g.height)return null;k=new a(this._generateImageSrc(g.width,g.height,k,g.minXY,g.maxXY),this.outline,g.width,g.height);k.setOffset(g.dx,g.dy);this._symbolMap[this._currentMapScale]||(this._symbolMap[this._currentMapScale]={});return this._symbolMap[this._currentMapScale][n.attributes[this._objectIdField]]=
k},_generateFieldsCount:function(n,k,g){var b;for(b=n.length-1;0<=b;b--){var x=k[n[b].name]/g;n[b].numPoints=Math.round(x)}return n},_getShapeProperties:function(n){var k=n.geometry.getExtent();k.contains(this._map.extent)&&(k=this._map.extent);var g=Math.ceil(k.getWidth()/this._currentResolution);var b=Math.ceil(k.getHeight()/this._currentResolution);var x=this._map.toScreen(new q(k.xmin,k.ymin,k.spatialReference));k=this._map.toScreen(new q(k.xmax,k.ymax,k.spatialReference));n=n.getLayer().getNavigationTransform();
return{minXY:x,maxXY:k,dx:(x.x-n.dx)%g,dy:(k.y-n.dy)%b,width:g,height:b}},_generateImageSrc:function(n,k,g,b,x,v){var y=this.dotSize,D;this._canvas?(this._canvas.width=n,this._canvas.height=k):this._canvas=this._initCanvas(n,k);var E=this._canvas.getContext("2d");if(v=v||this.backgroundColor)E.fillStyle=v.toCss(!0),E.fillRect(0,0,n,k),E.fill();for(v=g.length-1;0<=v;v--)for(E.fillStyle=g[v].color.toCss(!0),D=g[v].numPoints-1;0<=D;D--){var C=this._getRandomPoint(n,k,b,x);"square"===this.dotShape?E.fillRect(C.x,
C.y,y,y):"circle"===this.dotShape&&(E.beginPath(),E.arc(C.x,C.y,y/2,0,2*Math.PI,!0));E.fill()}return this._canvas.toDataURL()},_initCanvas:function(n,k){n=d.create("canvas",{id:"canvas",width:n+"px",height:k+"px",style:"position: absolute; left: -10000px; top: 0px;"},null);document.body.appendChild(n);return n},_getRandomInt:function(n,k){return Math.floor(Math.random()*(k-n+1)+n)},_getRandomPoint:function(n,k,g,b){var x={},v=this.outline&&this.outline.width?this.outline.width:0;if(!0===this.exactCount&&
n*k>this._exactCountMinArea){n=!1;do x.x=this._getRandomInt(g.x,b.x),x.y=this._getRandomInt(b.y,g.y),n=new h(x.x,x.y),n=this._checkPointShapeBounds(n,this.dotSize+v,this._currentGraphic.geometry),!0===n&&(x.x-=g.x,x.y-=b.y);while(!1===n)}else x.x=this._getRandomInt(0,n),x.y=this._getRandomInt(0,k);return x},_checkPointShapeBounds:function(n,k,g){var b=null;b=!1;var x=!0,v=0;do{switch(v){case 1:n.x+=k;break;case 2:n.y+=k;break;case 3:n.x-=k}b=this._map.toMap(n);b=g.contains(b);!1===b&&(x=!1);v+=1}while(3>=
v&&!0===x);return b},setDotSize:function(n){0<n&&(this.dotSize=n)},setDotValue:function(n){0<n&&(this.dotValue=n)},setOutline:function(n){this.outline=n},setBackgroundColor:function(n){this.backgroundColor=n},toJson:function(){var n=B.mixin(this.inherited(arguments),{type:"dotDensity",backgroundColor:r.toJsonColor(this.backgroundColor),dotShape:this.dotShape,dotSize:0<this.dotSize?u.px2pt(this.dotSize):0,dotValue:this.dotValue,fields:l.map(this.fields,function(k){return e.fixJson({color:r.toJsonColor(k.color),
name:k.name})}),legendOptions:this.legendOptions&&e.fixJson({backgroundColor:r.toJsonColor(this.legendOptions.backgroundColor),dotCoverage:this.legendOptions.dotCoverage,outline:this.legendOptions.outline&&this.legendOptions.outline.toJson(),valueUnit:this.legendOptions.valueUnit}),outline:this.outline&&this.outline.toJson()});return e.fixJson(n)}});B.setObject("renderer.DotDensityRenderer",f,t);return f})},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has",
"../kernel","./Point"],function(f,B,l,d,c){f=f(c,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}});B.setObject("geometry.ScreenPoint",f,d);return f})},"esri/renderers/ScaleDependentRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ./Renderer".split(" "),function(f,B,l,d,c,u,t){f=f(t,{declaredClass:"esri.renderer.ScaleDependentRenderer",constructor:function(e){this.setRendererInfos(e&&e.rendererInfos||[])},setRendererInfos:function(e){this.rendererInfos=
e;this._setRangeType();return this},getSymbol:function(e){var r=this.getRendererInfo(e);return r&&r.renderer&&r.renderer.getSymbol(e)},getRendererInfo:function(e){e=e.getLayer().getMap();return"zoom"===this.rangeType?this.getRendererInfoByZoom(e.getZoom()):this.getRendererInfoByScale(e.getScale())},getRendererInfoByZoom:function(e){var r=this.rendererInfos,m,a=0;do{var h=r[a];e>=h.minZoom&&e<=h.maxZoom&&(m=h);a++}while(!m&&a<r.length);return m},getRendererInfoByScale:function(e){var r=this.rendererInfos,
m,a=0;do{var h=r[a];var q=h.minScale;var n=h.maxScale;var k=!q;var g=!n;!k&&e<=q&&(k=!0);!g&&e>=n&&(g=!0);k&&g&&(m=h);a++}while(!m&&a<r.length);return m},addRendererInfo:function(e){var r=0,m=this.rendererInfos,a=e.hasOwnProperty("minZoom")?"minZoom":"minScale",h=m.length;do{var q=m[r];if(h===r||e[a]<q[a]){m.splice(r,0,e);this._setRangeType();var n=!0}r++}while(!n&&r<h);return this},_setRangeType:function(){var e=this.rendererInfos;if(e=e&&e[0])this.rangeType=e.hasOwnProperty("minZoom")?"zoom":e.hasOwnProperty("minScale")?
"scale":""},toJson:function(){if("zoom"===this.rangeType)return null;var e=this.rendererInfos||[],r=e[0]&&e[0].minScale;e=l.mixin(this.inherited(arguments),{type:"scaleDependent",minScale:0<r?r:0,rendererInfos:B.map(e,function(m){return u.fixJson({maxScale:0<m.maxScale?m.maxScale:0,renderer:m.renderer&&m.renderer.toJson()})})});return u.fixJson(e)}});l.setObject("renderer.ScaleDependentRenderer",f,c);return f})},"esri/renderers/TimeClassBreaksAger":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has dojo/date ../kernel ../lang ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),
function(f,B,l,d,c,u,t,e,r,m){var a=f(m,{declaredClass:"esri.renderer.TimeClassBreaksAger",constructor:function(h,q){this.infos=h;this.timeUnits=q||"day";h.sort(function(n,k){return n.minAge<k.minAge?-1:n.minAge>k.minAge?1:0})},getAgedSymbol:function(h,q){var n=q.getLayer();q=q.attributes;var k=t.isDefined;h=e.fromJson(h.toJson());var g=n._map.timeExtent.endTime;if(!g)return h;var b=c.difference(new Date(q[n._startTimeField]),g,this.timeUnits);B.some(this.infos,function(x){if(b>=x.minAge&&b<=x.maxAge){var v=
x.color,y=x.size;x=x.alpha;v&&h.setColor(v);k(y)&&this._setSymbolSize(h,y);k(x)&&h.color&&(h.color.a=x);return!0}},this);return h},toJson:function(){var h={agerClassBreakInfos:[]},q;h.timeUnits=this._getRestUnits(this.timeUnits);for(q=0;q<this.infos.length;q+=1){var n=this.infos[q];var k={};k.oldestAge=Infinity===n.maxAge?null:n.maxAge;k.size=n.size;n.color&&(k.color=r.toJsonColor(n.color));n.alpha&&(k.alpha=Math.round(255*n.alpha));h.agerClassBreakInfos[q]=k}return h},_getRestUnits:function(h){var q=
"esriTimeUnitsDays";switch(h){case a.UNIT_SECONDS:q="esriTimeUnitsSeconds";break;case a.UNIT_MILLISECONDS:q="esriTimeUnitsMilliseconds";break;case a.UNIT_HOURS:q="esriTimeUnitsHours";break;case a.UNIT_MINUTES:q="esriTimeUnitsMinutes";break;case a.UNIT_MONTHS:q="esriTimeUnitsMonths";break;case a.UNIT_WEEKS:q="esriTimeUnitsWeeks";break;case a.UNIT_YEARS:q="esriTimeUnitsYears"}return q}});l.mixin(a,{UNIT_DAYS:"day",UNIT_HOURS:"hour",UNIT_MILLISECONDS:"millisecond",UNIT_MINUTES:"minute",UNIT_MONTHS:"month",
UNIT_SECONDS:"second",UNIT_WEEKS:"week",UNIT_YEARS:"year"});l.setObject("renderer.TimeClassBreaksAger",a,u);return a})},"esri/renderers/SymbolAger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,d){f=f(null,{declaredClass:"esri.renderer.SymbolAger",getAgedSymbol:function(c,u){},_setSymbolSize:function(c,u){switch(c.type){case "simplemarkersymbol":c.setSize(u);break;case "picturemarkersymbol":c.setWidth(u);c.setHeight(u);break;case "simplelinesymbol":case "cartographiclinesymbol":c.setWidth(u);
break;case "simplefillsymbol":case "picturefillsymbol":c.outline&&c.outline.setWidth(u)}}});B.setObject("renderer.SymbolAger",f,d);return f})},"esri/renderers/TimeRampAger":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has ../kernel ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(f,B,l,d,c,u,t,e){f=f(e,{declaredClass:"esri.renderer.TimeRampAger",constructor:function(r,m,a){this.colorRange=r;this.sizeRange=m;this.alphaRange=a},getAgedSymbol:function(r,
m){var a=m.getLayer(),h=m.attributes;r=u.fromJson(r.toJson());var q=a._map.timeExtent;m=q.startTime;q=q.endTime;if(!m||!q)return r;m=m.getTime();q=q.getTime();a=new Date(h[a._startTimeField]);a=a.getTime();a<m&&(a=m);a=q===m?1:(a-m)/(q-m);if(m=this.sizeRange)h=m[0],q=m[1],m=Math.abs(q-h)*a,this._setSymbolSize(r,h<q?h+m:h-m);if(m=this.colorRange){q=m[0];var n=m[1],k=Math.round;h=new l;var g=q.r,b=n.r;m=Math.abs(b-g)*a;h.r=k(g<b?g+m:g-m);g=q.g;b=n.g;m=Math.abs(b-g)*a;h.g=k(g<b?g+m:g-m);g=q.b;b=n.b;
m=Math.abs(b-g)*a;h.b=k(g<b?g+m:g-m);q=q.a;n=n.a;m=Math.abs(n-q)*a;h.a=q<n?q+m:q-m;r.setColor(h)}h=r.color;(m=this.alphaRange)&&h&&(q=m[0],n=m[1],m=Math.abs(n-q)*a,h.a=q<n?q+m:q-m);return r},toJson:function(){var r={};this.sizeRange&&(r.sizeRange=this.sizeRange);this.colorRange&&(r.colorRange=[t.toJsonColor(this.colorRange[0]),t.toJsonColor(this.colorRange[1])]);this.alphaRange&&(r.alphaRange=[Math.round(255*this.alphaRange[0]),Math.round(255*this.alphaRange[1])]);return r}});B.setObject("renderer.TimeRampAger",
f,c);return f})},"esri/renderers/TemporalRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Renderer"],function(f,B,l,d,c){f=f(c,{declaredClass:"esri.renderer.TemporalRenderer",constructor:function(u,t,e,r){this.observationRenderer=u;this.latestObservationRenderer=t;this.trackRenderer=e;this.observationAger=r},getSymbol:function(u){var t=u.getLayer(),e=this.getObservationRenderer(u),r=e&&e.getSymbol(u),m=this.observationAger;t.timeInfo&&t._map.timeExtent&&
e===this.observationRenderer&&m&&r&&(r=m.getAgedSymbol(r,u));return r},getObservationRenderer:function(u){return 0===u.getLayer()._getKind(u)?this.observationRenderer:this.latestObservationRenderer||this.observationRenderer},toJson:function(){var u={type:"temporal"};u.observationRenderer=this.observationRenderer.toJson();this.latestObservationRenderer&&(u.latestObservationRenderer=this.latestObservationRenderer.toJson());this.trackRenderer&&(u.trackRenderer=this.trackRenderer.toJson());this.observationAger&&
(u.observationAger=this.observationAger.toJson());return u}});B.setObject("renderer.TemporalRenderer",f,d);return f})},"esri/renderers/HeatmapRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct ../sniff ../kernel ../lang ../symbols/PictureMarkerSymbol ../Color ./Renderer".split(" "),function(f,B,l,d,c,u,t,e,r,m){f=f([m],{declaredClass:"esri.renderer.HeatmapRenderer",colors:null,blurRadius:10,maxPixelIntensity:100,minPixelIntensity:0,field:null,fieldOffset:null,
colorStops:null,constructor:function(a){if(this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1)"string"==typeof a&&(a=JSON.parse(a)),B.mixin(this,a),this._canvas=null,this.colors||this.colorStops||(this.colorStops=[{ratio:0,color:"rgba(255, 140, 0, 0)"},{ratio:.75,color:"rgba(255, 140, 0, 1)"},{ratio:.9,color:"rgba(255, 0,   0, 1)"}]),this.gradient=this._generateGradient(this.colorStops||this.colors)},getSymbol:function(a){if(!this._supportsCanvas)return!1;var h=a.attributes.imageData;a=a.attributes.size;
if(!a)return null;var q=this._getContext(a[0],a[1]),n=q.getImageData(0,0,a[0],a[1]);window.ArrayBuffer&&h instanceof ArrayBuffer?h=window.Uint8ClampedArray?new Uint8ClampedArray(h):new Uint8Array(h):h.BYTES_PER_ELEMENT&&1!==h.BYTES_PER_ELEMENT&&(h=window.Uint8ClampedArray?new Uint8ClampedArray(h.buffer):new Uint8Array(h.buffer));if(window.CanvasPixelArray&&n.data instanceof window.CanvasPixelArray)for(var k=n.data,g=k.length;g--;)k[g]=h[g];else n.data.set(h);q.putImageData(n,0,0);return new e(q.canvas.toDataURL(),
a[0],a[1])},setColors:function(a){a&&(a instanceof Array||a.colors)&&(this.gradient=this._generateGradient(a.colors||a),this.colors=a);return this},setColorStops:function(a){a&&(a instanceof Array||a.colorStops)&&(this.gradient=this._generateGradient(a.colorStops||a),this.colorStops=a);return this},setMaxPixelIntensity:function(a){this.maxPixelIntensity=a;return this},setMinPixelIntensity:function(a){this.minPixelIntensity=a;return this},setField:function(a){this.field=a;return this},setFieldOffset:function(a){this.fieldOffset=
a;return this},setBlurRadius:function(a){this.blurRadius=a;return this},getStats:function(){},getHistogramData:function(){},toJson:function(){var a=B.mixin(this.inherited(arguments),{type:"heatmap",blurRadius:this.blurRadius,colorStops:this._colorsToStops(this.colorStops||this.colors),maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity,field:this.field});null!=this.fieldOffset&&(a.fieldOffset=this.fieldOffset);l.forEach(a.colorStops,function(h){h.color=r.toJsonColor(h.color)});
return t.fixJson(a)},_getContext:function(a,h){this._canvas?(this._canvas.width=a,this._canvas.height=h):this._canvas=this._initCanvas(a,h);return this._canvas.getContext("2d")},_initCanvas:function(a,h){var q=d.create("canvas",{id:"hm_canvas-"+Math.floor(1E3*Math.random()),style:"position: absolute; left: 0px; top: -10000px;"},null);q.width=a;q.height=h;document.body.appendChild(q);return q},_generateGradient:function(a,h){h||(h=512);a=this._colorsToStops(a);for(var q=this._getContext(1,h||512),
n=q.createLinearGradient(0,0,0,h),k=0,g;k<a.length;k++)g=a[k],n.addColorStop(g.ratio,g.color.toCss(!0));q.fillStyle=n;q.fillRect(0,0,1,h);return q.getImageData(0,0,1,h).data},_colorsToStops:function(a){var h=[];if(!a[0])return h;if(null!=a[0].ratio)h=l.map(a,function(x){return{ratio:x.ratio,color:this._toColor(x.color)}},this);else if(null!=a[0].value){var q=Infinity;h=-Infinity;var n=0,k;for(k=0;k<a.length;k++){var g=a[k].value;g<q&&(q=g);g>h&&(h=g)}n=h-q;this.maxPixelIntensity=h;this.minPixelIntensity=
q;h=l.map(a,function(x){var v=x.value;x=this._toColor(x.color);return{value:v,ratio:(v-q)/n,color:x}},this)}else{var b=a.length-1;h=l.map(a,function(x,v){return{color:this._toColor(x),ratio:v/b}},this)}return h},_toColor:function(a){a.toRgba||a.declaredClass||(a=new r(a));return a}});B.setObject("renderer.HeatmapRenderer",f,u);return f})},"esri/renderers/StretchRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),
function(f,B,l,d,c,u,t,e){var r={TYPE_NONE:"none",TYPE_STANDARDDEVIATION:"standardDeviation",TYPE_HISTOGRAMEQUALIZATION:"histogramEqualization",TYPE_MINMAX:"minMax",TYPE_PERCENTCLIP:"percentClip",TYPE_SIGMOID:"sigmoid"};f=f(null,{declaredClass:"esri.renderer.StretchRenderer",constructor:function(m){m=m||{};this.stretchType=r.TYPE_NONE;this.dra=!0;this.statistics=[];this.gamma=[];this.computeGamma=this.useGamma=!1;this.sigmoidStrengthLevel=this.numberOfStandardDeviations=this.minPercent=this.maxPercent=
this.min=this.max=null;l.mixin(this,m);this.colorRamp=e.fromJson(m.colorRamp)},toJson:function(){var m={type:"rasterStretch",stretchType:this.stretchType,colorRamp:this.colorRamp&&this.colorRamp.toJson(),min:this.min,max:this.max,numberOfStandardDeviations:this.numberOfStandardDeviations,statistics:l.clone(this.statistics),dra:this.dra,minPercent:this.minPercent,maxPercent:this.maxPercent,useGamma:this.useGamma,gamma:l.clone(this.gamma),computeGamma:this.computeGamma,sigmoidStrengthLevel:this.sigmoidStrengthLevel};
return u.fixJson(m)},toRenderingRule:function(m){m=m||{};var a=new t;a.functionName="Stretch";var h=this._convertStretchTypeEnumToIndex(this.stretchType),q={StretchType:h,Statistics:this.statistics,DRA:this.dra,UseGamma:this.useGamma,Gamma:this.gamma,ComputeGamma:this.computeGamma};u.isDefined(this.min)&&(q.Min=this.min);u.isDefined(this.min)&&(q.Max=this.max);3===h?(q.NumberOfStandardDeviations=this.numberOfStandardDeviations,a.outputPixelType="U8"):6===h?(q.MinPercent=parseFloat(this.minPercent),
q.MaxPercent=parseFloat(this.maxPercent),a.outputPixelType="U8"):5===h?a.outputPixelType="U8":9===h&&(q.SigmoidStrengthLevel=this.sigmoidStrengthLevel);a.functionArguments=q;a.variableName="Raster";return this.colorRamp?(h=new t,h.functionArguments=m.convertToColormap?{Colormap:e.convertColorRampToColormap(this.colorRamp,256)}:{colorRamp:this.colorRamp.toJson()},h.variableName="Raster",h.functionName="Colormap",h.functionArguments.Raster=a,h):a},_convertStretchTypeEnumToIndex:function(m){var a=0;
m===r.TYPE_STANDARDDEVIATION?a=3:m===r.TYPE_HISTOGRAMEQUALIZATION?a=4:m===r.TYPE_MINMAX?a=5:m===r.TYPE_PERCENTCLIP?a=6:m===r.TYPE_SIGMOID&&(a=9);return a},_convertStretchTypeIndexToEnum:function(m){var a=r.TYPE_NONE;3===m?a=r.TYPE_STANDARDDEVIATION:4===m?a=r.TYPE_HISTOGRAMEQUALIZATION:5===m?a=r.TYPE_MINMAX:6===m?a=r.TYPE_PERCENTCLIP:9===m&&(a=r.TYPE_SIGMOID);return a}});l.mixin(f,r);l.setObject("renderer.StretchRenderer",f,c);return f})},"esri/layers/RasterFunction":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../lang"],function(f,B,l,d,c){var u=f(null,{declaredClass:"esri.layers.RasterFunction",functionName:null,arguments:null,functionArguments:null,variableName:null,outputPixelType:null,_isTemplate:null,_templateJson:null,constructor:function(t){if(B.isObject(t)){this._isRFTJson(t)&&(this._isTemplate=!0,this._templateJson=t);var e=0;this.functionName=t.rasterFunction||t.name;this.functionArguments=B.clone(t.rasterFunctionArguments||t.arguments);B.mixin(this,t);
if(t=this.functionArguments)if(t.Raster=this._toRasterFunction(t.Raster),t.Raster2=this._toRasterFunction(t.Raster2),t.DEM=this._toRasterFunction(t.DEM),t.FillRaster=this._toRasterFunction(t.FillRaster),t.Rasters&&t.Rasters.length)for(e=0;e<t.Rasters.length;e++)t.Rasters[e]=this._toRasterFunction(t.Rasters[e])}},_isRFTJson:function(t){return t.name&&t.arguments&&t.function&&t.hasOwnProperty("functionType")},_toRasterFunction:function(t){return t&&(t.rasterFunction||t.functionName)?new u(t):t},_rfToJson:function(t){t&&
"esri.layers.RasterFunction"===t.declaredClass&&(t=t.toJson());return t},toJson:function(){if(this._isTemplate)return this._templateJson;var t=B.clone(this.functionArguments||this.arguments);if(t&&(t.Raster=this._rfToJson(t.Raster),t.Raster2=this._rfToJson(t.Raster2),t.DEM=this._rfToJson(t.DEM),t.FillRaster=this._rfToJson(t.FillRaster),t.Rasters&&t.Rasters.length)){var e,r=[];for(e=0;e<t.Rasters.length;e++)r.push(this._rfToJson(t.Rasters[e]));t.Rasters=r}return c.filter({rasterFunction:this.functionName,
rasterFunctionArguments:t,variableName:this.variableName,outputPixelType:this.outputPixelType?this.outputPixelType:null},function(m){if(null!==m&&void 0!==m)return!0})}});B.setObject("layers.RasterFunction",u,d);return u})},"esri/renderers/colorRampUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/store/Memory ../tasks/AlgorithmicColorRamp ../tasks/MultipartColorRamp ../Color ./colorUtils".split(" "),function(f,B,l,d,c,u,t){function e(v){if(null==v||"algorithmic"!==v.type&&!v.fromColor)return v;
var y=v.declaredClass?new d:f.clone(v);y.fromColor=v.toColor;y.toColor=v.fromColor;y.algorithm=v.algorithm;return y}function r(v){if(null==v)return null;if("multipart"===v.type||v.colorRamps&&0<v.colorRamps.length){var y=v.declaredClass?new c:f.clone(v);y.colorRamps=B.map(v.colorRamps.slice().reverse(),function(D){return e(D)});return y}return e(v)}function m(v,y,D){if(!v)return{id:null,isInverted:!1};var E=v.name;E&&(v.fromColor||v.colorRamps)&&(v.name=void 0);var C=a(v,y,D);if(C)return E&&(v.name=
E),{id:C,isInverted:!1};C=a(v,y,D,!0);E&&(v.name=E);return C?{id:C,isInverted:!0}:E&&(C=a(v,y,D))?{id:C,isInverted:!1}:{id:null,isInverted:!1}}function a(v,y,D,E){if(v){E&&(v=r(v));y=y||g;D=D||b;var C=null;E=v.declaredClass;var z,w;if((z="string"===typeof v?v:v.name)&&B.some(D,function(A){if(A.name===z)return C=A.id,!0})&&C)return C;"esri.tasks.AlgorithmicColorRamp"===E?B.some(y,function(A){if(q(v.fromColor.toRgb(),A.fromColor)&&q(v.toColor.toRgb(),A.toColor))return C=A.id,!0},this):"esri.tasks.MultipartColorRamp"===
E&&B.some(y,function(A){if(v.colorRamps&&A.colorRamps&&v.colorRamps.length===A.colorRamps.length&&(w=v.colorRamps,!B.some(A.colorRamps,function(G,F){if(!q(w[F].fromColor.toRgb(),G.fromColor)||!q(w[F].toColor.toRgb(),G.toColor))return!0},this))){if(C)return!0;C=A.id}},this);return C}}function h(v){var y=new d,D=v.algorithm;y.fromColor=u.toDojoColor(v.fromColor);y.toColor=u.toDojoColor(v.toColor);D?"esriCIELabAlgorithm"===D?y.algorithm="cie-lab":"esriHSVAlgorithm"===D?y.algorithm="hsv":"esriLabLChAlgorithm"===
D&&(y.algorithm="lab-lch"):y.algorithm="hsv";return y}function q(v,y){if(!v||!y)return!1;v=v.slice(0,3);y=y.slice(0,3);return!B.some(v,function(D,E){if(D>y[E]+2||D<y[E]-2)return!0})}function n(v,y,D){v=t.toLAB(v);y=t.toLAB(y);return t.toRGB({l:v.l*(1-D)+D*y.l,a:v.a*(1-D)+D*y.a,b:v.b*(1-D)+D*y.b})}var k={},g=[{id:"none",selected:!0},{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,
254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",
fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},
{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"cividis_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,32,77,255],toColor:[0,33,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,33,79,255],toColor:[0,34,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,34,80,255],toColor:[0,35,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,35,82,255],toColor:[0,35,84,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[0,35,84,255],toColor:[0,36,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,36,85,255],toColor:[0,37,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,37,87,255],toColor:[0,38,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,38,89,255],toColor:[0,38,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,38,91,255],toColor:[0,39,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[0,39,92,255],toColor:[0,40,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,40,94,255],toColor:[0,40,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,40,96,255],toColor:[0,41,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,41,98,255],toColor:[0,42,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,42,100,255],toColor:[0,42,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
42,101,255],toColor:[0,43,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,43,103,255],toColor:[0,44,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,44,105,255],toColor:[0,45,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,45,107,255],toColor:[0,45,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,45,109,255],toColor:[0,46,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
46,110,255],toColor:[0,47,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,111,255],toColor:[0,47,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,112,255],toColor:[0,47,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,112,255],toColor:[0,48,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,48,112,255],toColor:[0,49,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
49,112,255],toColor:[0,49,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,49,112,255],toColor:[0,50,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,50,112,255],toColor:[0,51,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,51,111,255],toColor:[0,52,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,52,111,255],toColor:[0,52,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
52,111,255],toColor:[0,53,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,53,111,255],toColor:[1,54,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,54,111,255],toColor:[6,55,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,55,110,255],toColor:[11,55,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,55,110,255],toColor:[15,56,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[15,
56,110,255],toColor:[18,57,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,57,110,255],toColor:[21,57,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,57,110,255],toColor:[24,58,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,58,110,255],toColor:[26,59,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[26,59,109,255],toColor:[29,60,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[29,60,109,255],toColor:[31,60,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,60,109,255],toColor:[33,61,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,61,109,255],toColor:[35,62,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,62,109,255],toColor:[37,63,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,63,109,255],toColor:[38,63,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[38,63,109,255],toColor:[40,64,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,64,108,255],toColor:[42,65,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,65,108,255],toColor:[43,65,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,65,108,255],toColor:[45,66,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,66,108,255],toColor:[46,67,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[46,67,108,255],toColor:[48,68,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,68,108,255],toColor:[49,68,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,68,108,255],toColor:[51,69,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,69,108,255],toColor:[52,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,70,108,255],toColor:[53,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[53,70,108,255],toColor:[55,71,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,71,108,255],toColor:[56,72,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,72,108,255],toColor:[57,73,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,73,108,255],toColor:[58,73,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,73,108,255],toColor:[60,74,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[60,74,108,255],toColor:[61,75,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,75,108,255],toColor:[62,75,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,75,108,255],toColor:[63,76,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,76,108,255],toColor:[64,77,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,77,108,255],toColor:[65,78,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[65,78,108,255],toColor:[67,78,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,78,108,255],toColor:[68,79,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,79,108,255],toColor:[69,80,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,80,108,255],toColor:[70,80,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,80,108,255],toColor:[71,81,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[71,81,108,255],toColor:[72,82,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,82,108,255],toColor:[73,83,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,83,108,255],toColor:[74,83,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[74,83,108,255],toColor:[75,84,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,84,108,255],toColor:[76,85,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[76,85,108,255],toColor:[77,86,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[77,86,108,255],toColor:[78,86,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,86,108,255],toColor:[79,87,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[79,87,108,255],toColor:[80,88,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[80,88,108,255],toColor:[81,88,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[81,88,109,255],toColor:[82,89,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[82,89,109,255],toColor:[83,90,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,90,109,255],toColor:[84,91,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[84,91,109,255],toColor:[85,91,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[85,91,109,255],toColor:[86,92,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[86,92,109,255],toColor:[87,93,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[87,93,109,255],toColor:[88,93,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,93,109,255],toColor:[89,94,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,94,110,255],toColor:[90,95,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[90,95,110,255],toColor:[91,96,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[91,96,110,255],toColor:[92,96,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,96,110,255],toColor:[93,97,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[93,97,110,255],toColor:[94,98,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,98,110,255],toColor:[94,99,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,99,111,255],toColor:[95,99,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[95,99,111,255],toColor:[96,100,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[96,100,111,255],toColor:[97,101,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,101,111,255],toColor:[98,101,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[98,101,111,255],toColor:[99,102,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,102,112,255],toColor:[100,103,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[100,103,112,255],toColor:[101,104,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,104,112,255],toColor:[102,104,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,104,112,255],toColor:[103,105,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[103,105,113,255],toColor:[104,106,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[104,106,113,255],toColor:[104,107,113,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[104,107,113,255],toColor:[105,107,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,107,113,255],toColor:[106,108,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[106,108,114,255],toColor:[107,109,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,109,114,255],toColor:[108,109,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,109,114,255],toColor:[109,
110,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[109,110,115,255],toColor:[110,111,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,111,115,255],toColor:[111,112,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[111,112,115,255],toColor:[111,112,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[111,112,115,255],toColor:[112,113,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,
113,116,255],toColor:[113,114,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,114,116,255],toColor:[114,115,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[114,115,116,255],toColor:[115,115,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,115,117,255],toColor:[116,116,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,116,117,255],toColor:[117,117,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[117,117,117,255],toColor:[117,118,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[117,118,118,255],toColor:[118,118,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,118,118,255],toColor:[119,119,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[119,119,119,255],toColor:[120,120,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,120,119,255],toColor:[121,121,119,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[121,121,119,255],toColor:[122,121,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,121,120,255],toColor:[123,122,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,122,120,255],toColor:[124,123,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,123,120,255],toColor:[124,124,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,124,121,255],toColor:[125,
124,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,124,121,255],toColor:[126,125,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[126,125,121,255],toColor:[127,126,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,126,121,255],toColor:[128,127,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,127,121,255],toColor:[129,127,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[129,
127,121,255],toColor:[130,128,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,128,121,255],toColor:[131,129,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[131,129,121,255],toColor:[132,130,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,130,121,255],toColor:[133,130,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,130,121,255],toColor:[134,131,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[134,131,121,255],toColor:[135,132,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[135,132,121,255],toColor:[136,133,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,133,121,255],toColor:[137,134,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,134,121,255],toColor:[138,134,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,134,121,255],toColor:[139,135,121,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[139,135,121,255],toColor:[140,136,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,136,121,255],toColor:[141,137,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,137,121,255],toColor:[142,137,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[142,137,121,255],toColor:[143,138,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[143,138,121,255],toColor:[144,
139,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,139,121,255],toColor:[145,140,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,140,121,255],toColor:[146,141,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,141,121,255],toColor:[147,141,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,141,121,255],toColor:[148,142,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,
142,121,255],toColor:[149,143,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[149,143,121,255],toColor:[150,144,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,144,121,255],toColor:[151,145,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[151,145,120,255],toColor:[152,145,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[152,145,120,255],toColor:[153,146,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[153,146,120,255],toColor:[154,147,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,147,120,255],toColor:[155,148,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,148,120,255],toColor:[156,149,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[156,149,120,255],toColor:[157,149,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[157,149,120,255],toColor:[158,150,120,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[158,150,120,255],toColor:[159,151,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[159,151,119,255],toColor:[160,152,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,152,119,255],toColor:[161,153,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[161,153,119,255],toColor:[162,153,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,153,119,255],toColor:[163,
154,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[163,154,119,255],toColor:[164,155,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,155,118,255],toColor:[165,156,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,156,118,255],toColor:[166,157,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[166,157,118,255],toColor:[167,158,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[167,
158,118,255],toColor:[168,158,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[168,158,118,255],toColor:[169,159,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,159,117,255],toColor:[170,160,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,160,117,255],toColor:[171,161,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[171,161,117,255],toColor:[172,162,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[172,162,117,255],toColor:[173,162,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,162,116,255],toColor:[174,163,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,163,116,255],toColor:[175,164,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[175,164,116,255],toColor:[177,165,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[177,165,115,255],toColor:[178,166,115,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[178,166,115,255],toColor:[179,167,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,167,115,255],toColor:[180,168,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,168,115,255],toColor:[181,168,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[181,168,114,255],toColor:[182,169,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,169,114,255],toColor:[183,
170,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[183,170,114,255],toColor:[184,171,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,171,113,255],toColor:[185,172,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,172,113,255],toColor:[186,173,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[186,173,113,255],toColor:[187,173,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,
173,112,255],toColor:[188,174,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,174,112,255],toColor:[189,175,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[189,175,111,255],toColor:[190,176,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,176,111,255],toColor:[191,177,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,177,111,255],toColor:[192,178,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[192,178,110,255],toColor:[194,179,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[194,179,110,255],toColor:[195,180,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,180,109,255],toColor:[196,180,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,180,109,255],toColor:[197,181,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[197,181,109,255],toColor:[198,182,108,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[198,182,108,255],toColor:[199,183,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[199,183,108,255],toColor:[200,184,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,184,107,255],toColor:[201,185,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,185,107,255],toColor:[202,186,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[202,186,106,255],toColor:[203,
187,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,187,106,255],toColor:[204,187,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,187,105,255],toColor:[205,188,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,188,105,255],toColor:[207,189,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,189,104,255],toColor:[208,190,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[208,
190,104,255],toColor:[209,191,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,191,103,255],toColor:[210,192,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[210,192,103,255],toColor:[211,193,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,193,102,255],toColor:[212,194,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,194,101,255],toColor:[213,195,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[213,195,101,255],toColor:[214,196,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,196,100,255],toColor:[215,196,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[215,196,100,255],toColor:[217,197,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[217,197,99,255],toColor:[218,198,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,198,98,255],toColor:[219,199,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[219,199,98,255],toColor:[220,200,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,200,97,255],toColor:[221,201,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,201,96,255],toColor:[222,202,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[222,202,96,255],toColor:[223,203,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,203,95,255],toColor:[224,204,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[224,204,94,255],toColor:[226,205,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,205,94,255],toColor:[227,206,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,206,93,255],toColor:[228,207,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,207,92,255],toColor:[229,208,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,208,91,255],toColor:[230,209,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[230,209,91,255],toColor:[231,209,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,209,90,255],toColor:[233,210,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,210,89,255],toColor:[234,211,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,211,88,255],toColor:[235,212,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,212,87,255],toColor:[236,213,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[236,213,86,255],toColor:[237,214,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,214,86,255],toColor:[238,215,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,215,85,255],toColor:[239,216,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,216,84,255],toColor:[241,217,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,217,83,255],toColor:[242,218,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[242,218,82,255],toColor:[243,219,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,219,81,255],toColor:[244,220,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,220,80,255],toColor:[245,221,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,221,79,255],toColor:[246,222,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,222,78,255],toColor:[248,223,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[248,223,77,255],toColor:[249,224,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,224,75,255],toColor:[250,225,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,225,74,255],toColor:[251,226,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,226,73,255],toColor:[252,227,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,227,72,255],toColor:[254,228,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,228,71,255],toColor:[255,229,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,229,69,255],toColor:[255,230,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,230,68,255],toColor:[255,231,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,231,67,255],toColor:[255,232,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,232,66,255],toColor:[255,233,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,233,67,255],toColor:[255,234,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,234,69,255],toColor:[255,235,70,255]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,
255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},
{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,
96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,
204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"inferno_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,0,4,255],toColor:[1,0,5,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,0,5,255],toColor:[1,1,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,6,255],toColor:[1,1,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,8,255],toColor:[2,1,10,
255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,1,10,255],toColor:[2,2,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,12,255],toColor:[2,2,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,14,255],toColor:[3,2,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[3,2,16,255],toColor:[4,3,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[4,3,18,255],toColor:[4,3,21,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[4,3,21,255],toColor:[5,4,23,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[5,4,23,255],toColor:[6,4,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,4,25,255],toColor:[7,5,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[7,5,27,255],toColor:[8,6,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[8,6,29,255],toColor:[9,6,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[9,6,32,255],toColor:[10,7,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[10,7,34,255],toColor:[11,7,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,7,36,255],toColor:[12,8,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[12,8,38,255],toColor:[13,8,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[13,8,41,255],toColor:[14,9,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[14,
9,43,255],toColor:[16,9,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,9,45,255],toColor:[17,10,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[17,10,48,255],toColor:[18,10,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,10,50,255],toColor:[20,11,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[20,11,53,255],toColor:[21,11,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,
11,55,255],toColor:[22,11,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[22,11,58,255],toColor:[24,12,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,12,60,255],toColor:[25,12,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,12,62,255],toColor:[27,12,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[27,12,65,255],toColor:[28,12,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[28,
12,67,255],toColor:[30,12,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[30,12,70,255],toColor:[31,12,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,12,72,255],toColor:[33,12,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,12,74,255],toColor:[35,12,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,12,77,255],toColor:[36,12,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,
12,79,255],toColor:[38,12,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,12,81,255],toColor:[40,11,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,11,83,255],toColor:[42,11,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,11,85,255],toColor:[43,11,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,11,87,255],toColor:[45,11,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,
11,89,255],toColor:[47,10,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,10,91,255],toColor:[49,10,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,10,93,255],toColor:[51,10,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,10,94,255],toColor:[52,10,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,10,96,255],toColor:[54,9,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,
9,97,255],toColor:[56,9,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,9,98,255],toColor:[58,9,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,9,99,255],toColor:[59,9,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,9,100,255],toColor:[61,9,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,9,101,255],toColor:[63,9,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,9,
102,255],toColor:[64,10,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,10,103,255],toColor:[66,10,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,10,104,255],toColor:[68,10,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,10,105,255],toColor:[69,10,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,10,105,255],toColor:[71,11,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,
11,106,255],toColor:[73,11,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,11,107,255],toColor:[74,12,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[74,12,107,255],toColor:[76,12,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,12,108,255],toColor:[78,13,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,13,108,255],toColor:[79,13,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[79,13,108,255],toColor:[81,14,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[81,14,109,255],toColor:[83,14,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,14,109,255],toColor:[84,15,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[84,15,109,255],toColor:[86,15,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,15,110,255],toColor:[87,16,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[87,16,110,255],toColor:[89,17,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,17,110,255],toColor:[91,17,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,17,110,255],toColor:[92,18,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,18,110,255],toColor:[94,18,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,18,111,255],toColor:[95,19,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[95,19,111,255],toColor:[97,20,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,20,111,255],toColor:[99,20,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,20,111,255],toColor:[100,21,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[100,21,111,255],toColor:[102,21,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,21,111,255],toColor:[103,22,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[103,22,111,255],toColor:[105,23,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,23,111,255],toColor:[107,23,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,23,111,255],toColor:[108,24,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,24,111,255],toColor:[110,24,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,24,111,255],toColor:[111,25,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[111,25,111,255],toColor:[113,25,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,25,110,255],toColor:[115,26,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,26,110,255],toColor:[116,27,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,27,110,255],toColor:[118,27,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,27,110,255],toColor:[119,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[119,28,110,255],toColor:[121,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[121,28,110,255],toColor:[123,29,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,29,109,255],toColor:[124,29,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,29,109,255],toColor:[126,30,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[126,30,109,255],toColor:[127,31,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[127,31,109,255],toColor:[129,31,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[129,31,108,255],toColor:[130,32,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,32,108,255],toColor:[132,32,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,32,108,255],toColor:[134,33,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[134,33,107,255],toColor:[135,33,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[135,33,107,255],toColor:[137,34,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,34,107,255],toColor:[138,34,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,34,106,255],toColor:[140,35,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,35,106,255],toColor:[142,36,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[142,36,105,255],toColor:[143,36,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[143,36,105,255],toColor:[145,37,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,37,105,255],toColor:[146,37,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,37,104,255],toColor:[148,38,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,38,104,255],toColor:[150,38,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,38,103,255],toColor:[151,39,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[151,39,102,255],toColor:[153,40,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[153,40,102,255],toColor:[154,40,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,40,101,255],toColor:[156,41,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[156,41,101,255],toColor:[158,41,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,41,100,255],toColor:[159,42,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[159,42,100,255],toColor:[161,43,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[161,43,99,255],toColor:[162,43,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,43,98,255],toColor:[164,44,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,44,98,255],toColor:[165,45,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,45,97,255],toColor:[167,45,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[167,45,96,255],toColor:[169,46,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,46,95,255],toColor:[170,46,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,46,95,255],toColor:[172,47,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[172,47,94,255],toColor:[173,48,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,48,93,255],toColor:[175,49,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[175,49,92,255],toColor:[176,49,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[176,49,92,255],toColor:[178,50,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[178,50,91,255],toColor:[179,51,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,51,90,255],toColor:[181,51,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[181,51,89,255],toColor:[182,52,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[182,52,88,255],toColor:[184,53,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,53,87,255],toColor:[185,54,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,54,86,255],toColor:[187,54,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,54,85,255],toColor:[188,55,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,55,85,255],toColor:[190,56,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[190,56,84,255],toColor:[191,57,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,57,83,255],toColor:[193,58,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,58,82,255],toColor:[194,59,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[194,59,81,255],toColor:[196,60,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,60,80,255],toColor:[197,60,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[197,60,79,255],toColor:[198,61,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,61,78,255],toColor:[200,62,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,62,77,255],toColor:[201,63,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,63,76,255],toColor:[203,64,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,64,75,255],toColor:[204,65,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[204,65,74,255],toColor:[205,66,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,66,72,255],toColor:[207,67,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,67,71,255],toColor:[208,68,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[208,68,70,255],toColor:[209,69,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,69,69,255],toColor:[211,70,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[211,70,68,255],toColor:[212,72,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,72,67,255],toColor:[213,73,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[213,73,66,255],toColor:[214,74,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,74,65,255],toColor:[216,75,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[216,75,64,255],toColor:[217,76,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[217,76,62,255],toColor:[218,77,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,77,61,255],toColor:[219,79,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,79,60,255],toColor:[220,80,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,80,59,255],toColor:[221,81,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,81,58,255],toColor:[223,82,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[223,82,57,255],toColor:[224,84,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,84,56,255],toColor:[225,85,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[225,85,54,255],toColor:[226,86,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,86,53,255],toColor:[227,88,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,88,52,255],toColor:[228,89,51,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[228,89,51,255],toColor:[229,90,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,90,50,255],toColor:[230,92,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,92,48,255],toColor:[231,93,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,93,47,255],toColor:[232,95,46,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,95,46,255],toColor:[233,96,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[233,96,45,255],toColor:[234,98,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,98,43,255],toColor:[235,99,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,99,42,255],toColor:[235,101,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,101,41,255],toColor:[236,102,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,102,40,255],toColor:[237,104,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[237,104,38,255],toColor:[238,105,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,105,37,255],toColor:[239,107,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,107,36,255],toColor:[240,109,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,109,35,255],toColor:[240,110,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,110,33,255],toColor:[241,112,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[241,112,32,255],toColor:[242,113,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,113,31,255],toColor:[242,115,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,115,30,255],toColor:[243,117,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,117,28,255],toColor:[244,118,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,118,27,255],toColor:[244,120,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[244,120,26,255],toColor:[245,122,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,122,24,255],toColor:[246,123,23,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,123,23,255],toColor:[246,125,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,125,22,255],toColor:[247,127,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,127,20,255],toColor:[247,129,19,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,129,19,255],toColor:[248,130,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,130,18,255],toColor:[248,132,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,132,16,255],toColor:[249,134,15,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,134,15,255],toColor:[249,136,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,136,14,255],toColor:[249,137,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[249,137,12,255],toColor:[250,139,11,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,139,11,255],toColor:[250,141,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,141,10,255],toColor:[250,143,9,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,143,9,255],toColor:[251,145,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,145,8,255],toColor:[251,146,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,146,7,255],toColor:[251,148,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,148,7,255],toColor:[252,150,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,150,6,255],toColor:[252,152,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,152,6,255],toColor:[252,154,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,154,6,255],toColor:[252,156,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,156,6,255],toColor:[252,158,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,158,7,255],toColor:[253,160,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,160,7,255],toColor:[253,161,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,161,8,255],toColor:[253,163,9,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,163,9,255],toColor:[253,165,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,165,10,255],toColor:[253,167,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,167,12,255],toColor:[253,169,13,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,169,13,255],toColor:[253,171,15,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,171,15,255],toColor:[253,173,17,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,173,17,255],toColor:[253,175,19,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,175,19,255],toColor:[253,177,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,177,20,255],toColor:[253,179,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,179,22,255],toColor:[253,181,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,181,25,255],toColor:[252,183,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,183,27,255],toColor:[252,185,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,185,29,255],toColor:[252,186,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,186,31,255],toColor:[252,188,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,188,33,255],toColor:[252,190,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,190,35,255],toColor:[251,192,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,192,38,255],toColor:[251,194,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,194,40,255],toColor:[251,196,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,196,43,255],toColor:[251,198,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,198,45,255],toColor:[250,200,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,200,48,255],toColor:[250,202,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,202,50,255],toColor:[250,204,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[250,204,53,255],toColor:[249,206,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,206,56,255],toColor:[249,208,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,208,58,255],toColor:[248,210,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,210,61,255],toColor:[248,212,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,212,64,255],toColor:[247,214,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,214,67,255],toColor:[247,216,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,216,70,255],toColor:[246,218,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,218,73,255],toColor:[246,220,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,220,76,255],toColor:[245,222,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,222,80,255],toColor:[245,224,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[245,224,83,255],toColor:[244,226,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,226,86,255],toColor:[244,228,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,228,90,255],toColor:[244,229,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,229,94,255],toColor:[243,231,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,231,97,255],toColor:[243,233,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[243,233,101,255],toColor:[243,235,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,235,105,255],toColor:[242,237,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,237,109,255],toColor:[242,238,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,238,113,255],toColor:[242,240,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,240,117,255],toColor:[242,242,122,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[242,242,122,255],toColor:[243,243,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,243,126,255],toColor:[243,245,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,245,130,255],toColor:[244,246,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,246,134,255],toColor:[244,247,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,247,138,255],toColor:[245,
249,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,249,142,255],toColor:[246,250,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,250,146,255],toColor:[247,251,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,251,150,255],toColor:[249,252,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,252,154,255],toColor:[250,253,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,
253,158,255],toColor:[251,254,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,254,162,255],toColor:[253,255,165,255]}]},{id:"magma_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,0,4,255],toColor:[1,0,5,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,0,5,255],toColor:[1,1,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,6,255],toColor:[1,1,8,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[1,1,8,255],toColor:[2,1,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,1,10,255],toColor:[2,2,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,12,255],toColor:[2,2,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,14,255],toColor:[3,3,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[3,3,16,255],toColor:[4,3,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[4,3,18,255],toColor:[4,4,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[4,4,20,255],toColor:[5,4,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[5,4,22,255],toColor:[6,5,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,5,24,255],toColor:[6,5,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,5,26,255],toColor:[7,6,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[7,6,28,
255],toColor:[8,7,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[8,7,30,255],toColor:[9,7,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[9,7,32,255],toColor:[10,8,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[10,8,34,255],toColor:[11,9,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,9,36,255],toColor:[12,9,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[12,9,38,255],toColor:[13,
10,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[13,10,41,255],toColor:[14,11,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[14,11,43,255],toColor:[16,11,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,11,45,255],toColor:[17,12,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[17,12,47,255],toColor:[18,13,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,13,50,255],toColor:[19,
13,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[19,13,52,255],toColor:[20,14,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[20,14,54,255],toColor:[21,14,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,14,57,255],toColor:[23,15,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[23,15,59,255],toColor:[24,15,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,15,61,255],toColor:[25,
16,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,16,64,255],toColor:[26,16,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[26,16,66,255],toColor:[28,16,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[28,16,68,255],toColor:[29,17,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[29,17,71,255],toColor:[30,17,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[30,17,73,255],toColor:[32,
17,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,17,76,255],toColor:[33,17,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,17,78,255],toColor:[35,18,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,18,81,255],toColor:[36,18,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,18,83,255],toColor:[38,18,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,18,86,255],toColor:[39,
18,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,18,88,255],toColor:[41,18,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,18,90,255],toColor:[42,17,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,17,93,255],toColor:[44,17,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,17,95,255],toColor:[46,17,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,17,97,255],toColor:[47,
17,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,17,99,255],toColor:[49,17,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,17,101,255],toColor:[51,16,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,16,103,255],toColor:[52,16,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,16,105,255],toColor:[54,16,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,16,107,255],
toColor:[56,16,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,16,109,255],toColor:[58,15,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,15,111,255],toColor:[59,15,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,15,112,255],toColor:[61,15,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,15,113,255],toColor:[63,15,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,
15,115,255],toColor:[65,15,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,15,116,255],toColor:[66,15,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,15,117,255],toColor:[68,15,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,15,118,255],toColor:[70,16,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,16,119,255],toColor:[71,16,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[71,16,120,255],toColor:[73,16,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,16,121,255],toColor:[75,17,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,17,122,255],toColor:[76,17,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,17,122,255],toColor:[78,17,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,17,123,255],toColor:[79,18,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[79,18,124,255],toColor:[81,18,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[81,18,124,255],toColor:[83,19,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,19,125,255],toColor:[84,19,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[84,19,125,255],toColor:[86,20,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,20,126,255],toColor:[87,21,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[87,21,126,255],toColor:[89,21,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,21,126,255],toColor:[91,22,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,22,127,255],toColor:[92,22,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,22,127,255],toColor:[94,23,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,23,127,255],toColor:[95,24,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[95,24,128,255],toColor:[97,24,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,24,128,255],toColor:[98,25,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[98,25,128,255],toColor:[100,26,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[100,26,128,255],toColor:[101,26,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,26,129,255],toColor:[103,27,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[103,27,129,255],toColor:[105,28,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,28,129,255],toColor:[106,28,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[106,28,129,255],toColor:[108,29,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,29,129,255],toColor:[109,30,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[109,30,129,255],toColor:[111,30,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[111,30,130,255],toColor:[112,31,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,31,130,255],toColor:[114,31,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[114,31,130,255],toColor:[116,32,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,32,130,255],toColor:[117,33,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[117,33,130,255],toColor:[119,33,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[119,33,130,255],toColor:[120,34,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,34,130,255],toColor:[122,34,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,34,130,255],toColor:[123,35,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,35,130,255],toColor:[125,36,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,36,130,255],toColor:[127,36,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[127,36,130,255],toColor:[128,37,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,37,130,255],toColor:[130,37,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,37,130,255],toColor:[131,38,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[131,38,130,255],toColor:[133,39,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,39,130,255],toColor:[134,39,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[134,39,130,255],toColor:[136,40,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,40,130,255],toColor:[138,40,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,40,130,255],toColor:[139,41,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[139,41,130,255],toColor:[141,41,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,41,129,255],toColor:[142,42,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[142,42,129,255],toColor:[144,42,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,42,129,255],toColor:[146,43,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,43,129,255],toColor:[147,43,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,43,129,255],toColor:[149,44,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[149,44,129,255],toColor:[151,44,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[151,44,129,255],toColor:[152,45,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[152,45,128,255],toColor:[154,46,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,46,128,255],toColor:[155,46,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,46,128,255],toColor:[157,47,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[157,47,128,255],toColor:[159,47,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[159,47,127,255],toColor:[160,48,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,48,127,255],toColor:[162,48,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,48,127,255],toColor:[164,49,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,49,127,255],toColor:[165,49,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,49,126,255],toColor:[167,50,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[167,50,126,255],toColor:[169,50,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,50,126,255],toColor:[170,51,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,51,125,255],toColor:[172,51,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[172,51,125,255],toColor:[174,52,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,52,124,255],toColor:[175,52,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[175,52,124,255],toColor:[177,53,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[177,53,124,255],toColor:[178,53,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[178,53,123,255],toColor:[180,54,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,54,123,255],toColor:[182,54,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,54,122,255],toColor:[183,55,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[183,55,122,255],toColor:[185,56,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,56,121,255],toColor:[187,56,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,56,121,255],toColor:[188,57,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,57,120,255],toColor:[190,57,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,57,120,255],toColor:[192,58,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[192,58,119,255],toColor:[193,59,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,59,118,255],toColor:[195,59,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,59,118,255],toColor:[196,60,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,60,117,255],toColor:[198,60,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,60,117,255],toColor:[200,61,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[200,61,116,255],toColor:[201,62,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,62,115,255],toColor:[203,63,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,63,115,255],toColor:[204,63,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,63,114,255],toColor:[206,64,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[206,64,113,255],toColor:[208,65,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[208,65,112,255],toColor:[209,66,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,66,112,255],toColor:[211,66,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,66,111,255],toColor:[212,67,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,67,110,255],toColor:[214,68,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,68,109,255],toColor:[215,69,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[215,69,109,255],toColor:[217,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[217,70,108,255],toColor:[218,71,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,71,107,255],toColor:[220,72,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,72,106,255],toColor:[221,73,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,73,106,255],toColor:[222,74,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[222,74,105,255],toColor:[224,75,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,75,104,255],toColor:[225,76,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[225,76,103,255],toColor:[226,77,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,77,102,255],toColor:[228,78,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,78,102,255],toColor:[229,79,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[229,79,101,255],toColor:[230,81,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,81,100,255],toColor:[231,82,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,82,99,255],toColor:[233,83,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,83,99,255],toColor:[234,84,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,84,98,255],toColor:[235,86,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[235,86,97,255],toColor:[236,87,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,87,97,255],toColor:[237,89,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,89,96,255],toColor:[238,90,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,90,95,255],toColor:[239,92,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,92,95,255],toColor:[240,93,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[240,93,94,255],toColor:[241,95,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,95,94,255],toColor:[242,97,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,97,93,255],toColor:[242,98,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,98,93,255],toColor:[243,100,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,100,93,255],toColor:[244,102,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[244,102,93,255],toColor:[245,104,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,104,92,255],toColor:[245,105,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,105,92,255],toColor:[246,107,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,107,92,255],toColor:[247,109,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,109,92,255],toColor:[247,111,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,111,92,255],toColor:[248,113,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,113,92,255],toColor:[248,114,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,114,92,255],toColor:[249,116,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,116,92,255],toColor:[249,118,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,118,93,255],toColor:[250,120,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[250,120,93,255],toColor:[250,122,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,122,93,255],toColor:[250,124,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,124,94,255],toColor:[251,126,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,126,94,255],toColor:[251,128,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,128,95,255],toColor:[251,130,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,130,95,255],toColor:[252,131,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,131,96,255],toColor:[252,133,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,133,96,255],toColor:[252,135,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,135,97,255],toColor:[253,137,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,137,98,255],toColor:[253,139,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,139,99,255],toColor:[253,141,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,141,99,255],toColor:[253,143,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,143,100,255],toColor:[253,145,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,145,101,255],toColor:[254,147,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,147,102,255],toColor:[254,149,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,149,103,255],toColor:[254,150,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,150,104,255],toColor:[254,152,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,152,105,255],toColor:[254,154,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,154,106,255],toColor:[254,156,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,156,107,255],toColor:[255,158,108,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[255,158,108,255],toColor:[255,160,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,160,109,255],toColor:[255,162,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,162,111,255],toColor:[255,164,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,164,112,255],toColor:[255,165,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,165,113,255],toColor:[255,
167,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,167,114,255],toColor:[255,169,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,169,116,255],toColor:[255,171,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,171,117,255],toColor:[255,173,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,173,118,255],toColor:[255,175,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,
175,119,255],toColor:[255,177,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,177,121,255],toColor:[255,179,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,179,122,255],toColor:[255,180,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,180,124,255],toColor:[255,182,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,182,125,255],toColor:[255,184,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,184,126,255],toColor:[255,186,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,186,128,255],toColor:[255,188,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,188,129,255],toColor:[255,190,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,190,131,255],toColor:[255,191,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,191,132,255],toColor:[255,193,134,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[255,193,134,255],toColor:[255,195,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,195,135,255],toColor:[255,197,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,197,137,255],toColor:[255,199,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,199,139,255],toColor:[255,201,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,201,140,255],toColor:[255,
203,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,203,142,255],toColor:[255,204,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,204,143,255],toColor:[255,206,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,206,145,255],toColor:[255,208,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,208,147,255],toColor:[255,210,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,
210,148,255],toColor:[255,212,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,212,150,255],toColor:[255,214,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,214,152,255],toColor:[255,215,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,215,153,255],toColor:[255,217,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,217,155,255],toColor:[254,219,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,219,157,255],toColor:[254,221,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,221,159,255],toColor:[254,223,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,223,160,255],toColor:[254,225,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,225,162,255],toColor:[254,226,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,226,164,255],toColor:[254,228,166,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[254,228,166,255],toColor:[254,230,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,230,167,255],toColor:[254,232,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,232,169,255],toColor:[254,234,171,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,234,171,255],toColor:[254,236,173,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,236,173,255],toColor:[253,
237,175,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,237,175,255],toColor:[253,239,177,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,239,177,255],toColor:[253,241,179,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,241,179,255],toColor:[253,243,180,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,243,180,255],toColor:[253,245,182,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,
245,182,255],toColor:[253,247,184,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,247,184,255],toColor:[253,248,186,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,248,186,255],toColor:[253,250,188,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,250,188,255],toColor:[253,252,190,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,252,190,255],toColor:[253,254,192,255]}]},{id:"orangeBright_predefined",fromColor:[255,
235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,
255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,
191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"plasma_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[13,8,135,255],toColor:[16,7,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,7,136,255],toColor:[19,7,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[19,7,138,255],toColor:[22,7,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[22,7,139,255],toColor:[25,6,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,6,140,255],toColor:[27,6,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[27,6,141,255],toColor:[29,6,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[29,6,142,255],toColor:[32,6,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[32,6,143,255],toColor:[34,6,144,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,6,144,255],toColor:[36,6,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,6,145,255],toColor:[38,5,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,5,146,255],toColor:[40,5,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,5,147,255],toColor:[42,5,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[42,5,148,255],toColor:[44,5,149,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,5,149,255],toColor:[46,5,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,5,150,255],toColor:[48,5,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,5,150,255],toColor:[50,5,151,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,5,151,255],toColor:[51,5,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[51,5,152,255],toColor:[53,4,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,4,153,255],toColor:[55,4,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,4,153,255],toColor:[57,4,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,4,154,255],toColor:[58,4,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,4,155,255],toColor:[60,4,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[60,4,156,255],toColor:[62,4,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,4,156,255],toColor:[64,4,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,4,157,255],toColor:[65,4,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,4,158,255],toColor:[67,3,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,3,158,255],toColor:[69,3,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[69,3,159,255],toColor:[70,3,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,3,159,255],toColor:[72,3,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,3,160,255],toColor:[73,3,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,3,161,255],toColor:[75,3,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,3,161,255],toColor:[77,2,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[77,2,162,255],toColor:[78,2,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,2,162,255],toColor:[80,2,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[80,2,163,255],toColor:[82,2,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[82,2,163,255],toColor:[83,2,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,2,164,255],toColor:[85,2,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[85,2,164,255],toColor:[86,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,1,165,255],toColor:[88,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,1,165,255],toColor:[90,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[90,1,165,255],toColor:[91,1,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,1,166,255],toColor:[93,1,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[93,1,166,255],toColor:[94,1,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,1,167,255],toColor:[96,1,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[96,1,167,255],toColor:[98,0,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[98,0,167,255],toColor:[99,0,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,0,167,255],toColor:[101,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[101,0,168,255],toColor:[102,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,0,168,255],toColor:[104,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[104,0,168,255],toColor:[105,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,0,168,255],toColor:[107,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,0,169,255],toColor:[108,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[108,0,169,255],toColor:[110,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,0,169,255],toColor:[112,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,0,169,255],toColor:[113,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,0,169,255],toColor:[115,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,1,169,255],toColor:[116,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[116,1,169,255],toColor:[118,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,1,169,255],toColor:[119,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[119,1,169,255],toColor:[121,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[121,1,169,255],toColor:[122,2,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,2,169,255],toColor:[124,2,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[124,2,169,255],toColor:[125,3,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,3,169,255],toColor:[127,3,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,3,168,255],toColor:[128,4,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,4,168,255],toColor:[130,4,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,4,168,255],toColor:[131,5,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[131,5,168,255],toColor:[133,6,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,6,167,255],toColor:[134,6,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[134,6,167,255],toColor:[136,7,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,7,167,255],toColor:[137,8,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,8,166,255],toColor:[138,9,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[138,9,166,255],toColor:[140,10,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,10,166,255],toColor:[141,11,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,11,165,255],toColor:[143,12,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[143,12,165,255],toColor:[144,13,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,13,164,255],toColor:[145,14,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[145,14,164,255],toColor:[147,15,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,15,163,255],toColor:[148,16,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,16,163,255],toColor:[150,18,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,18,162,255],toColor:[151,19,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[151,19,161,255],toColor:[152,20,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[152,20,161,255],toColor:[154,21,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,21,160,255],toColor:[155,22,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,22,159,255],toColor:[156,23,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[156,23,159,255],toColor:[158,24,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,24,158,255],toColor:[159,25,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[159,25,157,255],toColor:[160,26,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,26,156,255],toColor:[162,28,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,28,156,255],toColor:[163,29,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[163,29,155,255],toColor:[164,30,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,30,154,255],toColor:[165,31,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[165,31,153,255],toColor:[167,32,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[167,32,152,255],toColor:[168,33,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[168,33,152,255],toColor:[169,34,151,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,34,151,255],toColor:[170,35,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,35,150,255],toColor:[171,37,149,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[171,37,149,255],toColor:[173,38,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,38,148,255],toColor:[174,39,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,39,147,255],toColor:[175,40,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[175,40,146,255],toColor:[176,41,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[176,41,145,255],toColor:[177,42,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[177,42,145,255],toColor:[179,43,144,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,43,144,255],toColor:[180,45,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,45,143,255],toColor:[181,46,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[181,46,142,255],toColor:[182,47,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,47,141,255],toColor:[183,48,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[183,48,140,255],toColor:[184,49,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,49,139,255],toColor:[185,50,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,50,138,255],toColor:[186,51,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[186,51,137,255],toColor:[187,52,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,52,136,255],toColor:[188,54,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[188,54,135,255],toColor:[189,55,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[189,55,134,255],toColor:[191,56,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,56,133,255],toColor:[192,57,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[192,57,132,255],toColor:[193,58,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,58,131,255],toColor:[194,59,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[194,59,130,255],toColor:[195,60,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,60,129,255],toColor:[196,62,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,62,129,255],toColor:[197,63,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[197,63,128,255],toColor:[198,64,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,64,127,255],toColor:[199,65,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[199,65,126,255],toColor:[200,66,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,66,125,255],toColor:[201,67,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,67,124,255],toColor:[202,68,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[202,68,123,255],toColor:[202,69,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[202,69,122,255],toColor:[203,71,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[203,71,121,255],toColor:[204,72,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,72,120,255],toColor:[205,73,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,73,119,255],toColor:[206,74,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[206,74,118,255],toColor:[207,75,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,75,117,255],toColor:[208,76,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[208,76,117,255],toColor:[209,77,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,77,116,255],toColor:[210,79,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[210,79,115,255],toColor:[211,80,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,80,114,255],toColor:[212,81,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,81,113,255],toColor:[212,82,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[212,82,112,255],toColor:[213,83,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[213,83,111,255],toColor:[214,84,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,84,110,255],toColor:[215,85,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[215,85,109,255],toColor:[216,87,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[216,87,109,255],toColor:[217,88,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[217,88,108,255],toColor:[218,89,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,89,107,255],toColor:[218,90,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,90,106,255],toColor:[219,91,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,91,105,255],toColor:[220,92,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,92,104,255],toColor:[221,93,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[221,93,103,255],toColor:[222,95,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[222,95,102,255],toColor:[223,96,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,96,102,255],toColor:[223,97,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,97,101,255],toColor:[224,98,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,98,100,255],toColor:[225,99,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[225,99,99,255],toColor:[226,100,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,100,98,255],toColor:[226,102,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,102,97,255],toColor:[227,103,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,103,96,255],toColor:[228,104,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,104,96,255],toColor:[229,105,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[229,105,95,255],toColor:[229,106,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,106,94,255],toColor:[230,108,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,108,93,255],toColor:[231,109,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,109,92,255],toColor:[232,110,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,110,91,255],toColor:[232,111,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[232,111,90,255],toColor:[233,112,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,112,90,255],toColor:[234,114,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,114,89,255],toColor:[234,115,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,115,88,255],toColor:[235,116,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,116,87,255],toColor:[236,117,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[236,117,86,255],toColor:[236,119,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,119,85,255],toColor:[237,120,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,120,84,255],toColor:[238,121,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,121,83,255],toColor:[238,122,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,122,83,255],toColor:[239,124,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[239,124,82,255],toColor:[240,125,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,125,81,255],toColor:[240,126,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,126,80,255],toColor:[241,127,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,127,79,255],toColor:[241,129,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,129,78,255],toColor:[242,130,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[242,130,77,255],toColor:[242,131,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,131,77,255],toColor:[243,133,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,133,76,255],toColor:[244,134,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,134,75,255],toColor:[244,135,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,135,74,255],toColor:[245,136,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[245,136,73,255],toColor:[245,138,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,138,72,255],toColor:[246,139,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,139,71,255],toColor:[246,140,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,140,70,255],toColor:[247,142,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,142,70,255],toColor:[247,143,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,143,69,255],toColor:[248,144,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,144,68,255],toColor:[248,146,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,146,67,255],toColor:[248,147,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,147,66,255],toColor:[249,149,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,149,65,255],toColor:[249,150,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[249,150,64,255],toColor:[250,151,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,151,64,255],toColor:[250,153,63,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,153,63,255],toColor:[250,154,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,154,62,255],toColor:[251,156,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,156,61,255],toColor:[251,157,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,157,60,255],toColor:[251,158,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,158,59,255],toColor:[252,160,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,160,58,255],toColor:[252,161,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,161,58,255],toColor:[252,163,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,163,57,255],toColor:[253,164,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,164,56,255],toColor:[253,166,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,166,55,255],toColor:[253,167,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,167,54,255],toColor:[253,168,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,168,53,255],toColor:[253,170,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,170,52,255],toColor:[254,171,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,171,52,255],toColor:[254,173,51,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,173,51,255],toColor:[254,174,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,174,50,255],toColor:[254,176,49,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,176,49,255],toColor:[254,177,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,177,48,255],toColor:[254,179,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,179,48,255],toColor:[254,180,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,180,47,255],toColor:[254,182,46,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,182,46,255],toColor:[255,183,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,183,45,255],toColor:[255,185,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,185,45,255],toColor:[255,187,44,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,187,44,255],toColor:[255,188,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,188,43,255],toColor:[255,190,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,190,43,255],toColor:[255,191,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,191,42,255],toColor:[255,193,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,193,41,255],toColor:[254,194,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,194,41,255],toColor:[254,196,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,196,40,255],toColor:[254,198,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,198,40,255],toColor:[254,199,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,199,39,255],toColor:[254,201,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,201,39,255],toColor:[254,202,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,202,38,255],toColor:[254,204,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,204,38,255],toColor:[253,206,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,206,38,255],toColor:[253,207,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,207,37,255],toColor:[253,209,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,209,37,255],toColor:[253,211,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,211,37,255],toColor:[252,212,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,212,37,255],toColor:[252,214,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,214,36,255],toColor:[252,216,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,216,36,255],toColor:[251,217,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,217,36,255],toColor:[251,219,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,219,36,255],toColor:[250,221,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,221,37,255],toColor:[250,222,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,222,37,255],toColor:[249,224,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,224,37,255],toColor:[249,226,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,226,37,255],toColor:[248,227,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[248,227,37,255],toColor:[248,229,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,229,38,255],toColor:[247,231,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,231,38,255],toColor:[247,232,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,232,38,255],toColor:[246,234,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,234,39,255],toColor:[246,236,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[246,236,39,255],toColor:[245,238,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,238,39,255],toColor:[244,239,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,239,39,255],toColor:[244,241,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,241,39,255],toColor:[243,243,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,243,39,255],toColor:[242,245,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[242,245,38,255],toColor:[242,246,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,246,38,255],toColor:[241,248,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,248,36,255],toColor:[241,250,34,255]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,
153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,
14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",
fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,
245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",
type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,
255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,
255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"viridis_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,1,84,255],toColor:[69,2,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,2,86,255],toColor:[69,4,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,4,87,255],toColor:[69,5,89,
255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,5,89,255],toColor:[70,7,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,7,90,255],toColor:[70,8,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,8,92,255],toColor:[70,10,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,10,93,255],toColor:[71,11,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,11,95,255],toColor:[71,13,96,255]},
{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,13,96,255],toColor:[71,14,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,14,98,255],toColor:[71,16,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,16,99,255],toColor:[72,17,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,17,100,255],toColor:[72,19,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,19,102,255],toColor:[72,20,103,
255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,20,103,255],toColor:[72,22,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,22,104,255],toColor:[72,23,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,23,106,255],toColor:[72,24,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,24,107,255],toColor:[72,26,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,26,108,255],toColor:[72,
27,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,27,109,255],toColor:[72,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,28,110,255],toColor:[73,30,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,30,112,255],toColor:[73,31,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,31,113,255],toColor:[72,32,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,32,114,255],
toColor:[72,34,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,34,115,255],toColor:[72,35,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,35,116,255],toColor:[72,36,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,36,117,255],toColor:[72,37,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,37,118,255],toColor:[72,39,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,
39,119,255],toColor:[72,40,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,40,120,255],toColor:[72,41,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,41,121,255],toColor:[72,42,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,42,122,255],toColor:[72,44,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,44,123,255],toColor:[71,45,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[71,45,124,255],toColor:[71,46,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,46,125,255],toColor:[71,47,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,47,125,255],toColor:[71,49,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,49,126,255],toColor:[70,50,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,50,127,255],toColor:[70,51,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[70,51,128,255],toColor:[70,52,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,52,128,255],toColor:[70,54,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,54,129,255],toColor:[69,55,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,55,130,255],toColor:[69,56,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,56,130,255],toColor:[69,57,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[69,57,131,255],toColor:[68,58,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,58,132,255],toColor:[68,60,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,60,132,255],toColor:[68,61,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,61,133,255],toColor:[67,62,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,62,133,255],toColor:[67,63,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[67,63,134,255],toColor:[66,64,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,64,134,255],toColor:[66,66,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,66,135,255],toColor:[65,67,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,67,135,255],toColor:[65,68,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,68,136,255],toColor:[65,69,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[65,69,136,255],toColor:[64,70,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,70,136,255],toColor:[64,71,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,71,137,255],toColor:[63,73,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,73,137,255],toColor:[63,74,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,74,138,255],toColor:[62,75,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[62,75,138,255],toColor:[62,76,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,76,138,255],toColor:[61,77,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,77,138,255],toColor:[61,78,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,78,139,255],toColor:[60,79,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,79,139,255],toColor:[60,80,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[60,80,139,255],toColor:[59,81,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,81,139,255],toColor:[59,83,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,83,140,255],toColor:[58,84,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,84,140,255],toColor:[58,85,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,85,140,255],toColor:[57,86,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[57,86,140,255],toColor:[57,87,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,87,140,255],toColor:[56,88,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,88,141,255],toColor:[56,89,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,89,141,255],toColor:[55,90,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,90,141,255],toColor:[55,91,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[55,91,141,255],toColor:[54,92,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,92,141,255],toColor:[54,93,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,93,141,255],toColor:[53,94,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,94,141,255],toColor:[53,95,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,95,142,255],toColor:[52,96,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[52,96,142,255],toColor:[52,97,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,97,142,255],toColor:[52,98,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,98,142,255],toColor:[51,99,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,99,142,255],toColor:[51,100,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,100,142,255],toColor:[50,101,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[50,101,142,255],toColor:[50,102,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,102,142,255],toColor:[49,103,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,103,142,255],toColor:[49,104,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,104,142,255],toColor:[48,105,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,105,142,255],toColor:[48,106,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[48,106,142,255],toColor:[48,107,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,107,143,255],toColor:[47,108,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,108,143,255],toColor:[47,109,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,109,143,255],toColor:[46,110,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,110,143,255],toColor:[46,111,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[46,111,143,255],toColor:[45,112,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,112,143,255],toColor:[45,113,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,113,143,255],toColor:[45,114,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,114,143,255],toColor:[44,115,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,115,143,255],toColor:[44,116,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[44,116,143,255],toColor:[43,117,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,117,143,255],toColor:[43,118,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,118,143,255],toColor:[43,119,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,119,143,255],toColor:[42,120,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,120,143,255],toColor:[42,121,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[42,121,143,255],toColor:[42,122,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,122,143,255],toColor:[41,123,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,123,143,255],toColor:[41,123,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,123,143,255],toColor:[40,124,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,124,143,255],toColor:[40,125,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[40,125,143,255],toColor:[40,126,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,126,143,255],toColor:[39,127,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,127,143,255],toColor:[39,128,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,128,143,255],toColor:[39,129,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,129,143,255],toColor:[38,130,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[38,130,143,255],toColor:[38,131,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,131,143,255],toColor:[37,132,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,132,143,255],toColor:[37,133,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,133,142,255],toColor:[37,134,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,134,142,255],toColor:[36,135,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[36,135,142,255],toColor:[36,136,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,136,142,255],toColor:[36,137,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,137,142,255],toColor:[35,138,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,138,142,255],toColor:[35,139,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,139,142,255],toColor:[35,139,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[35,139,142,255],toColor:[34,140,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,140,142,255],toColor:[34,141,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,141,142,255],toColor:[34,142,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,142,141,255],toColor:[33,143,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,143,141,255],toColor:[33,144,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[33,144,141,255],toColor:[33,145,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,145,141,255],toColor:[32,146,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,146,141,255],toColor:[32,147,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,147,141,255],toColor:[32,148,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,148,140,255],toColor:[32,149,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[32,149,140,255],toColor:[31,150,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,150,140,255],toColor:[31,151,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,151,140,255],toColor:[31,152,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,152,139,255],toColor:[31,153,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,153,139,255],toColor:[31,154,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[31,154,139,255],toColor:[31,155,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,155,139,255],toColor:[31,156,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,156,138,255],toColor:[31,156,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,156,138,255],toColor:[31,157,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,157,138,255],toColor:[31,158,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[31,158,137,255],toColor:[31,159,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,159,137,255],toColor:[31,160,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,160,137,255],toColor:[31,161,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,161,136,255],toColor:[31,162,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,162,136,255],toColor:[32,163,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[32,163,135,255],toColor:[32,164,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,164,135,255],toColor:[32,165,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,165,134,255],toColor:[33,166,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,166,134,255],toColor:[33,167,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,167,134,255],toColor:[34,168,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[34,168,133,255],toColor:[34,169,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,169,133,255],toColor:[35,170,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,170,132,255],toColor:[36,170,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,170,131,255],toColor:[37,171,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,171,131,255],toColor:[38,172,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[38,172,130,255],toColor:[38,173,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,173,130,255],toColor:[39,174,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,174,129,255],toColor:[40,175,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,175,128,255],toColor:[41,176,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,176,128,255],toColor:[43,177,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[43,177,127,255],toColor:[44,178,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,178,126,255],toColor:[45,179,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,179,126,255],toColor:[46,180,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,180,125,255],toColor:[48,180,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,180,124,255],toColor:[49,181,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[49,181,123,255],toColor:[50,182,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,182,123,255],toColor:[52,183,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,183,122,255],toColor:[53,184,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,184,121,255],toColor:[55,185,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,185,120,255],toColor:[56,186,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[56,186,119,255],toColor:[58,187,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,187,118,255],toColor:[60,187,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,187,118,255],toColor:[61,188,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,188,117,255],toColor:[63,189,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,189,116,255],toColor:[65,190,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[65,190,115,255],toColor:[67,191,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,191,114,255],toColor:[68,192,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,192,113,255],toColor:[70,193,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,193,112,255],toColor:[72,193,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,193,111,255],toColor:[74,194,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[74,194,110,255],toColor:[76,195,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,195,109,255],toColor:[78,196,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,196,108,255],toColor:[80,197,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[80,197,106,255],toColor:[82,197,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[82,197,105,255],toColor:[84,198,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[84,198,104,255],toColor:[86,199,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,199,103,255],toColor:[88,200,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,200,102,255],toColor:[90,200,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[90,200,101,255],toColor:[92,201,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,201,99,255],toColor:[95,202,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[95,202,98,255],toColor:[97,203,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,203,97,255],toColor:[99,203,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,203,95,255],toColor:[101,204,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,204,94,255],toColor:[103,205,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[103,205,93,255],toColor:[106,206,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[106,206,91,255],toColor:[108,206,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,206,90,255],toColor:[110,207,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,207,89,255],toColor:[113,208,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,208,87,255],toColor:[115,208,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,208,86,255],toColor:[117,209,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[117,209,84,255],toColor:[120,210,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,210,83,255],toColor:[122,210,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,210,81,255],toColor:[125,211,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,211,80,255],toColor:[127,212,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,212,78,255],toColor:[130,212,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[130,212,77,255],toColor:[132,213,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,213,75,255],toColor:[135,213,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[135,213,74,255],toColor:[137,214,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,214,72,255],toColor:[140,215,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,215,71,255],toColor:[142,215,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[142,215,69,255],toColor:[145,216,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,216,67,255],toColor:[147,216,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,216,66,255],toColor:[150,217,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,217,64,255],toColor:[153,217,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[153,217,62,255],toColor:[155,218,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[155,218,61,255],toColor:[158,218,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,218,59,255],toColor:[160,219,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,219,57,255],toColor:[163,219,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[163,219,55,255],toColor:[166,220,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[166,220,54,255],toColor:[168,220,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[168,220,52,255],toColor:[171,221,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[171,221,50,255],toColor:[174,221,49,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,221,49,255],toColor:[176,222,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[176,222,47,255],toColor:[179,222,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,222,45,255],toColor:[182,222,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[182,222,43,255],toColor:[184,223,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,223,42,255],toColor:[187,223,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,223,40,255],toColor:[190,224,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,224,38,255],toColor:[192,224,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[192,224,37,255],toColor:[195,224,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[195,224,35,255],toColor:[198,225,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,225,34,255],toColor:[201,225,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,225,32,255],toColor:[203,225,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,225,31,255],toColor:[206,226,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[206,226,29,255],toColor:[209,226,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[209,226,28,255],toColor:[211,226,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,226,27,255],toColor:[214,227,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,227,26,255],toColor:[216,227,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[216,227,26,255],toColor:[219,227,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,227,25,255],toColor:[222,228,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[222,228,25,255],toColor:[224,228,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,228,24,255],toColor:[227,228,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,228,24,255],toColor:[229,229,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,229,25,255],toColor:[232,229,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,229,25,255],toColor:[235,229,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[235,229,26,255],toColor:[237,230,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,230,27,255],toColor:[240,230,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,230,28,255],toColor:[242,230,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,230,29,255],toColor:[245,231,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,231,30,255],toColor:[247,231,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,231,32,255],toColor:[249,231,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,231,33,255],toColor:[252,232,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,232,35,255],toColor:[254,232,37,255]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",
type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],b=[{name:"Aspect",id:"aspect_predefined"},{name:"Black to White",id:"blackToWhite_predefined"},{name:"Blue Bright",
id:"blueBright_predefined"},{name:"Blue Light to Dark",id:"blueLightToDark_predefined"},{name:"Blue-Green Bright",id:"blueGreenBright_predefined"},{name:"Blue-Green Light to Dark",id:"blueGreenLightToDark_predefined"},{name:"Brown Light to Dark",id:"brownLightToDark_predefined"},{name:"Brown to Blue Green Diverging, Bright",id:"brownToBlueGreenDivergingBright_predefined"},{name:"Brown to Blue Green Diverging, Dark",id:"brownToBlueGreenDivergingDark_predefined"},{name:"Cividis",id:"cividis_predefined"},
{name:"Coefficient Bias",id:"coefficientBias_predefined"},{name:"Cold to Hot Diverging",id:"coldToHotDiverging_predefined"},{name:"Condition Number",id:"conditionNumber_predefined"},{name:"Cyan to Purple",id:"cyanToPurple_predefined"},{name:"Cyan-Light to Blue-Dark",id:"cyanLightToBlueDark_predefined"},{name:"Distance",id:"distance_predefined"},{id:"elevation1_predefined",name:"Elevation #1"},{id:"elevation2_predefined",name:"Elevation #2"},{id:"errors_predefined",name:"Errors"},{id:"grayLightToDark_predefined",
name:"Gray Light to Dark"},{id:"greenBright_predefined",name:"Green Bright"},{id:"greenLightToDark_predefined",name:"Green Light to Dark"},{name:"Green to Blue",id:"greenToBlue_predefined"},{name:"Inferno",id:"inferno_predefined"},{name:"Magma",id:"magma_predefined"},{name:"Orange Bright",id:"orangeBright_predefined"},{name:"Orange Light to Dark",id:"orangeLightToDark_predefined"},{id:"partialSpectrum_predefined",name:"Partial Spectrum"},{id:"partialSpectrum1Diverging_predefined",name:"Partial Spectrum 1 Diverging",
type:"multipart"},{id:"partialSpectrum2Diverging_predefined",name:"Partial Spectrum 2 Diverging"},{name:"Plasma",id:"plasma_predefined"},{name:"Pink to YellowGreen Diverging, Bright",id:"pinkToYellowGreenDivergingBright_predefined"},{name:"Pink to YellowGreen Diverging, Dark",id:"pinkToYellowGreenDivergingDark_predefined"},{id:"precipitation_predefined",name:"Precipitation"},{id:"prediction_predefined",name:"Prediction"},{name:"Purple Bright",id:"purpleBright_predefined"},{id:"purpleToGreenDivergingBright_predefined",
name:"Purple to Green Diverging, Bright"},{id:"purpleToGreenDivergingDark_predefined",name:"Purple to Green Diverging, Dark"},{name:"Purple-Blue Bright",id:"purpleBlueBright_predefined"},{name:"Purple-Blue Light to Dark",id:"purpleBlueLightToDark_predefined"},{name:"Purple-Red Bright",id:"purpleRedBright_predefined"},{name:"Purple-Red Light to Dark",id:"purpleRedLightToDark_predefined"},{name:"Red Bright",id:"redBright_predefined"},{name:"Red Light to Dark",id:"redLightToDark_predefined"},{id:"redToBlueDivergingBright_predefined",
name:"Red to Blue Diverging, Bright"},{id:"redToBlueDivergingDark_predefined",name:"Red to Blue Diverging, Dark"},{id:"redToGreen_predefined",name:"Red to Green"},{id:"redToGreenDivergingBright_predefined",name:"Red to Green Diverging, Bright"},{id:"redToGreenDivergingDark_predefined",name:"Red to Green Diverging, Dark"},{name:"Slope",id:"slope_predefined"},{id:"spectrumFullBright_predefined",name:"Spectrum-Full Bright"},{id:"spectrumFullDark_predefined",name:"Spectrum-Full Dark"},{id:"spectrumFullLight_predefined",
name:"Spectrum-Full Light"},{id:"surface_predefined",name:"Surface"},{id:"temperature_predefined",name:"Temperature"},{name:"Viridis",id:"viridis_predefined"},{name:"White to Black",id:"whiteToBlack_predefined"},{id:"yellowToDarkRed_predefined",name:"Yellow to Dark Red"},{id:"yellowToGreenToDarkBlue_predefined",name:"Yellow to Green to Dark Blue"},{name:"Yellow to Red",id:"yellowToRed_predefined"},{name:"Yellow-Green Bright",id:"yellowGreenBright_predefined"},{name:"Yellow-Green Light to Dark",id:"yellowGreenLightToDark_predefined"}],
x=new l({data:b});f.mixin(k,{predefinedColorRamps:g,predefinedColorRampNameMap:b,getColorRampName:function(v){v=m(v);return v.id?(v=x.query({id:v.id}),v[0]?v[0].name:null):null},fromJson:function(v){var y=null;if(!v)return y;"multipart"===v.type?(y=new c,y.colorRamps=B.map(v.colorRamps,function(D){return h(D)},this)):"algorithmic"===v.type&&(y=h(v));return y},colorsEqual:q,getColorRampId:m,invertColorRamp:r,convertColorRampToColormap:function(v,y){if(v&&y){var D=v.colorRamps?v.colorRamps.length:1,
E=[],C=[],z,w,A,G,F=0,H=0;for(F=0;F<D;F++)E[F]={},E[F].start=H,E[F].end=H+1/D,H=E[F].end;for(F=0;F<y;F++){var J=(F+.5)/y;B.forEach(E,function(K,Q){J>=K.start&&J<K.end&&(G=(J-K.start)/(K.end-K.start),1<E.length?(z=t.getDojoColor(v.colorRamps[Q].fromColor),w=t.getDojoColor(v.colorRamps[Q].toColor)):(z=t.getDojoColor(v.fromColor),w=t.getDojoColor(v.toColor)),A=n(z,w,G),C.push([F,A.r,A.g,A.b]))},this)}return C}},interpolateLabColor:n});return k})},"esri/tasks/AlgorithmicColorRamp":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../Color ./ColorRamp".split(" "),
function(f,B,l,d,c,u){f=f(u,{declaredClass:"esri.tasks.AlgorithmicColorRamp",type:"algorithmic",fromColor:null,toColor:null,algorithm:null,toJson:function(){switch(this.algorithm&&this.algorithm.toLowerCase()){case "cie-lab":var t="esriCIELabAlgorithm";break;case "hsv":t="esriHSVAlgorithm";break;case "lab-lch":t="esriLabLChAlgorithm"}t={type:"algorithmic",algorithm:t};t.fromColor=c.toJsonColor(this.fromColor);t.toColor=c.toJsonColor(this.toColor);return t}});B.setObject("tasks.AlgorithmicColorRamp",
f,d);return f})},"esri/tasks/ColorRamp":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,d){f=f(null,{declaredClass:"esri.tasks.ColorRamp",type:null});B.setObject("tasks.ColorRamp",f,d);return f})},"esri/tasks/MultipartColorRamp":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../symbols/Symbol ./ColorRamp".split(" "),function(f,B,l,d,c,u){f=f(u,{declaredClass:"esri.tasks.MultipartColorRamp",type:"multipart",
constructor:function(){this.colorRamps=[]},addColorRamp:function(t){this.colorRamps.push(t)},toJson:function(){return{type:"multipart",colorRamps:l.map(this.colorRamps,function(t){return t.toJson()})}}});B.setObject("tasks.MultipartColorRamp",f,c);return f})},"esri/renderers/colorUtils":function(){define(["dojo/_base/Color","dojo/_base/array"],function(f,B){var l={COEF_RGB2XYZ:[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],COEF_XYZ2RGB:[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],
[.0557,-.204,1.057]],matrixProduct:function(c,u){var t=[],e,r;if(c[0].length!==u.length)throw"dimensions do not match";var m=c.length,a=c[0].length,h=0;for(e=0;e<m;e++){for(r=h=0;r<a;r++)h+=c[e][r]*u[r];t.push(h)}return t},rgb2xyz:function(c){c=[c.r/255,c.g/255,c.b/255].map(function(u){return.04045>=u?u/12.92:Math.pow((u+.055)/1.055,2.4)});c=this.matrixProduct(this.COEF_RGB2XYZ,c);return{x:100*c[0],y:100*c[1],z:100*c[2]}},xyz2rgb:function(c){c=this.matrixProduct(this.COEF_XYZ2RGB,[c.x/100,c.y/100,
c.z/100]).map(function(u){return Math.min(1,Math.max(.0031308>=u?12.92*u:1.055*Math.pow(u,1/2.4)-.055,0))});return{r:Math.round(255*c[0]),g:Math.round(255*c[1]),b:Math.round(255*c[2])}},xyz2lab:function(c){c=[c.x/95.047,c.y/100,c.z/108.883].map(function(u){return u>Math.pow(6/29,3)?Math.pow(u,1/3):1/3*Math.pow(29/6,2)*u+4/29});return{l:116*c[1]-16,a:500*(c[0]-c[1]),b:200*(c[1]-c[2])}},lab2xyz:function(c){var u=c.l;c=[(u+16)/116+c.a/500,(u+16)/116,(u+16)/116-c.b/200].map(function(t){return t>6/29?
Math.pow(t,3):3*Math.pow(6/29,2)*(t-4/29)});return{x:95.047*c[0],y:100*c[1],z:108.883*c[2]}},lab2lch:function(c){var u=c.l,t=c.a,e=c.b;c=Math.sqrt(t*t+e*e);t=Math.atan2(e,t);t=0<t?t:t+2*Math.PI;return{l:u,c,h:t}},lch2lab:function(c){var u=c.c,t=c.h;return{l:c.l,a:u*Math.cos(t),b:u*Math.sin(t)}},rgb2lab:function(c){return this.xyz2lab(this.rgb2xyz(c))},lab2rgb:function(c){return this.xyz2rgb(this.lab2xyz(c))},rgb2lch:function(c){return this.lab2lch(this.xyz2lab(this.rgb2xyz(c)))},lch2rgb:function(c){return this.xyz2rgb(this.lab2xyz(this.lch2lab(c)))}},
d={rgb2hsv:function(c){var u=c.r,t=c.g;c=c.b;var e=Math.max(u,t,c),r=e-Math.min(u,t,c),m;0===r?m=0:e===u?m=(t-c)/r%6:e===t?m=(c-u)/r+2:e===c&&(m=(u-t)/r+4);0>m&&(m+=6);return{h:60*m,s:100*(0===r?0:r/e),v:100/255*e}},hsv2rgb:function(c){var u=(c.h+360)%360/60,t=c.v/100*255;c=c.s/100*t;var e=c*(1-Math.abs(u%2-1));switch(Math.floor(u)){case 0:u={r:c,g:e,b:0};break;case 1:u={r:e,g:c,b:0};break;case 2:u={r:0,g:c,b:e};break;case 3:u={r:0,g:e,b:c};break;case 4:u={r:e,g:0,b:c};break;case 5:case 6:u={r:c,
g:0,b:e};break;default:u={r:0,g:0,b:0}}u.r=Math.round(u.r+t-c);u.g=Math.round(u.g+t-c);u.b=Math.round(u.b+t-c);return u}};return{toRGB:function(c){var u;void 0!==c.r&&void 0!==c.g&&void 0!==c.b?u=c:void 0!==c.l&&void 0!==c.c&&void 0!==c.h?u=l.lch2rgb(c):void 0!==c.l&&void 0!==c.a&&void 0!==c.b?u=l.lab2rgb(c):void 0!==c.x&&void 0!==c.y&&void 0!==c.z?u=l.xyz2rgb(c):void 0!==c.h&&void 0!==c.s&&void 0!==c.v&&(u=d.hsv2rgb(c));return u},toHSV:function(c){if(void 0!==c.h&&void 0!==c.s&&void 0!==c.v)return c;
c=this.toRGB(c);return d.rgb2hsv(c)},toLAB:function(c){return void 0!==c.l&&void 0!==c.a&&void 0!==c.b?c:l.rgb2lab(this.toRGB(c))},toLCH:function(c){return void 0!==c.l&&void 0!==c.c&&void 0!==c.h?c:l.rgb2lch(this.toRGB(c))},toXYZ:function(c){return void 0!==c.x&&void 0!==c.y&&void 0!==c.z?c:l.rgb2xyz(this.toRGB(c))},getDojoColor:function(c){if(c){if(Array.isArray(c))return f.fromArray(c);if(void 0!==c.r&&void 0!==c.g&&void 0!==c.b)return c}},correctRGBLimits:function(c){var u=[c.r,c.g,c.b];B.forEach(u,
function(t,e){0>u[e]?u[e]=0:255<u[e]&&(u[e]=255);u[e]=Math.floor(u[e])});return{r:u[0],g:u[1],b:u[2],a:1}}}})},"esri/renderers/ShadedReliefRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),function(f,B,l,d,c,u,t,e){f=f(null,{declaredClass:"esri.renderer.ShadedReliefRenderer",constructor:function(r){r=r||{};this.hillshadeType=r.hillshadeType||"traditional";this.azimuth=null!=r.azimuth?r.azimuth:
315;this.altitude=null!=r.altitude?r.altitude:45;this.zFactor=r.zFactor||1;this.scalingType=r.scalingType||"none";this.pixelSizePower=null!=r.pixelSizePower?r.pixelSizePower:.664;this.pixelSizeFactor=null!=r.pixelSizeFactor?r.pixelSizeFactor:.024;this.removeEdgeEffect=r.removeEdgeEffect||!1;this.colorRamp=e.fromJson(r.colorRamp)},toJson:function(){var r={type:"rasterShadedRelief",hillshadeType:this.hillshadeType,azimuth:this.azimuth,altitude:this.altitude,zFactor:this.zFactor,scalingType:this.scalingType,
pixelSizePower:this.pixelSizePower,pixelSizeFactor:this.pixelSizeFactor,colorRamp:this.colorRamp&&this.colorRamp.toJson()};return u.fixJson(r)},toRenderingRule:function(r){}});l.setObject("renderer.ShadedReliefRenderer",f,c);return f})},"esri/renderers/ColormapRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ./arcadeUtils".split(" "),function(f,B,l,d,c,u,t,e,r){f=f(e,{declaredClass:"esri.renderer.ColormapRenderer",
constructor:function(m){this.colormapInfos=m&&m.colormapInfos},toJson:function(){var m=u.fixJson;var a={type:"rasterColormap",colormapInfos:B.map(this.colormapInfos||[],function(h,q){var n={};h.color&&null!==h.color&&3<=h.color.length&&(n.color=h.color,n.value=h.value||q,n.label=(h.label||q)+"");return m(n)})};a=l.mixin(this.inherited(arguments),a);return m(a)}});l.setObject("renderer.ColormapRenderer",f,c);return f})},"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel",
"../support/expressionUtils"],function(f,B,l,d){f.setObject("renderer.arcadeUtils",d,l);return d})},"esri/arcadeProfiles/labelingProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(f,B,l,d,c,u,t,e){f=new (f(null,{declaredClass:"esri.arcadeProfiles.LabelingProfile",defaults:{context:{vars:{$feature:"any"}}},initialize:function(r){var m=[];e.hasGeometryOperations(r)&&m.push(t.enableGeometryOperations());
return c(m)},isAsync:function(r){return!1},parse:function(r){return t.createSyntaxTree(r.expression)},compile:function(r){var m=B.clone(this.defaults.context);return r.syntaxTree?t.createFunction(r.syntaxTree,m):null},getEvalOptions:function(r){var m=r.feature;return{context:{vars:{$feature:m&&r.expression.hasVariable("$feature")?u.createFromGraphicLikeObject(m.geometry,m.attributes,r.layer):null},spatialReference:r.spatialReference}}}}));B.setObject("arcadeProfiles.labelingProfile",f,d);return f})},
"esri/tasks/QueryTask":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/DeferredList ../kernel ../sniff ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k){var g=r("esri-pbf"),b=B(null,{url:null,query:null,requestOptions:null,pagination:null,pageSize:null,_fetchDfd:null,_startPage:null,_result:null,constructor:function(v){this._handleSuccess=
l.hitch(this,this._handleSuccess);this._handleError=l.hitch(this,this._handleError);l.mixin(this,v);null==this.pagination&&(this.pagination=!1);null==this.pageSize&&(this.pageSize=1E3)},execute:function(){var v=new c(this._canceler);this._fetchDfd=v;this._result=null;this._sendRequest();return v.promise},_canceler:function(v){var y=v._pendingRequest;if(!v.isFulfilled()&&y&&!y.isFulfilled()){y.cancel();var D=y.results&&y.results[1]}v._pendingRequest=null;return D},_sendRequest:function(v){var y=this.query;
this.pagination&&(this._startPage=y.resultOffset=null==v?0:v,y.resultRecordCount=this.pageSize);v=this.requestOptions;this._fetchDfd._pendingRequest=m({url:this.url,content:y,handleAs:"pbf"===y.f?"arraybuffer":"json",callbackParamName:"callback",timeout:v&&v.timeout},v);this._fetchDfd._pendingRequest.then(this._handleSuccess).otherwise(this._handleError)},_handleSuccess:function(v){this.pagination?(v.exceededTransferLimit&&this._sendRequest(this._startPage+this.pageSize),this._result?this._result.features=
this._result.features.concat(v.features):this._result=v,this._fetchDfd.progress(v),v.exceededTransferLimit||this._fetchDfd.resolve(this._result)):(this._fetchDfd.progress(v),this._fetchDfd.resolve(v))},_handleError:function(v){this._fetchDfd.reject(v)}}),x=B(n,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},constructor:function(v,y){this._handler=
l.hitch(this,this._handler);this._relationshipQueryHandler=l.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=l.hitch(this,this._executeForIdsHandler);this._countHandler=l.hitch(this,this._countHandler);this._extentHandler=l.hitch(this,this._extentHandler);this.source=y&&y.source;this.gdbVersion=y&&y.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"rawExecute",c:2,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,
p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onRawExecuteComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},onExecuteForExtentComplete:function(){},execute:function(v,y,D,E,C){var z=C.assembly;v=this._encode(l.mixin({},this._url.query,{f:E&&E.format||"json"},v.toJson(z&&z[0])));var w=this._handler,
A=this._errorHandler;this.source&&(E={source:this.source.toJson()},v.layer=u.toJson(E));this.gdbVersion&&(v.gdbVersion=this.gdbVersion);var G="pbf"===v.f;if(G){var F;g||(F="QueryTask.execute: 'pbf' format is not supported in your browser.");if(F)return v=new c,v.addErrback(function(H){A(H,D,C.dfd)}),v.reject(Error(F)),v}F=this.requestOptions;F=m({url:this._url.path+"/query",content:v,callbackParamName:"callback",handleAs:G?"arraybuffer":"json",timeout:F&&F.timeout},F);v=[F];G&&v.push(x.loadPBFReader());
(new t(v)).then(function(H){C.dfd.isFulfilled()||(H=H[0],H[0]?w(H[1],G,y,D,C.dfd):A(H[1],D,C.dfd))});return F},rawExecute:function(v,y,D){y=y||{};v=this._encode(l.mixin({},this._url.query,{f:y.format||"json"},v.toJson(D.assembly&&D.assembly[0])));this.source&&(v.layer=u.toJson({source:this.source.toJson()}));this.gdbVersion&&(v.gdbVersion=this.gdbVersion);return(new b({url:this._url.path+"/query",query:v,requestOptions:this.requestOptions,pagination:y.pagination,pageSize:y.pageSize})).execute().then(null,
null,function(E){D.dfd.progress(E)}).then(l.hitch(this,function(E){this._successHandler([E],"onRawExecuteComplete",null,D.dfd)})).otherwise(l.hitch(this,function(E){this._errorHandler(E,null,D.dfd)}))},executeRelationshipQuery:function(v,y,D){v=this._encode(l.mixin({},this._url.query,{f:"json"},v.toJson()));var E=this._relationshipQueryHandler,C=this._errorHandler;this.gdbVersion&&(v.gdbVersion=this.gdbVersion);var z=new c(a._dfdCanceller),w=this.requestOptions,A=this._url.path;this.source&&void 0!==
this.source.mapLayerId&&null!==this.source.mapLayerId&&A.endsWith("/dynamicLayer")&&(A=A.slice(0,-13),A=A+"/"+this.source.mapLayerId);z._pendingDfd=m({url:A+"/queryRelatedRecords",content:v,callbackParamName:"callback",timeout:w&&w.timeout,load:function(G,F){E(G,F,y,D,z)},error:function(G){C(G,D,z)}},w);return z},executeForIds:function(v,y,D,E){var C=E.assembly;v=this._encode(l.mixin({},this._url.query,{f:"json",returnIdsOnly:!0},v.toJson(C&&C[0])));var z=this._executeForIdsHandler,w=this._errorHandler;
this.source&&(C={source:this.source.toJson()},v.layer=u.toJson(C));this.gdbVersion&&(v.gdbVersion=this.gdbVersion);C=this.requestOptions;return m({url:this._url.path+"/query",content:v,callbackParamName:"callback",timeout:C&&C.timeout,load:function(A,G){z(A,G,y,D,E.dfd)},error:function(A){w(A,D,E.dfd)}},C)},executeForCount:function(v,y,D,E){var C=E.assembly;v=this._encode(l.mixin({},this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},v.toJson(C&&C[0])));var z=this._countHandler,w=this._errorHandler;
this.source&&(C={source:this.source.toJson()},v.layer=u.toJson(C));this.gdbVersion&&(v.gdbVersion=this.gdbVersion);C=this.requestOptions;return m({url:this._url.path+"/query",content:v,callbackParamName:"callback",timeout:C&&C.timeout,load:function(A,G){z(A,G,y,D,E.dfd)},error:function(A){w(A,D,E.dfd)}},C)},executeForExtent:function(v,y,D,E){var C=E.assembly;v=this._encode(l.mixin({},this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},v.toJson(C&&C[0])));var z=this._extentHandler,w=
this._errorHandler;this.source&&(C={source:this.source.toJson()},v.layer=u.toJson(C));this.gdbVersion&&(v.gdbVersion=this.gdbVersion);C=this.requestOptions;return m({url:this._url.path+"/query",content:v,callbackParamName:"callback",timeout:C&&C.timeout,load:function(A,G){z(A,G,y,D,E.dfd)},error:function(A){w(A,D,E.dfd)}},C)},_handler:function(v,y,D,E,C){try{v&&y&&(v=x.pbfDeps.optimizedFeatures.convertToFeatureSet(x.pbfDeps.pbfQueryUtils.parsePBFFeatureQuery(v)));var z=new k(v);this._successHandler([z],
"onComplete",D,C)}catch(w){this._errorHandler(w,E,C)}},_relationshipQueryHandler:function(v,y,D,E,C){try{var z=v.geometryType,w=v.spatialReference,A={};d.forEach(v.relatedRecordGroups,function(G){var F={};F.geometryType=z;F.spatialReference=w;F.features=G.relatedRecords;F=new k(F);if(null!=G.objectId)A[G.objectId]=F;else for(var H in G)G.hasOwnProperty(H)&&"relatedRecords"!==H&&(A[G[H]]=F)});this._successHandler([A],"onExecuteRelationshipQueryComplete",D,C)}catch(G){this._errorHandler(G,E,C)}},_executeForIdsHandler:function(v,
y,D,E,C){try{this._successHandler([v.objectIds],"onExecuteForIdsComplete",D,C)}catch(z){this._errorHandler(z,E,C)}},_countHandler:function(v,y,D,E,C){try{var z=v.features,w=v.objectIds;if(w)var A=w.length;else{if(z)throw Error("Unable to perform query. Please check your parameters.");A=v.count}this._successHandler([A],"onExecuteForCountComplete",D,C)}catch(G){this._errorHandler(G,E,C)}},_extentHandler:function(v,y,D,E,C){try{v.extent&&(v.extent=new h(v.extent)),this._successHandler([v],"onExecuteForExtentComplete",
D,C)}catch(z){this._errorHandler(z,E,C)}}});x.loadPBFReader=function(){var v=new c;x.pbfDeps?v.resolve():f(["./support/pbfDeps"],function(y){x.pbfDeps=y;v.isFulfilled()||v.resolve()});return v.promise};q._createWrappers(x);l.setObject("tasks.QueryTask",x,e);return x})},"esri/tasks/query":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/jsonUtils ./SpatialRelationship ./QueryTask ./RelationshipQuery ./StatisticDefinition".split(" "),
function(f,B,l,d,c,u,t,e){var r=f(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=r.SPATIAL_REL_INTERSECTS},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,returnCentroid:null,returnDistinctValues:!1,returnExceededLimitFeatures:null,maxRecordCountFactor:null,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,fullText:null,distance:null,
units:null,resultOffset:null,resultRecordCount:null,resultType:null,cacheHint:null,sqlFormat:null,quantizationParameters:null,_units:{meters:"esriSRUnit_Meter",kilometers:"esriSRUnit_Kilometer",feet:"esriSRUnit_Foot",miles:"esriSRUnit_StatuteMile","nautical-miles":"esriSRUnit_NauticalMile","us-nautical-miles":"esriSRUnit_USNauticalMile"},toJson:function(m){var a={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,
geometryPrecision:this.geometryPrecision,sqlFormat:this.sqlFormat},h=m&&m.geometry||this.geometry,q=this.objectIds,n=this.outFields,k=this.outSpatialReference,g=this.groupByFieldsForStatistics,b=this.orderByFields,x=this.outStatistics;m=this.distance;h&&(a.geometry=h,a.geometryType=t.getJsonType(h),a.inSR=h.spatialReference.wkid||d.toJson(h.spatialReference.toJson()));q&&(a.objectIds=q.join(","));n&&(a.outFields=n.join(","));null!=this.returnCentroid&&(a.returnCentroid=this.returnCentroid);this.returnDistinctValues&&
(a.returnDistinctValues=!0);null!=this.returnExceededLimitFeatures&&(a.returnExceededLimitFeatures=this.returnExceededLimitFeatures);null!=this.maxRecordCountFactor&&(a.maxRecordCountFactor=this.maxRecordCountFactor);g&&(a.groupByFieldsForStatistics=g.join(","));b&&(a.orderByFields=b.join(","));if(x){var v=[];l.forEach(x,function(y){v.push(y.toJson())});a.outStatistics=d.toJson(v)}k?a.outSR=k.wkid||d.toJson(k.toJson()):h&&(a.outSR=h.spatialReference.wkid||d.toJson(h.spatialReference.toJson()));h=
this.timeExtent;a.time=h?h.toJson().join(","):null;(h=this.relationParam)&&this.spatialRelationship===r.SPATIAL_REL_RELATION&&(a.relationParam=h);m&&(a.distance=this.distance,this.hasOwnProperty("units")?a.units=this._units[this.units]||this._units.meters:a.units=this._units.meters);this.hasOwnProperty("start")&&(a.resultOffset=this.start,a.resultRecordCount=10,""===a.where&&(a.where="1\x3d1"));this.hasOwnProperty("num")&&(a.resultRecordCount=this.num);a.resultType=this.resultType;null!=this.cacheHint&&
(a.cacheHint=this.cacheHint);a.fullText=this.fullText?d.toJson(this.fullText):null;a.pixelSize=this.pixelSize?d.toJson(this.pixelSize.toJson()):null;a.multipatchOption=this.multipatchOption;this.quantizationParameters&&(a.quantizationParameters=d.toJson(this.quantizationParameters));a._ts=this._ts;return a}});B.mixin(r,e);B.setObject("tasks.Query",r,u);return r})},"esri/tasks/SpatialRelationship":function(){define(["dojo/_base/lang","dojo/has","../kernel"],function(f,B,l){B={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",
SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};f.setObject("tasks._SpatialRelationship",B,l);return B})},"esri/tasks/RelationshipQuery":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/json","dojo/has","../kernel"],function(f,B,l,d,c){f=f(null,{declaredClass:"esri.tasks.RelationshipQuery",definitionExpression:"",relationshipId:null,returnGeometry:!1,objectIds:null,outSpatialReference:null,outFields:null,orderByFields:null,toJson:function(){var u={definitionExpression:this.definitionExpression,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},t=this.objectIds,
e=this.outFields,r=this.outSpatialReference,m=this.orderByFields;t&&(u.objectIds=t.join(","));e&&(u.outFields=e.join(","));r&&(u.outSR=r.wkid||l.toJson(r.toJson()));m&&(u.orderByFields=m.join(","));u._ts=this._ts;return u}});B.setObject("tasks.RelationshipQuery",f,c);return f})},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,d){f=f(null,{declaredClass:"esri.tasks.StatisticDefinition",toJson:function(){return{statisticType:this.statisticType,
onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}});B.setObject("tasks.StatisticDefinition",f,d);return f})},"esri/layers/GraphicsLayer":function(){define("require dojo/_base/declare dojo/_base/Deferred dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/window dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom dojox/gfx dojox/gfx/matrix ./gfxSniff!esri-svg?dojox/gfx/filters ./layer ./support/webglUtils ./support/WebGLSurface ../kernel ../lang ../sniff ../Color ../domUtils ../symbols/MarkerSymbol ../symbols/SimpleMarkerSymbol ../symbols/utils ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/mathUtils ../geometry/screenUtils ../PluginTarget ./gfxSniff!esri-svg?dojox/gfx/svgext".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E,C,z,w,A,G,F,H,J,K){var Q=-1!==h.renderer.toLowerCase().indexOf("svg"),P=-1!==h.renderer.toLowerCase().indexOf("canvas"),I=P?"canvas-2d":h.renderer,N=9>y("ie");t=10===y("ie");var L=void 0===y("ie")&&7==y("trident"),W=t||L,Z=y("esri-touch"),aa=!!y("chrome"),ia=g.isWebGLEnabled(),R=Q&&y("esri-will-change"),S=ia||P;g=B(null,{declaredClass:"esri.layers._GraphicsContainer",_setMap:function(M,X){var fa=this._connects=[];this._map=M;this._useWillChange=
this._useGlobalTransform="css-transforms"===M.navigationMode&&R;if(S){var ea=r.create("div",{style:{position:"absolute",overflow:"visible"}},X);this._surface={getEventSource:function(){return ea}};P&&(fa.push(d.connect(ea,"onmousedown",this,this._canvasDownHandler)),fa.push(d.connect(ea,"onmouseup",this,this._canvasUpHandler)),fa.push(d.connect(ea,"onclick",this,this._canvasClickHandler)));ia&&(this._webglSurface=new b({map:M,node:ea}))}else ea=(this._surface=h.createSurface(X,M.width,M.height)).getEventSource(),
this._useWillChange&&m.set(ea,"will-change","transform"),m.set(ea=N?ea.parentNode:ea,{overflow:"visible",position:"absolute"});fa.push(d.connect(M,"onResize",this,"_onResizeHandler"));this._useGlobalTransform&&(fa.push(d.connect(M,"onPan",this,"_onPanHandler")),fa.push(d.connect(M,"onPanEnd",this,"_onPanEndHandler")),fa.push(d.connect(M,"onExtentChange",this,"_onExtentChangeHandler")));return ea},_reorderLayer:function(M,X,fa){X=X.getEventSource();S&&"svg"===M.surfaceType&&(X=X.parentNode);r.place(X,
this._surface.getEventSource(),fa)},_onPanHandler:function(M,X){var fa=this._map.__visibleRect;M=fa.x+X.x;X=fa.y+X.y;this._panDx=M;this._panDy=X;S||m.set(this._surface.getEventSource(),x._css.names.transform,x._css.translate(M,X))},_onPanEndHandler:function(M,X){X=this._map.__visibleRect;M=X.x;X=X.y;this._panDx=M;this._panDy=X;S||m.set(this._surface.getEventSource(),x._css.names.transform,x._css.translate(M,X))},_onExtentChangeHandler:function(M,X,fa,ea){fa&&(this._panDy=this._panDx=0,S||m.set(this._surface.getEventSource(),
x._css.names.transform,x._css.translate(0,0)))},_getTransform:function(){return{dx:this._panDx||0,dy:this._panDy||0}},_onResizeHandler:function(M,X,fa){M=this._surface.getEventSource();var ea=this._map,ha;N&&m.set(M=M.parentNode,{width:X+"px",height:fa+"px",clip:"rect(0px "+X+"px "+fa+"px 0px)"});e.set(M,"width",X);e.set(M,"height",fa);this._surface.declaredClass||u.forEach(M.childNodes,function(ra){e.set(ra,"width",X);e.set(ra,"height",fa)});ea.loaded&&(ea.graphics.suspended||(ea.graphics._resized=
!0),u.forEach(ea.graphicsLayerIds,function(ra){ha=ea.getLayer(ra);ha.suspended||(ha._resized=!0,ha._childLayer&&(ha._childLayer._resized=!0));ha._updateSVGFilters(null,null,X,fa)}),ea.graphics._updateSVGFilters(null,null,X,fa),ea._labels&&ea._labels._updateSVGFilters(null,null,X,fa))},_cleanUp:function(){u.forEach(this._connects,d.disconnect,d);this._map=this._surface=null},_processEvent:function(M){var X=this._map;M.screenPoint=new G(M.pageX-X.position.x,M.pageY-X.position.y);M.mapPoint=X.toMap(M.screenPoint)},
_canvasDownHandler:function(M){this._processEvent(M);this._downPt=M.screenPoint.x+","+M.screenPoint.y},_canvasUpHandler:function(M){this._processEvent(M);this._upPt=M.screenPoint.x+","+M.screenPoint.y},_tolerance:15,_isPrimaryMatch:function(M,X,fa,ea){if(!M.visible||!X)return!1;var ha=X.getTransformedBoundingBox();if(ha){var ra=new F(ha[0].x,ha[0].y,ha[2].x,ha[2].y);delete ra.spatialReference;return Z?ra.intersects(fa):ra.contains(ea)}return u.some(X.children||[],function(Aa){ha=Aa.getTransformedBoundingBox();
ra=new F(ha[0].x,ha[0].y,ha[2].x,ha[2].y);delete ra.spatialReference;return Z?ra.intersects(fa):ra.contains(ea)})},_canvasClickHandler:function(M){if(this._downPt&&this._upPt&&this._downPt===this._upPt){this._processEvent(M);var X=this._map,fa=u.map(X.graphicsLayerIds,function(ja){return X.getLayer(ja)});fa.push(X.graphics);fa.reverse();fa=u.filter(fa,function(ja){return ja.loaded&&!ja.hasWebGLSurface()&&ja._mouseEvents&&!ja.suspended&&(!v.isDefined(ja.opacity)||0<ja.opacity)});var ea=M.screenPoint,
ha=this._tolerance,ra=ea.x-ha,Aa=ea.y+ha,Ea=ea.x+ha;ha=ea.y-ha;var va=new F(ra,ha,Ea,Aa);ra=X.toMap(new G(ra,Aa));Ea=X.toMap(new G(Ea,ha));Aa=ra.spatialReference._getInfo();var Ga=new F(F.prototype._normalizeX(ra.x,Aa).x,ra.y,F.prototype._normalizeX(Ea.x,Aa).x,Ea.y,ra.spatialReference),ca;delete va.spatialReference;u.some(fa,function(ja){ja=u.filter(ja.graphics,function(za){return this._isPrimaryMatch(za,za.getDojoShape(),va,ea)||!(!za._bgShape||!this._isPrimaryMatch(za,za._bgShape,va,ea))},this);
ja.reverse();if(0<ja.length){var wa;u.some(ja,function(za){return za.geometry&&Ga.intersects(za.geometry)?(wa=za,!0):!1});if(wa)return ca=wa,!0}return!1},this);ca&&(fa=ca.getLayer())&&(M.graphic=ca,fa.onClick(M))}}});k=B(k,{declaredClass:"esri.layers._GraphicsLayer",managedSuspension:!0,surfaceType:I,webglEnabled:ia,renderer:null,_eventMap:{"graphic-add":["graphic"],"graphic-remove":["graphic"],"renderer-change":["renderer"]},_suspendGraphics:!1,constructor:function(M,X){M=M||{};if(c.isString(M)||
c.isObject(M)&&(M.layerDefinition||M.query))M=X;this._params=c.mixin({displayOnPan:!0,drawMode:!0,styling:!0},M);X=this._params.dataAttributes;"string"===typeof X&&(X=[X]);this.styling=Q?this._params.styling:!0;this.dataAttributes=X;this.infoTemplate=M&&M.infoTemplate;this.graphics=[];this._draw=c.hitch(this,this._draw);this._refresh=c.hitch(this,this._refresh);this._acquireSVGMarker=c.hitch(this,this._acquireSVGMarker);this._evalSurfaceType=c.hitch(this,this._evalSurfaceType);this._setSurfaceType=
c.hitch(this,this._setSurfaceType);this.setWebGLEnabled(null!=this._params.webglEnabled?this._params.webglEnabled:this.webglEnabled);this.registerConnectEvents()},getNode:function(){return this._div&&this._div.getEventSource()},setDrawMode:function(M){this._params.drawMode=M},suspendGraphics:function(M){this._suspendGraphics=M;u.forEach(this.graphics,function(X){X._suspended=M})},setWebGLEnabled:function(M){var X=this.webglEnabled;this.webglEnabled=(M||!1)&&ia;X!==this.webglEnabled&&(this._evalSurfaceType(),
this.onWebGLEnabledChange())},hasWebGLSurface:function(){return"webgl"===this.surfaceType},_getSurfaceType:function(M){return M&&"webgl"===M.surfaceType?"webgl":I},_evalSurfaceType:function(M){ia&&(M?this._setSurfaceType():null==this._evalSurfaceTimerHandle&&(this._evalSurfaceTimerHandle=setTimeout(this._setSurfaceType,0)))},_hasPendingSurfaceEval:function(){return!!this._evalSurfaceTimerHandle},_setSurfaceType:function(){clearTimeout(this._evalSurfaceTimerHandle);this._evalSurfaceTimerHandle=null;
var M=this._canUseWebGLSurface()?"webgl":I;this.surfaceType!==M?(this.surfaceType=M,this._handleSurfaceChange(),this.onSurfaceChange()):this._pendingRedraw&&this._redraw()},_handleSurfaceChange:function(){this._cancelWebGLDepsLoad();this._webglDepsPromise=this._prepareToAttach(this._map);this._webglDepsPromise.always(c.hitch(this,function(M){this._webglDepsPromise=null;M&&"cancel"===M.dojoType||this._evalSurface()}))},_cancelWebGLDepsLoad:function(){this._webglDepsPromise&&!this._webglDepsPromise.isFulfilled()&&
this._webglDepsPromise.cancel();this._webglDepsPromise=null},_evalSurface:function(){var M=this._map,X=this._div;M&&X&&this._getSurfaceType(X)!==this.surfaceType&&(M._detachGraphicsLayer(this),M._attachGraphicsLayer(this))},_canUseWebGLSurface:function(M){M=M||this._map;return this.webglEnabled&&(!M||M.webglEnabled&&(M.ownsWebGLContext(this)||M.isWebGLContextAvailable()))&&this._params.drawMode&&this._isWebGLCompatible()},_isWebGLCompatible:function(){return!1},_prepareToAttach:function(M){var X=
new l;!this.webglDeps&&this._canUseWebGLSurface(M)?f(["./support/webglDeps"],c.hitch(this,function(fa){this.webglDeps=fa;X.isFulfilled()||X.resolve()})):X.resolve();return X.promise},_setMap:function(M,X){this.inherited(arguments);this._map=M;this._evalSurfaceType(!0);this._webglChangeMapHandle=M.on("webgl-enabled-change",c.hitch(this,function(){this._evalSurfaceType()}));this._wrap=M.wrapAround180;this._srInfo=M.spatialReference._getInfo();this._svgFilters={};this._lineMarkers={};if(this.hasWebGLSurface())M.acquireWebGLContext(this),
this._div=M._gc._webglSurface.createRenderer(this.webglDeps.WebGLRenderer,M.width,M.height,this);else{if("svg"===this.surfaceType)if(S){X=h.createSurface(X.getEventSource(),M.width,M.height);var fa=X.getEventSource();m.set(fa,{position:"absolute",overflow:"visible",pointerEvents:"none"});M._gc._useWillChange&&m.set(fa,"will-change","transform");this._div=X.createGroup();m.set(this._div.getEventSource(),"pointer-events","auto")}else this._div=X.createGroup();else X=h.createSurface(X.getEventSource(),
M.width,M.height),m.set(X.rawNode,"position","absolute"),this._div=X.createGroup(),this._renderProto=this._div.constructor.prototype._render,this._div._render=c.hitch(this,this._canvasRender);this._bgGroup=this._div.createGroup()}this._div.getEventSource().id=this.id+"_layer";this._initOpacity();return this._div},_unsetMap:function(M,X){M.releaseWebGLContext(this);"webgl"===this._div.surfaceType?M._gc._webglSurface.destroyRenderer(this._div):(u.forEach(this.graphics,function(fa){fa._shape=null}),
"svg"===this.surfaceType?S?(X=this._div.parent,this._div.clear(),X.remove(this._div),r.destroy(this._div.getEventSource()),r.destroy(X.getEventSource())):(this._div.clear(),X.remove(this._div),r.destroy(this._div.getEventSource())):(X=this._div.getParent(),X._parent={},r.destroy(X.rawNode),X.destroy()));this._map=this._div=this._svgFilters=this._lineMarkers=null;this._pendingRedraw=!1;clearTimeout(this._wakeTimer);this._wakeTimer=null;clearTimeout(this._evalSurfaceTimerHandle);this._evalSurfaceTimerHandle=
null;this._webglChangeMapHandle&&this._webglChangeMapHandle.remove();this._cancelWebGLDepsLoad();this._disableDrawConnectors();this.inherited(arguments)},_initOpacity:function(){var M=this.opacity;v.isDefined(M)&&1>M&&this.setOpacity(M,!0)},_onZoomStartHandler:function(){this.hasWebGLSurface()||E.hide(this._div.getEventSource())},_onExtentChangeHandler:function(M,X,fa,ea){clearTimeout(this._wakeTimer);this._wakeTimer=null;fa?(M=this._map.__visibleRect,X=this._div,this._evalSDRenderer(),this._refresh(!0),
this._params._child||this._updateTransform(X,M.x,M.y,!0),this._renderProto&&X.surface.pendingRender?this._dirty=!0:this.suspended||E.show(X.getEventSource())):this._resized&&(this._resized=!1,this._refresh(!1));if(0<this.graphics.length)this.onUpdate()},_canvasRender:function(){var M=this._div;this._dirty&&(delete this._dirty,this.suspended||E.show(M.getEventSource()));return this._renderProto.apply(M,arguments)},_refresh:function(M){if(!this.hasWebGLSurface()){var X=this.graphics,fa=X.length,ea,
ha=this._draw;for(ea=0;ea<fa;ea++)ha(X[ea],M)}},refresh:function(){this._refresh(!0)},_redraw:function(){this._pendingRedraw=!1;this.hasWebGLSurface()?this._div&&this._div.redraw():this._refresh(!0)},redraw:function(){this._hasPendingSurfaceEval()?this._pendingRedraw=!0:this._redraw()},hasLocalNavigationTransform:function(){return!(this._map&&this._map._gc._useGlobalTransform)},getNavigationTransform:function(){var M={dx:0,dy:0};this._map&&(this.hasLocalNavigationTransform()?this._div&&!this.hasWebGLSurface()&&
(M=this._div.getTransform()):M=this._map._gc._getTransform());return M},_onPanHandler:function(M,X){this._panDx=X.x;this._panDy=X.y;M=this._map.__visibleRect;this._updateTransform(this._div,M.x+X.x,M.y+X.y);L&&this._updateSVGMarkers()},_onPanEndUpdateHandler:function(M,X){M=this._map.__visibleRect;this._params._child||X.x===this._panDx&&X.y===this._panDy?(this._updateSVGFilters(-M.x,-M.y),this._updateSVGMarkers()):this._updateTransform(this._div,M.x,M.y,!0);this._refresh(!1);if(this.graphics.length)this.onUpdate()},
_onPanStartHandler:function(){E.hide(this._div.getEventSource())},_onPanEndHandler:function(){var M=this._map.__visibleRect,X=this._div;this._updateTransform(X,M.x,M.y,!0);this._refresh(!1);this._renderProto&&X.surface.pendingRender?this._dirty=!0:E.show(X.getEventSource());if(this.graphics.length)this.onUpdate()},_updateTransform:function(M,X,fa,ea){this.hasWebGLSurface()||(this.hasLocalNavigationTransform()?M.setTransform(q.translate({x:X,y:fa})):S&&m.set(this._div.parent.getEventSource(),x._css.names.transform,
x._css.translate(X,fa)),ea&&(this._updateSVGFilters(-X,-fa),this._updateSVGMarkers()))},onSuspend:function(){this.inherited(arguments);E.hide(this._div.getEventSource());clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(M){this.inherited(arguments);M.firstOccurrence&&this._evalSDRenderer();this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(c.hitch(this,function(){this.suspended||this._map.__zooming||this._onExtentChangeHandler(null,
null,!0)}),0)},_enableDrawConnectors:function(){var M=this._map,X=d.connect;this._disableDrawConnectors();this._params.displayOnPan?(this._params._child||(this._onPanHandler_connect=X(M,"onPan",this,"_onPanHandler")),this._onPanEndHandler_connect=X(M,"onPanEnd",this,"_onPanEndUpdateHandler")):(this._onPanStartHandler_connect=X(M,"onPanStart",this,"_onPanStartHandler"),this._onPanEndHandler_connect=X(M,"onPanEnd",this,"_onPanEndHandler"));this._onZoomStartHandler_connect=X(M,"onZoomStart",this,"_onZoomStartHandler");
this._onExtentChangeHandler_connect=X(M,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var M=d.disconnect;M(this._onExtentChangeHandler_connect);M(this._onZoomStartHandler_connect);M(this._onPanHandler_connect);M(this._onPanStartHandler_connect);M(this._onPanEndHandler_connect);this._onExtentChangeHandler_connect=this._onZoomStartHandler_connect=this._onPanHandler_connect=this._onPanStartHandler_connect=this._onPanEndHandler_connect=null},_updateExtent:function(M){var X=
M.geometry;if(!X)M._extent=null;else if(!(M._extent=X.getExtent())){if("esri.geometry.Point"===X.declaredClass){var fa=X.x;var ea=X.y}else if("esri.geometry.Multipoint"===X.declaredClass)fa=X.points[0][0],ea=X.points[0][1];else{M._extent=null;return}M._extent=new F(fa,ea,fa,ea,X.spatialReference)}},_intersects:function(M,X,fa){var ea=M.spatialReference,ha=X.spatialReference,ra=ea&&ha&&!ea.equals(ha)&&ea._canProject(ha)&&4326===ha.wkid;if(this._wrap&&!fa){fa=[];ea=M._getFrameWidth();var Aa=this._srInfo,
Ea=M._clip?M._getAvailExtent():M.extent,va,Ga=[];var ca=X._partwise;ra&&(Ea=M.geographicExtent,Aa=ha._getInfo());M=Ea._getParts(Aa);if(ca&&ca.length)for(X=[],ha=0,ra=ca.length;ha<ra;ha++)X=X.concat(ca[ha]._getParts(Aa));else X=X._getParts(Aa);ha=0;for(ra=X.length;ha<ra;ha++){var ja=X[ha];Aa=0;for(Ea=M.length;Aa<Ea;Aa++){var wa=M[Aa];if(wa.extent.intersects(ja.extent))for(ca=0,va=ja.frameIds.length;ca<va;ca++)fa.push((wa.frameIds[0]-ja.frameIds[ca])*ea)}}ha=0;for(ra=fa.length;ha<ra;ha++)ca=fa[ha],
u.indexOf(fa,ca)===ha&&Ga.push(ca);return Ga.length?Ga:null}return(ra?M.geographicExtent:M.extent).intersects(X)?[0]:null},_defaultMarker:{type:"simplemarkersymbol",style:"square",size:1,xoffset:0,yoffset:0,angle:0},_draw:function(M,X){if(!this.hasWebGLSurface()&&this._params.drawMode&&this._map&&!this.suspended&&!this._map.__zooming&&!this._resized)try{var fa=M._extent,ea,ha,ra=!Q||this.styling,Aa=Q&&this.dataAttributes,Ea=M.getDojoShape(),va;if(!M._suspended&&M.visible&&fa&&(ea=this._intersects(this._map,
fa,M.geometry._originOnly))&&(ha=ra?this._getSymbol(M):this._defaultMarker)){if(M._offsets&&M._offsets.join(",")===ea.join(",")?va=!0:M._offsets=ea,!Ea||X||!va){var Ga=M.geometry.type;X={graphic:M};var ca=M._bgShape,ja=ra&&!M.symbol?this._getRenderer(M):null,wa=ja&&ja.backgroundFillSymbol;if("point"===Ga)this._isInvalidShape(ha,Ea)&&this._removeShape(M),M._shape=this._drawPoint(this._div,M.geometry,ha,M.getDojoShape(),ea,ja,M),ra&&this._symbolizePoint(M.getDojoShape(),ha,ja,M);else if("multipoint"===
Ga)this._drawMarkers(M,ha,ea,ja),ra&&this._symbolizeMarkers(M,ha,ja);else{var za;Ga=ha;var Fa;ra&&(Ga=(za="simplemarkersymbol"===ha.type||"picturemarkersymbol"===ha.type||"textsymbol"===ha.type?ha:null)?wa:ha);if(ra&&Ga&&-1<Ga.type.indexOf("fillsymbol")){var O=this._bgGroup;var ya=!(!O||!za)}ca&&!ya&&this._removeBgShape(M);if(Ga){!ya&&(this._isInvalidShape(Ga,M._shape)||M._shape&&M._shape._isCentroidMarker)&&this._removeShape(M,!1);if(Fa=this._drawShape(M,ea,O||this._div,ya?ca:M.getDojoShape()))Fa._isCentroidMarker=
!1;ra&&this._symbolizeShape(Fa,Ga,ja,Ga===wa,M);M[ya?"_bgShape":"_shape"]=Fa}if(za){(this._isInvalidShape(za,M._shape)||M._shape&&!M._shape._isCentroidMarker)&&this._removeShape(M,!1);var Ha=M.geometry.getCentroid();if(Fa=Ha&&this._drawPoint(this._div,Ha,za,M._shape,ea,ja,M))Fa._isCentroidMarker=!0,this._symbolizePoint(Fa,za,ja,M);M._shape=Fa}}P||(M._bgShape&&this._initNode(M,M._bgShape,M._bgShape!==ca,X,Aa),M._shape&&this._initNode(M,M._shape,M._shape!==Ea,X,Aa));M._applyDataAttrs();X.node=M.getNode();
this.onGraphicDraw(X)}}else Ea&&this._removeShape(M)}catch(da){this._errorHandler(da,M)}},_initNode:function(M,X,fa,ea,ha){if(X=X&&X.getNode())X.e_graphic=M,this._addDataAttrs(M,ha,X),fa&&(ea.node=X,this.onGraphicNodeAdd(ea))},_removeShape:function(M,X,fa){var ea=M.getDojoShape(),ha=ea&&ea.getNode();ea&&!fa&&(ea.removeShape(),ea.destroy());M._shape=M._offsets=null;!1!==X&&this._removeBgShape(M,fa);if(ha&&(ha.e_graphic=null,!P))this.onGraphicNodeRemove({graphic:M,node:ha})},_removeBgShape:function(M,
X){var fa=M._bgShape,ea=fa&&fa.getNode();fa&&!X&&(fa.removeShape(),fa.destroy());M._bgShape=null;if(ea&&(ea.e_graphic=null,!P))this.onGraphicNodeRemove({graphic:M,node:ea})},_addDataAttrs:function(M,X,fa){var ea=M.attributes,ha,ra=X?X.length:0,Aa=this._getRenderer(M);if(fa&&ea){for(ha=0;ha<ra;ha++)(fa=X[ha])&&M.attr("data-"+fa,ea[fa]);!this.styling&&Aa&&(Aa.getBreakIndex?(X=Aa.getBreakIndex(M),M.attr("data-class-break",-1!==X?X:null)):Aa.getUniqueValueInfo&&(X=Aa.getUniqueValueInfo(M),M.attr("data-unique-value",
X?X.value:null)))}},_drawShape:function(M,X,fa,ea){M=M.geometry;var ha=M.type,ra=this._map,Aa=ra.extent,Ea=ra.width,va=ra.height;ra=ra.__visibleRect;var Ga=[],ca;var ja="extent"===ha;if("rect"===ha||ja)Ga={x:0,y:0,spatialReference:M.spatialReference},Ga.x=ja?M.xmin:M.x,Ga.y=ja?M.ymax:M.y,ha=J.toScreenPoint(Aa,Ea,va,Ga),Ga.x=ja?M.xmax:M.x+M.width,Ga.y=ja?M.ymin:M.y+M.height,M=J.toScreenPoint(Aa,Ea,va,Ga),X={x:ha.x-ra.x+X[0],y:ha.y-ra.y,width:Math.abs(M.x-ha.x),height:Math.abs(M.y-ha.y)},0===X.width&&
(X.width=1),0===X.height&&(X.height=1),ea=this._drawRect(fa,ea,X);else if("polyline"===ha||"polygon"===ha){ja=0;for(ca=X.length;ja<ca;ja++)Ga=Ga.concat(J._toScreenPath(Aa,Ea,va,M,-ra.x+X[ja],-ra.y));ea=this._drawPath(fa,ea,Ga);this._rendererLimits&&("polyline"===ha?this._clipPolyline(ea,M):this._clipPolygon(ea,M))}return ea},_drawRect:function(M,X,fa){return X?X.setShape(fa):M.createRect(fa)},_drawImage:function(M,X,fa){return X?X.setShape(fa):M.createImage(fa)},_drawCircle:function(M,X,fa){return X?
X.setShape(fa):M.createCircle(fa)},_drawPath:function(){return N?function(M,X,fa,ea){fa=ea?fa:fa.join(" ");if(X)return X.setShape(fa);X=M.createObject(ea?h.Path:h.EsriPath,fa);M._overrideSize(X.getEventSource());return X}:function(M,X,fa,ea){fa=ea?fa:fa.join(" ");return X?X.setShape(fa):M.createPath(fa)}}(),_drawText:function(M,X,fa){return X?X.setShape(fa):M.createText(fa)},_evalSDRenderer:function(M){var X=this._map,fa=this.renderer,ea,ha=this._rndForScale;X&&X.loaded&&fa&&fa.getRendererInfo&&(ea=
"zoom"===fa.rangeType?fa.getRendererInfoByZoom(X.getZoom()):fa.getRendererInfoByScale(X.getScale()));this._rndForScale=ea&&ea.renderer;M||this._rndForScale==ha||this.emit("renderer-change",{renderer:this._rndForScale})},_getRenderer:function(M){var X=this._rndForScale||this.renderer;M&&X&&X.getObservationRenderer&&(X=X.getObservationRenderer(M));return X},_getSymbol:function(M){var X=this._getRenderer();return M.symbol||X&&X.getSymbol(M)},_getVariable:function(M,X,fa){if(M)var ea=(M=M.getVisualVariablesForType(X,
fa))&&M[0];return ea},_applyOpacity:function(M,X,fa,ea){X=X.getOpacity(ea,{opacityInfo:fa});null!=X&&(M=new D(M),M.a=X);return M},_symbolizeShape:function(M,X,fa,ea,ha){var ra=X.getStroke(),Aa=X.getFill(),Ea=X.type,va=-1!==Ea.indexOf("linesymbol"),Ga=-1!==Ea.indexOf("fillsymbol")?null:this._getVariable(fa,"sizeInfo",!1),ca=this._getVariable(fa,"colorInfo",!1),ja=this._getVariable(fa,"opacityInfo",!1),wa=va?"none"!==X.style:X.outline&&"none"!==X.outline.style,za=va?null:this._getVariable(fa,"sizeInfo",
"outline");Ga=(Ga=ea?za:za||Ga)?fa.getSize(ha,{sizeInfo:Ga,resolution:this._map.getResolutionInMeters(),scale:this._map.getScale()}):null;ea&&(ca=ja=null);if((ca||ja)&&"picturefillsymbol"!==Ea)if(va){var Fa=ra&&ra.color;ca&&(Fa=fa.getColor(ha,{colorInfo:ca})||Fa);Fa&&ja&&(Fa=this._applyOpacity(Fa,fa,ja,ha))}else if(Aa&&Aa.toCss){var O=Aa;ca&&(O=fa.getColor(ha,{colorInfo:ca})||O);O&&ja&&(O=this._applyOpacity(O,fa,ja,ha))}M.setStroke(!wa||null==Ga&&!Fa?ra:c.mixin({},ra,null!=Ga?{width:Ga}:null,Fa&&
{color:Fa})).setFill(O||Aa);va&&w.applyLineMarker(M,X,Fa,this._acquireSVGMarker)},_smsToPath:function(){return N?function(M,X,fa,ea,ha,ra,Aa,Ea,va){switch(X){case M.STYLE_SQUARE:return["M",ha+","+Aa,"L",ra+","+Aa,ra+","+Ea,ha+","+Ea,"X","E"];case M.STYLE_CROSS:return["M",fa+","+Aa,"L",fa+","+Ea,"M",ha+","+ea,"L",ra+","+ea,"E"];case M.STYLE_X:return["M",ha+","+Aa,"L",ra+","+Ea,"M",ha+","+Ea,"L",ra+","+Aa,"E"];case M.STYLE_DIAMOND:return["M",fa+","+Aa,"L",ra+","+ea,fa+","+Ea,ha+","+ea,"X","E"];case M.STYLE_TARGET:return["M",
ha+","+Aa,"L",ra+","+Aa,ra+","+Ea,ha+","+Ea,ha+","+Aa,"M",ha-va+","+ea,"L",ha+","+ea,"M",fa+","+(Aa-va),"L",fa+","+Aa,"M",ra+va+","+ea,"L",ra+","+ea,"M",fa+","+(Ea+va),"L",fa+","+Ea,"E"]}}:function(M,X,fa,ea,ha,ra,Aa,Ea,va){switch(X){case M.STYLE_SQUARE:return["M",ha+","+Aa,ra+","+Aa,ra+","+Ea,ha+","+Ea,"Z"];case M.STYLE_TRIANGLE:return["M",fa+","+Aa,ra+","+Ea,ha+","+Ea,"Z"];case M.STYLE_CROSS:return["M",fa+","+Aa,fa+","+Ea,"M",ha+","+ea,ra+","+ea];case M.STYLE_X:return["M",ha+","+Aa,ra+","+Ea,"M",
ha+","+Ea,ra+","+Aa];case M.STYLE_DIAMOND:return["M",fa+","+Aa,ra+","+ea,fa+","+Ea,ha+","+ea,"Z"];case M.STYLE_TARGET:return M=["M",ha+","+Aa,ra+","+Aa,ra+","+Ea,ha+","+Ea,ha+","+Aa],va&&M.push("M",ha-va+","+ea,ha+","+ea,"M",fa+","+(Aa-va),fa+","+Aa,"M",ra+va+","+ea,ra+","+ea,"M",fa+","+(Ea+va),fa+","+Ea),M}}}(),_pathStyles:{square:1,cross:1,x:1,diamond:1,target:1},_typeMaps:{picturemarkersymbol:"image",picturefillsymbol:"path",simplefillsymbol:"path",simplelinesymbol:"path",cartographiclinesymbol:"path",
textsymbol:"text"},_isInvalidShape:function(M,X){X=X&&X.shape&&X.shape.type;var fa=M&&M.type;M=M&&M.style;"rect"===X&&(X="path");fa&&(M=this._typeMaps[fa]||M);this._pathStyles[M]&&(M="path");return"shieldlabelsymbol"===fa?!0:!(!X||!M||X===M)},_reArialFont:/\s*(^|,)\s*arial\s*(,|$)\s*/i,_fallbackFont:"Arial",_drawPoint:function(M,X,fa,ea,ha,ra,Aa){var Ea=fa.type,va=this._map,Ga=va.__visibleRect,ca=J.toScreenPoint(va.extent,va.width,va.height,X).offset(-Ga.x+ha[0],-Ga.y);Ga=ca.x;var ja=ca.y;X=[];var wa=
this._getVariable(ra,"rotationInfo",!1);wa=wa?ra.getRotationAngle(Aa,{rotationInfo:wa}):null;var za=this._getVariable(ra,"sizeInfo",!1);va=null!=Aa.size?Aa.size:za&&ra.getSize(Aa,{sizeInfo:za,shape:fa.style,resolution:va.getResolutionInMeters(),scale:va.getScale()});wa&&X.push(q.rotategAt(wa,ca));if(0!==fa.xoffset||0!==fa.yoffset){var Fa=q.translate(fa.xoffset,-fa.yoffset);X.push(Fa)}0!==fa.angle&&X.push(q.rotategAt(fa.angle,ca));if("simplemarkersymbol"===Ea){var O=fa.style;ra=Math.round;null!=va?
Fa&&(null!=Fa.dx&&(Fa.dx=Fa.dx/fa.size*va),null!=Fa.dy&&(Fa.dy=Fa.dy/fa.size*va)):va=fa.size;switch(O){case z.STYLE_SQUARE:case z.STYLE_TRIANGLE:case z.STYLE_CROSS:case z.STYLE_X:case z.STYLE_DIAMOND:fa=isNaN(va)?16:va/2;O=this._drawPath(M,ea,this._smsToPath(z,O,Ga,ja,ra(Ga-fa),ra(Ga+fa),ra(ja-fa),ra(ja+fa)));break;case z.STYLE_TARGET:Aa=fa._targetWidth/2;Fa=fa._targetHeight/2;O=this._drawPath(M,ea,this._smsToPath(z,O,Ga,ja,ra(Ga-Aa),ra(Ga+Aa),ra(ja-Fa),ra(ja+Fa),fa._spikeSize));break;case z.STYLE_PATH:O=
this._drawPath(M,ea,fa.path,!0);fa=O.getBoundingBox();M=this._getScaleMatrix(fa,va);1===M.xx&&1===M.yy||X.push(q.scaleAt(M.xx,M.yy,ca));X.push(q.translate(-(fa.x+fa.width/2)+Ga,-(fa.y+fa.height/2)+ja));break;default:fa=isNaN(va)?16:va/2,O=this._drawCircle(M,ea,{cx:Ga,cy:ja,r:fa})}}else if("shieldlabelsymbol"===Ea)O=fa.width,ca=fa.height,ea=M.createGroup(),O=M.createImage({x:Ga-O/2,y:ja-ca/2,width:O,height:ca,src:fa.url}),ea.add(O),null!=fa.font&&(ja+=.2*fa.getHeight(),M=M.createText({type:"text",
text:fa.text,x:Ga,y:ja,align:"middle",decoration:fa.decoration,rotated:fa.rotated,kerning:fa.kerning}),M.setFont(fa.font),M.setFill(fa.color),ea.add(M)),O=ea;else if("picturemarkersymbol"===Ea){if(null==va?(O=fa.width,ca=fa.height):(ca=va,O=fa.width/fa.height*ca,Fa&&(null!=Fa.dx&&(Fa.dx=Fa.dx/fa.width*O),null!=Fa.dy&&(Fa.dy=Fa.dy/fa.height*ca))),O=this._drawImage(M,ea,{x:Ga-O/2,y:ja-ca/2,width:O,height:ca,src:fa.url}),Q&&(M=O.getNode()))fa=(fa=this._getVariable(ra,"opacityInfo",!1))?ra.getOpacity(Aa,
{opacityInfo:fa}):null,null!=fa?M.setAttribute("opacity",fa):M.setAttribute("opacity",1)}else if("textsymbol"===Ea){if(ra=fa.font){O=null!=va;Aa=ra.family&&!this._reArialFont.test(ra.family);if(O||Aa||P)ra=new ra.constructor(ra.toJson());O&&ra.setSize(va);P&&(ra.size+="px");Aa&&ra.setFamily(ra.family+","+this._fallbackFont)}O=this._drawText(M,ea,{type:"text",text:fa.text,x:Ga,y:ja,align:fa.getSVGAlign(),decoration:fa.decoration||ra&&ra.decoration,rotated:fa.rotated,kerning:fa.kerning});ra&&O.setFont(ra);
Q&&(M=O.getNode(),Ga=fa.getSVGBaseline(),ja=fa.getSVGBaselineShift(),M&&(M.setAttribute("dominant-baseline",Ga),ja&&M.setAttribute("baseline-shift",ja),this._applyHalo(O,fa.haloColor,fa.haloSize)))}O.setTransform(q.multiply(X));O._wrapOffsets=ha;return O},_acquireSVGMarker:function(M,X,fa,ea){M=this._getSVGMarkerId(X,ea);var ha=this._getSVGMarker(M);ha||(ha=w.createSVGMarker(X,M,fa,ea),this._div.getParent().defNode.appendChild(ha),this._lineMarkers[M]=ha);return ha},_getSVGMarkerId:function(M,X){return"marker_"+
this._map.id+"_"+M.r+"_"+M.g+"_"+M.b+"_"+X},_getSVGMarker:function(M){return this._lineMarkers[M]},_updateSVGMarkers:function(){if(Q&&W){var M=this._lineMarkers,X;for(X in M){var fa=M[X];fa.setAttribute("id",X+"_temp");fa.setAttribute("id",X)}}},_applyHalo:function(M,X,fa){var ea=X&&fa?this._getHaloId(X,fa):null;M.setFilter(X&&fa?y("webkit")||y("ff")?this._getDilateFilter(X,fa,ea):this._getOffsetFilter(X,fa,ea):null)},_getDilateFilter:function(M,X,fa){var ea=this._getSVGFilter(fa);ea||(ea=this._createSVGFilter({id:fa},
[n.feMorphology({operator:"dilate",radius:X,result:"dilated"}),n.feFlood({"flood-color":M.toCss(!0)}),n.feComposite({in2:"dilated",operator:"in",result:"composite"}),n.feMerge("composite","SourceGraphic")]));return ea},_getOffsetFilter:function(M,X,fa){var ea=this._getSVGFilter(fa);if(!ea){M=M.toCss(!0);ea=this._offsetPrimitives;var ha,ra=ea.length,Aa=[],Ea=[];for(ha=0;ha<ra;ha++){var va=ea[ha],Ga="offset"+va.dir,ca="composite"+va.dir;Ea.push(ca);Aa.push(n.feOffset({dx:va.dx*X,dy:va.dy*X,"in":"SourceAlpha",
result:Ga}),n.feFlood({"flood-color":M}),n.feComposite({in2:Ga,operator:"in",result:ca}))}Ea.push("SourceGraphic");Aa.push(n.feMerge.apply(n.feMerge,Ea));ea=this._createSVGFilter({id:fa},Aa)}return ea},_offsetPrimitives:[{dir:"L",dx:-1,dy:0},{dir:"TL",dx:-1,dy:-1},{dir:"T",dx:0,dy:-1},{dir:"TR",dx:1,dy:-1},{dir:"R",dx:1,dy:0},{dir:"BR",dx:1,dy:1},{dir:"B",dx:0,dy:1},{dir:"BL",dx:-1,dy:1}],_getHaloId:function(M,X){return"halo_"+this._map.id+"_"+this.id+"_"+M.r+"_"+M.g+"_"+M.b+"_"+M.a+"_"+X},_getSVGFilter:function(M){return this._svgFilters[M]},
_createSVGFilter:function(M,X){X=n.createFilter(M,X);var fa=this._map,ea=fa.__visibleRect;X.x=-ea.x;X.y=-ea.y;X.width=fa.width;X.height=fa.height;return this._svgFilters[M.id]=X},_updateSVGFilters:function(M,X,fa,ea){var ha=this._svgFilters,ra,Aa,Ea;for(Aa in ha)if(ra=ha[Aa]){if(Ea=a.byId(Aa))null!=M&&Ea.setAttribute("x",M),null!=X&&Ea.setAttribute("y",X),null!=fa&&Ea.setAttribute("width",fa),null!=ea&&Ea.setAttribute("height",ea);null!=M&&(ra.x=M);null!=X&&(ra.y=X);null!=fa&&(ra.width=fa);null!=
ea&&(ra.height=ea)}},_getScaleMatrix:function(M,X){var fa=M.width/M.height,ea=1,ha=1;isNaN(X)||(1<fa?(ea=X/M.width,ha=X/fa/M.height):(ha=X/M.height,ea=X*fa/M.width));return{xx:ea,yy:ha}},_symbolizePoint:function(M,X,fa,ea){var ha=X.type,ra=X.style;if("shieldlabelsymbol"!==ha&&"picturemarkersymbol"!==ha){var Aa=X.getStroke();X=X.getFill();ra=ra===z.STYLE_X||ra===z.STYLE_CROSS;var Ea=Aa&&Aa.color,va=ra?Ea:X;if(fa){var Ga=this._getVariable(fa,"colorInfo",!1),ca=this._getVariable(fa,"opacityInfo",!1);
Ga&&(va=fa.getColor(ea,{colorInfo:Ga})||va);va&&ca&&(va=this._applyOpacity(va,fa,ca,ea));va&&(ra?va!==Ea&&(Aa=Aa?c.mixin({},Aa):{},Aa.color=va):va!==X&&(X=va))}"textsymbol"===ha?M.setFill(X):"simplemarkersymbol"===ha&&M.setFill(X).setStroke(Aa)}},_drawMarkers:function(M,X,fa,ea){var ha=M.geometry,ra=ha.points,Aa=M.getDojoShape()||this._div.createGroup(),Ea,va=ra.length,Ga=[],ca=0,ja,wa=fa?fa.length:0;Aa.children[0]&&this._isInvalidShape(X,Aa.children[0])&&Aa.clear();for(Ea=0;Ea<va;Ea++){var za=ra[Ea];
for(ja=0;ja<wa;ja++)Ga[0]=fa[ja],this._drawPoint(Aa,{x:za[0],y:za[1],spatialReference:ha.spatialReference},X,Aa.children[ca++],Ga,ea,M)}X=Aa.children.length;if(va*fa.length<X)for(Ea=X-1;Ea>=va*fa.length;Ea--)Aa.children[Ea].removeShape();M._shape=Aa},_symbolizeMarkers:function(M,X,fa){var ea=M.getDojoShape().children,ha,ra=ea.length;for(ha=0;ha<ra;ha++)this._symbolizePoint(ea[ha],X,fa,M)},_errorHandler:function(M,X){X&&(M.message="Unable to draw graphic (geometry:"+(X.geometry?X.geometry.declaredClass:
null)+", symbol:"+(X.symbol?X.symbol.declaredClass:null)+"): "+M.message);this.inherited(arguments)},_rendererLimits:function(){if(N){var M=1E5;var X=-1E5;var fa=1E5}else y("chrome")&&6>y("chrome")&&(M=8150,X=-1E4,fa=1E4);if(M)return{clipLimit:M,rangeMin:X,rangeMax:fa,clipBBox:[-M,-M,M,M],clipSegments:[[[-M,-M],[M,-M]],[[M,-M],[M,M]],[[M,M],[-M,M]],[[-M,M],[-M,-M]]]}}(),_clipPolyline:function(M,X){X=this._getCorners(M,X);var fa=X.br,ea=this._rendererLimits,ha=ea.rangeMin,ra=ea.rangeMax,Aa=ea.clipBBox,
Ea=ea.clipSegments;ea=this._isPointWithinRange;var va=this._isPointWithinBBox,Ga=this._getClipperIntersection,ca=this._getPlaneIndex;if(!ea(X.tl,ha,ra)||!ea(fa,ha,ra)){N&&this._createSegments(M);var ja=[];u.forEach(M.segments,function(wa){wa=wa.args;var za=wa.length,Fa=[],O;for(O=0;O<za;O+=2){var ya=[wa[O],wa[O+1]],Ha=[wa[O+2],wa[O+3]],da=va(ya,Aa),Oa=va(Ha,Aa);if(da^Oa){if(Oa=Ga([ya,Ha],Ea))da?(O?Fa.push(Oa[1]):Fa.push(ya,Oa[1]),ja.push(Fa),Fa=[]):Fa.push(Oa[1],Ha)}else da?O?Fa.push(Ha):Fa.push(ya,
Ha):(Oa=ca(ya,Aa),da=ca(Ha,Aa),-1!==Oa&&-1!==da&&Oa!==da&&(ya=Ga([ya,Ha],Ea,!0),0<ya.length&&(ya[Oa]||(Oa=ya[Oa[0]]?Oa[0]:Oa[1]),ya[da]||(da=ya[da[0]]?da[0]:da[1]),Ha=ya[Oa],ya=ya[da],Ha&&Fa.push(Ha),ya&&(Fa.push(ya),ja.push(Fa),Fa=[]))))}ja.push(Fa)});M.setShape(this._getPathStringFromPaths(ja))}},_clipPolygon:function(M,X){X=this._getCorners(M,X);var fa=X.br,ea=this._rendererLimits,ha=ea.clipLimit,ra=ea.rangeMin,Aa=ea.rangeMax,Ea=ea.clipBBox,va=ea.clipSegments;ea=this._isPointWithinRange;var Ga=
this._isPointWithinBBox,ca=this._getClipperIntersection,ja=this._getPlaneIndex,wa=H._pointLineDistance;ea(X.tl,ra,Aa)&&ea(fa,ra,Aa)||(N&&this._createSegments(M),X=u.filter(M.segments,function(za){return za.args&&za.args.length}),X=u.map(X,function(za){var Fa=za.args,O=Fa.length,ya=[];za=[];var Ha;for(Ha=0;Ha<O;Ha+=2){var da=[Fa[Ha],Fa[Ha+1]],Oa=[Fa[Ha+2],Fa[Ha+3]];if(Ha===O-2){ya.push(da);break}var Na=Ga(da,Ea),Ca=Ga(Oa,Ea);ya.push(da);if(Na^Ca){if(Ca=ca([da,Oa],va))da=Ca[1],da[Na?"inOut":"outIn"]=
!0,ya.push(da),za.push([Na?"INOUT":"OUTIN",ya.length-1,Ca[0]])}else if(!Na){Na=ja(da,Ea);var V=ja(Oa,Ea);-1!==Na&&-1!==V&&Na!==V&&(Ca=ca([da,Oa],va,!0),0<Ca.length?(Ca[Na]||(Na=Ca[Na[0]]?Na[0]:Na[1]),Ca[V]||(V=Ca[V[0]]?V[0]:V[1]),da=Ca[Na],Oa=Ca[V],da&&(da.outIn=!0,ya.push(da),za.push(["OUTIN",ya.length-1,Na])),Oa&&(Oa.inOut=!0,ya.push(Oa),za.push(["INOUT",ya.length-1,V]))):c.isArray(Na)&&c.isArray(V)&&(Ca=Na.concat(V),Ca.sort(),"0123"===Ca.join("")&&(Ca=[],3===Na[0]+Na[1]?Ca.push([ha,-ha],[-ha,ha]):
Ca.push([-ha,-ha],[ha,ha]),Na=wa(Ca[0],[da,Oa]),da=wa(Ca[1],[da,Oa]),ya.push(Na<da?Ca[0]:Ca[1]))))}}var oa=Ea[0],pa=Ea[1],Y=Ea[2],ka=Ea[3];u.forEach(ya,function(Da){Da[0]<oa&&(Da[1]>=pa&&Da[1]<=ka?Da[0]=oa:(Da[0]=oa,Da[1]=Da[1]<pa?pa:ka))});u.forEach(ya,function(Da){Da[1]<pa&&(Da[0]>=oa&&Da[0]<=Y?Da[1]=pa:(Da[1]=pa,Da[0]=Da[0]<oa?oa:Y))});u.forEach(ya,function(Da){Da[0]>Y&&(Da[1]>=pa&&Da[1]<=ka?Da[0]=Y:(Da[0]=Y,Da[1]=Da[1]<pa?pa:ka))});u.forEach(ya,function(Da){Da[1]>ka&&(Da[0]>=oa&&Da[0]<=Y?Da[1]=
ka:(Da[1]=ka,Da[0]=Da[0]<oa?oa:Y))});Fa=0;O=za.length;if(0<O){do{Oa=za[Fa];Ha=za[(Fa+1)%O];if(Oa[2]===Ha[2]&&"INOUT"===Oa[0]&&"OUTIN"===Ha[0])if(da=Oa[1],Ha=Ha[1],da<Ha)for(da+=1;da<Ha;da++)ya[da][2]=!0;else if(da>Ha){for(da+=1;da<ya.length;da++)ya[da][2]=!0;for(da=0;da<Ha;da++)ya[da][2]=!0}Fa=(Fa+1)%O}while(0!==Fa)}O=ya[0];Fa=ya[ya.length-1];O[2]&&(Fa[2]=!0,u.some(za,function(Da){return 1===Da[1]?(ya.splice(ya.length-1,0,c.clone(ya[1])),!0):!1}));ya=u.filter(ya,function(Da){return Da[2]?!1:!0});
for(Fa=0;Fa<ya.length-1;Fa++)O=ya[Fa],(Ha=ya[Fa+1])&&O[0]===Ha[0]&&O[1]===Ha[1]&&(Ha.outIn?O.outIn=!0:Ha.inOut&&(O.inOut=!0),ya.splice(Fa+1,1));O=Math.abs;za=[];for(Fa=0;Fa<ya.length-1;Fa++){Oa=ya[Fa];da=Oa[0];Oa=Oa[1];Na=O(da)===ha;Ca=O(Oa)===ha;Ha=ya[Fa+1];V=Ha[0];Ha=Ha[1];var ta=O(V)===ha,xa=O(Ha)===ha;Na&&xa?za.push([Fa+1,[da,Ha]]):Ca&&ta&&za.push([Fa+1,[V,Oa]])}for(Fa=za.length-1;0<=Fa;Fa--)Ha=za[Fa],da=ya[Ha[0]-1],O=ya[Ha[0]],da.outIn||da.inOut||O.outIn||O.inOut||ya.splice(Ha[0],0,Ha[1]);O=
ya[0];Fa=ya[ya.length-1];O[0]===Fa[0]&&O[1]===Fa[1]||ya.push(O);return ya}),M.setShape(this._getPathStringFromPaths(X)))},_getCorners:function(M,X){if(N){M=this._map;var fa=X.getExtent(),ea=fa.spatialReference;X=M.toScreen(new A(fa.xmin,fa.ymax,ea));M=M.toScreen(new A(fa.xmax,fa.ymin,ea));return{tl:X,br:M}}M=M.getTransformedBoundingBox();return{tl:M[0],br:M[2]}},_createSegments:function(M){M.shape.path=M.vmlPath;M.segmented=!1;M._confirmSegmented();var X=M.segments;1<X.length&&(M.segments=u.filter(X,
function(fa,ea,ha){ea=ha[ea+1];return"M"===fa.action&&ea&&"L"===ea.action?(fa.args=fa.args.concat(ea.args),!0):!1}))},_getPathStringFromPaths:function(M){N?(M=u.map(M,function(X){return"m "+u.map(X,function(fa,ea){return(1===ea?"l ":"")+fa.join(",")}).join(" ")}),M.push("e")):M=u.map(M,function(X){return"M "+u.map(X,function(fa){return fa.join(",")}).join(" ")});return M.join(" ")},_isPointWithinBBox:function(M,X){var fa=X[1],ea=X[2],ha=X[3],ra=M[0];M=M[1];return ra>X[0]&&ra<ea&&M>fa&&M<ha?!0:!1},
_isPointWithinRange:function(M,X,fa){var ea=M.x;M=M.y;return ea<X||M<X||ea>fa||M>fa?!1:!0},_getClipperIntersection:function(M,X,fa){var ea,ha=H._getLineIntersection2,ra=Math.round,Aa={length:0};for(ea=0;4>ea;ea++){var Ea=ha(M,X[ea]);if(Ea)if(Ea[0]=ra(Ea[0]),Ea[1]=ra(Ea[1]),fa)Aa[ea]=Ea,Aa.length++;else return[ea,Ea]}return fa?Aa:null},_getPlaneIndex:function(M,X){var fa=M[0];M=M[1];var ea=X[0],ha=X[1],ra=X[2];X=X[3];return fa<=ea?M>=ha&&M<=X?3:M<ha?[0,3]:[2,3]:M<=ha?fa>=ea&&fa<=ra?0:fa<ea?[3,0]:[1,
0]:fa>=ra?M>=ha&&M<=X?1:M<ha?[0,1]:[2,1]:M>=X?fa>=ea&&fa<=ra?2:fa<ea?[3,2]:[1,2]:-1},onGraphicAdd:function(){},onGraphicRemove:function(){},onGraphicNodeAdd:function(){},onGraphicNodeRemove:function(){},onGraphicDraw:function(){},onGraphicsClear:function(){},onRendererChange:function(){},onOpacityChange:function(){},onInfoTemplateChange:function(){},onSurfaceChange:function(){},onWebGLEnabledChange:function(){},setInfoTemplate:function(M){this.infoTemplate=M;this._evalSurfaceType();this.onInfoTemplateChange()},
add:function(M,X){if(M._graphicsLayer===this)return M;M._suspended=this._suspendGraphics;X||this.graphics.push(M);M._graphicsLayer=this;M._sourceLayer||(M._layer&&"esri.layers.GraphicsLayer"!==M._layer.declaredClass?M._sourceLayer=M._layer:"esri.layers.GraphicsLayer"!==this.declaredClass&&(M._sourceLayer=this));M._layer=this;this.hasWebGLSurface()||(this._updateExtent(M),this._draw(M));if(!X)this.onGraphicAdd(M);return M},remove:function(M,X,fa){if(!X&&!fa){X=this.graphics;var ea;if(-1===(ea=u.indexOf(X,
M)))return null;if(!aa||64<=aa)X.splice(ea,1);else{var ha=X.length;if(ha){for(;ea<ha;)X[ea]=X[ea+1],ea++;X.length--}}}this.hasWebGLSurface()||M.getDojoShape()&&this._removeShape(M,null,fa);M._shape=M._graphicsLayer=null;this.onGraphicRemove(M);return M},clear:function(M,X){M=this.graphics;var fa,ea=!N;for(fa=M.length-1;0<=fa;fa--)this.remove(M[fa],null,ea);this.graphics=[];this.hasWebGLSurface()||this._destroyAllNodes();if(!X)this.onGraphicsClear()},_destroyAllNodes:function(){if(!N&&this._div){var M;
this._childLayer&&(M=this._childLayer.getNode())&&M.parentNode&&M.parentNode.removeChild(M);this._bgGroup.clear();this._div.clear();this._bgGroup=this._div.createGroup();M&&this._div.getEventSource().appendChild(M);this._initOpacity()}},clearNodes:function(){if(!this.hasWebGLSurface()){var M=this.graphics,X=M.length,fa;for(fa=0;fa<X;fa++)this._removeShape(M[fa],!0,!0);this._destroyAllNodes()}},_graphicVisibilityChanged:function(M){},_setIEOpacity:function(M,X){var fa=M&&M.getNode();if(fa){var ea=
M.strokeStyle,ha=fa.stroke;ea&&ha&&(ha.opacity=ea.color.a*X);M=M.fillStyle;ea=fa.fill;M&&ea&&("tile"===ea.type?m.set(fa,"opacity",X):ea.opacity=M.a*X)}},setOpacity:function(M,X){if(X||this.opacity!=M){var fa=this._div;fa&&!this.hasWebGLSurface()&&(N?(u.forEach(this.graphics,function(ea){this._setIEOpacity(ea._shape,M);this._setIEOpacity(ea._bgShape,M)},this),fa._esriIeOpacity=M,this._bgGroup._esriIeOpacity=M):"canvas-2d"===this.surfaceType?m.set(fa.getEventSource(),"opacity",M):fa.getEventSource().setAttribute("opacity",
M));this.opacity=M;if(!X)this.onOpacityChange(M)}},setRenderer:function(M){this.renderer=M;this._evalSDRenderer(!0);this._evalSurfaceType();this.emit("renderer-change",{renderer:this._rndForScale||M})}});B=B([k,K],{declaredClass:"esri.layers.GraphicsLayer",constructor:function(){this._processEvent=c.hitch(this,this._processEvent);this._initLayer()},_initLayer:function(){this.loaded=!0;this.onLoad(this)},_setMap:function(){var M=this.inherited("_setMap",arguments);this.enableMouseEvents();return M},
_unsetMap:function(){this.disableMouseEvents();this.inherited("_unsetMap",arguments)},_processEvent:function(M){var X=this._map,fa=M.target,ea;M.screenPoint=new G(M.pageX-X.position.x,M.pageY-X.position.y);for(M.mapPoint=X.toMap(M.screenPoint);fa&&!(ea=fa.e_graphic);)fa=fa.parentNode;if(ea)return M.graphic=ea,M},_onMouseOverHandler:function(M){if(this._processEvent(M))this.onMouseOver(M)},_onMouseMoveHandler:function(M){if(this._processEvent(M))this.onMouseMove(M)},_onMouseDragHandler:function(M){if(this._processEvent(M))this.onMouseDrag(M)},
_onMouseOutHandler:function(M){if(this._processEvent(M))this.onMouseOut(M)},_onMouseDownHandler:function(M){this._downGr=this._downPt=null;this._processEvent(M)&&(d.disconnect(this._onmousemove_connect),d.disconnect(this._onmousedrag_connect),this._onmousedrag_connect=d.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseDragHandler"),this._downGr=M.graphic,this._downPt=M.screenPoint.x+","+M.screenPoint.y,this.onMouseDown(M))},_onMouseUpHandler:function(M){this._upGr=this._upPt=null;this._processEvent(M)&&
(d.disconnect(this._onmousedrag_connect),d.disconnect(this._onmousemove_connect),this._onmousemove_connect=d.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseMoveHandler"),this._upGr=M.graphic,this._upPt=M.screenPoint.x+","+M.screenPoint.y,this.onMouseUp(M))},_onClickHandler:function(M){if(this._processEvent(M)){var X=this._downGr,fa=this._upGr;X&&fa&&X===fa&&this._downPt===this._upPt&&(N&&(x._ieGraphic=M.graphic),this.onClick(M))}},_onDblClickHandler:function(M){if(this._processEvent(M))this.onDblClick(M)},
onMouseOver:function(){},onMouseMove:function(){},onMouseDrag:function(){},onMouseOut:function(){},onMouseDown:function(){},onMouseUp:function(){},onClick:function(){},onDblClick:function(){},enableMouseEvents:function(){if(!this._mouseEvents){var M=d.connect,X=this._div.getEventSource();P||(this._onmouseover_connect=M(X,"onmouseover",this,"_onMouseOverHandler"),this._onmousemove_connect=M(X,"onmousemove",this,"_onMouseMoveHandler"),this._onmouseout_connect=M(X,"onmouseout",this,"_onMouseOutHandler"),
this._onmousedown_connect=M(X,"onmousedown",this,"_onMouseDownHandler"),this._onmouseup_connect=M(X,"onmouseup",this,"_onMouseUpHandler"),this._onclick_connect=M(X,"onclick",this,"_onClickHandler"),this._ondblclick_connect=M(X,"ondblclick",this,"_onDblClickHandler"));this._mouseEvents=!0}},disableMouseEvents:function(){if(this._mouseEvents){var M=d.disconnect;M(this._onmouseover_connect);M(this._onmousemove_connect);M(this._onmousedrag_connect);M(this._onmouseout_connect);M(this._onmousedown_connect);
M(this._onmouseup_connect);M(this._onclick_connect);M(this._ondblclick_connect);this._mouseEvents=!1}}});B._GraphicsContainer=g;B._GraphicsLayer=k;c.setObject("layers.GraphicsLayer",B,x);c.setObject("layers._GraphicsContainer",g,x);c.setObject("layers._GraphicsLayer",k,x);return B})},"esri/layers/gfxSniff":function(){define(["dojo/has","dojox/gfx"],function(f,B){f.add("esri-svg",function(){return-1!==B.renderer.toLowerCase().indexOf("svg")});return f})},"esri/layers/support/webglUtils":function(){define(["dojo/_base/lang",
"dojo/_base/array","dojo/has","../../kernel"],function(f,B,l,d){var c=!1,u=l("esri-webgl-max-contexts");u=null!=u?u:l("esri-mobile")?8:16;var t={isWebGLSupported:function(){return!!c},isWebGLEnabled:function(){return this.isWebGLSupported()&&!!l("esri-featurelayer-webgl")},createCanvas:function(e,r){var m=document.createElement("canvas");m.style.width=e+"px";m.style.height=r+"px";return m},createWebGLContext:function(e){var r;B.some(["webgl","experimental-webgl","webkit-3d","moz-webgl"],function(m){try{r=
e.getContext?e.getContext(m):null}catch(a){r=null}return!!r});return r},_contextOwners:[],isContextAvailable:function(){return-1===u||0<u&&t._contextOwners.length<u},acquireContext:function(e){return-1!==B.indexOf(t._contextOwners,e)?!0:t.isContextAvailable()?(t._contextOwners.push(e),!0):!1},releaseContext:function(e){e=B.indexOf(t._contextOwners,e);-1!==e&&t._contextOwners.splice(e,1)}};c=t.createWebGLContext(t.createCanvas());f.setObject("layers.support.webglUtils",t,d);return t})},"esri/layers/support/WebGLSurface":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/array","dojo/has","../../kernel"],function(f,B,l,d,c){f=f(null,{map:null,node:null,renderers:null,constructor:function(u){B.mixin(this,u);this.renderers=[]},destroy:function(){l.forEach(this.renderers,function(u){u.destroy()});this.renderers=null},getEventSource:function(){return this.node},createRenderer:function(u,t,e,r){u=new u({surface:this,width:t,height:e,map:this.map,layer:r});this.renderers.push(u);return u},destroyRenderer:function(u){var t=l.indexOf(this.renderers,
u);-1<t&&(u.destroy(),this.renderers.splice(t,1))},_createNode:function(){var u=document.createElement("div");u.style.pointerEvents="auto";u.style.position="absolute";return u}});B.setObject("layers.support.WebGLSurface",f,c);return f})},"esri/symbols/utils":function(){define("dojo/_base/lang dojo/_base/window dojo/has dojox/gfx ../kernel ../Color".split(" "),function(f,B,l,d,c,u){function t(q){q.removeAttribute("marker-start");q.removeAttribute("marker-end");q.removeAttribute("opacity")}function e(q,
n){for(var k in n)q.setAttribute(k,n[k])}function r(q,n,k){n="url(#"+n.getAttribute("id")+")";q.rawNode.setAttribute("marker-"+k,n)}var m=-1!==d.renderer.toLowerCase().indexOf("svg"),a=9===l("ie"),h={marker:{markerWidth:"6",markerHeight:"6",markerUnits:"strokeWidth",orient:"auto"},spear:{marker:{end:{viewBox:"0 0 25.4 23.43",refX:"20",refY:"12.76"},start:{viewBox:"-25.4 0 25.4 23.43",refX:"-20",refY:"12.76"}},path:{common:{d:"M1.63 23.43 L5.37 16.6 L5.37 8.93 L1.63 2.09 L25.4 12.76 L1.63 23.43 Z",
"stroke-width":"0","fill-opacity":"1"},start:{transform:"matrix(-1, 0, 0, 1, 0, 0)"}}}};l={applyLineMarker:function(q,n,k,g){if(m&&!a){var b=q&&q.rawNode,x=n.marker;k=k||n.color;b&&"none"!==n.style&&k&&x&&"arrow"===x.style&&x.placement?b.getTotalLength&&0===b.getTotalLength()?t(b):(n=-1!==x.placement.indexOf("begin"),x=-1!==x.placement.indexOf("end"),n||x?(b.removeAttribute("stroke-opacity"),b.setAttribute("opacity",k.a),n?(n=g(q,k,"spear","start"),r(q,n,"start")):b.removeAttribute("marker-start"),
x?(k=g(q,k,"spear","end"),r(q,k,"end")):b.removeAttribute("marker-end")):t(b)):b&&t(b)}},createSVGMarker:function(q,n,k,g){k=h[k];var b=B.doc.createElementNS("http://www.w3.org/2000/svg","marker");b.setAttribute("id",n);e(b,h.marker);e(b,k.marker[g]);n=B.doc.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("fill",q.toCss());e(n,k.path.common);e(n,k.path[g]);b.appendChild(n);return b},create2DColorRamp:function(q){var n=q.surface.createGroup(),k=q.colors,g=q.numClasses;q=(q.size||
75)/g;for(var b=0;b<g;b++)for(var x=b*q,v=0;v<g;v++){var y=k[b][v];n.createRect({x:v*q,y:x,width:q,height:q}).setFill(y).setStroke(null)}return n},setSymbolFillColor:function(q,n){if(q)switch(n=n?new u(n):null,q.type){case "simplemarkersymbol":"cross"===q.style||"x"===q.style?q.outline&&q.outline.setColor(n):q.setColor(n);break;case "simplelinesymbol":case "cartographiclinesymbol":case "simplefillsymbol":case "shieldlabelsymbol":case "textsymbol":q.setColor(n)}}};f.setObject("renderer.utils",l,c);
return l})},"esri/geometry/screenUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/sniff ../kernel ./Point ./ScreenPoint ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(f,B,l,d,c,u,t,e,r,m){var a=function(){return 9>l("ie")?function(q,n,k,g,b,x,v,y,D){var E=[],C=Math.round,z,w=v.length,A;for(z=0;z<w;z++){var G=v[z];var F=y?y(G[0][0],G[0][1],D):G[0];if(1<(A=G.length)){var H=C((F[0]-q)*k+b);var J=C((n-F[1])*g+x);F=y?y(G[1][0],G[1][1],D):G[1];var K=C((F[0]-q)*k+b);F=C((n-
F[1])*g+x);E.push("M",H+","+J,"L",K+","+F);for(K=2;K<A;K++)F=y?y(G[K][0],G[K][1],D):G[K],H=C((F[0]-q)*k+b),J=C((n-F[1])*g+x),E.push(H+","+J)}else H=C((F[0]-q)*k+b),J=C((n-F[1])*g+x),E.push("M",H+","+J)}return E}:function(q,n,k,g,b,x,v,y,D,E){var C=[],z,w,A=Math.round;var G=0;for(z=v?v.length:0;G<z;G++){var F=v[G];C.push("M");var H=0;for(w=F?F.length:0;H<w;H++){var J=y?y(F[H][0],F[H][1],D):F[H];C.push(A((J[0]-q)*k+b)+","+A((n-J[1])*g+x))}E||C.push("Z")}return C}}(),h={toScreenPoint:function(q,n,k,
g,b){var x=q.spatialReference,v=g.spatialReference,y=g.x;g=g.y;x&&v&&!x.equals(v)&&x._canProject(v)&&(x=x.isWebMercator()?c.lngLatToXY(y,g):c.xyToLngLat(y,g,!0),y=x[0],g=x[1]);y=(y-q.xmin)*(n/q.getWidth());g=(q.ymax-g)*(k/q.getHeight());b||(y=Math.round(y),g=Math.round(g));return new u(y,g)},toScreenGeometry:function(q,n,k,g){var b=q.xmin,x=q.ymax,v=n/q.getWidth(),y=k/q.getHeight(),D=f.forEach,E=Math.round;if(g instanceof c)return new c(E((g.x-b)*v),E((x-g.y)*y));if(g instanceof r){q=new r;var C=
q.points;D(g.points,function(F,H){C[H]=[E((F[0]-b)*v),E((x-F[1])*y)]});return q}if(g instanceof m)return new m(E((g.xmin-b)*v),E((x-g.ymin)*y),E((g.xmax-b)*v),E((x-g.ymax)*v));if(g instanceof t){q=new t;var z=q.paths,w;D(g.paths,function(F,H){w=z[H]=[];D(F,function(J,K){w[K]=[E((J[0]-b)*v),E((x-J[1])*y)]})});return q}if(g instanceof e){q=new e;var A=q.rings,G;D(g.rings,function(F,H){G=A[H]=[];D(F,function(J,K){G[K]=[E((J[0]-b)*v),E((x-J[1])*y)]})});return q}},_toScreenPath:function(q,n,k,g,b,x){var v=
g instanceof t,y=q.spatialReference,D=g.spatialReference;if(y&&D&&!y.equals(D)&&y._canProject(D))if(y.isWebMercator())var E=c.lngLatToXY;else{E=c.xyToLngLat;var C=!0}return a(q.xmin,q.ymax,n/q.getWidth(),k/q.getHeight(),b,x,v?g.paths:g.rings,E,C,v)},toMapPoint:function(q,n,k,g){return new c(q.xmin+g.x/(n/q.getWidth()),q.ymax-g.y/(k/q.getHeight()),q.spatialReference)},toMapGeometry:function(q,n,k,g){var b=q.xmin,x=q.ymax,v=q.spatialReference,y=n/q.getWidth(),D=k/q.getHeight(),E=f.forEach;if(g instanceof
c)return new c(b+g.x/y,x-g.y/D,v);if(g instanceof r){q=new r(v);var C=q.points;E(g.points,function(F,H){C[H]=[b+F[0]/y,x-F[1]/D]});return q}if(g instanceof m)return new m(b+g.xmin/y,x-g.ymin/D,b+g.xmax/y,x-g.ymax/D,v);if(g instanceof t){q=new t(v);var z=q.paths,w;E(g.paths,function(F,H){w=z[H]=[];E(F,function(J,K){w[K]=[b+J[0]/y,x-J[1]/D]})});return q}if(g instanceof e){q=new e(v);var A=q.rings,G;E(g.rings,function(F,H){G=A[H]=[];E(F,function(J,K){G[K]=[b+J[0]/y,x-J[1]/D]})});return q}}};B.mixin(B.getObject("geometry",
!0,d),h);return h})},"esri/PluginTarget":function(){define("require dojo/aspect dojo/_base/array dojo/_base/lang dojo/Deferred dojo/when".split(" "),function(f,B,l,d,c,u){function t(){B.after(this.constructor._meta,"ctor",this._pluginsHandler,!0);this._plugins={}}t.prototype={addPlugin:function(e,r){var m=this,a=this._plugins,h=new c;try{f([e],function(q){e in a?h.resolve({id:a[e].declaredId||e.replace(/\//g,".")}):(a[e]=q,u(q.add(m,r),function(){var n={id:q.declaredId||e.replace(/\//g,".")};m.emit("plugin-add",
n);h.resolve(n)},function(n){h.reject(n)}))})}catch(q){h.reject(q)}return h.promise},removePlugin:function(e){if(e in this._plugins){var r=this._plugins[e];r.remove(this);delete this._plugins[e];this.emit("plugin-remove",{id:r.declaredId||e.replace(/\//g,".")})}},_pluginsHandler:function(){var e=this;l.some(arguments,function(r){if(r&&r.plugins&&r.plugins instanceof Array){r=r.plugins;var m;for(m=0;m<r.length;m++){var a=r[m];var h=a instanceof Object?a.id:a;e.addPlugin(h,a.options)}return!0}})}};
return t})},"esri/layers/FeatureType":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../symbols/jsonUtils ./FeatureTemplate ./support/domainUtils".split(" "),function(f,B,l,d,c,u,t,e,r){f=f(null,{declaredClass:"esri.layers.FeatureType",constructor:function(m){if(m&&B.isObject(m)){this.id=m.id;this.name=m.name;var a=m.symbol;a&&(this.symbol=t.fromJson(a));a=m.domains;var h=this.domains={};for(q in a)a.hasOwnProperty(q)&&(h[q]=r.fromJson(a[q]));if(m=
m.templates){var q=this.templates=[];for(a=0;a<m.length;a++)q.push(new e(m[a]))}}},toJson:function(){var m={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()},a,h=this.domains,q=this.templates,n=u.fixJson;if(h){var k=m.domains={};for(a in h)h.hasOwnProperty(a)&&(k[a]=h[a]&&h[a].toJson());n(k)}q&&(m.templates=l.map(q,function(g){return g.toJson()}));return n(m)}});B.setObject("layers.FeatureType",f,c);return f})},"esri/layers/FeatureTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../graphic".split(" "),
function(f,B,l,d,c,u){f=f(null,{declaredClass:"esri.layers.FeatureTemplate",constructor:function(t){t&&B.isObject(t)&&(this.name=t.name,this.description=t.description,this.drawingTool=t.drawingTool,this.thumbnail=t.thumbnail,t=t.prototype,this.prototype=new u(t.geometry,null,t.attributes))},toJson:function(){return c.fixJson({name:this.name,description:this.description,drawingTool:this.drawingTool,thumbnail:c.fixJson(B.clone(this.thumbnail)),prototype:this.prototype&&this.prototype.toJson()})}});
B.mixin(f,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",
TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});B.setObject("layers.FeatureTemplate",f,d);return f})},"esri/layers/support/domainUtils":function(){define("dojo/_base/lang dojo/has ../../kernel ../RangeDomain ../CodedValueDomain ../InheritedDomain".split(" "),function(f,B,l,d,c,u){B={fromJson:function(t){if(t)switch(t.type){case "range":var e=new d(t);break;case "codedValue":e=new c(t);break;case "inherited":e=
new u(t)}return e}};f.setObject("layers.support.domainUtils",B,l);return B})},"esri/layers/InheritedDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Domain"],function(f,B,l,d,c){f=f([c],{declaredClass:"esri.layers.InheritedDomain"});B.setObject("layers.InheritedDomain",f,d);return f})},"esri/layers/FeatureSubtype":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./support/domainUtils".split(" "),function(f,B,l,d,c,u){f=f(null,
{declaredClass:"esri.layers.FeatureSubtype",constructor:function(t){if(t&&B.isObject(t)){this.code=t.code;this.name=t.name;this.defaultValues=t.defaultValues;t=t.domains;var e=this.domains={},r;for(r in t)t.hasOwnProperty(r)&&(e[r]=u.fromJson(t[r]))}},toJson:function(){var t=c.fixJson,e={code:this.code,name:this.name,defaultValues:t(B.clone(this.defaultValues))},r=this.domains;if(r){var m=e.domains={},a;for(a in r)r.hasOwnProperty(a)&&(m[a]=r[a]&&r[a].toJson());t(m)}return t(e)}});B.setObject("layers.FeatureSubtype",
f,d);return f})},"esri/layers/FeatureEditResult":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,d){f=f(null,{declaredClass:"esri.layers.FeatureEditResult",constructor:function(c){c&&B.isObject(c)&&(this.objectId=c.objectId,this.globalId=c.globalId,this.success=c.success,c.success||(c=c.error,this.error=Error(),this.error.code=c.code,this.error.message=c.description))}});B.setObject("layers.FeatureEditResult",f,d);return f})},"esri/layers/LabelClass":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../symbols/TextSymbol ../symbols/ShieldLabelSymbol".split(" "),
function(f,B,l,d,c,u,t,e){var r=RegExp("__begin__","ig"),m=RegExp("__end__","ig"),a=RegExp("^__begin__","i"),h=RegExp("__end__$","i");f=f(null,{declaredClass:"esri.layers.LabelClass",labelPlacement:null,labelExpression:null,format:null,fieldInfos:null,useCodedValues:null,symbol:null,maxScale:0,minScale:0,where:null,sizeInfo:null,_labelPlacementLookup:{"above-center":"esriServerPointLabelPlacementAboveCenter","above-left":"esriServerPointLabelPlacementAboveLeft","above-right":"esriServerPointLabelPlacementAboveRight",
"below-center":"esriServerPointLabelPlacementBelowCenter","below-left":"esriServerPointLabelPlacementBelowLeft","below-right":"esriServerPointLabelPlacementBelowRight","center-center":"esriServerPointLabelPlacementCenterCenter","center-left":"esriServerPointLabelPlacementCenterLeft","center-right":"esriServerPointLabelPlacementCenterRight","above-after":"esriServerLinePlacementAboveAfter","above-along":"esriServerLinePlacementAboveAlong","above-before":"esriServerLinePlacementAboveBefore","above-start":"esriServerLinePlacementAboveStart",
"above-end":"esriServerLinePlacementAboveEnd","below-after":"esriServerLinePlacementBelowAfter","below-along":"esriServerLinePlacementBelowAlong","below-before":"esriServerLinePlacementBelowBefore","below-start":"esriServerLinePlacementBelowStart","below-end":"esriServerLinePlacementBelowEnd","center-after":"esriServerLinePlacementCenterAfter","center-along":"esriServerLinePlacementCenterAlong","center-before":"esriServerLinePlacementCenterBefore","center-start":"esriServerLinePlacementCenterStart",
"center-end":"esriServerLinePlacementCenterEnd","always-horizontal":"esriServerPolygonPlacementAlwaysHorizontal"},constructor:function(q){q&&(B.mixin(this,q),this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)||(this.labelPlacement=u.valueOf(this._labelPlacementLookup,q.labelPlacement)),q.format&&(this.format=q.format),q.fieldInfos&&(this.fieldInfos=q.fieldInfos),q.symbol&&(this.symbol="esriSHD"===q.symbol.type?new e(q.symbol):new t(q.symbol)),q=this.sizeInfo)&&(q.minSize&&(q.minSize=d.pt2px(q.minSize)),
q.maxSize&&(q.maxSize=d.pt2px(q.maxSize)))},getSymbol:function(){return this.symbol},toJson:function(){var q=this.sizeInfo;q&&(q=B.mixin({},q),q.minSize&&(q.minSize=d.px2pt(q.minSize)),q.maxSize&&(q.maxSize=d.px2pt(q.maxSize)));var n=u.fixJson(this.labelExpressionInfo&&B.clone(this.labelExpressionInfo));this._processLabelExpressionInfo(n);q={name:this.name,labelExpression:this.labelExpression,labelExpressionInfo:n,format:this.format||void 0,fieldInfos:this.fieldInfos||void 0,useCodedValues:this.useCodedValues,
maxScale:this.maxScale,minScale:this.minScale,where:this.where,sizeInfo:q||void 0,labelPlacement:this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)?this._labelPlacementLookup[this.labelPlacement]:this.labelPlacement,symbol:this.symbol&&this.symbol.toJson()};return u.fixJson(q)},_processLabelExpressionInfo:function(q){q&&q.value&&(q.expression=this._convertTemplatedStringToArcade(q.value))},_convertTemplatedStringToArcade:function(q){if(q){var n=B.replace(q,function(k,g){return'__begin__$feature["'+
g+'"]__end__'});n=a.test(n)?n.replace(a,""):'"'+n;n=h.test(n)?n.replace(h,""):n+'"';n=n.replace(r,'" + ').replace(m,' + "')}return n}});B.setObject("layers.LabelClass",f,c);return f})},"esri/symbols/ShieldLabelSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol ./Font".split(" "),function(f,B,l,d,c,u,t,e,r){var m={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};f=f(e,{declaredClass:"esri.symbol.ShieldLabelSymbol",
type:"shieldlabelsymbol",color:[255,255,255,1],width:32,height:32,font:d.defaultFont,constructor:function(a,h,q,n,k){a?B.isString(a)?(this.url=a,h&&(this.color=h),q&&(this.width=q),n&&(this.height=n),void 0!==k&&(this.font=k)):(this.width=d.pt2px(a.width),this.height=d.pt2px(a.height),h=a.imageData,9>l("ie")||!h||(q=this.url,this.url="data:"+(a.contentType||"image")+";base64,"+h,this.imageData=q)):B.mixin(this,m)},getStroke:function(){return null},getFill:function(){return this.color},setWidth:function(a){this.width=
a;return this},setHeight:function(a){this.height=a;return this},setUrl:function(a){a!==this.url&&(delete this.imageData,delete this.contentType);this.url=a;return this},setFont:function(a){this.font=a;return this},setText:function(a){this.text=a;return this},getWidth:function(){return this.width},getHeight:function(){return this.height},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||
""},fill:null,stroke:null}},toJson:function(){var a=this.url,h=this.imageData;if(0===a.indexOf("data:")){var q=a;a=h;h=q.indexOf(";base64,")+8;h=q.substr(h)}a=t.getAbsoluteUrl(a);q=d.px2pt(this.width);q=isNaN(q)?void 0:q;var n=d.px2pt(this.height);n=isNaN(n)?void 0:n;a=u.fixJson(B.mixin(this.inherited("toJson",arguments),{type:"esriSHD",url:a,imageData:h,contentType:this.contentType,width:q,height:n}));this.font?(h=new r(this.font),a.font=h.toJson()):a.font=null;delete a.size;a.imageData||delete a.imageData;
return a}});f.defaultProps=m;B.setObject("symbol.ShieldLabelSymbol",f,c);c.symbol.defaultShieldLabelSymbol=m;return f})},"esri/layers/SnapshotMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../SpatialReference ../srUtils ../tasks/query ./RenderMode ./support/ParallelSnapshot".split(" "),function(f,B,l,d,c,u,t,e,r){f=f([e],{declaredClass:"esri.layers._SnapshotMode",maxFeatures:5E4,maxRecordCountFactor:1,scaleToTileFactor:1,_isSuspendedAtStartup:!1,_pendingRefresh:!1,
constructor:function(m){this.featureLayer=m;this._featureMap={};this._hasUpdateError=this._hasPartialFeatures=!1;this._drawFeatures=B.hitch(this,this._drawFeatures);this._queryErrorHandler=B.hitch(this,this._queryErrorHandler);this._handleSuccess=B.hitch(this,this._handleSuccess);this._handleError=B.hitch(this,this._handleError);this._handleProgress=B.hitch(this,this._handleProgress)},startup:function(){if(!this._started||this._isSuspendedAtStartup){this.inherited(arguments);var m=this.featureLayer,
a=m.reHostedFS.test(m.url);this.pagination=m.queryPagination&&null!=m.maxRecordCount;this._cacheHintSupported=m._isCacheHintSupported();this.scaleToTileFactor=this._getScaleToTileFactor();a&&this.pagination&&(this._parallelSnapshot=new r({layer:m,mode:this,queryTask:m._task}));this._isSuspendedAtStartup=m.suspended;this._startup()}},propertyChangeHandler:function(m){this._init&&(m?this.featureLayer._collection||this._fetchAll():this._applyTimeFilter())},destroy:function(){this._isSuspendedAtStartup=
this._pendingRefresh=!1;this._cancelPendingRequest(this._pendingRequest);this._parallelSnapshot&&this._parallelSnapshot.destroy();this.inherited(arguments)},drawFeature:function(m){var a=m.attributes[this.featureLayer.objectIdField];this._addFeatureIIf(a,m);this._incRefCount(a)},resume:function(){this._isSuspendedAtStartup||this._pendingRefresh?(this._isSuspendedAtStartup=!1,this._startup()):this.propertyChangeHandler(0)},refresh:function(){var m=this.featureLayer;m._collection?(m._fireUpdateStart(),
m._refresh(!0),m._fireUpdateEnd()):this._fetchAll()},hasAllFeatures:function(){return!this._hasPartialFeatures},hasUpdateError:function(){return this._hasUpdateError},canFetchPBF:function(m){return this.inherited(arguments)&&this.featureLayer._canFetchPBFForQuery(m)},_startup:function(){this.featureLayer._collection?this._applyTimeFilter():this._fetchAll()},_fetchAll:function(){var m=this.featureLayer;m._collection||m.suspended||!m.isQueryable()?this._pendingRefresh=m.suspended:(this._pendingRefresh=
!1,m._fireUpdateStart(),this._clearIIf(),this._hasUpdateError=this._hasPartialFeatures=!1,this._parallelSnapshot?this._parallelSnapshot.fetch().then(this._handleSuccess,this._handleError,this._handleProgress):this._sendRequest())},_handleSuccess:function(m){this._hasPartialFeatures=m.hasPartialFeatures;this._hasUpdateError=m.hasUpdateError;this.featureLayer._fireUpdateEnd(null)},_handleError:function(m){this._queryErrorHandler(m)},_handleProgress:function(m){m.isError?this.featureLayer._errorHandler(m.error):
this._addFeatures(m.features)},_getScaleToTileFactor:function(){var m=this.featureLayer.tileMaxRecordCount,a=this.featureLayer.maxRecordCount,h=1;null!=m&&null!=a&&(h=Number((m/a).toFixed(2)));return h},_getPageSize:function(m){var a=this.featureLayer.tileMaxRecordCount;a="tile"===m.resultType&&a?a:this.featureLayer.maxRecordCount;m.maxRecordCountFactor&&(a=Math.floor(a*m.maxRecordCountFactor));return a},_sendRequest:function(m){var a=this.featureLayer,h=this._createQueryInfo(),q=h.query;this.pagination&&
(this._pageSize=this._getPageSize(q),this._start=q.start=null==m?0:m,q.num=this._pageSize);this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);this._pendingRequest=a._task.execute(q,this._drawFeatures,this._queryErrorHandler,h.pbf?{format:"pbf"}:null)},_drawFeatures:function(m){this._pendingRequest=null;this.featureLayer._isImageService&&10.7>this.featureLayer.version&&void 0===m.exceededTransferLimit&&(m.exceededTransferLimit=m.features.length===this.featureLayer.maxRecordCount);
var a=this.featureLayer,h=m.exceededTransferLimit,q=h&&!a._collection;m=this._checkMaxLimit(m.features);var n=m.maxLimitReached;this._addFeatures(m.features);this.pagination&&q&&!n||(this._hasPartialFeatures=!!h,a._fireUpdateEnd(null,h?{queryLimitExceeded:!0}:null));q&&(this.pagination&&!n&&this._sendRequest(this._start+this._pageSize),a.onQueryLimitExceeded())},_queryErrorHandler:function(m){this._pendingRequest=null;this._hasUpdateError=this._hasPartialFeatures=!0;var a=this.featureLayer;a._errorHandler(m);
a._fireUpdateEnd(m)},_checkMaxLimit:function(m){var a=m?m.length:0,h=this.featureLayer.graphics.length+a,q=h>=this.maxFeatures;if(q){var n=h-this.maxFeatures;n&&m.splice(a-n,n)}return{maxLimitReached:q,featuresDiscarded:h>this.maxFeatures,features:m}},_createQueryInfo:function(){var m=this.featureLayer,a=new t;a.outFields=m.getOutFields();a.where=m._getAttributeFilter()||"1\x3d1";a.returnGeometry=!0;a.outSpatialReference=u.createSpatialReference(this.map.spatialReference.toJson());a.timeExtent=m.getTimeDefinition();
a.maxAllowableOffset=m._maxOffset;a.quantizationParameters=m._quantizationParameters;a.orderByFields=m.supportsAdvancedQueries?m.getOrderByFields():null;a.multipatchOption=m.multipatchOption;m._ts&&(a._ts=(new Date).getTime());this._cacheHintSupported&&m._enableCacheHint(a);var h=this.canFetchPBF(a);m._enableEditModeQuantization(a,h);this._applyMaxRecordCountFactor(a,h);return{query:a,pbf:h}},_applyMaxRecordCountFactor:function(m,a){var h=this.featureLayer.advancedQueryCapabilities;this.featureLayer._isCacheHintEnabled(m)&&
h&&h.supportsMaxRecordCountFactor&&("tile"!==m.resultType&&1<this.scaleToTileFactor&&(m.maxRecordCountFactor=this.scaleToTileFactor),a&&1<this.maxRecordCountFactor&&(m.maxRecordCountFactor=this.maxRecordCountFactor),5<m.maxRecordCountFactor&&(m.maxRecordCountFactor=5))},_addFeatures:function(m){var a=this.featureLayer,h=a.objectIdField,q=m.length,n=a._selectedFeatures,k=a.mode===a.constructor.MODE_AUTO;a._fireUpdateStart();a._sortFeatures(m);for(a=0;a<q;a++){var g=m[a];var b=g.attributes[h];var x=
this._addFeatureIIf(b,g);this._incRefCount(b);k&&x!==g&&n[b]&&(x.setGeometry(g.geometry),x.setAttributes(g.attributes))}this._applyTimeFilter(!0)}});B.setObject("layers._SnapshotMode",f,d);return f})},"esri/layers/RenderMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","../sniff","../kernel"],function(f,B,l,d,c){var u=!!d("esri-pbf");d=!!d("esri-featurelayer-pbf");f=f(null,{declaredClass:"esri.layers._RenderMode",enablePBFQuery:u&&d,initialize:function(t){this.map=
t;this._init=!0},startup:function(){this._started=!0},propertyChangeHandler:function(t){},destroy:function(){this._init=this._started=!1},drawFeature:function(t){},suspend:function(){},resume:function(){},refresh:function(){},hasAllFeatures:function(){return!0},hasUpdateError:function(){return!1},canFetchPBF:function(t){return!(!this.featureLayer._canFetchPBF()||!this.enablePBFQuery)},_incRefCount:function(t){(t=this._featureMap[t])&&t._count++},_decRefCount:function(t){(t=this._featureMap[t])&&t._count--},
_getFeature:function(t){return this._featureMap[t]},_addFeatureIIf:function(t,e){var r=this._featureMap,m=r[t],a=this.featureLayer;m||(r[t]=e,a._add(e),e._count=0);return m||e},_removeFeatureIIf:function(t){var e=this._featureMap[t],r=this.featureLayer;if(e){if(e._count)return;delete this._featureMap[t];r._remove(e)}return e},_registerFeature:function(t,e){var r=this._featureMap,m=r[t];m?(m.attributes=e.attributes,m.geometry=e.geometry):(r[t]=e,e._count=0,e._layer=e._graphicsLayer=e._sourceLayer=
this.featureLayer);return m||e},_unregisterFeature:function(t){var e=this._featureMap,r=e[t];r&&!r._count&&(delete e[t],r._graphicsLayer=null)},_clearIIf:function(){var t=this.featureLayer;var e=t.graphics,r=t._selectedFeatures,m=t.getSelectedFeatures().length,a=t.objectIdField;if(m)for(t=e.length-1;0<=t;t--){m=e[t];var h=m.attributes[a];h in r?m._count=1:(m._count=0,this._removeFeatureIIf(h))}else t.clear(),this._featureMap={}},_cancelPendingRequest:function(t){if(t)try{t.cancel()}catch(e){}},_toggleVisibility:function(t){var e=
this.featureLayer,r=e.graphics,m=t?"show":"hide",a,h=r.length;t=t&&e._ager;for(a=0;a<h;a++){var q=r[a];q[m]();t&&e._repaint(q)}},_applyTimeFilter:function(t){var e=this.featureLayer;if(e.timeInfo&&!e.suspended){t||e._fireUpdateStart();var r=e._trackManager;r&&r.clearTracks();var m=e.getTimeDefinition(),a=e._getOffsettedTE(e._mapTimeExtent);a?(a=e._getTimeOverlap(m,a))?(m=e._filterByTime(e.graphics,a.startTime,a.endTime),r&&r.addFeatures(m.match),l.forEach(m.match,function(h){var q=h._shape;h.visible||
(h.show(),(q=h._shape)&&q._moveToFront());e._ager&&q&&e._repaint(h)}),l.forEach(m.noMatch,function(h){h.visible&&h.hide()})):this._toggleVisibility(!1):(r&&r.addFeatures(e.graphics),this._toggleVisibility(!0));r&&(r.moveLatestToFront(),r.drawTracks());t||e._fireUpdateEnd()}}});B.setObject("layers._RenderMode",f,c);return f})},"esri/layers/support/ParallelSnapshot":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../../kernel".split(" "),function(f,B,l,
d,c,u){f=f(null,{declaredClass:"esri.layers.support.ParallelSnapshot",layer:null,mode:null,queryTask:null,batchSize:5,_queryInfo:null,_fetchDfd:null,_startPage:null,_lastPage:null,_pageSize:null,_maxPages:null,_requests:null,constructor:function(t){B.mixin(this,t);this._requests={}},destroy:function(){this.cancel()},fetch:function(){var t=new c;this.cancel(!0);this._queryInfo=this.mode._createQueryInfo();this._pageSize=this.mode._getPageSize(this._queryInfo.query);this._maxPages=Math.ceil(this._getFeatureCount()/
this._pageSize);this._fetchDfd=t;this._sendRequests();return t.promise},cancel:function(t){this._cancelPendingRequests(t);this._reset()},_reset:function(){this._startPage=this._lastPage=null;this._requests={}},_getFeatureCount:function(){return this.layer.mode===this.layer.constructor.MODE_AUTO&&0===this.layer.getLastExceedsLimitResult()?this.layer._getMaxFeaturesForAutoSnapshotMode():this.mode.maxFeatures},_sendRequests:function(t){var e=this._queryInfo.query,r=this.queryTask,m=this._requests;t=
null==t?1:t;var a=t+this.batchSize-1;a>this._maxPages&&(a=this._maxPages);if(!(t>a))for(this._startPage=t,this._lastPage=a;t<=a;t++)e.start=(t-1)*this._pageSize,e.num=this._pageSize,m[t]=r.execute(e,null,null,this._queryInfo.pbf?{format:"pbf"}:null),m[t].then(B.hitch(this,this._handleSuccess,t)).otherwise(B.hitch(this,this._handleError,t))},_evalNextBatch:function(t){t===this._lastPage&&this._sendRequests(this._lastPage+1)},_handleSuccess:function(t,e){e.exceededTransferLimit||this._cancelLaterRequests(t,
!0);var r=this.mode._checkMaxLimit(e.features);this._fetchDfd.progress({features:r.features,isError:!1});r.maxLimitReached?((t=r.featuresDiscarded||this._hasRejectedRequests())||(t=!!this._getResult(this._getLastSuccessfulRequest()).exceededTransferLimit),this._resolveFetch(t)):(e.exceededTransferLimit&&this._evalNextBatch(t),this._evalResolution())},_handleError:function(t,e){var r=this._requests;r&&r[t]&&(1===t?this._rejectFetch(e):(this._evalNextBatch(t),this._fetchDfd.progress({error:e,isError:!0}),
this._evalResolution()))},_evalResolution:function(){this._hasPendingRequests()||this._resolveFetch(this._hasRejectedRequests())},_resolveFetch:function(t){var e=this._hasRejectedRequests();this.cancel(!0);this._fetchDfd.resolve({hasPartialFeatures:t,hasUpdateError:e})},_rejectFetch:function(t){this.cancel(!0);this._fetchDfd.reject(t)},_getResult:function(t){return t&&t.dfd.results[0]},_hasPendingRequests:function(){return!!this._getPendingRequests().length},_getPendingRequests:function(){var t=this._requests,
e,r=[];for(e in t){var m=t[e];m.isFulfilled()||r.push({pageId:Number(e),dfd:m})}return r},_getLastSuccessfulRequest:function(){var t=this._getResolvedRequests(),e=-Infinity,r;t=l.filter(t,function(m){return!!this._getResult(m).features.length||1===m.pageId},this);l.forEach(t,function(m){m.pageId>e&&(e=m.pageId,r=m)});return r},_getResolvedRequests:function(){var t=this._requests,e,r=[];for(e in t){var m=t[e];m.isResolved()&&r.push({pageId:Number(e),dfd:m})}return r},_hasRejectedRequests:function(){var t=
this._getRejectedRequests(),e=this._getLastSuccessfulRequest(),r=this._getResult(e);r&&!r.exceededTransferLimit&&(t=l.filter(t,function(m){return m.pageId<=e.pageId}));return!!t.length},_getRejectedRequests:function(){var t=this._requests,e,r=[];for(e in t){var m=t[e];m.isRejected()&&r.push({pageId:Number(e),dfd:m})}return r},_cancelPendingRequests:function(t){this._cancelRequests(this._getPendingRequests(),t)},_cancelLaterRequests:function(t,e){var r=l.filter(this._getPendingRequests(),function(m){return m.pageId>
t});this._cancelRequests(r,e)},_cancelRequests:function(t,e){var r=this.mode,m=this._requests;l.forEach(t,function(a){e&&delete m[a.pageId];r._cancelPendingRequest(a.dfd)})}});B.setObject("layers.support.ParallelSnapshot",f,u);return f})},"esri/layers/OnDemandMode":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../tasks/query ./RenderMode ./GridLayout".split(" "),function(f,B,l,d,c,u,t,e,r,m){f=f([r],{declaredClass:"esri.layers._OnDemandMode",
constructor:function(a){this.featureLayer=a;this._featureMap={}},initialize:function(a){this.inherited(arguments);this._cellMap={};this._gridLayer=m.createFromFeatureLayer({layer:this.featureLayer,map:a})},startup:function(){if(!this._started||this._isSuspendedAtStartup)this.inherited(arguments),this._ioQueue=[],this._isSuspendedAtStartup=this.featureLayer.suspended,this.featureLayer.suspended||(this._zoomHandler(),this._enableConnectors())},propertyChangeHandler:function(a){this._init&&2>a&&this._zoomHandler()},
destroy:function(){this._disableConnectors();this._processIOQueue(!0);this.inherited(arguments)},drawFeature:function(a){var h=a.geometry,q=[];if(h){q=this._gridLayer.getCellsInExtent("point"===h.type?{xmin:h.x,ymin:h.y,xmax:h.x,ymax:h.y}:h.getExtent(),!1).cells;h=this._cellMap;var n,k=a.attributes[this.featureLayer.objectIdField];for(n=0;n<q.length;n++){var g=q[n];var b=g.latticeID;var x=g.row;var v=g.col;b?g=h[b]=h[b]||g:(h[x]=h[x]||{},g=h[x][v]=h[x][v]||g);g.features=g.features||[];g.features.push(a);
this._addFeatureIIf(k,a);this._incRefCount(k)}}},suspend:function(){this._init&&this._disableConnectors()},resume:function(){this._init&&(this._enableConnectors(),this._zoomHandler())},refresh:function(){this._zoomHandler()},hasAllFeatures:function(){var a=!1,h=this._getCurrentCells(),q;for(q=0;q<h.length;q++)if(h[q].hasPartialFeatures){a=!0;break}return!a},hasUpdateError:function(){var a=!1,h=this._getCurrentCells(),q;for(q=0;q<h.length;q++)if(h[q].hasUpdateError){a=!0;break}return a},canFetchPBF:function(a){return this.inherited(arguments)&&
this.featureLayer._canFetchPBFForQuery(a)},_enableConnectors:function(){var a=this.map;this._zoomConnect=B.connect(a,"onZoomEnd",this,this._zoomHandler);this._panConnect=B.connect(a,"onPanEnd",this,this._panHandler);this._resizeConnect=B.connect(a,"onResize",this,this._panHandler)},_disableConnectors:function(){B.disconnect(this._zoomConnect);B.disconnect(this._panConnect);B.disconnect(this._resizeConnect)},_zoomHandler:function(){this._processIOQueue(!0);var a=this.featureLayer,h=this.map;!a.suspended&&
a.isQueryable()&&(a._fireUpdateStart(),this._clearIIf(),(a=a._trackManager)&&a.clearTracks(),this._cellMap={},this._gridLayer.setResolution(h.extent),this._sendRequest())},_panHandler:function(a){if(this.featureLayer.isQueryable()){this.featureLayer._fireUpdateStart();var h=this.featureLayer._resized;a=h?a:null;h&&this._gridLayer.setMapState(a,this.map.width,this.map.height);this._sendRequest(a)}},_sendRequest:function(a){this._exceeds=!1;var h=this.featureLayer,q=this.map;a=a||q.extent;q=this._gridLayer.getCellsInExtent(a,
h.latticeTiling).cells;if(!h.isEditable()){var n=this._cellMap;q=d.filter(q,function(x){if(x.lattice){if(n[x.latticeID])return!1}else if(n[x.row]&&n[x.row][x.col])return!1;return!0})}this._pending=this._pending||0;var k;for(k=0;k<q.length;k++){var g=q[k],b=this._createQueryInfo(g);this._pending++;this._ioQueue.push(h._task.execute(b.query,l.hitch(this,this._drawFeatures,g),l.hitch(this,this._queryErrorHandler,g),b.pbf?{format:"pbf"}:null))}this._removeOldCells(a);this._endCheck()},_drawFeatures:function(a,
h){this.featureLayer._isImageService&&10.7>this.featureLayer.version&&void 0===h.exceededTransferLimit&&(h.exceededTransferLimit=h.features.length===this.featureLayer.maxRecordCount);a.hasPartialFeatures=!!h.exceededTransferLimit;a.hasUpdateError=!1;this._exceeds=this._exceeds||h.exceededTransferLimit;this._finalizeIO();var q=this.featureLayer,n=this.map.extent,k=a.extent,g=a.row,b=a.col,x=q.objectIdField;h=h.features;var v=this._gridLayer,y=this._cellMap,D=a.latticeID;y=D?y[D]:y[g]&&y[g][b];if(a.resolution==
v.resolution&&(D?D===v.getLatticeID(n):v.intersects(k,n)))if(y)q._sortFeatures(h),this._updateCell(y,h);else for(q._sortFeatures(h),a.features=h,this._addCellToCellMap(a),q=h.length,a=0;a<q;a++)n=h[a],k=n.attributes[x],this._addFeatureIIf(k,n),this._incRefCount(k);else y&&this._removeCell(g,b,D);this._endCheck()},_queryErrorHandler:function(a,h){this._finalizeIO();a.hasPartialFeatures=!0;a.hasUpdateError=!0;this._addCellToCellMap(a);this.featureLayer._errorHandler(h);this._endCheck(h)},_finalizeIO:function(){this._pending--},
_endCheck:function(a){if(0===this._pending){this._processIOQueue();var h=this.featureLayer,q=h._trackManager;q&&(q.clearTracks(),q.addFeatures(h.graphics),h._ager&&d.forEach(h.graphics,function(n){n._shape&&h._repaint(n)}),q.moveLatestToFront(),q.drawTracks());this.featureLayer._fireUpdateEnd(!!a&&Error("FeatureLayer: "+(a.message||"an error occurred while updating the layer.")),this._exceeds?{queryLimitExceeded:!0}:null);if(this._exceeds)h.onQueryLimitExceeded()}},_processIOQueue:function(a){this._ioQueue=
d.filter(this._ioQueue,function(h){return-1<h.fired?!1:!0});a&&d.forEach(this._ioQueue,this._cancelPendingRequest)},_createQueryInfo:function(a){var h=this.featureLayer,q=new e;q.outFields=h.getOutFields();q.where=h._getAttributeFilter();q.returnGeometry=!0;q.geometry=a.extent||a.lattice;h.latticeTiling&&a.extent&&(q.spatialRelationship=e.SPATIAL_REL_CONTAINS);q.timeExtent=h._getOffsettedTE(h._mapTimeExtent);q.maxAllowableOffset=h._maxOffset;q.quantizationParameters=h._quantizationParameters;q.orderByFields=
h.supportsAdvancedQueries?h.getOrderByFields():null;q.multipatchOption=h.multipatchOption;h._ts&&(q._ts=(new Date).getTime());(a=h.advancedQueryCapabilities)&&a.supportsQueryWithResultType&&(q.resultType="tile");a=this.canFetchPBF(q);h._enableEditModeQuantization(q,a);return{query:q,pbf:a}},_getCurrentCells:function(a){var h=[];a=a||this._cellMap;for(var q in a)if(a.hasOwnProperty(q)){var n=a[q];n&&(n.hasOwnProperty("row")||n.hasOwnProperty("latticeID")?h.push(n):"object"===typeof n&&h.push.apply(h,
this._getCurrentCells(n)))}return h},_addCellToCellMap:function(a){var h=this._cellMap;if(a.latticeID)h[a.latticeID]=a;else{var q=a.row,n=a.col;h[q]=h[q]||{};h[q][n]=a}},_removeOldCells:function(a){var h=this._cellMap,q=this._gridLayer,n,k;for(n in h)if(h[n]){var g=h[n],b=g.latticeID,x=0,v=0;if(b)x++,b!==q.getLatticeID(a)&&(this._removeCell(null,null,b),v++);else for(k in g)g[k]&&(x++,q.intersects(g[k].extent,a)||(this._removeCell(n,k),v++));v===x&&delete h[n]}},_updateCell:function(a,h){var q=this.featureLayer,
n=q.objectIdField;q=q._selectedFeatures;var k,g=h.length;a.features=a.features||[];for(k=0;k<g;k++){var b=h[k],x=b.attributes[n],v=this._addFeatureIIf(x,b);v===b?(this._incRefCount(x),a.features.push(v)):x in q||(v.setGeometry(b.geometry),v.setAttributes(b.attributes))}},_removeCell:function(a,h,q){var n=this._cellMap,k=this.featureLayer,g=k.objectIdField,b=q?n[q]:n[a]&&n[a][h];if(b&&(q?delete n[q]:delete n[a][h],a=b.features))for(h=0;h<a.length;h++)q=a[h].attributes[g],this._decRefCount(q),q in k._selectedFeatures||
this._removeFeatureIIf(q)}});l.setObject("layers._OnDemandMode",f,u);return f})},"esri/layers/GridLayout":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/normalizeUtils ../srUtils".split(" "),function(f,B,l,d,c,u,t,e,r,m,a){var h=f(null,{declaredClass:"esri.layers._GridLayout",constructor:function(q,n,k,g){this.origin=q;this.cellWidth=n.width;this.cellHeight=n.height;
this.mapWidth=k.width;this.mapHeight=k.height;this.srInfo=g},setResolution:function(q){this.resolution=(q.xmax-q.xmin)/this.mapWidth;this.srInfo&&(q=Math.round(Math.round(2*this.srInfo.valid[1]/this.resolution)/this.cellWidth),this._frameStats=[q,0,q-1])},setMapState:function(q,n,k){this.mapWidth=n;this.mapHeight=k;this.setResolution(q)},getCellCoordinates:function(q){var n=this.resolution,k=this.origin;return{row:Math.floor((k.y-q.y)/(this.cellHeight*n)),col:Math.floor((q.x-k.x)/(this.cellWidth*
n))}},normalize:function(q){var n=this._frameStats;if(n){var k=n[0],g=n[1];n=n[2];q<g?(q%=k,q=q<g?q+k:q):q>n&&(q%=k)}return q},intersects:function(q,n){var k=this.srInfo;return k?l.some(n._getParts(k),function(g){return q.intersects(g.extent)}):q.intersects(n)},getCellExtent:function(q,n){var k=this.resolution,g=this.origin,b=this.cellWidth,x=this.cellHeight;return new t(n*b*k+g.x,g.y-(q+1)*x*k,(n+1)*b*k+g.x,g.y-q*x*k,a.createSpatialReference(g.spatialReference.toJson()))},getLatticeID:function(q){var n=
this.getCellCoordinates({x:q.xmin,y:q.ymax}),k=this.getCellCoordinates({x:q.xmax,y:q.ymin});q=n.row;var g=k.row;n=this.normalize(n.col);k=this.normalize(k.col);return q+"_"+g+"_"+n+"_"+k},sorter:function(q,n){return q<n?-1:1},getCellsInExtent:function(q,n){var k=this.getCellCoordinates({x:q.xmin,y:q.ymax}),g=this.getCellCoordinates({x:q.xmax,y:q.ymin}),b=k.row,x=g.row;k=k.col;g=g.col;var v=[],y,D,E=[],C=[],z=[];for(y=b;y<=x;y++)for(D=k;D<=g;D++){var w=this.normalize(D);q=this.getCellExtent(y,w);l.some(v,
function(F){return F.row===y&&F.col===w})||v.push({row:y,col:w,extent:q,resolution:this.resolution});n&&(E.push(q.xmin,q.xmax),C.push(q.ymin,q.ymax))}k=this.normalize(k);g=this.normalize(g);E.sort(this.sorter);C.sort(this.sorter);n=E.length;for(y=n-1;0<=y;y--)y<n-1&&E[y]===E[y+1]&&E.splice(y,1);n=C.length;for(y=n-1;0<=y;y--)y<n-1&&C[y]===C[y+1]&&C.splice(y,1);if(E.length&&C.length){q=E[0];D=E[E.length-1];var A=C[0];var G=C[C.length-1];n=E.length;for(y=0;y<n;y++)z.push([[E[y],G],[E[y],A]]);n=C.length;
for(y=0;y<n;y++)z.push([[q,C[y]],[D,C[y]]]);E=new e({paths:z,spatialReference:this.origin.spatialReference.toJson()});v.push({latticeID:b+"_"+x+"_"+k+"_"+g,lattice:E,resolution:this.resolution})}return{minRow:b,maxRow:x,minCol:k,maxCol:g,topRow:b,bottomRow:x,leftCol:k,rightCol:g,cells:v}},_findCell:function(q,n,k){var g;l.some(q,function(b){b.row===n&&b.col===k&&(g=b);return!!g});return g},getExtentOfIntersectingCells:function(q){var n=this.getCellsInExtent(q),k=n&&n.cells;if(k&&k.length){var g=n.topRow,
b=n.leftCol,x=0;l.forEach(k,function(E){E.row===g&&x++});var v=this._findCell(k,g,b).extent,y=this.srInfo;if(!y||x!==this._frameStats[0]&&b!==n.rightCol){var D=v.xmin;y=D+x*v.getWidth()}else D=y.valid[0],y=y.valid[1];n=this._findCell(k,n.bottomRow,b).extent.ymin;(q=(new t(D,n,y,v.ymax,q.spatialReference))._normalize(!1,!1))&&q.rings&&(q=new r(q),q=m.getDenormalizedExtent(q));return q}}});h.createFromFeatureLayer=function(q){var n=q.layer;q=n.getMap()||q.map;var k=n._srInfo;(n=q&&q.loaded?new h(new u(k?
k.valid[0]:q.extent.xmin,k?k.valid[1]:q.extent.ymax,q.spatialReference),{width:n._tileWidth,height:n._tileHeight},{width:q.width,height:q.height},k):null)&&n.setResolution(q.extent);return n};B.setObject("layers._GridLayout",h,c);return h})},"esri/layers/SelectionMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./RenderMode"],function(f,B,l,d,c){f=f([c],{declaredClass:"esri.layers._SelectionMode",constructor:function(u){this.featureLayer=u;this._featureMap={}},
propertyChangeHandler:function(u){this._init&&0===u&&this._applyTimeFilter()},resume:function(){this.propertyChangeHandler(0)},hasAllFeatures:function(){return!this.featureLayer._hasPartialSelectedFeatures},hasUpdateError:function(){return this.featureLayer._hasSelectionError}});B.setObject("layers._SelectionMode",f,d);return f})},"esri/layers/StreamMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/has ../kernel ../SpatialReference ../tasks/query ../tasks/QueryTask ../geometry/jsonUtils ./RenderMode".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a){f=f([a],{declaredClass:"esri.layers._StreamMode",constructor:function(h,q){this.featureLayer=h;this._featureMap={};this._setRefreshRate();this._drawBuffer={adds:[],updates:[]};this._timeoutId=null;this._flushDrawBuffer=B.hitch(this,this._flushDrawBuffer);this._featuresByTime={};this._lastEndTimeCheck=null;this._maxFeatureAge=0;h.purgeOptions&&h.purgeOptions.age&&"number"===typeof h.purgeOptions.age&&(this._maxFeatureAge=1E3*Math.ceil(60*h.purgeOptions.age));this._drawFeatures=
B.hitch(this,this._drawFeatures);this._queryErrorHandler=B.hitch(this,this._queryErrorHandler)},startup:function(){this._started||this.inherited(arguments)},propertyChangeHandler:function(h){this._init&&(0===h?this._applyTimeFilter():3===h&&this._redrawAllTracks())},destroy:function(){this.inherited(arguments);clearTimeout(this._timeoutId);this._featuresByTime=this._drawBuffer=this._featureMap=null},drawFeature:function(h){var q=this.featureLayer,n=q.objectIdField;this._timeoutId||(this._timeoutId=
setTimeout(this._flushDrawBuffer,this._refreshRate));q._joinField&&this._getFeature(h.attributes[n])?this._drawBuffer.updates.push({oid:h.attributes[n],updates:h}):this._drawBuffer.adds.push(h)},resume:function(){this.propertyChangeHandler(0)},refresh:function(){this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);var h=this.featureLayer;h&&(h._relatedUrl||h._keepLatestUrl?(h._fireUpdateStart(),h._refreshing=!0,h.disconnect(),h.clear(),h._relatedQueried=!1,h._keepLatestQueried=!1,
h.connect()):(h._fireUpdateStart(),h.clear(),h._fireUpdateEnd()))},_drawFeatures:function(h,q){var n=this.featureLayer;n._create(h.features||[]);n._fireUpdateEnd(null,q)},_applyTimeFilter:function(h){this.inherited(arguments);this._redrawAllTracks()},_removeFeatures:function(h){var q=this.featureLayer,n=q.objectIdField;h&&l.forEach(h,function(k){k=k.attributes[n];q._unSelectFeatureIIf(k,this);this._decRefCount(k);this._removeFeatureIIf(k)},this)},_addFeatures:function(h){var q=this.featureLayer,n=
q._endTimeField,k=q._startTimeField,g,b=[],x=[],v=[];var y=q._trackManager;var D=q.objectIdField;if(y)for(g in h=y.addFeatures(h),h)h.hasOwnProperty(g)&&(b.push(g),h[g].adds&&(x=x.concat(h[g].adds)),h[g].deletes&&(v=v.concat(h[g].deletes)));else x=h;l.forEach(x,function(E){var C=E.attributes[D];var z=n&&E.attributes[n];!z&&this._maxFeatureAge&&(z=k&&E.attributes[k]?E.attributes[k]+this._maxFeatureAge:Date.now()+this._maxFeatureAge);z&&(z=1E3*Math.ceil(z/1E3),this._featuresByTime[z]?this._featuresByTime[z].push(C):
this._featuresByTime[z]=[C]);this._addFeatureIIf(C,E);this._incRefCount(C)},this);v.length&&this._removeFeatures(v);y&&y.refreshTracks(b)},_updateFeatures:function(h){var q=this.featureLayer,n=[];var k=q._trackManager;var g=q._trackIdField;l.forEach(h,function(b){var x=b.updates;b=this._getFeature(b.oid);var v;if(b){x.geometry&&b.setGeometry(x.geometry);x=x.attributes||{};for(v in x)x.hasOwnProperty(v)&&(b.attributes[v]=x[v]);b.setAttributes(b.attributes);b.visible=this._checkFeatureTimeIntersects(b);
k&&b.attributes[g]?n.push(b.attributes[g]):q._repaint(b,null,!0)}},this);n.length&&k.refreshTracks(n)},_redrawAllTracks:function(){var h=this.featureLayer._trackManager,q;h&&(q=h.trimTracks())&&0<q.length&&(this._removeFeatures(q),h.refreshTracks())},_flushDrawBuffer:function(){clearTimeout(this._timeoutId);var h=this._drawBuffer,q=h.adds.splice(0,h.adds.length),n=h.updates.splice(0,h.updates.length);h=this.featureLayer;if(!h)return!1;h.updating||h._fireUpdateStart();this._addFeatures(q);this._updateFeatures(n);
(q=this._getExpiredFeatures())&&q.length&&(this._removeFeatures(q),h._trackManager&&h._trackManager.removeFeatures(q));h._purge();h._fireUpdateEnd();this._timeoutId=null},_clearDrawBuffer:function(){var h=this._timeoutId,q=this._drawBuffer,n=q.adds;q=q.updates;h&&clearTimeout(h);n.splice(0,n.length);q.splice(0,q.length);this._timeoutId=null},_clearTimeBin:function(){this._featuresByTime={};this._lastEndTimeCheck=1E3*Math.ceil(Date.now()/1E3)},_clearFeatureMap:function(){this._featureMap={}},_setRefreshRate:function(h){h=
h||0===h?h:200;0>h&&(h=200);this._refreshRate=h},_checkFeatureTimeIntersects:function(h){var q=this.featureLayer,n=q.getMap();return(n=n?n.timeExtent:null)&&q.timeInfo&&(q.timeInfo.startTimeField||q.timeInfo.endTimeField)?0<q._filterByTime([h],n.startTime,n.endTime).match.length:!0},_fetchArchive:function(h){var q=new d,n=this.featureLayer;this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);n._fireUpdateStart();if(h&&this.map){h=new r(h);var k=new e;var g=this.map;var b=n.getFilter()||
{};var x=b.where||"1\x3d1";var v=b.geometry?m.fromJson(b.geometry):null;b=b.outFields?b.outFields.split(","):["*"];k.geometry=v;k.where=x;k.outFields=b;k.returnGeometry=!0;k.outSpatialReference=new t(g.spatialReference.toJson());this._pendingRequest=h.execute(k).then(function(y){this._pendingRequest=null;var D=this._fixFieldNameCasing(n,y);y.features=D;this._drawFeatures(y);n._fireUpdateEnd();q.resolve()}.bind(this)).otherwise(function(y){this._pendingRequest=null;n._errorHandler(y);n._fireUpdateEnd(y);
q.reject(y)}.bind(this))}else q.resolve();return q.promise},_queryErrorHandler:function(h){var q=this.featureLayer;q._errorHandler(h);q._fireUpdateEnd(h)},_fixFieldNameCasing:function(h,q){var n=q.features||[],k=q.fields;if(!k||!n.length)return n;h=this._mapFieldNameDifferences(h.fields,k);k=[];for(var g,b=0,x=q.features.length;b<x;b++)q=n[b],g=this._swizzleResponseAttributes(q.attributes,h),k.push({geometry:q.geometry,attributes:g});return k},_mapFieldNameDifferences:function(h,q){var n=[],k={},
g;var b=0;for(g=q.length;b<g;b++)n.push(q[b].name);b=0;for(g=h.length;b<g;b++){q=h[b].name;var x=this._checkForStreamFieldName(q,n);x&&(k[x]=q)}return k},_checkForStreamFieldName:function(h,q){h=h.toLowerCase();for(var n,k=0,g=q.length;k<g;k++)if(q[k].toLowerCase()===h){n=q[k];break}return n},_swizzleResponseAttributes:function(h,q){var n={},k;for(k in h)if(h.hasOwnProperty(k)){var g=h[k];q.hasOwnProperty(k)?n[q[k]]=g:n[k]=g}return n},_getExpiredFeatures:function(){var h,q,n=[],k=[];if(!this.featureLayer._endTimeField&&
!this._maxFeatureAge)return k;var g=1E3*Math.floor(this._lastEndTimeCheck/1E3);this._lastEndTimeCheck=h=1E3*Math.ceil(Date.now()/1E3);if(g&&g!==h)for(q=this._featuresByTime;g<=h;g+=1E3)q[g]&&(n=n.concat(q[g]),delete q[g]);l.forEach(n,function(b){(b=this._getFeature(b))&&k.push(b)},this);return k}});B.setObject("layers._StreamMode",f,u);return f})},"esri/layers/TrackManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/dom-construct dojox/gfx ../kernel ../graphic ../geometry/Polyline ./GraphicsLayer".split(" "),
function(f,B,l,d,c,u,t,e,r,m){var a=-1!==u.renderer.toLowerCase().indexOf("canvas");f=f(null,{declaredClass:"esri.layers._TrackManager",constructor:function(h){this.layer=h;this.trackMap={};this.trackLineMap={}},initialize:function(h){this.map=h;h=this.layer;this.createTracklineContainer()&&(this._handles=[h.on("visibility-change",B.hitch(this,function(q){this.container.setVisibility(q.visible);this.container.evaluateSuspension()})),h.on("scale-range-change",B.hitch(this,function(){this.container.setScaleRange(this.layer.minScale,
this.layer.maxScale)}))])},createTracklineContainer:function(){var h=this.layer;if("esriGeometryPoint"!==h.geometryType)return null;var q=this.map,n=h._getRenderer();n=n&&n.trackRenderer;var k=this.container=new m._GraphicsLayer({id:h.id+"_tracks",_child:!0,visible:h.visible,minScale:h.minScale,maxScale:h.maxScale});k.loaded=!0;k.onLoad(k);k._setMap(q,h._div);a||(q=k._div.getNode(),h=h._div.getNode(),q&&h&&c.place(q,h,"first"));k.setRenderer(n);return k},addFeatures:function(h){var q=this.trackMap,
n=this.layer,k=n._trackIdField,g=[];l.forEach(h,function(y){var D=y.attributes[k];(q[D]=q[D]||[]).push(y);-1===l.indexOf(g,D)&&g.push(D)});var b=n._startTimeField,x=n.objectIdField,v=function(y,D){var E=y.attributes[b],C=D.attributes[b];return E===C?y.attributes[x]<D.attributes[x]?-1:1:E<C?-1:1};l.forEach(g,function(y){q[y].sort(v)})},trimTracks:function(h){function q(x){for(x=n[x]||[];x.length>k;)g.push(x.shift())}var n=this.trackMap,k=this.layer.maximumTrackPoints||0,g=[],b;if(!k)return g;if(h)l.forEach(h,
function(x){q(x)});else for(b in n)n.hasOwnProperty(b)&&q(b);return g},drawTracks:function(h){function q(y){var D=b[y],E,C;var z=n.trackLineMap[y];k.remove(z);delete n.trackLineMap[y];z=null;if(!D||2>D.length)return!1;z=[];for(E=D.length-1;0<=E;E--)(C=D[E].geometry)&&z.push([C.x,C.y]);D={};D[v]=y;1<z.length&&(z=new e(new r({paths:[z],spatialReference:x}),null,D),k.add(z),n.trackLineMap[y]=z)}var n=this,k=this.container,g;if(k){var b=this.trackMap;var x=this.map.spatialReference;var v=this.layer._trackIdField;
if(h)l.forEach(h,function(y){q(y)});else for(g in b)b.hasOwnProperty(g)&&q(g)}},refreshTracks:function(h){function q(v){var y;n.drawTracks([v]);if(b&&b.latestObservationRenderer){v=k[v]||[];var D=v.length;for(y=0;y<D;y++)g._repaint(v[y],null,!0)}}var n=this,k=this.trackMap,g=this.layer,b=g._getRenderer(),x;if(h)l.forEach(h,function(v){q(v)});else for(x in k)k.hasOwnProperty(x)&&q(x);this.moveLatestToFront()},moveLatestToFront:function(h){l.forEach(this.getLatestObservations(h),function(q){var n=q._shape;
n&&n._moveToFront();this._repaint(q,null,!0)},this.layer)},getLatestObservations:function(h){function q(x){x=g[x];return x[x.length-1]}var n=[],k=this.layer._getRenderer(),g=this.trackMap,b;if(!k.latestObservationRenderer)return n;if(h)l.forEach(h,function(x){n.push(q(x))});else for(b in g)g.hasOwnProperty(b)&&n.push(q(b));return n},clearTracks:function(h){var q=this.getLatestObservations(h),n=this.container,k=this.trackMap,g;if(h)l.forEach(h,function(x){delete this.trackMap[x];n&&(b=this.trackLineMap[x],
n.remove(b),delete this.trackLineMap[x])},this);else{if(n)for(g in k){var b=this.trackLineMap[g];n.remove(b)}this.trackMap={};this.trackLineMap={}}l.forEach(q,function(x){this._repaint(x,null,!0)},this.layer)},isLatestObservation:function(h){var q=this.trackMap[h.attributes[this.layer._trackIdField]];return q?q[q.length-1]===h:!1},destroy:function(){l.forEach(this._handles,function(q){q.remove()});var h=this.container;h&&(h.clear(),h._unsetMap(this.map,this.layer._div));this.map=this.layer=this.trackMap=
this.container=null}});B.setObject("layers._TrackManager",f,t);return f})},"esri/layers/HeatmapManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/_base/array require ../kernel ../sniff ../geometry/Point ../geometry/webMercatorUtils ./MapImage ../renderers/HeatmapRenderer ../tasks/query dojo/_base/fx".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h,q){function n(){}function k(g){var b=g.layer;return{geometry:g.geometry,attributes:g.attributes,getLayer:function(){return b}}}
f=f(null,{declaredClass:"esri.layers.HeatmapManager",heatmapRenderer:null,sourceLayer:null,imageLayer:null,useTiles:!0,useWorker:!1,map:null,constructor:function(g){this.sourceLayer=g;this._hndls=[]},initialize:function(g){this.map=g;var b=this.sourceLayer,x=b.renderer;b.setDrawMode(!1);this.imageLayer=g._getMapImageLyr();var v=this;this.heatmapRenderer=x instanceof a?x:(x.getRendererInfoByZoom(g.getZoom())||x.getRendererInfoByScale(g.getScale())).renderer;this.redraw=this.redraw.bind(this);this.recalculateHeatmap=
this.recalculateHeatmap.bind(this);this._removeRenderer=this._removeRenderer.bind(this);this._handleRendererChange=this._handleRendererChange.bind(this);this._rendererChangeHandle=this.sourceLayer.on("renderer-change",this._handleRendererChange);this._handleOpacityChange=this._handleOpacityChange.bind(this);this._reprojectFeature=this._reprojectFeature.bind(this);c(["../workers/heatmapCalculator"],function(y){v._calculator=new y(B.mixin({width:v.map.width,height:v.map.height},v._getOptions()));v._setupRenderer();
v.heatmapRenderer.getStats=y.calculateStats;v.heatmapRenderer.getHistogramData=y.getHistogramData})},destroy:function(){this._removeHandlers();this._rendererChangeHandle&&this._rendererChangeHandle.remove();this._rendererChangeHandle=this.sourceLayer=this.imageLayer=this.map=this.heatmapRenderer=this._hndls=null},_handleRendererChange:function(g){var b=g.renderer,x=b instanceof a;this.heatmapRenderer?x?this.heatmapRenderer=b:this._removeRenderer(g):x&&(this.heatmapRenderer=b,this.sourceLayer&&this.map&&
this._setupRenderer())},_handleOpacityChange:function(g){g=g.opacity;var b=this._getImageBySourceId(this.sourceLayer.id);b&&b.setOpacity(g)},_setupRenderer:function(){var g=this._hndls,b=this.sourceLayer,x=this.map,v=this;b._originalDraw=b._draw;b._draw=n;b._div.clear();clearTimeout(this._resetTimer);this._resetTimer=setTimeout(this._resetGraphics.bind(this),250);g.push(b.on("update-end",this.redraw));g.push(b.on("suspend",function(y){(y=v._getImageBySourceId(v.sourceLayer.id))&&y.hide()}));g.push(b.on("resume",
function(y){(y=v._getImageBySourceId(v.sourceLayer.id))&&y.show()}));g.push(l.after(b,"redraw",this.redraw));g.push(x.on("layer-remove",function(y){y.layer==b&&((y=v._getImageBySourceId(v.sourceLayer.id))&&v.imageLayer.removeImage(y),v._removeRenderer({target:b}))}));b._collection&&g.push(b.on("graphic-add",function(y){v._reprojectFeature(y.graphic);v.redraw()}));1!==b.mode&&(g.push(x.on("resize, pan-end",this.redraw)),g.push(x.on("zoom-end",this.redraw)));g.push(b.on("opacity-change",this._handleOpacityChange));
this.imageLayer.suspended&&this.imageLayer.resume();b.graphics&&b.graphics.length&&(b.graphics[0].geometry&&!x.spatialReference.equals(b.graphics[0].geometry.spatialReference)&&d.forEach(b.graphics,function(y){this._reprojectFeature(y)}.bind(this)),this.redraw())},redraw:function(){if(!this._drawTimer){var g=this;this._drawTimer=setTimeout(function(){clearTimeout(g._drawTimer);g._drawTimer=null;g.sourceLayer._getRenderer().isInstanceOf(a)&&g.recalculateHeatmap()},16)}},_removeRenderer:function(g){var b=
g.target;b._draw=b._originalDraw;delete b._originalDraw;b.setDrawMode(!0);this._removeHandlers();this._hndls=[];var x=this._getImageBySourceId(this.sourceLayer.id);x&&this.imageLayer.removeImage(x);clearTimeout(this._drawTimer);clearTimeout(this._resetTimer);this._drawTimer=this._resetTimer=null;b.renderer!=g.renderer&&b.renderer.getRendererInfo?this.heatmapRenderer=null:(this.destroy(),b.renderer&&b.renderer.getRendererInfo&&b.redraw())},recalculateHeatmap:function(){this._calculator?this._doMainCalculation():
this._calculatorClient&&this._doWorkerCalculation()},_reprojectFeature:function(g){if(g&&g.geometry){var b=g.geometry,x=this.map.spatialReference;x.equals(b.spatialReference)||(b=r.project(b,x),null!=b&&(g.geometry=b))}},_doWorkerCalculation:function(){},_doMainCalculation:function(){var g=this.sourceLayer,b=this.map,x=this.heatmapRenderer,v=this.map.extent,y=this.map.width,D=this.map.height,E=this._calculator,C=this,z=function(A){A=C._getScreenPoints(A.features,b,g);A=E.calculateImageData(B.mixin({screenPoints:A,
mapinfo:{extent:[v.xmin,v.ymin,v.xmax,v.ymax],resolution:b.getResolution()},width:y,height:D},C._getOptions()));A=x.getSymbol(k({geometry:b.extent,attributes:{size:[y,D],imageData:A},layer:g}));A=new m({extent:b.extent,href:A.url,opacity:0,sourceId:g.id});C._swapMapImages(A,C._getImageBySourceId(g.id));g.suspended&&A.hide()},w={geometry:b.extent,timeExtent:g.useMapTime?b.timeExtent:void 0,spatialRelationship:h.SPATIAL_REL_INTERSECTS};null!=g._canDoClientSideQuery(w)?g.queryFeatures(w,z):z({features:g.graphics})},
_getScreenPoints:function(g,b,x){var v=[],y=g.length,D=0,E=0,C=new e(b.extent.xmin,b.extent.ymax,b.spatialReference),z=b.toScreen(C),w=z.x;z=z.y;var A=b.getResolution(),G;for((E=b.extent.getCacheValue("_parts"))&&(G=d.map(E,function(H){return x._intersects(b,H.extent)[0]}));y--;)if(E=g[y],E.geometry&&E.visible){var F={x:Math.ceil((E.geometry.x-C.x)/A+w),y:Math.floor((C.y-E.geometry.y)/A-z),attributes:E.attributes};G&&(E=1<G.length&&F.x<-G[0]?G[1]:G[0],F.x+=E);v[D++]=F}return v},_getImageBySourceId:function(g){var b=
this.imageLayer.getImages();b=d.filter(b,function(x){return x.sourceId==g});if(b.length)return b[b.length-1]},_swapMapImages:function(g,b){function x(){v.removeImage(b)}var v=this.imageLayer,y=this.sourceLayer.opacity;v.addImage(g);q.anim(g._node,{opacity:y},null,null,function(){g.opacity=y});null!=b&&q.anim(b._node,{opacity:0},null,null,x)},_removeHandlers:function(){if(null!=this._hndls)for(var g=this._hndls.length;g--;)this._hndls[g].remove()},_getOptions:function(){var g=this.heatmapRenderer;
return{blurRadius:g.blurRadius,gradient:g.gradient,maxPixelIntensity:g.maxPixelIntensity,minPixelIntensity:g.minPixelIntensity,field:g.field,fieldOffset:g.fieldOffset}},_resetGraphics:function(){clearTimeout(this._resetTimer);this._resetTimer=null;for(var g=this.sourceLayer.graphics,b=g.length,x;b--;)x=g[b],x._shape=x._offsets=void 0}});B.setObject("layers.HeatmapManager",f,u);return f})},"esri/layers/clustering/ClusterManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../../kernel ../../Evented ../../graphic ../../lang ../../Color ../../graphicsUtils ../../dijit/PopupTemplate ../../dijit/Legend/utils ../../renderers/ClassBreaksRenderer ../../symbols/SimpleMarkerSymbol ../support/attributeUtils ../GraphicsLayer ../Field ./GeohashAggregation ./statUtils dojo/i18n!../../nls/jsapi".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y){var D=y.layers.clusters,E=y.widgets.popup,C=D.numFeatures,z=Math.pow(2,53)-1;f=f(u,{declaredClass:"esri.layers.clustering.ClusterManager",layer:null,aggregationInfo:null,container:null,defaults:{clusterRadius:80,markerSymbol:{color:[77,77,77,255],size:6,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}}},_initialized:!1,_map:null,_eventHandles:null,_clusterRadius:null,
_renderer:null,_statisticInfos:null,_fields:null,_infoTemplate:null,_clusterGenerator:null,_singleGraphics:null,constructor:function(w){this._eventHandles=[];this.layer=w.layer;this.setAggregationInfo(w.aggregationInfo)},initialize:function(w){this._initialized=!0;this._map=w;this._removeFromPopup(this.layer);this.container=this._createContainer();this._clusterGenerator=this._createClusterGenerator();this._initClusterGenerator();this._createLayerEventListeners();this._createMapEventListeners();this._createPopupEventListeners()},
destroy:function(w){this._clearSingleGraphics();this._removeClusterBoundary();this._destroyEventListeners();this._removeFromPopup(this.container);this._removeFromPopup(this.layer);this._resetClusterNav();this._destroyClusterGenerator(w);this._destroyContainer();this.layer=this.aggregationInfo=this._map=null},setAggregationInfo:function(w){this.aggregationInfo=w?B.mixin({},w):null;this._applyAggregationInfo()},getClusterRenderer:function(){return this._renderer},getClusterFields:function(){return this._fields||
[]},getFeaturesInCluster:function(w){w=w&&w.getAggregationInfo();return this._clusterGenerator?this._clusterGenerator.getFeaturesInCluster(w):[]},getAggregateGraphics:function(){return this.container?this.container.graphics.slice(0):[]},getSingleGraphics:function(){return this._singleGraphics?this._singleGraphics.slice(0):[]},redraw:function(){this.container&&this.container.redraw()},isClusteringEnabled:function(){return!(!this._clusterGenerator||!this._clusterGenerator.clustersEnabled)},isClusteringActive:function(){return!!(this._clusterGenerator&&
0<this._clusterGenerator.getNumFeatures())},toggleFeatureVisibility:function(w){this._clusterGenerator&&this._clusterGenerator.toggleFeatureVisibility(w)},_createContainer:function(){var w=this.layer,A=new g._GraphicsLayer({_child:!0,id:w.id+"_clusters",visible:w.visible,minScale:w.minScale,maxScale:w.maxScale,infoTemplate:this._infoTemplate});A.fields=this._fields;A.setRenderer(this._renderer);A.loaded=!0;A.onLoad(A);A._setMap(this._map,w._div);return w._childLayer=A},_destroyContainer:function(){var w=
this.container;w&&(w.clear(),w._unsetMap(this._map,this.layer._div),this.layer._childLayer=null);this.container=null},_createClusterGenerator:function(){return new x({map:this._map,layer:this.layer,clusterRadius:this._clusterRadius,statisticInfos:this._statisticInfos})},_initClusterGenerator:function(){var w=this._clusterGenerator;w.loaded?this._awaitClusterGenerator():this._eventHandles.push(w.on("load",B.hitch(this,function(){this._awaitClusterGenerator()})),w.on("load-error",B.hitch(this,function(A){})))},
_destroyClusterGenerator:function(w){this._clusterGenerator&&this._clusterGenerator.destroy(w);this._clusterGenerator=null},_awaitClusterGenerator:function(){var w=this._clusterGenerator;w.started?(this._applyRenderer(),this._initClusterUpdates()):this._eventHandles.push(w.on("start",B.hitch(this,function(){this._applyRenderer();this._initClusterUpdates()})))},_applyAggregationInfo:function(){this._applyClusterRadius();this._applyRenderer();this._clusterGenerator&&!this._clusterGenerator.isUpdateScheduled()&&
this.redraw()},_applyClusterRadius:function(){var w=this.aggregationInfo;this._clusterRadius=w&&w.clusterRadius||this.defaults.clusterRadius;this._clusterGenerator&&this._clusterGenerator.setClusterRadius(this._clusterRadius);this._computeClusterRadius()},_computeClusterRadius:function(){var w=this.aggregationInfo||{};w.clusterRadius=this._clusterRadius;this.aggregationInfo=w},_applyRenderer:function(){var w=this.container,A=this._getClusterRendererInfo(),G=this._compareStatInfos(this._statisticInfos,
A.statisticInfos);G&&(this._statisticInfos=A.statisticInfos,this._clusterGenerator&&(this._clusterGenerator.setStatisticInfos(l.map(this._statisticInfos,function(F){return{attributeInfo:F.attributeInfo,statisticType:F.statisticType}})),w&&l.forEach(w.graphics,function(F){this._applyClusterAttributes(F,F.getAggregationInfo())},this)));this._renderer=A.renderer;this._applyFields();this._applyInfoTemplate(!!G&&this._initialized);w&&(w.setRenderer(this._renderer),this.emit("renderer-change"))},_applyFields:function(){this._fields=
this._getFields(this._statisticInfos);this.container&&(this.container.fields=this._fields)},_applyInfoTemplate:function(w){var A=this.aggregationInfo,G=A&&A.disablePopup;this.layer.infoTemplate&&!G?(A=A&&A.infoTemplate||this._infoTemplate,w=w||!A?this._createInfoTemplate():this._updateInfoTemplate(A)):w=null;this._infoTemplate=w;this.container&&this.container.setInfoTemplate(this._infoTemplate);this._computeInfoTemplate()},_computeInfoTemplate:function(){var w=this.aggregationInfo||{};w.infoTemplate=
this._infoTemplate;this.aggregationInfo=w},_getClusterRendererInfo:function(){var w=this.layer&&this.layer.renderer;return w?this._createClusterRenderer(w):this._getDefaultClusterRenderer()},_getDefaultClusterRenderer:function(){var w=this._createContinuousCountRenderer();this._addSizeByCountVariable(w);return{renderer:w,statisticInfos:[]}},_createContinuousCountRenderer:function(w){var A=new q(null,"cluster_count");A.addBreak({minValue:-z,maxValue:z,symbol:w?new w.constructor(w.toJson()):new n(B.clone(this.defaults.markerSymbol))});
return A},_createClusterRenderer:function(w){if(!this._isSupportedRenderer(w))return this._getDefaultClusterRenderer();var A=[];if(this._isSimpleRenderer(w))var G=this._createContinuousCountRenderer(w.symbol);else{G=new w.constructor(w.toJson());var F=this._getRendererAttributeInfo(w);if(this._isCBRenderer(G)){var H=v.getClusterField(F,"avg");A.push(this._getStatInfo(F,"avg"));G.normalizationType=null;G.normalizationField=null;G.normalizationTotal=null}else this._isUVRenderer(G)&&(H=v.getClusterField(F,
"type"),A.push(this._getStatInfo(F,"type")));G.attributeField=H;G.setValueExpression(null);G.valueExpressionTitle=null;G.setVisualVariables(null);this._setRendererTitle(G,w)}w=this._getSupportedVariables(w);F=this._createClusterVariables(w.allVars,A);G.setVisualVariables(F);w.sizeVars.length||this._isCBSizeRenderer(G)||this._addSizeByCountVariable(G);return{renderer:G,statisticInfos:A}},_isSupportedRenderer:function(w){if(this._isSimpleRenderer(w))return!0;if(this._isCBRenderer(w)){var A=w.normalizationType;
return"function"===typeof w.attributeField||A&&"field"!==A?!1:!0}return this._isUVRenderer(w)?"function"===typeof w.attributeField||w.attributeField2?!1:!0:!1},_isSimpleRenderer:function(w){return-1<w.declaredClass.toLowerCase().indexOf("simplerenderer")},_isCBRenderer:function(w){return-1<w.declaredClass.toLowerCase().indexOf("classbreaksrenderer")},_isUVRenderer:function(w){return-1<w.declaredClass.toLowerCase().indexOf("uniquevaluerenderer")},_isCBSizeRenderer:function(w){var A=w.infos;if(!this._isCBRenderer(w)||
!A||2>A.length)return!1;var G=Infinity,F=-Infinity;l.forEach(A,function(H){if(H=H.symbol){var J=0;switch(H.type){case "simplemarkersymbol":J=H.size;break;case "picturemarkersymbol":J=(H.width+H.height)/2}G=Math.min(G,J);F=Math.max(F,J)}});return Infinity!==G&&-Infinity!==F&&G!==F},_getRendererAttributeInfo:function(w){var A=w.attributeField,G=A?this.layer.getField(A):null;return{field:A,attributeType:G&&"esriFieldTypeDate"===G.type?"date":null,rotationType:null,valueExpression:w.valueExpression,valueExpressionTitle:w.valueExpressionTitle,
normalizationField:w.normalizationField}},_setRendererTitle:function(w,A){w.legendOptions=B.clone(A.legendOptions);w.legendOptions&&w.legendOptions.title||(w.legendOptions=w.legendOptions||{},w.legendOptions.title=h.getRendererTitle(A,this.layer))},_getSupportedVariables:function(w){var A=w.getVisualVariablesForType("colorInfo",!1)||[],G=w.getVisualVariablesForType("sizeInfo",!1)||[],F=w.getVisualVariablesForType("opacityInfo",!1)||[];w=w.getVisualVariablesForType("rotationInfo",!1)||[];A=l.filter(A,
this._variableFilter);G=l.filter(G,this._variableFilter);F=l.filter(F,this._variableFilter);w=l.filter(w,this._variableFilter);return{sizeVars:G,allVars:A.concat(G).concat(F).concat(w)}},_variableFilter:function(w){return"function"!==typeof w.field&&!k.viewScaleRE.test(w.valueExpression)},_createClusterVariables:function(w,A){return l.map(w,function(G){return this._createVarForAvg(G,A)},this)},_createVarForAvg:function(w,A){var G=B.clone(w),F=this._getVariableAttributeInfo(w);G.field=v.getClusterField(F,
"avg");G.normalizationField=null;G.valueExpression=null;G.valueExpressionTitle=null;F=this._getStatInfo(F,"avg");this._addStatInfo(A,F);this._setVariableTitle(G,w);return G},_getVariableAttributeInfo:function(w){var A="rotationInfo"===w.type,G=A?"angle":null;A=A?w.rotationType:null;var F=w.legendOptions&&w.legendOptions.title,H=w.field,J=H?this.layer.getField(H):null;J&&"esriFieldTypeDate"===J.type&&(G="date");return{field:H,attributeType:G,rotationType:A,valueExpression:w.valueExpression,valueExpressionTitle:w.valueExpressionTitle||
w.valueExpression&&F,normalizationField:w.normalizationField}},_setVariableTitle:function(w,A){w.legendOptions&&w.legendOptions.title||(w.legendOptions=w.legendOptions||{},w.legendOptions.title=h.getVisualVariableTitle(A,this.layer))},_getStatInfo:function(w,A){return{statisticHash:v.getStatisticHash(w,A),attributeInfo:w,statisticType:A}},_addStatInfo:function(w,A){var G=this._findStatInfo(w,A);G?G.attributeInfo.valueExpressionTitle||(G.attributeInfo.valueExpressionTitle=A.attributeInfo.valueExpressionTitle):
w.push(A)},_findStatInfo:function(w,A){var G;l.some(w,function(F){F.statisticHash===A.statisticHash&&(G=F);return!!G});return G},_compareStatInfos:function(w,A){var G=l.filter(w,function(H){return!this._findStatInfo(A,H)},this),F=l.filter(A,function(H){return!this._findStatInfo(w,H)},this);return F.length||G.length?{added:F,removed:G}:null},_addSizeByCountVariable:function(w){var A=this._createSizeByCountVariable();A&&this._addVariable(w,A)},_getSizeByCountVariable:function(w){w=w.getVisualVariablesForType("sizeInfo",
!1)||[];return l.filter(w,function(A){return"cluster_count"===A.field})[0]},_updateSizeByCountVariable:function(){var w=this._renderer,A=this._getSizeByCountVariable(w);if(A){var G=this._createSizeByCountVariable();G&&this._replaceVariable(w,A,G)}},_createSizeByCountVariable:function(){var w=this._clusterGenerator;if(w){var A=w.getCurrentLodStats();if(A){var G=w.getNumFeatures();w=w.clusters;var F=A.min,H=A.max;1===A.count&&F===G||1===w.length&&w[0].count===G?(F=1,H=G):F&&F===H&&(H=2*F);G={type:"sizeInfo",
field:"cluster_count",valueUnit:"unknown",minSize:12,maxSize:50,minDataValue:F,maxDataValue:H,legendOptions:{title:C}}}}return G},_addVariable:function(w,A){var G=w.visualVariables||[];G.push(A);w.setVisualVariables(G)},_replaceVariable:function(w,A,G){var F=w.visualVariables;A=l.indexOf(F,A);-1<A&&F.splice(A,1);F.push(G);w.setVisualVariables(F)},_getFields:function(w){var A=[new b({name:"cluster_count",type:"esriFieldTypeInteger"})];l.forEach(w,function(G){var F=G.statisticType;G=G.attributeInfo;
var H;"avg"===F?H="date"===G.attributeType?"esriFieldTypeDate":"esriFieldTypeDouble":"type"===F&&(H=G.field?this.layer.getField(G.field).type:"esriFieldTypeString");A.push(new b({name:v.getClusterField(G,F),type:H}))},this);return A},_createInfoTemplate:function(){var w=this._statisticInfos,A=this._renderer,G=[{fieldName:"cluster_count",label:C,visible:!0,format:{digitSeparator:!0,places:0}}],F=[],H=[e.substitute({count:"{cluster_count}"},D.countSummary)],J=this._isUVRenderer(A)?A.infos:[];l.forEach(w,
function(K){var Q=K.statisticType,P=K.attributeInfo,I=v.getClusterField(P,Q),N=this._getFieldLabel(K);if("avg"===Q){var L={fieldName:I,label:N,visible:!0,format:"date"===P.attributeType?{dateFormat:"shortDateShortTime"}:{digitSeparator:!0,places:1}};var W=this._getFieldSummary(K,I)}else"type"===Q&&(W="expression/"+I,L={fieldName:W,visible:!0},F.push({name:I,title:N,returnType:"string",expression:this._getExpression(J,I)}),W=this._getFieldSummary(K,W));L&&G.push(L);W&&H.push(W)},this);return this._createPopupTemplate({fieldInfos:G,
expressionInfos:F,description:H.join("\x3cbr/\x3e\x3cbr/\x3e")})},_updateInfoTemplate:function(w){var A=w.toJson(),G=this._isUVRenderer(this._renderer)?this._renderer.infos:[];l.forEach(this._statisticInfos,function(F){var H=F.statisticType;F=v.getClusterField(F.attributeInfo,H);"type"===H&&(H=this._findExpressionInfo(F,A))&&(H.expression=this._getExpression(G,F))},this);return this._createPopupTemplate(A)},_createPopupTemplate:function(w){var A=new a(w),G=A.title;A.setTitle(B.hitch(this,function(F){var H=
this._map&&this._map.infoWindow;if("esri.dijit.PopupMobile"!==(H&&H.declaredClass)||A.info.title)return G.call(A,F);F=(F=F.attributes)&&F.cluster_count;return null==F?"":e.substitute({count:F},D.countTitle)}));return A},_findExpressionInfo:function(w,A){var G;l.some(A.expressionInfos,function(F){F.name===w&&(G=F);return!!G});return G},_escapeDoubleQuotes:function(w){return w?w.replace(/"/g,'\\"'):""},_getExpression:function(w,A){return["var uvInfos \x3d ["+this._getObjects(w).join(", ")+"];",'var predominantType \x3d Text($feature["'+
A+'"]);','var label \x3d "'+this._escapeDoubleQuotes(D.predominantNoneValue)+'";',"for (var i \x3d 0; i \x3c Count(uvInfos); i++) {\nif (uvInfos[i].value \x3d\x3d predominantType) {\nlabel \x3d uvInfos[i].label;\nbreak;\n}\n}\nreturn label;"].join("\n")},_getObjects:function(w){return l.map(w,function(A){return'{"value": "'+String(A.value)+'","label": "'+this._escapeDoubleQuotes(String(A.label))+'"}'},this)},_getFieldLabel:function(w){var A=w.statisticType,G=w.attributeInfo,F=G.field;w=G.normalizationField;
var H="";if("avg"===A)var J=w?D.avgNormFieldLabel:D.avgFieldLabel;else"type"===A&&(J=D.predominantFieldLabel);J&&(A=G.valueExpression?G.valueExpressionTitle:this.layer.getFieldLabel(F),w=w&&this.layer.getFieldLabel(w),H=e.substitute({fieldLabel:A||"",normFieldLabel:w||""},J));return H},_getFieldSummary:function(w,A){var G=w.statisticType,F=w.attributeInfo,H=F.field;w=F.normalizationField;var J="";if("avg"===G)var K=w?D.avgNormFieldSummary:D.avgFieldSummary;else"type"===G&&(K=D.predominantFieldSummary);
K&&(G=F.valueExpression?F.valueExpressionTitle:this.layer.getFieldLabel(H),w=w&&this.layer.getFieldLabel(w),J=e.substitute({fieldLabel:G||"",normFieldLabel:w||"",fieldValue:"{"+A+"}"},K));return J},_removeFromPopup:function(w){var A=this._map.infoWindow,G=A.features;if(G&&G.length){var F=l.filter(G,function(H){return H.getLayer()!==w});F.length<G.length&&(F.length?A.setFeatures(F):(A.clearFeatures(),A.hide()))}},_resetClusterNav:function(){this._resetClusterNavPartial();this._popupClusterGraphic=
null},_resetClusterNavPartial:function(){this._map.infoWindow.removeActions&&this._map.infoWindow.removeActions(this._popupActions);this._hideSingleGraphic(this._popupSingleGraphic);this._popupSingleGraphic=null},_addClusterBoundary:function(w,A){(A=A.clusterFillSymbol)&&(A=new A.constructor(A.toJson()));w=new t(w,A);this._map.graphics.add(w);this._clusterBoundary=w},_removeClusterBoundary:function(){this._map.graphics.remove(this._clusterBoundary);this._clusterBoundary=null},_createBrowseFeaturesAction:function(){return this._map.infoWindow.addActions([{title:E.NLS_browseFeatures,
className:"browseFeatures",callback:B.hitch(this,function(w){w.preventDefault();w=this._map.infoWindow;var A=w.getSelectedFeature(),G=A.getChildGraphics(),F=w.getCurrentAnchor();w.setFeatures(G,{anchor:F});if(G=m.graphicsExtent(G))this._addClusterBoundary(G,w),w.show(this._getPopupLocation(G,F));this._popupClusterGraphic=A})}])[0]},_getPopupLocation:function(w,A){var G=w.getCenter();A=A.toLowerCase();-1<A.indexOf("top")?G.update(G.x,w.ymax):-1<A.indexOf("bottom")?G.update(G.x,w.ymin):-1<A.indexOf("left")?
G.update(w.xmin,G.y):G.update(w.xmax,G.y);return G},_createViewSummaryAction:function(){return this._map.infoWindow.addActions([{title:E.NLS_viewSummary,className:"viewSummary",callback:B.hitch(this,function(w){w.preventDefault();w=this._popupClusterGraphic;var A=this._map.infoWindow;A.setFeatures([w]);A.show(w.geometry);this._popupClusterGraphic=null})}])[0]},_initClusterUpdates:function(){this._updateSizeVariable();this._updateClusterGraphics();this._eventHandles.push(this._clusterGenerator.on("update-end",
B.hitch(this,function(w){(w.mapLevelChange||w.indexChange)&&this._updateSizeVariable();this._updateClusterGraphics()})),this._clusterGenerator.on("index-complete",B.hitch(this,function(){this._updateSizeVariable()})))},_updateClusterGraphics:function(){this._hideSingleGraphics();var w=[],A=[];l.forEach(this._clusterGenerator.clusters,function(G){var F=new t(G.centroid);F.setAggregationSourceLayer(this.layer);F.setAggregationInfo(G);this._applyClusterAttributes(F,G);1===G.count?(G=this._getSingleGraphic(F),
A.push(G)):w.push(F)},this);this._showSingleGraphics(A);this._addGraphics(w)},_addGraphics:function(w){var A=this.container;A.clear();l.forEach(w,function(G){A.add(G)})},_getSingleGraphic:function(w){var A=this._clusterGenerator.getCell(w.getAggregationInfo().primary).features[0],G=this.layer.renderer;G=G&&G.getSymbol(A);var F=this._getSizeByCountVariable(this._renderer);G&&F&&(w=F?this._renderer.getSize(w,{sizeInfo:F,shape:G.style,resolution:this._map.getResolutionInMeters(),scale:this._map.getScale()}):
null,A.setSize(w));return A},_showSingleGraphics:function(w){l.forEach(w,this._showSingleGraphic);this._singleGraphics=w},_hideSingleGraphics:function(){l.forEach(this._singleGraphics,function(w){w.setSize(null);this._hideSingleGraphic(w)},this);this._singleGraphics=null},_clearSingleGraphics:function(){l.forEach(this._singleGraphics,function(w){w.setSize(null)});this._singleGraphics=null},_showSingleGraphic:function(w){w&&w._resume()},_hideSingleGraphic:function(w){w&&w._suspend()},_updateSizeVariable:function(){this.isClusteringEnabled()&&
(this._updateSizeByCountVariable(),this.emit("renderer-change"))},_applyClusterAttributes:function(w,A){w.setAttributes(A.attributes)},_createLayerEventListeners:function(){var w=this.layer;this._eventHandles.push(w.on("visibility-change",B.hitch(this,function(A){this.container.setVisibility(A.visible)})),w.on("scale-range-change",B.hitch(this,function(){this.container.setScaleRange(this.layer.minScale,this.layer.maxScale)})),w.on("renderer-change",B.hitch(this,function(){this._applyRenderer()})),
w.on("info-template-change",B.hitch(this,function(){this._applyInfoTemplate()})))},_createMapEventListeners:function(){this._eventHandles.push(this._map.on("zoom-start",B.hitch(this,function(){this._removeClusterBoundary();this._removeFromPopup(this.container);this._removeFromPopup(this.layer);this._resetClusterNav();this.container.clear();this._hideSingleGraphics()})))},_createPopupEventListeners:function(){var w=this._map.infoWindow;this._eventHandles.push(w.on("selection-change",B.hitch(this,function(){this._resetClusterNavPartial();
var A=this._map.infoWindow.getSelectedFeature(),G=A&&A.getLayer();if(G){var F;G===this.container?(this._removeClusterBoundary(),this._map.infoWindow.addActions&&(F=this._createBrowseFeaturesAction())):G===this.layer&&A._isSuspended()?(this._map.infoWindow.addActions&&(F=this._createViewSummaryAction()),this._popupSingleGraphic=A,this._showSingleGraphic(this._popupSingleGraphic)):this._removeClusterBoundary();this._popupActions=F?[F]:null}})),w.on("clear-features",B.hitch(this,function(A){this._resetClusterNav();
A.isIntermediate||this._removeClusterBoundary()})),w.on("hide",B.hitch(this,function(){this._popupSingleGraphic&&this._popupSingleGraphic._suspend();this._clusterBoundary&&this._clusterBoundary.hide()})),w.on("show",B.hitch(this,function(){this._popupSingleGraphic&&this._popupSingleGraphic._resume();this._clusterBoundary&&this._clusterBoundary.show()})))},_destroyEventListeners:function(){l.forEach(this._eventHandles,function(w){w.remove()})}});B.setObject("layers.clustering.ClusterManager",f,c);
return f})},"esri/dijit/PopupTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom-construct ../kernel ../InfoTemplate ../PopupInfo ./PopupRenderer".split(" "),function(f,B,l,d,c,u,t,e){f=f([u,t],{declaredClass:"esri.dijit.PopupTemplate","-chains-":{constructor:"manual"},chartTheme:null,constructor:function(r,m){B.mixin(this,m);this.initialize(r,m)},getTitle:function(r){var m;this.info&&(m=this.titleHasRelatedFields||this.titleHasAsyncExpressions?"":this._getPopupValues(r,
this._fetchAttributes(r,null,this.getExpressionFieldsInTitle()),!0).title);return m||""},getContent:function(r){return this.info?(new e({template:this,graphic:r,chartTheme:this.chartTheme},d.create("div"))).domNode:""}});B.setObject("dijit.PopupTemplate",f,c);return f})},"esri/PopupInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all dojox/html/entities ./lang ./kernel ./request ./promiseList ./ArcadeExpression ./tasks/query ./tasks/QueryTask ./tasks/RelationshipQuery ./tasks/StatisticDefinition ./arcadeProfiles/popupProfile ./layers/support/attributeUtils dojo/i18n!dojo/cldr/nls/number".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E){f=f(null,{declaredClass:"esri.PopupInfo",_reNewline:/(\n)/ig,_reExprField:/^\s*expression\//i,_reExprFieldPattern:/\{expression\/([^\}]+)\}/ig,_exprPrefix:"expression/",_relatedFieldPrefix:"relationships/",_aggregatedFeaturesVariable:"$aggregatedfeatures",initialize:function(C,z){if(C){B.mixin(this,z);this.info=C;this.title=this.getTitle;this.content=this.getContent;this._exprCache=this._compileExpressions(this.info.expressionInfos);var w=this._fieldLabels=
{},A=this._fieldsMap={};this.info.fieldInfos&&l.forEach(this.info.fieldInfos,function(G){var F=G.fieldName.toLowerCase(),H=this._isExpressionField(F)?this.getExpressionInfo(F):null;w[F]=H?H.title:G.label;A[F]=G},this);this.titleHasRelatedFields=!(!this.info.title||-1===this.info.title.indexOf("{"+this._relatedFieldPrefix));this.titleHasAsyncExpressions=this._titleHasAsyncExpressions();this.contentHasAsyncExpressions=this._contentHasAyncExpressions()}},toJson:function(){return d.fromJson(d.toJson(this.info))},
getTitle:function(){},getContent:function(){},getFieldInfo:function(C){var z;l.some(this.info&&this.info.fieldInfos,function(w){w.fieldName===C&&(z=w);return!!z});return z},getExpressionInfo:function(C){if(C=this._getExprField(C)){C=C.toLowerCase();var z;l.some(this.info.expressionInfos,function(w){w.name.toLowerCase()===C&&(z=w);return!!z});return z}},getExpressionFieldsInTitle:function(){return this._getExprFieldsFromTemplatedString(this.info.title)},getExpressionFieldsInContent:function(){var C=
this._collectExprFieldsFromTemplatedString(this.info.description,[]);this.info.description||l.forEach(this.info.fieldInfos,function(z){z.visible&&this._collectExprField(z.fieldName,C)},this);l.forEach(this.info.mediaInfos,function(z){this._collectExprFieldsFromTemplatedString(z.title,C);this._collectExprFieldsFromTemplatedString(z.caption,C);if(z=z.value)this._collectExprFieldsFromTemplatedString(z.linkURL,C),this._collectExprFieldsFromTemplatedString(z.sourceURL,C),l.forEach(z.fields,function(w){this._collectExprField(w,
C)},this),this._collectExprField(z.normalizeField,C),this._collectExprField(z.tooltipField,C)},this);return C},getRequiredExpressionFields:function(){return this.getExpressionFieldsInTitle().concat(this.getExpressionFieldsInContent())},hasGeometryOperations:function(){return l.some(this._getArcadeExpressions(),function(C){return C.hasGeometryOperations()})},hasAsyncExpressions:function(){return l.some(this._getArcadeExpressions(),function(C){return C.async})},initializeArcadeEngine:function(){return y.initialize(this._getArcadeExpressions())},
getComponents:function(C,z){var w=this.info,A={initArcadeEngine:this.initializeArcadeEngine()};w.fieldInfos&&(w=l.filter(w.fieldInfos,function(G){return-1!==G.fieldName.indexOf(this._relatedFieldPrefix)},this))&&0<w.length&&(A.relatedInfo=this._getRelatedRecords({graphic:C,fieldsInfo:w}));this._needFullResolutionFeature(C)&&(A.fullResolutionFeature=this._getFullResolutionFeature(C));this._needAggregatedFeaturesLayer(C)&&(A.aggregatedFeaturesLayer=this._getAggregatedFeaturesLayer(C));return n(A).then(B.hitch(this,
function(G){var F=G.fullResolutionFeature,H=z&&z.evaluateAllExpressions,J=H?null:this.getRequiredExpressionFields();G=(H?this.hasAsyncExpressions():this._hasAsyncExpressions(J))?this._fetchAttributesAsync(C,F,J,G.aggregatedFeaturesLayer):this._fetchAttributes(C,F,J);return n([G]).then(B.hitch(this,function(K){return this._getPopupValues(C,K[0])}))}))},getAttachments:function(C){var z=C.getSourceLayer();C=C.attributes;if(this.info.showAttachments&&z&&z.hasAttachments&&z.objectIdField&&(C=C&&C[z.objectIdField]))return z.queryAttachmentInfos(C)},
_needAggregatedFeaturesLayer:function(C){return C.isAggregate()?l.some(this._getArcadeExpressions(),function(z){return z.hasVariable(this._aggregatedFeaturesVariable)},this):!1},_getAggregatedFeaturesLayer:function(C){return C.getAggregationSourceLayer().getFeatureCollectionLayer(C.getChildGraphics()).always(function(z){return z instanceof Error?null:z})},_needFullResolutionFeature:function(C){return(C=C.getSourceLayer())?"function"===typeof C.getMaxAllowableOffset&&0<C.getMaxAllowableOffset()&&this.hasGeometryOperations():
!1},_getFullResolutionFeature:function(C){var z=C.getSourceLayer(),w=z.objectIdField;C=(C=C.attributes)&&w&&C[w];if(null==C)return null;var A=new g;A.where=w+"\x3d"+C;A.maxAllowableOffset=0;A.outFields=[w];z._enableCacheHint(A);return z.queryFeatures(A).then(function(G){return G.features&&G.features[0]})},_isExpressionField:function(C){return this._reExprField.test(C)},_getExprField:function(C){return this._isExpressionField(C)?C.replace(this._reExprField,""):null},_collectExprField:function(C,z){(C=
this._getExprField(C))&&z.push(C);return z},_collectExprFieldsFromTemplatedString:function(C,z){C=this._getExprFieldsFromTemplatedString(C);C.length&&Array.prototype.push.apply(z,C);return z},_getExprFieldsFromTemplatedString:function(C){C=C?C.match(this._reExprFieldPattern):null;return l.map(C,function(z){return z.replace(this._reExprFieldPattern,"$1")},this)},_titleHasAsyncExpressions:function(){return this._hasAsyncExpressions(this.getExpressionFieldsInTitle())},_contentHasAyncExpressions:function(){return this._hasAsyncExpressions(this.getExpressionFieldsInContent())},
_hasAsyncExpressions:function(C){return l.some(C,function(z){z=this._exprCache[z];return!(!z||!z.async)},this)},_compileExpressions:function(C){var z={};l.forEach(C,function(w){var A=w.returnType&&w.returnType.toLowerCase();z[w.name]=new k({expression:w.expression,returnType:"number"===A?"number":"string",profile:y})});return z},_getArcadeExpressions:function(){var C=[],z;for(z in this._exprCache)C.push(this._exprCache[z]);return C},_fetchAttributesAsync:function(C,z,w,A){var G=this._fetchAttributes(C,
z,w,A);C={};for(var F in G)(z=G[F])&&z.then&&(C[F]=z);return n(C).then(B.hitch(this,function(H){for(var J in H){var K=H[J];G[J]=K instanceof Error?null:this._processArcadeResult(K)}return G}))},_processArcadeResult:function(C){"string"===typeof C&&(C=m.encode(C));return C},_fetchAttributes:function(C,z,w,A){var G=B.clone(C.attributes)||{},F=z&&z.geometry,H=this._exprPrefix,J=this._exprCache;w=w||l.map(this.info.expressionInfos,function(K){return K.name});l.forEach(w,function(K){var Q=H+K;K=(K=J[K])?
C.evaluateExpression(K,this._getEvalOptions(K,C,F,A)):null;G[Q]=this._processArcadeResult(K)},this);return G},_getEvalOptions:function(C,z,w,A){var G=C.hasGeometryOperations(),F=z.getSourceLayer(),H=F&&(F.getMap()||F.parentLayer&&F.parentLayer.getMap());A&&(A._map=H);C=y.getEvalOptions({expression:C,feature:z,layer:F,aggregatedFeaturesLayer:A,map:H,spatialReference:H&&H.spatialReference});z=C.context.vars.$feature;G=!(!G||!w);z&&G&&(z._geometry=w);C.skipCache=G;return C},_getPopupValues:function(C,
z,w){z=z||this._fetchAttributes(C);var A=this.info,G=C.getSourceLayer(),F=B.clone(z),H="",J="",K,Q,P=G&&G._getDateOpts&&G._getDateOpts().properties;P=P&&P.slice(0);var I={dateFormat:{properties:P,formatter:"DateFormat"+this._insertOffset(this._dateFormats.shortDateShortTime)},format:null};if(this._relatedInfo)for(W in this._relatedInfo)if(this._relatedInfo.hasOwnProperty(W)){var N=this._relatedInfo[W],L=this._relatedLayersInfo[W];N&&(l.forEach(N.relatedFeatures,function(S){for(Q in S.attributes)if(S.attributes.hasOwnProperty(Q)&&
"esriRelCardinalityOneToOne"===L.relation.cardinality){var M=this._toRelatedFieldName([L.relation.id,Q]);z[M]=F[M]=S.attributes[Q]}},this),l.forEach(N.relatedStatsFeatures,function(S){for(Q in S.attributes)if(S.attributes.hasOwnProperty(Q)){var M=this._toRelatedFieldName([L.relation.id,Q]);z[M]=F[M]=S.attributes[Q]}},this))}for(K in F){var W=this._fieldsMap[K.toLowerCase()];N=this._getLayerFieldInfo(G,K);W&&N&&(W.fieldName=N.name);F[K]=this._formatValue(F[K],K,I);P&&W&&W.format&&W.format.dateFormat&&
(W=l.indexOf(P,K),-1<W&&P.splice(W,1))}if(G)for(K in P=G.typeIdField,z)if(z.hasOwnProperty(K)&&-1===K.indexOf(this._relatedFieldPrefix)){var Z=z[K];a.isDefined(Z)&&(W=this._getDomainName(G,C,K,Z),a.isDefined(W)?F[K]=W:K===P&&(W=this._getTypeName(G,C,Z),a.isDefined(W)&&(F[K]=W)))}A.title&&(H=this._processFieldsInLinks(this._fixTokens(A.title,G),z),H=B.trim(this._removeEmptyHref(a.substitute(F,H,I)||"")));if(w)return{title:H};A.description&&(J=this._processFieldsInLinks(this._fixTokens(A.description,
G),z),J=B.trim(this._removeEmptyHref(a.substitute(F,J,I)||"")));if(A.fieldInfos){var aa=[];l.forEach(A.fieldInfos,function(S){(K=S.fieldName)&&S.visible&&aa.push([this._fieldLabels[K.toLowerCase()]||K,a.substitute(F,"${"+K+"}",I)||""])},this)}var ia;if(A.mediaInfos){var R=[];l.forEach(A.mediaInfos,function(S){ia=0;Z=S.value;switch(S.type){case "image":var M=Z.sourceURL;M=M&&B.trim(this._removeEmptyHref(a.substitute(z,this._fixTokens(M,G))));ia=!!M;break;case "piechart":case "linechart":case "columnchart":case "barchart":M=
Z.normalizeField;Z.fields=l.map(Z.fields,function(ra){return(X=this._getLayerFieldInfo(G,ra))?X.name:ra},this);if(M){var X=this._getLayerFieldInfo(G,M);Z.normalizeField=X?X.name:M}ia=l.some(Z.fields,function(ra){return a.isDefined(z[ra])||-1!==ra.indexOf(this._relatedFieldPrefix)&&this._relatedInfo},this);break;default:return}if(ia){S=B.clone(S);Z=S.value;M=S.title?this._processFieldsInLinks(this._fixTokens(S.title,G),z):"";var fa=S.caption?this._processFieldsInLinks(this._fixTokens(S.caption,G),
z):"";S.title=M?B.trim(this._removeEmptyHref(a.substitute(F,M,I)||"")):"";S.caption=fa?B.trim(this._removeEmptyHref(a.substitute(F,fa,I)||"")):"";if("image"===S.type)Z.sourceURL=a.substitute(z,this._fixTokens(Z.sourceURL,G)),Z.linkURL&&(Z.linkURL=B.trim(a.substitute(z,this._fixTokens(Z.linkURL,G))||""));else{var ea,ha;l.forEach(Z.fields,function(ra,Aa){if(-1!==ra.indexOf(this._relatedFieldPrefix))ha=this._getRelatedChartInfos(ra,Z,z,I),ha instanceof Array?Z.fields=ha:Z.fields[Aa]=ha;else{var Ea=z[ra];
Ea=void 0===Ea?null:Ea;ea=z[Z.normalizeField]||0;Ea&&ea&&(Ea/=ea);Z.fields[Aa]={y:Ea,tooltip:(this._fieldLabels[ra.toLowerCase()]||ra)+":\x3cbr/\x3e"+this._formatValue(Ea,ra,I,!!ea)}}},this)}R.push(S)}},this)}return{title:H,description:J,hasDescription:!!A.description,fields:aa&&aa.length?aa:null,mediaInfos:R&&R.length?R:null,formatted:F,editSummary:!1!==A.showLastEditInfo&&G&&G.getEditSummary?G.getEditSummary(C):""}},_getRelatedChartInfos:function(C,z,w,A){var G,F;var H=[];var J=this._fromRelatedFieldName(C);
var K=J[0];var Q=this._relatedInfo[K];K=this._relatedLayersInfo[K];Q&&l.forEach(Q.relatedFeatures,function(P){P=P.attributes;var I;for(I in P)if(P.hasOwnProperty(I)&&I===J[1]){var N={};F=P[I];z.normalizeField&&(G=-1!==z.normalizeField.indexOf(this._relatedFieldPrefix)?P[this._fromRelatedFieldName(z.normalizeField)[1]]:w[z.normalizeField]);F&&G&&(F/=G);if(z.tooltipField)if(-1!==z.tooltipField.indexOf(this._relatedFieldPrefix)){var L=this._fromRelatedFieldName(z.tooltipField)[1],W=a.isDefined(P[L])?
this._formatValue(P[L],z.tooltipField,A,!!G):L;N.tooltip=W+":\x3cbr/\x3e"+this._formatValue(F,L,A,!!G)}else N.tooltip=(this._fieldLabels[C.toLowerCase()]||C)+":\x3cbr/\x3e"+this._formatValue(F,z.tooltipField,A,!!G);else N.tooltip=F;N.y=F;H.push(N)}},this);return"esriRelCardinalityOneToMany"===K.relation.cardinality||"esriRelCardinalityManyToMany"===K.relation.cardinality?H:H[0]},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",
shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",shortDateLE:"(datePattern: 'd/M/y', selector: 'date')",shortDateLEShortTime:"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateLEShortTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",
shortDateLELongTime:"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLELongTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",longMonthDayYearShortTime:"(datePattern: 'MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')",longMonthDayYearShortTime24:"(datePattern: 'MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",longMonthDayYearLongTime:"(datePattern: 'MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",
longMonthDayYearLongTime24:"(datePattern: 'MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')",dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",dayShortMonthYearShortTime:"(datePattern: 'd MMM y', timePattern: 'h:mm a', selector: 'date and time')",dayShortMonthYearShortTime24:"(datePattern: 'd MMM y', timePattern: 'H:mm', selector: 'date and time')",dayShortMonthYearLongTime:"(datePattern: 'd MMM y', timePattern: 'h:mm:ss a', selector: 'date and time')",dayShortMonthYearLongTime24:"(datePattern: 'd MMM y', timePattern: 'H:mm:ss', selector: 'date and time')",
longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",longDateShortTime:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')",longDateShortTime24:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",longDateLongTime:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",longDateLongTime24:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",
shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"},_dateFormatsJson:{shortDate:{datePattern:"M/d/y",selector:"date"},shortDateShortTime:{datePattern:"M/d/y",timePattern:"h:mm a",selector:"date and time"},shortDateShortTime24:{datePattern:"M/d/y",timePattern:"H:mm",selector:"date and time"},shortDateLongTime:{datePattern:"M/d/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLongTime24:{datePattern:"M/d/y",timePattern:"H:mm:ss",selector:"date and time"},
shortDateLE:{datePattern:"d/M/y",selector:"date"},shortDateLEShortTime:{datePattern:"d/M/y",timePattern:"h:mm a",selector:"date and time"},shortDateLEShortTime24:{datePattern:"d/M/y",timePattern:"H:mm",selector:"date and time"},shortDateLELongTime:{datePattern:"d/M/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLELongTime24:{datePattern:"d/M/y",timePattern:"H:mm:ss",selector:"date and time"},longMonthDayYear:{datePattern:"MMMM d, y",selector:"date"},longMonthDayYearShortTime:{datePattern:"MMMM d, y",
timePattern:"h:mm a",selector:"date and time"},longMonthDayYearShortTime24:{datePattern:"MMMM d, y",timePattern:"H:mm",selector:"date and time"},longMonthDayYearLongTime:{datePattern:"MMMM d, y",timePattern:"h:mm:ss a",selector:"date and time"},longMonthDayYearLongTime24:{datePattern:"MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},dayShortMonthYear:{datePattern:"d MMM y",selector:"date"},dayShortMonthYearShortTime:{datePattern:"d MMM y",timePattern:"h:mm a",selector:"date and time"},dayShortMonthYearShortTime24:{datePattern:"d MMM y",
timePattern:"H:mm",selector:"date and time"},dayShortMonthYearLongTime:{datePattern:"d MMM y",timePattern:"h:mm:ss a",selector:"date and time"},dayShortMonthYearLongTime24:{datePattern:"d MMM y",timePattern:"H:mm:ss",selector:"date and time"},longDate:{datePattern:"EEEE, MMMM d, y",selector:"date"},longDateShortTime:{datePattern:"EEEE, MMMM d, y",timePattern:"h:mm a",selector:"date and time"},longDateShortTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm",selector:"date and time"},longDateLongTime:{datePattern:"EEEE, MMMM d, y",
timePattern:"h:mm:ss a",selector:"date and time"},longDateLongTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},longMonthYear:{datePattern:"MMMM y",selector:"date"},shortMonthYear:{datePattern:"MMM y",selector:"date"},year:{datePattern:"y",selector:"date"}},_reHref:/href\s*=\s*(")([^"]+)"/ig,_reHrefApos:/href\s*=\s*(')([^']+)'/ig,_fixTokens:function(C,z){var w=this;return C.replace(/(\{([^\{\r\n]+)\})/g,function(A,G,F){A=w._getLayerFieldInfo(z,F);return"$"+(A?"{"+
A.name+"}":G)})},_encodeAttributes:function(C,z){C=B.clone(C)||{};var w,A;for(w in C)(A=C[w])&&"string"===typeof A&&(A=z?A:encodeURIComponent(A),A=A.replace(/'/g,"\x26apos;"),C[w]=A);return C},_processFieldsInLinks:function(C,z){var w=this._encodeAttributes(z),A=this._encodeAttributes(z,!0);z=B.hitch(this,this._addValuesToHref,z,w,A);C&&(C=C.replace(this._reHref,z).replace(this._reHrefApos,z));return C},_addValuesToHref:function(C,z,w,A,G,F){F=F&&B.trim(F);return A=a.substitute(F&&0===F.indexOf("${")?
"'"===G?w:C:z,A)},_getLayerFieldInfo:function(C,z){return C&&C.getField?C.getField(z):null},_formatValue:function(C,z,w,A){var G=this._fieldsMap[z.toLowerCase()],F=G&&G.format;z=-1!==l.indexOf(w.dateFormat.properties,z);var H="number"===typeof C&&!z&&(!F||!F.dateFormat);if(!a.isDefined(C)||!G||!a.isDefined(F))return this._applyFormatting(C,H);G=F.hasOwnProperty("places")||F.hasOwnProperty("digitSeparator");var J=F.hasOwnProperty("digitSeparator")?F.digitSeparator:!0;if(G&&!z)var K={formatType:"NumberFormat",
places:a.isDefined(F.places)&&(!A||0<F.places)?Number(F.places):Infinity};else if(F.dateFormat)K=B.mixin({formatType:"DateFormat",utcOffset:this.utcOffset},this._dateFormatsJson[F.dateFormat]||this._dateFormatsJson.shortDateShortTime);else return this._applyFormatting(C,H);var Q=this._applyFormatFunctions(C,K,w);G&&-1<C.constructor.toString().indexOf("Array")&&(Q="",l.forEach(C,B.hitch(this,function(P,I){I&&(Q+=" ");Q+=this._applyFormatFunctions(P,K,w)})));G&&!J&&E.group&&(Q=Q.replace(new RegExp("\\"+
E.group,"g"),""));z&&(Q='\x3cspan class\x3d"esriDateValue"\x3e'+Q+"\x3c/span\x3e");return this._applyFormatting(Q,H)},_applyFormatFunctions:function(C,z,w){z&&w&&(w.format={myKey:z});C=a.substitute({myKey:C},"${myKey}",w)||"";z&&w&&(w.format=null);return C},_applyFormatting:function(C,z){return z?this._forceLTR(C):this._applyPreWrap(C)},_forceLTR:function(C){var z=e("ie");return z&&10>=z?C:"\x3cspan class\x3d'esriNumericValue'\x3e"+C+"\x3c/span\x3e"},_applyPreWrap:function(C){return"string"===typeof C?
C.replace(this._reNewline,"\x3cspan class\x3d'charNewLine'\x3e$1\x3c/span\x3e"):C},_insertOffset:function(C){C&&(C=a.isDefined(this.utcOffset)?C.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+")"):C);return C},_getDomainName:function(C,z,w,A){return(C=C.getDomain&&C.getDomain(w,{feature:z}))&&C.codedValues?C.getName(A):null},_getTypeName:function(C,z,w){return(C=C.getType&&C.getType(z))&&C.name},_getRelatedRecords:function(C){var z=C.graphic,w;this._relatedLayersInfoPromise||(this._relatedLayersInfoPromise=
this._getRelatedLayersInfo(C).then(B.hitch(this,function(A){for(w in A)A.hasOwnProperty(w)&&A[w]&&(this._relatedLayersInfo[w].relatedLayerInfo=A[w])})));return this._relatedLayersInfoPromise.then(B.hitch(this,function(){return this._queryRelatedLayers(z)})).then(B.hitch(this,function(A){this._setRelatedRecords(z,A);return A}))},_getRelatedLayersInfo:function(C){var z=C.fieldsInfo,w,A={};var G=C.graphic.getSourceLayer();this._relatedLayersInfo||(this._relatedLayersInfo={});l.forEach(z,function(F){var H;
var J=this._fromRelatedFieldName(F.fieldName);var K=J[0];J=J[1];if(K&&(!this._relatedLayersInfo[K]&&G&&G.relationships&&(l.some(G.relationships,function(P){if(P.id==K)return H=P,!0}),H&&(this._relatedLayersInfo[K]={relation:H,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[K]&&(this._relatedLayersInfo[K].relatedFields.push(J),F.statisticType))){var Q=new v;Q.statisticType=F.statisticType;Q.onStatisticField=J;Q.outStatisticFieldName=J;this._relatedLayersInfo[K].outStatistics.push(Q)}},
this);for(w in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(w)&&this._relatedLayersInfo[w]&&(C=this._relatedLayersInfo[w].relation,C=G.url.replace(/[0-9]+$/,C.relatedTableId),this._relatedLayersInfo[w].relatedLayerUrl=C,A[w]=q({url:C,content:{f:"json"},callbackParamName:"callback"}));return r(A)},_queryRelatedLayers:function(C){var z={},w;for(w in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(w)&&(z[w]=this._queryRelatedLayer({graphic:C,relatedInfo:this._relatedLayersInfo[w]}));
return r(z)},_queryRelatedLayer:function(C){var z,w;var A=C.graphic;var G=A.getSourceLayer();var F=G.url.match(/[0-9]+$/g)[0];var H=C.relatedInfo;var J=H.relatedLayerInfo;var K=H.relatedLayerUrl;var Q=H.relation;C=l.filter(J.relationships,function(Z){return Z.relatedTableId===parseInt(F,10)});1===C.length?z=C[0]:1<C.length&&l.some(C,function(Z){Z.id===Q.id&&(z=Z);return!!z});if(z){var P=new g;l.some(J.fields,function(Z){if(Z.name===z.keyField)return w=-1!==l.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger",
"esriFieldTypeSingle","esriFieldTypeDouble"],Z.type)?"number":"string",!0});if(z.relationshipTableId&&z.keyFieldInRelationshipTable){var I=new t;this._queryRelatedRecords(A,z).then(B.hitch(this,function(Z){var aa;(aa=Z[A.attributes[G.objectIdField]])?(Z=l.map(aa.features,function(ia){return ia.attributes[J.objectIdField]},this),H.outStatistics&&0<H.outStatistics.length&&J.supportsStatistics&&(L=new g,L.where=this._chunkWhereInClause(J.objectIdField,Z,1E3),L.outFields=P.outFields,L.outStatistics=H.outStatistics),
L&&(W=new b(K),W.execute(L).then(B.hitch(this,function(ia){var R=[];R.push(aa);R.push(ia);I.resolve(R)})))):I.resolve()}))}else{var N="string"===w?z.keyField+"\x3d'"+A.attributes[Q.keyField]+"'":z.keyField+"\x3d"+A.attributes[Q.keyField];P.where=N;P.outFields=H.relatedFields;if(H.outStatistics&&0<H.outStatistics.length&&J.supportsStatistics){var L=new g;L.where=P.where;L.outFields=P.outFields;L.outStatistics=H.outStatistics}var W=new b(K);N=[];N.push(W.execute(P));L&&N.push(W.execute(L))}}return N?
r(N):I?I.promise:void 0},_setRelatedRecords:function(C,z){this._relatedInfo=[];for(var w in z)z.hasOwnProperty(w)&&z[w]&&(C=z[w],this._relatedInfo[w]={},this._relatedInfo[w].relatedFeatures=C[0].features,a.isDefined(C[1])&&(this._relatedInfo[w].relatedStatsFeatures=C[1].features))},_handlerErrorResponse:function(C,z){C.reject(z)},_fromRelatedFieldName:function(C){var z=[];-1!==C.indexOf(this._relatedFieldPrefix)&&(C=C.split("/"),z=C.slice(1));return z},_toRelatedFieldName:function(C){var z="";C&&
0<C.length&&(z=this._relatedFieldPrefix+C[0]+"/"+C[1]);return z},_queryRelatedRecords:function(C,z){var w=C.getSourceLayer(),A=new x;A.outFields=["*"];A.relationshipId=z.id;A.objectIds=[C.attributes[w.objectIdField]];return w.queryRelatedFeatures(A)},_removeEmptyHref:function(C){return C.replace(/href=(""|'')/gi,"")},_chunkWhereInClause:function(C,z,w){for(var A=0,G=[];A<z.length;)G.push(C+" IN ("+z.slice(A,w+A)+")"),A+=w;return G.join(" OR ")}});return h.PopupInfo=h.PopupInfoTemplate=f})},"dojox/html/entities":function(){define(["dojo/_base/lang"],
function(f){var B=f.getObject("dojox.html.entities",!0),l=function(c,u){if(u._encCache&&u._encCache.regexp&&u._encCache.mapper&&u.length==u._encCache.length){var t=u._encCache.mapper;var e=u._encCache.regexp}else{t={};e=["["];var r;for(r=0;r<u.length;r++)t[u[r][0]]="\x26"+u[r][1]+";",e.push(u[r][0]);e.push("]");e=new RegExp(e.join(""),"g");u._encCache={mapper:t,regexp:e,length:u.length}}return c=c.replace(e,function(m){return t[m]})},d=function(c,u){if(u._decCache&&u._decCache.regexp&&u._decCache.mapper&&
u.length==u._decCache.length){var t=u._decCache.mapper;var e=u._decCache.regexp}else{t={};e=["("];var r;for(r=0;r<u.length;r++){var m="\x26"+u[r][1]+";";r&&e.push("|");t[m]=u[r][0];e.push(m)}e.push(")");e=new RegExp(e.join(""),"g");u._decCache={mapper:t,regexp:e,length:u.length}}return c=c.replace(e,function(a){return t[a]})};B.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],["\u00a0","nbsp"]];B.latin=[["\u00a1","iexcl"],["\u00a2","cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4",
"curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],
["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],
["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1","ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],
["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],
["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],
["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],
["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],["\u222b","int"],["\u2234","there4"],["\u223c","sim"],
["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665","hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153",
"oelig"],["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039","lsaquo"],["\u203a","rsaquo"]];B.encode=function(c,
u){c&&(u?c=l(c,u):(c=l(c,B.html),c=l(c,B.latin)));return c};B.decode=function(c,u){c&&(u?c=d(c,u):(c=d(c,B.html),c=d(c,B.latin)));return c};return B})},"esri/ArcadeExpression":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./layers/support/attributeUtils ./support/expressionUtils".split(" "),function(f,B,l,d,c,u){f=f(null,{declaredClass:"esri.ArcadeExpression",expression:null,profile:null,returnType:null,async:null,id:null,syntaxTree:null,_traits:null,_attributeDef:null,_attributeCache:null,
_compiled:!1,constructor:function(t){B.mixin(this,t);this.returnType=this.returnType||"string";this.id=c.getAttributeId(this.expression);this._setSyntaxTree(this.profile.parse(this));this.async=this.async||this.profile.isAsync(this)},hasGeometryOperations:function(){var t=this._traits.geometryOperations;void 0===t&&(t=this._traits.geometryOperations=u.hasGeometryOperations(this.syntaxTree));return t},hasFeatureSetOperations:function(){var t=this._traits.featureSetOperations;void 0===t&&(t=this._traits.featureSetOperations=
u.hasFeatureSetOperations(this.syntaxTree));return t},hasVariable:function(t){var e=this._traits.variables;void 0===e[t]&&(e[t]=u.hasVariable(this.syntaxTree,t));return e[t]},hasFunction:function(t){var e=this._traits.functions;void 0===e[t]&&(e[t]=u.hasFunction(this.syntaxTree,t));return e[t]},evaluate:function(t){this._compile();var e=this._attributeCache.compiledFunc;return this.async?u.executeAsyncFunction(e,t):u.executeFunction(e,t)},_setSyntaxTree:function(t){this.syntaxTree=t;this._compiled=
!1;this._traits={variables:{},functions:{}};this._createLegacyValueObjects()},_createLegacyValueObjects:function(){this._attributeDef={valueExpression:this.expression};this._attributeCache={attributeInfo:this._attributeDef,isNumeric:"number"===this.returnType,idSource:this.expression,id:this.id,hasExpr:!0,compiledFunc:null,syntaxTree:this.syntaxTree,isScaleDriven:!1,dependsOnView:this.hasVariable("$view"),dependsOnGeometry:this.hasGeometryOperations(),isJSFunc:!1}},_compile:function(){this._compiled||
(this._attributeCache.compiledFunc=this.profile.compile(this),this._compiled=!0)}});return d.ArcadeExpression=f})},"esri/arcadeProfiles/popupProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(f,B,l,d,c,u,t,e){f=new (f(null,{declaredClass:"esri.arcadeProfiles.PopupProfile",defaults:{globals:{featureSet:["$layer","$datastore","$map","$aggregatedfeatures"],async:["$layer","$datastore",
"$map","$aggregatedfeatures"]},context:{vars:{$feature:"any",$layer:"any",$datastore:"any",$map:"any",$aggregatedfeatures:"any"}}},initialize:function(r){var m=[];e.hasGeometryOperations(r)&&m.push(t.enableGeometryOperations());(e.hasFeatureSetOperations(r)||e.hasVariables(r,this.defaults.globals.featureSet))&&m.push(t.enableFeatureSetOperations());e.isAsync(r)&&m.push(t.enableAsyncOperations());return c(m)},isAsync:function(r){r=[r];return e.hasFeatureSetOperations(r)||e.hasVariables(r,this.defaults.globals.async)},
parse:function(r){return t.createSyntaxTree(r.expression)},compile:function(r){var m=B.clone(this.defaults.context);m.useAsync=r.async;return r.syntaxTree?t.createFunction(r.syntaxTree,m):null},getEvalOptions:function(r){var m=r.expression,a=r.feature,h=r.layer,q=r.aggregatedFeaturesLayer,n=r.map;r=r.spatialReference;a=a&&m.hasVariable("$feature")?u.createFromGraphicLikeObject(a.geometry,a.attributes,h):null;var k,g;if(h){var b={spatialReference:r};m.hasVariable("$layer")&&(k=h.getMap()?t.createFeatureSetFromLayer(h,
b):t.createFeatureSetFromLayerUrl(h.url,b));if(m.hasVariable("$datastore"))var x=(x=e.getServiceUrl(h.url))?t.createFeatureSetCollectionFromServiceUrl(x,b):null;m.hasVariable("$aggregatedfeatures")&&q&&(g=q.getMap()?t.createFeatureSetFromLayer(q,b):null)}m=n&&m.hasVariable("$map")?t.createFeatureSetCollectionFromMap(n):null;return{context:{vars:{$feature:a,$layer:k,$datastore:x,$map:m,$aggregatedfeatures:g},spatialReference:r}}}}));B.setObject("arcadeProfiles.popupProfile",f,d);return f})},"esri/dijit/PopupRenderer":function(){define("require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/sniff dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style ../libs/sanitizer/Sanitizer dojox/html/entities dijit/_Widget dijit/_Templated ../kernel ../lang ../urlUtils ./_EventedWidget dojo/i18n!../nls/jsapi dojo/NodeList-dom".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E){var C=0,z=E.widgets.popup,w=E.widgets.templatePicker;B=B([D,g,b],{declaredClass:"esri.dijit._PopupRenderer",_sanitizer:new n({whiteList:{span:["class"],dd:[],dl:[],dt:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],sub:[],sup:[],animate:[],animatetransform:[],circle:[],clippath:[],defs:[],ellipse:[],g:[],image:[],line:[],lineargradient:[],marker:[],mask:[],path:[],pattern:[],polygon:[],polyline:[],radialgradient:[],rect:[],stop:[],svg:[],"switch":[],symbol:[],
text:[],textpath:[],tspan:[],use:[]}},!0),constructor:function(){this._nls=d.mixin({},z)},templateString:"\x3cdiv class\x3d'esriViewPopup'\x3e\x3cdiv class\x3d'statusSection hidden' dojoAttachPoint\x3d'_status'\x3e\x3c/div\x3e\x3cdiv class\x3d'mainSection'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_title'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'_description'\x3e\x3c/div\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'attachmentsSection hidden'\x3e\x3cdiv\x3e${_nls.NLS_attach}:\x3c/div\x3e\x3cul dojoAttachPoint\x3d'_attachmentsList'\x3e\x3c/ul\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaSection hidden'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_mediaTitle'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'caption' dojoAttachPoint\x3d'_mediaCaption'\x3e\x3c/div\x3e\x3cdiv class\x3d'gallery' dojoAttachPoint\x3d'_gallery'\x3e\x3cdiv class\x3d'mediaHandle prev' dojoAttachPoint\x3d'_prevMedia' dojoAttachEvent\x3d'onclick: _goToPrevMedia'\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaHandle next' dojoAttachPoint\x3d'_nextMedia' dojoAttachEvent\x3d'onclick: _goToNextMedia'\x3e\x3c/div\x3e\x3cul class\x3d'summary'\x3e\x3cli class\x3d'image mediaCount hidden' dojoAttachPoint\x3d'_imageCount'\x3e0\x3c/li\x3e\x3cli class\x3d'image mediaIcon hidden'\x3e\x3c/li\x3e\x3cli class\x3d'chart mediaCount hidden' dojoAttachPoint\x3d'_chartCount'\x3e0\x3c/li\x3e\x3cli class\x3d'chart mediaIcon hidden'\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'frame' dojoAttachPoint\x3d'_mediaFrame'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummarySection hidden' dojoAttachPoint\x3d'_editSummarySection'\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3cdiv class\x3d'break hidden' dojoAttachPoint\x3d'_mediaBreak'\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummary' dojoAttachPoint\x3d'_editSummary'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
showTitle:!0,startup:function(){this.inherited(arguments);this._showStatus(w.loading);this._contentDfd=this.template.getComponents(this.graphic).then(d.hitch(this,this._handleComponentsSuccess)).otherwise(d.hitch(this,this._handleComponentsError))},destroy:function(){this._contentDfd&&this._contentDfd.cancel();this._attachmentsDfd&&this._attachmentsDfd.cancel();this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._contentDfd=this._attachmentsDfd=null;this.inherited(arguments)},
_goToPrevMedia:function(){0>this._mediaPtr-1||(this._mediaPtr--,this._updateUI(),this._displayMedia())},_goToNextMedia:function(){this._mediaPtr+1!==this._mediaInfos.length&&(this._mediaPtr++,this._updateUI(),this._displayMedia())},_updateUI:function(){var A=this._mediaInfos,G=A.length,F=this.domNode,H=this._prevMedia,J=this._nextMedia;if(1<G){var K=0,Q=0;c.forEach(A,function(P){"image"===P.type?K++:-1!==P.type.indexOf("chart")&&Q++});K&&(m.set(this._imageCount,"innerHTML",K),u.query(".summary .image",
F).removeClass("hidden"));Q&&(m.set(this._chartCount,"innerHTML",Q),u.query(".summary .chart",F).removeClass("hidden"))}else u.query(".summary",F).addClass("hidden"),a.add(H,"hidden"),a.add(J,"hidden");A=this._mediaPtr;0===A?a.add(H,"hidden"):a.remove(H,"hidden");A===G-1?a.add(J,"hidden"):a.remove(J,"hidden");this._destroyFrame()},_displayMedia:function(){var A=this._mediaInfos[this._mediaPtr],G=A.title,F=A.caption,H=u.query(".mediaSection .hzLine",this.domNode)[0];m.set(this._mediaTitle,"innerHTML",
this._sanitizer.sanitize(G));a[G?"remove":"add"](this._mediaTitle,"hidden");m.set(this._mediaCaption,"innerHTML",this._sanitizer.sanitize(F));a[F?"remove":"add"](this._mediaCaption,"hidden");a[G&&F?"remove":"add"](H,"hidden");this._rid=null;if("image"===A.type)this._showImage(A);else{var J=this;G=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"];F=A.value.theme||this.chartTheme;d.isString(F)&&(F=F.replace(/\./gi,"/"),-1===F.indexOf("/")&&(F="dojox/charting/themes/"+F));F||(F="./Rainbow");
G.push(F);try{var K=this._rid=C++;f(G,function(Q,P,I){K===J._rid&&(J._rid=null,J._showChart(A.type,A.value,Q,P,I))})}catch(Q){}}},_preventNewTab:function(A){return(A=A&&d.trim(A).toLowerCase())&&(0===A.indexOf("mailto:")||0===A.indexOf("tel:"))},_showImage:function(A){a.add(this._mediaFrame,"image");var G=q.get(this._gallery,"height"),F=A.value,H=k.decode(F.linkURL);F=k.decode(F.sourceURL);var J;H&&(J=h.create("a",{href:H,target:this._preventNewTab(H)?"":"_blank"},this._mediaFrame));H=A.refreshInterval?
this._addURLParameter(F,"timestamp",Date.now()):F;h.create("img",{className:"esriPopupMediaImage",src:H},J||this._mediaFrame);var K=u.query(".esriPopupMediaImage",this._mediaFrame)[0];this._imageLoadHandle=l.connect(K,"onload",this,function(){this._clearImageHandles();this._imageLoaded(K,G);this._initImageRefresh(A)})},_addURLParameter:function(A,G,F){var H=-1===A.indexOf("?")?"?":"\x26";return A+H+G+"\x3d"+F},_initImageRefresh:function(A){if(A.refreshInterval){var G=6E4*A.refreshInterval;this._imageRefreshHandle=
setTimeout(d.hitch(this,function(){this._destroyFrame();this._showImage(A)}),G)}},_clearImageHandles:function(){l.disconnect(this._imageLoadHandle);this._imageLoadHandle=null;clearTimeout(this._imageRefreshHandle);this._imageRefreshHandle=null},_showChart:function(A,G,F,H,J){a.remove(this._mediaFrame,"image");F=this._chart=new F(h.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});J&&F.setTheme(J);switch(A){case "piechart":F.addPlot("default",{type:"Pie",labels:!1});F.addSeries("Series A",
G.fields);break;case "linechart":F.addPlot("default",{type:"Markers"});F.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});F.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});c.forEach(G.fields,function(K,Q){K.x=Q+1});F.addSeries("Series A",G.fields);break;case "columnchart":F.addPlot("default",{type:"Columns",gap:3});F.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});F.addSeries("Series A",G.fields);break;case "barchart":F.addPlot("default",{type:"Bars",
gap:3}),F.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),F.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),F.addSeries("Series A",G.fields)}this._action=new H(F);F.render()},_destroyFrame:function(){this._rid=null;this._clearImageHandles();this._chart&&(this._chart.destroy(),this._chart=null);this._action&&(this._action.destroy(),this._action=null);m.set(this._mediaFrame,"innerHTML","")},_imageLoaded:function(A,G){var F=A.height;F<G&&q.set(A,"marginTop",
Math.round((G-F)/2)+"px")},_attListHandler:function(A,G){if(A===this._attachmentsDfd){this._attachmentsDfd=null;var F="";G instanceof Error||!G||!G.length||c.forEach(G,function(H){F+="\x3cli\x3e";F+="\x3ca href\x3d'"+y.addProxy(H.url)+"' target\x3d'_blank'\x3e"+(H.name||"[No name]")+"\x3c/a\x3e";F+="\x3c/li\x3e"});m.set(this._attachmentsList,"innerHTML",F||"\x3cli\x3e"+this._nls.NLS_noAttach+"\x3c/li\x3e")}},_createLinkIfURI:function(A,G){var F=y.getURIInfo(A);if(F){var H=A.match(F.pattern);A=H&&
H[2];H=k.decode(H[1]);h.create("a",{target:"_blank",href:H,title:H,innerHTML:this._sanitizer.sanitize(v.substitute({appName:F.appName,hierPart:A},F.label))},G)}else m.set(G,"innerHTML",this._sanitizer.sanitize(A))},_showStatus:function(A){m.set(this._status,"innerHTML",A);a.remove(this._status,"hidden");u.query(".mainSection",this.domNode).addClass("hidden")},_hideStatus:function(){m.set(this._status,"innerHTML","");a.add(this._status,"hidden");u.query(".mainSection",this.domNode).removeClass("hidden")},
_handleComponentsSuccess:function(A){if(A){this._hideStatus();var G=this.showTitle?A.title:"",F=A.description,H=A.fields,J=A.mediaInfos,K=this.domNode,Q=this._nls,P=this,I=this.template,N=this.graphic;this._prevMedia.title=Q.NLS_prevMedia;this._nextMedia.title=Q.NLS_nextMedia;m.set(this._title,"innerHTML",this._sanitizer.sanitize(G));G||a.add(this._title,"hidden");if(!A.hasDescription&&H&&(F="",H=c.map(H,function(W){var Z=h.create("tr",{vAlign:"top"});h.create("td",{className:"attrName",innerHTML:this._sanitizer.sanitize(W[0])},
Z);var aa=h.create("td",{className:"attrValue"},Z);this._createLinkIfURI(W[1],aa);return Z},this),H.length)){var L=h.create("table",{className:"attrTable",cellPadding:"0px",cellSpacing:"0px"});c.forEach(H,function(W){L.appendChild(W)})}L?(this._description.appendChild(L),F=!0):m.set(this._description,"innerHTML",this._sanitizer.sanitize(F));F||a.add(this._description,"hidden");u.query("a",this._description).forEach(function(W){P._preventNewTab(W.href)?"_blank"===W.target&&m.remove(W,"target"):m.set(W,
"target","_blank")});G&&F?u.query(".mainSection .hzLine",K).removeClass("hidden"):G||F?u.query(".mainSection .hzLine",K).addClass("hidden"):u.query(".mainSection",K).addClass("hidden");if(G=this._attachmentsDfd=I.getAttachments(N))G.addBoth(d.hitch(this,this._attListHandler,G)),m.set(this._attachmentsList,"innerHTML","\x3cli\x3e"+Q.NLS_searching+"...\x3c/li\x3e"),u.query(".attachmentsSection",K).removeClass("hidden");J&&J.length&&(u.query(".mediaSection",K).removeClass("hidden"),r.setSelectable(this._mediaFrame,
!1),this._mediaInfos=J,this._mediaPtr=0,this._updateUI(),this._displayMedia());A.editSummary&&(m.set(this._editSummary,"innerHTML",this._sanitizer.sanitize(A.editSummary)),J&&J.length&&a.remove(this._mediaBreak,"hidden"),a.remove(this._editSummarySection,"hidden"));this.emit("content-update")}else this._showStatus(z.NLS_noInfo)},_handleComponentsError:function(A){A&&"cancel"===A.dojoType||this._showStatus(z.NLS_noInfo)}});d.setObject("dijit._PopupRenderer",B,x);return B})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),
function(f,B,l,d,c,u){return f([u,c],{_onMap:function(t){var e=this.constructor._onMap;e&&e.FINAL||(delete this.constructor._onMap,e=this.registerConnectEvents(),e.FINAL=!0);t=t.toLowerCase();if(e[t])var r=this[e[t].method];else t=this._onCamelCase(t),this[t]&&(r=t);return r},on:function(t,e){var r=this._onMap(t),m=t.replace(/\-/g,""),a="on"+m in this.domNode;return r||!a?this.inherited(arguments):this.own(d(this.domNode,m,e))[0]},emit:function(t,e,r){var m,a=t.toLowerCase(),h=this.constructor._onMap||
this.registerConnectEvents();var q=this[this._onMap(a)];e=e||{};e.target||(e.target=this);if(q&&h&&h[a]){this._onObj2Arr(function(){m=Array.prototype.slice.call(arguments)},h[a].argKeys)(e);var n=B.mixin({},arguments);n[2]=m;n[0]=h[a].name.replace(/^on/,"")}return this.inherited(n||arguments)}})})},"esri/dijit/Legend/utils":function(){define(["dojo/_base/lang","../../lang","dojo/i18n!../../nls/jsapi"],function(f,B,l){var d=l.widgets.legend;return{getVisualVariableTitle:function(c,u){var t=c.field,
e=c.normalizationField,r=!1,m=!1,a=!1;t=f.isFunction(t)?null:t;e=f.isFunction(e)?null:e;if(c.legendOptions&&c.legendOptions.title)var h=c.legendOptions.title;else if(c.valueExpressionTitle)h=c.valueExpressionTitle;else{if(u.renderer&&u.renderer.authoringInfo&&u.renderer.authoringInfo.visualVariables){var q=u.renderer.authoringInfo.visualVariables;for(c=0;c<q.length;c++){var n=q[c];if("colorInfo"===n.type&&"ratio"===n.style){r=!0;break}else if("colorInfo"===n.type&&"percent"===n.style){m=!0;break}else if("colorInfo"===
n.type&&"percentTotal"===n.style){a=!0;break}}}(r=a&&"showRatioPercentTotal"||m&&"showRatioPercent"||r&&"showRatio"||e&&"showNormField"||t&&"showField"||null)&&(h=B.substitute({field:t&&u.getFieldLabel(t),normField:e&&u.getFieldLabel(e)},"showField"===r?"${field}":d[r]))}return h},getRendererTitle:function(c,u){if(c){if("esri.renderer.ClassBreaksRenderer"===c.declaredClass){var t=c.attributeField;var e=c.normalizationField;var r="percent-of-total"===c.normalizationType}t=f.isFunction(t)?null:t;e=
f.isFunction(e)?null:e;if(c.legendOptions&&c.legendOptions.title)var m=c.legendOptions.title;else c.valueExpressionTitle?m=c.valueExpressionTitle:(c=e&&"showNormField"||(r?"showNormPct":null)||t&&"showField"||null)&&(m=B.substitute({field:t&&u.getFieldLabel(t),normField:e&&u.getFieldLabel(e)},"showField"===c?"${field}":d[c]))}return m}}})},"esri/layers/clustering/GeohashAggregation":function(){define("dojo/has dojo/_base/declare dojo/_base/lang dojo/_base/array ../../kernel ../../Evented ../../geometry/Point ../../geometry/Extent ../../geometry/mathUtils ../../support/expressionUtils ../../core/timerUtils ../support/attributeUtils ./geohashUtils ./statUtils".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n){f=B(u,{loaded:!1,started:!1,map:null,layer:null,lod:null,tolerance:null,clusterMode:null,clusterRadius:null,sortEnabled:!0,filterEnabled:!0,bufferEnabled:!0,updateEnabled:!0,clusters:null,clustersEnabled:!0,statisticInfos:null,defaults:{lod:1,tolerance:0,clusterMode:"auto",clusterRadius:80,sortEnabled:!0,filterEnabled:!0,bufferEnabled:!0,updateEnabled:!0},_eventHandles:null,_updateHandle:null,_indexHandle:null,_cellIndex:null,_globalIndex:null,_perfProfile:null,
_indexUpdated:!1,_cellSizeScaleFactor:1.5,_extentScaleFactor:1.25,_maxGeohashLength:12,_minClusterRadius:15,_levelChange:!0,_clusterFieldPrefix:"cluster_",_mapLevelChange:!1,constructor:function(k){this._update=l.hitch(this,this._update);this._indexFeatures=l.hitch(this,this._indexFeatures);this._eventHandles=[];this._globalIndex={numFeatures:null,fullExtent:null,lodStats:null};this._perfProfile={lastIndex:{total:null,numFeatures:0},lastUpdate:{cells:null,clusters:null,total:null}};this.clusters=
[];this.map=k.map;this.layer=k.layer;this.setLod(k.lod);this.setTolerance(k.tolerance);this.setClusterMode(k.clusterMode);this.setClusterRadius(k.clusterRadius);this.setSortEnabled(k.sortEnabled);this.setFilterEnabled(k.filterEnabled);this.setBufferEnabled(k.bufferEnabled);this.setUpdateEnabled(k.updateEnabled);this.setStatisticInfos(k.statisticInfos);this._load();this.loaded?this._startup():this._eventHandles.push(this.on("load",l.hitch(this,this._startup)))},destroy:function(k){this._displayFeatures(!0,
k);d.forEach(this._eventHandles,function(g){g.remove()});a.clearTimeout(this._updateHandle);a.clearTimeout(this._indexHandle);this._cellIndex=this._globalIndex=this._eventHandles=this._updateHandle=this._indexHandle=this.map=this.layer=this.clusters=null},setLod:function(k){var g=this.lod;this.lod=k||this.defaults.lod;g!==this.lod&&this.update()},setTolerance:function(k){var g=this.tolerance;this.tolerance=k||this.defaults.tolerance;g!==this.tolerance&&this.update()},setClusterMode:function(k){var g=
this.clusterMode;this.clusterMode=k||this.defaults.clusterMode;this._evalClusterParams();g!==this.clusterMode&&this.update()},setClusterRadius:function(k){var g=this.clusterRadius;this.clusterRadius=null!=k?k:this.defaults.clusterRadius;this._evalClusterParams();g!==this.clusterRadius&&this.update()},setSortEnabled:function(k){var g=this.sortEnabled;this.sortEnabled=null!=k?!!k:this.defaults.sortEnabled;g!==this.sortEnabled&&this.update()},setFilterEnabled:function(k){var g=this.filterEnabled;this.filterEnabled=
null!=k?!!k:this.defaults.filterEnabled;g!==this.filterEnabled&&this.update()},setBufferEnabled:function(k){var g=this.bufferEnabled;this.bufferEnabled=null!=k?!!k:this.defaults.bufferEnabled;g!==this.bufferEnabled&&this.update()},setUpdateEnabled:function(k){var g=this.updateEnabled;(this.updateEnabled=null!=k?!!k:this.defaults.updateEnabled)&&g!==this.updateEnabled&&(this._mapLevelChange=!0,this.update())},setStatisticInfos:function(k){this.statisticInfos=k||[];this.loaded&&this._applyStatInfos(this.statisticInfos)},
update:function(){this.loaded&&null==this._updateHandle&&(this._updateHandle=a.setTimeout(this._update,a.priority.HIGH))},isUpdateScheduled:function(){return null!=this._updateHandle},index:function(){this.loaded&&null==this._indexHandle&&(this._indexHandle=a.setTimeout(this._indexFeatures,a.priority.HIGH))},getCell:function(k){return this._cellIndex[k.length][k]},getCluster:function(k){var g;d.some(this.clusters,function(b){-1<d.indexOf(b.geohashes,k)&&(g=b);return!!g});return g},getCellsInCluster:function(k){var g=
[];d.forEach(k&&k.geohashes,function(b){(b=this.getCell(b))&&g.push(b)},this);return g},getFeaturesInCluster:function(k){var g=[];k=this.getCellsInCluster(k);d.forEach(k,function(b){Array.prototype.push.apply(g,b.features)});return g},toggleFeatureVisibility:function(k){this.index()},getCurrentLodStats:function(){var k=this._globalIndex.lodStats;return k&&k[this.lod]},getNumFeatures:function(){return this._globalIndex.numFeatures},getFullExtent:function(){var k=this._globalIndex.fullExtent;return k&&
Infinity!==k.xmin?new e(k):null},_load:function(){this._displayFeatures(!1);this._checkLoadStatus();this.map.loaded||this._eventHandles.push(this.map.on("load",l.hitch(this,this._checkLoadStatus)));this.layer.loaded||this._eventHandles.push(this.layer.on("load",l.hitch(this,this._checkLoadStatus)))},_checkLoadStatus:function(){if(this.map.loaded&&this.layer.loaded){if("esriGeometryPoint"!==this.layer.geometryType)var k=Error("GeohashAggregation is supported only for points");else{var g=this.map.spatialReference;
g.isWebMercator()||4326===g.wkid||(k=Error("GeohashAggregation is supported only when map spatial reference is WGS84 or WebMercator"))}k?(this.loadError=k,this.emit("load-error",{error:k})):(this.loaded=!0,this.emit("load"))}},_startup:function(){this._evalUpdateStatus();this.index();this._processExtentChange();this._eventHandles.push(this.layer.on("update-end",l.hitch(this,this.index)),this.layer.on("edits-complete",l.hitch(this,this.index)),this.layer.on("graphics-clear",l.hitch(this,this.index)),
this.layer.on("suspend",l.hitch(this,this._evalUpdateStatus)),this.layer.on("resume",l.hitch(this,this._evalUpdateStatus)),this.map.on("extent-change",l.hitch(this,this._processExtentChange)))},_evalUpdateStatus:function(){this.setUpdateEnabled(!this.layer.suspended)},_processExtentChange:function(k){this._mapLevelChange=!(!k||!k.levelChange);this._evalClusterParams();this.update()},_update:function(){this._updateHandle=null;if(this.updateEnabled){this.emit("update-start");if(this.clustersEnabled){var k=
this.map.geographicExtent;if(k){var g=this._getIntersectingCells(k);k=this._getClusters(g.cells,k);this.clusters=k.clusters;this._applyStatInfosToClusters();g=g.profile;k=k.profile;var b=g.total+k.total;g.total=this._getElapsedTime(g.total);k.total=this._getElapsedTime(k.total);var x=this._perfProfile.lastUpdate={};x.cells=g;x.clusters=k;x.total=this._getElapsedTime(b)}}else this.clusters=[],this._perfProfile.lastUpdate=null;g=this._indexUpdated;this._indexUpdated=!1;k=this._mapLevelChange;this._mapLevelChange=
!1;this.emit("update-end",{levelChange:this._levelChange,mapLevelChange:k,indexChange:g})}},_displayFeatures:function(k,g){var b=this.layer;k=!k;b.suspendGraphics(k);!1!==g&&(k?b.clearNodes():b.redraw())},_indexFeatures:function(){this._indexHandle=null;var k=this._getTime();this._initializeIndexing();var g=0,b=this._globalIndex.fullExtent;d.forEach(this.layer.graphics,function(y){if(y.visible){var D=y.geometry,E=this._getLngLat(D);if(E){var C=D.getCacheValue("_geohash");void 0===C&&(C=q.pointToGeohash(E),
D.setCacheValue("_geohash",C||null))}C&&(this._addGeohashToIndex(C,y,E),g++,this._updateExtent(b,E))}},this);this._applyStatInfosToIndex();this._globalIndex.numFeatures=g;for(var x=this._globalIndex.lodStats,v=1;v<=this._maxGeohashLength;v++)x[v]=this._getLODStats(v,g);this._perfProfile.lastIndex.total=this._getElapsedTime(k,this._getTime());this._perfProfile.lastIndex.numFeatures=g;this._indexUpdated=!0;this.emit("index-complete");this.started||(this.started=!0,this.emit("start"));this.update()},
_initializeIndexing:function(){this._globalIndex={numFeatures:0,fullExtent:{xmin:Infinity,ymin:Infinity,xmax:-Infinity,ymax:-Infinity},lodStats:{}};for(var k=this._cellIndex=[],g=1;g<=this._maxGeohashLength;g++)k[g]={}},_getLngLat:function(k){if(k){var g=k.getLongitude();k=k.getLatitude();k=null!=g&&null!=k?{x:g,y:k}:null}return k},_addGeohashToIndex:function(k,g,b){for(var x=this._cellIndex,v="",y=0;y<this._maxGeohashLength;y++){v+=k[y];var D=x[v.length],E=D[v];E||(E=D[v]={count:0,centroid:{x:null,
y:null},extent:{xmin:Infinity,ymin:Infinity,xmax:-Infinity,ymax:-Infinity},features:[],geohash:v,statistics:null});this._updateItem(E,1,b,!0);E.features.push(g)}},_getLODStats:function(k,g){var b=this._cellIndex[k],x=0,v=Infinity,y=-Infinity,D=null,E;for(E in b){var C=b[E];x++;C.count<v&&(v=C.count);C.count>y&&(y=C.count)}0<x&&(D=Number((g/x).toFixed(2)));return{lod:k,count:x,min:Infinity===v?null:v,max:-Infinity===y?null:y,avg:D}},_evalClusterParams:function(){if(this.loaded&&"auto"===this.clusterMode){var k=
this._getClusterParams(this.map.getResolutionInMeters(),this.clusterRadius,this._minClusterRadius);this._levelChange=this.lod!==k.lod;this.lod=k.lod;this.tolerance=k.tolerance}},_getClusterParams:function(k,g,b){g<b&&(g=b);k=Math.ceil(k*g);g=this._getClosestLODRange(k).max;do b=this._getCellSize(g),(b=k>=this._cellSizeScaleFactor*b||1===b)||(g+=1);while(!b);b=k/this._getCellSize(g);return{lod:g,tolerance:k,multiplier:Number(b.toFixed(2))}},_getClosestLODRange:function(k){for(var g,b=this._maxGeohashLength;1<=
b;b--)if(this._getCellSize(b)>=k){g=b;break}null==g&&(g=1);k=g+1;k>this._maxGeohashLength&&(k=this._maxGeohashLength);return{min:g,max:k}},_getCellSize:function(k){k=q.getCellSizeInMeters(k);return Math.ceil(Math.min(k.width,k.height))},_sorter:function(k,g){var b=k.centroid,x=g.centroid;return k.count>g.count?-1:k.count<g.count?1:b.x>x.x?-1:b.x<x.x?1:0},_getIntersectingCells:function(k){var g=this._getTime();this.bufferEnabled&&(k=k.expand(this._extentScaleFactor));var b=q.getIntersecting(k,this.lod,
this.bufferEnabled?this.tolerance:0);k=this._getTime();var x=[],v=this.tolerance,y=this.sortEnabled;d.forEach(b,function(D){(D=this.getCell(D))&&x.push(D)},this);v&&y&&x.sort(this._sorter);b=this._getTime();return{cells:x,profile:{findCells:this._getElapsedTime(g,k),scanAndSortCells:this._getElapsedTime(k,b),total:b-g}}},_getClusters:function(k,g){var b=this._getTime(),x=[],v={},y={findCells:0};d.forEach(k,function(D,E){(D=this._createCluster(D,v,y))&&x.push(D)},this);this._markIntersecting(x,g);
this.filterEnabled&&(x=this._getIntersectingClusters(x));k=this._getTime();return{clusters:x,profile:{findCellsInCluster:this._getElapsedTime(y.findCells),total:k-b}}},_markIntersecting:function(k,g){var b=g.normalize();d.forEach(k,function(x){var v=x.centroid.x,y=x.centroid.y;x.isIntersecting=d.some(b,function(D){return v>=D.xmin&&v<=D.xmax&&y>=D.ymin&&y<=D.ymax})})},_getIntersectingClusters:function(k){return d.filter(k,function(g){return g.isIntersecting})},_createCluster:function(k,g,b){if(!g[k.geohash]){var x=
[{cell:k,distance:0}];if(this.tolerance){var v=this._getTime(),y=q.getNeighborsWithinDistance(k.centroid,this.lod,this.tolerance);b.findCells+=this._getTime()-v;d.forEach(y,function(D){if(D!==k.geohash&&(D=this.getCell(D))){var E=this._calculateDistance(k.centroid,D.centroid);E<=this.tolerance&&x.push({cell:D,distance:E})}},this)}return this._mergeCells(x,g)}},_calculateDistance:function(k,g){return r.getLength(q.geographicToWebMercator(k),q.geographicToWebMercator(g))},_mergeCells:function(k,g){var b=
this._initializeCluster({},k[0].cell.geohash);d.forEach(k,function(x){var v=x.cell,y=v.geohash;x=x.distance;var D=g[y];if(D)if(x<D.distance)this._removeCellFromCluster(y,g);else return;g[y]={cluster:b,distance:x};this._updateItem(b,v.count,v.centroid);b.geohashes.push(y)},this);return b},_removeCellFromCluster:function(k,g){var b=g[k].cluster;delete g[k];k=d.indexOf(b.geohashes,k);-1<k&&b.geohashes.splice(k,1);this._reevaluateCluster(b)},_reevaluateCluster:function(k){var g=k.geohashes;k=this._initializeCluster(k,
k.primary);d.forEach(g,function(b){var x=this.getCell(b);x&&(this._updateItem(k,x.count,x.centroid),k.geohashes.push(b))},this)},_initializeCluster:function(k,g){k.count=0;k.centroid=new t(null,null);k.geohashes=[];k.primary=g;k.statistics=null;return k},_applyStatInfos:function(k){k=this._getValidStatInfos(k);this._applyStatInfosToIndex(k);this._applyStatInfosToClusters(k)},_getValidStatInfos:function(k){var g=[];d.forEach(k,function(b){var x=b.attributeInfo;b=b.statisticType;var v="angle"===x.attributeType;
if(n.isSupportedStatisticType(b)&&(!v||"avg"===b)){var y="arithmetic"===x.rotationType;g.push({attributeCache:h.createAttributeCache(x,"type"===b),identifier:n.getStatisticId(x,b),statFunctions:n.getStatisticFunctions(b),isAngular:v,isDate:"date"===x.attributeType,isArithmetic:y})}});return g},_applyStatInfosToIndex:function(k){k=k||this._getValidStatInfos(this.statisticInfos);var g=this._cellIndex;if(g)for(var b=1;b<=this._maxGeohashLength;b++){var x=g[b],v;for(v in x)this._applyStatInfosToCell(x[v],
k)}},_applyStatInfosToCell:function(k,g){var b=this._initializeStats(k,g);d.forEach(k.features,function(x){this._calcFeatureStats(x,g,b)},this);this._summarizeStats(k,b,g)},_calcFeatureStats:function(k,g,b){k.attributes&&d.forEach(g,function(x){var v=b[x.identifier],y=x.attributeCache;y=y?k._getDataValue(y.attributeInfo,y,m):null;x.statFunctions.updateCellStat(v,y,x)})},_applyStatInfosToClusters:function(k){k=k||this._getValidStatInfos(this.statisticInfos);var g=this._clusterFieldPrefix;d.forEach(this.clusters,
function(b){var x=this._initializeStats(b,k);d.forEach(this.getCellsInCluster(b),function(v){this._calcCellStats(v,k,x)},this);this._summarizeStats(b,x,k,g);b.attributes[g+"id"]=b.primary},this)},_calcCellStats:function(k,g,b){var x=k.statistics;d.forEach(g,function(v){var y=v.identifier;v.statFunctions.updateClusterStat(b[y],x[y],v)})},_initializeStats:function(k,g){var b=k.statistics={};d.forEach(g,function(x){b[x.identifier]=x.statFunctions.initialize(x)});return b},_summarizeStats:function(k,
g,b,x){var v=k.attributes={};x=x||"";v[x+"count"]=k.count;d.forEach(b,function(y){var D=this._getStatFieldName(y,x);v[D]=y.statFunctions.summarize(g[y.identifier],y)},this)},_getStatFieldName:function(k,g){return(g||"")+k.identifier},_updateItem:function(k,g,b,x){var v=b.y,y=k.centroid,D=k.count;y.x=(D*y.x+g*b.x)/(D+g);y.y=(D*y.y+g*v)/(D+g);k.count+=g;x&&this._updateExtent(k.extent,b)},_updateExtent:function(k,g){var b=g.x;g=g.y;b<k.xmin&&(k.xmin=b);b>k.xmax&&(k.xmax=b);g<k.ymin&&(k.ymin=g);g>k.ymax&&
(k.ymax=g)},_getTime:function(){return window.performance?window.performance.now():(new Date).getTime()},_getElapsedTime:function(k,g){k=null!=k&&null!=g?g-k:k;if(null!=k){var b="millisecond";1E3<=k&&(k/=1E3,b="second",60<=k&&(k/=60,b="minute"));b={value:Number(k.toFixed(2)),unit:b}}return b}});l.setObject("layers.clustering.GeohashAggregation",f,c);return f})},"esri/core/timerUtils":function(){define([],function(){function f(u){var t,e=u.length;for(t=0;t<e;t++)u[t]()}var B={LOW:1,HIGH:2},l,d={};
d[B.LOW]=[];d[B.HIGH]=[];var c=function(){clearTimeout(l);l=null;var u=d[B.HIGH];d[B.HIGH]=[];f(u);u=d[B.LOW];d[B.LOW]=[];f(u)};return{priority:B,callbackQueue:d,setTimeout:function(u,t){u=[t,d[t].push(u)-1];l||(l=setTimeout(c,0));return u},clearTimeout:function(u){u&&d[u[0]].splice(u[1],1)}}})},"esri/layers/clustering/geohashUtils":function(){define("dojo/has dojo/string dojo/_base/lang dojo/_base/array ../../kernel ../../geometry/Point ../../geometry/Extent ../../SpatialReference ../../geometry/webMercatorUtils".split(" "),
function(f,B,l,d,c,u,t,e,r){function m(F){var H=F.spatialReference;if(!H)return{x:F.x,y:F.y};var J=H.isWebMercator(),K;4326===H.wkid?K={x:F.x,y:F.y}:J&&(K={x:F.getLongitude(),y:F.getLatitude()});return K}function a(F){var H=F.spatialReference,J=!(!H||!H.isWebMercator()),K;H&&4326===H.wkid?K=new t(F.toJson()):J&&(K=r.webMercatorToGeographic(F,!0));return K}function h(F,H){H.x=u.prototype._normalizeX(F.x,e.prototype._info[4326]);H.y=F.y;return H}function q(F,H){H=H.slice();H.splice(1,0,0);for(var J=
H[0],K=H[2],Q=0;Q<F.length;Q++){Number(F[Q])?H[0]=H[1]:H[2]=H[1];var P=H[1]=(H[0]+H[2])/2;J=H[0];K=H[2]}return{value:P,min:J,max:K}}function n(F,H,J){var K=[];H=H.slice();H.splice(1,0,0);for(var Q=H[0],P=H[2],I=0;I<J;I++)F>=H[1]?(H[0]=H[1],Q=1):(H[2]=H[1],Q=0),H[1]=(H[0]+H[2])/2,K.push(Q),Q=H[0],P=H[2];return{value:K.join(""),min:Q,max:P}}function k(F){var H=F*A.bitsPerBase32Char;0===H%2?F=H/=2:(F=(H+1)/2,H-=F);return{lon:F,lat:H}}function g(F,H){var J={x:F.xmin,y:F.ymax},K={x:F.xmax,y:F.ymin},Q=
{x:F.xmax,y:F.ymax};return{sw:G.pointToGeohash({x:F.xmin,y:F.ymin},H),nw:G.pointToGeohash(J,H),se:G.pointToGeohash(K,H),ne:G.pointToGeohash(Q,H)}}function b(F,H,J,K,Q){var P=F;do Q[P]||(Q[P]=!0,K.push(P)),(F=P===H)||(P=w(P,J));while(!F)}function x(F,H,J,K){var Q=g(F,H);F=[];b(Q.sw,Q.nw,"n",F,{});H=[];b(Q.se,Q.ne,"n",H,{});for(Q=0;Q<F.length;Q++)b(F[Q],H[Q],"e",J,K)}function v(F){return d.filter(F,function(H){return 180===H.xmax?!0:!1})[0]}function y(F){return d.filter(F,function(H){return-180===H.xmin?
!0:!1})[0]}function D(F,H,J,K){var Q=G.geographicToWebMercator(F);F={x:Q.x-H,y:Q.y-H};H=G.webMercatorToGeographic({x:Q.x+H,y:Q.y+H},!0);F=G.webMercatorToGeographic(F,!0);return new t(null!=J?J:F.x,F.y,null!=K?K:H.x,H.y)}function E(F,H,J,K){F=g(F,H);var Q,P;"min"===K?P=180:"max"===K&&(Q=-180);var I=Q;K=P;var N=G.geohashToCell(F.sw).extent;H=G.geohashToCell(F.ne).extent;F=null!=I?I:N.xmin;N=N.ymin;K=null!=K?K:H.xmax;H=H.ymax;F=D({x:F,y:N},J,Q,P);J=D({x:K,y:H},J,Q,P);return new t(F.xmin,F.ymin,J.xmax,
J.ymax)}function C(F,H,J){var K=F,Q=0;do Q++,(F=K===H)||(K=w(K,J));while(!F);return Q}function z(F,H){F=g(F,H);H=C(F.nw,F.ne,"e");return{rows:C(F.nw,F.sw,"s"),cols:H}}function w(F,H){var J=F.length%2,K=F.slice(-1),Q=A.decimals[K];F=F.slice(0,-1);-1!=A.borders[H][J].indexOf(K)&&F&&(F=w(F,H));return F+A.neighbors[H][J][Q]}var A={base32:"0123456789bcdefghjkmnpqrstuvwxyz",decimals:function(){for(var F={},H=0;32>H;H++)F["0123456789bcdefghjkmnpqrstuvwxyz"[H]]=H;return F}(),neighbors:{n:[null,"238967debc01fg45kmstqrwxuvhjyznp"],
s:[null,"bc01fg45238967deuvhjyznpkmstqrwx"],e:[null,"14365h7k9dcfesgujnmqp0r2twvyx8zb"],w:[null,"p0r21436x8zb9dcf5h7kjnmqesgutwvy"]},borders:{n:[null,"bcfguvyz"],s:[null,"0145hjnp"],e:[null,"prxz"],w:[null,"028b"]},bitsPerBase32Char:5,maxGeohashLength:12,longitudeRange:[-180,180],latitudeRange:[-90,90]};A.neighbors.n[0]="14365h7k9dcfesgujnmqp0r2twvyx8zb";A.neighbors.s[0]="p0r21436x8zb9dcf5h7kjnmqesgutwvy";A.neighbors.e[0]="238967debc01fg45kmstqrwxuvhjyznp";A.neighbors.w[0]="bc01fg45238967deuvhjyznpkmstqrwx";
A.borders.n[0]="prxz";A.borders.s[0]="028b";A.borders.e[0]="bcfguvyz";A.borders.w[0]="0145hjnp";var G={geographicToWebMercator:function(F){F=u.lngLatToXY(F.x,F.y);return{x:F[0],y:F[1]}},webMercatorToGeographic:function(F,H){F=u.xyToLngLat(F.x,F.y,H);return{x:F[0],y:F[1]}},geohashToCell:function(F){var H;var J=[];for(H=0;H<F.length;H++){var K=J,Q=K.push;var P=A.decimals[F[H]].toString(2);P=B.pad(P,A.bitsPerBase32Char,"0");Q.call(K,P)}J=J.join("");H=[];K=[];for(Q=0;Q<J.length;Q++)0===Q%2?H.push(J[Q]):
K.push(J[Q]);H=H.join("");K=K.join("");H=[H,K];J=q(H[0],A.longitudeRange);K=q(H[1],A.latitudeRange);H=J.value;return{point:{x:H,y:K.value},extent:{xmin:J.min,xmax:J.max,ymin:K.min,ymax:K.max},geohash:F}},pointToCell:function(F,H){H=H||A.maxGeohashLength;if(F=m(F)){F=h(F,F);var J=k(H);H=n(F.x,A.longitudeRange,J.lon);var K=n(F.y,A.latitudeRange,J.lat);J=H.value;var Q=K.value;H={xmin:H.min,xmax:H.max,ymin:K.min,ymax:K.max};K=[];for(var P=Math.ceil((J.length+Q.length)/A.bitsPerBase32Char),I=0,N=0,L=0;L<
P*A.bitsPerBase32Char;L++){var W=0===L%2?J[I++]:Q[N++];null==W&&(W=0);K.push(W)}J=K.join("");Q=A.bitsPerBase32Char;K=J.length/Q;P=[];for(I=0;I<K;I++){W=J.substr(I*Q,Q);N=P;L=N.push;var Z=0;W=W.split("").reverse().join("");for(var aa=0;aa<W.length;aa++)Z+=Number(W[aa])*Math.pow(2,aa);L.call(N,A.base32[Z])}J=P.join("");return{point:F,extent:H,geohash:J}}},geohashToPoint:function(F){return G.geohashToCell(F).point},pointToGeohash:function(F,H){return(F=G.pointToCell(F,H))&&F.geohash},getCells:function(F){return d.map(F,
function(H){return G.geohashToCell(H)})},getCellSize:function(F){var H=A.longitudeRange,J=A.latitudeRange;H=Math.abs(H[1]-H[0]);J=Math.abs(J[1]-J[0]);F=k(F||1);return{width:H/Math.pow(2,F.lon),height:J/Math.pow(2,F.lat)}},getCellSizeInMeters:function(F){F=G.getCellSize(F);var H=r.metersPerDegree;F.width*=H;F.height*=H;return F},getIntersecting:function(F,H,J){H=H||1;J=J||0;var K=[],Q=a(F);if(Q){J&&(Q=G.expandExtent(F,H,J));F=Q.normalize();var P={};d.forEach(F,function(I){x(I,H,K,P)})}return K},countIntersecting:function(F,
H,J){H=H||1;J=J||0;var K=0,Q=a(F);if(Q){J&&(Q=G.expandExtent(F,H,J));F=Q.normalize();if(2===F.length){K=v(F);Q=y(F);J=z(K,H);var P=z(Q,H);F=J.rows;J=J.cols+P.cols;K={x:K.xmin,y:K.ymax};Q={x:Q.xmax,y:Q.ymax};K=h(K,{});Q=h(Q,{});K=G.pointToGeohash(K,H);H=G.pointToGeohash(Q,H);K===H&&J--;H={rows:F,cols:J}}else H=z(F[0],H);K=H.cols*H.rows}return K},getChildren:function(F){F=F||"";var H=[],J;for(J in A.decimals)H.push(F+J);return H},getNeighbors:function(F){var H=w(F,"n"),J=w(F,"s");return[H,w(H,"e"),
w(H,"w"),J,w(J,"e"),w(J,"w"),w(F,"e"),w(F,"w")]},getExtentFromDistance:function(F,H){H=H||1E3;var J;(F=m(F))&&(J=D(F,H));return J},expandExtent:function(F,H,J){H=H||1;J=J||0;if(F=a(F)){if(J){F=F.normalize();if(2===F.length){var K=J;J=v(F);F=y(F);J=E(J,H,K,"min");F=E(F,H,K,"max");360<=J.getWidth()+F.getWidth()?(H=-180,F=180):(H=J.xmin,F=F.xmax);return new t(H,J.ymin,F,J.ymax)}return E(F[0],H,J)}return F}},getNeighborsWithinDistance:function(F,H,J){J=J||1E3;H=H||1;var K=[];if(F=m(F)){J=D(F,J).normalize();
var Q={};d.forEach(J,function(P){x(P,H,K,Q)})}return K}};l.setObject("layers.clustering.geohashUtils",G,c);return G})},"esri/layers/clustering/statUtils":function(){define(["dojo/_base/lang","../support/attributeUtils"],function(f,B){function l(u){return"number"===typeof u&&!isNaN(u)&&Infinity!==u&&-Infinity!==u}var d={sum:{initialize:function(){return{count:0,sum:null}},updateCellStat:function(u,t){l(t)&&(u.count++,u.sum+=t)},updateClusterStat:function(u,t){t.count&&(u.count+=t.count,u.sum+=t.sum)},
summarize:function(u){return u.sum}},avg:{initialize:function(u){return{count:0,sum:null,avg:null,sum_cosine:null,sum_sine:null}},updateCellStat:function(u,t,e){l(t)&&(u.count++,e.isAngular?(e.isArithmetic||(t=-1*t+90),u.sum_cosine+=Math.cos(t*Math.PI/180),u.sum_sine+=Math.sin(t*Math.PI/180)):u.sum+=t)},updateClusterStat:function(u,t,e){t.count&&(u.count+=t.count,e.isAngular?(u.sum_cosine+=t.sum_cosine,u.sum_sine+=t.sum_sine):u.sum+=t.sum)},summarize:function(u,t){if(0<u.count){var e=u.count;t.isAngular?
(e=180*Math.atan2(u.sum_sine/e,u.sum_cosine/e)/Math.PI,t.isArithmetic||(e=-1*(e-90)),u.avg=0>e?e+360:e):(u.avg=u.sum/e,t.isDate&&(u.avg=Math.ceil(u.avg)))}return u.avg}},type:{initialize:function(){return{uvInfos:{}}},updateCellStat:function(u,t){if(null==t||""===t||"string"===typeof t&&""===f.trim(t))t=null;u=u.uvInfos;null==u[t]?u[t]={count:1,value:t}:u[t].count++},updateClusterStat:function(u,t){u=u.uvInfos;t=t.uvInfos;for(var e in t){var r=t[e];null==u[e]?u[e]={count:r.count,value:r.value}:u[e].count+=
r.count}},summarize:function(u){u=u.uvInfos;var t,e=-Infinity;for(t in u){var r=u[t];if(r.count>e){e=r.count;var m=r.value}else r.count===e&&(m=null)}return m}}},c={isSupportedStatisticType:function(u){return d.hasOwnProperty(u)},getStatisticFunctions:function(u){return d[u]},getStatisticId:function(u,t){var e=B.getAttributeIdSource(u);u=e&&B.getAttributeId(e)||u.field;return t+"_"+u},getClusterField:function(u,t){return"cluster_"+c.getStatisticId(u,t)},getStatisticHash:function(u,t){t=[c.getStatisticId(u,
t)];u.attributeType&&t.push(u.attributeType.toLowerCase());u.rotationType&&t.push(u.rotationType.toLowerCase());return t.join("_")}};return c})},"esri/layers/agscommon":function(){define("./ArcGISMapServiceLayer ./LayerInfo ./TimeInfo ./LayerTimeOptions ./TimeReference ./Field ./Domain ./RangeDomain ./CodedValueDomain ./InheritedDomain ./LayerSource ./LayerMapSource ./LayerDataSource ./DataSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource ./DynamicLayerInfo ./LayerDrawingOptions ../geometry ../utils".split(" "),
function(){return{}})},"esri/layers/LayerDrawingOptions":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../renderers/jsonUtils ./LabelClass".split(" "),function(f,B,l,d,c,u,t,e){f=f(null,{declaredClass:"esri.layers.LayerDrawingOptions",constructor:function(r){if(r&&(B.mixin(this,r),r.renderer&&(this.renderer=t.fromJson(r.renderer)),r.labelingInfo&&0<r.labelingInfo.length)){this.labelingInfo=[];var m;l.forEach(r.labelingInfo,function(a){m=new e(a);
this.labelingInfo.push(m)},this)}},toJson:function(){var r={renderer:this.renderer&&this.renderer.toJson(),transparency:this.transparency,scaleSymbols:this.scaleSymbols,showLabels:this.showLabels};this.labelingInfo&&0<this.labelingInfo.length&&(r.labelingInfo=[],l.forEach(this.labelingInfo,function(m){r.labelingInfo.push(m.toJson())}));return u.fixJson(r)}});B.setObject("layers.LayerDrawingOptions",f,c);return f})},"esri/geometry":function(){define("./units ./SpatialReference ./geometry/Geometry ./geometry/Point ./geometry/ScreenPoint ./geometry/Multipoint ./geometry/Polyline ./geometry/Polygon ./geometry/Extent ./geometry/Rect ./geometry/geodesicUtils ./geometry/jsonUtils ./geometry/mathUtils ./geometry/normalizeUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b){return{units:f,SpatialReference:B,Geometry:l,Point:d,ScreenPoint:c,Multipoint:u,Polyline:t,Polygon:e,Extent:r,Rect:m,geodesicUtils:a,jsonUtils:h,mathUtils:q,normalizeUtils:n,scaleUtils:k,screenUtils:g,webMercatorUtils:b}})},"esri/units":function(){define(["dojo/has","./kernel"],function(f,B){f={CENTIMETERS:"esriCentimeters",DECIMAL_DEGREES:"esriDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds",DECIMETERS:"esriDecimeters",FEET:"esriFeet",FEET_US:"esriFeetUS",
INCHES:"esriInches",KILOMETERS:"esriKilometers",METERS:"esriMeters",MILES:"esriMiles",MILES_US:"esriMilesUS",MILLIMETERS:"esriMillimeters",NAUTICAL_MILES:"esriNauticalMiles",POINTS:"esriPoints",UNKNOWN:"esriUnknownUnits",YARDS:"esriYards",YARDS_US:"esriYardsUS",ACRES:"esriAcres",ACRES_US:"esriAcresUS",ARES:"esriAres",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_MILES_US:"esriSquareMilesUS",SQUARE_FEET:"esriSquareFeet",SQUARE_FEET_US:"esriSquareFeetUS",SQUARE_METERS:"esriSquareMeters",
HECTARES:"esriHectares",SQUARE_YARDS:"esriSquareYards",SQUARE_YARDS_US:"esriSquareYardsUS",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters",SQUARE_NAUTICAL_MILES:"esriSquareNauticalMiles",METERS_PER_SECOND:"esriMetersPerSecond",KILOMETERS_PER_HOUR:"esriKilometersPerHour",KNOTS:"esriKnots",FEET_PER_SECOND:"esriFeetPerSecond",MILES_PER_HOUR:"esriMilesPerHour",RADIANS:"esriDURadians"};return B.Units=
f})},"esri/geometry/Rect":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Geometry ./Point ./Extent ../srUtils".split(" "),function(f,B,l,d,c,u,t,e,r){function m(h){return new e(parseFloat(h.x),parseFloat(h.y)-parseFloat(h.height),parseFloat(h.x)+parseFloat(h.width),parseFloat(h.y),h.spatialReference)}var a=f(u,{declaredClass:"esri.geometry.Rect",type:"rect",x:0,y:0,width:100,height:100,constructor:function(h,q,n,k,g){c.isObject(h)&&"extent"===h.type&&(q=h.ymax,
n=h.getWidth(),k=h.getHeight(),g=h.spatialReference,h=h.xmin);c.isObject(h)?(c.mixin(this,h),this.spatialReference&&(this.spatialReference=r.createSpatialReference(this.spatialReference))):(this.x=h,this.y=q,this.width=n,this.height=k,this.spatialReference=g);this.verifySR()},getCenter:function(){return new t(this.x+this.width/2,this.y+this.height/2,this.spatialReference)},offset:function(h,q){return new a(this.x+h,this.y+q,this.width,this.height,this.spatialReference)},intersects:function(h){return h.x+
h.width<=this.x||h.y+h.height<=this.y||h.y>=this.y+this.height||h.x>=this.x+this.width?!1:!0},getExtent:function(){return m(this)},update:function(h,q,n,k,g){this.x=h;this.y=q;this.width=n;this.height=k;this.spatialReference=g;this.clearCache();return this}});B.setObject("geometry.Rect",a,d);d.geometry._rectToExtent=m;d.geometry._extentToRect=function(h){return new a(h)};return a})},"esri/geometry/geodesicUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point ./Polyline ./Polygon".split(" "),
function(f,B,l,d,c,u,t,e){function r(x){return!!(x&&x.wkid&&b[x.wkid])}function m(x){return r(x)?b[x.wkid]:b[4326]}function a(x){var v=x.spatialReference,y=m(v),D=y.a;y=y.eSq;var E=Math.sqrt(y),C=Math.sin(x.y*g);return new u(D*x.x*g,0<y?D*(1-y)*(C/(1-y*C*C)-1/(2*E)*Math.log((1-E*C)/(1+E*C)))*.5:D*C,v)}function h(x,v,y,D,E){var C=m(E),z=C.a,w=C.b;C=C.f;var A=Math.sin(y);y=Math.cos(y);var G=(1-C)*Math.tan(x);x=1/Math.sqrt(1+G*G);var F=G*x,H=Math.atan2(G,y);G=x*A;var J=G*G,K=1-J;z=K*(z*z-w*w)/(w*w);
var Q=1+z/16384*(4096+z*(-768+z*(320-175*z))),P=z/1024*(256+z*(-128+z*(74-47*z)));z=D/(w*Q);for(var I=2*Math.PI,N,L,W,Z;1E-12<Math.abs(z-I);)W=Math.cos(2*H+z),N=Math.sin(z),L=Math.cos(z),Z=P*N*(W+P/4*(L*(-1+2*W*W)-P/6*W*(-3+4*N*N)*(-3+4*W*W))),I=z,z=D/(w*Q)+Z;D=F*N-x*L*y;w=C/16*K*(4+C*(4-3*K));return new u((v+(Math.atan2(N*A,x*L-F*N*y)-(1-w)*C*G*(z+w*N*(W+w*L*(-1+2*W*W)))))/g,Math.atan2(F*L+x*N*y,(1-C)*Math.sqrt(J+D*D))/g,E)}function q(x,v,y,D,E){var C=m(E),z=C.a;E=C.b;var w=C.f,A=D-v,G=Math.atan((1-
w)*Math.tan(x)),F=Math.atan((1-w)*Math.tan(y)),H=Math.sin(G);G=Math.cos(G);var J=Math.sin(F);F=Math.cos(F);var K=A,Q=1E3;do{var P=Math.sin(K);var I=Math.cos(K);var N=Math.sqrt(F*P*F*P+(G*J-H*F*I)*(G*J-H*F*I));if(0===N)return 0;I=H*J+G*F*I;var L=Math.atan2(N,I);var W=G*F*P/N;var Z=1-W*W;P=I-2*H*J/Z;isNaN(P)&&(P=0);var aa=w/16*Z*(4+w*(4-3*Z));var ia=K;K=A+(1-aa)*w*W*(L+aa*N*(P+aa*I*(-1+2*P*P)))}while(1E-12<Math.abs(K-ia)&&0<--Q);if(0===Q)return E=D-v,{azimuth:Math.atan2(Math.sin(E)*Math.cos(y),Math.cos(x)*
Math.sin(y)-Math.sin(x)*Math.cos(y)*Math.cos(E)),geodesicDistance:Math.acos(Math.sin(x)*Math.sin(y)+Math.cos(x)*Math.cos(y)*Math.cos(D-v))*C.radius};x=Z*(z*z-E*E)/(E*E);v=x/1024*(256+x*(-128+x*(74-47*x)));return{azimuth:Math.atan2(F*Math.sin(K),G*J-H*F*Math.cos(K)),geodesicDistance:E*(1+x/16384*(4096+x*(-768+x*(320-175*x))))*(L-v*N*(P+v/4*(I*(-1+2*P*P)-v/6*P*(-3+4*N*N)*(-3+4*P*P)))),reverseAzimuth:Math.atan2(G*Math.sin(K),G*J*Math.cos(K)-H*F)}}function n(x,v){if(!(x instanceof t||x instanceof e))throw Error("_geodesicDensify: the input geometry is neither polyline nor polygon");
var y=x.spatialReference,D=m(y).radius/1E4;v<D&&(v=D);D=x instanceof t;var E=[],C;f.forEach(D?x.paths:x.rings,function(z){E.push(C=[]);C.push([z[0][0],z[0][1]]);var w,A;var G=z[0][0]*g;var F=z[0][1]*g;for(w=0;w<z.length-1;w++){var H=z[w+1][0]*g;var J=z[w+1][1]*g;if(G!==H||F!==J){J=q(F,G,J,H,y);H=J.azimuth;J=J.geodesicDistance;var K=J/v;if(1<K){for(A=1;A<=K-1;A++){var Q=h(F,G,H,A*v,y);C.push([Q.x,Q.y])}A=h(F,G,H,(J+Math.floor(K-1)*v)/2,y);C.push([A.x,A.y])}F=h(F,G,H,J,y);C.push([F.x,F.y]);G=F.x*g;
F=F.y*g}}});return D?new t({paths:E,spatialReference:y}):new e({rings:E,spatialReference:y})}var k={esriMeters:1,esriKilometers:1E3,esriYards:.9144,esriFeet:.3048,esriMiles:1609.344,esriNauticalMiles:1852,esriInches:.0254,esriDecimeters:.1,esriCentimeters:.01,esriMillimeters:.001,esriSquareMeters:1,esriSquareKilometers:1E6,esriSquareYards:.83612736,esriSquareFeet:.09290304,esriSquareMiles:2589988.110336,esriAcres:4046.8564224,esriHectares:1E4,esriAres:100,esriSquareInches:6.4516E-4,esriSquareMillimeters:1E-6,
esriSquareCentimeters:1E-4,esriSquareDecimeters:.01},g=Math.PI/180,b={4326:{a:6378137,b:6356752.31424518,f:1/298.257223563,eSq:.006694379990197414,radius:6371008.771415059},104900:{a:2439700,b:2439700,f:0,eSq:0,radius:2439700},104901:{a:6051E3,b:6051E3,f:0,eSq:0,radius:6051E3},104902:{a:6051800,b:6051800,f:0,eSq:0,radius:6051800},104903:{a:1737400,b:1737400,f:0,eSq:0,radius:1737400},104904:{a:3393400,b:3375730,f:1/192.04301075,eSq:.01038722,radius:3387510},104905:{a:3396190,b:3376200,f:1/169.89444722,
eSq:.01173737,radius:3389526.6666666665},104906:{a:6200,b:6200,f:0,eSq:0,radius:6200},104907:{a:11100,b:11100,f:0,eSq:0,radius:11100},104912:{a:2409300,b:2409300,f:0,eSq:0,radius:2409300},104915:{a:1562090,b:1562090,f:0,eSq:0,radius:1562090},104916:{a:2632345,b:2632345,f:0,eSq:0,radius:2632345},104918:{a:1821460,b:1821460,f:0,eSq:0,radius:1821460},104929:{a:249400,b:249400,f:0,eSq:0,radius:249400},104943:{a:2575E3,b:2575E3,f:0,eSq:0,radius:2575E3},104971:{a:3396190,b:3396190,f:0,eSq:0,radius:3396190},
104972:{a:47E4,b:47E4,f:0,eSq:0,radius:47E4},104973:{a:255E3,b:255E3,f:0,eSq:0,radius:255E3},104974:{a:2439400,b:2439400,f:0,eSq:0,radius:2439400}};l={isSupported:r,getSpheroidInfo:m,geodesicDensify:n,geodesicLengths:function(x,v){var y=[];f.forEach(x,function(D,E){var C=0,z=D.spatialReference;f.forEach(D.paths,function(w,A){A=0;var G;for(G=1;G<w.length;G++){var F=w[G-1][0]*g;var H=w[G][0]*g;var J=w[G-1][1]*g;var K=w[G][1]*g;if(J!==K||F!==H)F=q(J,F,K,H,z),A+=F.geodesicDistance}C+=A});C/=k[v];y.push(C)});
return y},geodesicAreas:function(x,v){var y=[],D=[];f.forEach(x,function(E,C){C=.0015696101447650193*m(E.spatialReference).radius;y.push(n(E,C))});f.forEach(y,function(E,C){var z=0,w=E.spatialReference;f.forEach(E.rings,function(A,G){G=a(new u(A[0][0],A[0][1],w));var F=a(new u(A[A.length-1][0],A[A.length-1][1],w)),H=F.x*G.y-G.x*F.y,J;for(J=0;J<A.length-1;J++)G=a(new u(A[J+1][0],A[J+1][1],w)),F=a(new u(A[J][0],A[J][1],w)),H+=F.x*G.y-G.x*F.y;z+=H});z/=k[v];D.push(z/-2)});return D},_unitsDictionary:k,
_toEqualAreaPoint:a,_directGeodeticSolver:h,_inverseGeodeticSolver:q};B.mixin(B.getObject("geometry",!0,d),l);return l})},"esri/utils":function(){define("./domUtils ./lang ./urlUtils ./request ./tileUtils ./graphicsUtils ./deferredUtils ./layerUtils ./geometry/normalizeUtils".split(" "),function(){return{}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromWebMap":function(){define("dojo/on dojo/dom dojo/json dojo/aspect dojo/Deferred dojo/promise/all dojo/dom-construct dojo/_base/lang dojo/_base/array esri/arcgis/utils arcgisonline/map/thumbnail/createThumbnailImage arcgisonline/map/thumbnail/createHiddenMap".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h){return function(q,n,k,g){var b=function(x,v){k(v);x.destroy();B.byId("hiddenMapDiv").removeChild(B.byId("hiddenMap"))};h(q,n,e.hitch(this,function(x){a(x,e.hitch(this,b,x),g)}),g)}})},"esri/arcgis/utils":function(){define("require dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/_base/json dojo/_base/url dojo/on dojo/DeferredList dojo/dom-construct dojo/sniff dojox/gfx/_base ../kernel ../config ../Color ../lang ../request ../SpatialReference ../map ../urlUtils ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/webMercatorUtils ../symbols/jsonUtils ../renderers/jsonUtils ../dijit/PopupTemplate ../dijit/Popup ../tasks/query ../tasks/GeometryService ../layers/ArcGISTiledMapServiceLayer ../layers/FeatureLayer dojo/i18n!../nls/jsapi".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E,C,z,w,A,G,F,H,J,K,Q,P){function I(na){return!(!na||"BingMapsAerial"!==na.layerType&&"BingMapsAerial"!==na.type)}function N(na){return!(!na||"BingMapsRoad"!==na.layerType&&"BingMapsRoad"!==na.type)}function L(na){return I(na)||N(na)||!(!na||"BingMapsHybrid"!==na.layerType&&"BingMapsHybrid"!==na.type)}function W(na){return!(!na||"OpenStreetMap"!==na.layerType&&"OpenStreetMap"!==na.type)}function Z(na){return!!(na&&na.url&&(-1<"ArcGISFeatureLayer ArcGISImageServiceLayer ArcGISImageServiceVectorLayer ArcGISMapServiceLayer ArcGISStreamLayer ArcGISTiledImageServiceLayer ArcGISTiledMapServiceLayer".split(" ").indexOf(na.layerType)||
!na.layerType&&!na.type))}function aa(na){return b({url:Mb.arcgisUrl+"/"+na.itemId+"/data",content:{f:"json"},callbackParamName:"callback"},{disableIdentityLookup:!0,_preLookup:!0})}function ia(na,Ra){var Sa={f:"json"};Ra&&(Sa.token=Ra);return b({url:na,content:Sa,callbackParamName:"callback"},{disableIdentityLookup:!0})}function R(na){!na.layerDefinition||na.layerDefinition.drawingInfo&&na.layerDefinition.drawingInfo.labelingInfo||(na.showLabels=!1);na.itemProperties.layerDefinition&&(na.layerDefinition?
(na.layerDefinition.drawingInfo||(na.layerDefinition.drawingInfo=na.itemProperties.layerDefinition.drawingInfo),g.isDefined(na.layerDefinition.definitionExpression)||(na.layerDefinition.definitionExpression=na.itemProperties.layerDefinition.definitionExpression),g.isDefined(na.layerDefinition.minScale)||(na.layerDefinition.minScale=na.itemProperties.layerDefinition.minScale),g.isDefined(na.layerDefinition.maxScale)||(na.layerDefinition.maxScale=na.itemProperties.layerDefinition.maxScale)):na.layerDefinition=
na.itemProperties.layerDefinition);!na.itemProperties.popupInfo||na.popupInfo||na.disablePopup||(na.popupInfo=na.itemProperties.popupInfo);g.isDefined(na.itemProperties.showLabels)&&!g.isDefined(na.showLabels)&&(na.showLabels=na.itemProperties.showLabels);g.isDefined(na.itemProperties.showLegend)&&!g.isDefined(na.showLegend)&&(na.showLegend=na.itemProperties.showLegend);g.isDefined(na.itemProperties.refreshInterval)&&!g.isDefined(na.refreshInterval)&&(na.refreshInterval=na.itemProperties.refreshInterval)}
function S(na){R(na);na.itemProperties.layerDefinition&&na.layerDefinition&&(!g.isDefined(na.layerDefinition.maximumTrackPoints)&&g.isDefined(na.itemProperties.layerDefinition.maximumTrackPoints)&&(na.layerDefinition.maximumTrackPoints=na.itemProperties.layerDefinition.maximumTrackPoints),!na.layerDefinition.definitionGeometry&&na.itemProperties.layerDefinition.definitionGeometry&&(na.layerDefinition.definitionGeometry=na.itemProperties.layerDefinition.definitionGeometry));na.itemProperties.purgeOptions&&
!na.purgeOptions&&(na.purgeOptions=na.itemProperties.purgeOptions)}function M(na,Ra){var Sa=new c;Ra=na.itemData;var Ka=[],Ma=[];l.forEach(Ra.operationalLayers,function(Wa){if(Wa.itemId&&Z(Wa)){var Pa=Wa.url.toLowerCase();-1<Pa.indexOf("/featureserver")||-1<Pa.indexOf("/mapserver/")?(Ma.push(Wa),Ka.push(aa(Wa))):-1<Pa.indexOf("/mapserver")&&-1===Pa.indexOf("/mapserver/")&&(!Wa.layers||!g.isDefined(Wa.minScale)&&!g.isDefined(Wa.maxScale))?(Ma.push(Wa),Ka.push(aa(Wa))):-1<Pa.indexOf("/imageserver")?
(Ma.push(Wa),Ka.push(aa(Wa))):-1<Pa.indexOf("/streamserver")&&(Ma.push(Wa),Ka.push(aa(Wa)))}});Ra.baseMap&&Ra.baseMap.baseMapLayers&&l.forEach(Ra.baseMap.baseMapLayers,function(Wa){Wa.itemId&&"VectorTileLayer"!==Wa.layerType&&(Ma.push(Wa),Ka.push(aa(Wa)))});if(0<Ka.length){var Xa={};(new r(Ka)).addCallback(function(Wa){l.forEach(Ma,function(Pa,Za){if((Za=Wa[Za][1])&&!(Za instanceof Error)&&(Xa[Pa.itemId]=Za,Z(Pa))){var cb=Pa.url.toLowerCase();(-1<cb.indexOf("/featureserver")||-1<cb.indexOf("/mapserver/"))&&
Za.layers?l.forEach(Za.layers,function(eb){var nb="/featureserver/"+eb.id;(nb=cb.match(nb+"$")==nb)||(nb="/mapserver/"+eb.id,nb=cb.match(nb+"$")==nb);nb&&(Pa.itemProperties=eb,R(Pa))}):-1<cb.indexOf("/streamserver")?(Pa.itemProperties=Za,S(Pa)):-1<cb.indexOf("/mapserver")?(Za.layers&&!Pa.layers&&(Pa.layers=Za.layers),g.isDefined(Za.minScale)&&!g.isDefined(Pa.minScale)&&(Pa.minScale=Za.minScale),g.isDefined(Za.maxScale)&&!g.isDefined(Pa.maxScale)&&(Pa.maxScale=Za.maxScale),g.isDefined(Za.refreshInterval)&&
!g.isDefined(Pa.refreshInterval)&&(Pa.refreshInterval=Za.refreshInterval),Za.visibleLayers&&!Pa.visibleLayers&&(Pa.visibleLayers=Za.visibleLayers)):-1<cb.indexOf("/imageserver")&&(g.isDefined(Za.minScale)&&!g.isDefined(Pa.minScale)&&(Pa.minScale=Za.minScale),g.isDefined(Za.maxScale)&&!g.isDefined(Pa.maxScale)&&(Pa.maxScale=Za.maxScale),g.isDefined(Za.refreshInterval)&&!g.isDefined(Pa.refreshInterval)&&(Pa.refreshInterval=Za.refreshInterval),!Za.popupInfo||Pa.popupInfo||Pa.disablePopup||(Pa.popupInfo=
Za.popupInfo),Za.renderingRule&&!Pa.renderingRule&&(Pa.renderingRule=Za.renderingRule,Za.renderingRule.functionName&&(Pa.renderingRule.rasterFunction=Za.renderingRule.functionName)),Za.bandIds&&!Pa.bandIds&&(Pa.bandIds=Za.bandIds),Za.mosaicRule&&!Pa.mosaicRule&&(Pa.mosaicRule=Za.mosaicRule),Za.format&&!Pa.format&&(Pa.format=Za.format),g.isDefined(Za.compressionQuality)&&!g.isDefined(Pa.compressionQuality)&&(Pa.compressionQuality=Za.compressionQuality),!Za.layerDefinition||!Za.layerDefinition.definitionExpression||
g.isDefined(Pa.layerDefinition)&&g.isDefined(Pa.layerDefinition.definitionExpression)||(Pa.layerDefinition=Pa.layerDefinition||{},Pa.layerDefinition.definitionExpression=Za.layerDefinition.definitionExpression),Za=B.getObject("layerDefinition.drawingInfo.renderer",!1,Za),null==B.getObject("layerDefinition.drawingInfo.renderer",!1,Pa)&&null!=Za&&(Pa.layerDefinition=Pa.layerDefinition||{},Pa.layerDefinition.drawingInfo=Pa.layerDefinition.drawingInfo||{},Pa.layerDefinition.drawingInfo.renderer=Za))}});
na.relatedItemsData=Xa;Sa.callback(na)})}else Sa.callback(na);return Sa}function X(na,Ra){var Sa=new c,Ka=na.itemData,Ma=Ka.baseMap.baseMapLayers[0];if(L(Ma))if(Ma.portalUrl&&q.id)delete Ra.bingMapsKey,q.id.checkSignInStatus(y.urlToObject(Mb.arcgisUrl).path).then(B.hitch(null,function(Wa,Pa,Za,cb,eb){ia(Ma.portalUrl,eb.token).then(B.hitch(null,ea,Wa,Pa,Za,cb),B.hitch(null,ha,Wa,Pa,Za,cb))},na,Ra,Ka,Sa),B.hitch(null,function(Wa,Pa,Za,cb,eb){ia(Ma.portalUrl).then(B.hitch(null,ea,Wa,Pa,Za,cb),B.hitch(null,
ha,Wa,Pa,Za,cb))},na,Ra,Ka,Sa));else if(Ra.bingMapsKey){var Xa=new dc({bingMapsKey:Ra.bingMapsKey,mapStyle:dc.MAP_STYLE_AERIAL});d.connect(Xa,"onLoad",B.hitch(this,function(){Sa.callback([na,Ra])}));d.connect(Xa,"onError",function(Wa){delete Ra.bingMapsKey;na.itemData=ra(Ka);Ma=na.itemData.baseMap.baseMapLayers[0];Ma.errors=[];Ma.errors.push({message:"The owner of the application has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});Sa.callback([na,Ra])})}else na.itemData=
ra(Ka),Ma=na.itemData.baseMap.baseMapLayers[0],Ma.errors=[],Ma.errors.push({message:"The owner of the application has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."}),Sa.callback([na,Ra]);else Sa.callback([na,Ra]);return Sa}function fa(na){var Ra=new c;na=na.itemData;var Sa=na.baseMap&&na.baseMap.baseMapLayers;if(Yb&&!Yb.supported())for(na=0;na<Sa.length;na++){var Ka=Sa[na];if(!Ka.isReference){if("VectorTileLayer"===Ka.layerType){var Ma=Ka.itemId;var Xa=na}break}}Ma?
Sb(Ma,!1).addBoth(function(Wa){var Pa=/^https?:\/\/basemaps(dev)?\.arcgis\.com\/arcgis\/rest\/services\/World_Basemap\/VectorTileServer/i;Wa&&Wa.item&&Pa.test(Wa.item.url)&&(Sa[Xa]={id:"FB_"+Ka.id,layerType:"ArcGISTiledMapServiceLayer",opacity:"opacity"in Ka?Ka.opacity:1,visibility:"visibility"in Ka?Ka.visibility:!0,url:"https://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer"});Ra.resolve()}):Ra.resolve();return Ra}function ea(na,Ra,Sa,Ka,Ma){Ma.bingKey?(Ra.bingMapsKey=
Ma.bingKey,Ma=new dc({bingMapsKey:Ra.bingMapsKey,mapStyle:dc.MAP_STYLE_AERIAL}),d.connect(Ma,"onLoad",B.hitch(this,function(){Ka.callback([na,Ra])})),d.connect(Ma,"onError",function(Xa){delete Ra.bingMapsKey;na.itemData=ra(Sa);Xa=na.itemData.baseMap.baseMapLayers[0];Xa.errors=[];Xa.errors.push({message:"The owner of the map has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});Ka.callback([na,Ra])})):ha(na,Ra,Sa,Ka)}function ha(na,Ra,Sa,Ka){delete Ra.bingMapsKey;
na.itemData=ra(Sa);Sa=na.itemData.baseMap.baseMapLayers[0];Sa.errors=[];Sa.errors.push({message:"The owner of the map has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."});Ka.callback([na,Ra])}function ra(na){I(na.baseMap.baseMapLayers[0])?na.baseMap={title:"Imagery",baseMapLayers:[{id:"World_Imagery_2017",visibility:!0,opacity:1,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]}:N(na.baseMap.baseMapLayers[0])?na.baseMap={title:"Streets",
baseMapLayers:[{id:"World_Street_Map_8421",opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]}:na.baseMap={title:"Imagery with Labels",baseMapLayers:[{id:"World_Imagery_6611",opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{id:"World_Boundaries_and_Places_1145",isReference:!0,opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer"}]};
return na}function Aa(na,Ra,Sa,Ka){var Ma=na.dynamicLayerInfos||na.layerInfos,Xa=Ra.layers;if(Xa&&Ma)if(Ka.usePopupManager){var Wa;l.forEach(Ma,function(mb){var gb=mb.id;if(!mb.subLayerIds)for(mb=0;mb<Xa.length;mb++){var tb=Xa[mb];if(tb.id===gb&&tb.popupInfo&&!tb.disablePopup){Wa||(Wa={});Wa[gb]={infoTemplate:new Sa(tb.popupInfo),layerUrl:tb.layerUrl};break}}});Wa&&na.setInfoTemplates(Wa)}else{var Pa=[],Za=[],cb=[],eb=[],nb=[],db=[];l.forEach(Ma,function(mb){var gb=mb.id;if(!mb.subLayerIds&&-1!==
l.indexOf(na.visibleLayers,gb))for(mb=0;mb<Xa.length;mb++){var tb=Xa[mb];if(tb.id===gb){Za.push(gb);Pa.push(tb.popupInfo);cb.push(tb.layerUrl||"");tb.layerDefinition&&tb.layerDefinition.definitionExpression?eb.push(tb.layerDefinition.definitionExpression):eb.push("");nb.push(g.isDefined(tb.minScale)?tb.minScale:null);db.push(g.isDefined(tb.maxScale)?tb.maxScale:null);break}}});Pa.length&&(na.__popups=Pa,na.__popupIds=Za,na.__popupUrls=cb,na.__popupWhereClauses=eb,na.__popupMinScales=nb,na.__popupMaxScales=
db,na.__resourceInfo=Ra.resourceInfo)}}function Ea(na){if(!na)return!1;var Ra=(new t(Mb.arcgisUrl)).authority;return-1!==na.indexOf(".arcgis.com/")||-1!==na.indexOf(Ra)}function va(na){return na?-1!==na.indexOf("/services.arcgisonline.com/")||-1!==na.indexOf("/server.arcgisonline.com/"):!1}function Ga(na){"https:"===location.protocol&&(Ea(na)||va(na))&&(na=na.replace("http:","https:"));return na}function ca(na,Ra,Sa){var Ka=[];na.displayLevels||(Ka=l.map(na.resourceInfo.tileInfo.lods,function(Wa){return Wa.level}));
if(na.exclusionAreas){var Ma=B.clone(na.exclusionAreas);Ma=l.map(Ma,function(Wa){Wa.geometry=new C(Wa.geometry);return Wa})}var Xa=na.resourceInfo&&"Raster"===na.resourceInfo.cacheType;Xa?(Ka=na.layerDefinition&&na.layerDefinition.drawingInfo&&na.layerDefinition.drawingInfo.renderer,Ka=new Ec(Ga(na.url),{resourceInfo:na.resourceInfo,opacity:na.opacity,visible:na.visibility,id:na.id,minScale:na.minScale,maxScale:na.maxScale,refreshInterval:na.refreshInterval,multidimensionalDefinition:na.multidimensionalDefinition,
bandIds:na.bandIds,renderer:Ka||null})):Ka=new K(Ga(na.url),{resourceInfo:na.resourceInfo,opacity:na.opacity,visible:na.visibility,displayLevels:na.displayLevels||Ka,id:na.id,minScale:na.minScale,maxScale:na.maxScale,refreshInterval:na.refreshInterval,exclusionAreas:Ma});Sa.ignorePopups||(Xa&&na.popupInfo&&!na.disablePopup?Ka.setInfoTemplate(new Ra(na.popupInfo)):Aa(Ka,na,Ra,Sa));return Ka}function ja(na,Ra){if(!na||!Ra||0===Ra.length)return[];Ra=","+Ra+",";var Sa=[],Ka,Ma=",";for(Ka=0;Ka<na.length;Ka++)if(null!==
na[Ka].subLayerIds){if(-1===Ra.indexOf(","+na[Ka].id+",")||-1<Ma.indexOf(","+na[Ka].id+","))Ma+=na[Ka].subLayerIds.toString()+","}else-1<Ra.indexOf(","+na[Ka].id+",")&&-1===Ma.indexOf(","+na[Ka].id+",")&&Sa.push(na[Ka].id);return Sa}function wa(na,Ra,Sa){var Ka=new Ub;Ka.format="png24";na.resourceInfo&&na.resourceInfo.supportedImageFormatTypes&&-1<na.resourceInfo.supportedImageFormatTypes.indexOf("PNG32")&&(Ka.format="png32");Ka=new Eb(Ga(na.url),{resourceInfo:na.resourceInfo,opacity:na.opacity,visible:na.visibility,
id:na.id,imageParameters:Ka,minScale:na.minScale,maxScale:na.maxScale,refreshInterval:na.refreshInterval});var Ma=na.visibleLayers;if(!na.visibleLayers){var Xa="";l.forEach(Ka.layerInfos,function(db){db.defaultVisibility&&(Xa+=(0<Xa.length?",":"")+db.id)});Ma=Xa}if(na.layers&&0<na.layers.length){var Wa=[],Pa=[],Za,cb=[],eb,nb;l.forEach(na.layers,function(db){var mb=db.layerDefinition;mb&&mb.definitionExpression&&(Wa[db.id]=mb.definitionExpression);if(mb&&mb.source){Za=null;nb=mb.source;if("mapLayer"===
nb.type){var gb=l.filter(na.resourceInfo.layers,function(tb){return tb.id===nb.mapLayerId});gb.length&&(Za=B.mixin(gb[0],db))}else Za=B.mixin({},db);Za&&(Za.source=nb,delete Za.popupInfo,Za=new Qb(Za),na.visibleLayers&&(gb="string"==typeof na.visibleLayers?na.visibleLayers.split(","):na.visibleLayers,-1<l.indexOf(gb,db.id)?Za.defaultVisibility=!0:Za.defaultVisibility=!1),Pa.push(Za))}mb&&null!=mb.transparency&&(gb=mb.drawingInfo||{},null==gb.transparency&&(gb.transparency=mb.transparency,mb.drawingInfo=
gb));mb&&mb.source&&mb.drawingInfo&&(eb=new xc(mb.drawingInfo),cb[db.id]=eb)},this);0<Wa.length&&Ka.setLayerDefinitions(Wa);0<Pa.length?(Ka.setDynamicLayerInfos(Pa,!0),0<cb.length&&Ka.setLayerDrawingOptions(cb,!0)):(Ma=ja(Ka.layerInfos,Ma),Ka.setVisibleLayers(Ma))}else Ma=ja(Ka.layerInfos,Ma),Ka.setVisibleLayers(Ma);Sa.ignorePopups||Aa(Ka,na,Ra,Sa);return Ka}function za(na,Ra,Sa){var Ka=new wc;Ka.bandIds=na.bandIds;null!=na.format&&(Ka.format=na.format,null!=na.compressionQuality&&(Ka.compressionQuality=
na.compressionQuality));if(na.renderingRule&&na.renderingRule.rasterFunction){var Ma=new Nc(na.renderingRule);Ka.renderingRule=Ma}na.mosaicRule&&(Ma=new yc(na.mosaicRule),Ka.mosaicRule=Ma);g.isDefined(na.noData)&&(Ka.noData=na.noData);g.isDefined(na.noDataInterpretation)&&(Ka.noDataInterpretation=na.noDataInterpretation);g.isDefined(na.interpolation)&&(Ka.interpolation=na.interpolation);Ma=na.layerType?"ArcGISImageServiceVectorLayer"===na.layerType:!1;g.isDefined(na.layerType)||(Ma=na.resourceInfo.hasMultidimensions&&
("esriImageServiceDataTypeVector-UV"===na.resourceInfo.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===na.resourceInfo.serviceDataType));Ka={resourceInfo:na.resourceInfo,opacity:na.opacity,visible:na.visibility,id:na.id,imageServiceParameters:Ka,minScale:na.minScale,maxScale:na.maxScale,refreshInterval:na.refreshInterval};Ka=Ma?new Pb(Ga(na.url),Ka):new Hb(Ga(na.url),Ka);na.layerDefinition&&(na.layerDefinition.drawingInfo&&na.layerDefinition.drawingInfo.renderer&&(Ma=A.fromJson(na.layerDefinition.drawingInfo.renderer),
Ka.setRenderer(Ma)),na.layerDefinition.definitionExpression&&Ka.setDefinitionExpression(na.layerDefinition.definitionExpression,!0));Sa.ignorePopups||!na.popupInfo||na.disablePopup||Ka.setInfoTemplate(new Ra(na.popupInfo));return Ka}function Fa(na,Ra,Sa){var Ka=[102113,102100,3857],Ma=Sa||new x(Ra[0].layerObject.fullExtent.spatialReference),Xa=new x(na.resourceInfo.fullExtent.spatialReference);return Ma.wkt==Xa.wkt&&(Ma.wkid==Xa.wkid||g.isDefined(Ma.latestWkid)&&Ma.latestWkid==Xa.wkid||g.isDefined(Xa.latestWkid)&&
Ma.wkid==Xa.latestWkid||g.isDefined(Ma.latestWkid)&&Ma.latestWkid==Xa.latestWkid)||Ma.wkid&&Xa.wkid&&l.some(Ka,function(Wa){return Wa===Xa.wkid})&&l.some(Ka,function(Wa){return Wa===Ma.wkid})?!0:!1}function O(na,Ra,Sa){if(!Ra[0].layerObject.tileInfo)return!1;na=na.resourceInfo.tileInfo;Ra=Ra[0].layerObject.tileInfo;Sa=Sa.width>Sa.height?Sa.width:Sa.height;for(var Ka=!1,Ma=!1,Xa=0;Xa<na.lods.length;Xa++){for(var Wa=na.lods[Xa].scale/na.dpi,Pa=0;Pa<Ra.lods.length;Pa++){var Za=Ra.lods[Pa].scale/Ra.dpi;
if(Math.abs(Za-Wa)/Za<1/Sa)if(Ka){Ma=!0;break}else Ka=!0}if(Ma)break}return Ma||Ka&&(1===na.lods.length||1===Ra.lods.length)?!0:!1}function ya(na,Ra,Sa,Ka,Ma,Xa){var Wa=Sa._clazz;if(W(na))var Pa=new Dc({id:na.id,opacity:na.opacity,visible:null!==na.visibility&&void 0!==na.visibility?na.visibility:!0});else if(na&&("WFS"===na.layerType||"WFS"===na.type)){var Za={customParameters:na.wfsInfo.customParameters,geometryType:na.layerDefinition.geometryType,id:na.id,labelingInfo:na.layerDefinition.drawingInfo.labelingInfo,
maxFeatures:na.wfsInfo.maxFeatures,mode:na.mode,name:na.wfsInfo.name,showLabels:!0,swapXY:na.wfsInfo.swapXY,title:na.title,url:na.url,version:na.wfsInfo.version,visible:na.visibility,wkid:na.layerDefinition.spatialReference.wkid};Pa=new Xb;Pa.fromJson(Za,function(){g.isDefined(na.opacity)&&Pa.setOpacity(na.opacity);g.isDefined(na.visibility)&&Pa.setVisibility(na.visibility);(na.minScale||na.maxScale)&&Pa.setScaleRange(na.minScale,na.maxScale);Pa.renderer=A.fromJson(na.layerDefinition.drawingInfo.renderer,
{geometryType:Za.geometryType});!Sa.ignorePopups&&na.popupInfo&&Pa.setInfoTemplate(new Wa(na.popupInfo));Pa.emit("fromJsonComplete")})}else if(na&&("WMS"===na.layerType||"WMS"===na.type)){var cb=[],eb=[];l.forEach(na.layers,function(gb){eb.push(new Nb({name:gb.name,title:gb.title,legendURL:gb.legendURL||gb.legendUrl,queryable:gb.queryable,showPopup:gb.showPopup}));cb.push(gb.name)},this);na.visibleLayers&&(cb=na.visibleLayers);Ka=new C(na.extent[0][0],na.extent[0][1],na.extent[1][0],na.extent[1][1],
new x({wkid:4326}));Ka={customLayerParameters:na.customLayerParameters,customParameters:na.customParameters,extent:Ka,layerInfos:eb,version:na.version,maxWidth:na.maxWidth,maxHeight:na.maxHeight,featureInfoFormat:na.featureInfoFormat,getFeatureInfoURL:na.featureInfoUrl,getMapURL:na.mapUrl,spatialReferences:na.spatialReferences,title:na.title,copyright:na.copyright,minScale:na.minScale||0,maxScale:na.maxScale||0,format:na.format};Pa=new Mc(na.url,{id:na.id,visibleLayers:cb,format:"png",transparent:na.firstLayer?
!1:!0,opacity:na.opacity,visible:null!==na.visibility?na.visibility:!0,resourceInfo:Ka,refreshInterval:na.refreshInterval});Pa.spatialReference.wkid=Ka.spatialReferences[0]}else if(na&&("KML"===na.layerType||"KML"===na.type)){var nb=na.url;if(q.id){var db=q.id.findCredential(y.urlToObject(Mb.arcgisUrl).path);db&&(Ra=Mb.arcgisUrl.substring(Mb.arcgisUrl.indexOf("//")+2,Mb.arcgisUrl.indexOf("/",Mb.arcgisUrl.indexOf("//")+3)),Ma=Ra.split("."),Ma=Ma[Ma.length-2]+"."+Ma[Ma.length-1],Xa=nb.indexOf(Ma),-1<
Xa&&(nb="https://"+Ra+nb.substring(Xa+Ma.length),nb+="?token\x3d"+db.token))}Pa=new ic(nb,{id:na.id,visible:null!==na.visibility?na.visibility:!0,outSR:Ka,refreshInterval:na.refreshInterval});d.connect(Pa,"onLoad",function(){(na.opacity||0===na.opacity)&&Pa.setOpacity(na.opacity);g.isDefined(na.minScale)&&g.isDefined(na.maxScale)&&Pa.setScaleRange(na.minScale,na.maxScale);na.visibleFolders&&l.forEach(Pa.folders,function(gb){-1<l.indexOf(na.visibleFolders,gb.id)?Pa.setFolderVisibility(gb,!0):Pa.setFolderVisibility(gb,
!1)},this)})}else if(!na||"WebTiledLayer"!==na.layerType&&"WebTiledLayer"!==na.type)if(!na||"GeoRSS"!==na.layerType&&"GeoRSS"!==na.type)if(na&&("CSV"===na.layerType||"CSV"===na.type)&&na.url)Ka={layerDefinition:na.layerDefinition,columnDelimiter:na.columnDelimiter,id:na.id?na.id:null,visible:null!==na.visibility?na.visibility:!0,opacity:na.opacity,refreshInterval:na.refreshInterval},na.locationInfo&&(Ka.latitudeFieldName=na.locationInfo.latitudeFieldName,Ka.longitudeFieldName=na.locationInfo.longitudeFieldName),
!Sa.ignorePopups&&na.popupInfo&&(Ka.infoTemplate=new Wa(na.popupInfo)),Pa=new Zb(na.url,Ka);else if("VectorTileLayer"!==na.layerType||!na.styleUrl||na.resourceInfo&&na.resourceInfo instanceof Error)if(na.layerDefinition&&!na.url)Ka=u.fromJson(u.toJson(na)),delete Ka.id,delete Ka.opacity,delete Ka.visibility,Pa=new Q(Ka,{id:na.id,opacity:na.opacity,visible:na.visibility,outFields:["*"],autoGeneralize:!0}),Sa.ignorePopups||!Ka.popupInfo||Ka.disablePopup||Pa.setInfoTemplate(new Wa(Ka.popupInfo)),Na(Pa);
else if(L(na))Sa.bingMapsKey?(Ka=dc.MAP_STYLE_AERIAL_WITH_LABELS,I(na)?Ka=dc.MAP_STYLE_AERIAL:N(na)&&(Ka=dc.MAP_STYLE_ROAD),Pa=new dc({bingMapsKey:Sa.bingMapsKey,mapStyle:Ka,opacity:na.opacity,id:na.id}),d.connect(Pa,"onError",B.hitch(this,function(gb){gb.errors=gb.errors||[];gb.errors.push({message:"This application does not have a valid Bing Key for the Bing layer that is included in this map. [type:"+(gb?gb.layerType||gb.type:"")+"]"})},na))):(na.errors=na.errors||[],na.errors.push({message:"This application does not provide a Bing Key for the Bing layer that is included in this map. [type:"+
(na?na.layerType||na.type:"")+"]"}));else if(na.resourceInfo&&(na.resourceInfo.mapName||""===na.resourceInfo.mapName))Pa=!0===na.resourceInfo.singleFusedMapCache&&(na.baseMapLayer||Fa(na,Ra,Ka)&&O(na,Ma,Xa))?ca(na,Wa,Sa):wa(na,Wa,Sa);else if(na.resourceInfo&&na.resourceInfo.pixelSizeX)Pa=!0===na.resourceInfo.singleFusedMapCache&&"ArcGISImageServiceLayer"!==na.layerType&&(na.baseMapLayer||"Raster"===na.resourceInfo.cacheType||Fa(na,Ra,Ka)&&O(na,Ma,Xa))?ca(na,Wa,Sa):za(na,Wa,Sa);else if(na.resourceInfo&&
"Feature Layer"===na.resourceInfo.type){na.capabilities&&(na.resourceInfo.capabilities=na.capabilities);var mb;!1===Sa.editable?mb=!1:Sa.privileges&&-1===l.indexOf(Sa.privileges,"features:user:edit")&&q.id&&q.id.findCredential(na.url)&&(mb=!1);Pa=new Q(Ga(na.url),{resourceInfo:na.resourceInfo,opacity:na.opacity,visible:na.visibility,id:na.id,mode:na.mode===Q.MODE_SELECTION?Q.MODE_SELECTION:Q.MODE_AUTO,editable:mb,outFields:["*"],autoGeneralize:!0,refreshInterval:na.refreshInterval});Sa.ignorePopups||
!na.popupInfo||na.disablePopup||Pa.setInfoTemplate(new Wa(na.popupInfo));na.layerDefinition&&(na.layerDefinition.drawingInfo&&na.layerDefinition.drawingInfo.renderer&&(Ka=A.fromJson(na.layerDefinition.drawingInfo.renderer,{geometryType:Pa.geometryType}),Ka.isMaxInclusive=!0,Pa.setRenderer(Ka)),na.layerDefinition.drawingInfo&&na.layerDefinition.drawingInfo.labelingInfo&&(Ka=l.map(na.layerDefinition.drawingInfo.labelingInfo,function(gb){return new jc(gb)}),Pa.setLabelingInfo(Ka)),na.layerDefinition.definitionExpression&&
Pa.setDefinitionExpression(na.layerDefinition.definitionExpression),g.isDefined(na.layerDefinition.minScale)&&Pa.setMinScale(na.layerDefinition.minScale),g.isDefined(na.layerDefinition.maxScale)&&Pa.setMaxScale(na.layerDefinition.maxScale));Na(Pa)}else na.resourceInfo&&na.resourceInfo.streamUrls&&(Ka={resourceInfo:na.resourceInfo,opacity:na.opacity,visible:na.visibility,id:na.id},na.layerDefinition&&(nb=na.layerDefinition.drawingInfo,na.layerDefinition.definitionGeometry&&(db=db||{},db.geometry=na.layerDefinition.definitionGeometry),
g.isDefined(na.layerDefinition.definitionExpression)&&(db=db||{},db.where=na.layerDefinition.definitionExpression),g.isDefined(na.layerDefinition.maximumTrackPoints)&&(Ka.maximumTrackPoints=na.layerDefinition.maximumTrackPoints)),db&&(Ka.filter=db),na.purgeOptions&&(Ka.purgeOptions=na.purgeOptions),Pa=new zc(Ga(na.url),Ka),nb&&nb.renderer&&(Ka=nb.renderer,Pa.setRenderer(A.fromJson(Ka,{geometryType:na.resourceInfo.geometryType}))),nb&&nb.labelingInfo&&(Ka=l.map(nb.labelingInfo,function(gb){return new jc(gb)}),
Pa.setLabelingInfo(Ka)),Sa.ignorePopups||!na.popupInfo||na.disablePopup||Pa.setInfoTemplate(new Wa(na.popupInfo)),na.layerDefinition&&(g.isDefined(na.layerDefinition.minScale)&&Pa.setMinScale(na.layerDefinition.minScale),g.isDefined(na.layerDefinition.maxScale)&&Pa.setMaxScale(na.layerDefinition.maxScale)),e.once(Pa,"error",function(gb){na.errors.push({message:"Error loading stream layer. Check websocket url"})}));else Pa=new Yb(na.styleUrl,{id:na.id,minScale:na.minScale,maxScale:na.maxScale,opacity:na.opacity,
visible:na.visibility,resourceInfo:na.resourceInfo});else Pa=new cc(na.url,{id:na.id,opacity:na.opacity,outSpatialReference:Ka,refreshInterval:na.refreshInterval}),d.connect(Pa,"onLoad",function(){!1===na.visibility&&Pa.hide();g.isDefined(na.minScale)&&g.isDefined(na.maxScale)&&Pa.setScaleRange(na.minScale,na.maxScale);var gb=Pa.getFeatureLayers();l.forEach(gb,function(tb){na.pointSymbol&&"esriGeometryPoint"===tb.geometryType?(tb.renderer.symbol=w.fromJson(na.pointSymbol),1===gb.length&&(Pa.pointSymbol=
w.fromJson(na.pointSymbol))):na.lineSymbol&&"esriGeometryPolyline"===tb.geometryType?(tb.renderer.symbol=w.fromJson(na.lineSymbol),1===gb.length&&(Pa.polylineSymbol=w.fromJson(na.lineSymbol))):na.polygonSymbol&&"esriGeometryPolygon"===tb.geometryType&&(tb.renderer.symbol=w.fromJson(na.polygonSymbol),1===gb.length&&(Pa.polygonSymbol=w.fromJson(na.polygonSymbol)))})});else if(Pa=new ec(na.templateUrl,{id:na.id,visible:null!==na.visibility?na.visibility:!0,opacity:na.opacity,copyright:na.copyright,fullExtent:na.fullExtent&&
new C(na.fullExtent),initialExtent:na.fullExtent&&new C(na.fullExtent),subDomains:na.subDomains,tileInfo:na.tileInfo?new sc(na.tileInfo):null,refreshInterval:na.refreshInterval,wmtsInfo:na.wmtsInfo}),g.isDefined(na.minScale)||g.isDefined(na.maxScale))Pa.loaded?Pa.setScaleRange(na.minScale,na.maxScale):d.connect(Pa,"onLoad",function(){Pa.setScaleRange(na.minScale,na.maxScale)});Pa&&(Pa.arcgisProps={title:na.title},na.baseMapLayer&&(na.isReference?(Pa.attr("data-reference",!0),Pa._basemapGalleryLayerType=
"reference"):Pa._basemapGalleryLayerType="basemap"),Pa instanceof Q&&na.layerDefinition&&na.layerDefinition.featureReduction&&"cluster"===na.layerDefinition.featureReduction.type&&(Ka=na.layerDefinition.featureReduction,Ka.clusterSize&&(Ka.clusterSize=h.pt2px(Ka.clusterSize)),Ka.clusterRadius&&(Ka.clusterRadius=h.pt2px(Ka.clusterRadius)),Ka.popupInfo&&(Ka.infoTemplate=new G(Ka.popupInfo),delete Ka.popupInfo),Pa.setFeatureReduction(Ka)));return Pa}function Ha(na,Ra,Sa,Ka,Ma){l.forEach(na,function(Pa){Pa.layerObject=
ya(Pa,na,Ra,Sa,Ka,Ma)});var Xa=l.filter(na,function(Pa){return!Pa.isReference}),Wa=l.filter(na,function(Pa){return!!Pa.isReference});return na=Xa.concat(Wa)}function da(na){var Ra=null;na=na[0];na.url&&Z(na)&&na.resourceInfo.spatialReference&&(Ra=new x,na.resourceInfo.spatialReference.wkid&&(Ra.wkid=na.resourceInfo.spatialReference.wkid),na.resourceInfo.spatialReference.wkt&&(Ra.wkt=na.resourceInfo.spatialReference.wkt));L(na)||W(na)?Ra=new x({wkid:102100}):na&&("WMS"===na.layerType||"WMS"===na.type)&&
(Ra=new x({wkid:na.spatialReferences[0]}));return Ra}function Oa(na,Ra,Sa,Ka,Ma,Xa,Wa,Pa){l.forEach(Ra,function(Za){if(Z(Za)||Za&&"VectorTileLayer"===Za.layerType)Za.resourceInfo=na[Za.deferredsPos][1],delete Za.deferredsPos});Xa=Xa||da(Ra);Ra=Ha(Ra,Sa,Xa,Wa,Pa);Ma.callback(Ra);return Ma}function Na(na){!window.CanvasRenderingContext2D&&na.renderer&&"esri.renderer.HeatmapRenderer"===na.renderer.declaredClass&&na.setRenderer(A.fromJson({type:"simple",symbol:{color:[77,77,77,255],size:6,angle:0,xoffset:0,
yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}}}))}function Ca(na,Ra,Sa){na.message=na.message?na.message+(" [url:"+Ra+"]"):"[url:"+Ra+"]";Sa.push(na);n.defaults.io.errorHandler(na)}function V(na,Ra){var Sa=Ga(na);return b({url:Sa,content:{f:"json"},callbackParamName:"callback",error:function(Ka,Ma){Ca(Ka,Sa,Ra)}})}function oa(na){var Ra=Mb.arcgisUrl+"/"+na.itemId+"/data";return b({url:Ra,content:{f:"json"},callbackParamName:"callback",
error:function(Sa,Ka){na.errors=na.errors||[];Ca(Sa,Ra,na.errors)}})}function pa(na,Ra){return Oc.loadMetadata(na).otherwise(function(Sa){Ca(Sa,na,Ra);return Sa})}function Y(na,Ra,Sa){var Ka=new c;if(!(Sa.featureCollection&&Sa.featureCollection.layers||Sa.layers))return na.errors=na.errors||[],na.errors.push({message:"Invalid Feature Collection item data. [item id: "+na.itemId+"]"}),Ka.errback(),Ka;Sa.layers&&(Sa.featureCollection={layers:Sa.layers},delete Sa.layers,g.isDefined(Sa.showLegend)&&(Sa.featureCollection.showLegend=
Sa.showLegend,delete Sa.showLegend));ka(na,Sa.featureCollection,Ra).then(function(Ma){Sa.featureCollection=Ma;na.featureCollection&&na.featureCollection.layers?l.forEach(Sa.featureCollection.layers,function(Xa,Wa){Wa=na.featureCollection.layers[Wa];Wa.popupInfo||Wa.layerDefinition?Wa.layerDefinition?(g.isDefined(Wa.layerDefinition.minScale)&&g.isDefined(Wa.layerDefinition.maxScale)&&(Wa.layerDefinition.minScale!==Xa.layerDefinition.minScale||Wa.layerDefinition.maxScale!==Xa.layerDefinition.maxScale)&&
(delete Xa.layerDefinition.minScale,delete Xa.layerDefinition.maxScale),Wa.layerDefinition.drawingInfo&&u.toJson(Wa.layerDefinition.drawingInfo)!==u.toJson(Xa.layerDefinition.drawingInfo)&&delete Xa.layerDefinition.drawingInfo,Wa.layerDefinition.showLegend!==Xa.layerDefinition.showLegend&&delete Xa.layerDefinition.showLegend,Wa.layerDefinition=B.mixin(Wa.layerDefinition,Xa.layerDefinition)):Wa.layerDefinition=Xa.layerDefinition:(Wa.popupInfo=Xa.popupInfo,Wa.layerDefinition=Xa.layerDefinition);Wa.featureSet=
Xa.featureSet;Wa.nextObjectId=Xa.nextObjectId}):(na.featureCollection=na.featureCollection||{},na.featureCollection=B.mixin(na.featureCollection,Sa.featureCollection));Ka.callback(na)});return Ka}function ka(na,Ra,Sa){var Ka=new c;f(["./csv"],function(Ma){var Xa=[];l.forEach(Ra.layers,function(Wa){Wa.featureSet&&Wa.featureSet.features&&Wa.featureSet.features.length&&Wa.featureSet.features[0].geometry&&Wa.featureSet.features[0].geometry.spatialReference&&(Wa.deferredsPos=Xa.length,Xa.push(Ma.projectFeatureCollection(Wa,
Sa,Wa.featureSet.features[0].geometry.spatialReference)))});(new r(Xa)).addCallback(function(){l.forEach(Ra.layers,function(Wa){g.isDefined(Wa.deferredsPos)&&(Xa[Wa.deferredsPos].results&&Xa[Wa.deferredsPos].results.length?Wa=Xa[Wa.deferredsPos].results[0]:(Wa.errors=Wa.errors||[],Wa.errors.push({message:"Errors projecting feature collection. ["+na.title+" - "+Wa.layerDefinition.name+"]"})),delete Wa.deferredsPos)});Ka.callback(Ra)})});return Ka}function ta(na,Ra,Sa,Ka,Ma){var Xa=new c,Wa=new c,Pa=
[];l.forEach(na.operationalLayers,function(cb){cb.itemId&&"Feature Collection"==cb.type&&Pa.push(oa(cb).then(B.hitch(null,Y,cb,Sa)))});if(0===Pa.length)xa(na,Ra,Sa,Ka,Wa,Ma);else{var Za=new r(Pa);Za.addCallback(function(cb){xa(na,Ra,Sa,Ka,Wa,Ma)})}Wa.then(function(cb){Pa=[];l.forEach(cb,function(nb){nb=nb.layerObject;if(nb instanceof Q&&!nb.loaded&&!nb.loadError){var db=new c;e.once(nb,"load, error",function(){db.callback(nb)});Pa.push(db)}else nb&&"esri.layers.WFSLayer"===nb.declaredClass&&!nb.loadError&&
(db=new c,e.once(nb,"fromJsonComplete, error",function(mb){db.callback(nb)}),Pa.push(db))});if(Pa.length){var eb=new c;Za=new r(Pa);Za.addCallback(function(){eb.callback(cb)});return eb.promise}return cb}).then(function(cb){var eb=[];l.forEach(cb,function(nb){var db=nb.layerObject;db&&(db instanceof Q||"esri.layers.StreamLayer"===db.declaredClass)?db.loaded&&db.labelingInfo&&(nb.showLabels||db._collection?eb.push(db):db.setShowLabels&&db.setShowLabels(!1)):db&&"esri.layers.WFSLayer"===db.declaredClass&&
db.loaded&&db.labelingInfo&&eb.push(db)});eb.length?f(["../layers/LabelLayer"],function(nb){var db=new nb;l.forEach(eb,function(mb){db.addFeatureLayer(mb)});cb.push({layerObject:db});Xa.callback(cb)}):Xa.callback(cb)});return Xa}function xa(na,Ra,Sa,Ka,Ma,Xa){var Wa=[],Pa=[],Za=[];l.forEach(na.operationalLayers,function(cb,eb){if(cb.featureCollection&&cb.featureCollection.layers){var nb=cb.featureCollection.layers.length;l.forEach(cb.featureCollection.layers,function(db,mb){var gb=!0;cb.visibleLayers&&
-1==l.indexOf(cb.visibleLayers,mb)&&(gb=!1);db.visibility=(null!=cb.visibility?!!cb.visibility:!0)&&gb;db.opacity=cb.opacity;db.id=(cb.id||"operational"+eb)+"_"+mb;cb.title&&(db.title=1!==nb&&db.layerDefinition.name&&cb.title!==db.layerDefinition.name?cb.title+" - "+db.layerDefinition.name:cb.title);null==db.disablePopup&&(db.disablePopup=cb.disablePopup);Za.push(db)},this)}else Za.push(cb)});l.forEach(na.baseMap.baseMapLayers,function(cb,eb){cb.baseMapLayer=!0;cb.id=cb.id||"base"+eb;Wa.push(cb)});
l.forEach(Za,function(cb,eb){cb.id=cb.id||"operational"+eb;Wa.push(cb)});l.forEach(Wa,function(cb){var eb=!(!cb||"VectorTileLayer"!==cb.layerType);if(Z(cb)||eb)cb.deferredsPos=Pa.length,cb.errors=cb.errors||[],eb?Pa.push(pa(cb.styleUrl,cb.errors)):Pa.push(V(cb.url,cb.errors))});0===Pa.length?(Sa=Sa||da(Wa),Wa=Ha(Wa,Ra,Sa,Ka,Xa),Ma.callback(Wa)):(new r(Pa)).addCallback(function(cb){Oa(cb,Wa,Ra,Pa,Ma,Sa,Ka,Xa)});return Ma}function Da(na,Ra,Sa,Ka){var Ma=na.minScale,Xa=na.maxScale;if(10.1>=Sa.version&&
Ra)for(na=Ra.length-1;0<=na;na--){if(Ra[na].id==Ka)if(0==Ma&&0<Ra[na].minScale?Ma=Ra[na].minScale:0<Ma&&0==Ra[na].minScale?Ma=Sa.minScale:0<Ma&&0<Ra[na].minScale&&(Ma=Math.min(Ma,Ra[na].minScale)),Xa=Math.max(Sa.maxScale||0,Ra[na].maxScale||0),Sa.setScaleRange(Ma,Xa),-1<Ra[na].parentLayerId)Ka=Ra[na].parentLayerId;else break}else 10.1<Sa.version&&(l.forEach(na.layerInfos,function(Wa){Wa.id==Ka&&(0==Ma&&0<Wa.minScale?Ma=Wa.minScale:0<Ma&&0==Wa.minScale||0<Ma&&0<Wa.minScale&&(Ma=Math.min(Ma,Wa.minScale)),
Xa=Math.max(Xa||0,Wa.maxScale||0))}),Sa.setScaleRange(Ma,Xa))}function Ja(na,Ra,Sa,Ka){var Ma=na.url,Xa=na.__popupIds,Wa=na.__popupUrls,Pa=na.__popupWhereClauses,Za=na.__popupMinScales,cb=na.__popupMaxScales,eb=na.__resourceInfo,nb=[];l.forEach(na.__popups,function(db,mb){if(db){var gb=[];l.forEach(db.fieldInfos,function(Bb){"shape"!==Bb.fieldName.toLowerCase()&&gb.push(Bb.fieldName)});if(na.dynamicLayerInfos&&0<na.dynamicLayerInfos.length){var tb=l.filter(na.dynamicLayerInfos,function(Bb){return Xa[mb]==
Bb.id})[0].source;var Vb=new Q(Ma+"/dynamicLayer",{parentLayer:na,id:na.id+"_"+Xa[mb],source:tb,outFields:gb,mode:Q.MODE_SELECTION,infoTemplate:db&&new Sa(db),drawMode:!1,visible:na.visible,autoGeneralize:!0});var Ac=function(Bb,kc){0<Pa[Bb].length&&kc.setDefinitionExpression(Pa[Bb]);if(g.isDefined(Za[Bb])||g.isDefined(cb[Bb]))if(g.isDefined(na.minScale)||g.isDefined(na.maxScale)){var fc=na.minScale,lc=na.maxScale;0==fc&&0<Za[Bb]?fc=Za[Bb]:0<fc&&0==Za[Bb]||0<fc&&0<Za[Bb]&&(fc=Math.min(fc,Za[Bb]));
lc=Math.max(lc||0,cb[Bb]||0);kc.setScaleRange(fc,lc)}else kc.setScaleRange(Za[Bb],cb[Bb]);else Da(na,Ra||eb.layers,kc,Xa[Bb])};Vb.loaded?Ac(mb,Vb):d.connect(Vb,"onLoad",function(Bb){Ac(mb,Vb)})}else{var Cc=null,Bc=Ma+"/"+Xa[mb];if(Wa[mb].length)Bc=Wa[mb];else if(Ra)for(tb=0;tb<Ra.length;tb++)if(Ra[tb].id===Xa[mb]){Cc=Ra[tb];break}Vb=new Q(Ga(Bc),{parentLayer:na,id:na.id+"_"+Xa[mb],outFields:gb,mode:Q.MODE_SELECTION,infoTemplate:db&&new Sa(db),drawMode:!1,visible:na.visible,resourceInfo:Cc,autoGeneralize:!0});
Vb.loaded?(0<Pa[mb].length&&Vb.setDefinitionExpression(Pa[mb]),Da(na,Ra||eb.layers,Vb,Xa[mb])):d.connect(Vb,"onLoad",function(Bb){0<Pa[mb].length&&Vb.setDefinitionExpression(Pa[mb]);Da(na,Ra||eb.layers,Bb,Xa[mb])})}nb.push(Vb)}});0<nb.length&&(d.connect(na,"onVisibilityChange",B.hitch(this,function(db,mb){l.forEach(db,function(gb){mb?gb.show():gb.hide()})},nb)),d.connect(Ka,"onLayerRemove",B.hitch(this,function(db,mb,gb){db.id===gb.id&&l.forEach(mb,function(tb){Ka.removeLayer(tb)})},na,nb)));delete na.__popups;
delete na.__popupIds;delete na.__popupUrls;delete na.__popupWhereClauses;delete na.__popupMinScales;delete na.__popupMaxScales;delete na.__resourceInfo;return nb}function La(na){return b({url:Ga(na.url+"/layers"),content:{f:"json"},callbackParamName:"callback",error:function(){}})}function Ya(na,Ra,Sa){var Ka=[];l.forEach(na,function(Xa){var Wa=Xa.__popups;Wa&&1<Wa.length&&10<=Xa.version&&(Xa.__deferredsPos=Ka.length,Ka.push(La(Xa)))});var Ma=[];0<Ka.length?(new r(Ka)).addCallback(function(Xa){l.forEach(na,
function(Wa){Wa.__popups&&0<Wa.__popups.length&&(Wa.__deferredsPos||0===Wa.__deferredsPos?(Ma=Ma.concat(Ja(Wa,Xa[Wa.__deferredsPos][1].layers,Sa,Ra)),delete Wa.__deferredsPos):Ma=Ma.concat(Ja(Wa,null,Sa,Ra)))});Ra.addLayers(Ma)}):(l.forEach(na,function(Xa){Xa.__popups&&0<Xa.__popups.length&&(Ma=Ma.concat(Ja(Xa,null,Sa,Ra)))}),Ra.addLayers(Ma))}function Ua(na){l.forEach(na,function(Ra){var Sa=Ra.layer;Sa.toJson&&(Ra=Sa.toJson(),Ra.featureSet&&Sa.name&&-1<Sa.name.indexOf("Text")&&l.forEach(Ra.featureSet.features,
function(Ka,Ma){Ka.attributes.TEXT&&(Ma=Sa.graphics[Ma],Ma.symbol.setText(Ka.attributes.TEXT),Ka.symbol.horizontalAlignment&&(Ma.symbol.align=Ka.symbol.horizontalAlignment),Ma.setSymbol(Ma.symbol),Ma.setAttributes(Ka.attributes))},this))})}function Ta(na){var Ra=6;l.forEach(na,function(Sa){if(Sa=Sa.renderer)"esri.renderer.SimpleRenderer"===Sa.declaredClass?((Sa=Sa.symbol)&&Sa.xoffset&&(Ra=Math.max(Ra,Math.abs(Sa.xoffset))),Sa&&Sa.yoffset&&(Ra=Math.max(Ra,Math.abs(Sa.yoffset)))):"esri.renderer.UniqueValueRenderer"!==
Sa.declaredClass&&"esri.renderer.ClassBreaksRenderer"!==Sa.declaredClass||l.forEach(Sa.infos,function(Ka){(Ka=Ka.symbol)&&Ka.xoffset&&(Ra=Math.max(Ra,Math.abs(Ka.xoffset)));Ka&&Ka.yoffset&&(Ra=Math.max(Ra,Math.abs(Ka.yoffset)))})});return Ra}function ab(na){var Ra=this,Sa=Ra.infoWindow,Ka=na.graphic;if(Ra.loaded){Sa.hide();Sa.clearFeatures();var Ma=[];l.forEach(Ra.graphicsLayerIds,function(db){(db=Ra.getLayer(db))&&db instanceof Q&&db.loaded&&db.visible&&(db.clearSelection(),db.infoTemplate&&!db.suspended&&
Ma.push(db))});l.forEach(Ra.layerIds,function(db){(db=Ra.getLayer(db))&&(-1!==db.declaredClass.indexOf("ArcGISImageServiceLayer")||-1!==db.declaredClass.indexOf("RasterXLayer"))&&db.loaded&&db.visible&&db.infoTemplate&&Ma.push(db)});Ka=Ka&&Ka.getInfoTemplate()?Ka:null;if(Ma.length||Ka){var Xa=Ta(Ma),Wa=na.screenPoint,Pa=Ra.toMap(new E(Wa.x-Xa,Wa.y+Xa));Xa=Ra.toMap(new E(Wa.x+Xa,Wa.y-Xa));var Za=new C(Pa.x,Pa.y,Xa.x,Xa.y,Ra.spatialReference),cb=new H;cb.geometry=Za;cb.timeExtent=Ra.timeExtent;var eb=
!0;Pa=l.map(Ma,function(db){db=db&&db.isFeatureReductionActive&&db.isFeatureReductionActive()?db.getFeatureReductionLayer():db;if(-1!==db.declaredClass.indexOf("ArcGISImageServiceLayer")){cb.geometry=na.mapPoint;eb=!1;var mb=db.queryVisibleRasters(cb,{rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0});mb.addCallback(function(){return db.getVisibleRasters()})}else if(-1!==db.declaredClass.indexOf("RasterXLayer"))mb=db.fetchPopupFromTiles({geometry:na.mapPoint});else if("function"===
typeof db.selectFeatures)mb=db.selectFeatures(cb),mb.addCallback(function(){return db.getSelectedFeatures()});else{mb=new c;var gb=l.filter(db.graphics,function(tb){return tb&&tb.visible&&Za.intersects(tb.geometry)});mb.resolve(gb)}return mb});Ka&&(Xa=new c,Xa.callback([Ka]),Pa.splice(0,0,Xa));if(!l.some(Pa,function(db){return-1===db.fired})){var nb=Ka?1:0;l.forEach(Ma,function(db){nb=-1!==db.declaredClass.indexOf("ArcGISImageServiceLayer")?nb+db.getVisibleRasters().length:-1!==db.declaredClass.indexOf("RasterXLayer")?
nb+db.getPopupFromTiles().length:nb+db.getSelectedFeatures().length});if(!nb)return}Sa.setFeatures(Pa);Sa.show(na.mapPoint,{closestFirst:eb})}}}function fb(na,Ra){var Sa=Ra.mapOptions||{};if(!Sa.infoWindow){var Ka=new F({visibleWhenEmpty:!1},m.create("div"));Sa.infoWindow=Ka}g.isDefined(Sa.showInfoWindowOnClick)||Ra.usePopupManager||(Sa.showInfoWindowOnClick=!1);na=new v(na,Sa);d.connect(na,"onLayersAddResult",Ua);return na}function kb(na,Ra,Sa,Ka,Ma,Xa){if(Ka.map){var Wa=Ka.map;var Pa=Ka.clickEventHandle;
var Za=Ka.clickEventListener;var cb=Ka.errors}else{var eb=Sa.itemData;!Ma.mapOptions.backgroundColor&&eb.background&&eb.background.color&&null!=eb.background.color[0]&&(Ma.mapOptions.backgroundColor=k.toDojoColor(eb.background.color));Wa=fb(Ka,Ma);Ma.ignorePopups||Ma.disableClickBehavior||Ma.usePopupManager||(Pa=d.connect(Wa,"onClick",ab),Za=ab)}Wa.addLayers(na);Ma.ignorePopups||Ma.usePopupManager||Ya(na,Wa,Ma._clazz);var nb=cb||[];l.forEach(Ra,function(db){db.errors&&(nb=nb.concat(db.errors))},this);
Wa.loaded?Xa.callback({map:Wa,itemInfo:Sa,errors:nb,clickEventHandle:Pa,clickEventListener:Za}):d.connect(Wa,"onLoad",function(){Xa.callback({map:Wa,itemInfo:Sa,errors:nb,clickEventHandle:Pa,clickEventListener:Za})})}function qb(na,Ra,Sa,Ka,Ma){var Xa=[];l.forEach(Ma,function(Za){B.isArray(Za.layerObject)?l.forEach(Za.layerObject,function(cb){Xa.push(cb)}):Xa.push(Za.layerObject)});if(L(Ma[0]))var Wa=setInterval(function(){if(Ma[0].layerObject&&Ma[0].layerObject.loaded)clearInterval(Wa),ob(na,Ra,
Sa,Ka,Ma,Xa);else if(Ma[0].errors){clearInterval(Wa);var Za="";Ma[0].errors&&Ma[0].errors.length&&(Za=" ("+Ma[0].errors[0].message+")");Ka.errback(Error(P.arcgis.utils.baseLayerError+Za))}},10);else if(!Xa[0]&&Ma[0].baseMapLayer){var Pa="";Ma[0].errors&&Ma[0].errors.length&&(Pa=" ("+Ma[0].errors[0].message+")");Ka.errback(Error(P.arcgis.utils.baseLayerError+Pa))}else ob(na,Ra,Sa,Ka,Ma,Xa)}function ob(na,Ra,Sa,Ka,Ma,Xa){try{var Wa=Sa.mapOptions||{};Sa.mapOptions=Wa;Xa=l.filter(Xa,g.isDefined);if(Ra.map||
Wa.extent)kb(Xa,Ma,na,Ra,Sa,Ka);else{var Pa=Xa[0].spatialReference;if(Wa.center&&(null!=Wa.zoom||Wa.scale)&&(B.isArray(Wa.center)&&(Wa.center=new D(Wa.center)),z.canProject(Wa.center,Pa))){kb(Xa,Ma,na,Ra,Sa,Ka);return}var Za=na.item;if(Za&&Za.extent&&Za.extent.length){var cb=new C(Za.extent[0][0],Za.extent[0][1],Za.extent[1][0],Za.extent[1][1],new x({wkid:4326}));4326===Pa.wkid?(Wa.extent=cb,kb(Xa,Ma,na,Ra,Sa,Ka)):900913===Pa.wkid||102100===Pa.wkid||102113===Pa.wkid||3857===Pa.wkid?(cb.xmin=Math.max(cb.xmin,
-180),cb.xmax=Math.min(cb.xmax,180),cb.ymin=Math.max(cb.ymin,-89.99),cb.ymax=Math.min(cb.ymax,89.99),Wa.extent=z.geographicToWebMercator(cb),kb(Xa,Ma,na,Ra,Sa,Ka)):Sa.geometryServiceURL||n.defaults.geometryService?(Sa.geometryServiceURL?new J(Sa.geometryServiceURL):n.defaults.geometryService).project([cb],Pa,function(eb){eb=eb[0];Wa.extent=Wa.extent||eb;kb(Xa,Ma,na,Ra,Sa,Ka)},function(){kb(Xa,Ma,na,Ra,Sa,Ka)}):Ka.errback(Error(P.arcgis.utils.geometryServiceError))}else kb(Xa,Ma,na,Ra,Sa,Ka)}}catch(eb){Ka.errback(eb)}}
function wb(na){var Ra=[];l.forEach(na.operationalLayers,function(Sa){Sa.featureCollection?Ra.push({featureCollection:Sa.featureCollection,visibility:null!=Sa.visibility?!!Sa.visibility:!0,title:Sa.title}):Sa.layerObject&&Ra.push({layer:Sa.layerObject,visibility:null!=Sa.visibility?!!Sa.visibility:!0,title:Sa.title})});return Ra}function Fb(na){var Ra=[],Sa=na.baseMap.baseMapLayers;na.operationalLayers&&(Sa=Sa.concat(na.operationalLayers));l.forEach(Sa,function(Ka){var Ma={};if(Ka.featureCollection&&
(!Ka||"CSV"!==Ka.layerType&&"CSV"!==Ka.type))!0===Ka.featureCollection.showLegend&&l.forEach(Ka.featureCollection.layers,function(Pa){if(!1!==Pa.showLegend){var Za=Pa.layerObject.renderer;Ma={layer:Pa.layerObject,title:Ka.title,defaultSymbol:Za&&Za.defaultSymbol&&Za.defaultLabel?!0:!1};1<Ka.featureCollection.layers.length&&(Ma.title+=" - "+Pa.layerDefinition.name);Ra.push(Ma)}});else if(Ka.baseMapLayer&&!0===Ka.showLegend&&Ka.layerObject||!Ka.baseMapLayer&&!1!==Ka.showLegend&&Ka.layerObject&&!(Ka.layerObject instanceof
Q&&Ka.layerObject.mode===Q.MODE_SELECTION)){var Xa=Ka.layerObject.renderer,Wa=Ka.layerObject.declaredClass;Xa=!Xa||Xa&&Xa.defaultSymbol&&Xa.defaultLabel?!0:!1;if(10.1>Ka.layerObject.version&&("esri.layers.ArcGISDynamicMapServiceLayer"===Wa||"esri.layers.ArcGISTiledMapServiceLayer"===Wa)||"esri.layers.ArcGISImageServiceLayer"===Wa)Xa=!0;Ma={layer:Ka.layerObject,title:Ka.title,defaultSymbol:Xa};Ka.layers&&(Wa=l.map(l.filter(Ka.layers,function(Pa){return!1===Pa.showLegend}),function(Pa){return Pa.id}),
Wa.length&&(Ma.hideLayers=Wa));Ra.push(Ma)}});return Ra}function yb(na,Ra){function Sa(Pa,Za){l.forEach(Pa,function(cb,eb){switch(cb){case "../layers/ArcGISDynamicMapServiceLayer":Eb=Za[eb];break;case "../layers/ArcGISImageServiceLayer":Hb=Za[eb];break;case "../layers/ArcGISImageServiceVectorLayer":Pb=Za[eb];break;case "../layers/CSVLayer":Zb=Za[eb];break;case "../layers/DynamicLayerInfo":Qb=Za[eb];break;case "../layers/GeoRSSLayer":cc=Za[eb];break;case "../layers/ImageParameters":Ub=Za[eb];break;
case "../layers/ImageServiceParameters":wc=Za[eb];break;case "../layers/KMLLayer":ic=Za[eb];break;case "../layers/LabelClass":jc=Za[eb];break;case "../layers/LayerDrawingOptions":xc=Za[eb];break;case "../layers/MosaicRule":yc=Za[eb];break;case "../layers/OpenStreetMapLayer":Dc=Za[eb];break;case "../layers/RasterFunction":Nc=Za[eb];break;case "../layers/RasterXLayer":Ec=Za[eb];break;case "../layers/StreamLayer":zc=Za[eb];break;case "../layers/TileInfo":sc=Za[eb];break;case "../layers/VectorTileLayer":Yb=
Za[eb];break;case "../layers/vectorTiles/layers/support/vectorTileLayerLoader":Oc=Za[eb];break;case "../virtualearth/VETiledLayer":dc=Za[eb];break;case "../layers/WebTiledLayer":ec=Za[eb];break;case "../layers/WFSLayer":Xb=Za[eb];break;case "../layers/WMSLayer":Mc=Za[eb];break;case "../layers/WMSLayerInfo":Nb=Za[eb]}})}var Ka=new c;na=na.itemData;Ra=[];na.baseMap&&na.baseMap.baseMapLayers&&(Ra=Ra.concat(na.baseMap.baseMapLayers));na.operationalLayers&&(Ra=Ra.concat(na.operationalLayers));na=l.map(Ra,
function(Pa){return Pa&&Pa.layerType});var Ma=[],Xa=[];Ra=!1;for(var Wa=0;Wa<na.length;Wa++){switch(na[Wa]){case "ArcGISFeatureLayer":-1===l.indexOf(Ma,"../layers/LabelClass")&&Ma.push("../layers/LabelClass");break;case "ArcGISImageServiceLayer":case "ArcGISTiledImageServiceLayer":-1===l.indexOf(Ma,"../layers/ArcGISImageServiceLayer")&&(Ma.push("../layers/ArcGISImageServiceLayer"),Xa.push("../layers/ImageServiceParameters"),Xa.push("../layers/MosaicRule"),Xa.push("../layers/RasterFunction"),Ma.push("../layers/RasterXLayer"));
break;case "ArcGISImageServiceVectorLayer":-1===l.indexOf(Ma,"../layers/ArcGISImageServiceVectorLayer")&&(Ma.push("../layers/ArcGISImageServiceVectorLayer"),Xa.push("../layers/ImageServiceParameters"),Xa.push("../layers/MosaicRule"),Xa.push("../layers/RasterFunction"));break;case "ArcGISMapServiceLayer":case "ArcGISTiledMapServiceLayer":-1===l.indexOf(Ma,"../layers/ArcGISDynamicMapServiceLayer")&&(Ma.push("../layers/ArcGISDynamicMapServiceLayer"),Xa.push("../layers/DynamicLayerInfo"),Xa.push("../layers/ImageParameters"),
Xa.push("../layers/LayerDrawingOptions"));break;case "ArcGISStreamLayer":-1===l.indexOf(Ma,"../layers/StreamLayer")&&Ma.push("../layers/StreamLayer");-1===l.indexOf(Ma,"../layers/LabelClass")&&Ma.push("../layers/LabelClass");break;case "BingMapsAerial":case "BingMapsHybrid":case "BingMapsRoad":-1===l.indexOf(Ma,"../virtualearth/VETiledLayer")&&Ma.push("../virtualearth/VETiledLayer");break;case "CSV":-1===l.indexOf(Ma,"../layers/CSVLayer")&&(Ma.push("../layers/CSVLayer"),Xa.push("./csv"));break;case "GeoRSS":-1===
l.indexOf(Ma,"../layers/GeoRSSLayer")&&Ma.push("../layers/GeoRSSLayer");break;case "KML":-1===l.indexOf(Ma,"../layers/KMLLayer")&&Ma.push("../layers/KMLLayer");break;case "OpenStreetMap":-1===l.indexOf(Ma,"../layers/OpenStreetMapLayer")&&Ma.push("../layers/OpenStreetMapLayer");break;case "VectorTileLayer":-1===l.indexOf(Ma,"../layers/VectorTileLayer")&&Ma.push("../layers/VectorTileLayer");-1===l.indexOf(Xa,"../layers/vectorTiles/layers/support/vectorTileLayerLoader")&&Xa.push("../layers/vectorTiles/layers/support/vectorTileLayerLoader");
break;case "WebTiledLayer":-1===l.indexOf(Ma,"../layers/WebTiledLayer")&&(Ma.push("../layers/WebTiledLayer"),Xa.push("../layers/TileInfo"));break;case "WFS":-1===l.indexOf(Ma,"../layers/WFSLayer")&&Ma.push("../layers/WFSLayer");break;case "WMS":-1===l.indexOf(Ma,"../layers/WMSLayer")&&(Ma.push("../layers/WMSLayer"),Xa.push("../layers/WMSLayerInfo"));break;default:Ra=!0}if(Ra)break}Ra&&(Ma=$b,Xa=Fc);Ma.length?f(Ma,function(){Sa(Ma,arguments);Xa.length?f(Xa,function(){Sa(Xa,arguments);Ka.resolve()}):
Ka.resolve()}):Ka.resolve();return Ka}function lb(na){na=na.itemData;var Ra=function(Ka,Ma){"GroupLayer"===Ka.layerType?l.forEach(Ka.layers,function(Xa){Xa.visibility=!1!==Ka.visibility&&!1!==Xa.visibility;Xa.opacity=g.isDefined(Ka.opacity)?g.isDefined(Xa.opacity)?Xa.opacity*Ka.opacity:Ka.opacity:Xa.opacity;Ra(Xa,Ma)}):Ma.push(Ka)},Sa=[];l.forEach(na.operationalLayers,function(Ka){Ra(Ka,Sa)});na.operationalLayers=Sa}function Db(na,Ra,Sa,Ka){lb(Ka);var Ma=Ka.itemData;Ma.baseMap&&Ma.baseMap.baseMapLayers&&
Ma.baseMap.baseMapLayers.length&&(Ma.baseMap.baseMapLayers[0].firstLayer=!0);var Xa=Ra.layerMixins,Wa=Xa&&Xa.length;if(Wa){var Pa=function(Za){for(var cb=0;cb<Wa;cb++){var eb=Xa[cb];if(eb.mixin)if(eb.hasOwnProperty("id")){if(Za.id===eb.id){B.mixin(Za,eb.mixin);break}}else if(Za.url===eb.url){B.mixin(Za,eb.mixin);break}}};l.forEach(Ma.baseMap&&Ma.baseMap.baseMapLayers,Pa);l.forEach(Ma.operationalLayers,Pa)}yb(Ka,Ra).then(function(){return fa(Ka,Ra)}).then(function(){return X(Ka,Ra)}).then(function(Za){var cb=
Za[0],eb=Za[1];if(cb.itemData.operationalLayers&&0!==cb.itemData.operationalLayers.length){var nb=new c,db=cb.itemData.baseMap.baseMapLayers.slice(),mb=l.filter(cb.itemData.baseMap.baseMapLayers,function(gb){return!gb.isReference});Za={item:cb.item,itemData:{baseMap:{baseMapLayers:mb},background:B.clone(cb.itemData.background)}};cb.itemData.baseMap.baseMapLayers=l.filter(cb.itemData.baseMap.baseMapLayers,function(gb){return gb.isReference});M(Za,eb).addCallback(function(gb){ta(gb.itemData,eb).addCallback(B.hitch(null,
qb,gb,na,eb,nb))});nb.then(function(gb){M(cb,eb).addCallback(function(tb){ta(tb.itemData,eb,gb.map.spatialReference,mb,gb.map).addCallback(function(Vb){tb.itemData.baseMap.baseMapLayers=db;qb(tb,gb,eb,Sa,Vb)})})},B.hitch(Sa,Sa.errback))}else M(cb,eb).addCallback(function(gb){ta(gb.itemData,eb).addCallback(B.hitch(null,qb,gb,na,eb,Sa))})})}function Sb(na,Ra){"undefined"===typeof Ra&&(Ra=!0);Mb._arcgisUrl&&0<Mb._arcgisUrl.length&&(Mb.arcgisUrl=Mb._arcgisUrl);var Sa={},Ka=new c;b({url:Mb.arcgisUrl+"/"+
na,content:{f:"json"},callbackParamName:"callback",load:function(Ma){Sa.item=Ma;Ra?b({url:Mb.arcgisUrl+"/"+na+"/data",content:{f:"json"},callbackParamName:"callback",load:function(Xa){Sa.itemData=Xa;Ka.callback(Sa)},error:function(Xa){Ka.errback(Xa)}}):Ka.callback(Sa)},error:function(Ma){Ka.errback(Ma)}});return Ka}var Eb,Hb,Pb,Zb,Qb,cc,Ub,wc,ic,jc,xc,yc,Dc,Nc,Ec,zc,sc,Yb,Oc,dc,ec,Xb,Mc,Nb,$b="../layers/ArcGISDynamicMapServiceLayer ../layers/ArcGISImageServiceLayer ../layers/ArcGISImageServiceVectorLayer ../layers/CSVLayer ../layers/GeoRSSLayer ../layers/KMLLayer ../layers/LabelClass ../layers/OpenStreetMapLayer ../layers/RasterXLayer ../layers/StreamLayer ../layers/VectorTileLayer ../virtualearth/VETiledLayer ../layers/WebTiledLayer ../layers/WFSLayer ../layers/WMSLayer".split(" "),
Fc="./csv ../layers/DynamicLayerInfo ../layers/ImageParameters ../layers/ImageServiceParameters ../layers/LayerDrawingOptions ../layers/MosaicRule ../layers/RasterFunction ../layers/TileInfo ../layers/vectorTiles/layers/support/vectorTileLayerLoader ../layers/WMSLayerInfo".split(" ");var Mb={arcgisUrl:y.getProtocolForWebResource()+"//www.arcgis.com/sharing/rest/content/items",getItem:Sb,createMap:function(na,Ra,Sa){var Ka=new c;Sa=Sa||{};var Ma=Sa.infoTemplateClass;Sa._clazz=Ma&&(B.isObject(Ma)?Ma:
B.getObject(Ma))||G;B.isString(na)?Sb(na).addCallback(B.hitch(null,Db,Ra,Sa,Ka)).addErrback(B.hitch(Ka,Ka.errback)):Db(Ra,Sa,Ka,na);Ka.addCallback(function(Xa){var Wa=Xa.map;Wa&&(Wa.tables=B.getObject("itemInfo.itemData.tables",!1,Xa)||[])});return Ka},getLayerList:function(na){return na&&na.itemInfo&&na.itemInfo.itemData?wb(na.itemInfo.itemData):[]},getLegendLayers:function(na){return na&&na.itemInfo&&na.itemInfo.itemData?Fb(na.itemInfo.itemData):[]},_arcgisUrl:null,_getItemProps:M,_getItemData:aa,
_getBingKey:ia,_portalUrlResponse:ea,_portalUrlFailure:ha,_processFSItemProperties:R,_processSSItemProperties:S,_getLayers:ta,_preBuildLayerObjects:Oa,_buildLayerObjects:Ha,_preCreateMap:qb,_getMapSR:da,_createMap:kb,_addSelectionLayers:Ya,_createSelectionFeatureLayers:Ja,_getServiceInfo:V,_getFeatureCollectionItem:oa,_mergeFeatureCollectionItem:Y,_projectFeatureCollection:ka,_getLayersInfo:La,_initLayer:ya,_loadAsCached:ca,_loadAsDynamic:wa,_processPopups:Aa,_onLayersAddResult:Ua,_sameSpatialReferenceAsBasemap:Fa,
_sameTilingSchemeAsBasemap:O,_showPopup:ab,_calculateClickTolerance:Ta,_getVisibleFeatureLayers:ja,_updateLayerScaleInfo:Da,_checkUrl:Ga,_isHostedService:Ea,_isAgolService:va,_getLegendLayers:Fb};B.setObject("arcgis.utils",Mb,q);return Mb})},"esri/map":function(){define("require dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/event dojo/on dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/a11yclick dijit/registry ./kernel ./config ./sniff ./lang ./_coremap ./MapNavigationManager dojo/i18n!./nls/jsapi".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E,C,z){var w={up:"panUp",right:"panRight",down:"panDown",left:"panLeft"},A={upperRight:"panUpperRight",lowerRight:"panLowerRight",lowerLeft:"panLowerLeft",upperLeft:"panUpperLeft"},G=d.connect,F=d.disconnect,H=q.create,J=k.set,K=c.hitch,Q=n.getMarginBox,P=B.deprecated,I=c.mixin,N=0;B=l(E,{declaredClass:"esri.Map",constructor:function(L,W){W=W||{};I(this,{_slider:null,_navDiv:null,_mapParams:I({attributionWidth:.45,slider:!0,nav:!1,logo:!0,sliderStyle:"small",
sliderPosition:"top-left",sliderOrientation:"vertical",autoResize:!0},W)});I(this,{isMapNavigation:null!=W.isMapNavigation?W.isMapNavigation:!0,isDoubleClickZoom:null!=W.isDoubleClickZoom?W.isDoubleClickZoom:!0,isClickRecenter:null!=W.isClickRecenter?W.isClickRecenter:!0,isPan:null!=W.isPan?W.isPan:!0,isRubberBandZoom:null!=W.isRubberBandZoom?W.isRubberBandZoom:!0,isPinchZoom:null!=W.isPinchZoom?W.isPinchZoom:!0,isKeyboardNavigation:null!=W.isKeyboardNavigation?W.isKeyboardNavigation:!0,isScrollWheel:null!=
W.isScrollWheel?W.isScrollWheel:!0,isShiftDoubleClickZoom:!1,isScrollWheelZoom:!1,isPanArrows:!1,isZoomSlider:!1});c.isFunction(x._css)&&(x._css=x._css(this._mapParams.force3DTransforms),this.force3DTransforms=this._mapParams.force3DTransforms);L=y("esri-transforms")&&y("esri-transitions");this.navigationMode=this._mapParams.navigationMode||L&&"css-transforms"||"classic";"css-transforms"!==this.navigationMode||L||(this.navigationMode="classic");this.fadeOnZoom=D.isDefined(this._mapParams.fadeOnZoom)?
this._mapParams.fadeOnZoom:"css-transforms"===this.navigationMode;"css-transforms"!==this.navigationMode&&(this.fadeOnZoom=!1);this.setMapCursor("default");this.smartNavigation=W&&W.smartNavigation;if(!(D.isDefined(this.smartNavigation)||!y("mac")||y("esri-touch")||y("esri-pointer")||3.5>=y("ff"))){var Z=navigator.userAgent.match(/Mac\s+OS\s+X\s+([\d]+)(\.|_)([\d]+)\D/i);Z&&D.isDefined(Z[1])&&D.isDefined(Z[3])&&(L=parseInt(Z[1],10),Z=parseInt(Z[3],10),this.smartNavigation=10<L||10===L&&6<=Z)}this.showAttribution=
D.isDefined(this._mapParams.showAttribution)?this._mapParams.showAttribution:!0;this._onLoadHandler_connect=G(this,"onLoad",this,"_onLoadInitNavsHandler");var aa=H("div",{class:"esriControlsBR"+(this._mapParams.nav?" withPanArrows":"")},this.root);if(this.showAttribution)if(L=c.getObject("esri.dijit.Attribution",!1))this._initAttribution(L,aa);else{var ia=N++,R=this;this._rids&&this._rids.push(ia);f(["./dijit/Attribution"],function(S){var M=R._rids?u.indexOf(R._rids,ia):-1;-1!==M&&(R._rids.splice(M,
1),R._initAttribution(S,aa))})}this._mapParams.logo&&(L={},6===y("ie")&&(L.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+f.toUrl("./images/map/logo-med.png")+"')"),this._ogol=H("div",{style:L,tabIndex:"0",title:"Esri"},aa),this._setLogoSize(),this._onMapResizeLogo_connect=G(this,"onResize",this,"_setLogoSize"),this._ogol_connect=G(this._ogol,g,this,"_openLogoLink"));this.navigationManager=new C(this);W&&W.basemap&&(this._onLoadFix=
!0,this.setBasemap(W.basemap),this._onLoadFix=!1);if(this.autoResize=this._mapParams.autoResize)W=this._getEnclosingResizableWidget(this.container)||window,L=this.resize,this._rszSignal=e.pausable(W,"resize",L),this._oriSignal=e.pausable(window,"orientationchange",L),r.after(W,"resize",L,!0),this._startResizeTimer()},_startResizeTimer:function(){clearTimeout(this._persistentTimer);this._persistentTimer=setTimeout(this._timedResize,2*this.resizeDelay)},_getEnclosingResizableWidget:function(L){var W=
b.getEnclosingWidget(L);return W?W.resize?W:this._getEnclosingResizableWidget(L.parentNode):W},_setLogoSize:function(){this._ogol&&(25E4>this.root.clientWidth*this.root.clientHeight?(h.remove(this._ogol,"logo-med"),h.add(this._ogol,"logo-sm")):(h.remove(this._ogol,"logo-sm"),h.add(this._ogol,"logo-med")))},_initAttribution:function(L,W){W=H("span",{class:"esriAttribution"},W,"first");J(W,"maxWidth",Math.floor(this.width*this._mapParams.attributionWidth)+"px");this._connects.push(G(W,g,function(){h.contains(this,
"esriAttributionOpen")?h.remove(this,"esriAttributionOpen"):this.scrollWidth>this.clientWidth&&h.add(this,"esriAttributionOpen")}));this.attribution=new L({map:this},W)},_cleanUp:function(){this.disableMapNavigation();this.navigationManager.destroy();var L=this._slider;L&&L.destroy&&!L._destroyed&&L.destroy();L=this._navDiv;var W=this.attribution;L&&q.destroy(L);W&&W.destroy();this._connects.push(this._slider_connect,this._ogol_connect,this._rszSignal,this._oriSignal);u.forEach(this._connects,F);
clearInterval(this._persistentTimer);this.attribution=this.navigationManager=this._rids=this._connects=this._slider_connect=this._ogol_connect=this._rszSignal=this._oriSignal=this._persistentTimer=null;this.inherited("_cleanUp",arguments)},_isPanningOrZooming:function(){return this.__panning||this.__zooming},_canZoom:function(L){var W=this.getLevel();return!this.__tileInfo||!(W===this.getMinZoom()&&0>L||W===this.getMaxZoom()&&0<L)},_onLoadInitNavsHandler:function(){this._evalMapNavigation();this._createNav();
if("small"===this._mapParams.sliderStyle||!this._createSlider)this._createSimpleSlider();else if(this._mapParams.slider){var L=-1!==this._getSliderClass(!0).indexOf("Horizontal");L=[L?"dijit.form.HorizontalSlider":"dijit.form.VerticalSlider",L?"dijit.form.HorizontalRule":"dijit.form.VerticalRule",L?"dijit.form.HorizontalRuleLabels":"dijit.form.VerticalRuleLabels"];if(u.some(L,function(aa){return!c.getObject(aa,!1)})){L=u.map(L,function(aa){return aa.replace(/\./g,"/")});var W=N++,Z=this;this._rids&&
this._rids.push(W);f(L,function(){var aa=Z._rids?u.indexOf(Z._rids,W):-1;-1!==aa&&(Z._rids.splice(aa,1),Z._createSlider.apply(Z,arguments))})}else L=u.map(L,function(aa){return c.getObject(aa,!1)}),this._createSlider.apply(this,L)}F(this._onLoadHandler_connect)},_createNav:function(){if(this._mapParams.nav){var L,W=h.add,Z=this.id;this._navDiv=H("div",{id:Z+"_navdiv"},this.root);W(this._navDiv,"navDiv");var aa=this.width/2,ia=this.height/2;for(L in w){var R=w[L];var S=H("div",{id:Z+"_pan_"+L},this._navDiv);
W(S,"fixedPan "+R);if("up"===L||"down"===L){var M=parseInt(Q(S).w,10)/2;J(S,{left:aa-M+"px",zIndex:30})}else M=parseInt(Q(S).h,10)/2,J(S,{top:ia-M+"px",zIndex:30});this._connects.push(G(S,"onclick",K(this,this[R])))}this._onMapResizeNavHandler_connect=G(this,"onResize",this,"_onMapResizeNavHandler");for(L in A)R=A[L],S=H("div",{id:Z+"_pan_"+L,style:{zIndex:30}},this._navDiv),W(S,"fixedPan "+R),this._connects.push(G(S,"onclick",K(this,this[R])));this.isPanArrows=!0}},_onMapResizeNavHandler:function(L,
W,Z){L=this.id;W/=2;Z/=2;var aa=m.byId,ia;for(ia in w){var R=aa(L+"_pan_"+ia);if("up"===ia||"down"===ia){var S=parseInt(Q(R).w,10)/2;J(R,"left",W-S+"px")}else S=parseInt(Q(R).h,10)/2,J(R,"top",Z-S+"px")}},_createSimpleSlider:function(){if(this._mapParams.slider){var L=this._slider=H("div",{id:this.id+"_zoom_slider",class:this._getSliderClass(),style:{zIndex:30}}),W=H("div",{class:"esriSimpleSliderIncrementButton",tabIndex:"0",role:"button"},L),Z=H("div",{class:"esriSimpleSliderDecrementButton",tabIndex:"0",
role:"button"},L);this._addZoomButtonTooltips(W,Z);this._incButton=W;this._decButton=Z;this._simpleSliderZoomHandler(null,null,null,this.getLevel());var aa=z.widgets.zoomSlider;this._addZoomButtonIcon(W,"+",aa.zoomIn);this._addZoomButtonIcon(Z,"\x26minus;",aa.zoomOut);8>y("ie")&&h.add(Z,"dj_ie67Fix");this._connects.push(G(W,g,this,this._simpleSliderChangeHandler));this._connects.push(G(Z,g,this,this._simpleSliderChangeHandler));(-1<this.getMaxZoom()||-1<this.getMinZoom())&&this._connects.push(G(this,
"onZoomEnd",this,this._simpleSliderZoomHandler));10>y("ie")&&m.setSelectable(L,!1);this.root.appendChild(L);this.isZoomSlider=!0}},_simpleSliderChangeHandler:function(L){t.stop(L);L=-1!==L.currentTarget.className.indexOf("IncrementButton")?!0:!1;this._extentUtil({numLevels:L?1:-1})},_simpleSliderZoomHandler:function(L,W,Z,aa){var ia;L=this._incButton;W=this._decButton;-1<aa&&aa===this.getMaxZoom()?ia=L:-1<aa&&aa===this.getMinZoom()&&(ia=W);ia?(h.add(ia,"esriSimpleSliderDisabledButton"),h.remove(ia===
L?W:L,"esriSimpleSliderDisabledButton")):(h.remove(L,"esriSimpleSliderDisabledButton"),h.remove(W,"esriSimpleSliderDisabledButton"))},_getSliderClass:function(L){L=L?"Large":"Simple";var W=this._mapParams.sliderOrientation,Z=this._mapParams.sliderPosition||"";W=W&&"horizontal"===W.toLowerCase()?"esri"+L+"SliderHorizontal":"esri"+L+"SliderVertical";if(Z)switch(Z.toLowerCase()){case "top-left":Z="esri"+L+"SliderTL";break;case "top-right":Z="esri"+L+"SliderTR";break;case "bottom-left":Z="esri"+L+"SliderBL";
break;case "bottom-right":Z="esri"+L+"SliderBR"}return"esri"+L+"Slider "+W+" "+Z},_addZoomButtonIcon:function(L,W,Z){q.create("span",{"aria-hidden":"true",role:"presentation",innerHTML:W},L);q.create("span",{class:"esriIconFallbackText",innerHTML:Z},L)},_addZoomButtonTooltips:function(L,W){var Z=z.widgets.zoomSlider;a.set(L,"title",Z.zoomIn);a.set(W,"title",Z.zoomOut)},_createSlider:function(L,W,Z){if(this._mapParams.slider){var aa=H("div",{id:this.id+"_zoom_slider"},this.root),ia=v.defaults.map,
R=this._getSliderClass(!0),S=-1!==R.indexOf("Horizontal"),M=this.getNumLevels();if(0<M){var X,fa,ea=this._mapParams.sliderLabels,ha=!!ea,ra=!1!==ea;if(ra){var Aa=S?"bottomDecoration":"rightDecoration";if(!ea)for(ea=[],ia=0;ia<M;ia++)ea[ia]="";u.forEach([{class:"esriLargeSliderTicks",container:Aa,count:M,dijitClass:W},{class:ha&&"esriLargeSliderLabels",container:Aa,count:M,labels:ea,dijitClass:Z}],function(va){var Ga=H("div"),ca=va.dijitClass;delete va.dijitClass;aa.appendChild(Ga);ca===W?X=new ca(va,
Ga):fa=new ca(va,Ga)})}L=this._slider=new L({id:aa.id,class:R,minimum:this.getMinZoom(),maximum:this.getMaxZoom(),discreteValues:M,value:this.getLevel(),clickSelect:!0,intermediateChanges:!0,style:"z-index:30;"},aa);L.startup();ra&&(X.startup(),fa.startup());this._slider_connect=G(L,"onChange",this,"_onSliderChangeHandler");this._connects.push(G(this,"onExtentChange",this,"_onExtentChangeSliderHandler"));this._connects.push(G(L._movable,"onFirstMove",this,"_onSliderMoveStartHandler"))}else{L=this._slider=
new L({id:aa.id,class:R,minimum:0,maximum:2,discreteValues:3,value:1,clickSelect:!0,intermediateChanges:ia.sliderChangeImmediate,style:"height:50px; z-index:30;"},aa);Z=L.domNode.firstChild.childNodes;for(ia=1;3>=ia;ia++)J(Z[ia],"visibility","hidden");L.startup();this._slider_connect=G(L,"onChange",this,"_onDynSliderChangeHandler");this._connects.push(G(this,"onExtentChange",this,"_onExtentChangeDynSliderHandler"))}ia=L.incrementButton;Z=L.decrementButton;S?this._addZoomButtonTooltips(ia,Z):this._addZoomButtonTooltips(Z,
ia);ia.style.outline="none";Z.style.outline="none";L.sliderHandle.style.outline="none";L._onKeyPress=function(){};if(S=L._movable){var Ea=S.onMouseDown;S.onMouseDown=function(va){9>y("ie")&&1!==va.button||Ea.apply(this,arguments)}}this.isZoomSlider=!0}},_onSliderMoveStartHandler:function(){F(this._slider_connect);F(this._slidermovestop_connect);this._slider_connect=G(this._slider,"onChange",this,"_onSliderChangeDragHandler");this._slidermovestop_connect=G(this._slider._movable,"onMoveStop",this,"_onSliderMoveEndHandler")},
_onSliderChangeDragHandler:function(L){this._extentUtil({targetLevel:L})},_onSliderMoveEndHandler:function(){F(this._slider_connect);F(this._slidermovestop_connect)},_onSliderChangeHandler:function(L){this.setLevel(L)},_updateSliderValue:function(L,W){F(this._slider_connect);var Z=this._slider,aa=Z._onChangeActive;Z._onChangeActive=!1;Z.set("value",L);Z._onChangeActive=aa;this._slider_connect=G(Z,"onChange",this,W)},_onExtentChangeSliderHandler:function(L,W,Z,aa){F(this._slidermovestop_connect);this._updateSliderValue(aa.level,
"_onSliderChangeHandler")},_onDynSliderChangeHandler:function(L){this._extentUtil({numLevels:0<L?1:-1})},_onExtentChangeDynSliderHandler:function(){this._updateSliderValue(1,"_onDynSliderChangeHandler")},_openLogoLink:function(L){window.open(v.defaults.map.logoLink,"_blank");t.stop(L)},enableMapNavigation:function(){this.isMapNavigation||(this.isMapNavigation=!0,this._evalMapNavigation())},disableMapNavigation:function(){this.isMapNavigation&&(this.isMapNavigation=!1,this._evalMapNavigation())},_evalMapNavigation:function(){this.isMapNavigation?
this.navigationManager.enableNavigation():this.navigationManager.disableNavigation()},_evalNavigationFeature:function(L){if(this.isMapNavigation&&this["is"+L])this.navigationManager["enable"+L]();else this.navigationManager["disable"+L]()},enableDoubleClickZoom:function(){this.isDoubleClickZoom||(this.isDoubleClickZoom=!0,this._evalNavigationFeature("DoubleClickZoom"))},disableDoubleClickZoom:function(){this.isDoubleClickZoom&&(this.isDoubleClickZoom=!1,this._evalNavigationFeature("DoubleClickZoom"))},
enableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom||(P(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",null,"v2.0"),this.navigationManager.enableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!0)},disableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom&&(P(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",
null,"v2.0"),this.navigationManager.disableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!1)},enableClickRecenter:function(){this.isClickRecenter||(this.isClickRecenter=!0,this._evalNavigationFeature("ClickRecenter"))},disableClickRecenter:function(){this.isClickRecenter&&(this.isClickRecenter=!1,this._evalNavigationFeature("ClickRecenter"))},enablePan:function(){this.isPan||(this.isPan=!0,this._evalNavigationFeature("Pan"))},disablePan:function(){this.isPan&&(this.isPan=!1,this._evalNavigationFeature("Pan"))},
enableRubberBandZoom:function(){this.isRubberBandZoom||(this.isRubberBandZoom=!0,this._evalNavigationFeature("RubberBandZoom"))},disableRubberBandZoom:function(){this.isRubberBandZoom&&(this.isRubberBandZoom=!1,this._evalNavigationFeature("RubberBandZoom"))},enablePinchZoom:function(){this.isPinchZoom||(this.isPinchZoom=!0,this._evalNavigationFeature("PinchZoom"))},disablePinchZoom:function(){this.isPinchZoom&&(this.isPinchZoom=!1,this._evalNavigationFeature("PinchZoom"))},enableKeyboardNavigation:function(){this.isKeyboardNavigation||
(this.isKeyboardNavigation=!0,this._evalNavigationFeature("KeyboardNavigation"))},disableKeyboardNavigation:function(){this.isKeyboardNavigation&&(this.isKeyboardNavigation=!1,this._evalNavigationFeature("KeyboardNavigation"))},enableScrollWheel:function(){this.isScrollWheel||(this.isScrollWheel=!0,this._evalNavigationFeature("ScrollWheel"))},disableScrollWheel:function(){this.isScrollWheel&&(this.isScrollWheel=!1,this._evalNavigationFeature("ScrollWheel"))},enableScrollWheelZoom:function(){this.isScrollWheelZoom||
(this.navigationManager.enableScrollWheelZoom(),this.isScrollWheelZoom=!0)},disableScrollWheelZoom:function(){this.isScrollWheelZoom&&(this.navigationManager.disableScrollWheelZoom(),this.isScrollWheelZoom=!1)},enableScrollWheelPan:function(){this.isScrollWheelPan||this.navigationManager.enableScrollWheelPan()},disableScrollWheelPan:function(){this.isScrollWheelPan&&this.navigationManager.disableScrollWheelPan()},showPanArrows:function(){this._navDiv&&(this._navDiv.style.display="block",this.isPanArrows=
!0)},hidePanArrows:function(){this._navDiv&&(this._navDiv.style.display="none",this.isPanArrows=!1)},showZoomSlider:function(){this._slider&&(J(this._slider.domNode||this._slider,"visibility","inherit"),this.isZoomSlider=!0)},hideZoomSlider:function(){this._slider&&(J(this._slider.domNode||this._slider,"visibility","hidden"),this.isZoomSlider=!1)},onClick:function(L){L.graphic||(L.graphic=this.syncHitTestForWebGL(L))}});return x.Map=B})},"esri/_coremap":function(){define("require module dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/event dojo/_base/unload dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/sniff dijit/registry dojox/gfx/matrix ./kernel ./config ./basemaps ./lang ./Evented ./fx ./deferredUtils ./tileUtils ./urlUtils ./PluginTarget ./Color ./promiseList ./arcade/Dictionary ./geometry/Point ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils ./layers/GraphicsLayer ./layers/TileInfo ./layers/LOD ./layers/ArcGISTiledMapServiceLayer ./layers/MapImageLayer ./layers/OpenStreetMapLayer ./layers/support/webglUtils ./dijit/Popup ./plugins/popupManager dojo/uacss".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E,C,z,w,A,G,F,H,J,K,Q,P,I,N,L,W,Z,aa,ia,R,S,M,X,fa,ea,ha,ra){function Aa(Y,ka){var ta=Y.lods;ta.sort(function(La,Ya){return La.scale>Ya.scale?-1:La.scale<Ya.scale?1:0});var xa=[];ta=e.filter(ta,function(La){if(-1===Fa(xa,La.scale))return xa.push(La.scale),!0});var Da=ka.lods=[],Ja;e.forEach(ta,function(La,Ya){Ja=Da[Ya]=new M(La);Ja.level=Ya});ka.tileInfo=new S(O(Y,{lods:Da}))}var Ea,va=aa.toMapPoint,Ga=aa.toScreenPoint,ca=c.connect,ja=c.disconnect,
wa=t.hitch,za=g.set,Fa=e.indexOf,O=t.mixin,ya=0,Ha=D.defaults.map,da=Ha.layerNamePrefix,Oa=Ha.graphicsLayerNamePrefix,Na=new RegExp("^"+da+"(\\d+)$"),Ca=new RegExp("^"+Oa+"(\\d+)$"),V=function(){},oa=0,pa=ha.isWebGLEnabled();d=d([z,H],{declaredClass:"esri._CoreMap",tables:null,resizeDelay:300,invalidExtent:"Map does not have a valid extent.",invalidGeometry:"Geometry (wkid: ${geometry}) cannot be converted to spatial reference of the map (wkid: ${map})",unknownBasemap:'Unable to find basemap definition for: "${basemapName}". Try one of these: ${list}',
invalidBasemap:'Unable to add basemap: "${basemapName}".',unknownLayerType:'Unknown basemap layer type: "${type}" found in basemap definition for: "${basemapName}".',visible:!0,webglEnabled:pa,_eventMap:{"basemap-change":!0,"extent-change":["extent","delta","levelChange","lod"],"layer-add":["layer"],"layer-add-result":["layer","error"],"layer-remove":["layer"],"layer-reorder":["layer","index"],"layer-resume":["layer"],"layer-suspend":["layer"],"layers-add-result":["layers"],"layers-removed":!0,"layers-reordered":["layerIds"],
load:["map"],pan:["extent","delta"],"pan-end":["extent","delta"],"pan-start":["extent","screenPoint"],reposition:["x","y"],resize:["extent","width","height"],scale:["matrix","immediate"],"time-extent-change":["timeExtent"],"before-unload":["map"],unload:["map"],"update-end":["error"],"update-start":!0,zoom:["extent","zoomFactor","anchor"],"zoom-end":["extent","zoomFactor","anchor","level"],"zoom-start":["extent","zoomFactor","anchor","level"],click:!0,"dbl-click":!0,"key-down":!0,"key-up":!0,"mouse-down":!0,
"mouse-drag":!0,"mouse-drag-end":!0,"mouse-drag-start":!0,"mouse-move":!0,"mouse-out":!0,"mouse-over":!0,"mouse-up":!0,"mouse-wheel":!0,"basic-tap":!0,"double-tap":!0,"pinch-end":!0,"pinch-move":!0,"pinch-start":!0,"processed-double-tap":!0,"processed-tap":!0,"swipe-end":!0,"swipe-move":!0,"swipe-start":!0,tap:!0,"two-finger-tap":!0},constructor:function(Y,ka){ka=ka||{};this.registerConnectEvents();O(this,{_internalLayerIds:[],_layers:[],_layerDivs:[],_basemapPending:!1,_connects:[],_layerAddPromises:{},
_zoomAnimDiv:null,_zoomAnim:null,_layersDiv:null,_firstLayerId:null,_delta:null,_cursor:null,_ratioW:1,_ratioH:1,_params:null,_minResolution:0,_maxResolution:0,cursor:null,layerIds:[],graphicsLayerIds:[],graphics:null,_labels:null,loaded:!1,__panning:!1,__zooming:!1,__container:null,root:null,__LOD:null,__tileInfo:null,__visibleRect:null,__visibleDelta:null,_rids:[],_webglContextOwners:[]});var ta=this.container=a.byId(Y),xa=this.id=h.get(ta,"id")||x.getUniqueId(this.declaredClass);q.add(ta,"map");
var Da=k.getContentBox(ta);Y=q.add;var Ja=n.create;this.position=new I(0,0);this._reposition();var La=this.width=0<Da.w?Da.w:Ha.width,Ya=this.height=0<Da.h?Da.h:Ha.height,Ua=this.root=Ja("div",{id:xa+"_root",style:{width:La+"px",height:Ya+"px",direction:"ltr"}});Y(Ua,"esriMapContainer");Da=this.__container=Ja("div",{id:xa+"_container"},Ua);za(Da,"position","absolute");Y(Da,"esriMapContainer");ta.appendChild(Ua);ka=this._params=O({slider:!0,nav:!1,zoom:-1,minZoom:-1,maxZoom:-1,scale:-1,minScale:0,
maxScale:0,showInfoWindowOnClick:!0,displayGraphicsOnPan:!0,wrapAround180:!0,fitExtent:!1,optimizePanAnimation:!0},ka);this.setWebGLEnabled(null!=ka.webglEnabled?ka.webglEnabled:this.webglEnabled);this.maxWebGLContexts=null!=ka.maxWebGLContexts?ka.maxWebGLContexts:-1;this.wrapAround180=ka.wrapAround180;this.optimizePanAnimation=ka.optimizePanAnimation;this.setBackgroundColor(ka.backgroundColor);C.isDefined(ka.resizeDelay)&&(this.resizeDelay=ka.resizeDelay);ka.lods&&(Aa({rows:512,cols:512,dpi:96,format:"JPEG",
compressionQuality:75,origin:{x:-180,y:90},spatialReference:{wkid:4326},lods:ka.lods},ka),this.__tileInfo=ka.tileInfo);this.extent=ka.extent;this._extentUtil({mapCenter:ka.center,targetLevel:ka.zoom,targetScale:ka.scale});this.__visibleRect=new L(0,0,La,Ya);this.__visibleDelta=new L(0,0,La,Ya);xa=this._layersDiv=Ja("div",{id:xa+"_layers"});Y(xa,"esriMapLayers");Da.appendChild(xa);this._zoomAnimDiv=Ja("div",{style:{position:"absolute"}});ka.infoWindow?this.infoWindow=ka.infoWindow:(Y=this.infoWindow=
new ra(ka.popupOptions,Ja("div")),Y.startup(),Y._ootb=!0,za(Y.domNode,"zIndex",40));if(ka.showLabels){var Ta=this;f(["./layers/LabelLayer"],function(ab){Ea=ab;Ta._createLabelLayer()});this.on("load",function(){Ta._createLabelLayer()})}this.addPlugin(this._getAbsMid("./plugins/popupManager"),{enabled:ka.showInfoWindowOnClick});this._zoomStartHandler=wa(this,this._zoomStartHandler);this._zoomingHandler=wa(this,this._zoomingHandler);this._zoomEndHandler=wa(this,this._zoomEndHandler);this._panningHandler=
wa(this,this._panningHandler);this._panEndHandler=wa(this,this._panEndHandler);this._endTranslate=wa(this,this._endTranslate);this._timedResize=wa(this,this._timedResize);this._execResize=wa(this,this._execResize);this._processLabelLayers=wa(this,this._processLabelLayers);this._updateLabelLayers=wa(this,this._updateLabelLayers);this.resize=wa(this,this.resize);m.addOnWindowUnload(this,this.destroy)},_getAbsMid:function(Y){return f.toAbsMid?f.toAbsMid(Y):B.id.replace(/\/[^\/]*$/ig,"/")+Y},_cleanUp:function(){var Y=
this.infoWindow;Y&&(Y._ootb&&Y.destroy?Y.destroy():Y.unsetMap(this),delete this.infoWindow);ja(this._tsTimeExtentChange_connect);this.removePlugin("./plugins/popupManager");n.destroy(this.root);this.root=null},_addLayer:function(Y,ka,ta){if(Y.id){var xa=Y.id.match(Y instanceof R?Ca:Na);xa&&xa[1]&&(xa=Number(xa[1]),ya<=xa&&(ya=xa+1))}var Da=Y.id||(Y instanceof R?Oa:da)+ya++;Y.id=Da;this._layers[Da]=Y;Y._isRefLayer="top"===ta;ta=!C.isDefined(ta)||0>ta||ta>ka.length||"top"===ta?ka.length:ta;var Ja;if(!Y._isRefLayer)for(;(Ja=
this.getLayer(ka[ta-1]))&&Ja._isRefLayer;)ta--;if(xa=!this._firstLayerId&&!this.loaded&&!this._basemapPending&&0===ta&&(ka===this.layerIds||ka===this.graphicsLayerIds))this._firstLayerId=Da;ka.splice(ta,0,Da);var La=wa(this,this._addLayerHandler),Ya=this;ta=this._connects;Ja=function(){Y.loaded?Ya._onLoadFix?(Ya._onLoadFix=!1,setTimeout(function(){La(Y)},0)):La(Y):(Ya["_"+Da+"_addtoken_load"]=ca(Y,"onLoad",Ya,"_addLayerHandler"),Ya["_"+Da+"_addtoken_err"]=ca(Y,"onError",Ya,function(Ua){La(Y,Ua,ka)}))};
this.loaded||xa||Y.loaded&&-1===Fa(this.graphicsLayerIds,Da)?Ja():ta.push(ca(this,"onLoad",Ja));return Y},_forgetLayer:function(Y){Y=Y.id;ja(this["_"+Y+"_addtoken_load"]);ja(this["_"+Y+"_addtoken_err"]);var ka=this._layerAddPromises[Y];ka&&(delete this._layerAddPromises[Y],ka.cancel())},_addLayerHandler:function(Y,ka,ta){ka?this._attachLayerToMap(Y,ka,ta):Y._prepareToAttach?(this._layerAddPromises[Y.id]=Y._prepareToAttach(this)).always(t.hitch(this,function(xa){xa&&"cancel"===xa.dojoType||this._attachLayerToMap(Y,
null,ta)})):Y.declaredClass&&(-1<Y.declaredClass.toLowerCase().indexOf("vectortilelayer")||-1<Y.declaredClass.toLowerCase().indexOf("rasterxlayer")&&Y.useWebGL)&&!this.isWebGLContextAvailable()?(ka=Error("Too many WebGL contexts. Unable to add the layer: ",Y.url),this._attachLayerToMap(Y,ka,this.layerIds)):this._attachLayerToMap(Y,ka,ta)},_attachLayerToMap:function(Y,ka,ta){var xa=this.id,Da=Y.id,Ja=Fa(Y instanceof R?this.graphicsLayerIds:this.layerIds,Da),La=Ja,Ya=!1,Ua=this._params;this._forgetLayer(Y);
if(ka)delete this._layers[Da],-1!==Ja&&(ta.splice(Ja,1),this.onLayerAddResult(Y,ka));else{-1===Ja&&(Ja=Fa(this._internalLayerIds,Da),La=20+Ja,Ya=!0);if(Da===this._firstLayerId){ka=Y.spatialReference;ta=this.extent&&this.extent.spatialReference;!ta||ta.equals(ka)||!Y.tileInfo&&Y.url||(ta=null);ta=this.spatialReference=ta||ka;this.wrapAround180=this.wrapAround180&&ta&&ta._isWrappable()?!0:!1;Y.tileInfo&&(this.__tileInfo?(ka=this.__tileInfo.lods,this.__tileInfo=O({},Y.tileInfo),this.__tileInfo.lods=
ka):(Aa(O({},Y.tileInfo),Ua),this.__tileInfo=Ua.tileInfo));if(this.wrapAround180){ka=this.__tileInfo;ta=ta._getInfo();if(!ka||Math.abs(ta.origin[0]-ka.origin.x)>ta.dx)this.wrapAround180=!1;this.wrapAround180&&ka&&G._addFrameInfo(ka,ta)}Ua.units=Y.units;if((ka=this.__tileInfo&&this.__tileInfo.lods)&&ka.length){ta=Ua.minScale;Ja=Ua.maxScale;var Ta=-1,ab=-1,fb=!1,kb=!1,qb;for(qb=0;qb<ka.length;qb++)0<ta&&!fb&&ta>=ka[qb].scale&&(Ta=ka[qb].level,fb=!0),0<Ja&&!kb&&Ja>=ka[qb].scale&&(ab=0<qb?ka[qb-1].level:
-1,kb=!0);-1===Ua.minZoom&&(Ua.minZoom=0===ta?ka[0].level:Ta);-1===Ua.maxZoom&&(Ua.maxZoom=0===Ja?ka[ka.length-1].level:ab);for(qb=0;qb<ka.length;qb++)Ua.minZoom===ka[qb].level&&(Ua.minScale=ka[qb].scale,this._minResolution=ka[qb].resolution),Ua.maxZoom===ka[qb].level&&(Ua.maxScale=ka[qb].scale,this._maxResolution=ka[qb].resolution)}else Ua.minZoom=Ua.maxZoom=Ua.zoom=-1}Y instanceof R?(this._gc||(this._gc=new R._GraphicsContainer,this._gc._setMap(this,this._layersDiv).id=xa+"_gc"),this._attachGraphicsLayer(Y).id=
xa+"_"+Da):(La=Y._setMap(this,this._layersDiv,La,this.__LOD),La.id=xa+"_"+Da,this._layerDivs[Da]=La,this._reorderLayers(this.layerIds),Ya||-1===Y.declaredClass.indexOf("VETiledLayer")||this._onBingLayerAdd(Y));Da===this._firstLayerId&&(this.graphics=new R({id:xa+"_graphics",displayOnPan:Ua.displayGraphicsOnPan}),this._addLayer(this.graphics,this._internalLayerIds,20));if(Y===this.graphics){ta=this._layers[this._firstLayerId];xa=Ua.zoom;La=Ua.scale;ka=Ua.center;ta=ta.initialExtent||ta.fullExtent;this._firstLayerId=
null;this.extent&&(this.extent=this._convertGeometry(this,this.extent));!this.extent&&ta&&(ka&&(ka=this._convertGeometry(ta,ka)),ka&&(ta=ta.centerAt(ka),ka=null));if(ka=this.extent||ta&&new N(ta.toJson()))-1<xa?ka=this.__getExtentForLevel(xa,null,ka).extent:0<La&&(ka=Z.getExtentForScale(this,La,ka));if(!ka)return;Ua=this._fixExtent(ka,Ua.fitExtent);this.extent=Ua.extent;this.__LOD=Ua.lod;this.__setExtent(this.extent);this.loaded=!0;this.attr("data-loaded","");this.infoWindow.setMap(this);this.onLoad(this)}Ya||
(this.onLayerAdd(Y),this.onLayerAddResult(Y));ja(this[Da+"_addLayerHandler_connect"])}},_convertGeometry:function(Y,ka){Y=Y&&Y.spatialReference;var ta=ka&&ka.spatialReference;Y&&ta&&!Y.equals(ta)&&(Y._canProject(ta)?Y.isWebMercator()?ka=ia.geographicToWebMercator(ka):4326===Y.wkid&&(ka=ia.webMercatorToGeographic(ka,!0)):ka=null);return ka},_attachGraphicsLayer:function(Y){var ka=Y.id;Y=Y._setMap(this,this._gc._surface);this._layerDivs[ka]=Y;this._reorderLayers(this.graphicsLayerIds);return Y},_detachGraphicsLayer:function(Y){Y.loaded&&
Y.getMap()&&Y._unsetMap(this,this._gc._surface)},_reorderLayers:function(Y){var ka=this.onLayerReorder,ta=n.place,xa=this._layerDivs,Da=this._layers,Ja=this._gc?this._gc._surface.getEventSource():null;if(Y===this.graphicsLayerIds)e.forEach(Y,function(ab,fb){var kb=xa[ab];ab=Da[ab];kb&&(this._gc._reorderLayer(ab,kb,fb),ka(ab,fb))},this);else{var La=this.graphics,Ya=La?La.id:null,Ua=this._layersDiv,Ta;e.forEach(Y,function(ab,fb){Ta=xa[ab];ab!==Ya&&Ta&&(ta(Ta,Ua,fb),ka(Da[ab],fb))});this._mapImageLyr&&
this._placeMapImageLyr();Ja&&(Ja=9>b("ie")?Ja.parentNode:Ja,ta(Ja,Ja.parentNode,"last"))}this.onLayersReordered([].concat(Y))},_zoomStartHandler:function(){this.__zoomStart(this._zoomAnimDiv.startingExtent,this._zoomAnimDiv.anchor)},_zoomingHandler:function(Y){var ka=parseFloat(Y.left),ta=parseFloat(Y.top);Y=new N(ka,ta-parseFloat(Y.height),ka+parseFloat(Y.width),ta,this.spatialReference);ka=this.extent.getWidth()/Y.getWidth();this.__zoom(Y,ka,this._zoomAnimDiv.anchor)},_zoomEndHandler:function(){var Y=
this._zoomAnimDiv,ka=Y.extent,ta=this.extent.getWidth()/ka.getWidth(),xa=Y.anchor,Da=Y.newLod,Ja=Y.levelChange;Y.extent=Y.anchor=Y.levelChange=Y.startingExtent=Y.newLod=this._delta=this._zoomAnim=null;this.__zoomEnd(ka,ta,xa,Da,Ja)},_panningHandler:function(Y){if(isNaN(parseFloat(Y.left))||isNaN(parseFloat(Y.top))){var ka=Math.round,ta=this._panAnim.node;Y.left=-1*(this._delta.x-ka(this.width/2))+"px";Y.top=-1*(this._delta.y-ka(this.height/2))+"px";g.set(ta,"left",Y.left);g.set(ta,"top",Y.top)}Y=
new I(parseFloat(Y.left),parseFloat(Y.top));ka=this.toMap(Y);this.onPan(this.extent.offset(this.extent.xmin-ka.x,this.extent.ymax-ka.y),Y)},_panEndHandler:function(Y){this.__panning=!1;var ka=Math.round;Y=new I(-ka(parseFloat(Y.style.left)),-ka(parseFloat(Y.style.top)));ka=Y.x;var ta=Y.y,xa=this.__visibleRect,Da=this.__visibleDelta;xa.x+=-ka;xa.y+=-ta;Da.x+=-ka;Da.y+=-ta;za(this._zoomAnimDiv,{left:"0px",top:"0px"});xa=this.extent;Da=this._ratioW;var Ja=this._ratioH;xa=new N(xa.xmin+ka/Da,xa.ymin-
ta/Ja,xa.xmax+ka/Da,xa.ymax-ta/Ja,this.spatialReference);Y.setX(-Y.x);Y.setY(-Y.y);this._delta=this._panAnim=null;this._updateExtent(xa);this.onPanEnd(xa,Y);this._fireExtChg([xa,Y,!1,this.__LOD])},_fixExtent:function(Y,ka){for(var ta=this._reshapeExtent(Y),xa=1.25;!0===ka&&(ta.extent.getWidth()<Y.getWidth()||ta.extent.getHeight()<Y.getHeight())&&0<ta.lod.level&&3>=xa;)ta=this._reshapeExtent(Y.expand(xa)),xa+=.25;return ta},_getFrameWidth:function(){var Y=-1,ka=this.spatialReference._getInfo();this.__LOD?
(ka=this.__LOD._frameInfo)&&(Y=ka[3]):ka&&(Y=Math.round(2*ka.valid[1]/(this.extent.getWidth()/this.width)));return Y},_fixAspectRatio:function(Y){var ka=Y.getWidth(),ta=Y.getHeight(),xa=ka/ta,Da=this.width/this.height,Ja=0,La=0;this.width>this.height?ka>ta?Da>xa?Ja=ta*Da-ka:La=ka/Da-ta:Ja=ta*Da-ka:this.width<this.height?ka<ta?Da>xa?Ja=ta*Da-ka:La=ka/Da-ta:La=ka/Da-ta:ka<ta?Ja=ta-ka:ka>ta&&(La=ka/Da-ta);Ja&&(Y.xmin-=Ja/2,Y.xmax+=Ja/2);La&&(Y.ymin-=La/2,Y.ymax+=La/2);return Y},_reshapeExtent:function(Y){Y=
this._fixAspectRatio(Y);return this._getAdjustedExtent(Y)},_getAdjustedExtent:function(Y){if(this.__tileInfo)return G.getCandidateTileInfo(this,this.__tileInfo,Y);var ka=Z.getScale(this,Y),ta=this.getMinScale(),xa=this.getMaxScale();!ta||ka<=ta?!xa||ka>=xa||(Y=Z.getExtentForScale(this,xa,Y)):Y=Z.getExtentForScale(this,ta,Y);return{extent:Y}},_onBingLayerAdd:function(Y){this["__"+Y.id+"_vis_connect"]=c.connect(Y,"onVisibilityChange",this,"_toggleBingLogo");this._toggleBingLogo(Y.visible)},_onBingLayerRemove:function(Y){c.disconnect(this["__"+
Y.id+"_vis_connect"]);delete this["__"+Y.id+"_vis_connect"];var ka=e.some(this.layerIds,function(ta){return(Y=this._layers[ta])&&Y.visible&&-1!==Y.declaredClass.indexOf("VETiledLayer")},this);this._toggleBingLogo(ka)},_toggleBingLogo:function(Y){Y&&!this._bingLogo?(Y={left:this._mapParams&&this._mapParams.nav?"25px":""},6===b("ie")&&(Y.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+f.toUrl("./images/map/bing-logo-lg.png")+"')"),Y=this._bingLogo=
n.create("div",{style:Y},this.root),q.add(Y,"bingLogo-lg")):!Y&&this._bingLogo&&(n.destroy(this._bingLogo),delete this._bingLogo)},__panStart:function(Y,ka){var ta=this._zoomAnim,xa=this._panAnim;if(ta&&ta._active)ta.stop(),ta._fire("onEnd",[ta.node]);else if(xa&&xa._active){xa.stop();this._panAnim=null;ka=xa.curve.getValue(xa._getStep());Y=Math.round(parseFloat(ka.left));ka=Math.round(parseFloat(ka.top));ta=this.navigationManager._dragOrigin;this.__pan(Y,ka);ta&&(ta.x-=Y,ta.y-=ka);return}this.__panning=
!0;this.onPanStart(this.extent,new I(Y,ka))},__pan:function(Y,ka){var ta=this.extent,xa=this._ratioW,Da=this._ratioH;this.onPan(new N(ta.xmin-Y/xa,ta.ymin+ka/Da,ta.xmax-Y/xa,ta.ymax+ka/Da,this.spatialReference),new I(Y,ka))},__panEnd:function(Y,ka){var ta=this.__visibleRect,xa=this.__visibleDelta;ta.x+=Y;ta.y+=ka;xa.x+=Y;xa.y+=ka;ta=new I(Y,ka);xa=this.extent;var Da=this._ratioW,Ja=this._ratioH;xa=new N(xa.xmin-Y/Da,xa.ymin+ka/Ja,xa.xmax-Y/Da,xa.ymax+ka/Ja,this.spatialReference);this.__panning=!1;
this._updateExtent(xa);this.onPanEnd(xa,ta);this._fireExtChg([xa,ta,!1,this.__LOD])},__zoomStart:function(Y,ka){this.__zooming=!0;this.onZoomStart(Y,1,ka,this.__LOD?this.__LOD.level:null)},__zoom:function(Y,ka,ta){this.onZoom(Y,ka,ta)},__zoomEnd:function(Y,ka,ta,xa,Da){za(this._layersDiv,{left:"0px",top:"0px"});this._delta=new I(0,0);this.__visibleRect.x=this.__visibleRect.y=0;Y=new N(Y);this.__LOD=xa;this._ratioW=this.width/Y.getWidth();this._ratioH=this.height/Y.getHeight();var Ja=this._delta;this._delta=
null;this.__zooming=!1;this._updateExtent(Y,Da);this.onZoomEnd(Y,ka,ta,xa?xa.level:null);this._fireExtChg([Y,Ja,Da,xa])},_extentUtil:function(Y,ka,ta,xa,Da){var Ja=new u,La=this.width,Ya=this.height;if(Y){var Ua=Y.numLevels;var Ta=Y.targetLevel;var ab=C.isDefined(Ta);var fb=Y.factor;var kb=Y.mapAnchor;var qb=Y.screenAnchor;var ob=Y.mapCenter;var wb=Y.levelOrFactor;var Fb=Y.targetScale;var yb=C.isDefined(Fb)&&0<Fb}if(ka){var lb=ka.dx;var Db=ka.dy;ob=ka.mapCenter}t.isArray(ob)&&(ob=new P(ob));var Sb=
this._panAnim;ka=(Y=this._stopAnim())?Y.divExtent:this.extent;var Eb=this.__tileInfo,Hb=this._params;if(!this.loaded){if(ta)ka&&(ta=this._convertGeometry(ka,ta)),ta&&(this.extent=ta,Hb.zoom=Hb.scale=-1,Hb.center=null);else if(ob||ab||yb){if(ob)if(ka){if(ob=this._convertGeometry(ka,ob))this.extent=ka.centerAt(ob),Hb.center=null}else Hb.center=ob;ab&&-1<Ta?(Hb.zoom=Ta,Hb.scale=-1):yb&&(Hb.scale=Fb,Hb.zoom=-1)}Ja.resolve();return Ja}if(ob&&(ob=this._convertGeometry(this,ob),!ob)||kb&&(kb=this._convertGeometry(this,
kb),!kb)||ta&&(ta=this._convertGeometry(this,ta),!ta))return Ja.reject(),Ja;Sb&&kb&&qb&&(kb=va(this.extent,La,Ya,qb));Y&&kb&&qb&&(kb=va(Y.divExtent,La,Ya,qb));if(ab)if(Eb)Ua=this.getMinZoom(),ab=this.getMaxZoom(),Ta<Ua?Ta=Ua:Ta>ab&&(Ta=ab),Ua=Ta-(Y?Y.level:this.getLevel());else{Ua=0<Ta?-1:1;var Pb=wb?Ta:null}if(!ta)if(C.isDefined(Ua))Eb?(La=Y?Y.level:this.getLevel(),La=this.__getExtentForLevel(La+Ua,ob,ka).extent):(La=(Y?Y.end:this.extent).expand(Pb||(0<Ua?.5*Ua:2*-Ua)),Pb&&ob&&(La=La.centerAt(ob))),
La&&(ob?ta=La:(lb=kb||ka.getCenter(),Ya=La.getWidth(),Db=La.getHeight(),La=lb.x>=ka.xmin&&lb.x<=ka.xmax?(lb.x-ka.xmin)/ka.getWidth():.5,ta=lb.y>=ka.ymin&&lb.y<=ka.ymax?(lb.y-ka.ymin)/ka.getHeight():.5,La=lb.x-La*Ya,lb=lb.y-ta*Db,ta=new N(La,lb,La+Ya,lb+Db,this.spatialReference)));else if(yb)ta=Z.getExtentForScale(this,Fb,ka);else if(C.isDefined(fb))ta=ka.expand(fb);else if(lb||Db)Y?(ta=Y.end,kb=ta.getCenter(),Pb=Ga(ta,La,Ya,kb),Pb.x+=lb,Pb.y+=Db,Pb=va(ta,La,Ya,Pb),ta=ta.offset(Pb.x-kb.x,Pb.y-kb.y)):
(lb=new I(La/2+lb,Ya/2+Db),lb=va(ka,La,Ya,lb),Ya=ka.getWidth(),Db=ka.getHeight(),La=lb.x-Ya/2,lb=lb.y-Db/2,ta=new N(La,lb,La+Ya,lb+Db,this.spatialReference));ta||(ob?(ka=Y?Y.end:ka,Ya=ka.getWidth(),Db=ka.getHeight(),La=ob.x-Ya/2,lb=ob.y-Db/2,ta=new N(La,lb,La+Ya,lb+Db,this.spatialReference)):Y&&(ta=Y.end));ta?(this._extentDfd&&-1===this._extentDfd.fired&&(this._extentDfd.then(null,V),this._extentDfd.reject()),this._extentDfd=Ja,this.__setExtent(ta,null,qb,xa,Y,Da)):Ja.reject();return Ja},__setExtent:function(Y,
ka,ta,xa,Da,Ja){try{if(this._firstLayerId)this.extent=Y;else{var La=!0,Ya=this.spatialReference,Ua=Da?Da.divExtent:this.extent,Ta=this._fixExtent(Y,xa||!1);Y=Ta.extent;var ab=Y.getWidth(),fb=Y.getHeight(),kb=Math.round;if(Ua){var qb=kb(1E6*Ua.getWidth()),ob=kb(1E6*ab),wb=kb(1E6*Ua.getHeight()),Fb=kb(1E6*fb);La=qb!==ob||wb!==Fb}var yb,lb=Da&&Da.rect,Db=Da&&Da.divExtent;if(Ha.zoomDuration&&La&&Ua){Db=Db||new N(Ua);lb=lb||{left:Ua.xmin,top:Ua.ymax,width:Ua.getWidth(),height:Ua.getHeight()};var Sb={left:Y.xmin,
top:Y.ymax,width:ab,height:fb};var Eb=new P(Y.xmin,Y.ymax,Ya),Hb=new P(Y.xmin,Y.ymin,Ya),Pb=new P(this.extent.xmin,this.extent.ymax,Ya),Zb=new P(this.extent.xmin,this.extent.ymin,Ya);(yb=W.getLineIntersection(Pb,Eb,Zb,Hb,Ya))||Da||(La=!1)}this._ratioW=this.width/ab;this._ratioH=this.height/fb;var Qb=this._zoomAnimDiv;if(La)if(za(this._layersDiv,{left:"0px",top:"0px"}),ka=new I(0,0),this.__visibleRect.x=this.__visibleRect.y=0,lb&&Sb){this._delta=ka;Qb.id="_zAD";Qb.startingExtent=Db;Qb.extent=Y;Qb.levelChange=
La;Qb.newLod=Ta.lod;Qb.anchor=ta?ta:!yb&&Da?Da.anchor:Ga(this.extent,this.width,this.height,yb);var cc=this.extent.getWidth()/Y.getWidth();Ha.zoomAnimationThrottled&&1024<(1>cc?1/cc:cc)?(this.__zoomStart(Db,Qb.anchor),this.__zoom(Db,1,Qb.anchor),this._fireOnScale(1,Qb.anchor,!0),this.__zoomEnd(Y,cc,Qb.anchor,Ta.lod,La)):(this._zoomAnim=w.resize({node:Qb,start:lb,end:Sb,duration:Ha.zoomDuration,rate:Ha.zoomRate,beforeBegin:Da?null:this._zoomStartHandler,onAnimate:this._zoomingHandler,onEnd:this._zoomEndHandler}).play(),
this._fireOnScale(cc,Qb.anchor,Ja))}else this._updateExtent(Y,La,Ja),this._fireExtChg([this.extent,ka,La,this.__LOD=Ta.lod]);else if(!this.__panning)if(!1===this.loaded||Ja)this._updateExtent(Y,La,Ja),this._fireExtChg([this.extent,ka,La,this.__LOD=Ta.lod]);else{this.__panning=!0;lb=(new L(0,0,this.width,this.height,this.spatialReference)).getCenter();lb.x=kb(lb.x);lb.y=kb(lb.y);var Ub=this._delta=this.toScreen(Y.getCenter()),wc=Math.abs(lb.x-Ub.x),ic=Math.abs(lb.y-Ub.y);this.optimizePanAnimation&&
(wc>2*this.width||ic>2*this.height)?(this.__panStart(0,0),this.__pan(0,0),this.__visibleRect.x=this.__visibleRect.y=this.__visibleDelta.x=this.__visibleDelta.y=0,this.__panning=!1,this._delta=null,this._updateExtent(Y,!1,Ja),this.onPanEnd(this.extent,new I(0,0)),this._fireExtChg([this.extent,new I(0,0),!0,this.__LOD])):(this.onPanStart(this.extent,new I(0,0)),this._panAnim=w.slideTo({node:Qb,left:lb.x-Ub.x,top:lb.y-Ub.y,duration:Ha.panDuration,rate:Ha.panRate,onAnimate:this._panningHandler,onEnd:this._panEndHandler}),
this._panAnim.play())}}}catch(jc){}},_fireOnScale:function(Y,ka,ta){if("css-transforms"===this.navigationMode){var xa=this.__visibleDelta;this.onScale(v.scaleAt(Y,{x:-1*(this.width/2-(ka.x-xa.x)),y:-1*(this.height/2-(ka.y-xa.y))}),ta)}},_stopAnim:function(){var Y=this._zoomAnim,ka=this._panAnim;if(Y&&Y._active){Y.stop();ka=Y.curve.getValue(Y._getStep());var ta=parseFloat(ka.left),xa=parseFloat(ka.top);Y=Y.node;return{anchor:Y.anchor,start:Y.startingExtent,end:Y.extent,level:Y.newLod&&Y.newLod.level,
rect:ka,divExtent:new N(ta,xa-parseFloat(ka.height),ta+parseFloat(ka.width),xa,this.spatialReference)}}ka&&ka._active&&(ka.stop(),ka._fire("onEnd",[ka.node]))},__getExtentForLevel:function(Y,ka,ta){var xa=this.__tileInfo;xa=xa&&xa.lods;Y=C.isDefined(Y)?Y:0;ta=ta||this.extent;ka=ka||ta&&ta.getCenter();if(xa){if(ka){ta=this.getMinZoom();var Da=this.getMaxZoom();Y>Da&&(Y=Da);Y<ta&&(Y=ta);Y=xa[Y];xa=this.width*Y.resolution/2;ta=this.height*Y.resolution/2;return{extent:new N(ka.x-xa,ka.y-ta,ka.x+xa,ka.y+
ta,ka.spatialReference),lod:Y}}}else return ta?{extent:ta.expand(!Y||1>Y?1:Y).centerAt(ka)}:void 0},_jobs:0,_incr:function(){1===++this._jobs&&(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart())},_decr:function(){var Y=--this._jobs;Y?0>Y&&(this._jobs=0):(this.updating=!1,this.attr("data-updating"),this.onUpdateEnd())},_fireEvent:function(Y,ka){this[Y]&&this[Y].apply(this,ka)},_updateExtent:function(Y,ka,ta){this.extent=Y;Y=this.spatialReference;this._viewInfo={view:new Q({viewingMode:"map",
scale:this.getScale()}),sr:Y,version:ka?++oa:oa};(ka||ta)&&this._setClipRect();this._calcGeographicExtent()},_calcGeographicExtent:function(){var Y=this.spatialReference;Y&&(Y.isWebMercator()?this.geographicExtent=ia.webMercatorToGeographic(this._getAvailExtent(),!0):4326===Y.wkid&&(this.geographicExtent=new N(this._getAvailExtent().toJson())))},_fireExtChg:function(Y){this.attr("data-zoom",this.getZoom());this.attr("data-scale",this.getScale());this._fireEvent("onExtentChange",Y);if(Y=this._extentDfd)delete this._extentDfd,
Y.resolve()},attr:function(Y,ka){var ta=this.container;ta&&(null==ka?ta.removeAttribute(Y):ta.setAttribute(Y,ka));return this},onUpdateStart:function(){},onUpdateEnd:function(){},onLoad:function(){this._setClipRect();this._calcGeographicExtent()},onBeforeUnload:function(){},onUnload:function(){},onExtentChange:function(Y,ka,ta){},onTimeExtentChange:function(){},onWebGLEnabledChange:function(){},onLayerAdd:function(){},onLayerAddResult:function(){},onLayersAddResult:function(){},onLayerRemove:function(){},
onLayersRemoved:function(){},onLayerReorder:function(){},onLayersReordered:function(){},onLayerSuspend:function(){},onLayerResume:function(){},onPanStart:function(){},onPan:function(){},onPanEnd:function(){},onScale:function(){},onZoomStart:function(){},onZoom:function(){},onZoomEnd:function(){},onResize:function(){this._setClipRect()},onReposition:function(){},destroy:function(){this._destroyed||(this.onBeforeUnload(this),this.removeAllLayers(),this.releaseAllWebGLContexts(),this._cleanUp(),clearTimeout(this._resizeTimerHandle),
this._gc&&this._gc._cleanUp(),this._destroyed=!0,this.onUnload(this))},setCursor:function(Y){za(this.__container,"cursor",this.cursor=Y)},setMapCursor:function(Y){this.setCursor(this._cursor=Y)},resetMapCursor:function(){this.setCursor(this._cursor)},setBackgroundColor:function(Y){Y&&!Y.declaredClass&&(Y=new J(Y));this.backgroundColor=Y||null;var ka="";Y&&(ka=9>b("ie")?Y.toHex():"rgba("+Y.toRgba().join(",")+")");g.set(this.root,{backgroundColor:ka})},setInfoWindow:function(Y){var ka=this.infoWindow;
ka&&ka.unsetMap(this);this.infoWindow=Y;this.loaded&&Y&&Y.setMap(this)},setInfoWindowOnClick:function(Y){this._params.showInfoWindowOnClick=Y;this.popupManager&&this.popupManager.set("enabled",Y)},getInfoWindowAnchor:function(Y){return this.infoWindow&&this.infoWindow._getAnchor&&this.infoWindow._getAnchor(Y)||"upperright"},toScreen:function(Y,ka){return Ga(this.extent,this.width,this.height,Y,ka)},toMap:function(Y){return va(this.extent,this.width,this.height,Y)},addLayer:function(Y,ka){Y&&!this.getLayer(Y.id)&&
this._addLayer(Y,Y instanceof R?this.graphicsLayerIds:this.layerIds,ka);return Y},addLayers:function(Y){var ka=[],ta=Y.length,xa,Da=Y.length;var Ja=c.connect(this,"onLayerAddResult",function(La,Ya){-1!==e.indexOf(Y,La)&&(ta--,ka.push({layer:La,success:!Ya,error:Ya}),ta||(c.disconnect(Ja),this.onLayersAddResult(ka)))});for(xa=0;xa<Da;xa++)this.addLayer(Y[xa]);return this},removeLayer:function(Y,ka){var ta=Y.id,xa=Y instanceof R?this.graphicsLayerIds:this.layerIds,Da=Fa(xa,ta);0<=Da&&(this._forgetLayer(Y),
xa.splice(Da,1),this.loaded||this._firstLayerId!==ta||(this._firstLayerId=null),Y instanceof R?this._detachGraphicsLayer(Y):Y.loaded&&(Y.getMap()&&Y._unsetMap(this,this._layersDiv),-1!==Y.declaredClass.indexOf("VETiledLayer")&&this._onBingLayerRemove(Y)),delete this._layers[ta],delete this._layerDivs[ta],ka||this._reorderLayers(xa),this.onLayerRemove(Y))},removeAllLayers:function(){var Y=this.layerIds,ka;for(ka=Y.length-1;0<=ka;ka--)this.removeLayer(this._layers[Y[ka]],1);Y=this.graphicsLayerIds;
for(ka=Y.length-1;0<=ka;ka--)this.removeLayer(this._layers[Y[ka]],1);this.onLayersRemoved()},reorderLayer:function(Y,ka){t.isString(Y)&&(l.deprecated(this.declaredClass+": Map.reorderLayer(/*String*/ id, /*Number*/ index) deprecated. Use Map.reorderLayer(/*Layer*/ layer, /*Number*/ index).",null,"v2.0"),Y=this.getLayer(Y));var ta=Y.id,xa=Y instanceof R?this.graphicsLayerIds:this.layerIds;0>ka?ka=0:ka>=xa.length&&(ka=xa.length-1);Y=Fa(xa,ta);-1!==Y&&Y!==ka&&(xa.splice(Y,1),xa.splice(ka,0,ta),this._reorderLayers(xa))},
getLayer:function(Y){return this._layers[Y]},setWebGLEnabled:function(Y){var ka=this.webglEnabled;this.webglEnabled=(Y||!1)&&pa;if(ka!==this.webglEnabled)this.onWebGLEnabledChange()},isWebGLContextAvailable:function(){return ha.isContextAvailable()&&(-1===this.maxWebGLContexts||0<this.maxWebGLContexts&&this._webglContextOwners.length<this.maxWebGLContexts)},ownsWebGLContext:function(Y){return-1!==e.indexOf(this._webglContextOwners,Y)},acquireWebGLContext:function(Y){return-1!==e.indexOf(this._webglContextOwners,
Y)?!0:this.isWebGLContextAvailable()?(ha.acquireContext(Y),this._webglContextOwners.push(Y),!0):!1},releaseWebGLContext:function(Y){var ka=e.indexOf(this._webglContextOwners,Y);-1!==ka&&this._webglContextOwners.splice(ka,1);ha.releaseContext(Y)},releaseAllWebGLContexts:function(){var Y=this._webglContextOwners.slice(0);e.forEach(Y,function(ka){this.releaseWebGLContext(ka)},this)},syncHitTestForWebGL:function(Y){var ka,ta=Y.screenPoint;Y=this.graphicsLayerIds.slice(0).reverse();e.some(Y,function(xa){xa=
this.getLayer(xa);xa.loaded&&!xa.suspended&&xa.hasWebGLSurface()&&(ka=xa._div.syncHitTest(ta.x,ta.y));return!!ka},this);return ka},setExtent:function(Y,ka){Y=new N(Y.toJson());var ta=Y.getWidth(),xa=Y.getHeight();return 0===ta&&0===xa?this.centerAt(new P({x:Y.xmin,y:Y.ymin,spatialReference:Y.spatialReference&&Y.spatialReference.toJson()})):this._extentUtil(null,null,Y,ka)},getTargetExtent:function(Y){if(Y)return Y=new N(Y.toJson()),0!==Y.getWidth()&&0!==Y.getHeight()&&(Y=(Y=this._convertGeometry(this,
Y))&&this._fixExtent(Y).extent),Y},centerAt:function(Y){return this._extentUtil(null,{mapCenter:Y})},centerAndZoom:function(Y,ka){return this._extentUtil({targetLevel:ka,mapCenter:Y,levelOrFactor:!0})},getScale:function(){return this.__LOD?this.__LOD.scale:Z.getScale(this)},getResolution:function(){return this.__LOD?this.__LOD.resolution:this.extent?this.extent.getWidth()/this.width:0},getResolutionInMeters:function(){return this.getResolution()*Z.getUnitValueForSR(this.spatialReference)},getResolutionForPopup:function(){var Y=
this.getResolution(),ka=this.getResolutionInMeters(),ta=ka/16;return 10>=ta?0:Y/ka*ta},getMinResolution:function(){return this._minResolution},getMaxResolution:function(){return this._maxResolution},getMinScale:function(){return this._params.minScale},getMaxScale:function(){return this._params.maxScale},getViewInfo:function(){return this._viewInfo},setScale:function(Y){return this._extentUtil({targetScale:Y})},getLayersVisibleAtScale:function(Y){var ka=[];(Y=Y||this.getScale())&&e.forEach(this.layerIds.concat(this.graphicsLayerIds),
function(ta){ta=this.getLayer(ta);ta.isVisibleAtScale(Y)&&ka.push(ta)},this);return ka},getNumLevels:function(){var Y=this.getMinZoom(),ka=this.getMaxZoom();return Y===ka&&0>Y?0:ka-Y+1},getLevel:function(){return this.__LOD?this.__LOD.level:-1},setLevel:function(Y){if(-1<Y)return this._extentUtil({targetLevel:Y})},getZoom:function(){return this.getLevel()},setZoom:function(Y){return this.setLevel(Y)},getMinZoom:function(){return this._params.minZoom},getMaxZoom:function(){return this._params.maxZoom},
setBasemap:function(Y){if(t.isObject(Y)){var ka=Y;Y=ka.title}else ka=E&&E[Y];if(ka){this._basemapDfd&&!this._basemapDfd.isFulfilled()&&this._basemapDfd.cancel();var ta=[],xa=0;e.forEach(ka.baseMapLayers||ka.layers,function(Ja){var La={id:Ja.id,displayLevels:Ja.displayLevels,opacity:C.isDefined(Ja.opacity)?Ja.opacity:null,visible:C.isDefined(Ja.visibility)?Ja.visibility:null};if(La=this._createBaseLayerInstance(Ja,La,Y))ta.push(La),Ja.isReference||xa++},this);ta.length&&xa&&(this._basemapDfd=K(ta).otherwise(wa(this,
function(Ja){this._basemapPending=!1;Ja&&"cancel"===Ja.dojoType&&e.forEach(ta,function(La){La.cancel()});throw Ja;})).then(function(Ja){var La=[],Ya=[];e.forEach(Ja,function(Ua){Ua&&(Ua.layerInfo&&La.push(Ua.layerInfo),Ua.layer&&Ya.push(Ua.layer))});return{basemapName:Y,infos:La,layers:Ya}}).then(wa(this,this._waitForBaseLayers)).then(wa(this,this._setBasemap)),this._basemapPending=!this.loaded&&!this._basemapDfd.isFulfilled())}else{ka=[];for(var Da in E)ka.push(Da)}},_createBaseLayerInstance:function(Y,
ka,ta){var xa=new u;if(Y.type)switch(Y.type){case "OpenStreetMap":xa.resolve({layerInfo:Y,layer:new ea(ka)});break;case "VectorTile":f(["./layers/VectorTileLayer"],function(Ja){Da=F.normalize(Y.url);xa.promise.isFulfilled()||xa.resolve({layerInfo:Y,layer:new Ja(Da,ka)})});break;default:return null}else{var Da=F.normalize(Y.url);xa.resolve({layerInfo:Y,layer:new X(Da,ka)})}return xa.promise},_waitForBaseLayers:function(Y){var ka=new u(A._dfdCanceller);ka.promise.otherwise(function(xa){if(xa&&"cancel"===
xa.dojoType){for(var Da in ka._layerEvents)xa=ka._layerEvents[Da],c.disconnect(xa[0]),c.disconnect(xa[1]);delete ka._layerEvents}});if(!this.loaded)return ka.resolve(Y),ka.promise;var ta=function(xa){ka._pendingLayers--;xa=e.indexOf(Y.layers,this);-1<xa&&(xa=ka._layerEvents[xa])&&(c.disconnect(xa[0]),c.disconnect(xa[1]));0>=ka._pendingLayers&&(delete ka._layerEvents,ka.isFulfilled()||ka.resolve(Y))};ka._pendingLayers=0;ka._layerEvents={};e.forEach(Y.layers,function(xa,Da){xa&&ka._pendingLayers++});
e.forEach(Y.layers,function(xa,Da){xa&&(xa.loaded?ta(xa):ka._layerEvents[Da]=[c.connect(xa,"onLoad",xa,ta),c.connect(xa,"onError",xa,ta)])});return ka.promise},_setBasemap:function(Y){var ka=Y.layers,ta=Y.infos,xa=0,Da=!0;this._basemapPending=!1;this.loaded&&(e.forEach(ka,function(La,Ya){La.loaded&&(ta[Ya].isReference||xa++)}),Da=xa);if(Da){if(Da=this._getBasemapLayerIds()){var Ja={basemapName:this._basemap,infos:E&&E[this._basemap]&&E[this._basemap].baseMapLayers};Ja.basemapName||(e.forEach(Da,function(La){if(this.getLayer(La)instanceof
ea)return Ja.basemapName="osm",Ja.infos=E&&E.osm&&E.osm.baseMapLayers,!1},this),Ja.basemapName||(Ja=null))}this._removeBasemap(Da);this._basemap=Y.basemapName;this.basemapLayerIds=this._addBasemapLayers(ka,ta);this.attr("data-basemap",this.getBasemap());this.emit("basemap-change",{current:Y,previous:Ja})}},_getBasemapLayerIds:function(){var Y=[];e.forEach(this.layerIds,function(ka){ka=this.getLayer(ka);ka._basemapGalleryLayerType&&Y.push(ka.id)},this);return Y},_addBasemapLayers:function(Y,ka){var ta=
[],xa=[],Da=0;e.forEach(Y,function(Ja,La){ka[La].isReference?ta.push(Ja):(Ja._basemapGalleryLayerType="basemap",this.addLayer(Ja,Da++),xa.push(Ja.id))},this);ta.length&&e.forEach(ta,function(Ja){Ja.attr("data-reference",!0);Ja._basemapGalleryLayerType="reference";this.addLayer(Ja,"top");xa.push(Ja.id)},this);return xa},_removeBasemap:function(Y){e.forEach(Y,function(ka){(ka=this.getLayer(ka))&&this.removeLayer(ka)},this)},getBasemap:function(){return this._basemap||""},translate:function(Y,ka){Y=
Y||0;ka=ka||0;if(!this._txTimer){this._tx=this._ty=0;var ta=this.toScreen(this.extent.getCenter());this.__panStart(ta.x,ta.y)}this._tx+=Y;this._ty+=ka;this.__pan(this._tx,this._ty);clearTimeout(this._txTimer);this._txTimer=setTimeout(this._endTranslate,150)},_endTranslate:function(){clearTimeout(this._txTimer);this._txTimer=null;var Y=this._tx,ka=this._ty;this._tx=this._ty=0;this.__panEnd(Y,ka)},setTimeExtent:function(Y){Y=(this.timeExtent=Y)?new Y.constructor(Y.toJson()):null;this.onTimeExtentChange(Y)},
setTimeSlider:function(Y){this.timeSlider&&(ja(this._tsTimeExtentChange_connect),this.timeSlider=this._tsTimeExtentChange_connect=null);Y&&(this.timeSlider=Y,this.setTimeExtent(Y.getCurrentTimeExtent()),this._tsTimeExtentChange_connect=ca(Y,"onTimeExtentChange",this,"setTimeExtent"))},setVisibility:function(Y){if(this.visible!==Y){this.visible=Y;Y||(this._display=this.container.style.display);this.container.style.display=Y?this._display:"none";if(this.autoResize){var ka=Y?"resume":"pause";this._rszSignal[ka]();
this._oriSignal[ka]()}Y&&this.resize()}return this},resize:function(Y){clearTimeout(this._resizeTimerHandle);this._destroyed||(!0===Y?this._execResize():this._resizeTimerHandle=setTimeout(this._execResize,this.resizeDelay))},_timedResize:function(){this._resizeTimerHandle||this._execResize()},_execResize:function(){clearTimeout(this._resizeTimerHandle);this._resizeTimerHandle=null;this.reposition();this._resize();this.autoResize&&this._startResizeTimer()},_resize:function(){var Y=this.width,ka=this.height,
ta=g.get(this.container,"display"),xa=k.getContentBox(this.container);if(!("none"===ta||0>=xa.w||0>=xa.h||Y===xa.w&&ka===xa.h)){if(ta=this._zoomAnim||this._panAnim)ta.stop(),ta._fire("onEnd",[ta.node]);za(this.root,{width:(this.width=xa.w)+"px",height:(this.height=xa.h)+"px"});xa=this.width;ta=this.height;this.attribution&&this.attribution.domNode&&g.set(this.attribution.domNode,"maxWidth",Math.floor(xa*this._mapParams.attributionWidth)+"px");this.__visibleRect.update(this.__visibleRect.x,this.__visibleRect.y,
xa,ta);this.__visibleDelta.update(this.__visibleDelta.x,this.__visibleDelta.y,xa,ta);var Da=new L(this.extent);Y=(new L(Da.x,Da.y,xa/Y*Da.width,ta/ka*Da.height,this.spatialReference)).getExtent();this.onResize(Y,xa,ta);this._extentUtil(null,null,Y,null,!0)}},reposition:function(){var Y=this.position,ka=Y.x,ta=Y.y;this._reposition();Y=this.position;if(ka!==Y.x||ta!==Y.y)this.onReposition(Y.x,Y.y)},_reposition:function(){var Y=k.position(this.container,!0),ka=k.getPadBorderExtents(this.container);this.position.update(Y.x+
ka.l,Y.y+ka.t)},_setClipRect:function(){delete this._clip;var Y=7>=b("ie")||void 0===b("ie")&&7<=b("trident")?"rect(auto,auto,auto,auto)":"auto";if(this.wrapAround180){var ka=this.width,ta=this.height,xa=this._getFrameWidth(),Da=ka-xa;0<Da&&(Y=Da/2,Y="rect(0px,"+(Y+xa)+"px,"+ta+"px,"+Y+"px)",ta=this.extent.getWidth(),ka=xa/ka*ta,this._clip=[(ta-ka)/2,ka])}za(this.__container,"clip",Y)},_getAvailExtent:function(){var Y=this.extent,ka=this._clip;if(ka){if(!Y._clip){var ta=new L(Y);ta.width=ka[1];ta.x+=
ka[0];Y._clip=ta.getExtent()}return Y._clip}return Y},_fixedPan:function(Y,ka){return this._extentUtil(null,{dx:Y,dy:ka})},panUp:function(){return this._fixedPan(0,-.75*this.height)},panUpperRight:function(){return this._fixedPan(.75*this.width,-.75*this.height)},panRight:function(){return this._fixedPan(.75*this.width,0)},panLowerRight:function(){return this._fixedPan(.75*this.width,.75*this.height)},panDown:function(){return this._fixedPan(0,.75*this.height)},panLowerLeft:function(){return this._fixedPan(-.75*
this.width,.75*this.height)},panLeft:function(){return this._fixedPan(-.75*this.width,0)},panUpperLeft:function(){return this._fixedPan(-.75*this.width,-.75*this.height)},enableSnapping:function(Y){Y=Y||{};if("esri.SnappingManager"===Y.declaredClass)this.snappingManager=Y;else{var ka=ya++,ta=this;this._rids&&this._rids.push(ka);f(["./SnappingManager"],function(xa){var Da=ta._rids?e.indexOf(ta._rids,ka):-1;-1!==Da&&(ta._rids.splice(Da,1),ta.snappingManager=new xa(t.mixin({map:ta},Y)))})}return this.snappingManager},
disableSnapping:function(){this.snappingManager&&this.snappingManager.destroy();this.snappingManager=null},_createLabelLayer:function(){!this._labels&&Ea&&this.loaded&&(this._labels=new Ea({id:"_internal_LabelLayer"}),this._labels._setMap(this,this._gc._surface),this._processLabelLayers(),this.on("layers-reordered",this._processLabelLayers))},_processLabelLayers:function(){null==this._labelProcessor&&(this._labelProcessor=setTimeout(this._updateLabelLayers,0))},_updateLabelLayers:function(){this._labelProcessor=
null;this._labels&&(this._labels.removeAllFeatureLayers(),e.forEach(this.graphicsLayerIds,function(Y){Y=this.getLayer(Y);"function"===typeof Y.applyEdits?this._labels.addFeatureLayer(Y):"esri.layers.WFSLayer"===Y.declaredClass&&this._labels.addFeatureLayer(Y)},this))},_getMapImageLyr:function(){this.loaded&&!this._mapImageLyr&&(this._mapImageLyr=new fa,this._mapImageLyr._setMap(this,this._layersDiv),this._placeMapImageLyr());return this._mapImageLyr},_placeMapImageLyr:function(){for(var Y=this.layerIds,
ka=this._layerDivs,ta=!1,xa,Da,Ja=Y.length-1;0<=Ja;Ja--)if(xa=Y[Ja],Da=this.getLayer(xa),xa=ka[xa],Da&&xa&&!Da._isReference){n.place(this._mapImageLyr._div,xa,"after");ta=!0;break}ta||n.place(this._mapImageLyr._div,this._layersDiv,"first")}});return y._CoreMap=d})},"esri/basemaps":function(){define(["require","dojo/has","./kernel","dojo/i18n!./nls/jsapi"],function(f,B,l,d){f={streets:{title:d.basemaps.streets,thumbnailUrl:f.toUrl("./images/basemap/streets.jpg"),itemId:"d8855ee4d3d74413babfb0f41203b168",
baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]},satellite:{title:d.basemaps.satellite,thumbnailUrl:f.toUrl("./images/basemap/satellite.jpg"),itemId:"86de95d4e0244cba80f0fa2c9403a7b2",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]},hybrid:{title:d.basemaps.hybrid,thumbnailUrl:f.toUrl("./images/basemap/hybrid.jpg"),itemId:"413fd05bbd7342f5991d5ec96f4f8b18",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},
{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",isReference:!0}]},terrain:{title:d.basemaps.terrain,thumbnailUrl:f.toUrl("./images/basemap/terrain.jpg"),itemId:"aab054ab883c4a4094c72e949566ad40",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",isReference:!0}]},topo:{title:d.basemaps.topo,
thumbnailUrl:f.toUrl("./images/basemap/topo.jpg"),itemId:"6e03e8c26aad4b9c92a87c1063ddb0e3",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}]},gray:{title:d.basemaps.gray,thumbnailUrl:f.toUrl("./images/basemap/gray.jpg"),itemId:"8b3b470883a744aeb60e5fff0a319ce7",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",
isReference:!0}]},"dark-gray":{title:d.basemaps["dark-gray"],thumbnailUrl:f.toUrl("./images/basemap/dark-gray.jpg"),itemId:"da65bacab5bd4defb576f839b6b28098",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",isReference:!0}]},oceans:{title:d.basemaps.oceans,thumbnailUrl:f.toUrl("./images/basemap/oceans.jpg"),itemId:"48b8cec7ebf04b5fbdcaf70d09daff21",
baseMapLayers:[{url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",isReference:!0}]},"national-geographic":{title:d.basemaps["national-geographic"],thumbnailUrl:f.toUrl("./images/basemap/national-geographic.jpg"),itemId:"509e2d6b034246d692a461724ae2d62c",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"}]},
osm:{title:d.basemaps.osm,thumbnailUrl:f.toUrl("./images/basemap/osm.jpg"),itemId:"5d2bfa736f8448b3a1708e1f6be23eed",baseMapLayers:[{type:"OpenStreetMap"}]},"dark-gray-vector":{title:d.basemaps["dark-gray"],thumbnailUrl:f.toUrl("./images/basemap/dark-gray.jpg"),itemId:"c11ce4f7801740b2905eb03ddc963ac8",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/c11ce4f7801740b2905eb03ddc963ac8/resources/styles/root.json",type:"VectorTile"}]},"gray-vector":{title:d.basemaps.gray,thumbnailUrl:f.toUrl("./images/basemap/gray.jpg"),
itemId:"8a2cba3b0ebf4140b7c0dc5ee149549a",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/8a2cba3b0ebf4140b7c0dc5ee149549a/resources/styles/root.json",type:"VectorTile"}]},"streets-vector":{title:d.basemaps.streets,thumbnailUrl:f.toUrl("./images/basemap/streets.jpg"),itemId:"de26a3cf4cc9451298ea173c4b324736",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",type:"VectorTile"}]},"topo-vector":{title:d.basemaps.topo,
thumbnailUrl:f.toUrl("./images/basemap/topo.jpg"),itemId:"7dc6cea0b1764a1f9af2e679f642f0f5",baseMapLayers:[{url:"https://services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{url:"https://www.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",type:"VectorTile"}]},"streets-night-vector":{title:d.basemaps["streets-night-vector"],thumbnailUrl:f.toUrl("./images/basemap/streets-night.jpg"),itemId:"86f556a2d1fd468181855a35e344567f",
baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",type:"VectorTile"}]},"streets-relief-vector":{title:d.basemaps["streets-relief-vector"],thumbnailUrl:f.toUrl("./images/basemap/streets-relief.jpg"),itemId:"b266e6d17fc345b498345613930fbd76",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",type:"VectorTile"}]},"streets-navigation-vector":{title:d.basemaps["streets-navigation-vector"],
thumbnailUrl:f.toUrl("./images/basemap/streets-navigation.jpg"),itemId:"63c47b7177f946b49902c24129b87252",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",type:"VectorTile"}]}};return l.basemaps=f})},"esri/fx":function(){define("dojo/_base/connect dojo/_base/fx dojo/_base/lang dojo/dom dojo/dom-geometry dojo/dom-style dojo/fx dojo/has ./kernel".split(" "),function(f,B,l,d,c,u,t,e,r){e={animateRange:function(m){var a=
m.range;return new B.Animation(l.mixin({curve:new B._Line(a.start,a.end)},m))},resize:function(m){var a=m.node=d.byId(m.node),h=m.start,q=m.end;h||(h=c.getMarginBox(a),a=c.getPadBorderExtents(a),h=m.start={left:h.l+a.l,top:h.t+a.t,width:h.w-a.w,height:h.h-a.h});q||(q=m.anchor?m.anchor:{x:h.left,y:h.top},a=m.size,q=m.end={left:h.left-(a.width-h.width)*(q.x-h.left)/h.width,top:h.top-(a.height-h.height)*(q.y-h.top)/h.height,width:a.width,height:a.height});return B.animateProperty(l.mixin({properties:{left:{start:h.left,
end:q.left},top:{start:h.top,end:q.top},width:{start:h.width,end:q.width},height:{start:h.height,end:q.height}}},m))},slideTo:function(m){var a=m.node=d.byId(m.node),h=u.getComputedStyle,q=null,n=null,k=function(){return function(){var g="absolute"==a.style.position?"absolute":"relative";q="absolute"==g?a.offsetTop:parseInt(h(a).top)||0;n="absolute"==g?a.offsetLeft:parseInt(h(a).left)||0;"absolute"!=g&&"relative"!=g&&(g=c.position(a,!0),q=g.y,n=g.x,a.style.position="absolute",a.style.top=q+"px",a.style.left=
n+"px")}}();k();m=B.animateProperty(l.mixin({properties:{top:{start:q,end:m.top||0},left:{start:n,end:m.left||0}}},m));f.connect(m,"beforeBegin",m,k);return m},flash:function(m){m=l.mixin({end:"#f00",duration:500,count:1},m);m.duration/=2*m.count;var a=d.byId(m.node),h=m.start;h||(h=u.getComputedStyle(a).backgroundColor);var q=m.end,n=[],k=m.count;a={node:a,duration:m.duration};for(m=0;m<k;m++)n.push(B.animateProperty(l.mixin({properties:{backgroundColor:{start:h,end:q}}},a))),n.push(B.animateProperty(l.mixin({properties:{backgroundColor:{start:q,
end:h}}},a)));return t.chain(n)}};l.mixin(l.getObject("fx",!0,r),e);return e})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),function(f,B,l,d,c,u,t,e,r,m,a){l.isAsync||m(0,function(){a(["./fx/Toggler"])});l=l.fx={};m={_fire:function(n,k){this[n]&&this[n].apply(this,k||[]);return this}};var h=function(n){this._index=-1;this._animations=n||[];this._current=this._onAnimateCtx=this._onEndCtx=
null;this.duration=0;d.forEach(this._animations,function(k){k&&("undefined"!=typeof k.duration&&(this.duration+=k.duration),k.delay&&(this.duration+=k.delay))},this)};h.prototype=new B;f.extend(h,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove();this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=c.after(this._current,
"onAnimate",f.hitch(this,"_onAnimate"),!0),this._onEndCtx=c.after(this._current,"onEnd",f.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(n,k){this._current||(this._current=this._animations[this._index=0]);if(!k&&"playing"==this._current.status())return this;var g=c.after(this._current,"beforeBegin",f.hitch(this,function(){this._fire("beforeBegin")}),!0),b=c.after(this._current,"onBegin",f.hitch(this,function(v){this._fire("onBegin",arguments)}),!0),x=c.after(this._current,"onPlay",
f.hitch(this,function(v){this._fire("onPlay",arguments);g.remove();b.remove();x.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=c.after(this._current,"onAnimate",f.hitch(this,"_onAnimate"),!0);this._onEndCtx&&this._onEndCtx.remove();this._onEndCtx=c.after(this._current,"onEnd",f.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var n=c.after(this._current,"onPause",f.hitch(this,function(k){this._fire("onPause",
arguments);n.remove()}),!0);this._current.pause()}return this},gotoPercent:function(n,k){this.pause();var g=this.duration*n;this._current=null;d.some(this._animations,function(b,x){if(g<=b.duration)return this._current=b,this._index=x,!0;g-=b.duration;return!1},this);this._current&&this._current.gotoPercent(g/this._current.duration);k&&this.play();return this},stop:function(n){if(this._current){if(n){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=
this._animations[this._index]}var k=c.after(this._current,"onStop",f.hitch(this,function(g){this._fire("onStop",arguments);k.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this.stop();this._onAnimateCtx&&this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});f.extend(h,m);l.chain=function(n){return new h(f.isArray(n)?n:Array.prototype.slice.call(n,0))};var q=function(n){this._animations=n||
[];this._connects=[];this.duration=this._finished=0;d.forEach(n,function(g){var b=g.duration;g.delay&&(b+=g.delay);this.duration<b&&(this.duration=b);this._connects.push(c.after(g,"onEnd",f.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=new u.Animation({curve:[0,1],duration:this.duration});var k=this;d.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),function(g){k._connects.push(c.after(k._pseudoAnimation,g,function(){k._fire(g,arguments)},!0))})};f.extend(q,
{_doAction:function(n,k){d.forEach(this._animations,function(g){g[n].apply(g,k)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(n,k){var g=this._pseudoAnimation;g[n].apply(g,k)},play:function(n,k){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(n,k){var g=this.duration*n;d.forEach(this._animations,
function(b){b.gotoPercent(b.duration<g?1:g/b.duration,k)});this._call("gotoPercent",arguments);return this},stop:function(n){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){this.stop();d.forEach(this._connects,function(n){n.remove()})}});f.extend(q,m);l.combine=function(n){return new q(f.isArray(n)?n:Array.prototype.slice.call(n,0))};l.wipeIn=function(n){var k=n.node=t.byId(n.node),g=k.style,b;n=
u.animateProperty(f.mixin({properties:{height:{start:function(){b=g.overflow;g.overflow="hidden";if("hidden"==g.visibility||"none"==g.display)return g.height="1px",g.display="",g.visibility="",1;var v=e.get(k,"height");return Math.max(v,1)},end:function(){return k.scrollHeight}}}},n));var x=function(){g.height="auto";g.overflow=b};c.after(n,"onStop",x,!0);c.after(n,"onEnd",x,!0);return n};l.wipeOut=function(n){var k=(n.node=t.byId(n.node)).style,g;n=u.animateProperty(f.mixin({properties:{height:{end:1}}},
n));c.after(n,"beforeBegin",function(){g=k.overflow;k.overflow="hidden";k.display=""},!0);var b=function(){k.overflow=g;k.height="auto";k.display="none"};c.after(n,"onStop",b,!0);c.after(n,"onEnd",b,!0);return n};l.slideTo=function(n){var k=null,g=null,b=function(x){return function(){var v=e.getComputedStyle(x),y=v.position;k="absolute"==y?x.offsetTop:parseInt(v.top)||0;g="absolute"==y?x.offsetLeft:parseInt(v.left)||0;"absolute"!=y&&"relative"!=y&&(v=r.position(x,!0),k=v.y,g=v.x,x.style.position=
"absolute",x.style.top=k+"px",x.style.left=g+"px")}}(n.node=t.byId(n.node));b();n=u.animateProperty(f.mixin({properties:{top:n.top||0,left:n.left||0}},n));c.after(n,"beforeBegin",b,!0);return n};return l})},"esri/layers/TileInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "),function(f,B,l,d,c,u,t,e,r){f=f(null,{declaredClass:"esri.layers.TileInfo",constructor:function(m){B.mixin(this,m);this.width=
this.cols;this.height=this.rows;this._levelToLOD={};m=this.spatialReference;var a=this.origin;m&&(m=this.spatialReference=new t(m.toJson?m.toJson():m));a&&(this.origin=new e(a.toJson?a.toJson():a),!a.spatialReference&&m&&this.origin.setSpatialReference(new t(m.toJson())));this.lods=l.map(this.lods,function(n){return new r(n)});l.forEach(this.lods,function(n){this._levelToLOD[n.level]=n},this);m=!1;a=this.spatialReference;var h=this.origin;if(a&&h){var q=a._getInfo();q&&(m=a._isWrappable()&&Math.abs(q.origin[0]-
h.x)<=q.dx)}this.isWrappable=m;this._initializeUpsampleLevels()},toJson:function(){return u.fixJson({rows:this.rows,cols:this.cols,dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&l.map(this.lods,function(m){return m.toJson()})})},lodAt:function(m){return this._levelToLOD&&this._levelToLOD[m]||null},updateTileInfo:function(m){var a=this.lodAt(m.level),
h=a.resolution*this.width;a=a.resolution*this.height;m.id=m.level+"/"+m.row+"/"+m.col;m.extent||(m.extent=[0,0,0,0]);m.extent[0]=this.origin.x+m.col*h;m.extent[1]=this.origin.y-(m.row+1)*a;m.extent[2]=m.extent[0]+h;m.extent[3]=m.extent[1]+a},upsampleTile:function(m){var a=this._upsampleLevels[m.level];if(!a||-1===a.parentLevel)return!1;m.level=a.parentLevel;m.row=Math.floor(m.row/a.factor+.001);m.col=Math.floor(m.col/a.factor+.001);this.updateTileInfo(m);return!0},_initializeUpsampleLevels:function(){var m=
this.lods;this._upsampleLevels=[];for(var a=null,h=0;h<m.length;h++){var q=m[h];this._upsampleLevels[q.level]={parentLevel:a?a.level:-1,factor:a?a.resolution/q.resolution:0};a=q}}});B.setObject("layers.TileInfo",f,c);return f})},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(f,B,l,d,c){f=f(null,{declaredClass:"esri.layers.LOD",constructor:function(u){B.mixin(this,u)},toJson:function(){return c.fixJson({level:this.level,levelValue:this.levelValue,
resolution:this.resolution,scale:this.scale})}});B.setObject("layers.LOD",f,d);return f})},"esri/layers/ArcGISTiledMapServiceLayer":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has dojo/io-query ../kernel ../urlUtils ../SpatialReference ./TiledMapServiceLayer ./ArcGISMapServiceLayer ./TileInfo ./TimeInfo ./TileMap".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k){B=B([a,h],{declaredClass:"esri.layers.ArcGISTiledMapServiceLayer",_agolAttrs:"Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" "),
_isReference:!1,_referenceLayers:"Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Reference Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Reference_Overlay Reference/World_Transportation".split(" "),constructor:function(g,b){b&&(b.roundrobin&&(f.deprecated(this.declaredClass+" : Constructor option 'roundrobin' deprecated. Use option 'tileServers'."),b.tileServers=b.roundrobin),this._setTileServers(b.tileServers),
this._loadCallback=b.loadCallback);this._params=l.mixin({},this._url.query);this._initLayer=l.hitch(this,this._initLayer);(g=b&&b.resourceInfo)?this._initLayer(g):(this._load=l.hitch(this,this._load),this._load())},_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_setTileServers:function(g){if(g&&0<g.length){this.tileServers=g;var b,x=g.length;for(b=0;b<x;b++)g[b]=r.urlToObject(g[b]).path}},_initLayer:function(g,b){this.inherited(arguments);this.resourceInfo=
c.toJson(g);this.tileInfo=new q(g.tileInfo);!1!==this.resampling&&(g.capabilities&&-1<g.capabilities.indexOf("Tilemap")?(this.resampling=!0,this.tileMap=new k(this)):this.resampling=!!g.resampling);!this.spatialReference&&this.tileInfo.spatialReference&&(this.spatialReference=new m(this.tileInfo.spatialReference.toJson()));this.isPNG32="PNG24"===this.tileInfo.format||"PNG32"===this.tileInfo.format;g.timeInfo&&(this.timeInfo=new n(g.timeInfo));g.mensurationCapabilities&&(this.mensurationCapabilities=
g.mensurationCapabilities);var x=this._url.path,v=this._loadCallback,y=r.getProtocolForWebResource(!0),D=x.match(/^https?:\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);D=D&&D[2];if(!this.tileServers)if(g.tileServers)this._setTileServers(g.tileServers);else{var E=-1!==x.search(/^https?:\/\/server\.arcgisonline\.com/i),C=-1!==x.search(/^https?:\/\/services\.arcgisonline\.com/i);(E||C)&&this._setTileServers([x,x.replace(E?/server\.arcgisonline/i:
/services\.arcgisonline/i,E?"services.arcgisonline":"server.arcgisonline")])}if(D){D=D.toLowerCase();for(x=0;x<this._agolAttrs.length;x++)if(E=this._agolAttrs[x],E.toLowerCase()===D){this.hasAttributionData=!0;this.attributionDataUrl=this.attributionDataUrl||y+"//static.arcgis.com/attribution/"+E;break}for(x=0;x<this._referenceLayers.length;x++)if(E=this._referenceLayers[x],E.toLowerCase()===D){this._isReference=!0;break}}this.loaded=!0;this.onLoad(this);v&&(delete this._loadCallback,v(this))},getTileUrl:function(g,
b,x){var v=this.tileServers,y=this._getToken(),D=this._url.query;g=(v?v[b%v.length]:this._url.path)+"/tile/"+g+"/"+b+"/"+x;g=r.upgradeToHTTPS(g);this.resampling&&!this.tileMap&&(g+="?blankTile\x3dfalse");D&&(g=this.resampling&&!this.tileMap?g+("\x26"+t.objectToQuery(D)):g+("?"+t.objectToQuery(D)));!y||D&&D.token||(g+=(-1===g.indexOf("?")?"?":"\x26")+"token\x3d"+y);g=this.addTimestampToURL(g);return r.addProxy(g)}});l.setObject("layers.ArcGISTiledMapServiceLayer",B,e);return B})},"esri/layers/TiledMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/url dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/dom dojox/collections/ArrayList dojox/gfx/matrix ../kernel ../config ../sniff ../domUtils ../tileUtils ../geometry/Point ../geometry/Rect ../geometry/Extent ./layer".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D){f=f(D,{declaredClass:"esri.layers.TiledMapServiceLayer",constructor:function(E,C){B.connect(this,"onLoad",this,"_initTiledLayer");this._lowestLevel=(this._displayLevels=C?C.displayLevels:null)?this._displayLevels[0]:0;this.resampling=C?C.resampling:void 0;this._resamplingTolerance=C?C.resamplingTolerance:null;this.exclusionAreas=C?C.exclusionAreas:null;E=l.hitch;this._addImage=E(this,this._addImage);this._tileLoadHandler=E(this,this._tileLoadHandler);
this._tileErrorHandler=E(this,this._tileErrorHandler);this._popTile=E(this,this._popTile);this._cleanUpRemovedImages=E(this,this._cleanUpRemovedImages);this._fireOnUpdateEvent=E(this,this._fireOnUpdateEvent);this._transitionEnd=E(this,this._transitionEnd);this._tileMapCallback=E(this,this._tileMapCallback)},opacity:1,isPNG32:!1,_multiple:1,isResampling:!1,_initTiledLayer:function(){var E=this.tileInfo,C=E.lods;this.resampling=null!=this.resampling?this.resampling:!1;this._tileW=E.width;this._tileH=
E.height;var z=this.scales=[],w=this._displayLevels,A=-Infinity,G=Infinity,F=this.fullExtent,H=new x(F.xmin,F.ymax);F=new x(F.xmax,F.ymin);var J=b.getContainingTileCoords,K,Q=C.length;for(K=0;K<Q;K++){var P=C[K];var I=J(E,H,P);P.startTileRow=0>I.row?0:I.row;P.startTileCol=0>I.col?0:I.col;I=J(E,F,P);P.endTileRow=I.row;P.endTileCol=I.col;w&&-1===d.indexOf(w,P.level)||(z[K]=P.scale,A=P.scale>A?P.scale:A,G=P.scale<G?P.scale:G)}-Infinity===A||this._hasMin||this.setMinScale(A);Infinity===G||this._hasMax||
this.setMaxScale(G);this.setExclusionAreas(this.exclusionAreas);this._patchIE=6<=k("ie")&&7>k("ie")&&(this.isPNG32||"Mixed"===E.format)},isVisibleAtScale:function(E){return E?D.prototype._isMapAtVisibleScale.call(this,E,!0):!1},_isMapAtVisibleScale:function(E){var C=this.inherited(arguments,[E,!0]);if(C){var z=this._map;C=this.scales;var w=z.getScale(),A=!1,G=z.width>z.height?z.width:z.height;for(z=0;z<C.length;z++)if(Math.abs(C[z]-w)/C[z]<1/G){A=!0;break}C=A}return C},_setMap:function(E,C,z,w){this.inherited(arguments);
this._map=E;var A=this._div=u.create("div",null,C),G=E.__visibleDelta,F=B.connect,H=q._css.names,J={position:"absolute",width:E.width+"px",height:E.height+"px",overflow:"visible"},K=n.defaults.map.zoomDuration;"css-transforms"===E.navigationMode?(J[H.transform]=q._css.translate(-G.x,-G.y),r.set(A,J),delete J[H.transform],J[H.transition]=H.transformName+" "+K+"ms ease",r.set(this._active=u.create("div",null,A),J),this._active._remove=0,this._passives=[]):(J.left=-G.x+"px",J.top=-G.y+"px",r.set(A,J));
this._onResizeHandler_connect=F(E,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=F(this,"onOpacityChange",this,"_opacityChangeHandler");G=this.tileInfo;F=G.spatialReference;H=F._getInfo();(this._wrap=E.wrapAround180&&F._isWrappable()&&Math.abs(H.origin[0]-G.origin.x)<=H.dx)&&b._addFrameInfo(G,H);this.setExclusionAreas(this.exclusionAreas);this.evaluateSuspension();if(this.suspended&&!E.loaded)var Q=B.connect(E,"onLoad",this,function(){B.disconnect(Q);Q=null;this.setExclusionAreas(this.exclusionAreas);
this.evaluateSuspension()});return A},_unsetMap:function(E,C){this.suspended||this._suspendImpl();u.destroy(this._div);this._map=this._div=null;var z=B.disconnect;z(this._onResizeHandler_connect);z(this._opacityChangeHandler_connect);this.inherited(arguments)},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(){g.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();var E=this._tiles,C=this._tileIds,z=this._loadingList,
w,A,G=B.disconnect,F=u.destroy;z&&0<z.count&&(z.forEach(function(J){if(w=E[J])G(w._onload_connect),G(w._onerror_connect),G(w._onabort_connect),w._onload_connect=w._onerror_connect=w._onabort_connect=null}),z.clear(),this._fireUpdateEnd());this._removeList.clear();for(z=C.length-1;0<=z;z--)(w=(A=C[z])&&E[A])&&F(w);if("css-transforms"===this._map.navigationMode){C=this._active;A=this._passives;this._noDom=0;for(z=A.length-1;0<=z;z--){var H=A[z];H._endHandle&&G(H._endHandle);H._matrix=H._multiply=H._endHandle=
null;H._marked=H._remove=0;A.splice(z,1);F(H)}C._matrix=C._multiply=null;C._marked=C._remove=0}this._tileIds=this._tiles=this._tileBounds=this._ct=this._loadingList=this._removeList=this._standby=null},onResume:function(){this.inherited(arguments);this._tileIds=[];this._tiles=[];this._tileBounds=[];this._ct=null;this._removeList=new a;this._loadingList=new a;g.show(this._div);this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(l.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,
null,!0,this._map.__LOD)}),0)},_enableDrawConnectors:function(){var E=this._map,C=B.connect;if("css-transforms"===E.navigationMode){if(this._onScaleHandler_connect=C(E,"onScale",this,this._onScaleHandler),k("esri-mobile")){this._standby=[];var z=this,w=function(){z._noDom=1};this._onPanStartHandler_connect=C(E,"onPanStart",w);this._onZoomStartHandler_connect=C(E,"onZoomStart",w)}}else this._onZoomHandler_connect=C(E,"onZoom",this,"_onZoomHandler");this._onPanHandler_connect=C(E,"onPan",this,"_onPanHandler");
this._onExtentChangeHandler_connect=C(E,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var E=B.disconnect;E(this._onPanHandler_connect);E(this._onZoomHandler_connect);E(this._onScaleHandler_connect);E(this._onExtentChangeHandler_connect);E(this._onPanStartHandler_connect);E(this._onZoomStartHandler_connect);this._onPanHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=this._onExtentChangeHandler_connect=this._onPanStartHandler_connect=this._onZoomStartHandler_connect=
null},_onResizeHandler:function(E,C,z){E={width:C+"px",height:z+"px"};C=r.set;C(this._div,E);if("css-transforms"===this._map.navigationMode)for(this._active&&C(this._active,E),z=this._passives.length-1;0<=z;z--)C(this._passives[z],E)},_onExtentChangeHandler:function(E,C,z,w){C=this._map;var A=this._standby;clearTimeout(this._wakeTimer);this._wakeTimer=null;if(!C._isPanningOrZooming()){if("css-transforms"===C.navigationMode){if(z)for(w=this._passives.length-1;0<=w;w--){var G=this._passives[w];r.set(G,
q._css.names.transition,"none");G._marked?(this._passives.splice(w,1),G.parentNode&&G.parentNode.removeChild(G),u.destroy(G)):0<G.childNodes.length&&(G._multiply=G._multiply?h.multiply(G._matrix,G._multiply):G._matrix)}this._noDom=0;if(A&&A.length)for(w=A.length-1;0<=w;w--)G=A[w],r.set(G,"visibility","inherit"),this._popTile(G),A.splice(w,1)}this._fireUpdateStart();this._rrIndex=0;w=b.getCandidateTileInfo(C,this.tileInfo,E);E=C.__visibleDelta;if(!this._ct||w.lod.level!==this._ct.lod.level||z){G=w&&
this._ct&&w.lod.level!==this._ct.lod.level;this._ct=w;var F=this._tiles,H=this._tileIds,J=this._tileBounds,K=this._removeList,Q=H.length;this._cleanUpRemovedImages();for(w=0;w<Q;w++){A=H[w];var P=F[A];J[A]=H[w]=null;"css-transforms"===C.navigationMode&&G&&P.parentNode&&C.fadeOnZoom&&(P._fadeOut=G,P.parentNode._remove++);K.add(P)}z&&(this._tileIds=[],this._tiles=[],this._tileBounds=[])}w=E.x;z=E.y;"css-transforms"===C.navigationMode?(A={},A[q._css.names.transform]=q._css.translate(w,z),r.set(this._div,
A)):r.set(this._div,{left:w+"px",top:z+"px"});this.__coords_dx=w;this.__coords_dy=z;this._updateImages(new v(0,0,E.width,E.height));0===this._loadingList.count?(this._cleanUpRemovedImages(),this.onUpdate(),this._fireUpdateEnd()):this._fireOnUpdate=!0;z=this._tileW;F=this._tileH;E=new v(-E.x,-E.y,E.width,E.height);for(w=this._tileIds.length-1;0<=w;w--)(A=this._tileIds[w])?(G=this._tiles[A],H=e.getMarginBox(G),H=new v(H.l,H.t,z,F),"css-transforms"===C.navigationMode&&(H.x=G._left,H.y=G._top),E.intersects(H)?
this._tileBounds[A]=H:(this._loadingList.contains(A)&&this._popTile(G),u.destroy(G),this._tileIds.splice(w,1),delete this._tileBounds[A],delete this._tiles[A])):(this._tileIds.splice(w,1),delete this._tileBounds[A],delete this._tiles[A])}},_onPanHandler:function(E,C){E=this._map;C=E.__visibleDelta.offset(C.x,C.y);this.__coords_dx=this.__coords_dy=0;"css-transforms"===E.navigationMode?(E={},E[q._css.names.transform]=q._css.translate(C.x,C.y),r.set(this._div,E),k("esri-mobile")||this._updateImages({x:-C.x,
y:-C.y,width:C.width,height:C.height})):(r.set(this._div,{left:C.x+"px",top:C.y+"px"}),this._updateImages({x:-C.x,y:-C.y,width:C.width,height:C.height}));0<this._loadingList.count&&(this._fireUpdateStart(),this._fireOnUpdate=!0)},_onScaleHandler:function(E,C){var z,w={},A=q._css.names,G=this._map,F=n.defaults.map.zoomDuration;for(z=this._passives.length-1;0<=z;z--){var H=this._passives[z];0===H.childNodes.length?(this._passives.splice(z,1),u.destroy(H)):("none"===H.style[A.transition]&&r.set(H,A.transition,
A.transformName+" "+F+"ms ease"),r.set(H,A.transition,C?"none":A.transformName+" "+F+"ms ease"),H._matrix=E,w[A.transform]=q._css.matrix(H._multiply?h.multiply(E,H._multiply):E),r.set(H,w))}this._active&&0===this._active.childNodes.length||(r.set(this._active,A.transition,C?"none":A.transformName+" "+F+"ms ease"),this._active._matrix=E,w[A.transform]=q._css.matrix(this._active._matrix),r.set(this._active,w),this._passives.push(this._active),w={position:"absolute",width:G.width+"px",height:G.height+
"px",overflow:"visible"},w[A.transition]=A.transformName+" "+F+"ms ease",r.set(this._active=u.create("div",null,this._div),w),this._active._remove=0,G.fadeOnZoom&&u.place(this._active,this._div,"first"))},_onZoomHandler:function(E,C,z){E=e.getMarginBox(this._div);z=z.offset(-E.l,-E.t);this._previousScale&&1!==C||(this._previousScale=1);var w,A=this._tileW*C,G=this._tileH*C,F=this._tileBounds,H=this._tiles,J=this._previousScale,K=this._multiple,Q=r.set,P,I;if((E=k("ie"))&&8>E)d.forEach(this._tileIds,
function(aa){I="";w=F[aa];P=H[aa].style.margin.split(" ");d.forEach(P,function(ia){""!==I&&(I+=" ");ia=parseFloat(ia);I+=ia/J*C+"px"});Q(H[aa],{left:w.x-(A-w.width)*(z.x-w.x)/w.width+"px",top:w.y-(G-w.height)*(z.y-w.y)/w.height+"px",margin:1!==K&&-1===I.indexOf("NaN")?I:"",zoom:C})});else{var N=A*K,L=G*K,W,Z;d.forEach(this._tileIds,function(aa){I="";w=F[aa];W=w.x-(A-w.width)*(z.x-w.x)/w.width;Z=w.y-(G-w.height)*(z.y-w.y)/w.height;P=H[aa].style.margin.split(" ");d.forEach(P,function(ia){""!==I&&(I+=
" ");ia=parseFloat(ia);I+=ia/J*C+"px"});Q(H[aa],{left:W+"px",top:Z+"px",margin:1!==K&&-1===I.indexOf("NaN")?I:"",width:N+"px",height:L+"px"})})}this._previousScale=C},_updateImages:function(E){if(this._ct){var C=this._tileW,z=this._tileH,w=this._ct;var A=w.lod;w=w.tile;var G=w.offsets,F=w.coords,H=F.row;F=F.col;var J=A.level,K=this.opacity,Q=this._tileIds,P=this._loadingList,I=this._addImage,N=this._map.id,L=this.id,W=E.x,Z=E.y,aa=A.startTileRow,ia=A.endTileRow,R=A.startTileCol,S=A.endTileCol,M=d.indexOf,
X=G.x-this.__coords_dx,fa=G.y-this.__coords_dy;var ea=C-X+-E.x;var ha=z-fa+-E.y;var ra=Math.ceil;ea=0<ea?ea%C:C-Math.abs(ea)%C;ha=0<ha?ha%z:z-Math.abs(ha)%z;W=0<W?Math.floor((W+X)/C):ra((W-(C-X))/C);Z=0<Z?Math.floor((Z+fa)/z):ra((Z-(z-fa))/z);fa=W+ra((E.width-ea)/C);E=Z+ra((E.height-ha)/z);if(this._wrap){var Aa=A._frameInfo;var Ea=Aa[0];var va=Aa[1];Aa=Aa[2]}for(ha=W;ha<=fa;ha++)for(W=Z;W<=E;W++)ra=H+W,ea=F+ha,this._wrap&&(ea<va?(ea%=Ea,ea=ea<va?ea+Ea:ea):ea>Aa&&(ea%=Ea)),!this._isExcluded(J,ra,ea)&&
ra>=aa&&ra<=ia&&ea>=R&&ea<=S&&(A=N+"_"+L+"_tile_"+J+"_"+W+"_"+ha,-1===M(Q,A)&&(P.add(A),Q.push(A),I(J,W,ra,ha,ea,A,C,z,K,w,G)))}},_cleanUpRemovedImages:function(){var E=this._removeList,C=u.destroy,z,w=q._css.names;E.forEach(function(G){G._fadeOut||(G.style.filter="",G.style.zoom=1,C(G))});if("css-transforms"===this._map.navigationMode)for(z=this._passives.length-1;0<=z;z--){var A=this._passives[z];0===A.childNodes.length?(this._passives.splice(z,1),C(A)):this._map.fadeOnZoom&&!A._marked&&A._remove===
A.childNodes.length&&(A._marked=1,2048>q._css.getScaleFromMatrix(r.get(A,w.transform))?(r.set(A,w.transition,"opacity 0.65s"),r.set(A,"opacity",0),B.disconnect(A._endHandle),A._endHandle=B.connect(A,w.endEvent,this._transitionEnd)):this._transitionEnd({propertyName:"opacity",target:A}))}E.clear()},_transitionEnd:function(E){var C=E.target;"opacity"===E.propertyName&&(B.disconnect(C._endHandle),C._endHandle=null,E=d.indexOf(this._passives,C),-1<E&&this._passives.splice(E,1),C.parentNode&&C.parentNode.removeChild(C),
u.destroy(C))},_addImage:function(E,C,z,w,A,G,F,H,J,K,Q){if(this._patchIE)K=this._tiles[G]=u.create("div"),K.id=G,t.add(K,"layerTile"),r.set(K,{left:F*w-Q.x+"px",top:H*C-Q.y+"px",width:F+"px",height:H+"px",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+this.getTileUrl(E,z,A)+"', sizingMethod\x3d'scale')"}),1>J&&r.set(K,"opacity",J),E=K.appendChild(u.create("div")),r.set(E,{opacity:0,width:F+"px",height:H+"px"}),this._div.appendChild(K),K=null,this._loadingList.remove(G),this._fireOnUpdateEvent();
else{K=this._tiles[G]=u.create("img");var P=B.connect;K.id=G;K._uid=E+"_"+z+"_"+A;K.alt="";t.add(K,"layerTile");w=F*w-Q.x;Q=H*C-Q.y;C=this._map;var I=q._css.names;F={width:F+"px",height:H+"px",visibility:"hidden"};"css-transforms"===C.navigationMode?(F[I.transform]=q._css.translate(w,Q),r.set(K,F),K._left=w,K._top=Q):(F.left=w+"px",F.top=Q+"px",r.set(K,F));1>J&&r.set(K,"opacity",J);K._onload_connect=P(K,"onload",this,"_tileLoadHandler");K._onerror_connect=P(K,"onerror",l.hitch(this,"_tileErrorHandler",
z,A));K._onabort_connect=P(K,"onabort",this,"_tileAbortHandler");if(this.tileMap)this.tileMap.getTile(E,z,A,G,this._tileMapCallback);else if(G=this.getTileUrl(E,z,A,K))this._failedRequests&&this._failedRequests[G]?(r.set(K,this._failedRequests[G].css),K.src=this._failedRequests[G].src,this._multiple=parseInt(this._failedRequests[G].css.width)/this._tileW,this.isResampling=1!==this._multiple):(this._multiple=1,this.isResampling=!1,K.src=G);"css-transforms"===C.navigationMode?this._active.appendChild(K):
this._div.appendChild(K);K=null}},_tileMapCallback:function(E,C){if(!this.suspended){var z=this._tiles[C.id]||m.byId(C.id);var w=C.level+"_"+C.row+"_"+C.col;z&&z._uid===w?(this._multiple=2*(C.level-E.level)||1,this.isResampling=1!==this._multiple,C=this.tileMap.style(E,C),r.set(z,C),z.src=this.getTileUrl(E.level,E.row,E.col)):this._popTile(C)}},getTileUrl:function(E,C,z){},refresh:function(){this.suspended||(this._refreshTS=Date.now(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},
_popTile:function(E){var C=B.disconnect;C(E._onload_connect);C(E._onerror_connect);C(E._onabort_connect);E._onload_connect=E._onerror_connect=E._onabort_connect=null;this._loadingList.remove(E.id);this._fireOnUpdateEvent()},_tileLoadHandler:function(E){E=E.currentTarget;this._noDom?this._standby.push(E):(r.set(E,"visibility","inherit"),this._popTile(E))},_tileAbortHandler:function(E){E=E.currentTarget;this.onError(Error("Unable to load tile: "+E.src));r.set(E,"visibility","hidden");this._popTile(E)},
_tileErrorHandler:function(E,C,z){z=z.currentTarget;var w=!0;if(this.tileMap||!this.resampling)w=!1;else{var A=new c(z.src);A=A.path.split("/");A=parseInt(A[A.length-3]);var G=this._ct.lod.level-A+1;this._multiple=Math.pow(2,G);if(A===this._lowestLevel||0===this._resamplingTolerance||this._resamplingTolerance&&Math.log(this._multiple)/Math.LN2>this._resamplingTolerance)w=!1}w?(this.isResampling=!0,this._resample(z,E,C)):(this.onError(Error("Unable to load tile: "+z.src)),r.set(z,"visibility","hidden"),
this._popTile(z))},_resample:function(E,C,z){var w=(new c(E.src)).path.split("/"),A=this._multiple,G=parseInt(w[w.length-3])-1,F=parseInt(C/A),H=parseInt(z/A);w=z%A;var J=C%A;F=this.getTileUrl(G,F,H);C=this.getTileUrl(G+Math.log(A)/Math.LN2,C,z);A={width:this._tileW*A+"px",height:this._tileH*A+"px",margin:"-"+this._tileW*J+"px 0 0 -"+(this._tileH*w+"px")};this._failedRequests||(this._failedRequests={});this._failedRequests[C]={src:F,css:A};r.set(E,A);k("chrome")&&E.setAttribute("src",null);E.src=
F},_fireOnUpdateEvent:function(){0===this._loadingList.count&&(this._cleanUpRemovedImages(),this._fireOnUpdate&&(this._fireOnUpdate=!1,this.onUpdate(),this._fireUpdateEnd()))},setOpacity:function(E){if(this.opacity!=E)this.onOpacityChange(this.opacity=E)},onOpacityChange:function(){},_opacityChangeHandler:function(E){var C=r.set,z,w;if("css-transforms"===this._map.navigationMode){if(this._active){var A=this._active.childNodes;for(z=A.length-1;0<=z;z--)C(A[z],"opacity",E)}for(z=this._passives.length-
1;0<=z;z--)for(A=this._passives[z].childNodes,w=A.length-1;0<=w;w--)C(A[w],"opacity",E)}else for(A=this._div.childNodes,z=A.length-1;0<=z;z--)C(A[z],"opacity",E)},setExclusionAreas:function(E){this.exclusionAreas=E;if(this.loaded&&this._map&&this._map.loaded){var C=this._map.spatialReference,z=this.tileInfo,w=z.origin,A=z.lods,G=A[0].level,F=A[A.length-1].level,H,J,K;if(this.exclusionAreas&&this.exclusionAreas.length){this._exclusionsPerZoom=[];var Q=0;for(H=E.length;Q<H;Q++){var P=E[Q];if((K=P.geometry)&&
"extent"===K.type&&K.xmin<=K.xmax&&K.ymin<=K.ymax){if(!C.equals(K.spatialReference))if(C._canProject(K.spatialReference)){if(C.isWebMercator()){var I=x.lngLatToXY(K.xmin,K.ymin);K=x.lngLatToXY(K.xmax,K.ymax)}else I=x.xyToLngLat(K.xmin,K.ymin,!0),K=x.xyToLngLat(K.xmax,K.ymax,!0);K=new y(I[0],I[1],K[0],K[1],C)}else continue;var N=-1;if(P.minZoom&&-1!==P.minZoom)N=P.minZoom;else if(P.minScale&&-1!==P.minScale){var L=0;for(J=A.length;L<J;L++)if(A[L].scale<=P.minScale){N=A[L].level;break}}N=Math.max(N,
G);I=-1;if(P.maxZoom&&-1!==P.maxZoom)I=P.maxZoom;else if(P.maxScale&&-1!==P.maxScale)for(L=0,J=A.length;L<J;L++)if(A[L].scale<P.maxScale){I=A[L-1].level;break}else if(A[L].scale===P.maxScale){I=A[L].level;break}I=-1===I?F:Math.min(I,F);for(P=N;P<=I;P++){L=0;for(J=A.length;L<J;L++)if(A[L].level===P){var W=A[L];break}W&&(this._exclusionsPerZoom[P]||(this._exclusionsPerZoom[P]=[]),L=1/W.resolution/z.rows,J=1/W.resolution/z.cols,this._exclusionsPerZoom[P].push({rowFrom:Math.floor((w.y-K.ymax)*L),rowTo:Math.ceil((w.y-
K.ymin)*L),colFrom:Math.floor((K.xmin-w.x)*J),colTo:Math.ceil((K.xmax-w.x)*J)}))}}}}else this._exclusionsPerZoom=null;this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD)}},_isExcluded:function(E,C,z){var w;if(!this._exclusionsPerZoom)return!1;var A=this._exclusionsPerZoom[E];if(!A)return!1;var G=0;for(w=A.length;G<w;G++)if(E=A[G],C>=E.rowFrom&&C<E.rowTo&&z>=E.colFrom&&z<E.colTo)return!0;return!1}});l.setObject("layers.TiledMapServiceLayer",f,q);return f})},"dojox/collections/ArrayList":function(){define(["dojo/_base/kernel",
"dojo/_base/array","./_base"],function(f,B,l){l.ArrayList=function(d){var c=[];d&&(c=c.concat(d));this.count=c.length;this.add=function(u){c.push(u);this.count=c.length};this.addRange=function(u){if(u.getIterator)for(u=u.getIterator();!u.atEnd();)this.add(u.get());else for(var t=0;t<u.length;t++)c.push(u[t]);this.count=c.length};this.clear=function(){c.splice(0,c.length);this.count=0};this.clone=function(){return new l.ArrayList(c)};this.contains=function(u){for(var t=0;t<c.length;t++)if(c[t]==u)return!0;
return!1};this.forEach=function(u,t){f.forEach(c,u,t)};this.getIterator=function(){return new l.Iterator(c)};this.indexOf=function(u){for(var t=0;t<c.length;t++)if(c[t]==u)return t;return-1};this.insert=function(u,t){c.splice(u,0,t);this.count=c.length};this.item=function(u){return c[u]};this.remove=function(u){u=this.indexOf(u);0<=u&&c.splice(u,1);this.count=c.length};this.removeAt=function(u){c.splice(u,1);this.count=c.length};this.reverse=function(){c.reverse()};this.sort=function(u){u?c.sort(u):
c.sort()};this.setByIndex=function(u,t){c[u]=t;this.count=c.length};this.toArray=function(){return[].concat(c)};this.toString=function(u){return c.join(u||",")}};return l.ArrayList})},"dojox/collections/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(f,B,l){f=B.getObject("dojox.collections",!0);f.DictionaryEntry=function(d,c){this.key=d;this.value=c;this.valueOf=function(){return this.value};this.toString=function(){return String(this.value)}};f.Iterator=
function(d){var c=0;this.element=d[c]||null;this.atEnd=function(){return c>=d.length};this.get=function(){return this.atEnd()?null:this.element=d[c++]};this.map=function(u,t){return l.map(d,u,t)};this.reset=function(){c=0;this.element=d[c]}};f.DictionaryIterator=function(d){var c=[],u={},t;for(t in d)u[t]||c.push(d[t]);var e=0;this.element=c[e]||null;this.atEnd=function(){return e>=c.length};this.get=function(){return this.atEnd()?null:this.element=c[e++]};this.map=function(r,m){return l.map(c,r,
m)};this.reset=function(){e=0;this.element=c[e]}};return f})},"esri/layers/TileMap":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/io-query ../request ../urlUtils".split(" "),function(f,B,l,d,c,u,t){return f(null,{declaredClass:"esri.layers.TileMap",constructor:function(e){this.layer=e;this._tileMaps={}},getTile:function(e,r,m,a,h){e={id:a,level:e,row:r,col:m};r=this._getResamplingBudget();0<r?this._process({tile:e,requestedTile:e,callback:h,resamplingBudget:r}):
(h||this.callback).call(this,e,e)},statusOf:function(e,r,m){var a=this._getResamplingBudget();e={level:e,row:r,col:m};if(0===a)return 1;for(;0<=a;){r=this._tileToTileMap(e);if(!this._tileMaps[r.uid])return-1;r=this._tileMaps[r.uid];if(!r.promise.isFulfilled())return-1;if(this._isTileAvailable(e,r))return 1;e=this._parentTile(e);if(!e)break;a--}return 0},style:function(e,r){if(e.level!==r.level||e.row!==r.row||e.col!==r.col){var m=this.layer.tileInfo,a=m.lods,h=m.cols;m=m.rows;for(var q,n,k=a.length-
1;!q||!n;)q||a[k].level!==e.level||(q=a[k]),n||a[k].level!==r.level||(n=a[k]),k--;a=Math.round(q.resolution/n.resolution);e=r.col%a*-1*h;r=r.row%a*-1*m;a={width:h*a+"px",height:m*a+"px",margin:r+"px 0 0 "+e+"px","will-change":"transform"};e=0===e?0:-1*e;r=0===r?0:-1*r;a.clip="rect("+r+"px,"+(e+h)+"px,"+(r+m)+"px,"+e+"px)";return a}},_process:function(e){var r=e.tile,m=this._tileToTileMap(r),a=this._parentTile(r);this._getTileMap(m).then(B.hitch(this,function(h){m=h;this._isTileAvailable(r,m)?(e.callback||
this.callback).call(this,r,e.requestedTile):0<e.resamplingBudget&&a?(e.resamplingBudget--,e.tile=a,this._process(e)):(e.callback||this.callback).call(this,e.requestedTile,e.requestedTile)}),B.hitch(this,function(){(e.callback||this.callback).call(this,e.requestedTile,e.requestedTile)}))},_getTileMap:function(e){var r,m,a=null;if(this._tileMaps[e.uid]){e=this._tileMaps[e.uid];var h=e.promise}else{this._tileMaps[e.uid]=e;var q=new d;u({url:this._getTileMapUrl(e.level,e.row,e.col),handleAs:"json",content:{f:"json"},
callbackParamName:"callback",timeout:3E3,load:function(n){B.mixin(e,n);if(e.data&&0<e.data.length){m=e.data.length;if(1===m)a=e.data[0];else for(a=e.data[0],r=1;r<m;r++)if(e.data[r]!==a){a=null;break}null!==a&&(delete e.data,e.value=a);null==e.valid&&(e.valid=!0)}q.resolve(e)},error:function(n){n&&422===n.code?(B.mixin(e,{location:{top:e.row,left:e.col,width:8,height:8},valid:!0,value:0}),q.resolve(e)):q.reject()}});h=e.promise=q.promise}return h},_parentTile:function(e){var r=this.layer.tileInfo.lods,
m,a,h=null;l.some(r,function(q,n){return e.level===q.level?(m=q,a=n,!0):!1});0<a&&(r=r[a-1],h={id:e.id,level:r.level,row:Math.floor(e.row*m.resolution/r.resolution+.01),col:Math.floor(e.col*m.resolution/r.resolution+.01)});return h},_tileToTileMap:function(e){var r=8*Math.floor(e.row/8),m=8*Math.floor(e.col/8);return{uid:e.level+"_"+r+"_"+m,level:e.level,row:r,col:m}},_isTileAvailable:function(e,r){if(r.valid)if(void 0!==r.value)e=r.value;else{var m=r.location.left;var a=r.location.top;e=(e.row-a)*
r.location.width+(e.col-m);e=e<r.data.length?r.data[e]:0}else e=0;return e},_getTileMapUrl:function(e,r,m){var a=this.layer,h=a.tileServers,q=a._getToken(),n=a._url.query;e=(h?h[r%h.length]:a._url.path)+"/tilemap/"+e+"/"+r+"/"+m+"/8/8";n&&(e+="?"+c.objectToQuery(n));!q||n&&n.token||(e+=(-1===e.indexOf("?")?"?":"\x26")+"token\x3d"+q);return e=a.addTimestampToURL(e)},_getResamplingBudget:function(){var e=this.layer,r=0;e.resampling&&(r=e._resamplingTolerance,null===r||void 0===r)&&(r=e.tileInfo.lods.length);
return r}})})},"esri/layers/MapImageLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style ../kernel ../config ../sniff ../domUtils ../geometry/Point ../geometry/webMercatorUtils ./layer".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h,q){var n=f([q],{declaredClass:"esri.layers.MapImageLayer","-chains-":{constructor:"manual"},constructor:function(k){this.inherited(arguments,[null,k]);this._mapImages=[];var g=l.hitch;this._panStart=
g(this,this._panStart);this._pan=g(this,this._pan);this._extentChange=g(this,this._extentChange);this._zoom=g(this,this._zoom);this._zoomStart=g(this,this._zoomStart);this._scale=g(this,this._scale);this._resize=g(this,this._resize);B.connect(this,"onSuspend",this,this._onSuspend);B.connect(this,"onResume",this,this._onResume);this.loaded=!0;this.onLoad(this)},opacity:1,addImage:function(k){var g=this._mapImages.push(k);--g;k._idx=g;k._layer=this;this._div&&this._createImage(k,g)},removeImage:function(k){if(k){var g=
k._idx,b=this._mapImages;if(b[g]===k){delete b[g];if(g=k._node)this._clearEvents(g),g.e_idx=g.e_bl=g.e_tr=g.e_l=g.e_t=g.e_w=g.e_h=null,g.parentNode&&(g.parentNode.removeChild(g),c.destroy(g));k._node=k._idx=k._layer=null}}},removeAllImages:function(){var k=this._mapImages,g,b=k.length;for(g=0;g<b;g++){var x=k[g];x&&this.removeImage(x)}this._mapImages=[]},getImages:function(){var k=this._mapImages,g=[],b,x=k.length;for(b=0;b<x;b++)k[b]&&g.push(k[b]);return g},setOpacity:function(k){this.opacity!=k&&
(this._opacityChanged(this.opacity=k),this.onOpacityChange())},onOpacityChange:function(){},_opacityChanged:function(k){var g=this._div;if(g)if(!r("ie")||8<r("ie"))u.set(g,"opacity",k);else{var b=g.childNodes;var x=b.length;for(g=0;g<x;g++)u.set(b[g],"opacity",k)}},_createImage:function(k,g){var b=c.create("img");u.set(b,{position:"absolute"});1>k.opacity?u.set(b,"opacity",k.opacity):8>=r("ie")&&u.set(b,"opacity",this.opacity);!k.rotation||9>r("ie")||u.set(b,t._css.names.transform,t._css.rotate(360-
k.rotation));k._node=b;b.e_idx=g;b.e_layer=this;b.e_load=B.connect(b,"onload",n.prototype._imageLoaded);b.e_error=B.connect(b,"onerror",n.prototype._imageError);b.e_abort=B.connect(b,"onabort",n.prototype._imageError);b.src=k.href},_imageLoaded:function(k,g){k=g||k.target||k.currentTarget;g=k.e_layer;var b=g._mapImages[k.e_idx],x=g._map;x&&(x.__zooming||x.__panning||!g._sr)?g._standby.push(k):(g._clearEvents(k),b&&b._node===k&&x&&g._attach(b))},_imageError:function(k){k=k.target||k.currentTarget;
var g=k.e_layer,b=g._mapImages[k.e_idx];g._clearEvents(k);b&&(b._node=null)},_clearEvents:function(k){var g=B.disconnect;g(k.e_load);g(k.e_error);g(k.e_abort);k.e_load=k.e_error=k.e_abort=k.e_layer=null},_attach:function(k){var g=k.extent,b=g.spatialReference,x=this._sr,v=this._div,y=k._node,D=new a({x:g.xmin,y:g.ymin,spatialReference:b});g=new a({x:g.xmax,y:g.ymax,spatialReference:b});x.equals(b)||(x.isWebMercator()&&4326===b.wkid?(D=h.geographicToWebMercator(D),g=h.geographicToWebMercator(g)):b.isWebMercator()&&
4326===x.wkid&&(D=h.webMercatorToGeographic(D),g=h.webMercatorToGeographic(g)));y.e_bl=D;y.e_tr=g;k.visible&&(this._setPos(y,v._left,v._top),(this._active||v).appendChild(y))},_setPos:function(k,g,b){var x=k.e_bl,v=k.e_tr,y=this._map;x=y.toScreen(x);v=y.toScreen(v);g=x.x-g;b=v.y-b;var D=Math.abs(v.x-x.x);x=Math.abs(x.y-v.y);v={width:D+"px",height:x+"px"};var E=this._mapImages[k.e_idx];"css-transforms"===y.navigationMode?v[t._css.names.transform]=t._css.translate(g,b)+(E.rotation?" "+t._css.rotate(360-
E.rotation):""):(v.left=g+"px",v.top=b+"px");u.set(k,v);k.e_l=g;k.e_t=b;k.e_w=D;k.e_h=x},managedSuspension:!0,_setMap:function(k,g){this.inherited(arguments);var b=this._div=c.create("div",null,g),x=t._css.names,v={position:"absolute"},y=k.__visibleDelta;if(!r("ie")||8<r("ie"))v.opacity=this.opacity;"css-transforms"===k.navigationMode?(v[x.transform]=t._css.translate(y.x,y.y),u.set(b,v),b._left=y.x,b._top=y.y,v={position:"absolute",width:k.width+"px",height:k.height+"px",overflow:"visible"},this._active=
c.create("div",null,b),u.set(this._active,v),this._passive=c.create("div",null,b),u.set(this._passive,v)):(b._left=0,b._top=0,u.set(b,v));this._standby=[];x=this._mapImages;y=x.length;for(v=0;v<y;v++){var D=x[v];D._node||this._createImage(D,D._idx)}m.hide(b);return b},_unsetMap:function(k,g){this._disconnect();var b=this._div;if(b){var x=this._mapImages,v,y=x.length;for(v=0;v<y;v++){var D=x[v];if(D){var E=D._node;E&&(this._clearEvents(E),E.e_idx=E.e_bl=E.e_tr=E.e_l=E.e_t=E.e_w=E.e_h=null);D._node=
null}}g.removeChild(b);c.destroy(b)}this._map=this._div=this._sr=this._active=this._passive=this._standby=null;this.inherited(arguments)},_onSuspend:function(){this._disconnect();m.hide(this._div)},_onResume:function(k){k.firstOccurrence&&(this._sr=this._map.spatialReference,this._processStandbyList());k=this._map;var g=this._div,b=k.__visibleDelta;"css-transforms"===k.navigationMode&&(g._left=b.x,g._top=b.y,u.set(g,t._css.names.transform,t._css.translate(g._left,g._top)));this._redraw("css-transforms"===
k.navigationMode);this._connect(k);m.show(g)},_connect:function(k){if(!this._connections){var g=B.connect,b="css-transforms"===k.navigationMode;this._connections=[g(k,"onPanStart",this._panStart),g(k,"onPan",this._pan),g(k,"onExtentChange",this._extentChange),b&&g(k,"onZoomStart",this._zoomStart),b?g(k,"onScale",this._scale):g(k,"onZoom",this._zoom),b&&g(k,"onResize",this._resize)];b&&this._resize(k.extent,k.width,k.height)}},_disconnect:function(){this._connections&&(d.forEach(this._connections,
B.disconnect),this._connections=null)},_panStart:function(){this._panL=this._div._left;this._panT=this._div._top},_pan:function(k,g){k=this._div;k._left=this._panL+g.x;k._top=this._panT+g.y;"css-transforms"===this._map.navigationMode?u.set(k,t._css.names.transform,t._css.translate(k._left,k._top)):u.set(k,{left:k._left+"px",top:k._top+"px"})},_extentChange:function(k,g,b){b?this._redraw("css-transforms"===this._map.navigationMode):g&&this._pan(k,g);this._processStandbyList()},_processStandbyList:function(){var k,
g=this._standby;if(g&&g.length)for(k=g.length-1;0<=k;k--)this._imageLoaded(null,g[k]),g.splice(k,1)},_redraw:function(k){if(k){k=this._passive;var g=t._css.names;u.set(k,g.transition,"none");this._moveImages(k,this._active);u.set(k,g.transform,"none")}k=this._active||this._div;g=this._div._left;var b=this._div._top,x,v=k.childNodes.length;for(x=0;x<v;x++){var y=k.childNodes[x];this._setPos(y,g,b)}},_zoom:function(k,g,b){k=this._div;var x=k._left,v=k._top,y,D=k.childNodes.length;for(y=0;y<D;y++){var E=
k.childNodes[y];var C=E.e_w*g,z=E.e_h*g,w=(b.x-x-E.e_l)*(C-E.e_w)/E.e_w,A=(b.y-v-E.e_t)*(z-E.e_h)/E.e_h;w=isNaN(w)?0:w;A=isNaN(A)?0:A;u.set(E,{left:E.e_l-w+"px",top:E.e_t-A+"px",width:C+"px",height:z+"px"})}},_zoomStart:function(){this._moveImages(this._active,this._passive)},_moveImages:function(k,g){k=k.childNodes;var b=k.length;if(0<b)for(--b;0<=b;b--)g.appendChild(k[b])},_scale:function(k,g){var b=t._css.names,x=this._passive;u.set(x,b.transition,g?"none":b.transformName+" "+e.defaults.map.zoomDuration+
"ms ease");({})[b.transform]=t._css.matrix(k);u.set(x,b.transform,t._css.matrix(k))},_resize:function(k,g,b){u.set(this._active,{width:g+"px",height:b+"px"});u.set(this._passive,{width:g+"px",height:b+"px"})}});l.setObject("layers.MapImageLayer",n,t);return n})},"esri/layers/OpenStreetMapLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../urlUtils ../SpatialReference ../geometry/Extent ./TiledMapServiceLayer ./TileInfo".split(" "),function(f,B,l,d,c,u,t,e,r){f=f(e,{declaredClass:"esri.layers.OpenStreetMapLayer",
constructor:function(m){this.spatialReference=new u({wkid:102100});this.tileInfo=new r({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:0,scale:5.91657527591555E8,resolution:156543.033928},{level:1,scale:2.95828763795777E8,resolution:78271.5169639999},{level:2,scale:1.47914381897889E8,resolution:39135.7584820001},{level:3,scale:7.3957190948944E7,resolution:19567.8792409999},{level:4,scale:3.6978595474472E7,
resolution:9783.93962049996},{level:5,scale:1.8489297737236E7,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},
{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:.597164283559817},{level:19,scale:1128.497176,resolution:.298582141647617}]});this.fullExtent=new t({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,
spatialReference:{wkid:102100}});this.initialExtent=new t({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,spatialReference:{wkid:102100}});this.tileServers=m&&m.tileServers||["//a.tile.openstreetmap.org","//b.tile.openstreetmap.org","//c.tile.openstreetmap.org"];this.serversLength=this.tileServers.length;this._displayLevels=m?m.displayLevels:null;this.copyright=m&&m.copyright||"Map data \u00a9 OpenStreetMap contributors, CC-BY-SA";this.loaded=!0;this.onLoad(this);(m=
m&&m.loadCallback)&&m(this)},getTileUrl:function(m,a,h){m=this.tileServers[a%this.serversLength]+"/"+m+"/"+h+"/"+a+".png";m=c.normalize(m);m=this.addTimestampToURL(m);return c.addProxy(m)}});B.setObject("layers.OpenStreetMapLayer",f,d);return f})},"esri/dijit/Popup":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/window dojo/Stateful dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/registry ../kernel ../lang ../domUtils ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/normalizeUtils ../InfoWindowBase ../PopupBase dojo/i18n!../nls/jsapi dojo/NodeList-dom ./PopupTemplate ./PopupRenderer".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E,C,z,w,A){f=f([z,w,e],{declaredClass:"esri.dijit.Popup",offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:!0,pagingControls:!0,pagingInfo:!0,keepHighlightOnHide:!1,popupWindow:!0,titleInBody:!0,anchor:"auto",visibleWhenEmpty:!0,hideDelay:1E3,location:null,constructor:function(G,F){this.initialize();B.mixin(this,G);this.domNode=m.byId(F);F=this._nls=B.mixin({},A.widgets.popup);G=this.domNode;h.add(G,"esriPopup");(this._isRTL=!n.isBodyLtr())&&
k.set(G,"direction","rtl");a.set(G,"innerHTML","\x3cdiv class\x3d'esriPopupWrapper' style\x3d'position: absolute;'\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'titlePane'\x3e\x3cdiv class\x3d'spinner hidden' title\x3d'"+F.NLS_searching+"...'\x3e\x3c/div\x3e\x3cdiv class\x3d'title'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton prev hidden' title\x3d'"+F.NLS_prevFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton next hidden' title\x3d'"+F.NLS_nextFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton maximize' title\x3d'"+
F.NLS_maximize+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton close' title\x3d'"+F.NLS_close+"'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer content'\x3e\x3cdiv class\x3d'contentPane'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'actionsPane'\x3e\x3cdiv class\x3d'actionList hidden'\x3e\x3ca title\x3d'"+F.NLS_zoomTo+"' class\x3d'action zoomTo' href\x3d'javascript:void(0);'\x3e\x3cspan\x3e"+F.NLS_zoomTo+"\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'pointer hidden'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'outerPointer hidden'\x3e\x3c/div\x3e");
this._sizers=c.query(".sizer",G);F=c.query(".titlePane",G)[0];this._title=c.query(".title",F)[0];this._prevFeatureButton=c.query(".prev",F)[0];this._nextFeatureButton=c.query(".next",F)[0];this._maxButton=c.query(".maximize",F)[0];this._spinner=c.query(".spinner",F)[0];this._contentPane=c.query(".contentPane",G)[0];this._positioner=c.query(".esriPopupWrapper",G)[0];this._pointer=c.query(".pointer",G)[0];this._outerPointer=c.query(".outerPointer",G)[0];this._actionList=c.query(".actionsPane .actionList",
G)[0];this._contentUpdateHandles={};this._eventConnections=[d.connect(c.query(".close",F)[0],"onclick",this,this.hide),d.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),d.connect(this._nextFeatureButton,"onclick",this,this.selectNext),d.connect(this._maxButton,"onclick",this,this._toggleSize),d.connect(c.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature),d.connect(this,"onClearFeatures",this,this._featuresCleared),d.connect(this,"onSelectionChange",this,this._featureSelected),
d.connect(this,"onDfdComplete",this,this._updateUI)];u("esri-touch")&&(G=v.setScrollable(this._contentPane),this._eventConnections.push(G[0],G[1]));this._toggleVisibility(!1)},onMaximize:function(){},onRestore:function(){},setMap:function(G){this.inherited(arguments);q.place(this.domNode,G.root);this.highlight&&this.enableHighlight(G);this._maxHeight=k.get(this._contentPane,"maxHeight")},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments)},setTitle:function(G){this.popupWindow&&
(x.isDefined(G)&&""!==G||(G="\x26nbsp;"),this.destroyDijits(this._title),this.place(G,this._title),this.isShowing&&(this.startupDijits(this._title),this.reposition()))},setContent:function(G){this.popupWindow&&(x.isDefined(G)&&""!==G||(G="\x26nbsp;"),this._destroyContent(),this.place(G,this._contentPane),this.isShowing&&(this._startupContent(),this.reposition()))},show:function(G,F){if(this.popupWindow)if(this._delayHide=!1,G){var H=this.map;G.spatialReference?(this.location=G,G=H.toScreen(G)):this.location=
H.toMap(G);var J=H._getFrameWidth();if(-1!==J&&(G.x%=J,0>G.x&&(G.x+=J),H.width>J))for(H=(H.width-J)/2;G.x<H;)G.x+=J;this._maximized?this.restore():this._setPosition(G);F&&F.closestFirst&&this.showClosestFirst(this.location);this.isShowing||(this._toggleVisibility(!0),this._followMap(),this.startupDijits(this._title),this._startupContent(),this.reposition(),this.showHighlight(),this.onShow())}else this._toggleVisibility(!0)},hide:function(){this.isShowing&&(this._toggleVisibility(!1),this._unfollowMap(),
this.keepHighlightOnHide||this.hideHighlight(),this.onHide())},resize:function(G,F){this.popupWindow&&(this._sizers.style({width:G+"px"}),k.set(this._contentPane,"maxHeight",F+"px"),this._maxHeight=F,this.isShowing&&this.reposition())},reposition:function(){this.popupWindow&&this.map&&this.location&&!this._maximized&&this.isShowing&&this._setPosition(this.map.toScreen(this.location))},addActions:function(G){return l.map(G,function(F){var H=q.create("a",{href:"javascript:void(0);",className:"action "+
F.className,title:F.title,innerHTML:F.title},this._actionList);d.connect(H,"onclick",F.callback);return{action:F,node:H}},this)},removeActions:function(G){l.forEach(G,function(F){q.destroy(F.node)})},getCurrentAnchor:function(){return this._anchor},maximize:function(){var G=this.map;if(G&&!this._maximized&&this.popupWindow){this._maximized=!0;var F=this._maxButton;h.remove(F,"maximize");h.add(F,"restore");a.set(F,"title",this._nls.NLS_restore);F=this.marginLeft;var H=this.marginTop,J=G.width-2*F;
G=G.height-2*H;k.set(this.domNode,{left:this._isRTL?null:F+"px",right:this._isRTL?F+"px":null,top:H+"px",bottom:null});k.set(this._positioner,{left:null,right:null,top:null,bottom:null});this._savedWidth=k.get(this._sizers[0],"width");this._savedHeight=k.get(this._contentPane,"maxHeight");this._sizers.style({width:J+"px"});k.set(this._contentPane,{maxHeight:G-65+"px",height:G-65+"px"});this._showPointer("");this._unfollowMap();h.add(this.domNode,"esriPopupMaximized");this.onMaximize()}},restore:function(){if(this.map&&
this._maximized&&this.popupWindow){this._maximized=!1;var G=this._maxButton;h.remove(G,"restore");h.add(G,"maximize");a.set(G,"title",this._nls.NLS_maximize);k.set(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this.location);this._followMap();h.remove(this.domNode,"esriPopupMaximized");this.onRestore()}},startup:function(){},destroy:function(){this.map&&this.unsetMap();this.cleanup();this.isShowing&&this.hide();this.destroyDijits(this._title);
this._destroyContent();l.forEach(this._eventConnections,d.disconnect);q.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=this._pagerScope=this._targetLocation=this._nls=this._maxButton=null},selectNext:function(){this.select(this.selectedIndex+1)},selectPrevious:function(){this.select(this.selectedIndex-1)},setFeatures:function(G,F){this._transientAnchor=
F&&F.anchor;this.inherited(arguments);this._updateUI()},clearFeatures:function(G){G||(this._transientAnchor=null);this.inherited(arguments)},postscript:null,_highlightSetter:function(G){var F=this.highlight,H=this.map;this.highlight=G;if(H&&G!==F)if(G){if(this.enableHighlight(H),G=this.features&&this.features[this.selectedIndex])this.updateHighlight(H,G),this.showHighlight()}else this.disableHighlight(H)},_pagingControlsSetter:function(G){var F=this.pagingControls,H=this.map;this.pagingControls=G;
H&&G!==F&&this._updatePagingControls()},_pagingInfoSetter:function(G){var F=this.pagingInfo,H=this.map;this.pagingInfo=G;H&&G!==F&&this.features&&this.features.length&&this._updatePagingInfo()},_popupWindowSetter:function(G){var F=this.popupWindow,H=this.map;this.popupWindow=G;H&&G!==F&&(G?(this._updateUI(),this._updateWindow()):(this.hide(),this.showHighlight()))},_anchorSetter:function(G){var F=this.anchor;this.anchor=G;this.map&&G!==F&&this.reposition()},_startupContent:function(){var G=this._contentPane;
this.startupDijits(G);l.forEach(this._getPopupRendererDijits(G),function(F){if(!this._contentUpdateHandles[F.id]){var H=F.on("content-update",B.hitch(this,function(){this.reposition()}));this._contentUpdateHandles[F.id]=H}},this)},_destroyContent:function(){var G=this._contentPane;l.forEach(this._getPopupRendererDijits(G),function(F){var H=this._contentUpdateHandles[F.id];H&&(H.remove(),delete this._contentUpdateHandles[F.id])},this);this.destroyDijits(G)},_getPopupRendererDijits:function(G){G=this.getDijits(G);
return G=l.filter(G,function(F){return F&&F.set&&/_PopupRenderer/.test(F.declaredClass)})},_featuresCleared:function(){this.setTitle("\x26nbsp;");this.setContent("\x26nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight()},_featureSelected:function(){this._updateUI();this._updateWindow()},_updateWindow:function(){var G=this.selectedIndex;if(0<=G){var F=this.features[G].getContent();if(!this.titleInBody&&F&&B.isString(F.id)){var H=g.byId(F.id);H&&H.set&&/_PopupRenderer/.test(H.declaredClass)&&
H.set("showTitle",!1)}this.setContent(F);this.updateHighlight(this.map,this.features[G]);this.showHighlight()}},_toggleVisibility:function(G){this._setVisibility(G);this.isShowing=G},_setVisibility:function(G){h.toggle(this.domNode,"esriPopupVisible",G);h.toggle(this.domNode,"esriPopupHidden",!G)},_waitAndHide:function(G){var F=this;this._delayHide=!0;setTimeout(function(){F._delayHide&&(F._delayHide=!1,F.hide())},G)},_followMap:function(){this._unfollowMap();var G=this.map;this._handles=[d.connect(G,
"onPanStart",this,this._onPanStart),d.connect(G,"onPan",this,this._onPan),d.connect(G,"onZoomStart",this,this._onZoomStart),d.connect(G,"onExtentChange",this,this._onExtentChange)]},_unfollowMap:function(){var G=this._handles;G&&(l.forEach(G,d.disconnect),this._handles=null)},_onPanStart:function(){var G=this.domNode.style;this._panOrigin={left:G.left,top:G.top,right:G.right,bottom:G.bottom}},_onPan:function(G,F){var H=this._panOrigin;G=F.x;F=F.y;var J=H.left,K=H.top,Q=H.right;H=H.bottom;J&&(J=parseFloat(J)+
G+"px");K&&(K=parseFloat(K)+F+"px");Q&&(Q=parseFloat(Q)-G+"px");H&&(H=parseFloat(H)-F+"px");k.set(this.domNode,{left:J,top:K,right:Q,bottom:H})},_onZoomStart:function(){this._setVisibility(!1)},_onExtentChange:function(G,F,H){H&&(this._setVisibility(!0),this.show(this._targetLocation||this.location));this._targetLocation=null},_toggleSize:function(){this._maximized?this.restore():this.maximize()},_getTargetAnchor:function(){return this._transientAnchor||this.anchor},_setPosition:function(G){var F=
G.x,H=G.y;G=this.offsetX||0;var J=this.offsetY||0,K=0,Q=0,P=this.map,I=P.position.x,N=P.position.y,L=P.width,W=P.height;P="Left";var Z="bottom",aa="right",ia="top",R=n.getContentBox(this._positioner),S=R.w/2,M=R.h/2,X=k.get(this._sizers[0],"height")+this._maxHeight+k.get(this._sizers[2],"height"),fa=X/2,ea=0,ha=0,ra=L,Aa=W,Ea=F,va=H,Ga=this._getTargetAnchor().toLowerCase();if("auto"===Ga){if(Ga=t.getBox)Ga=Ga(),ea=Math.max(Ga.l,I),ra=Math.min(Ga.l+Ga.w,I+L),ha=Math.max(Ga.t,N),Aa=Math.min(Ga.t+Ga.h,
N+W),Ea+=I,va+=N;I=va-ha>=X;N=Aa-va>=X;L=ra-Ea>=R.w;R=Ea-ea>=R.w;va-ha>fa&&Aa-va>=fa&&(L?(Z="",P="Left",ia="",aa="right"):R&&(Z="",P="Right",ia="",aa="left"));P&&Z&&Ea-ea>S&&ra-Ea>=S&&(I?(P="",Z="bottom",aa="",ia="top"):N&&(P="",Z="top",aa="",ia="bottom"));P&&Z&&(L&&I?(P="Left",Z="bottom",aa="right",ia="top"):L&&N?(P="Left",Z="top",aa="right",ia="bottom"):R&&N?(P="Right",Z="top",aa="left",ia="bottom"):R&&I&&(P="Right",Z="bottom",aa="left",ia="top"));this._anchor=ia&&aa?ia+"-"+aa:ia||aa}else Z=P="",
-1!==Ga.indexOf("top")?Z="bottom":-1!==Ga.indexOf("bottom")&&(Z="top"),-1!==Ga.indexOf("left")?P="Right":-1!==Ga.indexOf("right")&&(P="Left"),this._anchor=this._getTargetAnchor();aa=Z+P;switch(aa){case "top":case "bottom":Q=14;break;case "Left":case "Right":K=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":Q=14,K=-16}k.set(this.domNode,{left:F+"px",top:H+"px",right:null,bottom:null});F={left:null,right:null,top:null,bottom:null};P?F[P.toLowerCase()]=K+G+"px":F.left=-S+
"px";Z?F[Z]=Q+J+"px":F.top=-M+"px";k.set(this._positioner,F);this._showPointer(aa)},_showPointer:function(G){h.remove(this._pointer,"top bottom right left topLeft topRight bottomRight bottomLeft hidden".split(" "));h.remove(this._outerPointer,["right","left","hidden"]);"Right"===G||"Left"===G?(G=G.toLowerCase(),h.add(this._outerPointer,G)):h.add(this._pointer,G)},_setPagerCallbacks:function(G,F,H){if(this.pagingControls&&(G!==this||this._pagerScope&&this._pagerScope!==this)&&G!==this._pagerScope){this._pagerScope=
G;G===this&&(F=this.selectPrevious,H=this.selectNext);var J=this._eventConnections;d.disconnect(J[1]);d.disconnect(J[2]);F&&(J[1]=d.connect(this._prevFeatureButton,"onclick",G,F));H&&(J[2]=d.connect(this._nextFeatureButton,"onclick",G,H))}},_getLocation:function(G){var F=G&&G.geometry;if(F)switch(F.type){case "point":var H=F;if(G.isAggregate()){G=G.getChildGraphics();var J=G[0];G=(J=J.geometry&&J.geometry.spatialReference)&&new E({points:l.map(G,function(K){K=K.geometry;return[K.x,K.y]}),spatialReference:J.toJson()});
J=C.getDenormalizedExtent(G)}break;case "multipoint":H=F.getPoint(0);J=C.getDenormalizedExtent(F);break;case "polyline":case "polygon":H=F.getPoint(0,0),J=C.getDenormalizedExtent(F)}return[H,J]},_zoomToFeature:function(G){G.preventDefault();var F=this.features,H=this.selectedIndex;G=this.map;if(F)if(H=this._getLocation(F[H]),F=H[0],H=H[1],F||(F=this.location),H&&H.intersects(this.location)||(this.location=F),H&&H.getWidth()&&H.getHeight())G.setExtent(H,!0);else{var J=G.getNumLevels();H=G.getLevel();
var K=G.getMaxZoom(),Q=this.zoomFactor||1;0<J?H!==K&&(J=H+Q,J>K&&(J=K),G.navigationManager._wheelZoom({value:J-H,mapPoint:F},!0)):G.navigationManager._wheelZoom({value:1/Math.pow(2,Q)*2,mapPoint:F},!0)}},_updatePagingControls:function(){var G=this._prevFeatureButton,F=this._nextFeatureButton,H=this.selectedIndex,J=this.features?this.features.length:0;this.pagingControls&&1<J?(0===H?h.add(G,"hidden"):h.remove(G,"hidden"),H===J-1?h.add(F,"hidden"):h.remove(F,"hidden")):(h.add(G,"hidden"),h.add(F,"hidden"))},
_updatePagingInfo:function(){var G=this.features?this.features.length:0,F=this._nls,H="\x26nbsp;";this.pagingInfo&&1<G&&F.NLS_pagingInfo&&(H=x.substitute({index:this.selectedIndex+1,total:G},F.NLS_pagingInfo));G&&(F=this.getSelectedFeature(),G=F.getInfoTemplate(),F=F.getTitle(),G&&!/esri\.InfoTemplate/.test(G.declaredClass)&&this.titleInBody||!F||(H=F+("\x26nbsp;"===H?"":" "+H)));this.setTitle(H)},_updateUI:function(){if(this.popupWindow){var G=this.features,F=this.deferreds,H=G?G.length:0,J=this._spinner,
K=this._actionList,Q=this._nls;this._updatePagingControls();this._updatePagingInfo();H?h.remove(K,"hidden"):h.add(K,"hidden");F&&F.length?G?h.remove(J,"hidden"):this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+Q.NLS_searching+"...\x3c/div\x3e"):h.add(J,"hidden");H||F&&F.length?this._delayHide=!1:(this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+Q.NLS_noInfo+".\x3c/div\x3e"),this.visibleWhenEmpty||this._waitAndHide(this.hideDelay))}}});B.setObject("dijit.Popup",f,b);return f})},
"esri/InfoWindowBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/dom-construct dojo/has dijit/registry ./kernel ./lang ./geometry/ScreenPoint".split(" "),function(f,B,l,d,c,u,t,e,r,m,a){f=f(null,{declaredClass:"esri.InfoWindowBase",constructor:function(){var h=B.hitch;this.__set_title=h(this,this.__set_title);this.__err_title=h(this,this.__err_title);this.__set_content=h(this,this.__set_content);this.__err_content=h(this,this.__err_content)},
setMap:function(h){this.map=h},unsetMap:function(h){delete this.map},setTitle:function(){},setContent:function(){},show:function(){},hide:function(){},resize:function(){},onShow:function(){},onHide:function(){},place:function(h,q){m.isDefined(h)?B.isObject(h)?u.place(h,q,"only"):q.innerHTML=h:q.innerHTML=""},startupDijits:function(h){this._processDijits(h)},destroyDijits:function(h){this._processDijits(h,!0)},getDijits:function(h){var q=[];h&&1===h.children.length&&(h=h.children[0])&&(q=(q=e.byNode(h))?
[q]:e.findWidgets(h));return q},_processDijits:function(h,q){h=this.getDijits(h);l.forEach(h,function(n){if(q){if(n._started&&!n._destroyed)try{n.destroyRecursive?n.destroyRecursive():n.destroy&&n.destroy()}catch(k){}}else if(!n._started)try{n.startup()}catch(k){}})},__registerMapListeners:function(){this.__unregisterMapListeners();var h=this.map;this.__handles=[d.connect(h,"onPan",this,this.__onMapPan),d.connect(h,"onZoomStart",this,this.__onMapZmStart),d.connect(h,"onExtentChange",this,this.__onMapExtChg)]},
__unregisterMapListeners:function(){var h=this.__handles;h&&(l.forEach(h,d.disconnect,d),this.__handles=null)},__onMapPan:function(h,q){this.move(q,!0)},__onMapZmStart:function(){this.__mcoords=this.mapCoords||this.map.toMap(new a(this.coords));this.hide(null,!0)},__onMapExtChg:function(h,q,n){h=this.map;var k=this.mapCoords;k?this.show(k,null,!0):(q=n?h.toScreen(this.__mcoords):this.coords.offset(q&&q.x||0,q&&q.y||0),this.show(q,null,!0))},__setValue:function(h,q){this[h].innerHTML="";var n="_dfd"+
h,k=this[n];k&&-1===k.fired&&(k.cancel(),this[n]=null);m.isDefined(q)&&(q instanceof c?(this[n]=q,q.addCallbacks(this["__set"+h],this["__err"+h])):this.__render(h,q))},__set_title:function(h){this._dfd_title=null;this.__render("_title",h)},__err_title:function(h){this._dfd_title=null},__set_content:function(h){this._dfd_content=null;this.__render("_content",h)},__err_content:function(h){this._dfd_content=null},__render:function(h,q){var n=this[h];this.place(q,n);this.isShowing&&(this.startupDijits(n),
"_title"===h&&this._adjustContentArea&&this._adjustContentArea())}});return r.InfoWindowBase=f})},"esri/PopupBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Color dojo/_base/Deferred dojo/has ./kernel ./graphic ./geometry/Point ./geometry/jsonUtils ./geometry/mathUtils ./geometry/webMercatorUtils ./symbols/SimpleMarkerSymbol ./symbols/SimpleLineSymbol ./symbols/CartographicLineSymbol ./symbols/SimpleFillSymbol ./tasks/query ./Evented ./PopupInfo".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x){function v(y){return"sizeInfo"===y.type}f=f(x,{declaredClass:"esri.PopupBase",_featureLayers:{},_updateEndHandles:[],_mapLevelChangeHandle:null,_evtMap:{"set-features":!0,"clear-features":!0,"selection-change":!0,"dfd-complete":!0},onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){},initialize:function(){this.count=0;this.selectedIndex=-1;this.on("clear-features",B.hitch(this,this._resetUpdateEndListeners));
this.on("dfd-complete",B.hitch(this,this._processFeatures));this.on("set-features",B.hitch(this,this._processFeatures));this.on("selection-change",B.hitch(this,this._checkFeatureResolution))},cleanup:function(){this.features=this.deferreds=null;this._resetUpdateEndListeners();this._untrackMapLevelChange()},setFeatures:function(y){if(y&&y.length){this.clearFeatures(!0);var D,E;y[0]instanceof c?E=y:D=y;D?this._updateFeatures(null,D):(this.deferreds=E,E=E.slice(0),l.forEach(E,function(C){C.addBoth(B.hitch(this,
this._updateFeatures,C))},this))}},clearFeatures:function(y){this.features=this.deferreds=this._marked=null;this.count=0;var D=this.selectedIndex;this.selectedIndex=-1;if(-1<D)this.onSelectionChange();this.onClearFeatures({isIntermediate:!!y})},getSelectedFeature:function(){var y=this.features;if(y)return y[this.selectedIndex]},select:function(y){0>y||y>=this.count||(this.selectedIndex=y,this.onSelectionChange())},enableHighlight:function(y){this._highlighted=y.graphics.add(new e(new r(0,0,y.spatialReference)));
this._highlighted.attr("data-popup-highlight","");this._highlighted.hide();this._trackMapLevelChange(y);this.markerSymbol||(y=this.markerSymbol=new q,y.setStyle(q.STYLE_TARGET),y._setDim(16,16,0),y.setOutline(new k(n.STYLE_SOLID,new d([0,255,255]),2,k.CAP_ROUND,k.JOIN_ROUND)),y.setColor(new d([0,0,0,0])));this.lineSymbol||(this.lineSymbol=new n(n.STYLE_SOLID,new d([0,255,255]),2));this.fillSymbol||(this.fillSymbol=new g(g.STYLE_NULL,new n(n.STYLE_SOLID,new d([0,255,255]),2),new d([0,0,0,0])));this.clusterFillSymbol||
(this.clusterFillSymbol=new g(g.STYLE_SOLID,new n(n.STYLE_SOLID,new d([0,255,255]),1.33),null))},disableHighlight:function(y){var D=this._highlighted;D&&(D.hide(),y.graphics.remove(D),delete this._highlighted);this._untrackMapLevelChange();this.markerSymbol=this.lineSymbol=this.fillSymbol=null},showHighlight:function(){var y=this.features&&this.features[this.selectedIndex];this._highlighted&&y&&y.geometry&&this._highlighted.show()},hideHighlight:function(){this._highlighted&&this._highlighted.hide()},
updateHighlight:function(y,D){var E=D.geometry,C=this._highlighted;if(E&&C){C.hide();!C._graphicsLayer&&y&&y.graphics.add(C);C.setGeometry(m.fromJson(E.toJson()));switch(E.type){case "point":case "multipoint":var z=D.getLayer(),w=D.symbol||z&&z._getSymbol(D);if(z&&w){var A;E=w.xoffset||0;var G=w.yoffset||0,F=w.angle||0;switch(w.type){case "simplemarkersymbol":var H=A=w.size||0;break;case "picturemarkersymbol":H=w.width||0;A=w.height||0;break;case "textsymbol":H=A=w.font&&w.font.size||0}var J=D.symbol?
null:z._getRenderer(D);(z=this._getSizeInfo(J))?y=D=J.getSize(D,{sizeInfo:z,shape:w.style,resolution:y&&y.getResolutionInMeters&&y.getResolutionInMeters()}):null!=D.size?y=D=D.size:(y=H,D=A);J=this.markerSymbol;y&&D&&(E&&(E=E/H*y),G&&(G=G/A*D),J._setDim(y+4,D+4,0));J.setOffset(E,G);J.setAngle(F)}break;case "polyline":J=this.lineSymbol;break;case "polygon":J=this.fillSymbol}C.setSymbol(J)}else C&&C.hide()},showClosestFirst:function(y){var D=this.features;if(D&&D.length){if(1<D.length){var E,C=Infinity,
z=-1,w,A=a.getLength,G=y.spatialReference;y=y.normalize();for(E=D.length-1;0<=E;E--)if(w=D[E].geometry){var F=w.spatialReference;var H=0;try{var J="point"===w.type?w:w.getExtent().getCenter();J=J.normalize();G&&F&&!G.equals(F)&&G._canProject(F)&&(J=G.isWebMercator()?h.geographicToWebMercator(J):h.webMercatorToGeographic(J));H=A(y,J)}catch(K){}0<H&&H<C&&(C=H,z=E)}0<z&&(D.splice(0,0,D.splice(z,1)[0]),this.select(0))}}else this.deferreds&&(this._marked=y)},_trackMapLevelChange:function(y){this._untrackMapLevelChange();
this._mapLevelChangeHandle=y.on("extent-change",B.hitch(this,function(D){D.levelChange&&this._checkFeatureResolution()}))},_untrackMapLevelChange:function(){this._mapLevelChangeHandle&&(this._mapLevelChangeHandle.remove(),this._mapLevelChangeHandle=null)},_unbind:function(y){y=l.indexOf(this.deferreds,y);if(-1!==y)return this.deferreds.splice(y,1),this.deferreds.length?1:(this.deferreds=null,2)},_fireComplete:function(y){var D=this._marked;D&&(this._marked=null,this.showClosestFirst(D));this.onDfdComplete(y)},
_updateFeatures:function(y,D){if(y){if(this.deferreds&&(y=this._unbind(y)))if(D&&D instanceof Error){if(this._fireComplete(D),2===y)this.onSetFeatures()}else if(D&&D.length)if(this.features){if(D=l.filter(D,function(E){return-1===l.indexOf(this.features,E)},this),this.features=this.features.concat(D),this.count=this.features.length,this._fireComplete(),2===y)this.onSetFeatures()}else{this.features=D;this.count=D.length;this.selectedIndex=0;this._fireComplete();if(2===y)this.onSetFeatures();this.select(0)}else if(this._fireComplete(),
2===y)this.onSetFeatures()}else this.features=D,this.count=D.length,this.selectedIndex=0,this.onSetFeatures(),this.select(0)},_getSizeInfo:function(y){return y?y.sizeInfo||l.filter(y.visualVariables,v)[0]:null},_resetUpdateEndListeners:function(){this._featureLayers={};l.forEach(this._updateEndHandles,function(y){y.remove()});this._updateEndHandles=[]},_processFeatures:function(){l.forEach(this.features,function(y){(y=y.getLayer())&&!this._featureLayers[y.id]&&(1===y.currentMode||0===y.currentMode&&
6===y.mode)&&y.objectIdField&&y.hasXYFootprint&&y.queryFeatures&&(this._featureLayers[y.id]=y,y=y.on("update-end",B.hitch(this,this._fLyrUpdateEndHandler)),this._updateEndHandles.push(y))},this)},_fLyrUpdateEndHandler:function(y){if(!y.error){var D=this,E=y.target,C=E.getSelectedFeatures(),z=0===E.currentMode&&6===E.mode,w={},A=[];l.forEach(this.features,function(G){if(G.getLayer()===E){var F=G.attributes[E.objectIdField];w[F]=G;A.push(F)}});A.length&&(y=new b,y.objectIds=A,E.queryFeatures(y,function(G){l.forEach(G.features,
function(F){var H=w[F.attributes[E.objectIdField]],J=!1;H.geometry!==F.geometry||E.hasWebGLSurface()?(H.setGeometry(F.geometry),J=!0):z&&C&&-1!==l.indexOf(C,F)&&(J=!0);J&&this._highlighted&&H===this.getSelectedFeature()&&this._highlighted.setGeometry(F.geometry)},D)}))}},_checkFeatureResolution:function(){var y=this.getSelectedFeature(),D=this.map;if(y&&D){var E=y.getLayer();if(E){var C=y.getResolution();2===E.currentMode&&y.geometry&&C&&C>D.getResolution()&&(D=D.getResolutionForPopup(),(E=this._refetchFeature(y,
D,E))&&E.then(B.hitch(this,this._updateFeatureResolution,y,D)))}}},_refetchFeature:function(y,D,E){if(y=this._createQueryForCustomResolution(y,D,E))return E.queryFeatures(y).then(function(C){return C&&C.features[0]})},_createQueryForCustomResolution:function(y,D,E){E=E.objectIdField;var C=y.attributes;C=C&&E&&C[E];if(null==C)return null;var z=new b;z.objectIds=[C];z.maxAllowableOffset=D;z.outFields=[E];z.outSpatialReference=y.geometry.spatialReference;return z},_updateFeatureResolution:function(y,
D,E){y.getResolution()!==D&&(y.setResolution(D),y.setGeometry(E.geometry),this._highlighted&&y===this.getSelectedFeature()&&this._highlighted.setGeometry(y.geometry))}});return t.PopupBase=f})},"esri/plugins/popupManager":function(){define(["../PopupManager"],function(f){return{add:function(B,l){B.popupManager||(B.popupManager=new f(l),B.popupManager.setMap(B))},remove:function(B){var l=B.popupManager;l&&(l.unsetMap(),B.popupManager=void 0)}}})},"esri/PopupManager":function(){define("./geometry/Extent ./geometry/ScreenPoint ./kernel ./layerUtils ./tasks/query dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/lang esri/sniff dojo/on dojo/promise/all dojo/Stateful require".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k){var g;e=e(n,{declaredClass:"esri.PopupManager",enabled:!1,map:null,_mapClickHandle:null,_featureLayersCache:{},constructor:function(b){this._mapClickHandler=m.hitch(this,this._mapClickHandler)},setMap:function(b){if(this.map)if(b!==this.map)this.unsetMap();else return;this.map=b;this._setupClickHandler()},unsetMap:function(){this.map&&(this.map=null);this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null)},getMapLayer:function(b){var x;
if(b&&(x=b.getLayer())&&(b=x.id,this._featureLayersCache[b])){var v=b.lastIndexOf("_");-1<v&&(b=b.substring(0,v),x=this.map.getLayer(b))}return x},_enabledSetter:function(b){this.enabled=b;this._setupClickHandler()},_setupClickHandler:function(){this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null);this.enabled&&this.map&&(this._mapClickHandle=this.map.on("click",this._mapClickHandler))},_mapClickHandler:function(b){var x=this.map.infoWindow,v=b.graphic;x&&this.map.loaded&&
(x.clearFeatures&&x.setFeatures?this._showPopup(b):v&&v.getInfoTemplate()&&this._showInfoWindow(v,b.mapPoint))},_showPopup:function(b){var x=this.map,v=x.infoWindow,y=this,D=[],E=[x.graphics].concat(t.map(x.graphicsLayerIds,x.getLayer,x));t.forEach(E,function(w){var A=w.getFeatureReduction&&w.getFeatureReduction();w&&w.loaded&&w.infoTemplate&&!w.suspended&&(!A||!y._isReductionEnabled(w)||A.infoTemplate&&!A.disablePopup)&&D.push(w)});var C=[];t.forEach(x.layerIds,function(w){(w=x.getLayer(w))&&w.loaded&&
!w.suspended&&(y._isImageServiceLayer(w)&&w.infoTemplate?D.push(w):"esri.layers.WMSLayer"===w.declaredClass&&w.getFeatureInfoURL?D.push(w):"esri.layers.ArcGISDynamicMapServiceLayer"!==w.declaredClass&&"esri.layers.ArcGISTiledMapServiceLayer"!==w.declaredClass||!w.infoTemplates||C.push(w))});var z=x.getResolutionForPopup();this._getSubLayerFeatureLayers(C,z).then(function(w){D=D.concat(w);w=b.graphic&&b.graphic.getParentGraphic()||b.graphic;var A=null;w&&w.getInfoTemplate()&&!y._isImageServiceLayer(w.getLayer())&&
(A=w);if(D.length||A){var G=y._calculateClickTolerance(D),F=b.screenPoint;w=x.toMap(new B(F.x-G,F.y+G));G=x.toMap(new B(F.x+G,F.y-G));var H=new f(w.x,w.y,G.x,G.y,x.spatialReference);if(H=H.intersects(x.extent)){var J=new c,K=!!A,Q=!0;w=t.map(D,function(P){J.timeExtent=P.useMapTime?x.timeExtent:null;var I=y._isReductionEnabled(P);P=I?P.getFeatureReductionLayer():P;var N=y._featureLayersCache[P.id];if(y._isImageServiceLayer(P)){J.geometry=b.mapPoint;Q=!1;var L={rasterAttributeTableFieldPrefix:"Raster.",
returnDomainValues:!0};y._isTiledImageServiceLayer(P)?L=P.fetchPopupFromTiles(J):(L=P.queryVisibleRasters(J,L),L.addCallback(function(){var Z=P.getVisibleRasters();K=K||0<Z.length;return Z}))}else if("esri.layers.WMSLayer"===P.declaredClass){L=new r;var W=P._getPopupGraphic(x,b.screenPoint);W?(L.resolve([W]),K=!0):L.resolve([])}else N||"function"===typeof P.queryFeatures&&(0===P.currentMode||1===P.currentMode)?(J.geometry=H,L=P.queryFeatures(J),L.addCallback(function(Z){var aa=[];t.forEach(Z.features,
function(ia){ia.visible&&(aa.push(ia),N&&ia.setResolution(z))});K=K||0<aa.length;return aa})):(L=new r,W=t.filter(P.graphics,function(Z){return Z&&Z.visible&&H.intersects(Z.geometry)}),I&&y._isParentLayer(P,A)&&(I=y._findGraphicById(W,A,"cluster_id"))&&(A=I),K=K||0<W.length,L.resolve(W));return L});A&&(G=new r,G.resolve([A]),w.unshift(G));t.some(w,function(P){return!P.isFulfilled()})||K?(v.setFeatures(w),v.show(b.mapPoint,{closestFirst:Q})):(v.hide(),v.clearFeatures())}}})},_getSubLayerFeatureLayers:function(b,
x,v){x=x||null;var y=v||new r,D=[];v=b.length;var E=this.map.getScale(),C=!1,z=this,w=0;a:for(;w<v;w++){var A=b[w],G=A.dynamicLayerInfos||A.layerInfos;if(G){var F=null;A._params&&(A._params.layers||A._params.dynamicLayers)&&(F=A.visibleLayers);F=d._getVisibleLayers(G,F);for(var H=d._getLayersForScale(E,G),J=G.length,K=0;K<J;K++){var Q=G[K],P=Q.id,I=A.infoTemplates[P];if(!Q.subLayerIds&&I&&I.infoTemplate&&-1<t.indexOf(F,P)&&-1<t.indexOf(H,P)){if(!g){C=!0;break a}var N=A.id+"_"+P,L=this._featureLayersCache[N];
L&&L.loadError||(L||((L=I.layerUrl)||(L=Q.source?this._getLayerUrl(A.url,"/dynamicLayer"):this._getLayerUrl(A.url,P)),L=new g(L,{parentLayer:A,id:N,drawMode:!1,mode:g.MODE_SELECTION,outFields:this._getOutFields(I.infoTemplate),resourceInfo:I.resourceInfo,source:Q.source}),this._featureLayersCache[N]=L),L.setDefinitionExpression(A.layerDefinitions&&A.layerDefinitions[P]),L.setGDBVersion(A.gdbVersion),L.setInfoTemplate(I.infoTemplate),L.setMaxAllowableOffset(x),L.setUseMapTime(!!A.useMapTime),A.layerDrawingOptions&&
A.layerDrawingOptions[P]&&A.layerDrawingOptions[P].renderer&&L.setRenderer(A.layerDrawingOptions[P].renderer),D.push(L))}}}}if(C){var W=new r;k(["./layers/FeatureLayer"],function(aa){g=aa;W.resolve()});W.then(function(){z._getSubLayerFeatureLayers(b,x,y)})}else{var Z=[];t.forEach(D,function(aa){if(!aa.loaded){var ia=new r;h.once(aa,"load, error",function(){ia.resolve()});Z.push(ia.promise)}});Z.length?q(Z).then(function(){D=t.filter(D,function(aa){return!aa.loadError&&aa.isVisibleAtScale(E)});y.resolve(D)}):
(D=t.filter(D,function(aa){return aa.isVisibleAtScale(E)}),y.resolve(D))}return y.promise},_getLayerUrl:function(b,x){var v=b.indexOf("?");return-1===v?b+"/"+x:b.substring(0,v)+"/"+x+b.substring(v)},_getOutFields:function(b){var x=b.info&&b.info.fieldInfos;if(x&&x.length&&"esri.dijit.PopupTemplate"===b.declaredClass){var v=[];t.forEach(x,function(y){var D=y.fieldName&&y.fieldName.toLowerCase();D&&"shape"!==D&&0!==D.indexOf("relationships/")&&v.push(y.fieldName)})}else v=["*"];return v},_calculateClickTolerance:function(b){var x=
a("esri-touch")?9:6,v,y;t.forEach(b,function(D){if(v=D.renderer)"esri.renderer.SimpleRenderer"===v.declaredClass?((y=v.symbol)&&y.xoffset&&(x=Math.max(x,Math.abs(y.xoffset))),y&&y.yoffset&&(x=Math.max(x,Math.abs(y.yoffset)))):"esri.renderer.UniqueValueRenderer"!==v.declaredClass&&"esri.renderer.ClassBreaksRenderer"!==v.declaredClass||t.forEach(v.infos,function(E){(y=E.symbol)&&y.xoffset&&(x=Math.max(x,Math.abs(y.xoffset)));y&&y.yoffset&&(x=Math.max(x,Math.abs(y.yoffset)))})});return x},_showInfoWindow:function(b,
x){var v=this.map.infoWindow,y=b.geometry;x=y&&"point"===y.type?y:x;y=b.getContent();v.setTitle(b.getTitle());y&&m.isString(y.id)&&(b=u.byId(y.id))&&b.set&&/_PopupRenderer/.test(b.declaredClass)&&b.set("showTitle",!1);v.setContent(y);v.show(x)},_findGraphicById:function(b,x,v){var y,D=(x=x.attributes)&&x[v];t.some(b,function(E){var C=E.attributes;C&&C[v]===D&&(y=E);return!!y});return y},_isParentLayer:function(b,x){x=x&&x.getLayer();return b&&x===b},_isReductionEnabled:function(b){return b&&b.isFeatureReductionActive&&
b.isFeatureReductionActive()},_isImageServiceLayer:function(b){return"esri.layers.ArcGISImageServiceLayer"===b.declaredClass||"esri.layers.ArcGISImageServiceVectorLayer"===b.declaredClass||"esri.layers.RasterXLayer"===b.declaredClass},_isTiledImageServiceLayer:function(b){return"esri.layers.RasterXLayer"===b.declaredClass}});return l.PopupManager=e})},"esri/MapNavigationManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/event dojo/mouse dojo/keys dijit/focus ./kernel ./MouseEvents ./TouchEvents ./PointerEvents ./config ./sniff ./lang ./fx ./graphic ./tileUtils ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./symbols/SimpleFillSymbol".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E,C){var z=d.connect,w=d.disconnect,A=n("chrome"),G=n("safari"),F=[t.NUMPAD_PLUS,61,187,t.NUMPAD_MINUS,173,189,t.UP_ARROW,t.NUMPAD_8,t.RIGHT_ARROW,t.NUMPAD_6,t.DOWN_ARROW,t.NUMPAD_2,t.LEFT_ARROW,t.NUMPAD_4,t.PAGE_UP,t.NUMPAD_9,t.PAGE_DOWN,t.NUMPAD_3,t.END,t.NUMPAD_1,t.HOME,t.NUMPAD_7];f=f(null,{declaredClass:"esri.MapNavigationManager",eventModel:"",constructor:function(H,J){this.map=H;B.mixin(this,J);J=H.__container;n("esri-pointer")?(this.pointerEvents=
new h(J,{map:H}),this.eventModel="pointer"):n("esri-touch")?(n("ios")||(this.mouseEvents=new m(J,{map:H})),this.touchEvents=new a(J,{map:H,mouseEvents:this.mouseEvents}),this.eventModel="touch"):(this.mouseEvents=new m(J,{map:H}),this.eventModel="mouse");this._zoomRect=new b(null,new C(q.defaults.map.zoomSymbol));this._keyDx=this._keyDy=0;this._adjustPinch=B.hitch(this,this._adjustPinch);this._adjustPinchEnd=B.hitch(this,this._adjustPinchEnd)},_panInit:function(H){var J=this.mouseEvents;u.isLeft(H)&&
this.map.isPan&&!H.shiftKey&&(this._dragOrigin=new v(0,0),B.mixin(this._dragOrigin,H.screenPoint),w(this._panStartHandle),w(this._panHandle),w(this._panEndHandle),this._panStartHandle=z(J,"onMouseDragStart",this,this._panStart),this._panHandle=z(J,"onMouseDrag",this,this._pan),this._panEndHandle=z(J,"onMouseUp",this,this._panEnd),A||G)&&(H.preventDefault(),e.curNode&&e.curNode.blur())},_panStart:function(H){this.map.setCursor("move");this.map.__panStart(H.screenPoint.x,H.screenPoint.y)},_pan:function(H){this.map.__pan(H.screenPoint.x-
this._dragOrigin.x,H.screenPoint.y-this._dragOrigin.y)},_panEnd:function(H){w(this._panStartHandle);w(this._panHandle);w(this._panEndHandle);this._panStartHandle=this._panHandle=this._panEndHandle=null;var J=this.map;J.__panning&&(J.__panEnd(H.screenPoint.x-this._dragOrigin.x,H.screenPoint.y-this._dragOrigin.y),J.resetMapCursor())},_zoomInit:function(H){var J=this.map,K=this.pointerEvents||this.mouseEvents;(u.isLeft(H)||H.pointerType)&&J.isRubberBandZoom&&H.shiftKey&&(J.setCursor("crosshair"),this._dragOrigin=
B.mixin({},H.screenPoint),this._zoomDir=H.ctrlKey||H.metaKey?-1:1,this.pointerEvents?(this._zoomHandle=z(K,"onSwipeMove",this,this._zoom),this._zoomEndHandle=z(K,"onSwipeEnd",this,this._zoomEnd)):(this._zoomHandle=z(K,"onMouseDrag",this,this._zoom),this._zoomEndHandle=z(K,"onMouseUp",this,this._zoomEnd)),A&&H.preventDefault())},_zoom:function(H){var J=this.map,K=this._normalizeRect(H).offset(J.__visibleRect.x,J.__visibleRect.y);H=J.graphics;var Q=this._zoomRect;Q.geometry||J.setCursor("crosshair");
Q.geometry&&H.remove(Q,!0);var P=J.toMap(new v(K.x,K.y));K=J.toMap(new v(K.x+K.width,K.y+K.height));K=new D(P.x,P.y,K.x-P.x,P.y-K.y,J.spatialReference);K._originOnly=!0;Q.setGeometry(K);H.add(Q,!0)},_zoomEnd:function(H){var J=this._zoomRect,K=this.map,Q=K.extent,P=K.spatialReference;w(this._zoomHandle);w(this._zoomEndHandle);this._zoomHandle=this._zoomEndHandle=null;if(K._canZoom(this._zoomDir)&&J.getDojoShape()){K.graphics.remove(J);J.geometry=null;H=this._normalizeRect(H);H.x+=K.__visibleRect.x;
H.y+=K.__visibleRect.y;if(-1===this._zoomDir){var I=Q.getWidth();H=(I*K.width/H.width-I)/2;P=new y(Q.xmin-H,Q.ymin-H,Q.xmax+H,Q.ymax+H,P)}else Q=K.toMap({x:H.x,y:H.y+H.height}),H=K.toMap({x:H.x+H.width,y:H.y}),P=new y(Q.x,Q.y,H.x,H.y,P);K._extentUtil(null,null,P)}J.getDojoShape()&&K.graphics.remove(J,!0);this._zoomDir=0;K.resetMapCursor()},_wheelZoom:function(H,J){var K=this.map;if(!J){if(K.smartNavigation&&!H.shiftKey&&!K._isPanningOrZooming()){K.disableScrollWheelZoom();this._setScrollWheelPan(!0);
this._wheelPan(H);return}J=H.timeStamp;if(!k.isDefined(J)||0>=J)J=(new Date).getTime();if(100>(this._mwts?J-this._mwts:J))return;this._mwts=J}K._canZoom(H.value)&&K._extentUtil({numLevels:H.value,mapAnchor:H.mapPoint,screenAnchor:H.screenPoint})},_wheelPan:function(H){var J=this.map;if(H.shiftKey&&!J._isPanningOrZooming())this._setScrollWheelPan(!1),J.enableScrollWheelZoom(),this._wheelZoom(H);else{var K=0,Q=0;n("ff")?H.axis===H.HORIZONTAL_AXIS?K=-H.detail:Q=-H.detail:(K=H.wheelDeltaX,Q=H.wheelDeltaY);
J.translate(K,Q)}},_setScrollWheelPan:function(H){this.map.isScrollWheelPan=H;this.mouseEvents&&this.mouseEvents.enableMouseWheel(H);w(this._mwMacHandle);this._mwMacHandle=null;H&&(this._mwMacHandle=z(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelPan))},_recenter:function(H){H.shiftKey&&!this.map._isPanningOrZooming()&&this.map.centerAt(H.mapPoint)},_recenterZoom:function(H){H.shiftKey&&!this.map._isPanningOrZooming()&&(H.value=H.ctrlKey||H.metaKey?-1:1,this._wheelZoom(H,!0))},
_dblClickZoom:function(H){this.map._isPanningOrZooming()||(H.value=1,this._wheelZoom(H,!0))},_twoFingerTap:function(H){this.map._isPanningOrZooming()||(H.value=-1,this._wheelZoom(H,!0))},_keyDown:function(H){var J=H.keyCode,K=this.map;if(-1!==l.indexOf(F,J)){if(J===t.NUMPAD_PLUS||61===J||187===J)K._extentUtil({numLevels:1});else if(J===t.NUMPAD_MINUS||173===J||189===J)K._extentUtil({numLevels:-1});else{K.__panning||K.__panStart(0,0);switch(J){case t.UP_ARROW:case t.NUMPAD_8:this._keyDy+=10;break;
case t.RIGHT_ARROW:case t.NUMPAD_6:this._keyDx-=10;break;case t.DOWN_ARROW:case t.NUMPAD_2:this._keyDy-=10;break;case t.LEFT_ARROW:case t.NUMPAD_4:this._keyDx+=10;break;case t.PAGE_UP:case t.NUMPAD_9:this._keyDx-=10;this._keyDy+=10;break;case t.PAGE_DOWN:case t.NUMPAD_3:this._keyDx-=10;this._keyDy-=10;break;case t.END:case t.NUMPAD_1:this._keyDx+=10;this._keyDy-=10;break;case t.HOME:case t.NUMPAD_7:this._keyDx+=10;this._keyDy+=10;break;default:return}K.__pan(this._keyDx,this._keyDy)}c.stop(H)}},_keyEnd:function(H){var J=
this.map;J.__panning&&H.keyCode!==t.SHIFT&&(J.__panEnd(this._keyDx,this._keyDy),this._keyDx=this._keyDy=0)},_swipeInit:function(H){var J=this.map;J=J._zoomAnim||J._panAnim;if(H.shiftKey)return!1;J&&J._active&&(J.stop(),J._fire("onEnd",[J.node]));this._dragOrigin=new v(0,0);B.mixin(this._dragOrigin,H.screenPoint);w(this._swipeHandle);w(this._swipeEndHandle);this._swipeHandle=z(this.touchEvents||this.pointerEvents,"onSwipeMove",this,this._swipe);this._swipeEndHandle=z(this.touchEvents||this.pointerEvents,
"onSwipeEnd",this,this._swipeEnd)},_swipe:function(H){var J=this.map;J.__panning?(this._panX=H.screenPoint.x,this._panY=H.screenPoint.y,J.__pan(H.screenPoint.x-this._dragOrigin.x,H.screenPoint.y-this._dragOrigin.y)):(J.setCursor("move"),J.__panStart(H.screenPoint.x,H.screenPoint.y))},_swipeEnd:function(H){w(this._swipeHandle);w(this._swipeEndHandle);this._swipeHandle=this._swipeEndHandle=null;var J=this.map;J.__panning&&(J.resetMapCursor(),J.__panEnd(H.screenPoint.x-this._dragOrigin.x,H.screenPoint.y-
this._dragOrigin.y))},_pinchInit:function(H){var J=this.map,K=J._zoomAnim||J._panAnim;K&&K._active?(K.stop(),K._fire("onEnd",[K.node])):J.__panning&&(H.screenPoint=new v(this._panX,this._panY),H.mapPoint=J.toMap(H.screenPoint),this._swipeEnd(H));w(this._pinchHandle);w(this._pinchEndHandle);this._pinchHandle=z(this.touchEvents||this.pointerEvents,"onPinchMove",this,this._pinch);this._pinchEndHandle=z(this.touchEvents||this.pointerEvents,"onPinchEnd",this,this._pinchEnd)},_pinch:function(H){var J=this.map;
if(H.screenPoints){this.currLength=E.getLength(H.screenPoints[0],H.screenPoints[1]);if(J.__zooming){var K=this.currLength/this._length;this._zoomStartExtent=this.__scaleExtent(J.extent,K,this._dragOrigin);J.__zoom(this._zoomStartExtent,K,this._dragOrigin)}else this._dragOrigin=new v((H.screenPoints[0].x+H.screenPoints[1].x)/2,(H.screenPoints[0].y+H.screenPoints[1].y)/2),this._length=this.currLength,J.__zoomStart(J.extent,this._dragOrigin);this._pinchScale=K;J._fireOnScale(this.currLength/this._length,
this._dragOrigin,!0)}},_pinchEnd:function(H){H=this.map;w(this._pinchHandle);w(this._pinchEndHandle);this._pinchHandle=this._pinchEndHandle=null;this._pinchScale=0;if(H.__zooming&&null===H._zoomAnim){var J=this.currLength/this._length,K=H.extent.getWidth();this._zoomAnimAnchor=H.toMap(this._dragOrigin);this._zoomStartExtent=this.__scaleExtent(H.extent,1/J,this._zoomAnimAnchor);if(H.__tileInfo){var Q=x.getCandidateTileInfo(H,H.__tileInfo,this._zoomStartExtent),P=H.__getExtentForLevel(Q.lod.level,this._zoomAnimAnchor),
I=H.getMinZoom(),N=H.getMaxZoom(),L=P.extent;P=P.lod;var W=K/L.getWidth(),Z=Q.lod.level;1>J?W>J&&Z--:W<J&&Z++;Z<I?Z=I:Z>N&&(Z=N);Z!==Q.lod.level&&(P=H.__getExtentForLevel(Z,this._zoomAnimAnchor),L=P.extent,P=P.lod);this._zoomEndExtent=L;this._zoomEndLod=P;H._zoomAnim=g.animateRange({range:{start:K/this._zoomStartExtent.getWidth(),end:W},duration:q.defaults.map.zoomDuration,rate:q.defaults.map.zoomRate,onAnimate:this._adjustPinch,onEnd:this._adjustPinchEnd});H._zoomAnim.play();H._fireOnScale(H.extent.getWidth()/
this._zoomEndExtent.getWidth(),this._dragOrigin)}else this._zoomEndExtent=this._zoomStartExtent,H._fireOnScale(H.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin),this._adjustPinchEnd()}},_adjustPinch:function(H){var J=this.__scaleExtent(this.map.extent,H,this._zoomAnimAnchor);this.map.__zoom(J,H,this._dragOrigin)},_adjustPinchEnd:function(){var H=this.map,J=H.extent.getWidth()/this._zoomEndExtent.getWidth(),K=this.__scaleExtent(H.extent,1/J,this._zoomAnimAnchor),Q=this._dragOrigin,
P=this._zoomEndLod;this._zoomStartExtent=this._zoomEndExtent=this._zoomEndLod=this._dragOrigin=H._zoomAnim=this._zoomAnimAnchor=null;H.__zoomEnd(K,J,Q,P,!0)},__scaleExtent:function(H,J,K){K=K||H.getCenter();J=H.expand(J);var Q=H.xmin-(J.getWidth()-H.getWidth())*(K.x-H.xmin)/H.getWidth();K=H.ymax-(J.getHeight()-H.getHeight())*(K.y-H.ymax)/H.getHeight();return new y(Q,K-J.getHeight(),Q+J.getWidth(),K,H.spatialReference)},_normalizeRect:function(H){H=H.screenPoint;var J=this._dragOrigin.x,K=this._dragOrigin.y;
H=new D((H.x<J?H.x:J)-this.map.__visibleRect.x,(H.y<K?H.y:K)-this.map.__visibleRect.y,Math.abs(H.x-J),Math.abs(H.y-K));delete H.spatialReference;0===H.width&&(H.width=1);0===H.height&&(H.height=1);return H},setImmediateClick:function(H){switch(this.eventModel){case "mouse":this.mouseEvents.setImmediateClick(H);break;case "touch":this.touchEvents.setImmediateTap(H);this.mouseEvents&&this.mouseEvents.setImmediateClick(H);break;case "pointer":this.pointerEvents.setImmediateTap(H)}},enablePan:function(){this.disablePan();
switch(this.eventModel){case "mouse":this._panInitHandle=z(this.mouseEvents,"onMouseDown",this,this._panInit);break;case "touch":this._panInitHandle=z(this.mouseEvents,"onMouseDown",this,this._panInit);this._swipeInitHandle=z(this.touchEvents,"onSwipeStart",this,this._swipeInit);break;case "pointer":this._swipeInitHandle=z(this.pointerEvents,"onSwipeStart",this,this._swipeInit)}},disablePan:function(){w(this._panInitHandle);this._panInitHandle=null;w(this._swipeInitHandle);this._swipeInitHandle=null},
enableRubberBandZoom:function(){this.disableRubberBandZoom();this._zoomInitHandle=this.pointerEvents?z(this.pointerEvents,"onSwipeStart",this,this._zoomInit):z(this.mouseEvents,"onMouseDown",this,this._zoomInit)},disableRubberBandZoom:function(){w(this._zoomInitHandle);this._zoomInitHandle=null},enablePinchZoom:function(){this.disablePinchZoom();if("touch"===this.eventModel||"pointer"===this.eventModel)this._pinchInitHandle=z(this.touchEvents||this.pointerEvents,"onPinchStart",this,this._pinchInit)},
disablePinchZoom:function(){w(this._pinchInitHandle);this._pinchInitHandle=null},enableScrollWheelZoom:function(){this.disableScrollWheelZoom();this._wheelHandle=z(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelZoom)},disableScrollWheelZoom:function(){w(this._wheelHandle);this._wheelHandle=null},enableScrollWheelPan:function(){var H=this.map;H&&H.loaded&&H.smartNavigation&&(this.disableScrollWheelPan(),this._setScrollWheelPan(!0))},disableScrollWheelPan:function(){var H=this.map;
H&&H.loaded&&H.smartNavigation&&this._setScrollWheelPan(!1)},enableDoubleClickZoom:function(){this.disableDoubleClickZoom();switch(this.eventModel){case "mouse":this._dblClickHandle=z(this.mouseEvents,"onDblClick",this,this._dblClickZoom);break;case "touch":this._dblClickHandle=z(this.mouseEvents,"onDblClick",this,this._dblClickZoom);this._dblTapHandle=z(this.touchEvents,"onDoubleTap",this,this._dblClickZoom);this._zoomOutHandle=z(this.touchEvents,"onTwoFingerTap",this,this._twoFingerTap);break;case "pointer":this._dblTapHandle=
z(this.pointerEvents,"onDoubleTap",this,this._dblClickZoom),this._zoomOutHandle=z(this.pointerEvents,"onTwoFingerTap",this,this._twoFingerTap)}},disableDoubleClickZoom:function(){w(this._dblClickHandle);w(this._zoomOutHandle);this._dblTapHandle&&w(this._dblTapHandle);this._dblClickHandle=this._zoomOutHandle=this._dblTapHandle=null},enableShiftDoubleClickZoom:function(){this.disableShiftDoubleClickZoom();this._sDblClickHandle=z(this.pointerEvents||this.mouseEvents,"onDblClick",this,this._recenterZoom)},
disableShiftDoubleClickZoom:function(){w(this._sDblClickHandle);this._sDblClickHandle=null},enableClickRecenter:function(){this.disableClickRecenter();this._recenterHandle=z(this.pointerEvents||this.mouseEvents,"onClick",this,this._recenter)},disableClickRecenter:function(){w(this._recenterHandle);this._recenterHandle=null},enableKeyboardNavigation:function(){this.disableKeyboardNavigation();this._keyHandle=z(this.pointerEvents||this.mouseEvents,"onKeyDown",this,this._keyDown);this._keyEndHandle=
z(this.pointerEvents||this.mouseEvents,"onKeyUp",this,this._keyEnd)},disableKeyboardNavigation:function(){w(this._keyHandle);w(this._keyEndHandle);this._keyHandle=this._keyEndHandle=null},enableScrollWheel:function(){var H=this.map;H&&(H.smartNavigation?this.enableScrollWheelPan():H.enableScrollWheelZoom())},disableScrollWheel:function(){var H=this.map;H&&(H.disableScrollWheelZoom(),H.smartNavigation&&this.disableScrollWheelPan())},enableNavigation:function(){var H=this.map;H&&H.loaded&&(H._evalNavigationFeature("DoubleClickZoom"),
H._evalNavigationFeature("ClickRecenter"),H._evalNavigationFeature("Pan"),H._evalNavigationFeature("RubberBandZoom"),H._evalNavigationFeature("PinchZoom"),H._evalNavigationFeature("KeyboardNavigation"),H._evalNavigationFeature("ScrollWheel"))},disableNavigation:function(){var H=this.map;H&&H.loaded&&(H._evalNavigationFeature("DoubleClickZoom"),H._evalNavigationFeature("ClickRecenter"),H._evalNavigationFeature("Pan"),H._evalNavigationFeature("RubberBandZoom"),H._evalNavigationFeature("PinchZoom"),
H._evalNavigationFeature("KeyboardNavigation"),H._evalNavigationFeature("ScrollWheel"))},destroy:function(){this.touchEvents&&this.touchEvents.destroy();this.mouseEvents&&this.mouseEvents.destroy();this.pointerEvents&&this.pointerEvents.destroy();var H,J=[this._panInitHandle,this._panStartHandle,this._panHandle,this._panEndHandle,this._zoomInitHandle,this._zoomHandle,this._zoomEndHandle,this._wheelHandle,this._mwMacHandle,this._dblClickHandle,this._zoomOutHandle,this._recenterHandle,this._sDblClickHandle,
this._dblTapHandle,this._keyHandle,this._keyEndHandle,this._swipeInitHandle,this._swipeHandle,this._swipeEndHandle,this._pinchInitHandle,this._pinchHandle,this._pinchEndHandle];for(H=0;H<J.length;H++)w(J[H]);this.map=this.touchEvents=this.mouseEvents=this.eventModel=this.pointerEvents=this._zoomRect=this._dragOrigin=this._panInitHandle=this._panStartHandle=this._panHandle=this._panEndHandle=this._zoomInitHandle=this._zoomHandle=this._zoomEndHandle=this._wheelHandle=this._mwMacHandle=this._dblClickHandle=
this._zoomOutHandle=this._recenterHandle=this._sDblClickHandle=this._dblTapHandle=this._keyHandle=this._keyEndHandle=this._swipeInitHandle=this._swipeHandle=this._swipeEndHandle=this._pinchInitHandle=this._pinchHandle=this._pinchEndHandle=null}});return r.MapNavigationManager=f})},"esri/MouseEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/_base/connect dojo/_base/event ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(f,
B,l,d,c,u,t,e,r,m){var a=c.connect,h=c.disconnect;f=f([e],{declaredClass:"esri.MouseEvents",doubleClickDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==d("mac")?1:3,wheelDivisor:2>d("chrome")?360:120,preventPageScroll:!0,map:null,constructor:function(q,n){this.node=q;l.mixin(this,n);n=function(k){u.stop(k);return!1};d("mozilla")&&B.style(q,"MozUserSelect","none");this._handles=[a(q,"onselectstart",n),a(q,"ondragstart",n),a(q,"onmouseenter",this,this._onMouseEnterHandler),a(q,"onmouseleave",
this,this._onMouseLeaveHandler),a(q,"onmousedown",this,this._onMouseDownHandler),a(q,"onclick",this,this._onClickHandler),a(q,"ondblclick",this,this._onDblClickHandler)];this._onMouseMoveHandler_connect=a(q,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=a(q,"onmouseup",this,this._onMouseUpHandler);this._fireClickEvent=l.hitch(this,this._fireClickEvent);this._initialDuration=this.doubleClickDuration;this.preventPageScroll=(q=this.map)?q.isScrollWheelZoom||q.isScrollWheelPan:
this.preventPageScroll;this.enableMouseWheel(!1)},_fire:function(q,n){if(!this._preventClick||"onClick"!==q&&"onDblClick"!==q){if(this[q])this[q](n);if(this.map&&this.map[q])this.map[q](n)}},_processEvent:function(q){q=u.fix(q,q.target);var n=this.map,k=n&&n.position;k&&("DOMMouseScroll"===q.type&&3>d("ff")?q.screenPoint=new m(window.scrollX+q.screenX-k.x,window.scrollY+q.screenY-k.y):q.screenPoint=new m(q.pageX-k.x,q.pageY-k.y),q.mapPoint=n.extent?n.toMap(q.screenPoint):new r);q.numPoints=0;return q},
_onMouseEnterHandler:function(q){h(this._onKeyDown_connect);h(this._onKeyUp_connect);this._onKeyDown_connect=a(document,"onkeydown",this,this._onKeyDownHandler);this._onKeyUp_connect=a(document,"onkeyup",this,this._onKeyUpHandler);this._fire("onMouseOver",this._processEvent(q))},_onMouseLeaveHandler:function(q){h(this._onKeyDown_connect);h(this._onKeyUp_connect);this._onKeyDown_connect=this._onKeyUp_connect=null;this._fire("onMouseOut",this._processEvent(q))},_onMouseMoveHandler:function(q){this._dragEnd?
this._dragEnd=!1:this._fire("onMouseMove",this._processEvent(q))},_onMouseDownHandler:function(q){h(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=null;this.node.setCapture&&this.node.setCapture(!1);h(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=a(document,"onmousemove",this,this._onMouseDragHandler);this._startX=q.pageX;this._startY=q.pageY;this._fire("onMouseDown",this._processEvent(q))},_onMouseUpHandler:function(q){var n=this.node;n.releaseCapture&&n.releaseCapture();
h(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=null;h(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=a(n,"onmousemove",this,this._onMouseMoveHandler);this._fire("onMouseUp",this._processEvent(q))},_onMouseDragHandler:function(q){h(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=a(document,"onmousemove",this,this._onMouseDraggingHandler);h(this._onMouseUpHandler_connect);this._onMouseUpHandler_connect=a(document,"onmouseup",this,this._onDragMouseUpHandler);
this._docLeaveConnect=a(document,"onmouseout",this,this._onDocMouseOut);this._fire("onMouseDragStart",this._processEvent(q))},_onMouseDraggingHandler:function(q){u.stop(q);this._fire("onMouseDrag",this._processEvent(q))},_onDragMouseUpHandler:function(q){var n=this.node;n.releaseCapture&&n.releaseCapture();this._dragEnd=!0;h(this._docLeaveConnect);h(this._onMouseDragHandler_connect);h(this._onMouseUpHandler_connect);this._docLeaveConnect=this._onMouseDragHandler_connect=null;this._onMouseMoveHandler_connect=
a(n,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=a(n,"onmouseup",this,this._onMouseUpHandler);q=this._processEvent(q);this._fire("onMouseDragEnd",q);this._fire("onMouseUp",q)},_onDocMouseOut:function(q){var n=9>d("ie")?q.toElement:q.relatedTarget,k=n&&n.nodeName.toLowerCase();(!n||(d("chrome")||d("safari"))&&"html"===k)&&this._onDragMouseUpHandler(q)},_onClickHandler:function(q){q=this._processEvent(q);if(q.pageX===this._startX&&q.pageY===this._startY){clearTimeout(this._clickTimer);
var n={},k="movementX"in q,g;for(g in q)"mozInputSource"===g||"mozPressure"===g||k&&("webkitMovementX"===g||"webkitMovementY"===g)||(n[g]=q[g]);this._clickEvent=n;this._clickTimer=setTimeout(this._fireClickEvent,this.doubleClickDuration)}},_fireClickEvent:function(){clearTimeout(this._clickTimer);9>d("ie")&&(this._clickEvent.graphic=t._ieGraphic,delete t._ieGraphic);this._fire("onClick",this._clickEvent)},_onDblClickHandler:function(q){clearTimeout(this._clickTimer);this._fire("onDblClick",this._processEvent(q))},
_onMouseWheelHandler:function(q){var n=this.map;(n?n.isScrollWheelZoom||n.isScrollWheelPan:this.preventPageScroll)&&u.stop(q);n=d("ff")||d("mozilla")?-q.detail/this.mozWheelDivisor:q.wheelDelta/this.wheelDivisor;var k=Math.abs(n);k=k<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;q.value=0>n?-k:k;this._fire("onMouseWheel",this._processEvent(q))},_onKeyDownHandler:function(q){this._fire("onKeyDown",q)},_onKeyUpHandler:function(q){this._fire("onKeyUp",q)},enableMouseWheel:function(q){h(this._scrollHandle);
this._scrollHandle=a(this.node,d("ff")||d("mozilla")?q?"MozMousePixelScroll":"DOMMouseScroll":"onmousewheel",this,this._onMouseWheelHandler)},setImmediateClick:function(q){this.doubleClickDuration=q?0:this._initialDuration},preventClickEvents:function(q){this._preventClick=q},destroy:function(){var q=this._handles.concat([this._onMouseMoveHandler_connect,this._onMouseUpHandler_connect,this._onMouseDragHandler_connect,this._scrollHandle,this._onKeyDown_connect,this._onKeyUp_connect,this._docLeaveConnect]),
n;for(n=0;n<q.length;n++)h(q[n]);clearTimeout(this._clickTimer);this.node=this.map=this._handles=this._clickEvent=this._onMouseMoveHandler_connect=this._onMouseUpHandler_connect=this._onMouseDragHandler_connect=this._scrollHandle=this._onKeyDown_connect=this._onKeyUp_connect=this._docLeaveConnect=null}});return t.MouseEvents=f})},"esri/TouchEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/dom ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),
function(f,B,l,d,c,u,t,e,r){f=f([t],{declaredClass:"esri.TouchEvents",tapRadius:8,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,map:null,constructor:function(m,a){this.node=m;l.mixin(this,a);B.setSelectable(m,!1);this._touchStart=l.hitch(this,this._touchStart);this._touchMove=l.hitch(this,this._touchMove);this._touchEnd=l.hitch(this,this._touchEnd);this._touchCancel=l.hitch(this,this._touchCancel);this._fireClickEvent=l.hitch(this,this._fireClickEvent);m.addEventListener("touchstart",
this._touchStart,!1);m.addEventListener("touchmove",this._touchMove,!1);m.addEventListener("touchend",this._touchEnd,!1);m.addEventListener("touchcancel",this._touchCancel,!1);this.map&&d("ios")&&(this._mouseOver=l.hitch(this,this._mouseOver),this._mouseOut=l.hitch(this,this._mouseOut),this._mouseDown=l.hitch(this,this._mouseDown),this._mouseUp=l.hitch(this,this._mouseUp),this._mouseClick=l.hitch(this,this._mouseClick),m.addEventListener("mouseover",this._mouseOver,!1),m.addEventListener("mouseout",
this._mouseOut,!1),m.addEventListener("mousedown",this._mouseDown,!1),m.addEventListener("mouseup",this._mouseUp,!1),m.addEventListener("click",this._mouseClick,!1));this._numTouches=0;this._nodeTouches=[];this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_touchStart:function(m){var a=this._touches,h,q=m.changedTouches.length,n,k,g=(new Date).getTime();this._touchStartTS=g;if(!(d("android")&&d("safari")&&1===m.targetTouches.length&&m.touches.length===m.targetTouches.length&&m.targetTouches.length===
m.changedTouches.length&&0===m.changedTouches[0].identifier&&a[m.changedTouches[0].identifier])){this._addTouch(m);for(h=0;h<q;h++){var b=m.changedTouches[h];var x=a[b.identifier]={};x.startX=b.pageX;x.startY=b.pageY;x.startTS=g;-1===this._touchIds.indexOf(b.identifier)&&this._touchIds.push(b.identifier)}this._swipeActive&&(n=this._nodeTouches[0]);this._pinchActive&&(k=this._nodeTouches[1]);1===this._numTouches?this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(m,
n))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(m,[n,k]))):2===this._numTouches?this._swipeActive&&(n&&(x=a[this._touchIds[0]],x.startX=n.pageX,x.startY=n.pageY,x.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(m,n))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(m,n))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(m,[n,k])))}},_touchMove:function(m){m.preventDefault();
this._updateTouch(m);var a=this._touches,h,q=m.changedTouches.length,n;if(!(d("android")&&d("safari")&&1===m.targetTouches.length&&m.touches.length===m.targetTouches.length&&m.targetTouches.length===m.changedTouches.length&&0===m.changedTouches[0].identifier&&a[m.changedTouches[0].identifier]&&1<this._touchIds.length)){for(h=0;h<q;h++){var k=m.changedTouches[h];if(n=a[k.identifier]){var g=Math.abs(k.pageX-n.startX);k=Math.abs(k.pageY-n.startY);!n.moved&&(g>=this.tapRadius||k>=this.tapRadius)&&(n.moved=
n.absMoved=!0);var b=b?b:n.moved}}1===this._numTouches?(a=m.changedTouches[0],this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(m,a)):b&&(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(m,a)))):2===this._numTouches&&(h=this._nodeTouches[0],q=this._nodeTouches[1],this._pinchActive?this._fire("onPinchMove",this._processTouchEvent(m,[h,q])):b&&(b=a[h.identifier],n=a[q.identifier],a=Math.abs(b.startX-n.startX),b=Math.abs(b.startY-n.startY),n=Math.abs(h.pageX-q.pageX),
g=Math.abs(h.pageY-q.pageY),Math.abs(Math.sqrt(n*n+g*g)-Math.sqrt(a*a+b*b))>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(m,[h,q])))))}},_touchEnd:function(m){this._removeTouch(m);var a=this._touches,h=m.changedTouches,q,n=h.length,k,g,b=(new Date).getTime(),x=this._touchIds;for(q=0;q<n;q++)if(g=a[h[q].identifier])g.absMoved&&(k=!0),g.pageX=h[q].pageX,g.pageY=h[q].pageY,g.endTS=b;if(0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=
!1,this._fire("onSwipeEnd",this._processTouchEvent(m,h[0]));else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(m,h));else{if(!k){n=Infinity;k=-Infinity;b=Infinity;var v=-Infinity,y=this.tapStartTolerance,D=[],E=!0;for(q=0;q<x.length;q++)g=a[x[q]],D.push(g),g.startTS<n&&(n=g.startTS),g.startTS>k&&(k=g.startTS),g.endTS<b&&(b=g.endTS),g.endTS>v&&(v=g.endTS),delete a[x[q]];1===D.length&&h[0]&&(a=Math.abs(h[0].pageY-D[0].startY),Math.abs(h[0].pageX-D[0].startX)>=
this.tapRadius||a>=this.tapRadius)&&(E=!1);E&&Math.abs(k-n)<=y&&Math.abs(v-b)<=y&&this._basicTap(m,D)}}else 1===this._numTouches&&this._pinchActive&&(q=this._nodeTouches[0],g=a[q.identifier],g.startX=q.pageX,g.startY=q.pageY,this._pinchActive=g.moved=!1,this._fire("onPinchEnd",this._processTouchEvent(m,[h[0],q])))},_touchCancel:function(m){this._numTouches&&this._touchEnd(m)},_basicTap:function(m,a){var h=(new Date).getTime(),q=this;m=this._processTouchEvent(m,a);this._taps.push({touchInfos:a,ts:h,
event:m});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",m);clearTimeout(this._tapTimer);this._immediate?this._analyzeTap(!0):this._tapTimer=setTimeout(function(){var n=q;q=null;clearTimeout(n._tapTimer);n._analyzeTap()},2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration)},_analyzeTap:function(m){var a=this._taps,h=a[0],q=a[1],n=h.touchInfos,k=q&&q.touchInfos;a.length&&(m||(this._taps=[]),h&&q?n.length===k.length?q.ts-h.ts<=this.doubleTapDuration?(1===n.length?
(m=Math.abs(n[0].startX-k[0].startX),n=Math.abs(n[0].startY-k[0].startY),n=m<=this.doubleTapRadius&&n<=this.doubleTapRadius):n=!0,n?this._processedDoubleTap(a):this._processedTap(q)):this._processedTap(q):this._processedTap(q):this._processedTap(h||q))},_processedTap:function(m){var a=m.event;this._fire("onProcessedTap",a);1===m.touchInfos.length?this._fire("onTap",this._fixEvent(a)):2===m.touchInfos.length&&this._fire("onTwoFingerTap",a)},_processedDoubleTap:function(m){var a=1===m[1].touchInfos.length;
if(a){var h=[this._fixEvent(m[0].event),this._fixEvent(m[1].event)];h[1].relatedEvents=h}m=[m[0].event,m[1].event];m[1].relatedEvents=m;this._fire("onProcessedDoubleTap",m[1]);a&&(this._fire("onDoubleTap",h[1]),this._fire("onDblClick",h[1]))},_addTouch:function(m){var a=m.changedTouches,h=this._nodeTouches,q;this._numTouches+=a.length;for(m=0;m<a.length;m++){var n=h.length;var k=!1;for(q=0;q<n&&!(k=h[q].identifier===a[m].identifier);q++);k?this._numTouches--:h.push(a[m])}for(m=h.length-1;0<=m;m--)c.isDescendant(h[m].target,
document.body)||(h.splice(m,1),this._numTouches--);0>this._numTouches&&(this._numTouches=0)},_removeTouch:function(m){var a=[],h=[],q=m.changedTouches,n=this._nodeTouches;this._numTouches-=q.length;0>this._numTouches&&(this._numTouches=0);for(m=0;m<q.length;m++)a.push(q[m].identifier);for(m=n.length-1;0<=m;m--)-1!==a.indexOf(n[m].identifier)&&h.push(n.splice(m,1)[0]);return h},_updateTouch:function(m){var a=[],h=m.changedTouches,q=this._nodeTouches;for(m=0;m<h.length;m++)a.push(h[m].identifier);for(m=
0;m<q.length;m++){var n=a.indexOf(q[m].identifier);-1!==n&&q.splice(m,1,h[n])}},_mouseOver:function(m){this._fire("onMouseOver",this._processMouseEvent(m))},_mouseOut:function(m){this._fire("onMouseOut",this._processMouseEvent(m))},_mouseDown:function(m){this._fire("onMouseDown",this._processMouseEvent(m))},_mouseUp:function(m){this._fire("onMouseUp",this._processMouseEvent(m))},_mouseClick:function(m){clearTimeout(this._clickTimer);300<(new Date).getTime()-this._touchStartTS?this._fire("onClick",
this._processMouseEvent(m)):(this._clickEvent=m,this._clickTimer=setTimeout(this._fireClickEvent,this.doubleTapDuration))},_fireClickEvent:function(){clearTimeout(this._clickTimer);this._fire("onClick",this._processMouseEvent(this._clickEvent))},_fire:function(m,a){"onDblClick"===m&&clearTimeout(this._clickTimer);if("onDblClick"===m&&this.mouseEvents){this.mouseEvents.preventClickEvents(!0);var h=this;setTimeout(function(){h.mouseEvents.preventClickEvents(!1)},350)}if(this[m])this[m](a);if(this.map&&
this.map[m])this.map[m](a)},_fixEvent:function(m){var a={},h;for(h in m)a[h]=m[h];this.map&&(a.screenPoint=a.screenPoints[0],a.mapPoint=a.mapPoints[0]);return a},_processTouchEvent:function(m,a){var h=this.map,q=h&&h.position,n=0;if(q&&a)if(l.isArray(a)){var k;m.screenPoints=[];m.mapPoints=[];for(k=0;k<a.length;k++)if(a[k]){var g=new r(a[k].pageX-q.x,a[k].pageY-q.y);m.screenPoints.push(g);m.mapPoints.push(h.extent?h.toMap(g):new e)}else n++}else m.screenPoint=new r(a.pageX-q.x,a.pageY-q.y),m.mapPoint=
h.extent?h.toMap(m.screenPoint):new e;m.numPoints=a?l.isArray(a)?a.length-n:1:0;return m},_processMouseEvent:function(m){var a=this.map,h=a&&a.position;h&&(m.screenPoint=new r(m.pageX-h.x,m.pageY-h.y),m.mapPoint=a.extent?a.toMap(m.screenPoint):new e);return m},setImmediateTap:function(m){this._immediate=m},destroy:function(){var m=this.node;m.removeEventListener("touchstart",this._touchStart,!1);m.removeEventListener("touchmove",this._touchMove,!1);m.removeEventListener("touchend",this._touchEnd,
!1);m.removeEventListener("touchcancel",this._touchCancel,!1);this.map&&(m.removeEventListener("mouseover",this._mouseOver,!1),m.removeEventListener("mouseout",this._mouseOut,!1),m.removeEventListener("mousedown",this._mouseDown,!1),m.removeEventListener("mouseup",this._mouseUp,!1),m.removeEventListener("click",this._mouseClick,!1));B.setSelectable(m,!0);clearTimeout(this._tapTimer);clearTimeout(this._clickTimer);this.node=this.map=this._numTouches=this._nodeTouches=this._touches=this._touchIds=this._taps=
null}});return u.TouchEvents=f})},"esri/PointerEvents":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(f,B,l,d,c,u,t,e){f=f([u],{declaredClass:"esri.PointerEvents",tapRadius:8,clickRadius:2,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==d("mac")?1:3,wheelDivisor:120,preventPageScroll:!0,_dragging:!1,constructor:function(r,
m){this.node=r;B.mixin(this,m);void 0!==r.style.msTouchAction?r.style.msTouchAction="none":void 0!==r.style.touchAction&&(r.style.touchAction="none");m=navigator.msPointerEnabled;var a=function(h){h.preventDefault()};r.addEventListener("selectstart",a,!1);r.addEventListener("dragstart",a,!1);this._pointerDown=B.hitch(this,this._pointerDown);this._pointerMove=B.hitch(this,this._pointerMove);this._pointerUp=B.hitch(this,this._pointerUp);this._pointerCancel=B.hitch(this,this._pointerCancel);r.addEventListener(m?
"MSPointerDown":"pointerdown",this._pointerDown,!1);r.addEventListener(m?"MSPointerMove":"pointermove",this._pointerMove,!1);r.addEventListener(m?"MSPointerUp":"pointerup",this._pointerUp,!1);r.addEventListener(m?"MSPointerCancel":"pointercancel",this._pointerCancel,!1);this.map&&(this._mouseOver=B.hitch(this,this._mouseOver),this._mouseOut=B.hitch(this,this._mouseOut),this._mouseLeave=B.hitch(this,this._mouseLeave),this._mouseDown=B.hitch(this,this._mouseDown),this._mouseUp=B.hitch(this,this._mouseUp),
this._mouseClick=B.hitch(this,this._mouseClick),this._mouseWheel=B.hitch(this,this._mouseWheel),this._mouseMove=B.hitch(this,this._mouseMove),this._mouseEnter=B.hitch(this,this._mouseEnter),this._onKeyDown=B.hitch(this,this._onKeyDown),this._onKeyUp=B.hitch(this,this._onKeyUp),r.addEventListener("mouseover",this._mouseOver,!1),r.addEventListener("mouseout",this._mouseOut,!1),r.addEventListener("mouseleave",this._mouseLeave,!1),r.addEventListener("mousedown",this._mouseDown,!1),r.addEventListener("mouseup",
this._mouseUp,!1),r.addEventListener("click",this._mouseClick,!1),r.addEventListener("mousewheel",this._mouseWheel,!1),r.addEventListener("mousemove",this._mouseMove,!1),r.addEventListener("mouseenter",this._mouseEnter,!1));this._numTouches=0;this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_pointerDown:function(r){if(-1<l.indexOf(this._touchIds,r.pointerId))this._pointerUp(r);else{var m=this._touches,a=r.target,h=r.pointerId,q=this._touchIds,n=(new Date).getTime();var k=m[h]=
{};k.pointerId=h;k.startX=k.pageX=r.pageX;k.startY=k.pageY=r.pageY;k.startTS=n;q.push(h);this._numTouches++;a.setPointerCapture?a.setPointerCapture(h):a.msSetPointerCapture&&a.msSetPointerCapture(h);a=m[q[0]];m=m[q[1]];1!==this._numTouches&&(2===this._numTouches?this._swipeActive&&(a&&(a.startX=a.pageX,a.startY=a.pageY,a.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(r,a))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(r,a))):
this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(r,[a,m]))))}},_pointerMove:function(r){var m=this._touches,a=this._touchIds,h;if((h=m[r.pointerId])&&(h.pageX!==r.pageX||h.pageY!==r.pageY)){h.pageX=r.pageX;h.pageY=r.pageY;var q=Math.abs(h.pageX-h.startX);var n=Math.abs(h.pageY-h.startY);!h.moved&&(q>=this.tapRadius||n>=this.tapRadius)&&(h.moved=h.absMoved=!0);if(1===this._numTouches)this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(r,r)):h.moved&&
(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(r,r)));else if(2===this._numTouches)if(h=m[a[0]],m=m[a[1]],this._pinchActive)this._fire("onPinchMove",this._processTouchEvent(r,[h,m]));else if(h.moved||m.moved){a=Math.abs(h.startX-m.startX);q=Math.abs(h.startY-m.startY);n=Math.abs(h.pageX-m.pageX);var k=Math.abs(h.pageY-m.pageY);Math.abs(Math.sqrt(n*n+k*k)-Math.sqrt(a*a+q*q))>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(r,[h,m])))}}},
_pointerUp:function(r){var m=this._touches,a,h=this.node,q=r.target,n=r.pointerId,k=this._touchIds,g=k.slice(0),b=l.map(g,function(D){return m[D]}),x=(new Date).getTime();if(a=m[n])if(a.pageX=r.pageX,a.pageY=r.pageY,a.endTS=x,this._numTouches--,q.releasePointerCapture?q.releasePointerCapture(n):q.msReleasePointerCapture&&q.msReleasePointerCapture(n),0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(r,r));
else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(r,r));else{if(!a.absMoved){q=Infinity;n=-Infinity;k=Infinity;x=-Infinity;var v=this.tapStartTolerance,y;for(y=0;y<g.length;y++)a=b[y],a.startTS<q&&(q=a.startTS),a.startTS>n&&(n=a.startTS),a.endTS<k&&(k=a.endTS),a.endTS>x&&(x=a.endTS);Math.abs(n-q)<=v&&Math.abs(x-k)<=v&&this._basicTap(r,b)}}else 1===this._numTouches&&this._pinchActive&&(k.splice(l.indexOf(k,r.pointerId),1),delete m[r.pointerId],a=m[k[0]],
a.startX=a.pageX,a.startY=a.pageY,a.moved=!1,document.msElementsFromPoint&&(g=document.msElementsFromPoint(a.pageX,a.pageY),l.some(g,function(D){return D===h})||(this._touches={},this._touchIds=[],this._numTouches=0)),this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(r,[r,a])))},_pointerCancel:function(r){this._numTouches&&this._pointerUp(r)},_basicTap:function(r,m){var a=(new Date).getTime(),h=this,q=this._immediate;r=this._processTouchEvent(r,m);this._taps.push({touchInfos:m,
ts:a,event:r});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",r);clearTimeout(this._tapTimer);r=2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration;this._tapTimer=setTimeout(function(){var n=h;h=null;clearTimeout(n._tapTimer);n._analyzeTap(q)},q?0:r)},_analyzeTap:function(r){var m=this._taps,a=m[0],h=m[1],q=a.touchInfos,n=h&&h.touchInfos;m.length&&(r||(this._taps=[]),a&&h?q.length===n.length?h.ts-a.ts<=this.doubleTapDuration?(1===q.length?(r=Math.abs(q[0].startX-
n[0].startX),q=Math.abs(q[0].startY-n[0].startY),q=r<=this.doubleTapRadius&&q<=this.doubleTapRadius):q=!0,q?this._processedDoubleTap(m):this._processedTap(h)):this._processedTap(h):this._processedTap(h):this._processedTap(a||h))},_processedTap:function(r){var m=r.event;this._fire("onProcessedTap",m);1===r.touchInfos.length?this._fire("onTap",this._fixEvent(m)):2===r.touchInfos.length&&this._fire("onTwoFingerTap",m)},_processedDoubleTap:function(r){var m=1===r[1].touchInfos.length;if(m){var a=[this._fixEvent(r[0].event),
this._fixEvent(r[1].event)];a[1].relatedEvents=a}r=[r[0].event,r[1].event];r[1].relatedEvents=r;this._fire("onProcessedDoubleTap",r[1]);m&&(this._fire("onDoubleTap",a[1]),this._fire("onDblClick",a[1]))},_mouseOver:function(r){this._fire("onMouseOver",this._processMouseEvent(r))},_mouseMove:function(r){this._dragging?this._fire("onMouseDrag",this._processMouseEvent(r)):this._fire("onMouseMove",this._processMouseEvent(r))},_mouseOut:function(r){this._fire("onMouseOut",this._processMouseEvent(r))},_mouseLeave:function(r){document.removeEventListener("keydown",
this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseOut",this._processMouseEvent(r))},_mouseDown:function(r){this._downX=r.pageX;this._downY=r.pageY;this._fire("onMouseDown",this._processMouseEvent(r));0===r.button&&(this._dragging=!0,this._fire("onMouseDragStart",this._processMouseEvent(r)))},_mouseUp:function(r){this._dragging&&(this._dragging=!1,this._fire("onMouseDragEnd",this._processMouseEvent(r)));this._fire("onMouseUp",this._processMouseEvent(r))},
_mouseClick:function(r){Math.abs(r.pageX-this._downX)<=this.clickRadius&&Math.abs(r.pageY-this._downY)<=this.clickRadius&&this._fire("onClick",this._processMouseEvent(r))},_mouseWheel:function(r){var m=this.map;(m?m.isScrollWheelZoom||m.isScrollWheelPan:this.preventPageScroll)&&r.preventDefault();m=r.wheelDelta?r.wheelDelta/this.wheelDivisor:-r.detail/this.mozWheelDivisor;var a=Math.abs(m);a=a<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;r.value=0>m?-a:a;this._fire("onMouseWheel",this._processMouseEvent(r))},
_mouseEnter:function(r){document.removeEventListener("keydown",this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);document.addEventListener("keydown",this._onKeyDown,!1);document.addEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseEnter",this._processMouseEvent(r))},_onKeyDown:function(r){this._fire("onKeyDown",r)},_onKeyUp:function(r){this._fire("onKeyUp",r)},_fire:function(r,m){if(this[r])this[r](m);if(this.map&&this.map[r])this.map[r](m)},_fixEvent:function(r){var m=
{},a;for(a in r)m[a]=r[a];m.preventDefault=function(){r.preventDefault()};m.stopPropagation=function(){r.stopPropagation()};this.map&&(m.screenPoint=m.screenPoints[0],m.mapPoint=m.mapPoints[0]);return m},_processTouchEvent:function(r,m){var a=this.map,h=a&&a.position,q=0;if(h&&m)if(B.isArray(m)){var n;r.screenPoints=[];r.mapPoints=[];for(n=0;n<m.length;n++)if(m[n]){var k=new e(m[n].pageX-h.x,m[n].pageY-h.y);r.screenPoints.push(k);r.mapPoints.push(a.extent?a.toMap(k):new t)}else q++}else r.screenPoint=
new e(m.pageX-h.x,m.pageY-h.y),r.mapPoint=a.extent?a.toMap(r.screenPoint):new t;r.numPoints=m?B.isArray(m)?m.length-q:1:0;return r},_processMouseEvent:function(r){var m=this.map,a=m&&m.position;a&&(r.screenPoint=new e(r.pageX-a.x,r.pageY-a.y),r.mapPoint=m.extent?m.toMap(r.screenPoint):new t);return r},setImmediateTap:function(r){this._immediate=r},destroy:function(){var r=this.node;r.removeEventListener("MSPointerDown",this._pointerDown,!1);r.removeEventListener("MSPointerMove",this._pointerMove,
!1);r.removeEventListener("MSPointerUp",this._pointerUp,!1);r.removeEventListener("MSPointerCancel",this._pointerCancel,!1);this.map&&(r.removeEventListener("mouseover",this._mouseOver,!1),r.removeEventListener("mousemove",this._mouseMove,!1),r.removeEventListener("mouseout",this._mouseOut,!1),r.removeEventListener("mouseleave",this._mouseLeave,!1),r.removeEventListener("mousedown",this._mouseDown,!1),r.removeEventListener("mouseup",this._mouseUp,!1),r.removeEventListener("click",this._mouseClick,
!1),r.removeEventListener("mouseenter",this._mouseEnter,!1));clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._touches=this._touchIds=this._taps=null}});return c.PointerEvents=f})},"esri/tasks/GeometryService":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ./Task ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/jsonUtils".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k){f=f(m,{declaredClass:"esri.tasks.GeometryService",_eventMap:{"areas-and-lengths-complete":["result"],"auto-complete-complete":["geometries"],"buffer-complete":["geometries"],"convex-hull-complete":["geometry"],"cut-complete":["result"],"densify-complete":["geometries"],"difference-complete":["geometries"],"distance-complete":["distance"],"generalize-complete":["geometries"],"intersect-complete":["geometries"],"label-points-complete":["geometries"],"lengths-complete":["result"],
"offset-complete":["geometries"],"project-complete":["geometries"],"relation-complete":["relations"],"reshape-complete":["geometry"],"simplify-complete":["geometries"],"trim-extend-complete":["geometries"],"union-complete":["geometry"]},constructor:function(g){g=B.hitch;this._projectHandler=g(this,this._projectHandler);this._simplifyHandler=g(this,this._simplifyHandler);this._bufferHandler=g(this,this._bufferHandler);this._areasAndLengthsHandler=g(this,this._areasAndLengthsHandler);this._lengthsHandler=
g(this,this._lengthsHandler);this._labelPointsHandler=g(this,this._labelPointsHandler);this._relationHandler=g(this,this._relationHandler);this._convexHullHandler=g(this,this._convexHullHandler);this._unionHandler=g(this,this._unionHandler);this._autoCompleteHandler=g(this,this._autoCompleteHandler);this._reshapeHandler=g(this,this._reshapeHandler);this._cutHandler=g(this,this._cutHandler);this._intersectHandler=g(this,this._intersectHandler);this._differenceHandler=g(this,this._differenceHandler);
this._trimExtendHandler=g(this,this._trimExtendHandler);this._densifyHandler=g(this,this._densifyHandler);this._generalizeHandler=g(this,this._densifyHandler);this._offsetHandler=g(this,this._offsetHandler);this._distanceHandler=g(this,this._distanceHandler);this._toGeoCoordinateHandler=g(this,this._toGeoCoordinateHandler);this._fromGeoCoordinateHandler=g(this,this._fromGeoCoordinateHandler);this.registerConnectEvents()},_encodeGeometries:function(g){var b=[],x,v=g.length;for(x=0;x<v;x++)b.push(g[x].toJson());
return{geometryType:k.getJsonType(g[0]),geometries:b}},_decodeGeometries:function(g,b,x){var v=k.getGeometryType(b);g=g.geometries;var y=[],D={spatialReference:x.toJson()},E=B.mixin;l.forEach(g,function(C,z){y[z]=new v(E(C,D))});return y},_toProjectGeometry:function(g){var b=g.spatialReference.toJson();return g instanceof a?new q({rings:[[[g.xmin,g.ymin],[g.xmin,g.ymax],[g.xmax,g.ymax],[g.xmax,g.ymin],[g.xmin,g.ymin]]],spatialReference:b}):new h({paths:[[].concat(g.points)],spatialReference:b})},
_fromProjectedGeometry:function(g,b,x){return"esriGeometryEnvelope"===b?(g=g.rings[0],new a(g[0][0],g[0][1],g[2][0],g[2][1],x)):new n({points:g.paths[0],spatialReference:x.toJson()})},project:function(g,b,x,v){var y=B.mixin({},this._url.query,{f:"json"});if(g.geometries){v=x;x=b;b=g.outSR;var D=g.geometries[0];y=B.mixin(y,g.toJson())}else D=g[0],y=B.mixin(y,{outSR:b.wkid||d.toJson(b.toJson()),inSR:D.spatialReference.wkid||d.toJson(D.spatialReference.toJson()),geometries:d.toJson(this._encodeGeometries(g))});
var E=k.getJsonType(D),C=this._projectHandler,z=this._errorHandler,w=new c(r._dfdCanceller);w._pendingDfd=e({url:this._url.path+"/project",content:y,callbackParamName:"callback",load:function(A,G){C(A,G,E,b,x,v,w)},error:function(A){z(A,v,w)}});return w},_projectHandler:function(g,b,x,v,y,D,E){try{var C=this._decodeGeometries(g,x,v);this._successHandler([C],"onProjectComplete",y,E)}catch(z){this._errorHandler(z,D,E)}},onProjectComplete:function(){},simplify:function(g,b,x){var v=g[0].spatialReference,
y=B.mixin({},this._url.query,{f:"json",sr:v.wkid?v.wkid:d.toJson(v.toJson()),geometries:d.toJson(this._encodeGeometries(g))}),D=k.getJsonType(g[0]),E=this._simplifyHandler,C=this._errorHandler,z=new c(r._dfdCanceller);z._pendingDfd=e({url:this._url.path+"/simplify",content:y,callbackParamName:"callback",load:function(w,A){E(w,A,D,v,b,x,z)},error:function(w){C(w,x,z)}});return z},_simplifyHandler:function(g,b,x,v,y,D,E){try{var C=this._decodeGeometries(g,x,v);this._successHandler([C],"onSimplifyComplete",
y,E)}catch(z){this._errorHandler(z,D,E)}},onSimplifyComplete:function(){},convexHull:function(g,b,x){var v=g[0].spatialReference;g=B.mixin({},this._url.query,{f:"json",sr:d.toJson(v.toJson()),geometries:d.toJson(this._encodeGeometries(g))});var y=this._convexHullHandler,D=this._errorHandler,E=new c(r._dfdCanceller);E._pendingDfd=e({url:this._url.path+"/convexHull",content:g,callbackParamName:"callback",load:function(C,z){y(C,z,v,b,x,E)},error:function(C){D(C,x,E)}});return E},_convexHullHandler:function(g,
b,x,v,y,D){try{var E=k.fromJson(g.geometry).setSpatialReference(x);this._successHandler([E],"onConvexHullComplete",v,D)}catch(C){this._errorHandler(C,y,D)}},onConvexHullComplete:function(){},union:function(g,b,x){var v=g[0].spatialReference;g=B.mixin({},this._url.query,{f:"json",sr:d.toJson(v.toJson()),geometries:d.toJson(this._encodeGeometries(g))});var y=this._unionHandler,D=this._errorHandler,E=new c(r._dfdCanceller);E._pendingDfd=e({url:this._url.path+"/union",content:g,callbackParamName:"callback",
load:function(C,z){y(C,z,v,b,x,E)},error:function(C){D(C,x,E)}});return E},_unionHandler:function(g,b,x,v,y,D){try{var E=k.fromJson(g.geometry).setSpatialReference(x);this._successHandler([E],"onUnionComplete",v,D)}catch(C){this._errorHandler(C,y,D)}},onUnionComplete:function(){},autoComplete:function(g,b,x,v){var y=g[0].spatialReference;g=B.mixin({},this._url.query,{f:"json",sr:d.toJson(y.toJson()),polygons:d.toJson(this._encodeGeometries(g).geometries),polylines:d.toJson(this._encodeGeometries(b).geometries)});
var D=this._autoCompleteHandler,E=this._errorHandler,C=new c(r._dfdCanceller);C._pendingDfd=e({url:this._url.path+"/autoComplete",content:g,callbackParamName:"callback",load:function(z,w){D(z,w,y,x,v,C)},error:function(z){E(z,v,C)}});return C},_autoCompleteHandler:function(g,b,x,v,y,D){try{var E=g.geometries;g=[];var C,z=E.length;for(C=0;C<z;C++)g[C]=new q({spatialReference:x,rings:E[C].rings});this._successHandler([g],"onAutoCompleteComplete",v,D)}catch(w){this._errorHandler(w,y,D)}},onAutoCompleteComplete:function(){},
reshape:function(g,b,x,v){var y=g.spatialReference;g=B.mixin({},this._url.query,{f:"json",sr:d.toJson(y.toJson()),target:d.toJson({geometryType:k.getJsonType(g),geometry:g.toJson()}),reshaper:d.toJson(b.toJson())});var D=this._reshapeHandler,E=this._errorHandler,C=new c(r._dfdCanceller);C._pendingDfd=e({url:this._url.path+"/reshape",content:g,callbackParamName:"callback",load:function(z,w){D(z,w,y,x,v,C)},error:function(z){E(z,v,C)}});return C},_reshapeHandler:function(g,b,x,v,y,D){try{var E=k.fromJson(g.geometry).setSpatialReference(x);
this._successHandler([E],"onReshapeComplete",v,D)}catch(C){this._errorHandler(C,y,D)}},onReshapeComplete:function(){},cut:function(g,b,x,v){var y=g[0].spatialReference,D=l.map(g,function(w){return w.toJson()});g=B.mixin({},this._url.query,{f:"json",sr:d.toJson(y.toJson()),target:d.toJson({geometryType:k.getJsonType(g[0]),geometries:D}),cutter:d.toJson(b.toJson())});var E=this._cutHandler,C=this._errorHandler,z=new c(r._dfdCanceller);z._pendingDfd=e({url:this._url.path+"/cut",content:g,callbackParamName:"callback",
load:function(w,A){E(w,A,y,x,v,z)},error:function(w){C(w,v,z)}});return z},_cutHandler:function(g,b,x,v,y,D){try{var E=g.geometries,C={};C.cutIndexes=g.cutIndexes;C.geometries=[];l.forEach(E,function(z){C.geometries.push(k.fromJson(z).setSpatialReference(x))});this._successHandler([C],"onCutComplete",v,D)}catch(z){this._errorHandler(z,y,D)}},onCutComplete:function(){},intersect:function(g,b,x,v){var y=g[0].spatialReference;g=B.mixin({},this._url.query,{f:"json",sr:d.toJson(y.toJson()),geometries:d.toJson(this._encodeGeometries(g)),
geometry:d.toJson({geometryType:k.getJsonType(b),geometry:b.toJson()})});var D=this._intersectHandler,E=this._errorHandler,C=new c(r._dfdCanceller);C._pendingDfd=e({url:this._url.path+"/intersect",content:g,callbackParamName:"callback",load:function(z,w){D(z,w,y,x,v,C)},error:function(z){E(z,v,C)}});return C},_intersectHandler:function(g,b,x,v,y,D){try{var E=[];l.forEach(g.geometries,function(C){E.push(k.fromJson(C).setSpatialReference(x))});this._successHandler([E],"onIntersectComplete",v,D)}catch(C){this._errorHandler(C,
y,D)}},onIntersectComplete:function(){},difference:function(g,b,x,v){var y=g[0].spatialReference;g=B.mixin({},this._url.query,{f:"json",sr:d.toJson(y.toJson()),geometries:d.toJson(this._encodeGeometries(g)),geometry:d.toJson({geometryType:k.getJsonType(b),geometry:b.toJson()})});var D=this._differenceHandler,E=this._errorHandler,C=new c(r._dfdCanceller);C._pendingDfd=e({url:this._url.path+"/difference",content:g,callbackParamName:"callback",load:function(z,w){D(z,w,y,x,v,C)},error:function(z){E(z,
v,C)}});return C},_differenceHandler:function(g,b,x,v,y,D){try{var E=[];l.forEach(g.geometries,function(C){E.push(k.fromJson(C).setSpatialReference(x))});this._successHandler([E],"onDifferenceComplete",v,D)}catch(C){this._errorHandler(C,y,D)}},onDifferenceComplete:function(){},buffer:function(g,b,x){var v=B.mixin({},this._url.query,{f:"json"},g.toJson()),y=g.outSpatialReference||g.geometries[0].spatialReference,D=this._bufferHandler,E=this._errorHandler,C=new c(r._dfdCanceller);C._pendingDfd=e({url:this._url.path+
"/buffer",content:v,callbackParamName:"callback",load:function(z,w){D(z,w,y,b,x,C)},error:function(z){E(z,x,C)}});return C},_bufferHandler:function(g,b,x,v,y,D){try{var E=g.geometries;g=[];var C,z=E.length;for(C=0;C<z;C++)g[C]=new q({spatialReference:x,rings:E[C].rings});this._successHandler([g],"onBufferComplete",v,D)}catch(w){this._errorHandler(w,y,D)}},onBufferComplete:function(){},areasAndLengths:function(g,b,x){g=B.mixin({},this._url.query,{f:"json"},g.toJson());var v=this._areasAndLengthsHandler,
y=this._errorHandler,D=new c(r._dfdCanceller);D._pendingDfd=e({url:this._url.path+"/areasAndLengths",content:g,callbackParamName:"callback",load:function(E,C){v(E,C,b,x,D)},error:function(E){y(E,x,D)}});return D},_areasAndLengthsHandler:function(g,b,x,v,y){try{this._successHandler([g],"onAreasAndLengthsComplete",x,y)}catch(D){this._errorHandler(D,v,y)}},onAreasAndLengthsComplete:function(){},lengths:function(g,b,x){g=B.mixin({},this._url.query,{f:"json"},g.toJson());var v=this._lengthsHandler,y=this._errorHandler,
D=new c(r._dfdCanceller);D._pendingDfd=e({url:this._url.path+"/lengths",content:g,callbackParamName:"callback",load:function(E,C){v(E,C,b,x,D)},error:function(E){y(E,x,D)}});return D},_lengthsHandler:function(g,b,x,v,y){try{this._successHandler([g],"onLengthsComplete",x,y)}catch(D){this._errorHandler(D,v,y)}},onLengthsComplete:function(){},labelPoints:function(g,b,x){var v=l.map(g,function(z){return z.toJson()}),y=g[0].spatialReference;v=B.mixin({},this._url.query,{f:"json",sr:y.wkid?y.wkid:d.toJson(y.toJson()),
polygons:d.toJson(v)});var D=this._labelPointsHandler,E=this._errorHandler,C=new c(r._dfdCanceller);C._pendingDfd=e({url:this._url.path+"/labelPoints",content:v,callbackParamName:"callback",load:function(z,w){D(z,w,g,y,b,x,C)},error:function(z){E(z,x,C)}});return C},_labelPointsHandler:function(g,b,x,v,y,D,E){try{var C=[];l.forEach(g.labelPoints,function(z){C.push(k.fromJson(z).setSpatialReference(v))});this._successHandler([C],"onLabelPointsComplete",y,E)}catch(z){this._errorHandler(z,D,E)}},onLabelPointsComplete:function(){},
relation:function(g,b,x){g=B.mixin({},this._url.query,{f:"json"},g.toJson());var v=this._relationHandler,y=this._errorHandler,D=new c(r._dfdCanceller);D._pendingDfd=e({url:this._url.path+"/relation",content:g,callbackParamName:"callback",load:function(E,C){v(E,C,b,x,D)},error:function(E){y(E,x,D)}});return D},_relationHandler:function(g,b,x,v,y){try{this._successHandler([g.relations],"onRelationComplete",x,y)}catch(D){this._errorHandler(D,v,y)}},onRelationComplete:function(){},trimExtend:function(g,
b,x){var v=B.mixin({},this._url.query,{f:"json"},g.toJson()),y=g.sr,D=this._trimExtendHandler,E=this._errorHandler,C=new c(r._dfdCanceller);C._pendingDfd=e({url:this._url.path+"/trimExtend",content:v,callbackParamName:"callback",load:function(z,w){D(z,w,y,b,x,C)},error:function(z){E(z,x,C)}});return C},_trimExtendHandler:function(g,b,x,v,y,D){try{var E=g.geometries;g=[];var C,z=E.length;for(C=0;C<z;C++)g[C]=new h({spatialReference:x,paths:E[C].paths});this._successHandler([g],"onTrimExtendComplete",
v,D)}catch(w){this._errorHandler(w,y,D)}},onTrimExtendComplete:function(){},densify:function(g,b,x){var v=B.mixin({},this._url.query,{f:"json"},g.toJson()),y=g.geometries[0].spatialReference,D=this._densifyHandler,E=this._errorHandler,C=new c(r._dfdCanceller);C._pendingDfd=e({url:this._url.path+"/densify",content:v,callbackParamName:"callback",load:function(z,w){D(z,w,y,b,x,C)},error:function(z){E(z,x,C)}});return C},_densifyHandler:function(g,b,x,v,y,D){try{var E=[];l.forEach(g.geometries,function(C){E.push(k.fromJson(C).setSpatialReference(x))});
this._successHandler([E],"onDensifyComplete",v,D)}catch(C){this._errorHandler(C,y,D)}},onDensifyComplete:function(){},generalize:function(g,b,x){var v=B.mixin({},this._url.query,{f:"json"},g.toJson()),y=g.geometries[0].spatialReference,D=this._generalizeHandler,E=this._errorHandler,C=new c(r._dfdCanceller);C._pendingDfd=e({url:this._url.path+"/generalize",content:v,callbackParamName:"callback",load:function(z,w){D(z,w,y,b,x,C)},error:function(z){E(z,x,C)}});return C},_generalizeHandler:function(g,
b,x,v,y,D){try{var E=[];l.forEach(g.geometries,function(C){E.push(k.fromJson(C).setSpatialReference(x))});this._successHandler([E],"onGeneralizeComplete",v,D)}catch(C){this._errorHandler(C,y,D)}},onGeneralizeComplete:function(){},offset:function(g,b,x){var v=B.mixin({},this._url.query,{f:"json"},g.toJson()),y=g.geometries[0].spatialReference,D=this._offsetHandler,E=this._errorHandler,C=new c(r._dfdCanceller);C._pendingDfd=e({url:this._url.path+"/offset",content:v,callbackParamName:"callback",load:function(z,
w){D(z,w,y,b,x,C)},error:function(z){E(z,x,C)}});return C},_offsetHandler:function(g,b,x,v,y,D){try{var E=[];l.forEach(g.geometries,function(C){E.push(k.fromJson(C).setSpatialReference(x))});this._successHandler([E],"onOffsetComplete",v,D)}catch(C){this._errorHandler(C,y,D)}},onOffsetComplete:function(){},distance:function(g,b,x){var v=B.mixin({},this._url.query,{f:"json"},g.toJson()),y=g.geometry1.spatialReference,D=this._distanceHandler,E=this._errorHandler,C=new c(r._dfdCanceller);C._pendingDfd=
e({url:this._url.path+"/distance",content:v,callbackParamName:"callback",load:function(z,w){D(z,w,y,b,x,C)},error:function(z){E(z,x,C)}});return C},_distanceHandler:function(g,b,x,v,y,D){try{g=g&&g.distance,this._successHandler([g],"onDistanceComplete",v,D)}catch(E){this._errorHandler(E,y,D)}},onDistanceComplete:function(){},toGeoCoordinateString:function(g,b,x){var v={};B.isObject(g.sr)?v.sr=g.sr.wkid||d.toJson(g.sr.toJson()):v.sr=g.sr;v.coordinates=d.toJson(g.coordinates);v.conversionType=g.conversionType||
"MGRS";v.conversionMode=g.conversionMode;v.numOfDigits=g.numOfDigits;v.rounding=g.rounding;v.addSpaces=g.addSpaces;g=B.mixin({},this._url.query,{f:"json"},v);var y=this._toGeoCoordinateHandler,D=this._errorHandler,E=new c(r._dfdCanceller);E._pendingDfd=e({url:this._url.path+"/toGeoCoordinateString",content:g,callbackParamName:"callback",load:function(C,z){y(C,z,b,x,E)},error:function(C){D(C,x,E)}});return E},_toGeoCoordinateHandler:function(g,b,x,v,y){try{this._successHandler([g.strings],"onToGeoCoordinateStringComplete",
x,y)}catch(D){this._errorHandler(D,v,y)}},onToGeoCoordinateStringComplete:function(){},fromGeoCoordinateString:function(g,b,x){var v={};B.isObject(g.sr)?v.sr=g.sr.wkid||d.toJson(g.sr.toJson()):v.sr=g.sr;v.strings=d.toJson(g.strings);v.conversionType=g.conversionType||"MGRS";v.conversionMode=g.conversionMode;g=B.mixin({},this._url.query,{f:"json"},v);var y=this._fromGeoCoordinateHandler,D=this._errorHandler,E=new c(r._dfdCanceller);E._pendingDfd=e({url:this._url.path+"/fromGeoCoordinateString",content:g,
callbackParamName:"callback",load:function(C,z){y(C,z,b,x,E)},error:function(C){D(C,x,E)}});return E},_fromGeoCoordinateHandler:function(g,b,x,v,y){try{this._successHandler([g.coordinates],"onToGeoCoordinateStringComplete",x,y)}catch(D){this._errorHandler(D,v,y)}},onFromGeoCoordinateStringComplete:function(){}});B.mixin(f,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,
UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,
UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,
UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",
UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});B.setObject("tasks.GeometryService",f,t);return f})},"arcgisonline/map/thumbnail/createThumbnailImage":function(){define("dojo/_base/lang arcgisonline/map/core/getScaleForExtent esri/kernel esri/tasks/PrintTemplate esri/tasks/PrintTask esri/tasks/PrintParameters".split(" "),
function(f,B,l,d,c,u){var t=window.esriGeowConfig;return function(e,r,m,a,h){for(var q=600,n=400,k=function(g){return a&&(g=B(e.extent,g),a[0].scale<g)?!1:!0};!k(q)&&!(q*=2,n*=2,1600<=q););k=new d;k.layout="MAP_ONLY";k.format="png32";k.preserveScale=!1;k.showAttribution=!1;k.showLabels=!1;k.exportOptions={width:q,height:n,dpi:96};h||(h=new c(t.self.helperServices.printTask.url,{}));q=new u;q.map=e;q.template=k;l.config.defaults.io.timeout=12E4;h.execute(q,f.hitch(this,function(g){l.config.defaults.io.timeout=
6E4;return r(g.url)}),f.hitch(this,function(g){l.config.defaults.io.timeout=6E4;if(m)return m(g)}))}})},"arcgisonline/map/core/getScaleForExtent":function(){define(["require","exports","tslib","esri/config","esri/WKIDUnitConversion"],function(f,B,l,d,c){d=l.__importDefault(d);c=l.__importDefault(c);return function(u,t){var e=20015077/180,r=u.spatialReference,m=null===r||void 0===r?void 0:r.wkid;r=null===r||void 0===r?void 0:r.wkt;if(m)var a=c.default.values[c.default[m]];else r&&-1!==r.search(/^PROJCS/i)&&
(m=/UNIT\[([^\]]+)\]\]$/i.exec(r),null===m||void 0===m?0:m[1])&&(a=parseFloat(m[1].split(",")[1]));return u.getWidth()/t*(a||e)*39.37*d.default.defaults.screenDPI}})},"esri/tasks/PrintTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,d){f=f(null,{declaredClass:"esri.tasks.PrintTemplate",label:null,exportOptions:{width:800,height:1100,dpi:96},layoutOptions:null,format:"PNG32",layout:"MAP_ONLY",outScale:0,preserveScale:!0,forceFeatureAttributes:!1,
showAttribution:null,showLabels:!0});B.setObject("tasks.PrintTemplate",f,d);return f})},"esri/tasks/PrintTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../lang ../layerUtils ../deferredUtils ../Color ../request ../urlUtils ../geometry/Polygon ../renderers/SimpleRenderer ../symbols/FillSymbol ./Geoprocessor ./PrintTemplate ./Task dojo/dom-attr dojo/dom-construct dojox/gfx/_base dojox/gfx/canvas dojox/json/query ./PrintParameters ./LegendLayer".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E,C,z){f=f(v,{declaredClass:"esri.tasks.PrintTask",constructor:function(w,A){this.url=w;this.printGp=new b(this.url);this._handler=B.hitch(this,this._handler);A&&A.async&&(this.async=!0);this._colorEvaluator=z("$..color")},async:!1,_vtlExtent:null,_cimVersion:null,_is11xService:!1,_loadGpServerMetadata:!0,execute:function(w,A,G){if(!this._loadGpServerMetadata)return this._execute(w,A,G);var F=new c(m._dfdCanceller),H=this._url.path,J=H.lastIndexOf("/GPServer/");
0<J&&(H=H.slice(0,J+9));F._pendingDfd=h({url:H,callbackParamName:"callback",content:B.mixin({},this._url.query,{f:"json"})}).then(B.hitch(this,function(K){this._loadGpServerMetadata=!1;this.async="esriExecutionTypeAsynchronous"===K.executionType;this._cimVersion=K.cimVersion;this._is11xService=!!this._cimVersion;F._pendingDfd=this._execute(w);return F._pendingDfd})).then(B.hitch(this,function(K){this._successHandler([K],null,A,F)})).otherwise(function(K){G&&G(K);F.errback(K)});return F},_handler:function(w,
A,G,F,H){try{if(this.async)"esriJobSucceeded"===w.jobStatus?this.printGp.getResultData(w.jobId,"Output_File",B.hitch(this,function(K){J=K.value;this._successHandler([J],"onComplete",G,H)})):this._errorHandler(Error(w.jobStatus),F,H);else{var J=w[0].value;this._successHandler([J],"onComplete",G,H)}}catch(K){this._errorHandler(K,F,H)}},_execute:function(w,A,G){var F=this._handler,H=this._errorHandler,J=w.template||new x;J.hasOwnProperty("showLabels")||(J.showLabels=!0);var K=J.exportOptions,Q;K&&(Q=
{outputSize:[K.width,K.height],dpi:K.dpi});K=J.layoutOptions;var P=[];if(K){this.legendAll=!1;K.legendLayers?l.forEach(K.legendLayers,function(X){var fa={};fa.id=X.layerId;X.subLayerIds&&(fa.subLayerIds=X.subLayerIds);P.push(fa)}):this.legendAll=!0;if("Miles"===K.scalebarUnit||"Kilometers"===K.scalebarUnit){var I="esriKilometers";var N="esriMiles"}else if("Meters"===K.scalebarUnit||"Feet"===K.scalebarUnit)I="esriMeters",N="esriFeet";var L={esriMiles:"mi",esriKilometers:"km",esriFeet:"ft",esriMeters:"m"};
L={titleText:K.titleText,authorText:K.authorText,copyrightText:K.copyrightText,customTextElements:K.customTextElements,scaleBarOptions:{metricUnit:I,metricLabel:L[I],nonMetricUnit:N,nonMetricLabel:L[N]},legendOptions:{operationalLayers:P}}}I=this._getPrintDefinition(w.map,J);w.outSpatialReference&&(I.mapOptions.spatialReference=w.outSpatialReference.toJson());w.template&&e.isDefined(w.template.showAttribution)&&(I.mapOptions.showAttribution=w.template.showAttribution);B.mixin(I,{exportOptions:Q,layoutOptions:L});
this.allLayerslegend&&B.mixin(I.layoutOptions,{legendOptions:{operationalLayers:this.allLayerslegend}});if(I.operationalLayers){Q=I.operationalLayers;var W=function(X){return e.fixJson(B.mixin(X,{type:"esriSLS",cap:void 0,join:void 0,meterLimit:void 0}))},Z=RegExp("[\\u4E00-\\u9FFF\\u0E00-\\u0E7F\\u0900-\\u097F\\u3040-\\u309F\\u30A0-\\u30FF\\u31F0-\\u31FF]"),aa=/[\u0600-\u06FF]/,ia=function(X){var fa=X.text,ea=(X=X.font)&&X.family&&X.family.toLowerCase();fa&&X&&("arial"===ea||"arial unicode ms"===
ea)&&(X.family=Z.test(fa)?"Arial Unicode MS":"Arial","normal"!==X.style&&aa.test(fa)&&(X.family="Arial Unicode MS"))};for(L=0;L<Q.length;L++)if(Q[L].featureCollection&&Q[L].featureCollection.layers)for(N=0;N<Q[L].featureCollection.layers.length;N++){var R=Q[L].featureCollection.layers[N];if(R.layerDefinition&&R.layerDefinition.drawingInfo&&R.layerDefinition.drawingInfo.renderer&&R.layerDefinition.drawingInfo.renderer.symbol){var S=R.layerDefinition.drawingInfo.renderer;"esriCLS"===S.symbol.type?S.symbol=
W(S.symbol):"esriTS"===S.symbol.type?ia(S.symbol):S.symbol.outline&&"esriCLS"===S.symbol.outline.type&&(S.symbol.outline=W(S.symbol.outline))}if(R.featureSet&&R.featureSet.features)for(K=0;K<R.featureSet.features.length;K++)S=R.featureSet.features[K],S.symbol&&("esriCLS"===S.symbol.type?S.symbol=W(S.symbol):"esriTS"===S.symbol.type?ia(S.symbol):S.symbol.outline&&"esriCLS"===S.symbol.outline.type&&(S.symbol.outline=W(S.symbol.outline)))}}J={Web_Map_as_JSON:d.toJson(e.fixJson(I)),Format:J.format,Layout_Template:J.layout};
w.extraParameters&&(J=B.mixin(J,w.extraParameters));var M=new c(m._dfdCanceller);w=function(X,fa){F(X,fa,A,G,M)};I=function(X){H(X,G,M)};M._pendingDfd=this.async?this.printGp.submitJob(J,w,null,I):this.printGp.execute(J,w,I);return M},onComplete:function(){},_createMultipointLayer:function(){return{layerDefinition:{name:"multipointLayer",geometryType:"esriGeometryMultipoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryMultipoint",features:[]}}},_createPolygonLayer:function(){return{layerDefinition:{name:"polygonLayer",
geometryType:"esriGeometryPolygon",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolygon",features:[]}}},_createPointLayer:function(){return{layerDefinition:{name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}}},_createPolylineLayer:function(){return{layerDefinition:{name:"polylineLayer",geometryType:"esriGeometryPolyline",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolyline",
features:[]}}},_convertSvgSymbol:function(w){if(!(8>=u("ie")||!w.path&&"image/svg+xml"!==w.contentType)){var A=C.createSurface(D.create("div"),1024,1024);var G="image/svg+xml"===w.contentType?A.createObject(C.Image,{src:"data:image/svg+xml;base64,"+w.imageData,width:E.pt2px(w.width),height:E.pt2px(w.height),x:0,y:0}):A.createObject(C.Path,w.path).setFill(w.color).setStroke(w.outline);"pendingRender"in A&&A._render(!0);var F=A.rawNode.getContext("2d"),H=Math.ceil(G.getBoundingBox().width),J=Math.ceil(G.getBoundingBox().height);
G=F.getImageData(G.getBoundingBox().x,G.getBoundingBox().y,H,J);F.canvas.width=H;F.canvas.height=J;F.putImageData(G,0,0);F=F.canvas.toDataURL("image/png");w={type:"esriPMS",imageData:F.substr(22,F.length),angle:w.angle,contentType:"image/png",height:w.size?w.size:E.px2pt(J),width:w.size?H/J*w.size:E.px2pt(H),xoffset:w.xoffset,yoffset:w.yoffset};A.destroy();return w}},_convertSvgRenderer:function(w){"simple"===w.type&&w.symbol&&(w.symbol.path||"image/svg+xml"===w.symbol.contentType)?w.symbol=this._convertSvgSymbol(w.symbol):
"uniqueValue"===w.type?(w.defaultSymbol&&(w.defaultSymbol.path||"image/svg+xml"===w.defaultSymbol.contentType)&&(w.defaultSymbol=this._convertSvgSymbol(w.defaultSymbol)),w.uniqueValueInfos&&l.forEach(w.uniqueValueInfos,function(A){if(A.symbol.path||"image/svg+xml"===A.symbol.contentType)A.symbol=this._convertSvgSymbol(A.symbol)},this)):"classBreaks"===w.type&&(w.defaultSymbol&&(w.defaultSymbol.path||"image/svg+xml"===w.defaultSymbol.contentType)&&(w.defaultSymbol=this._convertSvgSymbol(w.defaultSymbol)),
w.classBreakInfos&&l.forEach(w.classBreakInfos,function(A){if(A.symbol.path||"image/svg+xml"===A.symbol.contentType)A.symbol=this._convertSvgSymbol(A.symbol)},this))},_createFeatureCollection:function(w,A,G,F){var H=this._createPolygonLayer(),J=this._createPolylineLayer(),K=this._createPointLayer(),Q=this._createMultipointLayer(),P=this._createPointLayer();P.layerDefinition.name="textLayer";delete P.layerDefinition.drawingInfo;if("esri.layers.FeatureLayer"===w.declaredClass||"esri.layers.StreamLayer"===
w.declaredClass)H.layerDefinition.name=J.layerDefinition.name=K.layerDefinition.name=Q.layerDefinition.name=B.getObject("arcgisProps.title",!1,w)||w.name||w.id;var I=w.renderer&&"esri.renderer.SimpleRenderer"===w.renderer.declaredClass;if(!w.renderer||w.renderer.valueExpression||B.isFunction(w.renderer.attributeField))delete H.layerDefinition.drawingInfo,delete J.layerDefinition.drawingInfo,delete K.layerDefinition.drawingInfo,delete Q.layerDefinition.drawingInfo;else{var N=w.renderer.toJson({useLegacyRotationProperties:!0});
if("temporal"===N.type){N={latestObservationRenderer:N.latestObservationRenderer,trackLinesRenderer:N.trackRenderer,observationAger:N.observationAger,renderer:N.observationRenderer};var L={};w._trackIdField&&(L.trackIdField=w._trackIdField);w._startTimeField&&(L.startTimeField=w._startTimeField);w._endTimeField&&(L.endTimeField=w._endTimeField);H.layerDefinition.drawingInfo=N;H.layerDefinition.timeInfo=L;J.layerDefinition.drawingInfo=N;J.layerDefinition.timeInfo=L;K.layerDefinition.drawingInfo=N;
K.layerDefinition.timeInfo=L;Q.layerDefinition.drawingInfo=N;Q.layerDefinition.timeInfo=L}else H.layerDefinition.drawingInfo.renderer=N,J.layerDefinition.drawingInfo.renderer=N,K.layerDefinition.drawingInfo.renderer=N,Q.layerDefinition.drawingInfo.renderer=N}N=w.fields;N||!w.renderer||w.renderer.valueExpression||B.isFunction(w.renderer.attributeField)||("esri.renderer.ClassBreaksRenderer"===w.renderer.declaredClass?(N=[{name:w.renderer.attributeField,type:"esriFieldTypeDouble"}],w.renderer.normalizationField&&
N.push({name:w.renderer.normalizationField,type:"esriFieldTypeDouble"})):"esri.renderer.UniqueValueRenderer"===w.renderer.declaredClass&&(N=[{name:w.renderer.attributeField,type:"esriFieldTypeString"}],w.renderer.attributeField2&&N.push({name:w.renderer.attributeField2,type:"esriFieldTypeString"}),w.renderer.attributeField3&&N.push({name:w.renderer.attributeField3,type:"esriFieldTypeString"})));N&&(H.layerDefinition.fields=N,J.layerDefinition.fields=N,K.layerDefinition.fields=N,Q.layerDefinition.fields=
N);N=w.graphics;w.isFeatureReductionActive&&w.isFeatureReductionActive()&&(N=w.getSingleGraphics());L=N.length;var W;for(W=0;W<L;W++){var Z=N[W];if(!1!==Z.visible&&Z.geometry){var aa=Z.toJson();aa.symbol&&aa.symbol.outline&&aa.symbol.outline.color&&aa.symbol.outline.color[3]&&!this._is11xService&&(aa.symbol.outline.color[3]=255);if(w.renderer&&!aa.symbol&&(B.isFunction(w.renderer.attributeField)||w.renderer.valueExpression||this._isFeatureCollectionRequired(w.renderer,w)||"esri.renderer.DotDensityRenderer"===
w.renderer.declaredClass||G)){G=G||w.renderer;var ia=null;try{ia=G.getSymbol(Z)}catch(R){}if(!ia)continue;aa.symbol=ia.toJson();this._isFeatureCollectionRequired(G,w)&&this._applyVisualVariables(aa.symbol,{renderer:G,graphic:Z,symbol:ia,mapResolution:A&&A.getResolutionInMeters(),mapScale:A&&A.getScale()})}aa.symbol&&(aa.symbol.path||"image/svg+xml"===aa.symbol.contentType?aa.symbol=this._convertSvgSymbol(aa.symbol):aa.symbol.text&&delete aa.attributes);switch(Z.geometry.type){case "polygon":H.featureSet.features.push(aa);
break;case "polyline":J.featureSet.features.push(aa);break;case "point":aa.symbol&&aa.symbol.text?P.featureSet.features.push(aa):K.featureSet.features.push(aa);break;case "multipoint":Q.featureSet.features.push(aa);break;case "extent":aa.geometry=n.fromExtent(Z.geometry).toJson(),H.featureSet.features.push(aa)}}}A=[];0<H.featureSet.features.length&&A.push(H);0<J.featureSet.features.length&&A.push(J);0<Q.featureSet.features.length&&A.push(Q);0<K.featureSet.features.length&&A.push(K);0<P.featureSet.features.length&&
A.push(P);if(!A.length)return null;l.forEach(A,function(R){var S=l.every(R.featureSet.features,function(M){return M.symbol});if(I||S)F&&F.forceFeatureAttributes||l.forEach(R.featureSet.features,function(M){delete M.attributes}),F.forceFeatureAttributes||delete R.layerDefinition.fields;S&&delete R.layerDefinition.drawingInfo});l.forEach(A,function(R){R.layerDefinition.drawingInfo&&R.layerDefinition.drawingInfo.renderer&&this._convertSvgRenderer(R.layerDefinition.drawingInfo.renderer)},this);return{id:w.id,
opacity:w.opacity,minScale:w.minScale||0,maxScale:w.maxScale||0,featureCollection:{layers:A}}},_getPrintDefinition:function(w,A){var G={operationalLayers:this._createOperationalLayers(w,A)},F=this._vtlExtent||w.extent,H=w.spatialReference;this._vtlExtent=null;w.spatialReference._isWrappable()&&(F=F._normalize(!0),H=F.spatialReference);F={mapOptions:{showAttribution:w.showAttribution,extent:F.toJson(),spatialReference:H.toJson()}};A.preserveScale&&B.mixin(F.mapOptions,{scale:A.outScale||w.getScale()});
w.timeExtent&&B.mixin(F.mapOptions,{time:[w.timeExtent.startTime.getTime(),w.timeExtent.endTime.getTime()]});w={};B.mixin(w,F,G);return w},_createOperationalLayers:function(w,A){var G,F=[],H=0;A.preserveScale&&(H=A.outScale||w.getScale());this.allLayerslegend=this.legendAll?[]:null;this._vtlExtent=null;var J=l.map(w.layerIds,w.getLayer,w);w._mapImageLyr&&J.push(w._mapImageLyr);for(G=0;G<J.length;G++){var K=J[G];if(K.loaded&&K.visible&&(!H||K.isVisibleAtScale(H))){var Q=K.declaredClass;var P={id:K.id,
title:B.getObject("arcgisProps.title",!1,K)||K.id,opacity:K.opacity,minScale:K.minScale||0,maxScale:K.maxScale||0};P=B.mixin(P,this._getUrlAndToken(K));K.getNode()&&y.get(K.getNode(),"data-reference")&&(P._isRefLayer=!0);switch(Q){case "esri.layers.ArcGISDynamicMapServiceLayer":var I=[];Q=!!K._params.layers;if(K._params.dynamicLayers)Q=A.outScale?K._getDynLayerObjs(A.outScale):d.fromJson(K._params.dynamicLayers),l.forEach(Q,function(aa){I.push({id:aa.id,name:aa.name,layerDefinition:aa});delete aa.id;
delete aa.name;delete aa.maxScale;delete aa.minScale}),0===I.length&&(P.visibleLayers=[-1]);else if(K.supportsDynamicLayers){if(Q||K.layerDefinitions||K.layerTimeOptions){var N=K.createDynamicLayerInfosFromLayerInfos(),L=null;Q&&(L=K.visibleLayers);L=r._getVisibleLayers(N,L);var W=r._getLayersForScale(A.outScale||w.getScale(),N);l.forEach(N,function(aa){if(!aa.subLayerIds){var ia=aa.id;-1<l.indexOf(L,ia)&&-1<l.indexOf(W,ia)&&(aa={source:aa.source.toJson()},K.layerDefinitions&&K.layerDefinitions[ia]&&
(aa.definitionExpression=K.layerDefinitions[ia]),K.layerTimeOptions&&K.layerTimeOptions[ia]&&(aa.layerTimeOptions=K.layerTimeOptions[ia].toJson()),I.push({id:ia,layerDefinition:aa}))}});0===I.length&&(P.visibleLayers=[-1])}}else l.forEach(K.layerInfos,function(aa){var ia={id:aa.id,layerDefinition:{}};K.layerDefinitions&&K.layerDefinitions[aa.id]&&(ia.layerDefinition.definitionExpression=K.layerDefinitions[aa.id]);K.layerTimeOptions&&K.layerTimeOptions[aa.id]&&(ia.layerDefinition.layerTimeOptions=
K.layerTimeOptions[aa.id].toJson());(ia.layerDefinition.definitionExpression||ia.layerDefinition.layerTimeOptions)&&I.push(ia)}),Q&&(P.visibleLayers=K.visibleLayers.length?K.visibleLayers:[-1]);I.length&&(P.layers=I);F.push(P);this.allLayerslegend&&this.allLayerslegend.push({id:K.id,subLayerIds:K.visibleLayers});break;case "esri.layers.ArcGISImageServiceLayer":P=B.mixin(P,{url:K.url,bandIds:K.bandIds,compressionQuality:K.compressionQuality,format:K.format,interpolation:K.interpolation});K.mosaicRule&&
B.mixin(P,{mosaicRule:K.mosaicRule.toJson()});if(K.renderingRule||K.renderer)this._is11xService?(K.renderingRule&&(P.renderingRule=K.renderingRule.toJson()),K.renderer&&(P.layerDefinition=P.layerDefinition||{},P.layerDefinition.drawingInfo=P.layerDefinition.drawingInfo||{},P.layerDefinition.drawingInfo.renderer=K.renderer.toJson())):(Q=K.getExportImageRenderingRule())&&B.mixin(P,{renderingRule:Q.toJson()});F.push(P);this.allLayerslegend&&this.allLayerslegend.push({id:K.id});break;case "esri.layers.RasterXLayer":this._is11xService&&
(P=B.mixin(P,{url:K.url,bandIds:K.bandIds,interpolation:K.interpolation}),K.renderer&&(P.layerDefinition=P.layerDefinition||{},P.layerDefinition.drawingInfo=P.layerDefinition.drawingInfo||{},P.layerDefinition.drawingInfo.renderer=K.renderer.toJson()),F.push(P),this.allLayerslegend&&this.allLayerslegend.push({id:K.id}));break;case "esri.layers.WMSLayer":P=B.mixin(P,{url:K.url,title:K.title,type:"wms",version:K.version,transparentBackground:K.imageTransparency,visibleLayers:K.visibleLayers});F.push(P);
this.allLayerslegend&&this.allLayerslegend.push({id:K.id,subLayerIds:K.visibleLayers});break;case "esri.virtualearth.VETiledLayer":Q=K.mapStyle;"roadOnDemand"===Q?Q="Road":"aerialWithLabelsOnDemand"===Q&&(Q="Hybrid");P=B.mixin(P,{visibility:K.visible,type:"BingMaps"+Q,culture:K.culture,key:K.bingMapsKey});F.push(P);break;case "esri.layers.OpenStreetMapLayer":P=B.mixin(P,{credits:K.copyright,type:"OpenStreetMap",url:q.getAbsoluteUrl(K.tileServers[0])});F.push(P);break;case "esri.layers.WMTSLayer":P=
B.mixin(P,{url:K.url,type:"wmts",layer:K._identifier,style:K._style,format:K.format,tileMatrixSet:K._tileMatrixSetId});F.push(P);break;case "esri.layers.MapImageLayer":Q=K.getImages();l.forEach(Q,function(aa,ia){aa.visible&&aa.href&&(P={id:K.id+"_image"+ia,type:"image",title:K.id,minScale:K.minScale||0,maxScale:K.maxScale||0,opacity:K.opacity*aa.opacity,extent:aa.extent.toJson()},"data:image/png;base64,"===aa.href.substr(0,22)?P.imageData=aa.href.substr(22):P.url=aa.href,F.push(P))});break;case "esri.layers.VectorTileLayer":delete P.url;
delete P.token;if(this._is11xService&&K.currentStyleInfo.serviceUrl&&K.currentStyleInfo.styleUrl&&(Q=t.id&&t.id.findCredential(K.currentStyleInfo.styleUrl),N=t.id&&t.id.findCredential(K.currentStyleInfo.serviceUrl),!Q&&!N||"2.1.0"!==this._cimVersion)){P.type="VectorTileLayer";P.styleUrl=K.currentStyleInfo.styleUrl;Q&&(P.token=Q.token);N&&N.token!==P.token&&(P.additionalTokens=[{url:K.currentStyleInfo.serviceUrl,token:N.token}]);F.push(P);break}P.type="image";Q=this._vtlExtent||w.extent.offset(0,0);
var Z=A.exportOptions&&A.exportOptions.dpi||96;N={format:"png",pixelRatio:Z/96};"MAP_ONLY"!==A.layout||!A.preserveScale||A.outScale&&A.outScale!==w.getScale()||96!==Z||!A.exportOptions||A.exportOptions.width%2===w.width%2&&A.exportOptions.height%2===w.height%2||(N.area={x:0,y:0,width:w.width,height:w.height},A.exportOptions.width%2!==w.width%2&&--N.area.width,A.exportOptions.height%2!==w.height%2&&--N.area.height,this._vtlExtent||(Z=w.toMap({x:N.area.width,y:N.area.height}),Q.update(Q.xmin,Z.y,Z.x,
Q.ymax,Q.spatialReference),this._vtlExtent=Q));P.extent=Q._normalize(!0).toJson();Q=K.takeScreenshot(N);Q.isResolved()&&Q.then(function(aa){"data:image/png;base64,"===aa.dataURL.substr(0,22)&&(P.imageData=aa.dataURL.substr(22))});P.imageData&&F.push(P);break;case "esri.layers.WebTiledLayer":Q=K.url.replace(/\$\{/g,"{");P=B.mixin(P,{type:"WebTiledLayer",urlTemplate:Q,credits:K.copyright});K.subDomains&&0<K.subDomains.length&&(P.subDomains=K.subDomains);K._wmtsInfo&&(P.wmtsInfo=K._wmtsInfo);delete P.url;
F.push(P);break;default:if(K.getTileUrl||K.getImageUrl)P=B.mixin(P,{url:K.url}),F.push(P)}}}J=l.map(w.graphicsLayerIds,w.getLayer,w);for(G=0;G<J.length;G++)K=J[G],K.isFeatureReductionActive&&K.isFeatureReductionActive()&&(K.getSingleGraphics().length?J.splice(++G,0,K.getFeatureReductionLayer()):J[G]=K.getFeatureReductionLayer());for(G=0;G<J.length;G++)if(K=J[G],K.loaded&&K.visible&&(!H||K.isVisibleAtScale(H)))switch(Q=K.declaredClass,Q){case "esri.layers.CSVLayer":if(this._is11xService){P={id:K.id,
url:K.url,title:K.title,opacity:K.opacity,minScale:K.minScale||0,maxScale:K.maxScale||0,type:"CSV",locationInfo:{latitudeFieldName:K.latitudeFieldName,longitudeFieldName:K.longitudeFieldName},layerDefinition:{drawingInfo:{renderer:K.renderer&&K.renderer.toJson()}}};F.push(P);break}case "esri.layers.FeatureLayer":case "esri.layers.LabelLayer":case "esri.layers.StreamLayer":if("esri.layers.LabelLayer"===Q&&!A.showLabels||K.renderer&&"esri.renderer.HeatmapRenderer"===K.renderer.declaredClass)continue;
Q=null;K.url&&K.renderer&&("esri.renderer.ScaleDependentRenderer"===K.renderer.declaredClass?"scale"===K.renderer.rangeType?Q=K.renderer.getRendererInfoByScale(w.getScale())&&K.renderer.getRendererInfoByScale(w.getScale()).renderer:"zoom"===K.renderer.rangeType&&(Q=K.renderer.getRendererInfoByZoom(w.getZoom())&&K.renderer.getRendererInfoByZoom(w.getZoom()).renderer):Q=K.renderer);N=Q&&"esri.layers.CSVLayer"!==K.declaredClass&&!this._isFeatureCollectionRequired(Q,K)&&!Q.valueExpression;Z=K.isFeatureReductionActive&&
K.isFeatureReductionActive();if(Q&&!Z&&"esri.renderer.DotDensityRenderer"!==Q.declaredClass&&"esri.layers.StreamLayer"!==K.declaredClass&&(this._is11xService||N)&&("esri.renderer.SimpleRenderer"===Q.declaredClass||"esri.renderer.TemporalRenderer"===Q.declaredClass||null==Q.attributeField||B.isString(Q.attributeField)&&K._getField(Q.attributeField,!0)))if(P={id:K.id,title:B.getObject("arcgisProps.title",!1,K)||K.id,opacity:K.opacity,minScale:K.minScale||0,maxScale:K.maxScale||0,layerDefinition:{drawingInfo:{renderer:Q.toJson({useLegacyRotationProperties:!this._is11xService})}}},
P=B.mixin(P,this._getUrlAndToken(K)),"esri.renderer.TemporalRenderer"===Q.declaredClass&&(N=P.layerDefinition.drawingInfo,N.latestObservationRenderer=N.renderer.latestObservationRenderer,N.trackLinesRenderer=N.renderer.trackRenderer,N.observationAger=N.renderer.observationAger,N.renderer=N.renderer.observationRenderer,K._trackIdField&&(P.layerDefinition.timeInfo={trackIdField:K._trackIdField})),this._convertSvgRenderer(P.layerDefinition.drawingInfo.renderer),this._is11xService||1>K.opacity||"esri.renderer.TemporalRenderer"===
Q.declaredClass||this._updateLayerOpacity(P))if(K._params.source&&(Q=K._params.source.toJson(),B.mixin(P.layerDefinition,{source:Q})),K.getDefinitionExpression()&&B.mixin(P.layerDefinition,{definitionExpression:K.getDefinitionExpression()}),2!==K.mode)0<K.getSelectedFeatures().length&&(Q=l.map(K.getSelectedFeatures(),function(aa){return aa.attributes[K.objectIdField]}),0<Q.length&&K.getSelectionSymbol()&&B.mixin(P,{selectionObjectIds:Q,selectionSymbol:K.getSelectionSymbol().toJson()}));else{Q=l.map(K.getSelectedFeatures(),
function(aa){return aa.attributes[K.objectIdField]});if(0===Q.length||!K._params.drawMode)break;B.mixin(P.layerDefinition,{objectIds:Q});Q=null;K.getSelectionSymbol()&&(Q=new k(K.getSelectionSymbol()));B.mixin(P.layerDefinition.drawingInfo,{renderer:Q&&Q.toJson()})}else P=this._createFeatureCollection(K,w,null,A);else P=Q&&(Q.valueExpression||this._isFeatureCollectionRequired(Q,K)||"esri.renderer.DotDensityRenderer"===Q.declaredClass)?this._createFeatureCollection(K,w,Q,A):this._createFeatureCollection(K,
w,null,A);if(!P)continue;F.push(P);this.allLayerslegend&&this.allLayerslegend.push({id:K.id});break;case "esri.layers._GraphicsLayer":case "esri.layers.GraphicsLayer":case "esri.layers.WFSLayer":P=this._createFeatureCollection(K,w,null,A);if(!P)continue;F.push(P);this.allLayerslegend&&this.allLayerslegend.push({id:K.id});break;case "esri.layers.ArcGISImageServiceVectorLayer":P={id:K.id,title:B.getObject("arcgisProps.title",!1,K)||K.id,opacity:K.opacity,minScale:K.minScale||0,maxScale:K.maxScale||
0,visibility:K.visible,symbolTileSize:K.symbolTileSize,layerDefinition:{drawingInfo:{renderer:K.renderer.toJson({useLegacyRotationProperties:!this._is11xService})}}},P=B.mixin(P,this._getUrlAndToken(K)),K.mosaicRule&&B.mixin(P,{mosaicRule:K.mosaicRule.toJson()}),F.push(P),this.allLayerslegend&&this.allLayerslegend.push({id:K.id})}H&&l.forEach(F,function(aa){aa.minScale=0;aa.maxScale=0});w.graphics&&0<w.graphics.graphics.length&&(P=this._createFeatureCollection(w.graphics,w,null,A))&&F.push(P);w._labels&&
A.showLabels&&(P=this._createFeatureCollection(w._labels,w,null,A))&&F.push(P);l.forEach(F,function(aa,ia,R){aa._isRefLayer&&(delete aa._isRefLayer,R.splice(ia,1),R.push(aa))});return F},_getUrlAndToken:function(w){return{token:w._getToken(),url:w._url?w._url.path:null}},_updateLayerOpacity:function(w){var A=this._colorEvaluator(w);A=l.filter(A,function(J){return B.isArray(J)&&4===J.length});var G=!0;if(A.length){var F=A[0][3],H;for(H=1;H<A.length;H++)if(F!==A[H][3]){G=!1;break}if(G)for(w.opacity=
F/255,H=0;H<A.length;H++)A[H][3]=255}return G},_isFeatureCollectionRequired:function(w,A){if(A&&A.isFeatureReductionActive&&A.isFeatureReductionActive())return!0;var G=!1;if(A=this._getVariable(w,"rotationInfo",!1))G=(G=A.field)&&B.isFunction(G)||A.valueExpression;return w.hasVisualVariables("sizeInfo")||w.hasVisualVariables("colorInfo")||w.hasVisualVariables("opacityInfo")||G},_getVariable:function(w,A,G){if(w)var F=(w=w.getVisualVariablesForType(A,G))&&w[0];return F},_applyVisualVariables:function(w,
A){var G=A.renderer,F=A.graphic,H=A.symbol,J=A.mapResolution,K=A.mapScale,Q=H.type;if("textsymbol"!==Q&&"shieldlabelsymbol"!==Q){var P=this._getVariable(G,"sizeInfo",!1),I=this._getVariable(G,"colorInfo",!1),N=this._getVariable(G,"opacityInfo",!1);A=this._getVariable(G,"rotationInfo",!1);H instanceof g&&(P=this._getVariable(G,"sizeInfo","outline")||P);J=P?G.getSize(F,{sizeInfo:P,shape:"simplemarkersymbol"===Q?H.style:null,resolution:J,scale:K}):F.size;null!=J&&("simplemarkersymbol"===Q?w.size=E.px2pt(J):
"picturemarkersymbol"===Q?(K=H.width/H.height*J,w.width=E.px2pt(K),w.height=E.px2pt(J),0!==H.xoffset&&(w.xoffset=E.px2pt(H.xoffset/H.width*K)),0!==H.yoffset&&(w.yoffset=E.px2pt(H.yoffset/H.height*J))):"simplelinesymbol"===Q?w.width=E.px2pt(J):w.outline&&(w.outline.width=E.px2pt(J)));I&&(!(H=G.getColor(F,{colorInfo:I}))||"simplemarkersymbol"!==Q&&"simplelinesymbol"!==Q&&"simplefillsymbol"!==Q||(w.color=a.toJsonColor(H)));N&&(H=G.getOpacity(F,{opacityInfo:N}),null!=H&&w.color&&(w.color[3]=Math.round(255*
H)));A&&(G=G.getRotationAngle(F,{rotationInfo:A}))&&(w.angle=-G)}}});B.setObject("tasks.PrintTask",f,t);return f})},"dojox/gfx/canvas":function(){define("./_base dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/window dojo/dom-geometry dojo/dom ./shape ./path ./arc ./matrix ./decompose ./bezierutils".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h,q){function n(I,N,L,W,Z,aa,ia,R,S,M){var X=N.length,fa=0;if(M){var ea=M.l/Z;fa=M.i}else ea=N[0]/Z;for(;aa<ia;){if(aa+ea>ia){var ha={l:(aa+ea-
ia)*Z,i:fa};ea=ia-aa}fa%2||(I.beginPath(),I.arc(L,W,Z,aa,aa+ea,R),S&&I.stroke());aa+=ea;++fa;ea=N[fa%X]/Z}return ha}function k(I,N,L,W){var Z=0,aa=0,ia=0;if(W){var R=W.l;ia=W.i}else R=N[0];for(;1>aa;)aa=q.tAtLength(I,R),1==aa&&(Z=q.computeLength(I),Z={l:R-Z,i:ia}),I=q.splitBezierAtT(I,aa),ia%2||L.push(I[0]),I=I[1],++ia,R=N[ia%N.length];return Z}function g(I,N,L,W){var Z=[N.last.x,N.last.y].concat(L),aa=!(I instanceof Array);L=4===L.length?"quadraticCurveTo":"bezierCurveTo";var ia=[];N=k(Z,N.canvasDash,
ia,W);for(W=0;W<ia.length;++W)Z=ia[W],aa?(I.moveTo(Z[0],Z[1]),I[L].apply(I,Z.slice(2))):(I.push("moveTo",[Z[0],Z[1]]),I.push(L,Z.slice(2)));return N}function b(I,N,L,W,Z,aa,ia){var R=0,S=0,M=0,X=q.distance(L,W,Z,aa),fa=0;N=N.canvasDash;var ea=L,ha=W,ra=!(I instanceof Array);ia?(M=ia.l,fa=ia.i):M+=N[0];for(;.01<Math.abs(1-S);){M>X&&(R={l:M-X,i:fa},M=X);S=M/X;ia=L+(Z-L)*S;var Aa=W+(aa-W)*S;fa++%2||(ra?(I.moveTo(ea,ha),I.lineTo(ia,Aa)):(I.push("moveTo",[ea,ha]),I.push("lineTo",[ia,Aa])));ea=ia;ha=Aa;
M+=N[fa%N.length]}return R}var x=f.canvas={},v=null,y=a.multiplyPoint,D=Math.PI,E=2*D,C=D/2;h=B.extend;if(c.global.CanvasRenderingContext2D){c=c.doc.createElement("canvas").getContext("2d");var z="function"==typeof c.setLineDash,w="function"==typeof c.fillText}var A={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};x.Shape=d("dojox.gfx.canvas.Shape",
e.Shape,{_render:function(I){I.save();this._renderTransform(I);this._renderClip(I);this._renderShape(I);this._renderFill(I,!0);this._renderStroke(I,!0);I.restore()},_renderClip:function(I){this.canvasClip&&(this.canvasClip.render(I),I.clip())},_renderTransform:function(I){if("canvasTransform"in this){var N=this.canvasTransform;I.translate(N.dx,N.dy);I.rotate(N.angle2);I.scale(N.sx,N.sy);I.rotate(N.angle1)}},_renderShape:function(I){},_renderFill:function(I,N){if("canvasFill"in this){var L=this.fillStyle;
if("canvasFillImage"in this){var W=L.width,Z=L.height,aa=this.canvasFillImage.width,ia=this.canvasFillImage.height,R=Math.min(W==aa?1:W/aa,Z==ia?1:Z/ia),S=(W-R*aa)/2,M=(Z-R*ia)/2;v.width=W;v.height=Z;var X=v.getContext("2d");X.clearRect(0,0,W,Z);X.drawImage(this.canvasFillImage,0,0,aa,ia,S,M,R*aa,R*ia);this.canvasFill=I.createPattern(v,"repeat");delete this.canvasFillImage}I.fillStyle=this.canvasFill;N&&("pattern"!==L.type||0===L.x&&0===L.y||I.translate(L.x,L.y),I.fill())}else I.fillStyle="rgba(0,0,0,0.0)"},
_renderStroke:function(I,N){var L=this.strokeStyle;L?(I.strokeStyle=L.color.toString(),I.lineWidth=L.width,I.lineCap=L.cap,"number"==typeof L.join?(I.lineJoin="miter",I.miterLimit=L.join):I.lineJoin=L.join,this.canvasDash?z?(I.setLineDash(this.canvasDash),N&&I.stroke()):this._renderDashedStroke(I,N):N&&I.stroke()):N||(I.strokeStyle="rgba(0,0,0,0.0)")},_renderDashedStroke:function(I,N){},getEventSource:function(){return null},on:function(){},connect:function(){},disconnect:function(){},canvasClip:null,
setClip:function(I){this.inherited(arguments);var N=I?"width"in I?"rect":"cx"in I?"ellipse":"points"in I?"polyline":"d"in I?"path":null:null;if(I&&!N)return this;this.canvasClip=I?G(N,I):null;this.parent&&this.parent._makeDirty();return this}});var G=function(I,N){switch(I){case "ellipse":return{canvasEllipse:K({shape:N}),render:function(L){return x.Ellipse.prototype._renderShape.call(this,L)}};case "rect":return{shape:B.delegate(N,{r:0}),render:function(L){return x.Rect.prototype._renderShape.call(this,
L)}};case "path":return{canvasPath:F(N),render:function(L){this.canvasPath._renderShape(L)}};case "polyline":return{canvasPolyline:N.points,render:function(L){return x.Polyline.prototype._renderShape.call(this,L)}}}return null},F=function(I){var N=new dojox.gfx.canvas.Path;N.canvasPath=[];N._setPath(I.d);return N},H=function(I,N,L){var W=I.prototype[N];I.prototype[N]=L?function(){this.parent&&this.parent._makeDirty();W.apply(this,arguments);L.call(this);return this}:function(){this.parent&&this.parent._makeDirty();
return W.apply(this,arguments)}};H(x.Shape,"setTransform",function(){this.matrix?this.canvasTransform=f.decompose(this.matrix):delete this.canvasTransform});H(x.Shape,"setFill",function(){var I=this.fillStyle;if(I){if("object"==typeof I&&"type"in I){var N=this.surface.rawNode.getContext("2d");switch(I.type){case "linear":case "radial":var L="linear"==I.type?N.createLinearGradient(I.x1,I.y1,I.x2,I.y2):N.createRadialGradient(I.cx,I.cy,0,I.cx,I.cy,I.r);l.forEach(I.colors,function(W){L.addColorStop(W.offset,
f.normalizeColor(W.color).toString())});break;case "pattern":v||(v=document.createElement("canvas")),N=new Image,this.surface.downloadImage(N,I.src),this.canvasFillImage=N}}else L=I.toString();this.canvasFill=L}else delete this.canvasFill});H(x.Shape,"setStroke",function(){var I=this.strokeStyle;if(I){var N=this.strokeStyle.style.toLowerCase();N in A&&(N=A[N]);if(N instanceof Array){this.canvasDash=N=N.slice();var L;for(L=0;L<N.length;++L)N[L]*=I.width;if("butt"!=I.cap){for(L=0;L<N.length;L+=2)N[L]-=
I.width,1>N[L]&&(N[L]=1);for(L=1;L<N.length;L+=2)N[L]+=I.width}}else delete this.canvasDash}else delete this.canvasDash;this._needsDash=!z&&!!this.canvasDash});H(x.Shape,"setShape");x.Group=d("dojox.gfx.canvas.Group",x.Shape,{constructor:function(){e.Container._init.call(this)},_render:function(I){I.save();this._renderTransform(I);this._renderClip(I);for(var N=0;N<this.children.length;++N)this.children[N]._render(I);I.restore()},destroy:function(){e.Container.clear.call(this,!0);x.Shape.prototype.destroy.apply(this,
arguments)}});x.Rect=d("dojox.gfx.canvas.Rect",[x.Shape,e.Rect],{_renderShape:function(I){var N=this.shape,L=Math.min(N.r,N.height/2,N.width/2),W=N.x,Z=W+N.width,aa=N.y;N=aa+N.height;var ia=W+L,R=Z-L,S=aa+L,M=N-L;I.beginPath();I.moveTo(ia,aa);L?(I.arc(R,S,L,-C,0,!1),I.arc(R,M,L,0,C,!1),I.arc(ia,M,L,C,D,!1),I.arc(ia,S,L,D,D+C,!1)):(I.lineTo(R,aa),I.lineTo(Z,M),I.lineTo(ia,N),I.lineTo(W,S));I.closePath()},_renderDashedStroke:function(I,N){var L=this.shape,W=Math.min(L.r,L.height/2,L.width/2),Z=L.x,
aa=Z+L.width,ia=L.y,R=ia+L.height,S=Z+W,M=aa-W,X=ia+W,fa=R-W;W?(I.beginPath(),L=b(I,this,S,ia,M,ia),N&&I.stroke(),L=n(I,this.canvasDash,M,X,W,-C,0,!1,N,L),I.beginPath(),L=b(I,this,aa,X,aa,fa,L),N&&I.stroke(),L=n(I,this.canvasDash,M,fa,W,0,C,!1,N,L),I.beginPath(),L=b(I,this,M,R,S,R,L),N&&I.stroke(),L=n(I,this.canvasDash,S,fa,W,C,D,!1,N,L),I.beginPath(),L=b(I,this,Z,fa,Z,X,L),N&&I.stroke(),n(I,this.canvasDash,S,X,W,D,D+C,!1,N,L)):(I.beginPath(),L=b(I,this,S,ia,M,ia),L=b(I,this,M,ia,aa,fa,L),L=b(I,this,
aa,fa,S,R,L),b(I,this,S,R,Z,X,L),N&&I.stroke())}});var J=[];(function(){var I=m.curvePI4;J.push(I.s,I.c1,I.c2,I.e);for(var N=45;360>N;N+=45){var L=a.rotateg(N);J.push(y(L,I.c1),y(L,I.c2),y(L,I.e))}})();var K=function(I){var N=[],L=I.shape,W=a.normalize([a.translate(L.cx,L.cy),a.scale(L.rx,L.ry)]);var Z=y(W,J[0]);N.push([Z.x,Z.y]);for(L=1;L<J.length;L+=3){var aa=y(W,J[L]);var ia=y(W,J[L+1]);Z=y(W,J[L+2]);N.push([aa.x,aa.y,ia.x,ia.y,Z.x,Z.y])}if(I._needsDash){Z=[];aa=N[0];for(L=1;L<N.length;++L)ia=
[],k(aa.concat(N[L]),I.canvasDash,ia),aa=[N[L][4],N[L][5]],Z.push(ia);I._dashedPoints=Z}return N};x.Ellipse=d("dojox.gfx.canvas.Ellipse",[x.Shape,e.Ellipse],{setShape:function(){this.inherited(arguments);this.canvasEllipse=K(this);return this},setStroke:function(){this.inherited(arguments);z||(this.canvasEllipse=K(this));return this},_renderShape:function(I){var N=this.canvasEllipse,L;I.beginPath();I.moveTo.apply(I,N[0]);for(L=1;L<N.length;++L)I.bezierCurveTo.apply(I,N[L]);I.closePath()},_renderDashedStroke:function(I,
N){var L=this._dashedPoints;I.beginPath();for(var W=0;W<L.length;++W)for(var Z=L[W],aa=0;aa<Z.length;++aa){var ia=Z[aa];I.moveTo(ia[0],ia[1]);I.bezierCurveTo(ia[2],ia[3],ia[4],ia[5],ia[6],ia[7])}N&&I.stroke()}});x.Circle=d("dojox.gfx.canvas.Circle",[x.Shape,e.Circle],{_renderShape:function(I){var N=this.shape;I.beginPath();I.arc(N.cx,N.cy,N.r,0,E,1)},_renderDashedStroke:function(I,N){var L=this.shape,W=0,Z=this.canvasDash.length;for(i=0;W<E;){var aa=this.canvasDash[i%Z]/L.r;i%2||(I.beginPath(),I.arc(L.cx,
L.cy,L.r,W,W+aa,0),N&&I.stroke());W+=aa;++i}}});x.Line=d("dojox.gfx.canvas.Line",[x.Shape,e.Line],{_renderShape:function(I){var N=this.shape;I.beginPath();I.moveTo(N.x1,N.y1);I.lineTo(N.x2,N.y2)},_renderDashedStroke:function(I,N){var L=this.shape;I.beginPath();b(I,this,L.x1,L.y1,L.x2,L.y2);N&&I.stroke()}});x.Polyline=d("dojox.gfx.canvas.Polyline",[x.Shape,e.Polyline],{setShape:function(){this.inherited(arguments);var I=this.shape.points,N=I[0],L;this.bbox=null;this._normalizePoints();if(I.length)if("number"==
typeof N)N=I;else for(N=[],L=0;L<I.length;++L){var W=I[L];N.push(W.x,W.y)}else N=[];this.canvasPolyline=N;return this},_renderShape:function(I){var N=this.canvasPolyline;if(N.length){I.beginPath();I.moveTo(N[0],N[1]);for(var L=2;L<N.length;L+=2)I.lineTo(N[L],N[L+1])}},_renderDashedStroke:function(I,N){var L=this.canvasPolyline,W=0;I.beginPath();for(var Z=0;Z<L.length;Z+=2)W=b(I,this,L[Z],L[Z+1],L[Z+2],L[Z+3],W);N&&I.stroke()}});x.Image=d("dojox.gfx.canvas.Image",[x.Shape,e.Image],{setShape:function(){this.inherited(arguments);
var I=new Image;this.surface.downloadImage(I,this.shape.src);this.canvasImage=I;return this},_renderShape:function(I){var N=this.shape;I.drawImage(this.canvasImage,N.x,N.y,N.width,N.height)}});x.Text=d("dojox.gfx.canvas.Text",[x.Shape,e.Text],{_setFont:function(){this.fontStyle?this.canvasFont=f.makeFontString(this.fontStyle):delete this.canvasFont},getTextWidth:function(){var I=this.shape,N=0;if(I.text){var L=this.surface.rawNode.getContext("2d");L.save();this._renderTransform(L);this._renderFill(L,
!1);this._renderStroke(L,!1);this.canvasFont&&(L.font=this.canvasFont);N=L.measureText(I.text).width;L.restore()}return N},_render:function(I){I.save();this._renderTransform(I);this._renderFill(I,!1);this._renderStroke(I,!1);this._renderShape(I);I.restore()},_renderShape:function(I){var N=this.shape;N.text&&(I.textAlign="middle"===N.align?"center":N.align,this.canvasFont&&(I.font=this.canvasFont),this.canvasFill&&I.fillText(N.text,N.x,N.y),this.strokeStyle&&(I.beginPath(),I.strokeText(N.text,N.x,
N.y),I.closePath()))}});H(x.Text,"setFont");w||x.Text.extend({getTextWidth:function(){return 0},getBoundingBox:function(){return null},_renderShape:function(){}});var Q={M:"_moveToA",m:"_moveToR",L:"_lineToA",l:"_lineToR",H:"_hLineToA",h:"_hLineToR",V:"_vLineToA",v:"_vLineToR",C:"_curveToA",c:"_curveToR",S:"_smoothCurveToA",s:"_smoothCurveToR",Q:"_qCurveToA",q:"_qCurveToR",T:"_qSmoothCurveToA",t:"_qSmoothCurveToR",A:"_arcTo",a:"_arcTo",Z:"_closePath",z:"_closePath"};x.Path=d("dojox.gfx.canvas.Path",
[x.Shape,r.Path],{constructor:function(){this.lastControl={}},setShape:function(){this.canvasPath=[];this._dashedPath=[];return this.inherited(arguments)},setStroke:function(){this.inherited(arguments);z||(this.segmented=!1,this._confirmSegmented());return this},_setPath:function(){this._dashResidue=null;this.inherited(arguments)},_updateWithSegment:function(I){var N=B.clone(this.last);this[Q[I.action]](this.canvasPath,I.action,I.args,this._needsDash?this._dashedPath:null);this.last=N;this.inherited(arguments)},
_renderShape:function(I){var N=this.canvasPath;I.beginPath();for(var L=0;L<N.length;L+=2)I[N[L]].apply(I,N[L+1])},_renderDashedStroke:z?function(){}:function(I,N){var L=this._dashedPath;I.beginPath();for(var W=0;W<L.length;W+=2)I[L[W]].apply(I,L[W+1]);N&&I.stroke()},_moveToA:function(I,N,L,W){I.push("moveTo",[L[0],L[1]]);W&&W.push("moveTo",[L[0],L[1]]);for(N=2;N<L.length;N+=2)I.push("lineTo",[L[N],L[N+1]]),W&&(this._dashResidue=b(W,this,L[N-2],L[N-1],L[N],L[N+1],this._dashResidue));this.last.x=L[L.length-
2];this.last.y=L[L.length-1];this.lastControl={}},_moveToR:function(I,N,L,W){N="x"in this.last?[this.last.x+=L[0],this.last.y+=L[1]]:[this.last.x=L[0],this.last.y=L[1]];I.push("moveTo",N);W&&W.push("moveTo",N);for(N=2;N<L.length;N+=2)I.push("lineTo",[this.last.x+=L[N],this.last.y+=L[N+1]]),W&&(this._dashResidue=b(W,this,W[W.length-1][0],W[W.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_lineToA:function(I,N,L,W){for(N=0;N<L.length;N+=2)W&&(this._dashResidue=b(W,this,
this.last.x,this.last.y,L[N],L[N+1],this._dashResidue)),I.push("lineTo",[L[N],L[N+1]]);this.last.x=L[L.length-2];this.last.y=L[L.length-1];this.lastControl={}},_lineToR:function(I,N,L,W){for(N=0;N<L.length;N+=2)I.push("lineTo",[this.last.x+=L[N],this.last.y+=L[N+1]]),W&&(this._dashResidue=b(W,this,W[W.length-1][0],W[W.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_hLineToA:function(I,N,L,W){for(N=0;N<L.length;++N)I.push("lineTo",[L[N],this.last.y]),W&&(this._dashResidue=
b(W,this,W[W.length-1][0],W[W.length-1][1],L[N],this.last.y,this._dashResidue));this.last.x=L[L.length-1];this.lastControl={}},_hLineToR:function(I,N,L,W){for(N=0;N<L.length;++N)I.push("lineTo",[this.last.x+=L[N],this.last.y]),W&&(this._dashResidue=b(W,this,W[W.length-1][0],W[W.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_vLineToA:function(I,N,L,W){for(N=0;N<L.length;++N)I.push("lineTo",[this.last.x,L[N]]),W&&(this._dashResidue=b(W,this,W[W.length-1][0],W[W.length-
1][1],this.last.x,L[N],this._dashResidue));this.last.y=L[L.length-1];this.lastControl={}},_vLineToR:function(I,N,L,W){for(N=0;N<L.length;++N)I.push("lineTo",[this.last.x,this.last.y+=L[N]]),W&&(this._dashResidue=b(W,this,W[W.length-1][0],W[W.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_curveToA:function(I,N,L,W){for(N=0;N<L.length;N+=6)I.push("bezierCurveTo",L.slice(N,N+6)),W&&(this._dashResidue=g(W,this,I[I.length-1],this._dashResidue));this.last.x=L[L.length-2];
this.last.y=L[L.length-1];this.lastControl.x=L[L.length-4];this.lastControl.y=L[L.length-3];this.lastControl.type="C"},_curveToR:function(I,N,L,W){for(N=0;N<L.length;N+=6)I.push("bezierCurveTo",[this.last.x+L[N],this.last.y+L[N+1],this.lastControl.x=this.last.x+L[N+2],this.lastControl.y=this.last.y+L[N+3],this.last.x+L[N+4],this.last.y+L[N+5]]),W&&(this._dashResidue=g(W,this,I[I.length-1],this._dashResidue)),this.last.x+=L[N+4],this.last.y+=L[N+5];this.lastControl.type="C"},_smoothCurveToA:function(I,
N,L,W){for(N=0;N<L.length;N+=4){var Z="C"==this.lastControl.type;I.push("bezierCurveTo",[Z?2*this.last.x-this.lastControl.x:this.last.x,Z?2*this.last.y-this.lastControl.y:this.last.y,L[N],L[N+1],L[N+2],L[N+3]]);W&&(this._dashResidue=g(W,this,I[I.length-1],this._dashResidue));this.lastControl.x=L[N];this.lastControl.y=L[N+1];this.lastControl.type="C"}this.last.x=L[L.length-2];this.last.y=L[L.length-1]},_smoothCurveToR:function(I,N,L,W){for(N=0;N<L.length;N+=4){var Z="C"==this.lastControl.type;I.push("bezierCurveTo",
[Z?2*this.last.x-this.lastControl.x:this.last.x,Z?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+L[N],this.last.y+L[N+1],this.last.x+L[N+2],this.last.y+L[N+3]]);W&&(this._dashResidue=g(W,this,I[I.length-1],this._dashResidue));this.lastControl.x=this.last.x+L[N];this.lastControl.y=this.last.y+L[N+1];this.lastControl.type="C";this.last.x+=L[N+2];this.last.y+=L[N+3]}},_qCurveToA:function(I,N,L,W){for(N=0;N<L.length;N+=4)I.push("quadraticCurveTo",L.slice(N,N+4));W&&(this._dashResidue=g(W,this,
I[I.length-1],this._dashResidue));this.last.x=L[L.length-2];this.last.y=L[L.length-1];this.lastControl.x=L[L.length-4];this.lastControl.y=L[L.length-3];this.lastControl.type="Q"},_qCurveToR:function(I,N,L,W){for(N=0;N<L.length;N+=4)I.push("quadraticCurveTo",[this.lastControl.x=this.last.x+L[N],this.lastControl.y=this.last.y+L[N+1],this.last.x+L[N+2],this.last.y+L[N+3]]),W&&(this._dashResidue=g(W,this,I[I.length-1],this._dashResidue)),this.last.x+=L[N+2],this.last.y+=L[N+3];this.lastControl.type="Q"},
_qSmoothCurveToA:function(I,N,L,W){for(N=0;N<L.length;N+=2){var Z="Q"==this.lastControl.type;I.push("quadraticCurveTo",[this.lastControl.x=Z?2*this.last.x-this.lastControl.x:this.last.x,this.lastControl.y=Z?2*this.last.y-this.lastControl.y:this.last.y,L[N],L[N+1]]);W&&(this._dashResidue=g(W,this,I[I.length-1],this._dashResidue));this.lastControl.type="Q"}this.last.x=L[L.length-2];this.last.y=L[L.length-1]},_qSmoothCurveToR:function(I,N,L,W){for(N=0;N<L.length;N+=2){var Z="Q"==this.lastControl.type;
I.push("quadraticCurveTo",[this.lastControl.x=Z?2*this.last.x-this.lastControl.x:this.last.x,this.lastControl.y=Z?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+L[N],this.last.y+L[N+1]]);W&&(this._dashResidue=g(W,this,I[I.length-1],this._dashResidue));this.lastControl.type="Q";this.last.x+=L[N];this.last.y+=L[N+1]}},_arcTo:function(I,N,L,W){N="a"==N;for(var Z=0;Z<L.length;Z+=7){var aa=L[Z+5],ia=L[Z+6];N&&(aa+=this.last.x,ia+=this.last.y);var R=m.arcAsBezier(this.last,L[Z],L[Z+1],L[Z+2],
L[Z+3]?1:0,L[Z+4]?1:0,aa,ia);l.forEach(R,function(S){I.push("bezierCurveTo",S)});W&&(this._dashResidue=g(W,this,p,this._dashResidue));this.last.x=aa;this.last.y=ia}this.lastControl={}},_closePath:function(I,N,L,W){I.push("closePath",[]);W&&(this._dashResidue=b(W,this,this.last.x,this.last.y,W[1][0],W[1][1],this._dashResidue));this.lastControl={}}});l.forEach("moveTo lineTo hLineTo vLineTo curveTo smoothCurveTo qCurveTo qSmoothCurveTo arcTo closePath".split(" "),function(I){H(x.Path,I)});x.TextPath=
d("dojox.gfx.canvas.TextPath",[x.Shape,r.TextPath],{_renderShape:function(I){},_setText:function(){},_setFont:function(){}});x.Surface=d("dojox.gfx.canvas.Surface",e.Surface,{constructor:function(){e.Container._init.call(this);this.pendingImageCount=0;this.makeDirty()},destroy:function(){e.Container.clear.call(this,!0);this.inherited(arguments)},setDimensions:function(I,N){this.width=f.normalizedLength(I);this.height=f.normalizedLength(N);if(!this.rawNode)return this;I=!1;this.rawNode.width!=this.width&&
(this.rawNode.width=this.width,I=!0);this.rawNode.height!=this.height&&(this.rawNode.height=this.height,I=!0);I&&this.makeDirty();return this},getDimensions:function(){return this.rawNode?{width:this.rawNode.width,height:this.rawNode.height}:null},_render:function(I){!this.rawNode||!I&&this.pendingImageCount||(I=this.rawNode.getContext("2d"),I.clearRect(0,0,this.rawNode.width,this.rawNode.height),this.render(I),"pendingRender"in this&&(clearTimeout(this.pendingRender),delete this.pendingRender))},
render:function(I){I.save();for(var N=0;N<this.children.length;++N)this.children[N]._render(I);I.restore()},makeDirty:function(){this.pendingImagesCount||"pendingRender"in this||this._batch||(this.pendingRender=setTimeout(B.hitch(this,this._render),0))},downloadImage:function(I,N){var L=B.hitch(this,this.onImageLoad);!this.pendingImageCount++&&"pendingRender"in this&&(clearTimeout(this.pendingRender),delete this.pendingRender);I.onload=L;I.onerror=L;I.onabort=L;I.src=N},onImageLoad:function(){--this.pendingImageCount||
(this.onImagesLoaded(),this._render())},onImagesLoaded:function(){},getEventSource:function(){return null},connect:function(){},disconnect:function(){},on:function(){}});x.createSurface=function(I,N,L){if(!N&&!L){var W=u.position(I);N=N||W.w;L=L||W.h}"number"==typeof N&&(N+="px");"number"==typeof L&&(L+="px");W=new x.Surface;I=t.byId(I);var Z=I.ownerDocument.createElement("canvas");Z.width=f.normalizedLength(N);Z.height=f.normalizedLength(L);I.appendChild(Z);W.rawNode=Z;W._parent=I;return W.surface=
W};var P=e.Container;d={openBatch:function(){++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this._makeDirty();return this},_makeDirty:function(){this._batch||this.surface.makeDirty()},add:function(I){this._makeDirty();return P.add.apply(this,arguments)},remove:function(I,N){this._makeDirty();return P.remove.apply(this,arguments)},clear:function(){this._makeDirty();return P.clear.apply(this,arguments)},getBoundingBox:P.getBoundingBox,_moveChildToFront:function(I){this._makeDirty();
return P._moveChildToFront.apply(this,arguments)},_moveChildToBack:function(I){this._makeDirty();return P._moveChildToBack.apply(this,arguments)}};r={createObject:function(I,N){I=new I;I.surface=this.surface;I.setShape(N);this.add(I);return I}};h(x.Group,d);h(x.Group,e.Creator);h(x.Group,r);h(x.Surface,d);h(x.Surface,e.Creator);h(x.Surface,r);x.fixTarget=function(I,N){return!0};return x})},"dojox/gfx/arc":function(){define(["./_base","dojo/_base/lang","./matrix"],function(f,B,l){function d(m){var a=
Math.cos(m);m=Math.sin(m);var h={x:a+4/3*(1-a),y:m-4/3*a*(1-a)/m};return{s:{x:a,y:-m},c1:{x:h.x,y:-h.y},c2:h,e:{x:a,y:m}}}var c=2*Math.PI,u=Math.PI/4,t=Math.PI/8,e=u+t,r=d(t);return f.arc={unitArcAsBezier:d,curvePI4:r,arcAsBezier:function(m,a,h,q,n,k,g,b){n=!!n;k=!!k;var x=l._degToRad(q);q=a*a;var v=h*h,y=l.multiplyPoint(l.rotate(-x),{x:(m.x-g)/2,y:(m.y-b)/2}),D=y.x*y.x,E=y.y*y.y;q=Math.sqrt((q*v-q*E-v*D)/(q*E+v*D));isNaN(q)&&(q=0);q={x:q*a*y.y/h,y:-q*h*y.x/a};n==k&&(q={x:-q.x,y:-q.y});q=l.multiplyPoint([l.translate((m.x+
g)/2,(m.y+b)/2),l.rotate(x)],q);a=l.normalize([l.translate(q.x,q.y),l.rotate(x),l.scale(a,h)]);q=l.invert(a);m=l.multiplyPoint(q,m);b=l.multiplyPoint(q,g,b);g=Math.atan2(m.y,m.x);q=g-Math.atan2(b.y,b.x);k&&(q=-q);0>q?q+=c:q>c&&(q-=c);h=t;b=r;h=k?h:-h;m=[];for(n=q;0<n;n-=u)n<e&&(h=n/2,b=d(h),h=k?h:-h,n=0),y=l.normalize([a,l.rotate(g+h)]),k?(q=l.multiplyPoint(y,b.c1),x=l.multiplyPoint(y,b.c2),y=l.multiplyPoint(y,b.e)):(q=l.multiplyPoint(y,b.c2),x=l.multiplyPoint(y,b.c1),y=l.multiplyPoint(y,b.s)),m.push([q.x,
q.y,x.x,x.y,y.x,y.y]),g+=2*h;return m}}})},"dojox/gfx/decompose":function(){define(["./_base","dojo/_base/lang","./matrix"],function(f,B,l){function d(r,m){return Math.abs(r-m)<=1E-6*(Math.abs(r)+Math.abs(m))}function c(r,m,a,h){if(!isFinite(r))return a;if(!isFinite(a))return r;m=Math.abs(m);h=Math.abs(h);return(m*r+h*a)/(m+h)}function u(r){r=l.normalize(r);var m=-r.xx-r.yy,a=r.xx*r.yy-r.xy*r.yx,h=Math.sqrt(m*m-4*a);m=-(m+(0>m?-h:h))/2;a/=m;h=r.xy/(m-r.xx);var q=1,n=r.xy/(a-r.xx),k=1;d(m,a)&&(h=1,
n=q=0,k=1);isFinite(h)||(h=1,q=(m-r.xx)/r.xy,isFinite(q)||(h=(m-r.yy)/r.yx,q=1,isFinite(h)||(h=1,q=r.yx/(m-r.yy))));isFinite(n)||(n=1,k=(a-r.xx)/r.xy,isFinite(k)||(n=(a-r.yy)/r.yx,k=1,isFinite(n)||(n=1,k=r.yx/(a-r.yy))));r=Math.sqrt(h*h+q*q);var g=Math.sqrt(n*n+k*k);isFinite(h/=r)||(h=0);isFinite(q/=r)||(q=0);isFinite(n/=g)||(n=0);isFinite(k/=g)||(k=0);return{value1:m,value2:a,vector1:{x:h,y:q},vector2:{x:n,y:k}}}function t(r,m){var a=0>r.xx*r.yy||0<r.xy*r.yx?-1:1,h=m.angle1=(Math.atan2(r.yx,r.yy)+
Math.atan2(-a*r.xy,a*r.xx))/2;a=Math.cos(h);h=Math.sin(h);m.sx=c(r.xx/a,a,-r.xy/h,h);m.sy=c(r.yy/a,a,r.yx/h,h);return m}function e(r,m){var a=0>r.xx*r.yy||0<r.xy*r.yx?-1:1,h=m.angle2=(Math.atan2(a*r.yx,a*r.xx)+Math.atan2(-r.xy,r.yy))/2;a=Math.cos(h);h=Math.sin(h);m.sx=c(r.xx/a,a,r.yx/h,h);m.sy=c(r.yy/a,a,-r.xy/h,h);return m}return f.decompose=function(r){var m=l.normalize(r);r={dx:m.dx,dy:m.dy,sx:1,sy:1,angle1:0,angle2:0};if(d(m.xy,0)&&d(m.yx,0))return B.mixin(r,{sx:m.xx,sy:m.yy});if(d(m.xx*m.yx,
-m.xy*m.yy))return t(m,r);if(d(m.xx*m.xy,-m.yx*m.yy))return e(m,r);var a=new l.Matrix2D(m);var h=B.mixin(a,{dx:0,dy:0,xy:a.yx,yx:a.xy});a=u([m,h]);h=u([h,m]);a=new l.Matrix2D({xx:a.vector1.x,xy:a.vector2.x,yx:a.vector1.y,yy:a.vector2.y});h=new l.Matrix2D({xx:h.vector1.x,xy:h.vector1.y,yx:h.vector2.x,yy:h.vector2.y});m=new l.Matrix2D([l.invert(a),m,l.invert(h)]);t(h,r);m.xx*=r.sx;m.yy*=r.sy;e(a,r);m.xx*=r.sx;m.yy*=r.sy;return B.mixin(r,{sx:m.xx,sy:m.yy})}})},"dojox/gfx/bezierutils":function(){define(["./_base"],
function(f){f=f.bezierutils={};f.tAtLength=function(t,e){var r=0,m=6==t.length,a=0,h=0,q=m?d:u,n=function(k,g){for(var b=0,x=0;x<k.length-2;x+=2)b+=l(k[x],k[x+1],k[x+2],k[x+3]);x=m?l(t[0],t[1],t[4],t[5]):l(t[0],t[1],t[6],t[7]);b-x>g||a+b>e+g?(++h,k=q(k,.5),n(k[0],g),Math.abs(a-e)<=g||n(k[1],g)):(a+=b,r+=1/(1<<h))};e&&n(t,.5);return r};var B=f.computeLength=function(t){for(var e=6==t.length,r=0,m=0;m<t.length-2;m+=2)r+=l(t[m],t[m+1],t[m+2],t[m+3]);m=e?l(t[0],t[1],t[4],t[5]):l(t[0],t[1],t[6],t[7]);
return.1<r-m?(t=e?d(t,.5):c(t,.5),r=B(t[0],e),r+=B(t[1],e)):r},l=f.distance=function(t,e,r,m){return Math.sqrt((r-t)*(r-t)+(m-e)*(m-e))},d=function(t,e){var r=1-e,m=r*r,a=e*e,h=t[0],q=t[1],n=t[2],k=t[3],g=t[4];t=t[5];var b=m*h+2*r*e*n+a*g;m=m*q+2*r*e*k+a*t;return[[h,q,r*h+e*n,r*q+e*k,b,m],[b,m,r*n+e*g,r*k+e*t,g,t]]},c=function(t,e){var r=1-e,m=r*r,a=m*r,h=e*e,q=h*e,n=t[0],k=t[1],g=t[2],b=t[3],x=t[4],v=t[5],y=t[6];t=t[7];var D=a*n+3*m*e*g+3*r*h*x+q*y;a=a*k+3*m*e*b+3*r*h*v+q*t;return[[n,k,r*n+e*g,r*
k+e*b,m*n+2*r*e*g+h*x,m*k+2*r*e*b+h*v,D,a],[D,a,m*g+2*r*e*x+h*y,m*b+2*r*e*v+h*t,r*x+e*y,r*v+e*t,y,t]]},u=f.splitBezierAtT=function(t,e){return 6==t.length?d(t,e):c(t,e)};return f})},"dojox/json/query":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojox","dojo/_base/array"],function(f,B,l){B.getObject("json",!0,l);l.json._slice=function(d,c,u,t){var e=d.length,r=[];u=u||e;c=0>c?Math.max(0,c+e):Math.min(e,c);for(u=0>u?Math.max(0,u+e):Math.min(e,u);c<u;c+=t)r.push(d[c]);return r};l.json._find=
function(d,c){function u(r){c&&(!0!==c||r instanceof Array?r[c]&&t.push(r[c]):t.push(r));for(var m in r){var a=r[m];c?a&&"object"==typeof a&&u(a):t.push(a)}}var t=[];if(c instanceof Array){if(1==c.length)return d[c[0]];for(var e=0;e<c.length;e++)t.push(d[c[e]])}else u(d);return t};l.json._distinctFilter=function(d,c){for(var u=[],t={},e=0,r=d.length;e<r;++e){var m=d[e];c(m,e,d)&&("object"==typeof m&&m?m.__included||(m.__included=!0,u.push(m)):t[m+typeof m]||(t[m+typeof m]=!0,u.push(m)))}e=0;for(r=
u.length;e<r;++e)u[e]&&delete u[e].__included;return u};return l.json.query=function(d,c){function u(h,q,n,k,g,b,x,v){return e[v].match(/[\*\?]/)||"~"==x?"/^"+e[v].substring(1,e[v].length-1).replace(/\\([btnfr\\"'])|([^\w\*\?])/g,"\\$1$2").replace(/([\*\?])/g,"[\\w\\W]$1")+("~"==x?"$/i":"$/")+".test("+q+")":h}var t=0,e=[];d=d.replace(/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'|[\[\]]/g,function(h){t+="["==h?1:"]"==h?-1:0;return"]"==h&&0<t?"`]":'"'==h.charAt(0)||"'"==h.charAt(0)?"`"+(e.push(h)-1):h});var r="";
d.replace(/(\]|\)|push|pop|shift|splice|sort|reverse)\s*\(/,function(){throw Error("Unsafe function call");});d=d.replace(/([^<>=]=)([^=])/g,"$1\x3d$2").replace(/@|(\.\s*)?[a-zA-Z\$_]+(\s*:)?/g,function(h){return"."==h.charAt(0)?h:"@"==h?"$obj":(h.match(/:|^(\$|Math|true|false|null)$/)?"":"$obj.")+h}).replace(/\.?\.?\[(`\]|[^\]])*\]|\?.*|\.\.([\w\$_]+)|\.\*/g,function(h,q,n){return(q=h.match(/^\.?\.?(\[\s*\^?\?|\^?\?|\[\s*==)(.*?)\]?$/))?(n="",h.match(/^\./)&&(r="dojox.json._find("+r,n=",true)"),
r=(q[1].match(/=/)?"dojo.map":q[1].match(/\^/)?"dojox.json._distinctFilter":"dojo.filter")+"("+r,n+",function($obj){return "+q[2]+"})"):(q=h.match(/^\[\s*([\/\\].*)\]/))?".concat().sort(function(a,b){"+q[1].replace(/\s*,?\s*([\/\\])\s*([^,\\\/]+)/g,function(k,g,b){return"var av\x3d "+b.replace(/\$obj/,"a")+",bv\x3d "+b.replace(/\$obj/,"b")+";if(av\x3ebv||bv\x3d\x3dnull){return "+("/"==g?1:-1)+";}\nif(bv\x3eav||av\x3d\x3dnull){return "+("/"==g?-1:1)+";}\n"})+"return 0;})":(q=h.match(/^\[(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)\]/))?
(r="dojox.json._slice("+r,","+(q[1]||0)+","+(q[2]||0)+","+(q[3]||1)+")"):h.match(/^\.\.|\.\*|\[\s*\*\s*\]|,/)?(r="dojox.json._find("+r,("."==h.charAt(1)?",'"+n+"'":h.match(/,/)?","+h:"")+")"):h}).replace(/(\$obj\s*((\.\s*[\w_$]+\s*)|(\[\s*`([0-9]+)\s*`\]))*)(==|~)\s*`([0-9]+)/g,u).replace(/`([0-9]+)\s*(==|~)\s*(\$obj\s*((\.\s*[\w_$]+)|(\[\s*`([0-9]+)\s*`\]))*)/g,function(h,q,n,k,g,b,x,v){return u(h,k,g,b,x,v,n,q)});d=r+("$"==d.charAt(0)?"":"$")+d.replace(/`([0-9]+|\])/g,function(h,q){return"]"==q?
"]":e[q]});for(var m=eval("1\x26\x26function($,$1,$2,$3,$4,$5,$6,$7,$8,$9){var $obj\x3d$;return "+d+"}"),a=0;a<arguments.length-1;a++)arguments[a]=arguments[a+1];return c?m.apply(this,arguments):m}})},"esri/tasks/PrintParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,d){f=f(null,{declaredClass:"esri.tasks.PrintParameters",map:null,template:null,outSpatialReference:null,extraParameters:null});B.setObject("tasks.PrintParameters",f,d);return f})},
"esri/tasks/LegendLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(f,B,l,d){f=f(null,{declaredClass:"esri.tasks.LegendLayer",layerId:null,subLayerIds:null});B.setObject("tasks.LegendLayer",f,d);return f})},"arcgisonline/map/thumbnail/createHiddenMap":function(){define("dojo/on dojo/dom dojo/json dojo/aspect dojo/Deferred dojo/promise/all dojo/dom-construct dojo/_base/lang dojo/_base/array ../../esriGeowConfig esri/arcgis/utils".split(" "),function(f,
B,l,d,c,u,t,e,r,m,a){return function(h,q,n,k){var g=B.byId("hiddenMapDiv");B.byId("hiddenMapDiv")||(g=t.create("div",{id:"hiddenMapDiv",style:{position:"absolute",left:"-1000px",top:"-1000px",width:"200px",height:"130px"}},document.body));t.create("div",{id:"hiddenMap",style:{width:"200px",height:"130px"}},g);g={item:{}};g.item.extent=q;g.itemData=h;a.arcgisUrl=m.restBaseUrl+"content/items";a.createMap(g,"hiddenMap",{mapOptions:{nav:!1},bingMapsKey:window.esriGeowConfig.self.bingKey}).then(function(b){var x=
function(C){var z=new c;C._heatmapManager?d.after(C._heatmapManager,"recalculateHeatmap",function(){z.resolve()}):z.resolve();return z},v=function(C){var z=new c;if(C.updating){"esri.layers.VectorTileLayer"===C.declaredClass&&setTimeout(function(){w&&(w.remove(),z.resolve())},1E4);var w=f(C,"update-end",function(){w.remove();z.resolve()})}else z.resolve();return z},y=function(C){var z=new c;"esri.layers.VectorTileLayer"===C.declaredClass&&setTimeout(function(){w&&(w.remove(),z.resolve())},5E3);var w=
f(C,"update-start",function(){w.remove();v(C).then(function(){z.resolve()})});return z},D=function(C){var z=new c,w=setInterval(e.hitch(this,function(A,G){A.graphics&&A.graphics.length?(clearInterval(w),z.resolve()):10<G[0]?(clearInterval(w),z.resolve()):G[0]+=1},C,[0]),500);return z},E=[];r.forEach(b.map.graphicsLayerIds,function(C){C=b.map.getLayer(C);C.renderer&&"heatmap"===C.renderer.type?E.push(x(C)):"esri.layers.WFSLayer"===C.declaredClass?E.push(D(C)):C.updating&&E.push(v(C))});r.forEach(b.map.layerIds,
function(C){C=b.map.getLayer(C);C.updating?E.push(v(C)):"esri.layers.VectorTileLayer"===C.declaredClass&&E.push(y(C))});E.length?u(E).then(function(C){setTimeout(function(){n(b.map)},1E3)}):n(b.map)},function(b){k&&k(b)})}})},"arcgisonline/map/thumbnail/getExtentWithFeatures":function(){define("dojo/Deferred esri/layers/FeatureLayer esri/layers/StreamLayer esri/SpatialReference arcgisonline/map/core/projectExtent arcgisonline/map/core/getExtentFromCenter arcgisonline/map/core/getScaleForExtent".split(" "),
function(f,B,l,d,c,u,t){return function(e,r,m){function a(){h.resolve(r)}var h=new f;if(!(e.layer instanceof B)||e.layer instanceof l)return h.resolve(r),h;var q=e.layer;e.layers&&(q=e.layers[0]);q.addPlugin("esri/plugins/FeatureLayerStatistics").then(function(){q.statisticsPlugin.getSuggestedScaleRange().then(function(n){if(n.center){var k=u(n.center,1280,n.minScale);if(0<n.relaxedMinScale)for(var g=t(k,200),b=800;g>n.relaxedMinScale&&!(k=u(n.center,b,n.minScale),g=t(k,200),b-=200,0>=b););c(k,new d({wkid:4326}),
function(x){r=[[x[0].xmin,x[0].ymin],[x[0].xmax,x[0].ymax]];a()},a)}else a()},a)},a);return h}})},"esri/layers/StreamLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/array dojo/_base/Color dojo/_base/lang dojo/Deferred dojo/has dojo/io-query dojo/on dojo/aspect ../kernel ../request ../graphic ./FeatureLayer ./StreamMode ./StreamTrackManager ../geometry/jsonUtils ../symbols/SimpleFillSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../renderers/SimpleRenderer ./PurgeOptions".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E){f=f([n],{declaredClass:"esri.layers.StreamLayer",_preventInit:!0,constructor:function(C,z){z=z||{};z.mode&&z.mode!==n.MODE_STREAM||(this._isStream=!0,this.currentMode=this.mode=n.MODE_STREAM,this._mode=new k(this));this.purgeOptions=new E(this,z.purgeOptions||{});this.purgeInterval=z.purgeInterval||0;this._reconnectAttempts=0;this.maxReconnectAttempts=10;this.socket=this._reconnectTimeoutId=null;this._keepLatestQueried=!1;this._keepLatestUrl=null;
this._relatedQueried=!1;this._joinField=this._relatedUrl=null;this._refreshing=!1;this._attemptReconnect=c.hitch(this,this._attemptReconnect);this._purge=c.hitch(this,this._purge);this._processServiceJson=c.hitch(this,this._processServiceJson);if(c.isObject(C)&&C.layerDefinition)this._initFeatureLayer(C,z);else{var w=this;h({url:C,content:c.mixin({f:"json"}),callbackParamName:"callback"}).then(function(A){w._processServiceJson(A,z)},function(A){w._errorHandler(A)})}},_processServiceJson:function(C,
z){var w=this;C.relatedFeatures&&C.relatedFeatures.featuresUrl&&C.relatedFeatures.joinField?(this._relatedUrl=C.relatedFeatures.featuresUrl,this.objectIdField=this._joinField=C.relatedFeatures.joinField,h({url:this._relatedUrl,content:{f:"json"},callbackParamName:"callback"}).then(function(A){A=A.fields||[];var G=l.map(C.fields,function(F){return F.name.toLowerCase()});l.forEach(A,function(F){-1===l.indexOf(G,F.name.toLowerCase())&&C.fields.push(F)});z.resourceInfo=C;w._initFeatureLayer(w._url,z)},
function(A){w.onError({error:A})})):(z.resourceInfo=C,this._initFeatureLayer(this._url,z))},_initLayer:function(C,z){this.inherited(arguments);if(C){var w;if(C.layerDefinition)this.purgeOptions=new E(this,this._params.purgeOptions||{}),this.socketUrl=this._params.socketUrl||C.layerDefinition.socketUrl||void 0;else{if(this._params.socketUrl)this.socketUrl=this._params.socketUrl;else{var A=this._getWebsocketConnectionInfo(C),G=A.urls;G&&G.length?(this._socketUrls=G,this.socketUrl=G[0],this.socketDirection=
"broadcast"===this._params.socketDirection?"broadcast":"subscribe",this.socketUrl+="/"+this.socketDirection,this._websocketToken=A.token,G.length>this.maxReconnectAttempts&&(this.maxReconnectAttempts=G.length)):(this.socketUrl=void 0,A="No web socket urls were retrieved from the Stream Service. Layer will not attempt to connect.","https:"===location.protocol&&(A+=" An insecure web socket connection cannot be made from a secure web page."),this.onError(Error(A)))}if(this._params.filter)try{this._filter=
w=this._makeFilter(this._params.filter)}catch(F){this.onError(Error("Error trying to create filter object: "+F+". Layer will not have filter applied")),this._filter=null}if(this._params.geometryDefinition||this._outFields||this._defnExpr){w=w||{};w.geometry=this._params.geometryDefinition;w.outFields=this._outFields;w.where=this._defnExpr;try{this._filter=w=this._makeFilter(w)}catch(F){this.onError(Error("Error trying to create filter object: "+F+". Layer will not have filter applied")),this._filter=
null}}}this.maximumTrackPoints=this._params.maximumTrackPoints||0===this._params.maximumTrackPoints?this._params.maximumTrackPoints:1;(this._params.refreshRate||0===this._params.refreshRate)&&this._mode&&this._mode._setRefreshRate&&this._mode._setRefreshRate(this._params.refreshRate);this._keepLatestUrl=C.keepLatestArchive?C.keepLatestArchive.featuresUrl:null;C.relatedFeatures&&C.relatedFeatures.featuresUrl&&C.relatedFeatures.joinField&&(this._relatedUrl=C.relatedFeatures.featuresUrl,this.objectIdField=
this._joinField=C.relatedFeatures.joinField);this.objectIdField||this._makeObjectIdField();this._map&&this.socketUrl&&!this._connected&&this.connect()}},_isWebGLCompatible:function(){return!1},_setMap:function(C){var z=this.inherited(arguments),w=this._getRenderer();this.timeInfo&&(this._trackIdField||w&&(w.latestObservationRenderer||w.trackRenderer))&&(this._trackManager=new g(this),this._trackManager.initialize(C));this.socketUrl&&!this._connected&&this._map&&this.connect();return z},_unsetMap:function(C,
z){l.forEach(this._connects,B.disconnect);(this._connected||this._reconnecting||this.socket)&&this.disconnect();this._togglePurgeT();this.inherited(arguments);this._map=null},_suspend:function(){this._togglePurgeT();this.inherited(arguments)},_resume:function(){this.inherited(arguments);this._togglePurgeT(!0)},clear:function(){try{this._mode&&this._mode._clearDrawBuffer&&this._mode._clearDrawBuffer(),this._mode&&this._mode._clearTimeBin&&this._mode._clearTimeBin(),this._mode&&this._mode._clearFeatureMap&&
this._mode._clearFeatureMap(),this._trackManager&&this._trackManager.clearTracks()}catch(C){}this.inherited(arguments);this._trackManager&&this._trackManager.createTracklineContainer()},redraw:function(){this._mode&&this._mode._flushDrawBuffer&&this._mode._flushDrawBuffer();this.inherited(arguments)},setDefinitionExpression:function(C){this.setFilter({where:C})},getDefinitionExpression:function(){if(this._filter)var C=this._filter.where;return C},destroy:function(){this.disconnect();this.inherited(arguments)},
onResume:function(C){this.inherited(arguments)},setGeometryDefinition:function(C){this.setFilter({geometry:C})},getGeometryDefinition:function(){if(this._filter)var C=this._filter.geometry;return C},connect:function(C){var z=new u,w={},A=this._filter,G,F,H=this.socketUrl,J;try{this._connected||this._connecting?z.reject(Error("Cannot start new connection process. Layer is connecting.")):(this._connecting=!0,this._getRelatedFeatures().then(function(){return this._getKeepLatestFeatures()}.bind(this)).then(function(){this._websocketToken&&
(w.token=this._websocketToken);this._map&&this._map.spatialReference&&this.spatialReference&&this._map.spatialReference.wkid!==this.spatialReference.wkid&&(w.outSR=this._map.spatialReference.wkid);if(A)for(F in A)null!==A[F]&&(G="geometry"===F?JSON.stringify(A[F]):A[F],w[F]=G);H+="?"+e.objectToQuery(w);J=this._createConnection(H,C);z.resolve(J)}.bind(this)).otherwise(function(K){z.reject(K)}))}catch(K){C&&(C(K,!1),z.reject(K)),this.onConnectionError({error:K})}return z.promise},disconnect:function(C){var z=
this._refreshing?"Disconnecting as part of layer refresh cycle":"Connection closed from client",w=this._refreshing?!0:!1;this._reconnectTimeoutId&&clearTimeout(this._reconnectTimeoutId);this._refreshing=this._reconnecting=this._connecting=this._connected=!1;this.socket&&this.socket.close();this.onDisconnect({willReconnect:w,message:z});C&&C(null,!0)},setFilter:function(C){if(this._collection)return this.onError("Filter can only be set when the source of the layer is a Stream Service"),!1;try{if(void 0!==
C.outFields){var z=Error("Outfields property cannot be changed after layer is created");this.onFilterChange({filter:this.getFilter(),error:z});return!1}var w=this._makeFilter(C)}catch(A){return z=Error(A),this.onFilterChange({filter:this.getFilter(),error:z}),!1}if(this.socket)C={filter:w},this.socket.send(JSON.stringify(C));else r.once(this,"connect",function(A){this.setFilter(w)});return!0},getFilter:function(){var C=this._filter,z={},w=["geometry","outFields","where"];C&&l.forEach(w,function(A){var G=
C[A];G&&("geometry"===A?G=b.fromJson(G):"outFields"===A&&(G=G.split(",")),z[A]=G)});return z},setMaximumTrackPoints:function(C){if(!C&&0!==C)return!1;this.maximumTrackPoints=C;this._mode.propertyChangeHandler(3)},getUniqueValues:function(C){var z={},w=[];var A=this._getField(C,!0);if(!A)return w;C=A.name;l.forEach(this.graphics||[],function(G){G=(G.attributes||{})[C];void 0===G||z[G]||(z[G]=1,w.push(G))});w.sort(function(G,F){return G<F?-1:G>F?1:0});return w},getLatestObservations:function(){var C=
[];return C=this._trackManager?this._trackManager.getLatestObservations():this.graphics},setPurgeInterval:function(C){var z=this.purgeInterval;this.purgeInterval=C;this._togglePurgeT();C&&this._togglePurgeT(!0);if(z!==C)this.onPurgeIntervalChange();return this},_togglePurgeT:function(C){if(C&&this.purgeInterval){var z=this;clearTimeout(this._purgeT);this._mode&&this._mode._flushDrawBuffer&&(this._purgeT=setTimeout(function(){z.updating||z.suspended||(z._mode._flushDrawBuffer(),z._togglePurgeT(!0))},
6E4*this.purgeInterval))}else this._purgeT&&(clearTimeout(this._purgeT),this._purgeT=null)},onMessage:function(){},onConnect:function(){},onDisconnect:function(){},onFilterChange:function(){},onAttemptReconnect:function(){},onConnectionError:function(){},onPurgeIntervalChange:function(){},_createConnection:function(C,z){var w=this,A=new WebSocket(C);A.onopen=function(){w.socket=A;w._connected=!0;w._connecting=!1;w._reconnecting=!1;w._reconnectAttempts=0;w._bind();w.onConnect();z&&z(null,!0)};A.onclose=
function(G){var F=!0,H=w._connected,J=null;if(w._connected||w._reconnecting){if(G.code){var K="Connection failed: ";if(1001===G.code)K+=G.reason||"Service is going away.",F=!1;else if(4400===G.code)K+=G.reason||"Invalid url parameters. Check filter properties.",F=!1;else if(4404===G.code)K+="Service not found",F=!1;else if(4401===G.code||4403===G.code)K+="Not authorized",F=!1}F&&(w._reconnectAttempts+=1,w._reconnectAttempts>w.maxReconnectAttempts&&(K="Maximum reconnect attempts exceeded",F=!1,H=!0));
w._connected=!1;H&&(K&&(J=Error(K)),w.onDisconnect({error:J,willReconnect:F}));F?w._attemptReconnect():w.socket=null}else w.socket||(J=Error("Could not make connection to service"),w.onConnectionError({error:J})),w.socket=null,w._connected=!1};A.onerror=function(G){};return A},_getKeepLatestFeatures:function(){var C=new u;this._map&&this._keepLatestUrl&&!this._keepLatestQueried&&this._mode._fetchArchive?this._mode._fetchArchive(this._keepLatestUrl).then(function(){C.resolve()}.bind(this)).otherwise(function(z){C.reject(z)}).always(function(){this._keepLatestQueried=
!0}.bind(this)):C.resolve();return C.promise},_getRelatedFeatures:function(){var C=new u;this._map&&this._relatedUrl&&!this._relatedQueried&&this._mode._fetchArchive?this._mode._fetchArchive(this._relatedUrl).then(function(){C.resolve()}.bind(this)).otherwise(function(z){C.reject(z)}).always(function(){this._relatedQueried=!0}.bind(this)):C.resolve();return C.promise},_purge:function(){var C,z=[];if(this.purgeOptions.displayCount&&this.graphics.length>this.purgeOptions.displayCount)for(C=0;C<this.graphics.length-
this.purgeOptions.displayCount;C++){var w=this.graphics[C];z.push(w)}0<z.length&&(this._mode._removeFeatures(z),this._trackManager&&this._trackManager.removeFeatures(z))},_bind:function(){var C=this;this.socket.onmessage=function(z){C._onMessage(JSON.parse(z.data))}},_onMessage:function(C){var z=this;this.onMessage(C);var w={create:function(A){z._create(A)},update:function(A){z._update(A)},"delete":function(A){z._delete(A)}};if(C.type)w[C.type](C.feature);else C.hasOwnProperty("filter")?z._handleFilterMessage(C):
this._create(C)},_create:function(C){function z(G){if(!w._featureHasOID(G,A)){if(!G.geometry)return!1;G.attributes=G.attributes||{};G.attributes[A]=w._nextId++}G=G.declaredClass?G:new q(G);w._mode.drawFeature(G)}var w=this,A=w.objectIdField;C.length?C.forEach(function(G){G&&z(G)}):C&&z(C)},_delete:function(C){var z=this,w=C[z.objectIdField]||C.attributes[z.objectIdField],A=!1;this.graphics.forEach(function(G){G.attributes[z.objectIdField]==w&&(A=G)});A&&this.remove(A)},_update:function(C){var z=this,
w=!1;this.graphics.forEach(function(A){A.attributes[z.objectIdField]==C.attributes[z.objectIdField]&&(w=A)});w&&(C.attributes&&w.setAttributes(C.attributes),C.geometry&&w.setGeometry(b.fromJson(C.geometry)))},_makeFilter:function(C){var z=null;C=C||{};if(void 0!==C.geometry)if(z=z||{},null===C.geometry)z.geometry=null;else{var w="string"===typeof C.geometry?b.fromJson(JSON.parse(C.geometry)):C.geometry.declaredClass?C.geometry:b.fromJson(C.geometry);if(!w||"point"===w.type)throw"Query object contains invalid geometry";
"extent"!==w.type&&(w=w.getExtent());if(!w||0===w.getHeight()&&0===w.getWidth())throw"Invalid filter geometry: Extent cannot have a height and width of 0";z.spatialRel="esriSpatialRelIntersects";z.geometryType="esriGeometryEnvelope";z.geometry=w.toJson()}void 0!==C.where&&(z=z||{},z.where=C.where);if(void 0!==C.outFields&&(z=z||{},C="string"===typeof C.outFields?"*"===C.outFields?null:C.outFields.replace(/,\s+/g,",").split(","):null===C.outFields?null:C.outFields,C=this._makeOutFields(C))){if(C.errors&&
0<C.errors.length)throw"Invalid filter outFields. "+C.errors.join(",");z.outFields=C.fields?C.fields.join(","):null}return z},_makeOutFields:function(C){var z=this,w=[],A=[],G={fields:null};if(!C||0===C.length)return G;l.forEach(C,function(F){if("*"===F)return G;var H=z._getField(F,!0);H?w.push(H.name):A.push("Field named "+F+" not found in schema.")});C=z._getOutFields();l.forEach(C,function(F){z._getField(F)&&-1===l.indexOf(w,F)&&w.push(F)});G.fields=w;G.errors=A;return G},_handleFilterMessage:function(C){C.error?
(C=Error(C.error.join(",")),this.onFilterChange({filter:this.getFilter(),error:C})):(C=C.filter,C.geometry&&"string"===typeof C.geometry&&(C.geometry=JSON.parse(C.geometry)),this._filter=C,this.onFilterChange({filter:this.getFilter()}))},_getWebsocketConnectionInfo:function(C){var z={urls:[]},w,A=[],G=[],F;C.streamUrls&&l.forEach(C.streamUrls,function(K){"ws"===K.transport&&(w=K.urls,z.token=K.token)});if(!w)return z;l.forEach(w,function(K){0===K.lastIndexOf("wss",0)?G.push(K):A.push(K)});C="https:"===
location.protocol||0===this.url.lastIndexOf("https:",0)?G:0===A.length?G:A;if(1<C.length)for(F=0;F<C.length-1;F++){var H=F+Math.floor(Math.random()*(C.length-F));var J=C[H];C[H]=C[F];C[F]=J}z.urls=C;return z},_attemptReconnect:function(){var C=this;this._reconnectTimeoutId=null;C._connected=!1;if(!C._socketUrls)return!1;if(!C._collection&&!C._reconnecting&&C.socket&&C.credential)return C._reconnecting=!0,C._getServiceConnectionMetadata(C._attemptReconnect),!1;C._reconnecting=!0;C.socket=null;if(C._reconnectAttempts>
C.maxReconnectAttempts)return C._reconnecting=!1;C.socketUrl=C._socketUrls[C._reconnectAttempts>C._socketUrls.length-1?C._reconnectAttempts%C._socketUrls.length:C._reconnectAttempts];C.socketUrl+="/"+C.socketDirection;var z=C._randomIntFromInterval(0,1E3);this._reconnectTimeoutId=setTimeout(function(){C.onAttemptReconnect({count:C._reconnectAttempts,url:C.socketUrl});C.connect()},1E3*C._reconnectAttempts+z)},_getServiceConnectionMetadata:function(C){var z=this,w=z._url.path;C="function"===typeof C?
C:null;h({url:w,content:c.mixin({f:"json"},this._url.query),callbackParamName:"callback"}).then(function(A){A=z._getWebsocketConnectionInfo(A);z._websocketToken=A.token;C&&C()},function(A){z.onError(Error(A))})},_setDefaultRenderer:function(){var C=this.geometryType,z=new d([5,112,176,.8]),w=new d([255,255,255]);w=new v(v.STYLE_SOLID,w,1);if("esriGeometryPoint"===C||"esriGeometryMultipoint"===C)var A=new y(y.STYLE_CIRCLE,10,w,z);else if("esriGeometryPolyline"===C)A=new v(v.STYLE_SOLID,z,2);else if("esriGeometryPolygon"===
C||"esriGeometryEnvelope"===C)z=new d([5,112,176,.2]),w=new d([5,112,176,.8]),w=new v(v.STYLE_SOLID,w,1),A=new x(x.STYLE_SOLID,w,z);A&&this.setRenderer(new D(A))},_makeObjectIdField:function(){var C=1,z,w=[];if(!this.objectIdField){var A=this.fields.length;for(z=0;z<A;z++)w.push(this.fields[z].name.toLowerCase());for(;-1!==l.indexOf(w,"objectid_"+C);)C+=1;this.objectIdField="objectid_"+C;this.fields.push({name:"objectid_"+C,type:"esriFieldTypeOID",alias:"objectid_"+C,nullable:!1})}},_featureHasOID:function(C,
z){return C.attributes&&(C.attributes[z]||0===C.attributes[z])},_randomIntFromInterval:function(C,z){return Math.floor(Math.random()*(z-C+1)+C)}});c.setObject("layers.StreamLayer",f,a);return f})},"esri/layers/StreamTrackManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../graphic ../geometry/Point ../geometry/Polyline ./TrackManager".split(" "),function(f,B,l,d,c,u,t,e,r){f=f([r],{declaredClass:"esri.layers._StreamTrackManager",constructor:function(m){this.inherited(arguments);
var a=m.getMap().spatialReference;this.isWebMercator=a.isWebMercator();this.canWrap=a._isWrappable();this.wrapThreshold=this.isWebMercator?2.0037508342788905E7:180},initialize:function(m){this.inherited(arguments)},addFeatures:function(m,a){function h(y,D){var E,C;g[y]||(g[y]=[]);y=g[y];if(0<v){D.length>v&&D.splice(0,D.length-v);var z=D.length+y.length;z>v&&(E=y.splice(0,z-v))}z=D.length;for(C=0;C<z;C+=1)y.push(D[C]);return{deletes:E,adds:D}}var q={},n={},k;if(a)return this.inherited(arguments),q;
var g=this.trackMap;var b=this.layer;var x=b._trackIdField;var v=b.maximumTrackPoints||0;l.forEach(m,function(y){var D=y.attributes[x];y.visible&&(n[D]||(n[D]=[]),n[D].push(y))});for(k in n)n.hasOwnProperty(k)&&(b=h(k,n[k]),q[k]=b);return q},removeFeatures:function(m){var a=[],h=this.layer.objectIdField,q=this.layer._trackIdField;m&&(l.forEach(m,function(n){var k;var g=n.attributes[q];var b=n.attributes[h];if(k=this.trackMap[g])for(n=0;n<k.length;n+=1){var x=k[n];if(x.attributes[h]===b){this.trackMap[g].splice(n,
1);-1===l.indexOf(g)&&a.push(g);break}}},this),0<m.length&&this.refreshTracks(a))},drawTracks:function(m){function a(x){var v=k[x],y=v&&1<v.length,D=h.trackLineMap[x];D&&!y&&(q.remove(D),delete h.trackLineMap[x],D=null);if(!y)return!1;y=[];for(var E=[],C,z=v.length,w=0;w<z;w++)if(C=v[w].geometry){C=C.normalize();var A=C.x,G=0,F=!1;H&&h.canWrap&&(G=A-H.x,Math.abs(G)>h.wrapThreshold&&(F=!0));F?(E.push([h.getWrappedX(A),C.y]),y.push(E.slice(0)),E=[[A,C.y]]):E.push([A,C.y]);var H=new t(A,C.y,g)}1<E.length&&
y.push(E);v={};v[b]=x;if(y.length)if(D){for(var J=D.geometry;J.paths.length;)J.removePath(J.paths.length-1);y.forEach(function(K){J.addPath(K)});D.setGeometry(J)}else D=new u(new e({paths:y,spatialReference:g}),null,v),q.add(D),h.trackLineMap[x]=D}var h=this,q=this.container,n;if(q){var k=this.trackMap;var g=this.map.spatialReference;var b=this.layer._trackIdField;if(m)l.forEach(m,function(x){a(x)});else for(n in k)k.hasOwnProperty(n)&&a(n)}},refreshTracks:function(m){function a(k){var g;k=h[k]||
[];var b=k.length;for(g=0;g<b;g++)q._repaint(k[g],null,!0)}var h=this.trackMap,q=this.layer,n;this.drawTracks(m);if(m)l.forEach(m,function(k){a(k)});else for(n in h)h.hasOwnProperty(n)&&a(n)},getLatestObservations:function(){var m,a=this.trackMap,h=[];for(m in a)if(a.hasOwnProperty(m)){var q=a[m];h.push(q[q.length-1])}return h},destroy:function(){this.inherited(arguments);this.trackLineMap=null},getWrappedX:function(m){var a=this.isWebMercator,h=a?2.0037508342788905E7:180;a=a?-2.0037508342788905E7:
-180;return(0<m?a:h)-((0<m?h:a)-m)}});B.setObject("layers._StreamTrackManager",f,c);return f})},"esri/layers/PurgeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Stateful","dojo/has","../kernel"],function(f,B,l,d,c){f=f([l],{declaredClass:"esri.layers.PurgeOptions",constructor:function(u,t){this.parent=u;for(var e in t)this[e]=t[e]},_displayCountSetter:function(u){this.displayCount=u;this.parent.refresh()}});B.setObject("layers.PurgeOptions",f,c);return f})},"arcgisonline/map/core/projectExtent":function(){define("require exports tslib ../utils/contains esri/geometry/Extent esri/geometry/webMercatorUtils esri/geometry/Polygon esri/tasks/GeometryService".split(" "),
function(f,B,l,d,c,u,t,e){function r(m,a){if(m&&a.xmin>a.xmax){var h=m.valid[1]-a.xmin,q=a.xmax-m.valid[0];h>q?a.xmax=m.valid[1]+q:a.xmin=m.valid[0]-h}}d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);return function(m,a,h,q,n,k){var g=[102113,102100,3857],b=m.spatialReference.wkid;if(b===a.wkid)return h([m],null);if(4326===b&&(0,d.default)(g,a.wkid))return m.ymin=Math.max(m.ymin,-89.99),m.ymax=Math.min(m.ymax,89.99),m=u.default.geographicToWebMercator(m),
n=m.spatialReference._getInfo(),r(n,m),m.spatialReference.wkid=a.wkid,h([m],null);if((0,d.default)(g,b)&&4326===a.wkid)return m=u.default.webMercatorToGeographic(m),n=m.spatialReference._getInfo(),r(n,m),h([m],null);k||(k=new e.default(window.esriGeowConfig.self.helperServices.geometry.url));if((null===n||void 0===n?0:n.wrapAround180)&&"extent"===m.type){var x=m;m=t.default.fromExtent(m)}k.project([m],a,function(v,y){var D;if(!(0<(null===v||void 0===v?void 0:v.length)&&"extent"===(null===(D=v[0])||
void 0===D?void 0:D.type))||isNaN(v[0].xmin)||isNaN(v[0].ymin)||isNaN(v[0].xmax)||isNaN(v[0].ymax)){if(v&&0<v.length&&v[0]&&"point"===v[0].type&&!isNaN(v[0].x)&&!isNaN(v[0].y))return h(v,y);if(x&&"polygon"===v[0].type){if(1===v[0].rings.length)v[0]=new c.default(v[0].getExtent());else{D=(new t.default(v[0].spatialReference.toJson())).addRing(v[0].rings[0]).getExtent();var E=(new t.default(v[0].spatialReference.toJson())).addRing(v[0].rings[1]).getExtent();v[0]=E;v[0].xmin=E.xmin-D.getWidth();v[0].ymin=
Math.min(E.ymin,D.ymin);v[0].ymax=Math.max(E.ymax,D.ymax)}return h(v,y)}if(q)return q()}else return h(v,y)},q)}})},"arcgisonline/map/utils/contains":function(){define(["require","exports"],function(f,B){Object.defineProperty(B,"__esModule",{value:!0});B.default=function(l,d){for(var c=l.length;c--;)if(l[c]===d)return!0;return!1}})},"arcgisonline/map/core/getExtentFromCenter":function(){define(["require","exports","tslib","./getExtentForScale","esri/geometry/Extent"],function(f,B,l,d,c){d=l.__importDefault(d);
c=l.__importDefault(c);return function(u,t,e){u=new c.default(u.x-1,u.y-.5,u.x+1,u.y+.5,u.spatialReference);return(0,d.default)(u,t,e)}})},"arcgisonline/map/core/getExtentForScale":function(){define(["require","exports","tslib","esri/config","esri/WKIDUnitConversion"],function(f,B,l,d,c){d=l.__importDefault(d);c=l.__importDefault(c);return function(u,t,e){var r=20015077/180,m=u.spatialReference,a=null===m||void 0===m?void 0:m.wkid,h=null===m||void 0===m?void 0:m.wkt;m=null;a?m=c.default.values[c.default[a]]:
h&&-1!==h.search(/^PROJCS/i)&&(a=/UNIT\[([^\]]+)\]\]$/i.exec(h),null===a||void 0===a?0:a[1])&&(m=parseFloat(a[1].split(",")[1]));return u.expand(e*t/(39.37*(m||r)*d.default.defaults.screenDPI)/u.getWidth())}})},"arcgisonline/map/thumbnail/getItemData":function(){define(["dojo/Deferred","dojo/_base/lang","arcgisonline/sharing/util"],function(f,B,l){return function(d,c,u){l.request({url:window.esriGeowConfig.restBaseUrl+"content/items/"+d+"/data"},{disableIdentityLookup:!0}).then(B.hitch(this,function(t){if(t&&
(t.wfsInfo||t.wmtsInfo))var e=t;else if(t&&t.layers)e=t.layers;else if(u){u();return}c&&c(e)}),B.hitch(this,function(t){u&&u(t)}))}})},"arcgisonline/map/layer/getServiceInfo":function(){define("dojo/_base/lang dojo/_base/array dojo/topic dojo/Deferred esri/kernel esri/request esri/SpatialReference esri/geometry/Extent arcgisonline/sharing/util arcgisonline/map/core/projectExtent arcgisonline/sharing/dijit/dialog/GeneralDlg".split(" "),function(f,B,l,d,c,u,t,e,r,m,a){var h=window.esriGeowConfig;return function x(n,
k,g,b){var v=function(z,w){clearTimeout(E);l.publish("ServiceAnswerReceived",[]);var A=z.fullExtent;A||(A=z.extent);!A||A.spatialReference&&(A.spatialReference.wkid||A.spatialReference.wkt)||(z.fullExtent=null,A=z.extent=null);(h.allSSL||"https:"==location.protocol)&&z.tileServers&&z.tileServers.length&&B.forEach(z.tileServers,function(G,F){if(r.isHostedService(G)||r.supportsHttps(G))z.tileServers[F]=G.replace("http:","https:")});A?g&&g(z,n,w):z.spatialReference&&(z.spatialReference.wkid||z.spatialReference.wkt)?
(A=new e(-180,-90,180,90,new t({wkid:4326})),m(A,new t(z.spatialReference),f.hitch(this,function(G){z.fullExtent=G[0];z.extent=G[0];g&&g(z,n,w)}),f.hitch(this,function(G,F){b&&(G.details=[],G.details.push("Missing extent and could not project GCS into service spatial reference."),b(G,F))}))):g&&g(z,n,w)},y=function(z,w){clearTimeout(E);l.publish("ServiceAnswerReceived",[]);b&&b(z,w)},D=!1,E=setTimeout(function(){clearTimeout(E);E=null;var z=n.toLowerCase();if(-1===z.indexOf("/arcgis/rest/")&&-1<z.indexOf("/arcgis/"))return n=
n.replace("/arcgis/","/arcgis/rest/").replace("/ArcGIS/","/ArcGIS/rest/"),x(n,k,g,b);c.id.isBusy()?D=!0:k?(a.prototype.statics.getInstance().show({title:c.i18nBundle.generalDlg.waitDlgTitle,message:k}),E=setTimeout(function(){clearTimeout(E);E=null;c.id.isBusy()?D=!0:y("Request timed out.",{args:{url:n}})},45E3)):y("Request timed out.",{args:{url:n}})},1E4),C=n+(-1<n.indexOf("?")?"\x26f\x3djson":"?f\x3djson");u({url:C,callbackParamName:"callback",load:function(z,w){if(E||D)clearTimeout(E),z?z.error&&
""!==z.error?y(z.error,w):v(z,w):y("Request error.",{args:{url:n}})},error:function(z){if(E||D)clearTimeout(E),z&&z.message&&-1<z.message.indexOf("Aborted the Sign-In process")?l.publish("ServiceAnswerReceived",[]):y(z,{args:{url:n}})}})}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromImageryItem":function(){define("require exports tslib esri/IdentityManager esri/request esri/urlUtils".split(" "),function(f,B,l,d,c,u){function t(h,q){return new Promise(function(n,k){return window.require(["esri/layers/ArcGISImageServiceLayer",
"esri/layers/MosaicRule","esri/layers/RasterFunction","esri/renderers/jsonUtils"],function(g,b,x,v){var y;g=new g(h);g.onError(function(){return k(Error("failed to generate thumbnail for service ".concat(h)))});var D=q.layerProperties;D&&((null===(y=D.bandIds)||void 0===y?0:y.length)&&g.setBandIds(D.bandIds,!0),D.mosaicRule&&g.setMosaicRule(new b(D.mosaicRule),!0),D.renderingRule&&g.setRenderingRule(new x(D.renderingRule),!0),D.renderer&&g.setRenderer(v.fromJson(D.renderer),!0));g.getImageUrl(q.extent||
q.serviceInfo.extent,q.size[0],q.size[1],function(E){if(!q.returnDataURL)return n({url:E});(0,c.default)({url:E,content:{},handleAs:"arraybuffer"}).then(function(C){var z=r(C);if(z)return m(C,z);k(Error("failed to generate thumbnail for service ".concat(h)))})})})})}function e(h,q){var n,k,g;return l.__awaiter(this,void 0,void 0,function(){var b,x,v,y,D,E,C,z,w,A,G,F,H,J,K,Q,P,I,N,L,W,Z;return l.__generator(this,function(aa){switch(aa.label){case 0:return b=q.serviceInfo,x=q.size,v=q.query,y=q.layerProperties,
D=q.returnDataURL,E=null!==(n=q.extent)&&void 0!==n?n:b.extent,C=E.xmin,z=E.ymin,w=E.xmax,A=E.ymax,G=E.spatialReference,F="".concat(C,",").concat(z,",").concat(w,",").concat(A),H=G?G.wkid||G.wkt:null,J=b.serviceDataType,K=b.bandCount,Q=2===K&&(null===J||void 0===J?0:J.includes("Vector"))?{rasterFunction:"VectorFieldRenderer",rasterFunctionArguments:{MagnitudeBandID:0,DirectionBandID:1,IsUVComponents:"esriImageServiceDataTypeVector-UV"===J,ReferenceSystem:1,MassFlowAngleRepresentation:0,SymbolTileSize:30,
SymbolTileSizeUnits:100,CalculationMethod:"Vector Average",SymbologyName:"Single Arrow",MinimumMagnitude:1,MaximumMagnitude:-1,MinimumSymbolSize:40,MaximumSymbolSize:80},outputPixelType:"U8",variableName:"Raster"}:null===y||void 0===y?void 0:y.renderingRule,P=(null===y||void 0===y?void 0:y.mosaicRule)&&JSON.stringify(y.mosaicRule),I=D?"image":"json",N=D?"arraybuffer":"json",[4,(0,c.default)({url:"".concat(h,"/exportImage"),content:l.__assign({bbox:F,bboxSR:H,size:x.join(","),bandIds:null===(k=null===
y||void 0===y?void 0:y.bandIds)||void 0===k?void 0:k.join(","),mosaicRule:P,renderingRule:Q&&JSON.stringify(Q),f:I},v),handleAs:N})];case 1:L=aa.sent();if(D){W=r(L);if(!W)throw Error("failed to generate thumbnail for service ".concat(h));return[2,m(L,W)]}(Z=(null===(g=d.default.findCredential(h))||void 0===g?void 0:g.token)||(null===v||void 0===v?void 0:v.token))&&(null===L||void 0===L?0:L.href)&&(L.href+="?token\x3d".concat(Z));return[2,{url:null===L||void 0===L?void 0:L.href}]}})})}function r(h){if(!h||
10>h.byteLength)return null;h=new Uint8Array(h,0,4);return 255===h[0]&&216===h[1]?"jpeg":137===h[0]&&80===h[1]&&78===h[2]&&71===h[3]?"png":null}function m(h,q){h=new Blob([h],{type:"image/".concat(q)});var n=new FileReader;n.readAsDataURL(h);return new Promise(function(k){n.onloadend=function(){k({dataURL:n.result})}})}function a(h){var q,n;"string"===typeof h.extent?(h=h.extent.split(",").map(function(k){return parseFloat(k)}),4===h.length&&(n=[[h[0],h[1]],[h[2],h[3]]])):0<(null===(q=h.extent)||
void 0===q?void 0:q.length)&&(n=h.extent);return(null===n||void 0===n?0:n.length)?{xmin:n[0][0],ymin:n[0][1],xmax:n[1][0],ymax:n[1][1],spatialReference:{wkid:4326}}:null}Object.defineProperty(B,"__esModule",{value:!0});d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);B.default=function(h,q,n){var k,g,b,x,v,y;void 0===n&&(n=!0);return l.__awaiter(this,void 0,void 0,function(){var D,E,C,z,w,A,G,F,H,J,K,Q,P,I,N,L,W,Z,aa;return l.__generator(this,function(ia){switch(ia.label){case 0:return D=
u.default.urlToObject(h.url),E=D.path,C=D.query,(z=h.serviceInfo)&&Object.keys(z).length?[3,2]:[4,(0,c.default)({url:E,content:l.__assign({f:"json"},C)})];case 1:z=ia.sent(),ia.label=2;case 2:if(null===z||void 0===z||!z.bandCount)throw Error("failed to access service info for service: ".concat(E));if(w=null===(k=z.capabilities)||void 0===k?void 0:k.toLowerCase().includes("tilesonly"))throw Error("unsupported thumbnail request for tiled imagery");if(null===(g=h.itemData)||void 0===g)return[3,3];G=
g;return[3,5];case 3:return[4,h.getData()];case 4:G=ia.sent(),ia.label=5;case 5:A=null!==(b=G)&&void 0!==b?b:{};F=A.bandIds;H=A.mosaicRule;J=A.renderingRule;K=null===(v=null===(x=A.layerDefinition)||void 0===x?void 0:x.drawingInfo)||void 0===v?void 0:v.renderer;if((Q=(null===F||void 0===F?void 0:F.length)||H||J||K)||h.isHostedService||!(10.1<=z.currentVersion))return[3,7];P="".concat(E,"/info/thumbnail");return[4,(0,c.default)({url:P,content:l.__assign({},C),handleAs:"arraybuffer"})];case 6:I=ia.sent();
if(N=r(I)){if(n)return[2,m(I,N)];W=(L=(null===(y=d.default.findCredential(E))||void 0===y?void 0:y.token)||(null===C||void 0===C?void 0:C.token))?"".concat(P,"?token\x3d").concat(L):P;return[2,{url:W}]}ia.label=7;case 7:return Z=a(h),aa=Q?{bandIds:F,mosaicRule:H,renderingRule:J,renderer:K}:null,K?[2,t(E,{serviceInfo:z,extent:Z,size:q,layerProperties:aa,query:C,returnDataURL:n})]:[2,e(E,{serviceInfo:z,extent:Z,size:q,layerProperties:aa,query:C,returnDataURL:n})]}})})}})},"arcgisonline/pages/portal/CommentsUtil":function(){define("require exports tslib ./Comment ../../sharing/util dojo/promise/all dojo/Deferred dojo/_base/lang".split(" "),
function(f,B,l,d,c,u,t,e){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);return function(){function r(){}r.fetchComments=function(m,a,h){var q=this,n=new t.default,k=h.item,g=(null===k||void 0===k?void 0:k.itemUrl)+"/comments",b,x=(null===h||void 0===h?void 0:h.parentId)||"none";m=m||(null===h||void 0===h?void 0:h.nextStart)||h.start;var v=h.sortField,y=h.sortOrder;a=a||h.overrideNum||h.num;var D=h.comments;if(-1===m)n.resolve(D);
else{var E={parentId:x,sortField:v,sortOrder:y,start:m,num:a};c.default.request({url:g,content:E}).then(function(C){return q._toPortalComments(k,C)}).then(function(C){b=e.default.mixin(h,C,{num:h.num,comments:[].concat(h.comments||[]).concat(C.comments)});E=C;return E.comments}).then(function(C){return q._getOwnerProfiles(C)}).then(function(C){E.comments=E.comments.map(function(z,w){z.ownerProfile=C[w];return z});n.resolve({commentsInfo:b,comments:b.comments})})}return n};r._toPortalComments=function(m,
a){var h=new t.default,q=m.portal;a.comments=a.comments.map(function(n){return new d.default(l.__assign(l.__assign({},n),{item:m,portal:q}))});h.resolve(a);return h};r._getOwnerProfiles=function(m){m=m.map(function(a){return a.portal.getUserProfile(a.owner)});return(0,u.default)(m)};return r}()})},"arcgisonline/pages/portal/Comment":function(){define("require exports tslib ../pageUtil ../../tsutils/declareDecorator dojo/Deferred dojo/_base/lang dojo/Stateful esri/arcgis/Portal".split(" "),function(f,
B,l,d,c,u,t,e,r){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);return function(){function m(a){this.owner=a.owner||"deletedUser";this.repliesInfo={parentId:this.id,sortField:"created",sortOrder:"desc",start:0,num:100,comments:[],item:this.item};this.comment=d.default.linkify(unescape(a.comment))}m.prototype.postscript=function(){};m.prototype.getReplies=function(a,h){var q=this,n=new u.default,k=window.require("arcgisonline/pages/portal/CommentsUtil");
this.numReplies?k.fetchComments(a,h,this.repliesInfo).then(function(g){q.repliesInfo=t.default.mixin(q.repliesInfo,g.commentsInfo);q.replies=q.repliesInfo.comments;n.resolve(q.replies)}):n.resolve([]);return n};return m=l.__decorate([(0,c.default)(r.default.PortalComment,e.default)],m)}()})},"arcgisonline/tsutils/declareDecorator":function(){define(["require","exports","tslib","dojo/_base/declare"],function(f,B,l,d){Object.defineProperty(B,"__esModule",{value:!0});d=l.__importDefault(d);B.default=
function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];return function(t){return(0,d.default)(c,t.prototype)}}})},"arcgisonline/pages/item/_Info":function(){define("require exports tslib ../../sharing/util ../utils/arrays dojo/i18n!../../nls/arcgisonline ../utils/url".split(" "),function(f,B,l,d,c,u,t){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);return{Unknown:{privileges:[],openIn:[],types:[],attributes:[],classification:"file"},"Feature Service":{defaultOpenText:u.default.itemLinks.openMapViewer,
defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:"is-layer is-2d is-scene-2 is-feature is-data is-desktopPro".split(" "),classification:"layer",hasServiceInfo:!0},"Map Service":{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-scene-2","is-tile","is-desktopPro","is-mapService"],classification:"layer",hasServiceInfo:!0},"Media Layer":{defaultOpenText:u.default.itemLinks.openMapViewerBeta,defaultOpenIcon:"launch",
openIn:["mapViewer"],types:["is-2d"],classification:"layer",hasServiceInfo:!0},"Group Layer":{defaultOpenText:u.default.itemLinks.openMapViewerBeta,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d"],classification:"layer",hasServiceInfo:!0},"Map Image Layer":{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-scene-2","is-desktopPro","is-service","is-mapImage"],classification:"layer",hasServiceInfo:!0},"Image Service":{defaultOpenText:u.default.itemLinks.openMapViewer,
defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-desktopPro","is-service","is-scene-2","is-imageManagement"],classification:"layer",hasServiceInfo:!0},"Scene Service":{defaultOpenText:u.default.itemLinks.openSceneViewer,defaultOpenIcon:"launch",openIn:["sceneViewer"],types:["is-3d","is-service","is-pro"],classification:"layer",hasServiceInfo:!0},"3DTiles Service":{types:["is-tile","is-service"],classification:"layer",hasServiceInfo:!0},Table:{defaultOpenText:u.default.itemLinks.openMapViewer,
defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-table","is-data","is-desktopPro"],classification:"layer",hasServiceInfo:!0},"Feature Collection":{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-featureCollection","is-data","is-publish","is-views","is-pro"],classification:"layer"},"Route Layer":{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-featureCollection","is-publish",
"is-views"],classification:"layer"},"Geocoding Service":{types:["is-service"],classification:"layer"},"Geoenrichment Service":{types:["is-service"],classification:"layer"},"Network Analysis Service":{types:["is-service"],classification:"layer"},"Globe Service":{types:["is-desktop"],classification:"layer",openLyr:!0},"Geoprocessing Service":{types:["is-desktop","is-service"],classification:"layer"},Tool:{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],
types:["is-2d","is-desktop","is-service","is-tool"],classification:"layer",hasServiceInfo:!0},"Geodata Service":{types:["is-service"],classification:"layer"},"Geometry Service":{classification:"layer"},"Workflow Manager Service":{types:["is-service"],classification:"layer"},"Stream Service":{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d","is-service","is-streamLayer","is-pro"],classification:"layer",hasServiceInfo:!0},Feed:{defaultOpenText:u.default.itemLinks.openMapViewer,
defaultOpenIcon:"launch",openIn:["mapViewer","iotFeed"],types:["is-2d","is-service","is-feedLayer","is-pro"],classification:"layer",hasServiceInfo:!0},"GeoBIM Project":{defaultOpenText:u.default.itemLinks.openGeoBIM,defaultOpenIcon:"launch",openIn:["geoBIM"],types:["is-geoBIM"]},"GeoBIM Application":{defaultOpenText:u.default.itemLinks.openGeoBIM,defaultOpenIcon:"launch",openIn:["geoBIM"],types:["is-geoBIM"]},"Knowledge Graph":{defaultOpenText:u.default.itemLinks.openKnowledgeStudio,openIn:["knowledgeStudio"],
types:["is-service","is-knowledge-studio"],classification:"layer",hasServiceInfo:!0},"Big Data Analytic":{defaultOpenText:u.default.itemLinks.openAnalyticsIoT,defaultOpenIcon:"launch",openIn:["iotViewer"],types:["is-bigDataAnalytic"],classification:"app"},"Real Time Analytic":{defaultOpenText:u.default.itemLinks.openAnalyticsIoT,defaultOpenIcon:"launch",openIn:["iotViewer"],types:["is-realTimeAnalytic"],classification:"app"},WMS:{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",
openIn:["mapViewer","sceneViewer"],types:["is-2d","is-desktopPro","is-scene-2"],classification:"layer"},WFS:{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-desktopPro","is-scene-2"],classification:"layer"},OGCFeatureServer:{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d"],classification:"layer"},WMTS:{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",
openIn:["mapViewer","sceneViewer"],types:["is-2d","is-desktopPro","is-scene-2"],classification:"layer"},KML:{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d","is-desktopPro"],classification:"layer"},"Elevation Layer":{defaultOpenText:u.default.itemLinks.openSceneViewer,defaultOpenIcon:"launch",openIn:["sceneViewer"],types:["is-3d"],classification:"layer",hasServiceInfo:!0},"Vector Tile Service":{defaultOpenText:u.default.itemLinks.openMapViewer,
defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer","viewStyle","downloadStyle"],types:["is-vectorTile","is-service","is-scene-2","is-pro"],classification:"layer",hasServiceInfo:!0,hasViewStyle:!0},"Relational Database Connection":{classification:"layer"},Markup:{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-featureCollection","is-views"],classification:"layer"},"Video Service":{defaultOpenText:u.default.itemLinks.openExcalibur,defaultOpenIcon:"launch",
openIn:["excaliburMediaViewer"],types:["is-excaliburMedia"],classification:"layer"},"Web Map":{defaultOpenText:u.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-map","is-desktopPro"],classification:"map",openPkg:!0},"Web Scene":{defaultOpenText:u.default.itemLinks.openSceneViewer,defaultOpenIcon:"launch",openIn:["sceneViewer"],types:["is-3d","is-scene","is-pro"],classification:"map"},"3D Web Scene":{defaultOpenText:u.default.itemLinks.openSceneViewer,defaultOpenIcon:"launch",
openIn:["sceneViewer"],types:["is-3d"],classification:"map"},"Web Mapping Application":{defaultOpenText:u.default.itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp","downloadAttachment"],types:["is-app","is-web"],classification:"app",hasItemData:!0},"Hub Initiative":{defaultOpenText:u.default.itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Site Initiative":{defaultOpenText:u.default.itemLinks.viewApp,
defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Hub Site Application":{defaultOpenText:u.default.itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Site Application":{defaultOpenText:u.default.itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Hub Event":{defaultOpenText:u.default.itemLinks.viewInHub,
defaultOpenIcon:"launch",openIn:["hubEventViewer"],types:["is-hubEvent"],classification:"app"},"Site Page":{defaultOpenText:u.default.itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},Application:{defaultOpenText:u.default.itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer"],classification:"app",types:["is-app"]},"Mobile Application":{defaultOpenText:u.default.itemLinks.getApp,defaultOpenIcon:"launch",openIn:["appViewer",
"downloadAttachment"],types:["is-mobile-app","is-mobile"],classification:"app"},"Desktop Application":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",openIn:["downloadAttachment"],types:["is-file","is-update","is-platform"],classification:"app"},"Native Application":{classification:"app"},"Workforce Project":{defaultOpenText:u.default.itemLinks.openWorkforce,defaultOpenIcon:"launch",openIn:["workforceViewer"],types:["is-workforceProject"],classification:"app",hasItemData:!0},
Workflow:{defaultOpenText:u.default.itemLinks.openWorkflow,defaultOpenIcon:"launch",openIn:["workflowViewer"],types:["is-workflow","is-pro"],classification:"app",hasItemData:!0},Form:{defaultOpenText:u.default.itemLinks.openSurvey123,defaultOpenIcon:"launch",openIn:["surveyViewer"],classification:"app"},"Insights Workbook":{defaultOpenText:u.default.itemLinks.openInsights,defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights"],classification:"app"},"Insights Data Engineering Workbook":{defaultOpenText:u.default.itemLinks.openInsights,
defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights"],classification:"app"},"Insights Page":{defaultOpenText:u.default.itemLinks.openInsights,defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights","is-insightsPage"],classification:"app"},"Insights Model":{defaultOpenText:u.default.itemLinks.openInsights,defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights","is-insightsModel"],classification:"app"},"Insights Data Engineering Model":{defaultOpenText:u.default.itemLinks.openInsights,
defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights","is-insightsModel"],classification:"app"},"Insights Theme":{defaultOpenText:u.default.itemLinks.openInsights,defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights","is-insightsTheme"],classification:"app"},"Ortho Mapping Project":{defaultOpenText:u.default.itemLinks.openOrthoMaker,defaultOpenIcon:"launch",openIn:["orthoMaker"],types:["is-orthoMaker"],classification:"app"},Mission:{defaultOpenText:u.default.itemLinks.openMission,
defaultOpenIcon:"launch",openIn:["missionViewer"],types:["is-mission"],classification:"app"},"Hub Initiative Template":{defaultOpenText:u.default.itemLinks.openHubInitiative,defaultOpenIcon:"launch",openIn:["hubInitiative"],types:["is-hubInitiative"],classification:"app"},"Hub Project":{defaultOpenText:u.default.itemLinks.openHubInitiative,defaultOpenIcon:"launch",openIn:["hubProject"],types:["is-hubProject"],classification:"app"},"QuickCapture Project":{types:["is-quickCaptureProject"],classification:"app"},
Solution:{classification:"solution",hasItemData:!0},"Deep Learning Studio Project":{defaultOpenText:u.default.itemLinks.openGeoAIStudio,defaultOpenIcon:"launch",openIn:["geoAIStudioUrlViewer"],types:["is-geoAIStudioProject"],classification:"app"},StoryMap:{classification:"app",types:["is-storymap"]},Notebook:{defaultOpenText:u.default.itemLinks.openNotebook,defaultOpenIcon:"launch",openIn:["notebookViewer"],types:["is-notebook","is-download"],classification:"notebook"},"Data Store":{types:["is-data-store"],
classification:"data store"},"Excalibur Imagery Project":{defaultOpenText:u.default.itemLinks.openExcalibur,defaultOpenIcon:"launch",openIn:["excaliburViewer"],types:["is-excaliburProject"],classification:"app"},"Urban Model":{defaultOpenText:u.default.itemLinks.openUrbanModel,defaultOpenIcon:"launch",openIn:["urbanViewer"],types:["is-urbanModel"],classification:"app"},"Web Experience":{defaultOpenText:u.default.itemLinks.view,defaultOpenIcon:"launch",openIn:["webExperienceViewer"],types:["is-webExperience"],
classification:"app"},"Web Experience Template":{defaultOpenText:u.default.itemLinks.view,defaultOpenIcon:"launch",openIn:["webExperienceViewer"],types:["is-webExperienceTemplate"],classification:"app"},"360 VR Experience":{defaultOpenText:u.default.itemLinks.openVRExperience,defaultOpenIcon:"launch",openIn:["vrExperienceViewer"],types:["is-vrExperience","is-file","is-update"],classification:"app"},"API Key":{openIn:[],types:[],classification:"app"},CSV:{defaultOpenText:u.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature","is-documentUrl"],classification:"file"},Shapefile:{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature"],classification:"file"},"File Geodatabase":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature"],classification:"file"},GeoJSON:{defaultOpenText:u.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature"],classification:"file"},"Service Definition":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature","is-tile"],classification:"file"},"3DTiles Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-publish","is-tile"],classification:"file"},"Tile Package":{defaultOpenText:u.default.itemLinks.openArcMap,
defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-tile","is-desktopPro"],classification:"file",openPkg:!0},"Compact Tile Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-tile","is-compact"],classification:"file",openPkg:!0},"Scene Layer Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-scene-package"],classification:"file"},
"Vector Tile Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-vector-tile","is-desktop"],classification:"file",openPkg:!0},"Deep Learning Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file",openPkg:!0},"Esri Classifier Definition":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],
classification:"file",openPkg:!0},"Pro Report Template":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},"Image Collection":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-image-collection"],classification:"file"},Layout:{defaultOpenText:u.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file",openData:!0},
"Desktop Add In":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openData:!0},"ArcGIS Pro Add In":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},GML:{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},"Explorer Add In":{types:["is-explorer","is-update"],classification:"file"},
"Operations Dashboard Add In":{types:["is-views"],classification:"file",isRetired:!0},"Survey123 Add In":{types:["is-file","is-update"],classification:"file"},"Operations Dashboard Extension":{types:["is-views"],classification:"file",isRetired:!0},"AppBuilder Extension":{types:["is-views"],classification:"file"},"AppBuilder Widget Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Windows Viewer Add In":{types:["is-file",
"is-desktop","is-update"],classification:"file",openData:!0},"ArcGIS Pro Configuration":{types:["is-file","is-update"],classification:"file"},"Globe Document":{types:["is-desktop","is-update"],classification:"file",openData:!0},"Map Document":{types:["is-desktop","is-update","is-views"],classification:"file",openData:!0},"Pro Map":{defaultOpenText:u.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file"},"Published Map":{types:["is-desktop",
"is-update","is-views"],classification:"file",openData:!0},"Scene Document":{types:["is-desktop","is-update","is-views"],classification:"file",openData:!0},"CityEngine Web Scene":{defaultOpenText:u.default.itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["cityEngineViewer"],types:["is-city-engine","is-download","is-update"],classification:"file"},"Desktop Style":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Geoprocessing Sample":{defaultOpenText:u.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Task File":{defaultOpenText:u.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file"},Layer:{defaultOpenText:u.default.itemLinks.openArcMap,types:["is-update","is-desktopPro"],classification:"file",openData:!0},"Pro Layer":{defaultOpenText:u.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-pro","is-download","is-update"],classification:"file"},"Pro Report":{defaultOpenText:u.default.itemLinks.openPro,
defaultOpenIcon:"launch",types:["is-pro","is-download","is-update"],classification:"file"},Style:{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},"Operation View":{types:["is-operationView","is-views"],isRetired:!0,classification:"file"},Dashboard:{defaultOpenText:u.default.itemLinks.dashboardView,openIn:["dashboard"],types:["is-dashboard","is-views"],classification:"file"},"Geoprocessing Package":{defaultOpenText:u.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openPkg:!0},"Layer Package":{defaultOpenText:u.default.itemLinks.openArcMap,defaultOpenIcon:"download-to",types:["is-file","is-desktopPro","is-update"],classification:"file",openData:!0},"Pro Layer Package":{defaultOpenText:u.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-pro","is-update"],classification:"file"},"Locator Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",
types:["is-file","is-desktop","is-update"],classification:"file",openPkg:!0},"Map Package":{defaultOpenText:u.default.itemLinks.openArcMap,defaultOpenIcon:"download-to",types:["is-desktopPro","is-file","is-download","is-update"],classification:"file",openData:!0},"Pro Map Package":{defaultOpenText:u.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-pro","is-download","is-update"],classification:"file"},"Mobile Basemap Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",
types:["is-file","is-update"],classification:"file"},"Windows Mobile Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Toolbox Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openPkg:!0},"ArcPad Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],
classification:"file"},"Basemap Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Mobile Map Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Mobile Scene Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Project Package":{defaultOpenText:u.default.itemLinks.openPro,
defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file"},"Pro Project":{defaultOpenText:u.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-pro"],classification:"file"},"Data Pipeline":{defaultOpenText:u.default.itemLinks.openDataPipelines,openIn:["dataPipeline"],types:["is-data-pipeline"]},"Knowledge Studio Project":{defaultOpenText:u.default.itemLinks.openKnowledgeStudio,openIn:["knowledgeStudio"],types:["is-knowledge-studio"]},"Insights Workbook Package":{defaultOpenText:u.default.itemLinks.download,
defaultOpenIcon:"launch",types:["is-file","is-update"],classification:"file"},"Apache Parquet":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"launch",types:["is-file"],classification:"file"},"Rule Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Window Mobile Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},
"Workflow Manager Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},GeoPackage:{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish"],classification:"file"},"Export Package":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Desktop Application Template":{defaultOpenText:u.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Native Application Template":{classification:"file"},"Native Application Installer":{types:["is-file","is-update"],classification:"file"},"Application Configuration":{classification:"file"},"Viewer Configuration":{classification:"file"},"Windows Viewer Configuration":{classification:"file"},"Map Template":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},
"Project Template":{defaultOpenText:u.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file"},"Raster function template":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-download"],classification:"file"},"Feature Collection Template":{classification:"file"},"Layer Template":{classification:"file"},"Administrative Report":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",
types:["is-file"],classification:"file"},"Report Template":{classification:"file"},"Color Set":{classification:"file"},"Explorer Layer":{types:["is-explorer","is-update","is-views"],classification:"file"},"Explorer Map":{types:["is-explorer","is-update","is-views"],classification:"file"},"Symbol Set":{classification:"file"},"Document Link":{defaultOpenText:u.default.itemLinks.open,defaultOpenIcon:"launch",openIn:["appViewer"],types:["is-link","is-documentUrl","is-views"],classification:"file"},PDF:{defaultOpenText:u.default.itemLinks.open,
defaultOpenIcon:"launch",types:["is-dataUrl","is-pdf","is-update","is-documentUrl"],classification:"file"},"CAD Drawing":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"CSV Collection":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},Image:{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file",
"is-update","is-documentUrl"],classification:"file"},"KML Collection":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Code Attachment":{types:["is-file","is-update"],classification:"file"},"Code Sample":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Earth Configuration":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",
types:["is-file","is-update"],classification:"file"},"iWork Keynote":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"iWork Numbers":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"iWork Pages":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl",
"is-file","is-update","is-documentUrl"],classification:"file"},"Microsoft Excel":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:"is-publish is-feature is-dataUrl is-file is-update is-documentUrl".split(" "),classification:"file"},"Microsoft Powerpoint":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Microsoft Word":{defaultOpenText:u.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Visio Document":{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Statistical Data Collection":{types:[],classification:"file"},netCDF:{defaultOpenText:u.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},"Link Chart":{defaultOpenText:u.default.itemLinks.openPro,
defaultOpenIcon:"launch",types:["is-linkChart","is-pro"],classification:"app"},filePath:"js/arcgisonline/img/item-types/",computeFileName:function(e){var r,m,a,h,q,n,k="Web Mapping Application"===e.type&&(null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("configurableApp"));r=null===(m=null===e||void 0===e?void 0:e.iconUrl)||void 0===m?void 0:m.split("/").pop();"featureshosted16.png"===r&&(r="features16.png");e.isUtilityNetwork&&(r="utilitynetwork16.png");k&&(r="instantapps16.png");"Form"===
e.type&&(null===(a=e.typeKeywords)||void 0===a?0:a.includes("Survey123"))&&(r="survey16.png");"Data Store"===e.type&&(r="datastore16.png");c.default.includes(e.typeKeywords,"storymapcollection")&&(r="storymapcollection16.png");if("notebook code snippets"===(null===(h=e.type)||void 0===h?void 0:h.toLowerCase())||"notebook code snippet library"===(null===(q=e.type)||void 0===q?void 0:q.toLowerCase()))r="codeSnippet16.svg";"media layer"===(null===(n=e.type)||void 0===n?void 0:n.toLowerCase())&&(r="medialayer16.svg");
return r},computeSvgIconUrl:function(e,r,m){return e?"".concat(this.filePath).concat(e.replace("16.png","".concat(m,".svg"))):r.iconUrl},getSvgIconUrl:function(e,r){var m=this.computeFileName(e);return this.computeSvgIconUrl(m,e,r)},getItemInfo:function(e){var r,m,a,h,q,n,k,g,b,x,v=this[e.displayName]?e.displayName:e.type,y=!!e.origin,D=this[e.type],E="Web Mapping Application"===e.type&&(null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("configurableApp"));"GeoJson"===e.type&&(e.type="GeoJSON");
r=this.computeFileName(e);e.svgIconUrl16=this.computeSvgIconUrl(r,e,"16");e.svgIconUrl32=this.computeSvgIconUrl(r,e,"32");this[e.displayName]&&(D=this[e.displayName]);D=l.__assign({privileges:[],openIn:[],types:["is-views"],attributes:[],classification:"file"},D);"Feature Collection"===e.type&&c.default.includes(e.typeKeywords,"Table")&&(D.types=c.default.filterOut(D.types,["is-data"]));if("Feature Service"===e.type){r=["is-data","is-layer"];if(c.default.includes(e.typeKeywords,"Multipatch")||c.default.includes(e.typeKeywords,
"HasOnlyMultipatchGeometries"))r=l.__spreadArray(l.__spreadArray([],r,!0),["is-scene-2"],!1);D.types=c.default.filterOut(D.types,r);c.default.includes(e.typeKeywords,"EditExtensionIndoorsSpaces")&&(D.displayName="Indoors Spaces Feature Layer");c.default.includes(e.typeKeywords,"ArcgisWorkflowManager")&&(c.default.includes(e.typeKeywords,"View Service")&&(D.displayName="Workflow View"),D.displayName="Workflow Layer");c.default.includes(e.typeKeywords,"ArcgisWorkflowJobLocation")&&c.default.includes(e.typeKeywords,
"View Service")&&(D.displayName="Workflow Job Location View")}e.isUtilityNetwork&&(r=(e.canUpdate||e.canDelete)&&e.isHostedService?", ".concat(u.default.viewsWidget.hostedData):"",D.displayName="".concat(e.displayName," (").concat(u.default.itemProperties.utilityNetwork).concat(r,")"));"Application"!==e.type||e.url||(D.openIn=[],D.defaultOpenText=null);r="Desktop Add In;Globe Document;Map Document;Published Map;Scene Document;Geoprocessing Package;Geoprocessing Service;Globe Service;Locator Package".split(";");
d.default.couldHaveArcGISDesktop()&&-1<r.indexOf(v)&&(D.defaultOpenText=c.default.includes(e.types,"is-desktopPro")?u.default.itemLinks.openArcMap:u.default.itemLinks.openDesktop,D.defaultOpenIcon="launch");"Layer"===e.type&&c.default.includes(e.typeKeywords,"lyrx")&&(D=l.__assign(l.__assign({},D),this["Pro Layer"]));"Layer Package"===e.type&&c.default.includes(e.typeKeywords,"lpkx")&&(D=l.__assign(l.__assign({},D),this["Pro Layer Package"]));"Map Package"===e.type&&c.default.includes(e.typeKeywords,
"mpkx")&&(D=l.__assign(l.__assign({},D),this["Pro Map Package"]));"Compact Tile Package"===e.type&&(e.type="Tile Package");"Dashboard"===e.type&&d.default._isOperationsViewSupportedBrowser(!0)&&(D.types.push("is-browser"),e.isSupportedBrowser=!0);D.types=c.default.concatUnique(D.types,"public"===e.access?["is-public"]:["is-not-public"]);v="Tool"===v&&e.typeKeywords.includes("Notebook Web Tool");if(!d.default.couldHaveArcGISDesktop()||v)D.types=D.types.filter(function(C){return"is-desktop"!==C&&"is-desktopPro"!==
C});v=null===(a=null===(m=e.portalUser)||void 0===m?void 0:m.userRole)||void 0===a?void 0:a.canUpdateOrgItems();if("StoryMap"===e.type){if(m=c.default.includes(e.typeKeywords,"storymapcollection"))D.displayName="StoryMap Collection";if(a=c.default.includes(e.typeKeywords,"storymapbriefing"))D.displayName="StoryMap Briefing",e.svgIconUrl16=null===(h=e.svgIconUrl16)||void 0===h?void 0:h.replace("storymap","storymapbriefing"),e.svgIconUrl32=null===(q=e.svgIconUrl32)||void 0===q?void 0:q.replace("storymap",
"storymapbriefing");h=c.default.includes(e.typeKeywords,"smstatusdraft");q=e.isOwner||e.canUpdate&&(e.isAdmin||v);r=!q||!h||y;D.types.push(m?"is-storymap-collection":a?"is-storymap-briefing":"is-storymap-item");r&&(D.openIn=["storyMapViewer"],D.defaultOpenText=u.default.itemLinks[m?"viewStorymapCollection":a?"viewBriefing":"viewStorymap"],D.defaultOpenIcon="launch");q&&!y&&(D.types.push("is-editable-storymap"),D.openIn=D.openIn||[],D.openIn.push("configureStoryMap"),r||(D.defaultOpenText=u.default.itemLinks[m?
"editStorymapCollection":a?"editBriefing":"editStorymap"],D.defaultOpenIcon="launch"));h||D.types.push("is-published-storymap")}"StoryMap Theme"===e.type&&(h=c.default.includes(e.typeKeywords,"smstatusdraft"),!h&&(null===(k=null===(n=e.portalUser)||void 0===n?void 0:n.userRole)||void 0===k?0:k.canCreateItem())&&D.types.push("is-published-storymap-theme"),e.isOwner||e.canUpdate&&(e.isAdmin||v))&&(D.openIn=["configureStoryMapTheme"],D.types.push("is-editable-storymap-theme"));"Web Experience"===e.type&&
(c.default.includes(e.typeKeywords,"status: Published")||c.default.includes(e.typeKeywords,"status: Changed"))&&D.types.push("is-published-webExperience");"Web Experience Template"===e.type&&(c.default.includes(e.typeKeywords,"status: Published")||c.default.includes(e.typeKeywords,"status: Changed"))&&D.types.push("is-published-webExperienceTemplate");"Web Mapping Application"===e.type&&(c.default.includes(e.typeKeywords,"configurableApp")&&(e.isOwner||e.isOwnedByMyOrg&&(e.isAdmin||v))&&D.types.push("can-configure"),
e.url=(0,t.redirectExternalAppURL)(e,e.url));"Web Map"===e.type&&(n=e.portalUser,k=e.isOwner||e.isAdmin,(null===(g=null===n||void 0===n?void 0:n.userRole)||void 0===g?0:g.canCreateItem())&&(null===n||void 0===n?0:n.isOrgUser)&&k&&(D.openIn.push("fieldMaps"),D.types.push("is-fieldMaps")));"Image Service"!==e.type||c.default.includes(e.typeKeywords,"Managed Image Collection")||(D.types=D.types.filter(function(C){return"is-imageManagement"!==C}));e.canOpenInNewMapViewer&&(D.defaultOpenText="modern"===
e.portal.defaultMapViewer?u.default.itemLinks.openMapViewerBeta:u.default.itemLinks.openMapViewer,D.types.push("can-openInNewMapViewer"));"KML"===e.type&&e.name&&!e.url&&D.types.push("is-download");-1<e.type.indexOf("GeoBIM")&&(null===(b=e.portal)||void 0===b||!b.canCreateGeoBIM)&&(D={privileges:[],openIn:[],types:["is-views"],attributes:[],classification:"file"});"Group Layer"===e.type&&(null===(x=e.typeKeywords)||void 0===x?0:x.includes("Scene"))&&(D.openIn=[]);E&&(D.displayName=u.default.items.instantApp);
g=(null===D||void 0===D?void 0:D.displayName)||e.displayName;e.sentenceCaseDisplayName={CSV:"CSV",GeoJson:"GeoJson",JSON:"JSON","Tile Package":"Tile package","Vector Tile Package":"Vector tile package","Feature Service":"Feature service","Feature Layer":"Feature layer","Service Definition":"Service definition","Scene Package":"Scene layer package","Desktop Application Template":"Desktop application template","Microsoft Excel":"Microsoft Excel",Shapefile:"Shapefile","File Geodatabase":"File geodatabase",
"Map Template":"Map template","Geoprocessing Sample":"Geoprocessing sample","Code Sample":"Code sample","ArcPad Package":"ArcPad package","CAD Drawing":"CAD drawing","CSV Collection":"CSV collection","KML Collection":"KML collection","AppBuilder Widget Package":"AppBuilder widget package","Photos with Locations":"Photos with locations","Image Collection":"Image collection","iWork Pages":"iWork Pages","iWork Numbers":"iWork Numbers","iWork Keynote":"iWork Keynote","Deep Learning Package":"Deep learning package",
GML:"GML",Application:"Application","Google Sheets":"Google Sheets","Tile Layer":"Tile layer","Scene Layer":"Scene layer"}[g]||g||e.type;return D}}})},"arcgisonline/pages/utils/url":function(){define(["require","exports","tslib","../utils/arrays"],function(f,B,l,d){Object.defineProperty(B,"__esModule",{value:!0});B.redirectExternalAppURL=B.sanitizeServerURL=void 0;d=l.__importDefault(d);B.sanitizeServerURL=function(c){c=c||"";var u=c.split("/"),t=u.indexOf("FeatureServer");0<t&&(c=t-1,u.splice(c,
1,u[c].replace(/:/g,"")),c=u.join("/"));return c};B.redirectExternalAppURL=function(c,u,t){var e=["Web Mapping Application","Dashboard"],r=d.default.find([{org:".mapsdevext.arcgis.com",www:"devext.arcgis.com"},{org:".maps.arcgis.com",www:"www.arcgis.com"},{org:".mapsqa.arcgis.com",www:"qaext.arcgis.com"}],function(m){return-1<(null===u||void 0===u?void 0:u.indexOf(m.org))});if(!c.portalUser&&"self"!==c.contentOrigin&&"public"===c.access&&(t||-1<e.indexOf(c.type))&&u){if(0===u.indexOf("/apps/"))return"https://".concat(c.portal.portalHostname).concat(u);
if(r)return c=u.split(r.org),c=c[c.length-1],"https://".concat(r.www).concat(c)}return u}})},"arcgisonline/pages/utils/item":function(){define("require exports tslib ../utils/arrays ../pageUtil ../../sharing/util ../../esriGeowConfig dojo/string dojo/Deferred dojo/promise/all dojo/i18n!../../nls/arcgisonline dojo/text!../dijit/Card/badges/authoritative.html dojo/text!../dijit/Card/badges/deprecated.html dojo/text!../dijit/Card/badges/solution.html dojo/text!../dijit/Card/badges/living-atlas.html dojo/text!../dijit/Card/badges/marketplace.html dojo/text!../dijit/Card/badges/open-data.html dojo/text!../dijit/Card/badges/premium.html dojo/text!../dijit/Card/badges/retired.html dojo/text!../dijit/Card/badges/registered.html dojo/text!../dijit/Card/badges/public-data-collection.html dojo/text!../dijit/Card/badges/subscriber.html dojo/text!../dijit/Card/badges/collaboration.html".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E,C){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);q=l.__importDefault(q);n=l.__importDefault(n);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);x=l.__importDefault(x);v=l.__importDefault(v);y=l.__importDefault(y);D=l.__importDefault(D);E=l.__importDefault(E);C=l.__importDefault(C);
return function(){function z(){}z.getBadges=function(w,A,G,F){var H,J,K;F=null!==F&&void 0!==F?F:!0;var Q=[],P=[],I={i18n:a.default,hideText:A?"":"hide",tooltipClass:"tooltip tooltip-bottom-left tooltip-multiline"};A=A?"":"Labeled";var N=w.groupDesignations&&w.groupDesignations.split(", "),L=null===(H=w.portal)||void 0===H?void 0:H.isPortal;"org_authoritative"===w.contentStatus&&(I.tooltipLabel=a.default.badges["authoritativeTooltip"+A],Q.push(e.default.substitute(h.default,I)),P.push("authoritative"));
"public_authoritative"===w.contentStatus&&(w.verified||L)&&(I.tooltipLabel=e.default.substitute(a.default.badges["publicAuthoritativeTooltip"+A],{name:L?w.portal.name:w.verified.name}),Q.push(e.default.substitute(h.default,I)),P.push("authoritative"));"Solution"===w.type&&-1<w.typeKeywords.indexOf("ArcGIS Solution")&&(I.tooltipLabel=a.default.badges["solutionTooltip"+A],Q.push(e.default.substitute(n.default,I)),P.push("solution"));"deprecated"===w.contentStatus&&(I.tooltipLabel=a.default.badges["deprecatedTooltip"+
A],Q.push(e.default.substitute(q.default,I)),P.push("deprecated"));-1<(null===(J=w.typeKeywords)||void 0===J?void 0:J.indexOf("Public Data Collection"))&&G&&(I.tooltipLabel=a.default.badges["publicDataCollectionTooltip".concat(A)],Q.push(e.default.substitute(D.default,I)),P.push("public data collection"));w.isRetired&&(I.tooltipLabel=a.default.badges["retiredTooltip"+A],Q.push(e.default.substitute(v.default,I)),P.push("retired"));w.isRetiredStoryMap&&(I.tooltipLabel=a.default.badges["retiredStoryMapTooltip"+
A],Q.push(e.default.substitute(v.default,I)),P.push("retired"));w.isRetiredApp&&(I.tooltipClass=I.tooltipClass.replace("tooltip-bottom-left","tooltip-right"),I.tooltipLabel=a.default.badges["retiredAppTooltip"+A],Q.push(e.default.substitute(v.default,I)),P.push("retired"));N&&-1<N.indexOf("livingatlas")&&(I.tooltipLabel=a.default.badges["livingAtlasTooltip"+A],Q.push(e.default.substitute(k.default,I)),P.push("living atlas"));N&&-1<N.indexOf("opendata")&&(Q.push(e.default.substitute(b.default,I)),
P.push("open data"));w.isPremium&&(H=(null===(K=w.portal)||void 0===K?0:K.user)?w.portal.user.orgId?"org":"public":"anon",I.tooltipLabel=a.default.badges[H+(w.requiresCredits?"PremiumTooltip":"SubscriberTooltip")+A],Q.push(e.default.substitute(w.requiresCredits?x.default:E.default,I)),P.push(w.requiresCredits?"premium":"subscriber"));w.listed&&!L&&(Q.push(e.default.substitute(g.default,I)),P.push("marketplace"));w.origin&&(Q.push(e.default.substitute(C.default,I)),P.push("distributed collaboration"));
this.shouldShowRegisteredBadge(w,G)&&(I.tooltipLabel=a.default.badges["registeredTooltip"+A],Q.push(e.default.substitute(y.default,I)),P.push("oauth 2.0"));return F?Q.join(""):P.join(",")};z.getContentStatusBadges=function(w){var A,G={i18n:a.default,hideText:"",tooltipClass:"tooltip tooltip-bottom-left tooltip-multiline"},F=null===(A=w.portal)||void 0===A?void 0:A.isPortal;switch(w.contentStatus){case "org_authoritative":return G.tooltipLabel=a.default.badges.authoritativeTooltip,e.default.substitute(h.default,
G);case "public_authoritative":if(w.verified||F)return G.tooltipLabel=e.default.substitute(a.default.badges.publicAuthoritativeTooltip,{name:F?w.portal.name:w.verified.name}),e.default.substitute(h.default,G);break;case "deprecated":return G.tooltipLabel=a.default.badges.deprecatedTooltip,e.default.substitute(q.default,G)}};z.isItemAdmin=function(w,A){var G,F=!1;F=w.owner;A=null!==A&&void 0!==A?A:w.portal;var H=-1<(null===(G=w.itemControl)||void 0===G?void 0:G.indexOf("admin"));G=["esri_livingatlas",
"esri_demographics","esri_boundaries"];return F=A.isPortal&&!w.isOwner&&H&&-1<F.indexOf("esri_")&&!d.default.includes(G,F)?!1:!!H};z.canShareItem=function(w,A){var G,F,H=A||{},J=H.userRole;A=H.canShare;var K=H.canShareOthers&&w.isOwnedByMyOrg,Q=(null===J||void 0===J?void 0:J.canPurchaseMarketplace())||(null===J||void 0===J?void 0:J.canTrialMarketplace()),P=w.access||"private",I=w.isAdmin||w.isOwner||H.isOrgAdmin&&w.isOwnedByMyOrg||K,N="public"===P&&"AppBuilder Extension"!==w.type&&"AppBuilder Widget Package"!==
w.type;P="org"===P&&w.isOrgItem;var L="licenseByUser"===(null===(G=w.listingProperties)||void 0===G?void 0:G.licenseBy);G="Native Application Installer"!==w.type&&"API Key"!==w.type&&!u.default.isProApp(w)&&!L&&!(null===(F=null===w||void 0===w?void 0:w.typeKeywords)||void 0===F?0:F.includes("ArcgisWorkflowManager"));w=Q&&w.listed;F=((null===J||void 0===J?void 0:J.canShareItemToGroup())||!H.isOrgUser)&&(N||P);return G&&(A&&(I||w||F)||K)};z.canDeleteItem=function(w,A){var G=A||{};A=G.userRole;G=w.isAdmin||
w.isOwner||G.isOrgAdmin&&w.isOwnedByMyOrg;A=(null===A||void 0===A?void 0:A.isCustom())&&A.canDeleteOrgItems();return!!(G||w.isOwnedByMyOrg&&A)};z.canRecycleItem=function(w){return l.__awaiter(this,void 0,void 0,function(){var A;return l.__generator(this,function(G){switch(G.label){case 0:return A="".concat(w.userItemUrl,"/canRecycle"),[4,u.default.request({url:A})];case 1:return[2,G.sent()]}})})};z.getProtectedItems=function(w){var A=new r.default,G=[],F=[],H=[];w.forEach(function(K){K.protected?
G.push(K):H.push(K)});var J=H.map(function(K){return K.portal.isPortal?K.canBeDeleted().then(function(Q){Q&&!Q.success?(K.error=Q,G.push(K)):F.push(K)}):K.getResultData().then(function(Q){Q=(null===Q||void 0===Q?void 0:Q.length)&&!Q.every(function(I){return w.find(function(N){return N.id===I.id})});var P=["Vector Tile Package","Tile Package","Scene Package","Scene Layer Package"].includes(K.type);Q&&!P?G.push(K):F.push(K)})});(0,m.default)(J).then(function(){A.resolve({protectedItems:G,unprotectedItems:F})});
return A};z.deleteItemsByOwner=function(w,A,G){var F=this;void 0===G&&(G=!1);var H=new r.default;w="".concat(t.default.restBaseUrl,"content/users/").concat(w);if(1===A.length){var J=A[0];var K=J.folderId&&"/"!==J.folderId?"/".concat(J.folderId):"";w="".concat(w).concat(G?"":K,"/items/").concat(J.id,"/delete");J={permanentDelete:G};u.default.request({url:w,content:J},{usePost:!0}).then(function(P){return H.resolve([P])},function(P){return H.resolve([P])})}else 1<A.length&&(w="".concat(w,"/deleteItems"),
J={items:A.map(function(P){return P.id}).join(","),permanentDelete:G},u.default.request({url:w,content:J},{usePost:!0}).then(function(P){return l.__awaiter(F,void 0,void 0,function(){var I,N;return l.__generator(this,function(L){switch(L.label){case 0:return I=P.results.filter(function(W){return W.success}),N=P.results.filter(function(W){return!W.success}),G&&0<(null===N||void 0===N?void 0:N.length)?[4,Q(N)]:[3,2];case 1:N=L.sent(),L.label=2;case 2:return[2,H.resolve(l.__spreadArray(l.__spreadArray([],
I,!0),N,!0))]}})})},function(P){return H.resolve([P])}));var Q=function(P){return l.__awaiter(F,void 0,void 0,function(){var I,N,L,W,Z=this;return l.__generator(this,function(aa){switch(aa.label){case 0:return I=[],N=[],P.forEach(function(ia){return l.__awaiter(Z,void 0,void 0,function(){return l.__generator(this,function(R){"CONT_00486"===ia.error.messageCode?I.push(A.find(function(S){return S.id===ia.itemId})):N.push(A.find(function(S){return S.id===ia.itemId}));return[2]})})}),[4,Promise.all(I.map(function(ia){return Z.deleteItemsByOwner(ia.owner,
[ia],!0)}))];case 1:return L=aa.sent(),[4,Promise.all(N.map(function(ia){return Z.deleteItemsByOwner(ia.owner,[ia],!0)}))];case 2:return W=aa.sent(),[2,l.__spreadArray(l.__spreadArray([],L,!0),W,!0).flat()]}})})};return H};z.deleteItems=function(w,A){var G=this;void 0===A&&(A=!1);var F=new r.default,H={},J=[],K=[],Q=[];w.forEach(function(I){var N;"Deep Learning Package"===(null===I||void 0===I?void 0:I.type)?J.push(c.default.uninstallDeepLearningPackage(I).then(function(L){var W;"uninstallFail"===
(null===L||void 0===L?void 0:L.messageCode)?K.push(L):H[I.owner]=[I].concat(null!==(W=H[I.owner])&&void 0!==W?W:[])})):H[I.owner]=[I].concat(null!==(N=H[I.owner])&&void 0!==N?N:[])});var P=Object.keys(H).map(function(I){return G.deleteItemsByOwner(I,H[I],A)});(0,m.default)(J).then(function(){return(0,m.default)(P)}).then(function(I){I.forEach(function(N){N.forEach(function(L){L.success?Q.push(L):K.push(L)})});F.resolve({removed:Q,errors:K})});return F};z.restoreItemsByOwner=function(w,A,G){var F=
new r.default,H="".concat(t.default.restBaseUrl,"content/users/").concat(w),J={folder:G.id!==w?G.id:"/"};1===A.length?(w=A[0],w="".concat(H,"/items/").concat(w.id,"/restore"),u.default.request({url:w,content:J},{usePost:!0}).then(function(K){return F.resolve([K])},function(K){return F.resolve([K])})):A.forEach(function(K){K="".concat(H,"/items/").concat(K.id,"/restore");u.default.request({url:K,content:J},{usePost:!0}).then(function(Q){return F.resolve([Q])},function(Q){return F.resolve([Q])})});
return F};z.restoreItems=function(w,A){var G=this,F=new r.default,H={},J=[],K=[];w.forEach(function(Q){var P;H[Q.owner]=[Q].concat(null!==(P=H[Q.owner])&&void 0!==P?P:[])});w=Object.keys(H).map(function(Q){return G.restoreItemsByOwner(Q,H[Q],A)});(0,m.default)(w).then(function(Q){Q.forEach(function(P){P.forEach(function(I){I.success?K.push(I):J.push(I)})});F.resolve({restored:K,destinationFolder:A,errors:J})});return F};z.getContentStatus=function(w){if(w.contentStatus&&-1<w.contentStatus.indexOf("authoritative")){var A=
w.portal;return"public"===w.access&&(null===A||void 0===A?0:A.isVerified)?"public_authoritative":"org_authoritative"}return w.contentStatus};z.shouldOpenToItemURLInNewTab=function(w){return-1<"Web Mapping Application;Mobile Application;Document Link;Site Application;Hub Site Application;StoryMap".split(";").indexOf(w.type)};z.shouldOpenInNewTab=function(w){return-1<["CityEngine Web Scene","Dashboard","Operation View"].indexOf(w.type)};z.shouldShowRegisteredBadge=function(w,A){if("esri_apps"===w.owner)return!1;
var G=w.type,F=w.typeKeywords,H=w.isOwner,J=w.isAdmin,K=w.isOwnedByMyOrg;w=(null===F||void 0===F?void 0:F.includes("Registered App"))&&"API Key"!==G;A=J||H||(null===A||void 0===A?void 0:A.isOrgAdmin)&&K;G=["StoryMap, Dashboard"].includes(G)||["Web AppBuilder","configurableApp"].some(function(Q){return F.includes(Q)});return w?G?A:!0:!1};z.isHubType=function(w){return["Hub Site Application","Site Application"].includes(w)};return z}()})},"arcgisonline/pages/utils/socialMedia":function(){define(["require",
"exports","tslib","../../esriGeowConfig","esri/lang"],function(f,B,l,d,c){d=l.__importDefault(d);c=l.__importDefault(c);return function(){function u(){}u.canShowSocialMediaLinks=function(t){var e=t.isPortal,r=c.default.isDefined(t.canSharePublic)?!!t.canSharePublic:!0,m=!!t.portalProperties&&c.default.isDefined(t.portalProperties.showSocialMediaLinks);t=m&&!0===t.portalProperties.showSocialMediaLinks;return d.default.showSocialMediaLinks&&!0===d.default.showSocialMediaLinks&&(e?r&&t:r&&(!m||t))};
u.canShowSocialMediaLinksOnItems=function(t){var e=t.portalUser,r=!!e&&!e.orgId,m=!!e&&!!e.orgId;e=!e||r||m&&(e.userRole.canShareItemToPublic()||e.userRole.canShareOthersItemsToPublic());return this.canShowSocialMediaLinks(t)&&e};u.canShowSocialMediaLinksOnGroups=function(t){var e=t.portalUser,r=!!e&&!e.orgId,m=!!e&&!!e.orgId;e=!e||r||m&&e.userRole.canShareGroupToPublic();return this.canShowSocialMediaLinks(t)&&e};return u}()})},"arcgisonline/pages/portal/UserProfiles":function(){define("require exports tslib ./PortalUser ../../sharing/util ../../tsutils/declareDecorator dojo/Deferred dojo/i18n!../../nls/arcgisonline dojo/_base/lang dojo/Stateful".split(" "),
function(f,B,l,d,c,u,t,e,r,m){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);return function(){function a(h){this.NO_THUMBNAIL_PATH=c.default.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg");this.users={}}a.prototype.find=function(h){var q=this,n=this.users,k="string"===typeof h?{username:h}:h,g=k&&k.username;k="deletedUser"===g;var b={username:k?e.default.common.deletedUser:
g,thumbnailUrl:this.NO_THUMBNAIL_PATH},x=new t.default;"fetching"===n[g]?setTimeout(function(){q.find(h).then(function(v){x.resolve(v)})},50):n[g]?x.resolve(n[g]):k?(n[g]=r.default.mixin({},{isDeleted:!0},b),x.resolve(n[g])):(n[g]="fetching",this.getUserProfile(g).then(function(v){n[g]=v;x.resolve(n[g])},function(){n[g]=r.default.mixin({},b);x.resolve(n[g])}));return x};a.prototype.getUserProfile=function(h){var q=this,n=new t.default,k;c.default.request({url:this.portal.portalUrl+"community/users/"+
h}).then(function(g){k=new d.default(r.default.mixin(g,{portal:q.portal}));n.resolve(k)});return n};return a=l.__decorate([(0,u.default)(m.default)],a)}()})},"arcgisonline/pages/portal/PortalUser":function(){define("require exports tslib ./PortalGroup ./LicenseInfo ../utils/arrays ../utils/mapViewer ../../sharing/util ../../sharing/dijit/Role ../../tsutils/declareDecorator dojo/cookie dojo/_base/lang dojo/Deferred dojo/Stateful dojo/topic esri/arcgis/Portal esri/lang".split(" "),function(f,B,l,d,
c,u,t,e,r,m,a,h,q,n,k,g,b){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);q=l.__importDefault(q);n=l.__importDefault(n);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);return function(){function x(v){var y;v=this.portal||{};this.setRole(this.viewOnly);this.viewOnly&&this.copyViewOnlyRoleProperties();h.default.mixin(this,{thumbnailUrl:this.thumbnailUrl||
e.default.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg"),defaultThumbnailUrl:e.default.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg")});h.default.mixin(this,c.default);this.token=null===(y=this.credential)||void 0===y?void 0:y.token;this.id=this.username;this.orgUrl=v.urlKey&&v.customBaseUrl?"".concat(v.urlKey,".").concat(v.customBaseUrl):v.portalUrl;this.accountId=this.orgId;this.computeFlags()}x.prototype.postscript=function(){};x.prototype.setRole=
function(v){return this.userRole=new r.default({portalUser:this,viewOnly:v})};x.prototype.getDefaultMapViewer=function(){var v=this,y=new q.default;this.defaultMapViewer?y.resolve(this.defaultMapViewer):this.getProperties().then(function(D){var E,C=v.portal;v.defaultMapViewer=(0,t.determineUserMapViewer)({isSignedIn:!0,isViewingOrg:!!C.id,properties:D})||(0,t.determineOrgMapViewer)({mapViewer:null===(E=C.portalProperties)||void 0===E?void 0:E.mapViewer,created:C.created,subscriptionInfo:C.subscriptionInfo,
isPortal:C.isPortal});y.resolve(v.defaultMapViewer)});return y};x.prototype.getProperties=function(){var v=this,y=this.username;y="".concat(this.portal.url,"community/users/").concat(y,"/properties");var D=new q.default;this.userProperties?D.resolve(this.userProperties):e.default.request({url:y}).then(function(E){v.userProperties=(null===E||void 0===E?void 0:E.properties)||null;D.resolve(v.userProperties)},function(E){D.reject(E)});return D};x.prototype.getToken=function(){var v;return(null===(v=
this.credential)||void 0===v?void 0:v.token)||this.token};x.prototype.computeFlags=function(){var v,y=this.portal.supportsHostedServices||!1,D=(null===(v=this.portal.helperServices)||void 0===v?void 0:v.rasterAnalytics)&&b.default.isDefined(this.portal.helperServices.rasterAnalytics.url);this.isOrgUser=this.portal.urlKey&&this.portal.customBaseUrl||this.portal.isPortal?!0:!1;this.isOrgAdmin=this.userRole.isAdmin();this.canShare=!this.isOrgUser||this.userRole.canShareItemToGroup()||this.userRole.canShareItemToOrg()||
this.portal.canSharePublic&&this.userRole.canShareItemToPublic();this.canShareOthers=this.userRole.canShareOthersItemsToOrg()||this.userRole.canShareOthersItemsToPublic();this.canViewOthersOrgItems=!this.userRole.isCustom()||this.userRole.isCustom()&&this.userRole.canViewOrgItems();this.canReassignOrgItems=this.isOrgAdmin||this.userRole.canReassignOrgItems();this.canUseGeocode=(this.canCreateItems=!this.isOrgUser||this.userRole.canCreateItem())&&this.userRole.canUseGeocode();this.canPublishTiles=
this.userRole.canPublishTiles();this.canPublishFeatures=this.userRole.canPublishFeatures();this.canPublishScenes=this.userRole.canPublishScenes();this.canPublishVectorTiles=this.userRole.canPublishVectorTiles();this.canPublishImageCollection=D&&this.userRole.canPublishImageCollection()?!0:!1;this.canUserPublish=y&&this.canCreateItems&&(this.canPublishTiles||this.canPublishFeatures||this.canPublishScenes||this.canPublishVectorTiles||this.canPublishImageCollection);this.canManageLicenses=this.isOrgAdmin||
this.userRole.canManageLicenses();this.canManageWebsite=this.isOrgAdmin||this.userRole.canManageWebsite()};x.prototype.copyViewOnlyRoleProperties=function(){this.role=this.userRole.baseRole;this.roleId=this.userRole.id;this.privileges=this.userRole.privileges;this.level="1"};x.prototype.getTags=function(){var v=this,y=new q.default;this.tags&&this.tags.length?y.resolve(this.tags):this.inherited(arguments).then(function(D){v.set("tags",D);y.resolve(v.tags)},function(D){v.set("tags",[]);y.resolve([])});
return y};x.prototype.getContentTags=function(){var v=this,y,D=new q.default;(null===(y=this.contentTags)||void 0===y?0:y.length)?D.resolve(this.contentTags):e.default.loadUserTags(this.username).then(function(E){v.set("contentTags",E);D.resolve(v.contentTags)},function(E){v.set("contentTags",[]);D.resolve([])});return D};x.prototype.getCurrentFolder=function(){if(!b.default.isDefined(this.currentFolder)){var v=e.default.getCookie("ESRI_Content"),y=v&&"/"!==v.folderId?v.folderId:this.username;this.set("currentFolder",
{id:y,isAll:null===v||void 0===v?void 0:v.isAll,isHome:"/"!==y&&y&&y!==this.username?!1:!0})}return this.currentFolder};x.prototype.setCurrentFolder=function(v){var y=e.default.getCookie("ESRI_Content")||{},D=(null===v||void 0===v?void 0:v.id)||v||this.username,E="all"===D;v={folderId:D===this.username||E?"/":D,isAll:E,isHome:(null===v||void 0===v?0:v.isHome)||"/"===D||!D||D===this.username?!0:!1};h.default.mixin(y,v);(0,a.default)("ESRI_Content",JSON.stringify(y),{path:"/",sameSite:"Strict"});this.set("currentFolder",
h.default.mixin(v,{id:D}))};x.prototype.getFolders=function(){var v=this,y=new q.default;e.default.request({url:this.userContentUrl,content:{num:1}}).then(this._toFolders.bind(this)).then(function(D){v.set("folders",D);y.resolve(D.slice(0))});return y};x.prototype.createFolder=function(v){var y=this,D=new q.default,E=this.userContentUrl+"/createFolder";v={folderName:v.replace(/ /g,"_"),title:v};e.default.request({url:E,content:v},{usePost:!0}).then(function(C){y.folders.push(C.folder);y.folders.shift();
y.set("folders",y._toFolders({folders:y.folders}));k.default.publish("folders/refresh");D.resolve(C.folder)},function(C){D.reject(C)});return D};x.prototype.updateFolder=function(v,y){var D=this,E=new q.default;e.default.request({url:this.userContentUrl+"/"+v+"/updateFolder",content:{newTitle:y}},{usePost:!0}).then(function(){return D.getFolders()},function(C){E.reject(C)}).then(function(C){E.resolve(C);k.default.publish("folders/refresh")},function(C){E.reject(C)});return E};x.prototype.deleteFolder=
function(v){var y=this,D=new q.default;e.default.request({url:this.userContentUrl+"/"+v+"/delete"},{usePost:!0}).then(function(E){var C,z=null===(C=null===E||void 0===E?void 0:E.folder)||void 0===C?void 0:C.id;y.folders=y.folders.filter(function(w){return(null===w||void 0===w?void 0:w.id)!==z});y.folders.shift();y.set("folders",y._toFolders({folders:y.folders}));D.resolve(E.folder)},function(E){D.reject(E)});return D};x.prototype.deleteItems=function(v){var y=new q.default,D=this.userContentUrl+"/deleteItems";
v={items:v.map(function(E){return E.id})};e.default.request({url:D,content:v},{usePost:!0}).then(function(){y.resolve(!0)},function(E){y.reject(E)});return y};x.prototype._toFolders=function(v){var y=this;v=(null===v||void 0===v?void 0:v.folders)||[];v=v.sort(function(D,E){return D.title.localeCompare(E.title)});u.default.find(v,function(D){return D.id===y.username})||v.unshift({username:this.username,id:this.username,title:this.username,created:"now"});return v};x.prototype.getGroups=function(){var v=
this,y=this.portal.url+"community/users/"+this.username,D=new q.default;this.userGroups?D.resolve(this.adminGroups||this.userGroups):e.default.request({url:y}).then(function(E){v.userGroups=(null===E||void 0===E?0:E.groups)?v._toGroup(E.groups):[];D.resolve(v.userGroups)},function(E){D.reject(E)});return D};x.prototype.getSharedOwnershipGroups=function(){var v=this,y=new q.default;this.ownershipGroups&&y.resolve(0<this.ownershipGroups.length?this.ownershipGroups:null);this.getGroups().then(function(){y.resolve(0<
v.ownershipGroups.length?v.ownershipGroups:null)});return y};x.prototype._toGroup=function(v){var y=this;this.ownershipGroups=[];return(null!==v&&void 0!==v?v:[]).map(function(D){var E=new d.default(h.default.mixin(D,{portal:y.portal}));y._isSharedOwnershipGroup(D)&&y.ownershipGroups.push(D);return h.default.mixin(D,{portalGroup:E})})};x.prototype._isSharedOwnershipGroup=function(v){var y=v.capabilities&&v.capabilities.join(",")||"";return(v.owner===this.username||!v.isViewOnly||v.userMembership&&
"admin"===v.userMembership.memberType)&&-1<y.toLowerCase().indexOf("updateitemcontrol")};return x=l.__decorate([(0,m.default)(g.default.PortalUser,n.default)],x)}()})},"arcgisonline/pages/portal/PortalGroup":function(){define("require exports tslib ./PortalItem ../utils/arrays ../utils/getLivingAtlasCategorySet ../utils/resources ../utils/socialMedia ../utils/verified ../utils/itemsgroups ../../sharing/util ../../tsutils/declareDecorator dojo/promise/all dojo/Deferred dojo/_base/lang dojo/Stateful esri/arcgis/Portal".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);a=l.__importDefault(a);h=l.__importDefault(h);q=l.__importDefault(q);n=l.__importDefault(n);k=l.__importDefault(k);g=l.__importDefault(g);return function(){function x(v){var y,D,E,C,z,w,A;this.portalUser=null!==(D=null===(y=this.portal)||void 0===y?void 0:y.getPortalUser())&&void 0!==D?D:null;this.groupContentUrl=this.url.replace("/community/",
"/content/");this.searchContentUrl=this.portal.portalUrl+"search";this.canShowSocialMediaLinks=e.default.canShowSocialMediaLinksOnGroups(this.portal);this.isOwner="owner"===(null===(E=this.userMembership)||void 0===E?void 0:E.memberType);this.isManager="admin"===(null===(C=this.userMembership)||void 0===C?void 0:C.memberType);this.isMember="member"===(null===(z=this.userMembership)||void 0===z?void 0:z.memberType);this.isPublic="public"===this.access;this.belongsToGroup=this.userMembership&&c.default.includes(["owner",
"admin","member"],this.userMembership.memberType);this.isSharedOwnership=c.default.includes(this.capabilities,"updateitemcontrol");this.computeIsOpenDataEnabled();this.computeIsBackedByEnterpriseGroup();this.title=null!==(w=this.title)&&void 0!==w?w:"";this.snippet=null!==(A=this.snippet)&&void 0!==A?A:"";this.thumbnailUrl=this.thumbnail?this.url+"/info/"+this.thumbnail+"?token\x3d"+a.default.getToken():"./images/group-no-image.png";this.portal.isPortal&&!this.membershipAccess&&(this.membershipAccess=
"org")}x.prototype.postscript=function(){};x.prototype.getOwnerProfile=function(v,y){var D=this,E=this.owner,C=new n.default;this.ownerProfile?C.resolve(this.ownerProfile):(this.isOwner?(E=new n.default,E.resolve(this.portalUser)):E=this.portal.getUserProfile(E),E.then(function(z){D.isAdmin=D.isOwner||D._isGroupAdmin(z);(0,q.default)({folders:D.isAdmin&&y?z.getFolders():null,tags:D.isAdmin&&v?z.getTags():null,contentTags:D.isAdmin&&v?z.getContentTags():null}).then(function(){D.set("ownerProfile",
z);C.resolve(z)})}));return C};x.prototype._isOpenDataSetter=function(v){this.isOpenData=v;this.computeIsOpenDataEnabled()};x.prototype._providerSetter=function(v){this.provider=v;this.computeIsBackedByEnterpriseGroup()};x.prototype._providerGroupNameSetter=function(v){this.providerGroupName=v;this.computeIsBackedByEnterpriseGroup()};x.prototype.leave=function(){var v=this,y=new n.default;a.default.request({url:this.url+"/leave"},{usePost:!0}).then(function(D){v.set("isMember",!1);y.resolve(D)});
return y};x.prototype.join=function(){var v=this,y=new n.default;a.default.request({url:this.url+"/join"},{usePost:!0}).then(function(D){v.autoJoin&&(v.set("belongsToGroup",!0),v.set("isMember",!0));y.resolve(D)},function(D){y.reject(D)});return y};x.prototype.getApplications=function(){var v=this,y=new n.default;a.default.request({url:this.url+"/applications"}).then(function(D){v.set("applications",D.applications);y.resolve(D.applications)},function(D){y.reject(D)});return y};x.prototype.groupContent=
function(v,y){var D=this;void 0===v&&(v={});var E=v.q;E=void 0===E?"":E;var C=v.filter;C=void 0===C?"":C;var z=v.sortField;z=void 0===z?"modified":z;var w=v.sortOrder;w=void 0===w?"desc":w;var A=v.num;A=void 0===A?12:A;var G=v.start;G=void 0===G?1:G;var F=this.portalUser,H=this.portal,J=new n.default;y="".concat(this.groupContentUrl).concat(y?"/search":"");v="string"===typeof v?v:"sortField\x3d".concat(z,"\x26sortOrder\x3d").concat(w,"\x26num\x3d").concat(A,"\x26start\x3d").concat(G).concat(E?"\x26q\x3d".concat(E):
"").concat(C?"\x26filter\x3d".concat(C):"");a.default.request({url:"".concat(y,"?").concat(v)}).then(function(K){return(0,m.getAllItemsGroups)({response:K,portalUser:F,url:H.url})}).then(function(K){return D.toPortalItems(K)}).then(function(K){return J.resolve(K)},function(K){J.reject(K)});return J};x.prototype.search=function(v){var y=this,D=new n.default,E=this.portal.portalUrl+"search";v=l.__assign({q:"group:"+this.id,sortField:"modified",sortOrder:"desc",num:12,start:1},v||{});a.default.request({url:E,
content:v}).then(function(C){return y.toPortalItems(C)}).then(function(C){return D.resolve(C)},function(C){D.reject(C)});return D};x.prototype.toPortalItems=function(v){var y=this,D=new n.default;v.results&&(v.items=v.results,delete v.results);var E=v.items.map(function(C){return new d.default(l.__assign(l.__assign({},C),{portal:y.portal}))}).map(function(C){return r.default.setVerifiedInfo(C)});(0,q.default)(E).then(function(C){v.items=C;D.resolve(v)},function(C){return 0});return D};x.prototype.groupMembers=
function(v){var y=this;v=v||{};var D=new n.default,E=k.default.clone(v);v=this.url+"/userlist";E=l.__assign(l.__assign({},{sortField:"joined",sortOrder:"desc",num:25,start:1}),E);a.default.request({url:v,content:E}).then(function(C){return y.toMembers(C)}).then(function(C){return D.resolve(C)},function(C){D.reject(C)});return D};x.prototype.toMembers=function(v){var y=this,D=new n.default,E=window.require("arcgisonline/pages/portal/PortalUser");v.users=v.users.map(function(C){return new E(l.__assign(l.__assign({},
C),{portal:y.portal}))});D.resolve(v);return D};x.prototype.allGroupMembers=function(v){var y=this;v=v||{};var D=new n.default,E=k.default.clone(v);v=this.url+"/userlist";E=l.__assign(l.__assign({},{sortField:"joined",sortOrder:"desc",num:25,start:1}),E);t.default.fetchAllResources(v,E,"users").then(function(C){return y.toMembers({total:C.length,users:C})}).then(function(C){return D.resolve(C)},function(C){D.reject(C)});return D};x.prototype.itemCount=function(){var v=new n.default;this.search({num:1}).then(function(y){return v.resolve(y&&
y.total||0)});return v};x.prototype._isGroupAdmin=function(v){var y,D;v=v||this.portal.portalUser||{};var E=v.username,C=(null===(y=this.groupOwner)||void 0===y?void 0:y.orgId)||void 0;y=this._getAdmins();y=c.default.includes(y,E);C=v.orgId||C?v.orgId===C:!1;E=v.isOrgAdmin&&C;var z=(null===(D=v.userRole)||void 0===D?void 0:D.isCustom())&&C&&v.userRole.canUpdateOrgGroups();return y||E||z};x.prototype.isGroupOwnerOrgMember=function(){return this.portal.portalUser?this.orgId&&this.portal.portalUser.orgId===
this.orgId:!1};x.prototype._getAdmins=function(){var v,y;return(null!==(y=null===(v=this.members)||void 0===v?void 0:v.users)&&void 0!==y?y:[]).filter(function(D){return"admin"===D.memberType}).map(function(D){return D.username})};x.prototype._canRemoveContent=function(v){var y,D=v||this.portal.portalUser||{},E=(null===(y=this.groupOwner)||void 0===y?void 0:y.username)||{};v=this._isGroupAdmin(v);D=D.username===E;return v||D};x.prototype._canAssignToThisGroup=function(v){var y,D;v=v||this.portal.portalUser||
{};var E=(null===(y=this.groupOwner)||void 0===y?void 0:y.orgId)||void 0;y=v.orgId||E?v.orgId===E:!1;E=v.isOrgAdmin&&y;var C=(null===(D=v.userRole)||void 0===D?void 0:D.isCustom())&&y&&v.userRole.canAssignUsersToOrgGroups();return(E||C)&&!this.isOwner};x.prototype._canChangeOwner=function(v){var y,D;v=v||this.portal.portalUser||{};var E=(null===(y=this.groupOwner)||void 0===y?void 0:y.orgId)||{};y=v.orgId||E?v.orgId===E:!1;E=v.isOrgAdmin&&y;var C=(null===(D=v.userRole)||void 0===D?void 0:D.isCustom())&&
y&&v.userRole.canReassignOrgGroups();return!(!E&&!C)};x.prototype._canManageMembershipRequests=function(v){var y;v=v||this.portal.portalUser||{};var D=v.username,E=(null===(y=this.groupOwner)||void 0===y?void 0:y.orgId)||{};y=this._getAdmins();E=v.orgId||E?v.orgId===E:!1;D=c.default.includes(y,D);v=v.isOrgAdmin&&E;return!!(this.isOwner||D||v)};x.prototype._canInviteOthers=function(v){var y,D;v=v||this.portal.portalUser||{};var E=v.username,C=(null===(y=this.groupOwner)||void 0===y?void 0:y.orgId)||
{};y=this._getAdmins();var z=v.orgId||C?v.orgId===C:!1;C=v.isOrgAdmin&&z;var w=(null===(D=v.userRole)||void 0===D?void 0:D.isCustom())&&z&&v.userRole.canAssignUsersToOrgGroups();D=c.default.includes(y,E);return!!(this.isOwner||D||C||w)};x.prototype._canJoinGroup=function(v){var y,D,E;v=v||this.portal.portalUser||{};var C=(null===(y=this.groupOwner)||void 0===y?void 0:y.orgId)||{};y=v.orgId||C?v.orgId===C:!1;C=!this.isInvitationOnly;var z=!this.belongsToGroup,w=null===(D=v.userRole)||void 0===D?void 0:
D.canJoinOrgGroup();D=!v.orgId||(null===(E=v.userRole)||void 0===E?void 0:E.canJoinNonOrgGroup());return z&&C?y?w:w||D:!1};x.prototype._canDeleteGroup=function(v,y){var D,E;v=v||this.portal.portalUser||{};var C=v.username,z=(null===(D=this.groupOwner)||void 0===D?void 0:D.orgId)||{};D=this._getAdmins();D=c.default.includes(D,C);v=(v.orgId||z?v.orgId===z:!1)&&(null===(E=v.userRole)||void 0===E?void 0:E.canDeleteOrgGroups());return y&&y.isAdminView?y.canDelete:!!(this.isOwner||D||v)};x.prototype.getCategories=
function(){var v=this,y=new n.default,D,E,C,z;a.default.request({url:this.url+"/categorySchema"}).then(function(w){D=w.categorySchema||[];v.categorySchema=[];D.forEach(function(A){v._isReferencingCategorySet(A)?(E=-1<A.source.indexOf("portal.regions"),C=-1<A.source.indexOf("contentCategorySetsGroupQuery.LivingAtlas")):v.categorySchema.push(A)});E||C?(0,u.default)(v.portal,"LivingAtlas",E).then(function(A){z=(null===A||void 0===A?0:A.length)?A.shift():{};v.categorySchema=k.default.mixin(z.categorySchema,
{isLivingAtlas:!0});y.resolve(v.categorySchema)}):y.resolve(v.categorySchema)},function(w){y.reject(w)});return y};x.prototype.allowExternalMembers=function(){return"org"!==this.membershipAccess};x.prototype._isReferencingCategorySet=function(v){var y,D;return-1<(null===(y=v.source)||void 0===y?void 0:y.indexOf("portal.regions"))||-1<(null===(D=v.source)||void 0===D?void 0:D.indexOf("contentCategorySetsGroupQuery.LivingAtlas"))};x.prototype.computeIsOpenDataEnabled=function(){this.isOpenDataEnabled=
this.portal&&!this.portal.isPortal&&!0===this.isOpenData};x.prototype.computeIsBackedByEnterpriseGroup=function(){this.isBackedByEnterpriseGroup="enterprise"===this.provider&&!!this.providerGroupName};x.prototype.isBackedByOIDCGroup=function(){var v;return(null===(v=this.provider)||void 0===v?void 0:v.includes("oidc_"))&&!!this.providerGroupName};return x=l.__decorate([(0,h.default)(b.PortalGroup,g.default)],x)}()})},"arcgisonline/pages/utils/getLivingAtlasCategorySet":function(){define("require exports tslib ../portal/PortalItem ../../sharing/util dojo/promise/all dojo/Deferred dojo/i18n!../../nls/arcgisonline dojo/_base/kernel dojo/_base/lang".split(" "),
function(f,B,l,d,c,u,t,e,r,m){function a(v){var y=new t.default;c.default.request({url:v.portalUrl+"portals/self",content:{culture:r.default.locale,default:!0}}).then(function(D){y.resolve(null===D||void 0===D?void 0:D.contentCategorySetsGroupQuery)});return y}function h(v,y){var D=new t.default,E=window.require("arcgisonline/pages/portal/PortalGroup");y?v.queryGroups(y,!0).then(function(C){(C=C.total?C.results.shift():null)?D.resolve(new E(m.default.mixin(C,{portal:v}))):D.reject(!1)}):D.reject(!1);
return D}function q(v,y,D,E){var C=new t.default;E?y?n(v,E,y).then(function(z){return k(v,D,[z])}).then(function(z){return C.resolve(z)}):E.groupContent().then(function(z){return C.resolve(z.items)}).then(function(z){return k(v,D,z)}).then(function(z){return C.resolve(z)}):C.reject(!1);return C}function n(v,y,D){var E=new t.default,C;y.search({q:"group:"+y.id+' typekeywords:"'+D+'"',num:1}).then(function(z){C=z.total?z.items.shift():{};E.resolve(new d.default(m.default.mixin(C,{portal:v})))});return E}
function k(v,y,D){var E=new t.default;D=m.default.isArray(D)?D:[D];y=y&&!v.isPortal;D=D.map(function(C){return g(v,y,C)});(0,u.default)(D).then(function(C){E.resolve(C)});return E}function g(v,y,D){var E=new t.default,C=[x(D)];y&&C.push(b(v));(0,u.default)(C).then(function(z){D.set("categorySchema",z);E.resolve(D)});return E}function b(v){var y=new t.default,D={title:"Region",description:"Living Atlas Regions",displayName:e.default.common.regions};v.getRegions().then(function(E){E=(E||[]).map(function(C){return m.default.mixin(C,
{displayName:C.localizedName,name:C.region})});D=m.default.mixin(D,{categories:E});y.resolve(D)});return y}function x(v){var y=new t.default;v.getData().then(function(D){D=null===D||void 0===D?void 0:D.categorySchema;D=(null===D||void 0===D?0:D.length)?D.shift():{};y.resolve(m.default.mixin(D,{displayName:e.default.GroupWidget.categories}))});return y}d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);
return function(v,y,D){var E=new t.default;a(v).then(function(C){return h(v,C)}).then(function(C){return q(v,y,D,C)}).then(function(C){return E.resolve(C)},function(){return E.resolve(null)});return E}})},"arcgisonline/pages/utils/resources":function(){define("require exports tslib ./clone ../../sharing/util dojo/promise/all dojo/Deferred esri/lang".split(" "),function(f,B,l,d,c,u,t,e){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);
return function(){function r(){}r.sendAllResources=function(m,a,h,q,n,k){var g=new t.default;h=(0,d.default)(h);var b=[],x=h.splice(0,a);for(e.default.isDefined(k)||(k=!0);0<(null===x||void 0===x?void 0:x.length);)b.push(c.default.request({url:m,content:q(x)},l.__assign({usePost:k},n))),x=h.splice(0,a);(0,u.default)(b).then(function(v){g.resolve(v)},function(v){g.reject(v)});return g};r.sendAllResourcesWithDelay=function(m,a,h,q,n){function k(){setTimeout(function(){y=x.splice(0,a);0<(null===y||void 0===
y?void 0:y.length)?(c.default.request({url:m,content:q(y)},{usePost:!0}).then(function(C){D++;v.push(C);D>=b&&g.resolve(v)},function(C){D++;D>=b&&g.reject(C)}),E++,k()):g.resolve(v)},0===E?0:n)}var g=new t.default,b=Math.ceil(h.length/a),x=(0,d.default)(h),v=[],y,D=0,E=0;k();return g};r.sendAllResourcesSerially=function(m,a,h,q,n){function k(){y=x.splice(0,a);0<(null===y||void 0===y?void 0:y.length)?c.default.request({url:m,content:q(y)},{usePost:!0}).then(function(E){D++;null===n||void 0===n?void 0:
n(D*a/h.length*100);v.push(E);D>=b?g.resolve(v):k()},function(E){D++;null===n||void 0===n?void 0:n(D*a/h.length*100);D>=b?g.reject(E):k()}):g.resolve(v)}var g=new t.default,b=Math.ceil(h.length/a),x=(0,d.default)(h),v=[],y,D=0;k();return g};r.fetchAllResources=function(m,a,h){void 0===a&&(a={});void 0===h&&(h="results");var q=new t.default,n=[],k=100,g=[],b=1,x,v,y;a.start=b;!a.num||a.num>k?a.num=k:k=a.num;c.default.request({url:m,content:a}).then(function(D){if(null===D||void 0===D?0:D[h]){g=g.concat(D[h]);
b=D.nextStart;x=D.total-g.length;v=Math.ceil(x/k);for(y=0;y<v;y++)a.start=b+y*k,n.push(c.default.request({url:m,content:a}));(0,u.default)(n).then(function(E){E.forEach(function(C){g=g.concat(C[h])});q.resolve(g)},function(E){q.reject(E)})}else q.resolve(g)},function(D){q.reject(D)});return q};return r}()})},"arcgisonline/pages/utils/verified":function(){define(["require","exports","tslib","../../sharing/util","dojo/Deferred"],function(f,B,l,d,c){d=l.__importDefault(d);c=l.__importDefault(c);return function(){function u(){}
u.getVerifiedInfo=function(t){var e,r,m,a=new c.default,h=u.orgHash,q=null!==(e=t.orgId)&&void 0!==e?e:null===(r=t.portal)||void 0===r?void 0:r.id;e=null===(m=t.portal)||void 0===m?void 0:m.isPortal;if(t.contentStatus&&"public_authoritative"===t.contentStatus&&q&&!e)if(h[q])a.resolve(u.orgHash[q]);else{var n="".concat(location.protocol,"//").concat(t.portal.portalHostname,"/sharing/rest/portals/").concat(q);d.default.request({url:n}).then(function(k){return u.getOrgProps(n).then(function(g){g&&(k.localizedOrgProperties=
g);return k})}).then(function(k){var g,b,x=k.urlKey||"";x="".concat(k.allSSL?"https://":"http://").concat(x,".").concat(k.customBaseUrl,"/");var v=k.thumbnail?x+"sharing/rest/portals/self/resources/"+k.thumbnail:"./images/group-no-image.png";h[k.id]={name:k.name,description:null===(b=null===(g=k.localizedOrgProperties)||void 0===g?void 0:g.default)||void 0===b?void 0:b.description,url:x+"home/",thumbnail:v};a.resolve(h[k.id])},function(k){return 0})}else a.resolve(!1);return a};u.getOrgProps=function(t){var e=
new c.default;t="".concat(t,"/resources/localizedOrgProperties");d.default.request({url:t,content:{start:1,num:100}}).then(function(r){r&&!r.code?e.resolve(r):e.resolve(!1)},function(){e.resolve(!1)});return e};u.setVerifiedInfo=function(t){var e=new c.default;u.getVerifiedInfo(t).then(function(r){t.verified=r;e.resolve(t)});return e};u.orgHash={};return u}()})},"arcgisonline/pages/utils/itemsgroups":function(){define("require exports tslib dojo/_base/Deferred ./arrays ./promises arcgisonline/sharing/util".split(" "),
function(f,B,l,d,c,u,t){function e(h){var q=h.response,n=h.url,k=h.portalUser;h=h.contentUser;var g=[];k&&(g=g.concat(k.userGroups||[]));h&&(g=g.concat(h.groups||[]));if(q.results&&0<(null===g||void 0===g?void 0:g.length)){var b=q.results.map(function(x){return x.id}).join(",");k=g.map(function(x){return x.id});k=c.default.batch(k,100).map(function(x){return r(n,x,b)});return u.default.eachAlwaysValues(k).then(function(x){x=m(x);return a(q,x)})}k=new d.default;k.resolve(q);return k}function r(h,q,
n){if(!n||0===q.length)return n=new d.default,n.resolve({}),n;h="".concat(h,"content/itemsgroups");q=q.join(",");return t.default.request({url:h,content:{items:n,groups:q}})}function m(h){return h.reduce(function(q,n){n&&Object.keys(n).forEach(function(k){k&&n[k]&&(q[k]=n[k])});return q},{})}function a(h,q){if(q){var n={};h.results.forEach(function(k){return n[k.id]=k});Object.keys(q).forEach(function(k){var g=q[k];if(g&&g.items){k=q[k];var b=k.groupId,x=k.groupTitle,v=k.groupThumbnail;k.items.forEach(function(y){y=
n[y.itemId];y.groupData=y.groupData||[];y.sharedGroups=y.sharedGroups||0;0!==y.groupData.length&&c.default.find(y.groupData,function(D){return D.id===b||D.groupId===b})||(y.groupData.push({groupId:b,groupTitle:x,groupThumbnail:v}),y.sharedGroups+=1)})}})}return h}Object.defineProperty(B,"__esModule",{value:!0});B.parseItemsGroups=B.collateItemsGroupsResponse=B.fetchItemsGroupsPage=B.getAllItemsGroups=B.getItemGroups=void 0;d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);
B.getItemGroups=function(h){var q=h.url,n=h.portalUser,k=h.contentUser;h={results:[h.item]};var g=new d.default;e({response:h,url:q,portalUser:n,contentUser:k}).then(function(b){g.resolve(null===b||void 0===b?void 0:b.results[0])});return g};B.getAllItemsGroups=e;B.fetchItemsGroupsPage=r;B.collateItemsGroupsResponse=m;B.parseItemsGroups=a})},"arcgisonline/pages/utils/promises":function(){define(["require","exports","tslib","dojo/Deferred","dojo/promise/all"],function(f,B,l,d,c){d=l.__importDefault(d);
c=l.__importDefault(c);return{isPromise:function(u){return u&&"function"===typeof u.then},resolve:function(u){var t=new d.default;t.resolve(u);return t.promise},reject:function(u){var t=new d.default;t.reject(u);return t.promise},when:function(u){return this.isPromise(u)?u:this.resolve(u)},create:function(u,t,e){var r=this,m=new d.default(e);u(function(a){return r.when(a).then(m.resolve,m.reject)});return m.promise},all:c.default,filter:function(u,t){var e=u.slice();return this.all(u.map(function(r,
m){return t(r,m)})).then(function(r){return e.filter(function(m,a){return r[a]})})},eachAlways:function(u){if(u){if("function"!==typeof u.forEach){var t=Object.keys(u),e=t.map(function(r){return u[r]});return this.eachAlways(e).then(function(r){var m={};t.forEach(function(a,h){m[a]=r[h]});return m})}return this.create(function(r){var m=[],a=u.length;0===a&&r(m);u.forEach(function(h){var q={promise:h};m.push(q);h.then(function(n){q.value=n}).catch(function(n){q.error=n}).then(function(){--a;0===a&&
r(m)})})},function(r){u.forEach(function(m){m.cancel(r)})})}},eachAlwaysValues:function(u){return this.eachAlways(u).then(function(t){return t.filter(function(e){return e.value}).map(function(e){return e.value})})},after:function(u,t){var e=this,r=0;return this.create(function(m){r=window.setTimeout(function(){e.resolve(t)},u)},function(){r&&(clearTimeout(r),r=0)})},timeout:function(u,t,e){var r=0,m=new d.default(u.cancel);u.then(function(a){m.isFulfilled()||(m.resolve(a),r&&(clearTimeout(r),r=0))});
u.catch(function(a){m.isFulfilled()||(m.reject(a),r&&(clearTimeout(r),r=0))});r=window.setTimeout(function(){var a=e||Error("promiseUtils:timeout\n          The wrapped promise did not resolve within ".concat(t,"ms"));m.reject(a)},t);return m.promise}}})},"arcgisonline/pages/portal/LicenseInfo":function(){define("require exports tslib ../utils/organization ../../sharing/geow/Licenses dojo/Deferred".split(" "),function(f,B,l,d,c,u){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);
return{_licensesAPI:new c.default,licenses:{arcgiswebapps:{valid:!1,className:"web-apps-not-licensed"},arcgisinsights:{valid:!1,className:"insights-not-licensed"},hubforarcgis:{valid:!1},orthomaker:{valid:!1,className:"orthomaker-not-licensed"},opsdashboard:{valid:!1,className:"web-dashboard-not-licensed"},workforce:{valid:!1,className:"workforce-not-licensed"},survey123:{valid:!1,className:"survey123-not-licensed"},arcgisurban:{valid:!1,className:"arcgisUrban-not-licensed"},analytics4iot:{valid:!1,
isCapability:!0},storymaps:{valid:!1,className:"storymaps-not-licensed"}},getLicenseInfo:function(){var t=this,e=new u.default,r=this.licenses||{};this._getSubscriptionInfo().then(function(){return t._getProvisionedListings()}).then(function(){return e.resolve(r)});return e},_getSubscriptionInfo:function(){var t=this,e=new u.default,r=this.licenses||{};this.portal.user&&this.isOrgUser?d.default.getSubscriptionInfo().then(function(m){var a;t.orgCapabilities=null!==(a=null===m||void 0===m?void 0:m.orgCapabilities)&&
void 0!==a?a:[];t.orgCapabilities.forEach(function(h){return t._addCapabilityInfo(h)});e.resolve(r)}):e.resolve(r);return e},_addCapabilityInfo:function(t){var e,r,m=this.licenses||{},a=(null===(e=t.id)||void 0===e?void 0:e.toLowerCase())||null;t&&(e=null!==(r=m[a])&&void 0!==r?r:{},m[a]=l.__assign(l.__assign(l.__assign({},e),t),{title:t.id,valid:!0}))},_getProvisionedListings:function(){var t=this,e=new u.default,r=this.portal.user,m={returnAppClientIds:!0,returnAllProvisions:!0},a=this.licenses||
{};r&&this.isOrgUser?this._licensesAPI.getUserProvisionedListings(r.username,m).then(function(h){t.provisionedListings=null!==h&&void 0!==h?h:[];t.provisionedListings.forEach(function(q){return t._addListingInfo(q)});e.resolve(a)},function(){e.resolve([])}):(Object.keys(a).forEach(function(h){a[h].isCapability||(a[h].valid=!0)}),e.resolve(a));return e},_addListingInfo:function(t){var e,r=this.licenses||{},m=(null===(e=t.clientId)||void 0===e?void 0:e.toLowerCase())||null;m&&(r[m]=l.__assign(l.__assign({},
r[m]||{}),{valid:!0,itemId:t.itemId,clientId:t.clientId}))},isLicensed:function(t){var e,r,m;t=null!==(e=null===t||void 0===t?void 0:t.toLowerCase())&&void 0!==e?e:"";e=this.licenses||{};return null!==(m=null===(r=null===e||void 0===e?void 0:e[t])||void 0===r?void 0:r.valid)&&void 0!==m?m:!1}}})},"arcgisonline/pages/utils/organization":function(){define("require exports tslib dojo/Deferred dojo/cookie dojo/json dojo/string dojo/i18n!../../nls/arcgisonline dojo/_base/kernel moment/moment ../../esriGeowConfig ../../pages/utils/queryHandler ./formatters ./arrays ./subscription ../../sharing/geow/Roles ../../sharing/util".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importStar(h);q=l.__importDefault(q);n=l.__importDefault(n);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);var x="".concat(f.toUrl("arcgisonline/sharing/dijit"),"/css/images/app-icons/");return function(){function v(){}v.isMobile=function(){return 720>=
window.innerWidth};v.getCompatibleUserTypes=function(y,D,E){var C=[];D.forEach(function(z){var w=!1,A=!1;y.isPro&&z.apps.forEach(function(K){K.isAppBundle||K.entitlements.forEach(function(Q){if(-1!==v._proKeys.indexOf(Q)){-1!==v._proKeys.indexOf(y.key)&&(A=!0);var P=null===E||void 0===E?void 0:E.filter(function(I){return I.key===Q})[0];P&&v.isProExtension(y.key)&&-1!==P.extNotSupported.indexOf(y.key)&&(w=!0)}})});var G=!1,F=!1,H=!1,J=(y.isEsriApp||y.isAppBundle)&&z.preventSignInFromNonUTEsriApps;
z.apps.forEach(function(K){y.isAppBundle&&K.isAppBundle&&K.id===y.itemId&&(G=!0);y.isAppBundle||K.isAppBundle||K.id!==y.itemId||-1===K.entitlements.indexOf(y.key)?!y.isAppBundle&&K.isAppBundle&&K.apps.some(function(P){return-1!==P.entitlements.indexOf(y.key)})&&(F=!0):F=!0;var Q=y.requiredListings;0<(null===Q||void 0===Q?void 0:Q.length)?K.isAppBundle?K.apps.some(function(P){return-1<Q.indexOf(P.id)})&&(H=!0):-1<Q.indexOf(K.id)&&(H=!0):H=!0});-1===y.allowedLevels.indexOf(z.level)&&0!==y.allowedLevels.length||
w||A||G||F||!(0<z.maxUsers)||!H||z.supportsSignInOnlyFromUTApps||J||C.push(z)});return C};v.isBusinessAnalyst=function(y){return"ArcGIS Business Analyst Web and Mobile Apps"===y||-1<this.baKeys.indexOf(y)};v.isDrone2Map=function(y){return"ArcGIS Drone2Map"===y||-1<this.droneKeys.indexOf(y)};v.userTypePassesRequired=function(y,D){var E=D.requiredListings;if(!E||0===E.length)return!0;var C=!1;return y.apps.some(function(z){z.isAppBundle?z.apps.some(function(w){return-1<E.indexOf(w.id)})&&(C=!0):-1<
E.indexOf(z.id)&&(C=!0);return C})};v.checkPasswordStrength=function(y){return b.default.request({url:b.default.getSecureUrl("".concat(a.default.restBaseUrl,"portals/checkPasswordStrength")),content:{password:y}},{usePost:!0})};v.getSubscriptionInfo=function(){return b.default.request({url:b.default.getSecureUrl("".concat(a.default.restBaseUrl,"portals/self/subscriptionInfo"))})};v.filterRoles=function(y,D,E,C,z){var w=[],A=l.__spreadArray(l.__spreadArray([],g.default.extraLevelOnePrivileges,!0),
D.privileges,!0);"11"===C&&A.push("features:user:edit");y.forEach(function(G){if(E||!E&&D&&G.privileges&&!g.default.exceedsRolePrivileges(A,G.privileges))z?w.push(G):w.push({name:G.name,role:G.id,description:G.description})});return w};v.alreadyIncludedInUserType=function(y,D){var E,C=0<y.apps.filter(function(z){return D.itemId===z.id}).length;y.apps.forEach(function(z){z.isAppBundle&&z.apps.forEach(function(w){w.id===D.itemId&&(C=!0)})});(null!==(E=y.extensions)&&void 0!==E?E:[]).some(function(z){(z=
z.id===D.itemId)&&(C=!0);return z});return C};v.convertAppBundletoEntitlement=function(y){return y.map(function(D){return{key:D.appBundleItemId,itemId:D.appBundleItemId,title:D.name,used:D.assigned,total:D.maxUsers,isAppBundle:!0,apps:D.apps,allowedLevels:D.allowedLevels,usernames:D.usernames}})};v.transformAppBundleApps=function(y,D){var E=[];y.forEach(function(C){var z,w,A;1>=(null===(z=C.entitlements)||void 0===z?void 0:z.length)?(z=((null===(w=v._appSwitcherResponse)||void 0===w?void 0:w.apps)||
[]).filter(function(G){return G.entitlement===C.entitlements[0]})[0],w="Classic Story Maps"===C.title&&D,null!==z&&void 0!==z&&z.hidden||w||(z&&(C.title=z.shortLabel||z.title||C.title||""),E.push(C))):null===(A=C.entitlements)||void 0===A?void 0:A.forEach(function(G){var F,H=((null===(F=v._appSwitcherResponse)||void 0===F?void 0:F.apps)||[]).filter(function(J){return G&&J.entitlement===G})[0];(null===H||void 0===H?0:H.title)&&!H.hidden&&(F=l.__assign(l.__assign({},C),{title:H.shortLabel||H.title}),
E.push(F))})});return E};v.initLicensesConfig=function(y){var D=new d.default;y||D.resolve();v.queryAppSwitcherItem(y).then(function(E){var C;0<(null===(C=E.items)||void 0===C?void 0:C.length)?(E=E.items[0],v.licensesConfigItem=E,v.getAppSwitcherConfig(E,y).then(function(){D.resolve()})):D.resolve()});return D};v.clearLicensesConfigCache=function(){v._appSwitcherSearchResponse=void 0;v._appSwitcherSearchDfd=void 0;v._appSwitcherResponse=void 0;v._appSwitcherConfigDfd=void 0};v.queryAppSwitcherItem=
function(y){var D=new d.default;v._appSwitcherSearchResponse?D.resolve(v._appSwitcherSearchResponse):v._appSwitcherSearchDfd?v._appSwitcherSearchDfd.then(function(E){D.resolve(E)}):(v._appSwitcherSearchDfd=D,y.queryItems(a.default.licensesItemQuery,!0).then(function(E){v._appSwitcherSearchResponse=E;D.resolve(E)},function(E){v._appSwitcherSearchResponse={};D.resolve({})}));return D};v.getAppSwitcherConfig=function(y,D){var E=new d.default;v._appSwitcherResponse?E.resolve(v._appSwitcherResponse):v._appSwitcherConfigDfd?
v._appSwitcherConfigDfd.then(function(C){E.resolve(C)}):(v._appSwitcherConfigDfd=E,b.default.request({url:y.itemDataUrl}).then(function(C){v._appSwitcherResponse=C;v.licensesConfig=C;C.appSwitcher&&(v._apps=C.appSwitcher.apps);E.resolve(C)},function(){v._appSwitcherResponse={};E.resolve({})}));return E};v.isEntitlement=function(y){return void 0!==y.key||void 0!==y.itemId};v.getAppIconDir=function(){return x};v.getAppIcon=function(y,D){function E(Q){G.imagePath="svg-app-icon.svg";G.abbr=Q.title.substring(0,
1);G.showAbbr=!0;G.abbrClass="";G.ordinal=1;G.shapeClass=""}function C(Q){var P=J.filter(function(I){var N,L;return I.entitlement&&1===(null===(N=Q.entitlements)||void 0===N?void 0:N.length)&&I.entitlement===(null===(L=Q.entitlements)||void 0===L?void 0:L[0])||I.title&&I.title===Q.title||I.shortLabel&&I.shortLabel===Q.title})[0];-1!==Q.title.indexOf("ArcGIS Pro")?(G.imagePath="arcgis-pro.png",G.ordinal=0):(null===P||void 0===P?0:P.image)?(G.imagePath="".concat(H).concat(P.image),G.ordinal=0,F=!0):
P&&!P.image?E(Q):(G.imagePath="fieldmapsmobile"===Q.id?"".concat(x,"fieldmaps.png"):K?"".concat(H).concat(Q.title.replace(/\s/g,"_"),"/icon.png"):"".concat(x,"generic-app.png"),G.shapeClass="not-hex",F=!0)}function z(Q){var P,I,N,L=J.filter(function(W){return W.entitlement&&W.entitlement===Q.key||W.title&&W.title===Q.title||W.label&&W.label===Q.title||W.shortLabel&&W.shortLabel===Q.title})[0];Q.isPro||-1!==Q.title.indexOf("ArcGIS Pro")?(G.imagePath="arcgis-pro.png",G.ordinal=0):(null===L||void 0===
L?0:L.image)?(G.imagePath="".concat(H).concat(L.image),G.ordinal=0,F=!0):L&&!L.image?E(Q):(L=(null===(P=a.default.userInfo.credential)||void 0===P?void 0:P.token)||a.default.userInfo.token,G.shapeClass="not-hex",Q.icon?(G.imagePath="".concat(a.default.restBaseUrl,"portals/self/resources/").concat(Q.icon,"?token\x3d").concat(L),F=!0,G.ordinal=2):(null===(N=null===(I=Q.properties)||void 0===I?void 0:I.appSwitcher)||void 0===N?0:N.image)?(G.imagePath="https://".concat(a.default.self.portalHostname,"/sharing/rest/content/items/").concat(Q.itemId,
"/resources/").concat(Q.properties.appSwitcher.image,"?token\x3d").concat(L),F=!0,G.ordinal=2):"esri"===Q.owner||"esri_apps"===Q.owner||Q.isAppBundle?(G.imagePath=K?"".concat(H).concat(Q.title.replace(/\s/g,"_"),"/icon.png"):"".concat(x,"generic-app.png"),F=!0):(G.imagePath=D,G.showAbbr=!0,G.abbrClass="",G.ordinal=3))}var w,A,G={abbrClass:"hide",showAbbr:!1,abbr:"",shapeClass:""},F=!1,H="".concat(a.default.restBaseUrl,"content/items/").concat(null===(w=v.licensesConfigItem)||void 0===w?void 0:w.id,
"/resources/"),J=(null===(A=v._appSwitcherResponse)||void 0===A?void 0:A.apps)||[];if("User License Type Extension"===y.type){w=J.filter(function(Q){return Q.entitlement&&Q.entitlement===y.key||Q.title&&Q.title===y.title})[0];A=b.default.isPortal()?"".concat(x,"user-type-extension.png"):"".concat(x,"user-type-extension-online.png");if(null===w||void 0===w?0:w.image)A="".concat(H).concat(w.image);return l.__assign(l.__assign({},G),{imagePath:A,ordinal:0})}if("Application SDK"===y.type)return l.__assign(l.__assign({},
G),{imagePath:"".concat(x,"runtime.png"),ordinal:0});if(y.isExtension)return l.__assign(l.__assign({},G),{imagePath:"".concat(x,"pro-extension.png"),ordinal:0});w=v._getAppSwitcherIcon(y,D);var K=v.licensesConfigItem;D&&0!==D.length||(D="svg-app-circle.svg");w?G=w:(w=l.__assign({},y),-1<w.title.indexOf("ArcGIS Drone2Map")&&(w.title="ArcGIS Drone2Map"),v.isEntitlement(w)?z(w):C(w));F||(G.imagePath=x+G.imagePath);G.isAppBundle=y.isAppBundle;return G};v.getEmptyAppIcon=function(){return x+"svg-app-icon.svg"};
v._getAppSwitcherIcon=function(y,D){if(v._apps){D="svg-app-icon.svg";var E=v._apps.filter(function(z){var w=z.title&&z.title===y.title;v.isEntitlement(y)&&!w&&(w=z.itemId&&z.itemId===y.itemId);return w})[0];if(E){var C={};E.image?(C.imagePath=E.image,C.ordinal=0,C.abbrClass="hide",C.showAbbr=!1,C.abbr=""):(C.imagePath=D,C.abbr=E.abbr,C.showAbbr=!0,C.abbrClass="",C.ordinal=1);C.shapeClass="";return C}}};v.getUserTypesContainingPro=function(y){return y.filter(function(D){return D.apps?D.apps.some(function(E){return"ArcGIS Pro"===
E.title}):!1})};v.userTypeIncludesPro=function(y){var D;return null===(D=null===y||void 0===y?void 0:y.apps)||void 0===D?void 0:D.some(function(E){return"ArcGIS Pro"===E.title})};v.getProFromUserTypes=function(y){var D;y.forEach(function(E){E.apps&&(D=n.default.find(E.apps,function(C){if("ArcGIS Pro"===C.title)return C}))});return D};v.getProFromAppBundles=function(y){var D;y.forEach(function(E){D=n.default.find(E.apps,function(C){if("ArcGIS Pro"===C.title)return C})});return D};v.getProExtensions=
function(y){return y.filter(function(D){return-1!==v._proExtensionKeys.indexOf(D.key)})};v.isProExtension=function(y){return-1!==v._proExtensionKeys.indexOf(y)};v.isProKey=function(y){return-1!==v._proKeys.indexOf(y)};v.getProKeys=function(){return v._proKeys};v.filterOutProExtensions=function(y){return y.filter(function(D){return-1===v._proExtensionKeys.indexOf(D.key)})};v.getProEntitlements=function(y){y=y.filter(function(D){return D.isPro&&-1<v._proKeys.indexOf(D.key)});y.forEach(function(D){"desktopBasicN"===
D.key?D.ordinal=0:"desktopStdN"===D.key?D.ordinal=1:"desktopAdvN"===D.key&&(D.ordinal=2)});y.sort(function(D,E){return D.ordinal>E.ordinal?1:D.ordinal<E.ordinal?-1:0});return y};v.getUserRole=function(y){var D;return null!==(D=null===y||void 0===y?void 0:y.userRole)&&void 0!==D?D:{}};v.shouldShowMFA=function(y,D){var E=v.getUserRole(D);D=E.isAdmin();E=E.canManageSecurity();D=D||E;E=!1;!y.isPortal&&y.subscriptionInfo?(E=k.default.isDeveloperSubscription(y.subscriptionInfo.type,y.isPortal),E=D&&a.default.multiFactorEnabled&&
y.mfaEnabled&&!E):E=y.isPortal&&y.supportsEmail&&D&&y.mfaEnabled;return E};v.canViewLastLogin=function(y){y=v.getUserRole(y);return y.isAdmin()||y.canViewUsers()};v.canLoadLicensesUI=function(y){y=v.getUserRole(y);return y.isAdmin()||y.canViewOrgUsers()&&y.canManageLicenses()};v.canLoadMembersCard=function(y){y=v.getUserRole(y);return y.isAdmin()||y.canViewUsers()};v.canManageMembers=function(y){y=v.getUserRole(y);return y.isAdmin()||y.canViewUsers()&&(y.canUpdateUsers()||y.canDeleteUsers()||y.canChangeUserRoles()||
y.canManageLicenses())};v.canGetUserTypes=function(y){y=v.getUserRole(y);return y.isAdmin()||y.canInviteUsers()||y.canManageRoles()||y.canManageLicenses()};v.canGetUsersGroups=function(y){y=v.getUserRole(y);return y.isAdmin()||y.canViewUsers()&&y.canViewOrgGroups()};v.canGetLicenseTypes=function(y){y=v.getUserRole(y);return y.isAdmin()||y.canManageLicenses()||y.canInviteUsers()};v.canSelectMembers=function(y){y=v.getUserRole(y);return y.isAdmin()||y.canViewOrgUsers()&&(y.canUpdateUsers()||y.canDisableUsers()||
y.canManageLicenses()||y.canAssignUsersToOrgGroups()||y.canReassignOrgItems())};v.canUseMemberActions=function(y){y=v.getUserRole(y);return y.isAdmin()||y.canUpdateUsers()||y.canDeleteUsers()||y.canDisableUsers()||y.canChangeUserRoles()};v.checkUserCultureSetting=function(y,D){var E=new d.default,C=h.queryToObject(window.location.search.substring(1)),z=function(w){var A=-1<["hi"].indexOf(w);!w||r.default.locale===w.toLowerCase()||A||C.locale?E.resolve():(A=a.default.userInfo.culture,a.default.userInfo.username===
y.username&&(A&&(null===A||void 0===A?void 0:A.toLowerCase())===w.toLowerCase()||(a.default.userInfo.culture=w.toLowerCase(),(0,c.default)("arcgisLocale",a.default.userInfo.culture,{sameSite:"Strict"})),E.resolve(),window.location.reload()))};D?(D="".concat(a.default.restBaseUrl,"community/users/").concat(y.username),b.default.request({url:D}).then(function(w){return z(w.culture)},function(){return E.resolve()})):z(y.culture);return E};v.hasRequestedLegacyHomePageExtension=function(y){var D;return!y.isPortal&&
!0===(null===(D=y.portalProperties)||void 0===D?void 0:D.extendLegacyHomePage)};v.hasForcedLegacyHomePageExtension=function(y){var D;return!y.isPortal&&!0===(null===(D=y.portalProperties)||void 0===D?void 0:D.forceLegacyHomePage)};v.hasModernHomePageEnabled=function(y){var D,E;return y.isPortal?"modern"===(null===(E=y.portalProperties)||void 0===E?void 0:E.homePage)||v.isEnterpriseSetToModernHomePageOnly(y):"modern"===(null===(D=y.portalProperties)||void 0===D?void 0:D.homePage)||v.isOrgPastLegacyHomePageCutOffDate(y)};
v.hasLegacyHomePageEnabled=function(y){var D;return"legacy"===(null===(D=y.portalProperties)||void 0===D?void 0:D.homePage)};v.hasTransitionalHomePageEnabled=function(y){var D;return"transitional"===(null===(D=y.portalProperties)||void 0===D?void 0:D.homePage)||v.isEnterpriseSetToViewHomePageOnly(y)};v.hasViewOnlyHomePageEnabled=function(y){var D;return"viewOnly"===(null===(D=y.portalProperties)||void 0===D?void 0:D.homePage)};v.isOrgPastLegacyHomePageCutOffDate=function(y){var D=(new Date("June 30, 2020")).getTime();
return y.isPortal?!1:y.created>=D};v.isEnterpriseSetToModernHomePageOnly=function(y){var D;return y.isPortal&&"modernOnly"===(null===(D=y.portalProperties)||void 0===D?void 0:D.homePage)};v.isEnterpriseSetToViewHomePageOnly=function(y){var D;return y.isPortal&&"viewOnly"===(null===(D=y.portalProperties)||void 0===D?void 0:D.homePage)};v.hasLegacyHomePageDefaults=function(y){var D,E=null===(D=y.rotatorPanels)||void 0===D?void 0:D[0];D=!y.homePageFeaturedContent;var C=!y.description;y=!y.backgroundImage;
E=!E||"banner-2"===(null===E||void 0===E?void 0:E.id)&&-1<E.innerHTML.indexOf('\x3cimg src\x3d"images/banner-2.jpg" style\x3d"border-radius:0 0 10px 10px; margin-top:0; width:960px;height:180px;" /\x3e\x3cdiv style\x3d"position: absolute; bottom: 80px; left:80px; max-height:65px; width: 660px; margin:0;"\x3e\x3cimg src\x3d"')&&-1<E.innerHTML.indexOf(' class\x3d"esriFloatLeading esriTrailingMargin025" style\x3d"margin-bottom:0;max-height:100px;" /\x3e\x3cspan style\x3d"position:absolute;bottom:0;margin-bottom:0;line-height:normal; font-family:HelveticaNeue,Verdana; font-weight:600;font-size:32px;color:#369;"\x3e')&&
-1<(null===E||void 0===E?void 0:E.innerHTML.indexOf("\x3c/span\x3e\x3c/div\x3e"));return C&&y&&E&&D};v.neverLoggedInLabel=function(y,D){return t.default.substitute(e.default.myOrganization.notYetTooltip,{date:D})};v.lastLoginDate=function(y){var D=(0,m.default)(new Date).diff((0,m.default)(y),"days"),E=(0,m.default)(new Date).isSame(y,"day");return E?e.default.filters.today:!E&&2>D?e.default.myOrganization.membersTab.yesterday:0===y||-1===y||1E3===y?e.default.myOrganization.notYet:q.default.fullDate(y)};
v.openActionsFor=function(y){return e.default.myOrganization.membersTab.openActions.replace("${name}",y)};v.disabledStyle=function(y){return y?"org-member-disabled":""};v.disabledStyleAllowEvents=function(y){return y?"org-member-disabled__allow-events":""};v.disabledLinkClass=function(y){return y?"org-member-disable-link":""};v.shouldShowOnboard=function(y,D){var E=b.default.getCookie("esri_onboard",!0)||{},C=b.default.isPortal(),z=!!a.default.isDebug;z=C||z?document.domain:".arcgis.com";D||(D=new Date("June 30, 2019"));
var w=!E[y]&&new Date<D;!C&&E[y]&&new Date>=D&&(delete E[y],(0,c.default)("esri_onboard",u.default.stringify(E),{expires:new Date((new Date).getTime()+31556926E3),path:"/",domain:z,sameSite:"Strict"}));return w};v.createOnboardCookie=function(y){var D,E=b.default.getCookie("esri_onboard")||{},C=b.default.isPortal(),z=!!a.default.isDebug;C=C||z?document.domain:".arcgis.com";(0,c.default)("esri_onboard",u.default.stringify(l.__assign(l.__assign({},E),(D={},D[y]=!0,D))),{expires:new Date((new Date).getTime()+
31556926E3),path:"/",domain:C,sameSite:"Strict"})};v.createCookie=function(y,D,E,C){var z=b.default.isPortal(),w=!!a.default.isDebug;C=C||!a.default.self.urlKey?".arcgis.com":"".concat(a.default.self.urlKey,".").concat(a.default.self.customBaseUrl);z=z||w?document.domain:C;E*=864E5;(0,c.default)(y,u.default.stringify(l.__assign({},D)),{expires:new Date((new Date).getTime()+E),path:"/",domain:z})};v.isSearchTermValid=function(y,D){var E=/^[^%()';]+$/,C=/^[a-zA-Z0-9@._]+$/;return("username"===D?C:E).test(y)||
0===y.length};v.generateSearchErrorMessage=function(y,D){return{firstname:e.default.myOrganization.restrictedFirstNameCharacters,lastname:e.default.myOrganization.restrictedLastNameCharacters,username:e.default.createAccount.errors.restrictedCharacters,fullname:e.default.myOrganization.restrictedFullNameCharacters}[D]||e.default.controlBar.invalidSyntax};v.addBuiltInRolesAndTranslate=function(y,D){var E=[{id:"org_publisher",name:e.default.myOrganization.formatters.rolePublisher},{id:"org_admin",name:e.default.myOrganization.formatters.roleAdmin},
{id:"org_user",name:e.default.myOrganization.formatters.roleUser}];y=l.__spreadArray(l.__spreadArray([],y,!0),E,!0);y.forEach(function(C){var z=D.filter(function(w){return w.id===C.id})[0];z&&(C.name=z.name)});return y};v.highlight=function(y,D){D&&(y=new RegExp("(".concat(y,")"),"ig"),y=D.textContent.replace(y,'\x3cspan class\x3d"org-settings__search-highlight"\x3e$1\x3c/span\x3e'),D.innerHTML=y)};v.categorizeEntitlements=function(y){var D=v.getProExtensions(y);y=v.filterOutProExtensions(y);var E=
v.getProEntitlements(y),C=[],z=[],w=[],A=[];y.forEach(function(G){"User License Type Extension"===G.type?w.push(G):"Application SDK"===G.type?A.push(G):G.type&&(-1<G.type.indexOf("Application")||-1<G.type.indexOf("Web AppBuilder Widget"))?C.push(G):G.type&&-1===G.type.indexOf("Applcation")&&-1===G.type.indexOf("Web AppBuilder Widget")&&z.push(G)});return{pro:E,proExtensions:D,apps:C,data:z,userTypeExtensions:w,runtime:A}};v.pickRandomHomePageStockImage=function(){return"".concat(Math.floor(2*Math.random()+
1))};v.getTitleColorBasedOnStockImage=function(y){return n.default.includes(["4","5","6"],y)?"white-ramp":"dark-ramp"};v.isAdminRole=function(y){var D=!1;y.privileges?D=y.privileges.some(function(E){return-1<E.indexOf(":admin")}):"org_admin"===y.id&&(D=!0);return D};v.canSupportAdminRoles=function(y){if(!((null===y||void 0===y?0:y.name)&&(null===y||void 0===y?0:y.apps)))return!0;var D=a.default.self.isPortal,E=[];y.apps.forEach(function(z){var w;null===(w=z.entitlements)||void 0===w?void 0:w.forEach(function(A){E.push({key:A,
isViewOnly:z.isViewOnly})})});var C=E.find(function(z){return"orgwebsite"===z.key});return"insightsAnalystUT"===y.id||(D||!C||C.isViewOnly)&&y.supportsSignInOnlyFromUTApps?!1:!0};v.filterIncludedEntitlements=function(y){var D;return y.entitlements&&null!==(D=y.licenseType)&&void 0!==D&&D.apps?y.entitlements.filter(function(E){var C,z=!1;z=null===(C=y.licenseType)||void 0===C?void 0:C.apps.some(function(w){return w.isAppBundle?w.apps.some(function(A){return-1<A.entitlements.indexOf(E)}):-1<w.entitlements.indexOf(E)});
return!z}):y.entitlements};v.isIncludedThroughUserType=function(y,D){var E;return null===(E=y.licenseType)||void 0===E?void 0:E.apps.some(function(C){return C.isAppBundle?C.apps.some(function(z){return-1<z.entitlements.indexOf(D)}):-1<C.entitlements.indexOf(D)})};v.getAppTitle=function(y){var D,E=((null===(D=v._appSwitcherResponse)||void 0===D?void 0:D.apps)||[]).filter(function(C){return C.entitlement===y.entitlements[0]})[0];return 1===y.entitlements.length?(null===E||void 0===E?void 0:E.title)||
y.title||"":y.title||""};v.getClearEmptyFieldsStateForHelperService=function(y){return""===y?!0:void 0};v.adjustSanitizerForOrgSettingsUse=function(y){Object.keys(y._xssFilter.cssFilter.options.whiteList).forEach(function(D){y._xssFilter.cssFilter.options.whiteList[D]=!0});y._xssFilter.cssFilter.options.whiteList["-webkit-border-radius"]=!0;y._xssFilter.cssFilter.options.whiteList["-moz-border-radius"]=!0;y._xssFilter.cssFilter.options.whiteList["-o-border-radius"]=!0};v.sanitizeUrlOrgOverride=function(y){return y};
v.canShowDistributedCollaborations=function(y,D,E){if(y)return!0;var C=k.default.isPersonalUse(E,y);y=k.default.isDeveloperSubscription(E,y)||k.default.isTrialSubscription(E,y);D=D>=(new Date("June 29, 2021")).getTime();return!(C||y&&D)};v.checkForAutoMigratedOrgHomePage=function(y){var D,E=new d.default,C=null===y||void 0===y?void 0:y.portalUser,z=null===C||void 0===C?void 0:C.userRole;C=!(null===C||void 0===C||!C.orgId);z=!!((null===z||void 0===z?0:z.isAdmin())||(null===z||void 0===z?0:z.canManageWebsite()));
z=C&&z;C=v.hasModernHomePageEnabled(y);var w=v.hasLegacyHomePageEnabled(y),A=v.hasViewOnlyHomePageEnabled(y),G=v.hasTransitionalHomePageEnabled(y),F=v.hasLegacyHomePageDefaults(y),H=v.hasRequestedLegacyHomePageExtension(y),J=v.hasForcedLegacyHomePageExtension(y);H=!y.isPortal&&!C&&!G&&(H||w||!F)&&!J;w=y.isPortal&&!w&&!A;C=!C&&!G&&(w||H)&&!F&&!J;G=!y.isPortal&&!(null===(D=y.portalProperties)||void 0===D?0:D.homePage)&&v.isOrgPastLegacyHomePageCutOffDate(y)&&!C;z&&(C||G)?v.markOrgHomePageAsMigrated(y,
C).then(function(){E.resolve()},function(){E.resolve()}):E.resolve();return E};v.isTransitionalHomePage=function(y){var D,E=(null===y||void 0===y?void 0:y.portalUser)||(null===y||void 0===y?void 0:y.user),C=!(null===E||void 0===E||!E.orgId);E=!E&&0<(null===(D=y.id)||void 0===D?void 0:D.length);D=v.hasModernHomePageEnabled(y);var z=v.hasLegacyHomePageEnabled(y),w=v.hasViewOnlyHomePageEnabled(y),A=v.hasTransitionalHomePageEnabled(y),G=v.hasLegacyHomePageDefaults(y),F=v.hasRequestedLegacyHomePageExtension(y),
H=v.hasForcedLegacyHomePageExtension(y),J=(new Date("June 30, 2020")).getTime();J=y.created<J;var K=y.isPortal&&!z&&!w;y=!y.isPortal&&!D&&!A&&(F||z||!G)&&!H;return(C||E)&&(A||w||!D&&(K||y)&&!G&&J)};v.markOrgHomePageAsMigrated=function(y,D){var E=new d.default,C="".concat(b.default.getSecureUrl(a.default.restBaseUrl),"portals/self/update"),z=l.__assign(l.__assign({},y.portalProperties),{homePage:D?"transitional":"modern",extendLegacyHomePage:void 0});D={portalProperties:JSON.stringify(z)};b.default.request({url:C,
content:D},{usePost:!0}).then(function(w){var A;null!==w&&void 0!==w&&w.code||(a.default.self.portalProperties=y.portalProperties=z,w=null===(A=window.location)||void 0===A?void 0:A.pathname.replace(/^.*\//,"").replace(/\?.*$/,"").split(".html")[0].toLowerCase(),["","index","home-mobile"].includes(w)&&window.location.reload());E.resolve()},function(w){E.resolve()});return E};v.calculateHomePageLoadingProperties=function(y){var D,E,C,z=h.queryToObject(window.location.search.slice(1)),w=y.isPortal||
0<(null===(E=null===(D=y.user)||void 0===D?void 0:D.orgId)||void 0===E?void 0:E.length)||0<(null===(C=y.id)||void 0===C?void 0:C.length);D=v.hasModernHomePageEnabled(y)||!y.user;E=v.hasLegacyHomePageDefaults(y);C=v.isTransitionalHomePage(y);y=v.hasForcedLegacyHomePageExtension(y);z=w&&(!D||D&&!E)&&"true"===z.legacy;return{showModern:!w||w&&(D||E||C)&&!z&&!y,previewLegacy:z}};v.getBuyLink=function(y){if(!y.isPortal){if(y.subscriptionInfo){var D=y.subscriptionInfo.type;if("Personal Use"===D||"Student Use"===
D)return(y=y.ipCntryCode?a.default.purchaseUrls[y.ipCntryCode.toLowerCase()]:void 0)?y:a.default.purchaseUrls.renew}if(y.ipCntryCode)return y=y.ipCntryCode.toLowerCase(),a.default.purchaseUrls[y]}};v.injectHelpLink=function(y,D,E,C){y=y.getHelpUrl(E);return t.default.substitute(D,{linkStart:"\x3ccalcite-link ".concat(C?'id\x3d"'.concat(C,'"'):"",' href\x3d"').concat(y,'" target\x3d"_blank"\x3e'),linkEnd:"\x3c/calcite-link\x3e"})};v.baKeys=["BusinessAnlyst","baStdN","businessanlyst"];v.droneKeys=["drone2MapStdN",
"drone2MapAdvN"];v._proKeys=["desktopBasicN","desktopStdN","desktopAdvN"];v._proExtensionKeys="spatialAnalystN 3DAnalystN networkAnalystN geostatAnalystN dataReviewerN workflowMgrN dataInteropN defenseN FMVN businessBasicN businessStdN roadsHighwaysN publisherN productionMapN schematicsN trackingN aviationN airportsN maritimeN bathymetryN smpNAmericaN smpEuropeN smpAsiaPacificN smpMidEAfricaN smpLAmericaN smpJapanN LocRefDesktopN imageAnalystN locateXTN indoorsN".split(" ");v.orgSettingsSanitizerParams=
{whiteList:{a:"id class role target rel title".split(" "),blockquote:["cite","style"],center:[],col:["span","style","width","height"],colgroup:["style"],div:["align","id","class","role"],font:["face","class"],h1:["id","style"],h2:["id","style"],h3:["id","style"],h4:["id","style"],h5:["id","style"],iframe:["class","height","width","src"],img:["class"],input:["id","checked","class","name","type"],li:["style"],link:["href","rel","type"],meta:["name","content","http-equiv","charset"],p:["id","class"],
span:["id","class","role"],strike:[],strong:["style"],style:[],sub:[],sup:[],table:["id","background"],td:["background"],tdbody:[],thead:[],title:[],address:["id","class","style"],article:["id","class","style"],aside:["id","class","style"],details:["id","class","style"],figcaption:["id","class","style"],figure:["id","class","style"],footer:["id","class","style"],header:["id","class","style"],main:["id","class","style"],mark:["id","class","style"],nav:["id","class","style"],section:["id","class","style"],
summary:["id","class","style"],time:["id","class","style"]}};return v}()})},"moment/moment":function(){(function(f,B){"object"===typeof exports&&"undefined"!==typeof module?module.exports=B():"function"===typeof define&&define.amd?define(B):f.moment=B()})(this,function(){function f(){return Hd.apply(null,arguments)}function B(T){return T instanceof Array||"[object Array]"===Object.prototype.toString.call(T)}function l(T){return null!=T&&"[object Object]"===Object.prototype.toString.call(T)}function d(T,
ba){return Object.prototype.hasOwnProperty.call(T,ba)}function c(T){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(T).length;for(var ba in T)if(d(T,ba))return!1;return!0}function u(T){return void 0===T}function t(T){return"number"===typeof T||"[object Number]"===Object.prototype.toString.call(T)}function e(T){return T instanceof Date||"[object Date]"===Object.prototype.toString.call(T)}function r(T,ba){var sa=[],Ba,Va=T.length;for(Ba=0;Ba<Va;++Ba)sa.push(ba(T[Ba],Ba));return sa}
function m(T,ba){for(var sa in ba)d(ba,sa)&&(T[sa]=ba[sa]);d(ba,"toString")&&(T.toString=ba.toString);d(ba,"valueOf")&&(T.valueOf=ba.valueOf);return T}function a(T,ba,sa,Ba){return Ya(T,ba,sa,Ba,!0).utc()}function h(T){null==T._pf&&(T._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1});return T._pf}function q(T){if(null==
T._isValid){var ba=h(T),sa=Fc.call(ba.parsedDateParts,function(Ba){return null!=Ba});sa=!isNaN(T._d.getTime())&&0>ba.overflow&&!ba.empty&&!ba.invalidEra&&!ba.invalidMonth&&!ba.invalidWeekday&&!ba.weekdayMismatch&&!ba.nullInput&&!ba.invalidFormat&&!ba.userInvalidated&&(!ba.meridiem||ba.meridiem&&sa);T._strict&&(sa=sa&&0===ba.charsLeftOver&&0===ba.unusedTokens.length&&void 0===ba.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(T))return sa;T._isValid=sa}return T._isValid}function n(T){var ba=a(NaN);
null!=T?m(h(ba),T):h(ba).userInvalidated=!0;return ba}function k(T,ba){var sa,Ba=Mb.length;u(ba._isAMomentObject)||(T._isAMomentObject=ba._isAMomentObject);u(ba._i)||(T._i=ba._i);u(ba._f)||(T._f=ba._f);u(ba._l)||(T._l=ba._l);u(ba._strict)||(T._strict=ba._strict);u(ba._tzm)||(T._tzm=ba._tzm);u(ba._isUTC)||(T._isUTC=ba._isUTC);u(ba._offset)||(T._offset=ba._offset);u(ba._pf)||(T._pf=h(ba));u(ba._locale)||(T._locale=ba._locale);if(0<Ba)for(sa=0;sa<Ba;sa++){var Va=Mb[sa];var bb=ba[Va];u(bb)||(T[Va]=bb)}return T}
function g(T){k(this,T);this._d=new Date(null!=T._d?T._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===na&&(na=!0,f.updateOffset(this),na=!1)}function b(T){return T instanceof g||null!=T&&null!=T._isAMomentObject}function x(T,ba){var sa=!0;return m(function(){null!=f.deprecationHandler&&f.deprecationHandler(null,T);if(sa){var Ba=[],Va,bb,ib=arguments.length;for(Va=0;Va<ib;Va++){var rb="";if("object"===typeof arguments[Va]){rb+="\n["+Va+"] ";for(bb in arguments[0])d(arguments[0],bb)&&
(rb+=bb+": "+arguments[0][bb]+", ");rb=rb.slice(0,-2)}else rb=arguments[Va];Ba.push(rb)}Array.prototype.slice.call(Ba).join("");sa=!1}return ba.apply(this,arguments)},ba)}function v(T,ba){null!=f.deprecationHandler&&f.deprecationHandler(T,ba);Ra[T]||(Ra[T]=!0)}function y(T){return"undefined"!==typeof Function&&T instanceof Function||"[object Function]"===Object.prototype.toString.call(T)}function D(T,ba){var sa=m({},T),Ba;for(Ba in ba)d(ba,Ba)&&(l(T[Ba])&&l(ba[Ba])?(sa[Ba]={},m(sa[Ba],T[Ba]),m(sa[Ba],
ba[Ba])):null!=ba[Ba]?sa[Ba]=ba[Ba]:delete sa[Ba]);for(Ba in T)d(T,Ba)&&!d(ba,Ba)&&l(T[Ba])&&(sa[Ba]=m({},sa[Ba]));return sa}function E(T){null!=T&&this.set(T)}function C(T,ba,sa){var Ba=""+Math.abs(T);return(0<=T?sa?"+":"":"-")+Math.pow(10,Math.max(0,ba-Ba.length)).toString().substr(1)+Ba}function z(T,ba,sa,Ba){var Va=Ba;"string"===typeof Ba&&(Va=function(){return this[Ba]()});T&&(Wa[T]=Va);ba&&(Wa[ba[0]]=function(){return C(Va.apply(this,arguments),ba[1],ba[2])});sa&&(Wa[sa]=function(){return this.localeData().ordinal(Va.apply(this,
arguments),T)})}function w(T){return T.match(/\[[\s\S]/)?T.replace(/^\[|\]$/g,""):T.replace(/\\/g,"")}function A(T){var ba=T.match(Ka),sa;var Ba=0;for(sa=ba.length;Ba<sa;Ba++)ba[Ba]=Wa[ba[Ba]]?Wa[ba[Ba]]:w(ba[Ba]);return function(Va){var bb="",ib;for(ib=0;ib<sa;ib++)bb+=y(ba[ib])?ba[ib].call(Va,T):ba[ib];return bb}}function G(T,ba){if(!T.isValid())return T.localeData().invalidDate();ba=F(ba,T.localeData());Xa[ba]=Xa[ba]||A(ba);return Xa[ba](T)}function F(T,ba){function sa(Va){return ba.longDateFormat(Va)||
Va}var Ba=5;for(Ma.lastIndex=0;0<=Ba&&Ma.test(T);)T=T.replace(Ma,sa),Ma.lastIndex=0,--Ba;return T}function H(T,ba){var sa=T.toLowerCase();Pa[sa]=Pa[sa+"s"]=Pa[ba]=T}function J(T){return"string"===typeof T?Pa[T]||Pa[T.toLowerCase()]:void 0}function K(T){var ba={},sa,Ba;for(Ba in T)d(T,Ba)&&(sa=J(Ba))&&(ba[sa]=T[Ba]);return ba}function Q(T){var ba=[],sa;for(sa in T)d(T,sa)&&ba.push({unit:sa,priority:Za[sa]});ba.sort(function(Ba,Va){return Ba.priority-Va.priority});return ba}function P(T){return 0===
T%4&&0!==T%100||0===T%400}function I(T){return 0>T?Math.ceil(T)||0:Math.floor(T)}function N(T){T=+T;var ba=0;0!==T&&isFinite(T)&&(ba=I(T));return ba}function L(T,ba){return function(sa){return null!=sa?(Z(this,T,sa),f.updateOffset(this,ba),this):W(this,T)}}function W(T,ba){return T.isValid()?T._d["get"+(T._isUTC?"UTC":"")+ba]():NaN}function Z(T,ba,sa){if(T.isValid()&&!isNaN(sa))if("FullYear"===ba&&P(T.year())&&1===T.month()&&29===T.date())sa=N(sa),T._d["set"+(T._isUTC?"UTC":"")+ba](sa,T.month(),X(sa,
T.month()));else T._d["set"+(T._isUTC?"UTC":"")+ba](sa)}function aa(T,ba,sa){Gc[T]=y(ba)?ba:function(Ba,Va){return Ba&&sa?sa:ba}}function ia(T){return R(T.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(ba,sa,Ba,Va,bb){return sa||Ba||Va||bb}))}function R(T){return T.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function S(T,ba){var sa,Ba=ba;"string"===typeof T&&(T=[T]);t(ba)&&(Ba=function(bb,ib){ib[ba]=N(bb)});var Va=T.length;for(sa=0;sa<Va;sa++)rc[T[sa]]=Ba}function M(T,ba){S(T,
function(sa,Ba,Va,bb){Va._w=Va._w||{};ba(sa,Va._w,Va,bb)})}function X(T,ba){if(isNaN(T)||isNaN(ba))return NaN;var sa=(ba%12+12)%12;T+=(ba-sa)/12;return 1===sa?P(T)?29:28:31-sa%7%2}function fa(T,ba){if(!T.isValid())return T;if("string"===typeof ba)if(/^\d+$/.test(ba))ba=N(ba);else if(ba=T.localeData().monthsParse(ba),!t(ba))return T;var sa=Math.min(T.date(),X(T.year(),ba));T._d["set"+(T._isUTC?"UTC":"")+"Month"](ba,sa);return T}function ea(T){return null!=T?(fa(this,T),f.updateOffset(this,!0),this):
W(this,"Month")}function ha(){function T(ib,rb){return rb.length-ib.length}var ba=[],sa=[],Ba=[],Va;for(Va=0;12>Va;Va++){var bb=a([2E3,Va]);ba.push(this.monthsShort(bb,""));sa.push(this.months(bb,""));Ba.push(this.months(bb,""));Ba.push(this.monthsShort(bb,""))}ba.sort(T);sa.sort(T);Ba.sort(T);for(Va=0;12>Va;Va++)ba[Va]=R(ba[Va]),sa[Va]=R(sa[Va]);for(Va=0;24>Va;Va++)Ba[Va]=R(Ba[Va]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+Ba.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+
sa.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+ba.join("|")+")","i")}function ra(T,ba,sa,Ba,Va,bb,ib){100>T&&0<=T?(ba=new Date(T+400,ba,sa,Ba,Va,bb,ib),isFinite(ba.getFullYear())&&ba.setFullYear(T)):ba=new Date(T,ba,sa,Ba,Va,bb,ib);return ba}function Aa(T){if(100>T&&0<=T){var ba=Array.prototype.slice.call(arguments);ba[0]=T+400;ba=new Date(Date.UTC.apply(null,ba));isFinite(ba.getUTCFullYear())&&ba.setUTCFullYear(T)}else ba=new Date(Date.UTC.apply(null,arguments));return ba}function Ea(T,
ba,sa){sa=7+ba-sa;return-((7+Aa(T,0,sa).getUTCDay()-ba)%7)+sa-1}function va(T,ba,sa,Ba,Va){sa=(7+sa-Ba)%7;Ba=Ea(T,Ba,Va);Ba=1+7*(ba-1)+sa+Ba;0>=Ba?(ba=T-1,T=(P(ba)?366:365)+Ba):Ba>(P(T)?366:365)?(ba=T+1,T=Ba-(P(T)?366:365)):(ba=T,T=Ba);return{year:ba,dayOfYear:T}}function Ga(T,ba,sa){var Ba=Ea(T.year(),ba,sa);Ba=Math.floor((T.dayOfYear()-Ba-1)/7)+1;1>Ba?(T=T.year()-1,ba=Ba+ca(T,ba,sa)):Ba>ca(T.year(),ba,sa)?(ba=Ba-ca(T.year(),ba,sa),T=T.year()+1):(T=T.year(),ba=Ba);return{week:ba,year:T}}function ca(T,
ba,sa){var Ba=Ea(T,ba,sa);ba=Ea(T+1,ba,sa);return((P(T)?366:365)-Ba+ba)/7}function ja(T,ba){return T.slice(ba,7).concat(T.slice(0,ba))}function wa(T,ba,sa){var Ba;T=T.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],Ba=0;7>Ba;++Ba){var Va=a([2E3,1]).day(Ba);this._minWeekdaysParse[Ba]=this.weekdaysMin(Va,"").toLocaleLowerCase();this._shortWeekdaysParse[Ba]=this.weekdaysShort(Va,"").toLocaleLowerCase();this._weekdaysParse[Ba]=
this.weekdays(Va,"").toLocaleLowerCase()}if(sa)ba="dddd"===ba?Rb.call(this._weekdaysParse,T):"ddd"===ba?Rb.call(this._shortWeekdaysParse,T):Rb.call(this._minWeekdaysParse,T);else if("dddd"===ba){ba=Rb.call(this._weekdaysParse,T);if(-1!==ba)return ba;ba=Rb.call(this._shortWeekdaysParse,T);if(-1!==ba)return ba;ba=Rb.call(this._minWeekdaysParse,T)}else if("ddd"===ba){ba=Rb.call(this._shortWeekdaysParse,T);if(-1!==ba)return ba;ba=Rb.call(this._weekdaysParse,T);if(-1!==ba)return ba;ba=Rb.call(this._minWeekdaysParse,
T)}else{ba=Rb.call(this._minWeekdaysParse,T);if(-1!==ba)return ba;ba=Rb.call(this._weekdaysParse,T);if(-1!==ba)return ba;ba=Rb.call(this._shortWeekdaysParse,T)}return-1!==ba?ba:null}function za(){function T(sb,Gb){return Gb.length-sb.length}var ba=[],sa=[],Ba=[],Va=[],bb;for(bb=0;7>bb;bb++){var ib=a([2E3,1]).day(bb);var rb=R(this.weekdaysMin(ib,""));var vb=R(this.weekdaysShort(ib,""));ib=R(this.weekdays(ib,""));ba.push(rb);sa.push(vb);Ba.push(ib);Va.push(rb);Va.push(vb);Va.push(ib)}ba.sort(T);sa.sort(T);
Ba.sort(T);Va.sort(T);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+Va.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+Ba.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+sa.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+ba.join("|")+")","i")}function Fa(){return this.hours()%12||12}function O(T,ba){z(T,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),ba)})}function ya(T,ba){return ba._meridiemParse}
function Ha(T){return T?T.toLowerCase().replace("_","-"):T}function da(T){var ba=null;if(void 0===Ib[T]&&"undefined"!==typeof module&&module&&module.exports&&null!=T.match("^[^/\\\\]*$"))try{ba=Ic._abbr;var sa=require;sa("./locale/"+T);Oa(ba)}catch(Ba){Ib[T]=null}return Ib[T]}function Oa(T,ba){T&&(T=u(ba)?Ca(T):Na(T,ba))&&(Ic=T);return Ic._abbr}function Na(T,ba){if(null!==ba){var sa=Wc;ba.abbr=T;if(null!=Ib[T])v("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),
sa=Ib[T]._config;else if(null!=ba.parentLocale)if(null!=Ib[ba.parentLocale])sa=Ib[ba.parentLocale]._config;else if(sa=da(ba.parentLocale),null!=sa)sa=sa._config;else return Hc[ba.parentLocale]||(Hc[ba.parentLocale]=[]),Hc[ba.parentLocale].push({name:T,config:ba}),null;Ib[T]=new E(D(sa,ba));Hc[T]&&Hc[T].forEach(function(Ba){Na(Ba.name,Ba.config)});Oa(T);return Ib[T]}delete Ib[T];return null}function Ca(T){var ba;T&&T._locale&&T._locale._abbr&&(T=T._locale._abbr);if(!T)return Ic;if(!B(T)){if(ba=da(T))return ba;
T=[T]}a:{ba=0;for(var sa,Ba,Va,bb;ba<T.length;){bb=Ha(T[ba]).split("-");sa=bb.length;for(Ba=(Ba=Ha(T[ba+1]))?Ba.split("-"):null;0<sa;){if(Va=da(bb.slice(0,sa).join("-"))){T=Va;break a}if(Va=Ba&&Ba.length>=sa){b:{Va=void 0;var ib=Math.min(bb.length,Ba.length);for(Va=0;Va<ib;Va+=1)if(bb[Va]!==Ba[Va])break b;Va=ib}Va=Va>=sa-1}if(Va)break;sa--}ba++}T=Ic}return T}function V(T){var ba;(ba=T._a)&&-2===h(T).overflow&&(ba=0>ba[tc]||11<ba[tc]?tc:1>ba[mc]||ba[mc]>X(ba[Wb],ba[tc])?mc:0>ba[Jb]||24<ba[Jb]||24===
ba[Jb]&&(0!==ba[ac]||0!==ba[nc]||0!==ba[pc])?Jb:0>ba[ac]||59<ba[ac]?ac:0>ba[nc]||59<ba[nc]?nc:0>ba[pc]||999<ba[pc]?pc:-1,h(T)._overflowDayOfYear&&(ba<Wb||ba>mc)&&(ba=mc),h(T)._overflowWeeks&&-1===ba&&(ba=pd),h(T)._overflowWeekday&&-1===ba&&(ba=qd),h(T).overflow=ba);return T}function oa(T){var ba=T._i;var sa=ed.exec(ba)||fd.exec(ba);var Ba=Rc.length;var Va=Qc.length;if(sa){h(T).iso=!0;for(ba=0;ba<Ba;ba++)if(Rc[ba][1].exec(sa[1])){var bb=Rc[ba][0];var ib=!1!==Rc[ba][2];break}if(null==bb)T._isValid=
!1;else{if(sa[3]){ba=0;for(Ba=Va;ba<Ba;ba++)if(Qc[ba][1].exec(sa[3])){var rb=(sa[2]||" ")+Qc[ba][0];break}if(null==rb){T._isValid=!1;return}}if(ib||null==rb){if(sa[4])if(Kb.exec(sa[4]))var vb="Z";else{T._isValid=!1;return}T._f=bb+(rb||"")+(vb||"");xa(T)}else T._isValid=!1}}else T._isValid=!1}function pa(T){var ba=bd.exec(T._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(ba){var sa=ba[3],Ba=ba[2],Va=ba[5],bb=ba[6],ib=ba[7],rb=parseInt(ba[4],
10);sa=[49>=rb?2E3+rb:999>=rb?1900+rb:rb,Lb.indexOf(sa),parseInt(Ba,10),parseInt(Va,10),parseInt(bb,10)];ib&&sa.push(parseInt(ib,10));a:{if(ib=ba[1])if(ib=Tc.indexOf(ib),Ba=(new Date(sa[0],sa[1],sa[2])).getDay(),ib!==Ba){h(T).weekdayMismatch=!0;ib=T._isValid=!1;break a}ib=!0}ib&&(T._a=sa,(ib=ba[8])?ba=ad[ib]:ba[9]?ba=0:(ba=parseInt(ba[10],10),ib=ba%100,ba=(ba-ib)/100*60+ib),T._tzm=ba,T._d=Aa.apply(null,T._a),T._d.setUTCMinutes(T._d.getUTCMinutes()-T._tzm),h(T).rfc2822=!0)}else T._isValid=!1}function Y(T){var ba=
id.exec(T._i);null!==ba?T._d=new Date(+ba[1]):(oa(T),!1===T._isValid&&(delete T._isValid,pa(T),!1===T._isValid&&(delete T._isValid,T._strict?T._isValid=!1:f.createFromInputFallback(T))))}function ka(T,ba,sa){return null!=T?T:null!=ba?ba:sa}function ta(T){var ba=[];if(!T._d){var sa=new Date(f.now());sa=T._useUTC?[sa.getUTCFullYear(),sa.getUTCMonth(),sa.getUTCDate()]:[sa.getFullYear(),sa.getMonth(),sa.getDate()];if(T._w&&null==T._a[mc]&&null==T._a[tc]){var Ba=T._w;if(null!=Ba.GG||null!=Ba.W||null!=
Ba.E){var Va=1;var bb=4;var ib=ka(Ba.GG,T._a[Wb],Ga(Ua(),1,4).year);var rb=ka(Ba.W,1);var vb=ka(Ba.E,1);if(1>vb||7<vb)var sb=!0}else if(Va=T._locale._week.dow,bb=T._locale._week.doy,rb=Ga(Ua(),Va,bb),ib=ka(Ba.gg,T._a[Wb],rb.year),rb=ka(Ba.w,rb.week),null!=Ba.d){if(vb=Ba.d,0>vb||6<vb)sb=!0}else if(null!=Ba.e){if(vb=Ba.e+Va,0>Ba.e||6<Ba.e)sb=!0}else vb=Va;1>rb||rb>ca(ib,Va,bb)?h(T)._overflowWeeks=!0:null!=sb?h(T)._overflowWeekday=!0:(sb=va(ib,rb,vb,Va,bb),T._a[Wb]=sb.year,T._dayOfYear=sb.dayOfYear)}if(null!=
T._dayOfYear){sb=ka(T._a[Wb],sa[Wb]);if(T._dayOfYear>(P(sb)?366:365)||0===T._dayOfYear)h(T)._overflowDayOfYear=!0;sb=Aa(sb,0,T._dayOfYear);T._a[tc]=sb.getUTCMonth();T._a[mc]=sb.getUTCDate()}for(sb=0;3>sb&&null==T._a[sb];++sb)T._a[sb]=ba[sb]=sa[sb];for(;7>sb;sb++)T._a[sb]=ba[sb]=null==T._a[sb]?2===sb?1:0:T._a[sb];24===T._a[Jb]&&0===T._a[ac]&&0===T._a[nc]&&0===T._a[pc]&&(T._nextDay=!0,T._a[Jb]=0);T._d=(T._useUTC?Aa:ra).apply(null,ba);ba=T._useUTC?T._d.getUTCDay():T._d.getDay();null!=T._tzm&&T._d.setUTCMinutes(T._d.getUTCMinutes()-
T._tzm);T._nextDay&&(T._a[Jb]=24);T._w&&"undefined"!==typeof T._w.d&&T._w.d!==ba&&(h(T).weekdayMismatch=!0)}}function xa(T){if(T._f===f.ISO_8601)oa(T);else if(T._f===f.RFC_2822)pa(T);else{T._a=[];h(T).empty=!0;var ba=""+T._i,sa,Ba=ba.length,Va=0;var bb=F(T._f,T._locale).match(Ka)||[];var ib=bb.length;for(sa=0;sa<ib;sa++){var rb=bb[sa];var vb=ba;var sb=vb.match;var Gb=rb;var Lc=T;Gb=d(Gc,Gb)?Gc[Gb](Lc._strict,Lc._locale):new RegExp(ia(Gb));if(vb=(sb.call(vb,Gb)||[])[0])sb=ba.substr(0,ba.indexOf(vb)),
0<sb.length&&h(T).unusedInput.push(sb),ba=ba.slice(ba.indexOf(vb)+vb.length),Va+=vb.length;if(Wa[rb]){if(vb?h(T).empty=!1:h(T).unusedTokens.push(rb),sb=T,null!=vb&&d(rc,rb))rc[rb](vb,sb._a,sb,rb)}else T._strict&&!vb&&h(T).unusedTokens.push(rb)}h(T).charsLeftOver=Ba-Va;0<ba.length&&h(T).unusedInput.push(ba);12>=T._a[Jb]&&!0===h(T).bigHour&&0<T._a[Jb]&&(h(T).bigHour=void 0);h(T).parsedDateParts=T._a.slice(0);h(T).meridiem=T._meridiem;ba=T._a;sa=Jb;Ba=T._locale;bb=T._a[Jb];Va=T._meridiem;null!=Va&&(null!=
Ba.meridiemHour?bb=Ba.meridiemHour(bb,Va):null!=Ba.isPM&&((Ba=Ba.isPM(Va))&&12>bb&&(bb+=12),Ba||12!==bb||(bb=0)));ba[sa]=bb;ba=h(T).era;null!==ba&&(T._a[Wb]=T._locale.erasConvertYear(ba,T._a[Wb]));ta(T);V(T)}}function Da(T){if(!T._d){var ba=K(T._i);T._a=r([ba.year,ba.month,void 0===ba.day?ba.date:ba.day,ba.hour,ba.minute,ba.second,ba.millisecond],function(sa){return sa&&parseInt(sa,10)});ta(T)}}function Ja(T){var ba=T._i,sa=T._f;T._locale=T._locale||Ca(T._l);if(null===ba||void 0===sa&&""===ba)return n({nullInput:!0});
"string"===typeof ba&&(T._i=ba=T._locale.preparse(ba));if(b(ba))return new g(V(ba));if(e(ba))T._d=ba;else if(B(sa)){var Ba=!1,Va=T._f.length;if(0===Va)h(T).invalidFormat=!0,T._d=new Date(NaN);else{for(ba=0;ba<Va;ba++){sa=0;var bb=!1;var ib=k({},T);null!=T._useUTC&&(ib._useUTC=T._useUTC);ib._f=T._f[ba];xa(ib);q(ib)&&(bb=!0);sa+=h(ib).charsLeftOver;sa+=10*h(ib).unusedTokens.length;h(ib).score=sa;if(Ba)sa<rb&&(rb=sa,vb=ib);else if(null==rb||sa<rb||bb){var rb=sa;var vb=ib;bb&&(Ba=!0)}}m(T,vb||ib)}}else sa?
xa(T):La(T);q(T)||(T._d=null);return T}function La(T){var ba=T._i;u(ba)?T._d=new Date(f.now()):e(ba)?T._d=new Date(ba.valueOf()):"string"===typeof ba?Y(T):B(ba)?(T._a=r(ba.slice(0),function(sa){return parseInt(sa,10)}),ta(T)):l(ba)?Da(T):t(ba)?T._d=new Date(ba):f.createFromInputFallback(T)}function Ya(T,ba,sa,Ba,Va){var bb={};if(!0===ba||!1===ba)Ba=ba,ba=void 0;if(!0===sa||!1===sa)Ba=sa,sa=void 0;if(l(T)&&c(T)||B(T)&&0===T.length)T=void 0;bb._isAMomentObject=!0;bb._useUTC=bb._isUTC=Va;bb._l=sa;bb._i=
T;bb._f=ba;bb._strict=Ba;T=new g(V(Ja(bb)));T._nextDay&&(T.add(1,"d"),T._nextDay=void 0);return T}function Ua(T,ba,sa,Ba){return Ya(T,ba,sa,Ba,!1)}function Ta(T,ba){var sa;1===ba.length&&B(ba[0])&&(ba=ba[0]);if(!ba.length)return Ua();var Ba=ba[0];for(sa=1;sa<ba.length;++sa)if(!ba[sa].isValid()||ba[sa][T](Ba))Ba=ba[sa];return Ba}function ab(T){var ba=K(T);T=ba.year||0;var sa=ba.quarter||0,Ba=ba.month||0,Va=ba.week||ba.isoWeek||0,bb=ba.day||0,ib=ba.hour||0,rb=ba.minute||0,vb=ba.second||0,sb=ba.millisecond||
0;a:{var Gb,Lc=!1,Vc=Kc.length;for(Gb in ba)if(d(ba,Gb)&&(-1===Rb.call(Kc,Gb)||null!=ba[Gb]&&isNaN(ba[Gb]))){ba=!1;break a}for(Gb=0;Gb<Vc;++Gb)if(ba[Kc[Gb]]){if(Lc){ba=!1;break a}parseFloat(ba[Kc[Gb]])!==N(ba[Kc[Gb]])&&(Lc=!0)}ba=!0}this._isValid=ba;this._milliseconds=+sb+1E3*vb+6E4*rb+36E5*ib;this._days=+bb+7*Va;this._months=+Ba+3*sa+12*T;this._data={};this._locale=Ca();this._bubble()}function fb(T){return T instanceof ab}function kb(T){return 0>T?-1*Math.round(-1*T):Math.round(T)}function qb(T,
ba){z(T,0,0,function(){var sa=this.utcOffset(),Ba="+";0>sa&&(sa=-sa,Ba="-");return Ba+C(~~(sa/60),2)+ba+C(~~sa%60,2)})}function ob(T,ba){T=(ba||"").match(T);if(null===T)return null;T=((T[T.length-1]||[])+"").match(ld)||["-",0,0];ba=+(60*T[1])+N(T[2]);return 0===ba?0:"+"===T[0]?ba:-ba}function wb(T,ba){return ba._isUTC?(ba=ba.clone(),T=(b(T)||e(T)?T.valueOf():Ua(T).valueOf())-ba.valueOf(),ba._d.setTime(ba._d.valueOf()+T),f.updateOffset(ba,!1),ba):Ua(T).local()}function Fb(){return this.isValid()?this._isUTC&&
0===this._offset:!1}function yb(T,ba){var sa=T,Ba=null;fb(T)?sa={ms:T._milliseconds,d:T._days,M:T._months}:t(T)||!isNaN(+T)?(sa={},ba?sa[ba]=+T:sa.milliseconds=+T):(Ba=kd.exec(T))?(sa="-"===Ba[1]?-1:1,sa={y:0,d:N(Ba[mc])*sa,h:N(Ba[Jb])*sa,m:N(Ba[ac])*sa,s:N(Ba[nc])*sa,ms:N(kb(1E3*Ba[pc]))*sa}):(Ba=rd.exec(T))?(sa="-"===Ba[1]?-1:1,sa={y:lb(Ba[2],sa),M:lb(Ba[3],sa),w:lb(Ba[4],sa),d:lb(Ba[5],sa),h:lb(Ba[6],sa),m:lb(Ba[7],sa),s:lb(Ba[8],sa)}):null==sa?sa={}:"object"===typeof sa&&("from"in sa||"to"in sa)&&
(Ba=Ua(sa.from),sa=Ua(sa.to),Ba.isValid()&&sa.isValid()?(sa=wb(sa,Ba),Ba.isBefore(sa)?sa=Db(Ba,sa):(sa=Db(sa,Ba),sa.milliseconds=-sa.milliseconds,sa.months=-sa.months),Ba=sa):Ba={milliseconds:0,months:0},sa={},sa.ms=Ba.milliseconds,sa.M=Ba.months);sa=new ab(sa);fb(T)&&d(T,"_locale")&&(sa._locale=T._locale);fb(T)&&d(T,"_isValid")&&(sa._isValid=T._isValid);return sa}function lb(T,ba){T=T&&parseFloat(T.replace(",","."));return(isNaN(T)?0:T)*ba}function Db(T,ba){var sa={};sa.months=ba.month()-T.month()+
12*(ba.year()-T.year());T.clone().add(sa.months,"M").isAfter(ba)&&--sa.months;sa.milliseconds=+ba-+T.clone().add(sa.months,"M");return sa}function Sb(T,ba){return function(sa,Ba){if(null!==Ba&&!isNaN(+Ba)){v(ba,"moment()."+ba+"(period, number) is deprecated. Please use moment()."+ba+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");var Va=sa;sa=Ba;Ba=Va}sa=yb(sa,Ba);Eb(this,sa,T);return this}}function Eb(T,ba,sa,Ba){var Va=ba._milliseconds,bb=kb(ba._days);
ba=kb(ba._months);T.isValid()&&(Ba=null==Ba?!0:Ba,ba&&fa(T,W(T,"Month")+ba*sa),bb&&Z(T,"Date",W(T,"Date")+bb*sa),Va&&T._d.setTime(T._d.valueOf()+Va*sa),Ba&&f.updateOffset(T,bb||ba))}function Hb(T){return"string"===typeof T||T instanceof String}function Pb(T){var ba=B(T),sa=!1;ba&&(sa=0===T.filter(function(Ba){return!t(Ba)&&Hb(T)}).length);return ba&&sa}function Zb(T,ba){if(T.date()<ba.date())return-Zb(ba,T);var sa=12*(ba.year()-T.year())+(ba.month()-T.month()),Ba=T.clone().add(sa,"months");0>ba-Ba?
(T=T.clone().add(sa-1,"months"),ba=(ba-Ba)/(Ba-T)):(T=T.clone().add(sa+1,"months"),ba=(ba-Ba)/(T-Ba));return-(sa+ba)||0}function Qb(T){if(void 0===T)return this._locale._abbr;T=Ca(T);null!=T&&(this._locale=T);return this}function cc(){return this._locale}function Ub(T,ba){return(T%ba+ba)%ba}function wc(T,ba,sa){return 100>T&&0<=T?new Date(T+400,ba,sa)-126227808E5:(new Date(T,ba,sa)).valueOf()}function ic(T,ba,sa){return 100>T&&0<=T?Date.UTC(T+400,ba,sa)-126227808E5:Date.UTC(T,ba,sa)}function jc(T,
ba){return ba.erasAbbrRegex(T)}function xc(){var T=[],ba=[],sa=[],Ba=[],Va,bb=this.eras();var ib=0;for(Va=bb.length;ib<Va;++ib)ba.push(R(bb[ib].name)),T.push(R(bb[ib].abbr)),sa.push(R(bb[ib].narrow)),Ba.push(R(bb[ib].name)),Ba.push(R(bb[ib].abbr)),Ba.push(R(bb[ib].narrow));this._erasRegex=new RegExp("^("+Ba.join("|")+")","i");this._erasNameRegex=new RegExp("^("+ba.join("|")+")","i");this._erasAbbrRegex=new RegExp("^("+T.join("|")+")","i");this._erasNarrowRegex=new RegExp("^("+sa.join("|")+")","i")}
function yc(T,ba){z(0,[T,T.length],0,ba)}function Dc(T,ba,sa,Ba,Va){if(null==T)return Ga(this,Ba,Va).year;var bb=ca(T,Ba,Va);ba>bb&&(ba=bb);T=va(T,ba,sa,Ba,Va);T=Aa(T.year,0,T.dayOfYear);this.year(T.getUTCFullYear());this.month(T.getUTCMonth());this.date(T.getUTCDate());return this}function Nc(T,ba){ba[pc]=N(1E3*("0."+T))}function Ec(T){return T}function zc(T,ba,sa,Ba){var Va=Ca();ba=a().set(Ba,ba);return Va[sa](ba,T)}function sc(T,ba,sa){t(T)&&(ba=T,T=void 0);T=T||"";if(null!=ba)return zc(T,ba,sa,
"month");var Ba=[];for(ba=0;12>ba;ba++)Ba[ba]=zc(T,ba,sa,"month");return Ba}function Yb(T,ba,sa,Ba){"boolean"!==typeof T&&(sa=ba=T,T=!1);t(ba)&&(sa=ba,ba=void 0);ba=ba||"";var Va=Ca();T=T?Va._week.dow:0;Va=[];if(null!=sa)return zc(ba,(sa+T)%7,Ba,"day");for(sa=0;7>sa;sa++)Va[sa]=zc(ba,(sa+T)%7,Ba,"day");return Va}function Oc(T,ba,sa,Ba){ba=yb(ba,sa);T._milliseconds+=Ba*ba._milliseconds;T._days+=Ba*ba._days;T._months+=Ba*ba._months;return T._bubble()}function dc(T){return 0>T?Math.floor(T):Math.ceil(T)}
function ec(T){return function(){return this.as(T)}}function Xb(T){return function(){return this.isValid()?this._data[T]:NaN}}function Mc(T,ba,sa,Ba,Va){return Va.relativeTime(ba||1,!!sa,T,Ba)}function Nb(T){return(0<T)-(0>T)||+T}function $b(){if(!this.isValid())return this.localeData().invalidDate();var T=$c(this._milliseconds)/1E3,ba=$c(this._days),sa=$c(this._months),Ba=this.asSeconds();if(!Ba)return"P0D";var Va=I(T/60);var bb=I(Va/60);T%=60;Va%=60;var ib=I(sa/12);sa%=12;var rb=T?T.toFixed(3).replace(/\.?0+$/,
""):"";var vb=0>Ba?"-":"";var sb=Nb(this._months)!==Nb(Ba)?"-":"";var Gb=Nb(this._days)!==Nb(Ba)?"-":"";Ba=Nb(this._milliseconds)!==Nb(Ba)?"-":"";return vb+"P"+(ib?sb+ib+"Y":"")+(sa?sb+sa+"M":"")+(ba?Gb+ba+"D":"")+(bb||Va||T?"T":"")+(bb?Ba+bb+"H":"")+(Va?Ba+Va+"M":"")+(T?Ba+rb+"S":"")}var Fc=Array.prototype.some?Array.prototype.some:function(T){var ba=Object(this),sa=ba.length>>>0,Ba;for(Ba=0;Ba<sa;Ba++)if(Ba in ba&&T.call(this,ba[Ba],Ba,ba))return!0;return!1};var Mb=f.momentProperties=[],na=!1,Ra=
{};f.suppressDeprecationWarnings=!1;f.deprecationHandler=null;var Sa=Object.keys?Object.keys:function(T){var ba,sa=[];for(ba in T)d(T,ba)&&sa.push(ba);return sa};var Ka=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ma=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Xa={},Wa={},Pa={},Za={},cb=/\d/,eb=/\d\d/,nb=/\d{3}/,db=/\d{4}/,mb=/[+-]?\d{6}/,gb=
/\d\d?/,tb=/\d\d\d\d?/,Vb=/\d\d\d\d\d\d?/,Ac=/\d{1,3}/,Cc=/\d{1,4}/,Bc=/[+-]?\d{1,6}/,Bb=/\d+/,kc=/[+-]?\d+/,fc=/Z|[+-]\d\d:?\d\d/gi,lc=/Z|[+-]\d\d(?::?\d\d)?/gi,Pc=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;var Gc={};var rc={},Wb=0,tc=1,mc=2,Jb=3,ac=4,nc=5,pc=6,pd=7,qd=8;var Rb=Array.prototype.indexOf?Array.prototype.indexOf:function(T){var ba;for(ba=0;ba<this.length;++ba)if(this[ba]===T)return ba;
return-1};z("M",["MM",2],"Mo",function(){return this.month()+1});z("MMM",0,0,function(T){return this.localeData().monthsShort(this,T)});z("MMMM",0,0,function(T){return this.localeData().months(this,T)});H("month","M");Za.month=8;aa("M",gb);aa("MM",gb,eb);aa("MMM",function(T,ba){return ba.monthsShortRegex(T)});aa("MMMM",function(T,ba){return ba.monthsRegex(T)});S(["M","MM"],function(T,ba){ba[tc]=N(T)-1});S(["MMM","MMMM"],function(T,ba,sa,Ba){Ba=sa._locale.monthsParse(T,Ba,sa._strict);null!=Ba?ba[tc]=
Ba:h(sa).invalidMonth=T});var Lb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Sc=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;z("Y",0,0,function(){var T=this.year();return 9999>=T?C(T,4):"+"+T});z(0,["YY",2],0,function(){return this.year()%100});z(0,["YYYY",4],0,"year");z(0,["YYYYY",5],0,"year");z(0,["YYYYYY",6,!0],0,"year");H("year","y");Za.year=1;aa("Y",kc);aa("YY",gb,eb);aa("YYYY",Cc,db);aa("YYYYY",Bc,mb);aa("YYYYYY",Bc,mb);S(["YYYYY","YYYYYY"],Wb);S("YYYY",function(T,ba){ba[Wb]=2===T.length?
f.parseTwoDigitYear(T):N(T)});S("YY",function(T,ba){ba[Wb]=f.parseTwoDigitYear(T)});S("Y",function(T,ba){ba[Wb]=parseInt(T,10)});f.parseTwoDigitYear=function(T){return N(T)+(68<N(T)?1900:2E3)};var bc=L("FullYear",!0);z("w",["ww",2],"wo","week");z("W",["WW",2],"Wo","isoWeek");H("week","w");H("isoWeek","W");Za.week=5;Za.isoWeek=5;aa("w",gb);aa("ww",gb,eb);aa("W",gb);aa("WW",gb,eb);M(["w","ww","W","WW"],function(T,ba,sa,Ba){ba[Ba.substr(0,1)]=N(T)});z("d",0,"do","day");z("dd",0,0,function(T){return this.localeData().weekdaysMin(this,
T)});z("ddd",0,0,function(T){return this.localeData().weekdaysShort(this,T)});z("dddd",0,0,function(T){return this.localeData().weekdays(this,T)});z("e",0,0,"weekday");z("E",0,0,"isoWeekday");H("day","d");H("weekday","e");H("isoWeekday","E");Za.day=11;Za.weekday=11;Za.isoWeekday=11;aa("d",gb);aa("e",gb);aa("E",gb);aa("dd",function(T,ba){return ba.weekdaysMinRegex(T)});aa("ddd",function(T,ba){return ba.weekdaysShortRegex(T)});aa("dddd",function(T,ba){return ba.weekdaysRegex(T)});M(["dd","ddd","dddd"],
function(T,ba,sa,Ba){Ba=sa._locale.weekdaysParse(T,Ba,sa._strict);null!=Ba?ba.d=Ba:h(sa).invalidWeekday=T});M(["d","e","E"],function(T,ba,sa,Ba){ba[Ba]=N(T)});var Tc="Sun Mon Tue Wed Thu Fri Sat".split(" ");z("H",["HH",2],0,"hour");z("h",["hh",2],0,Fa);z("k",["kk",2],0,function(){return this.hours()||24});z("hmm",0,0,function(){return""+Fa.apply(this)+C(this.minutes(),2)});z("hmmss",0,0,function(){return""+Fa.apply(this)+C(this.minutes(),2)+C(this.seconds(),2)});z("Hmm",0,0,function(){return""+this.hours()+
C(this.minutes(),2)});z("Hmmss",0,0,function(){return""+this.hours()+C(this.minutes(),2)+C(this.seconds(),2)});O("a",!0);O("A",!1);H("hour","h");Za.hour=13;aa("a",ya);aa("A",ya);aa("H",gb);aa("h",gb);aa("k",gb);aa("HH",gb,eb);aa("hh",gb,eb);aa("kk",gb,eb);aa("hmm",tb);aa("hmmss",Vb);aa("Hmm",tb);aa("Hmmss",Vb);S(["H","HH"],Jb);S(["k","kk"],function(T,ba,sa){T=N(T);ba[Jb]=24===T?0:T});S(["a","A"],function(T,ba,sa){sa._isPm=sa._locale.isPM(T);sa._meridiem=T});S(["h","hh"],function(T,ba,sa){ba[Jb]=N(T);
h(sa).bigHour=!0});S("hmm",function(T,ba,sa){var Ba=T.length-2;ba[Jb]=N(T.substr(0,Ba));ba[ac]=N(T.substr(Ba));h(sa).bigHour=!0});S("hmmss",function(T,ba,sa){var Ba=T.length-4,Va=T.length-2;ba[Jb]=N(T.substr(0,Ba));ba[ac]=N(T.substr(Ba,2));ba[nc]=N(T.substr(Va));h(sa).bigHour=!0});S("Hmm",function(T,ba,sa){sa=T.length-2;ba[Jb]=N(T.substr(0,sa));ba[ac]=N(T.substr(sa))});S("Hmmss",function(T,ba,sa){sa=T.length-4;var Ba=T.length-2;ba[Jb]=N(T.substr(0,sa));ba[ac]=N(T.substr(sa,2));ba[nc]=N(T.substr(Ba))});
var dd=L("Hours",!0),Wc={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",
hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:Lb,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:Tc,meridiemParse:/[ap]\.?m?\.?/i},Ib={},Hc={},Ic,ed=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
fd=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Kb=/Z|[+-]\d\d(?::?\d\d)?/,Rc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",
/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Qc=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],id=/^\/?Date\((-?\d+)/i,bd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,
ad={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};f.createFromInputFallback=x("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(T){T._d=new Date(T._i+(T._useUTC?" UTC":""))});f.ISO_8601=function(){};f.RFC_2822=function(){};
var jd=x("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var T=Ua.apply(null,arguments);return this.isValid()&&T.isValid()?T<this?this:T:n()}),cd=x("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var T=Ua.apply(null,arguments);return this.isValid()&&T.isValid()?T>this?this:T:n()}),Kc="year quarter month week day hour minute second millisecond".split(" ");qb("Z",":");qb("ZZ",
"");aa("Z",lc);aa("ZZ",lc);S(["Z","ZZ"],function(T,ba,sa){sa._useUTC=!0;sa._tzm=ob(lc,T)});var ld=/([\+\-]|\d\d)/gi;f.updateOffset=function(){};var kd=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,rd=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;yb.fn=ab.prototype;yb.invalid=function(){return yb(NaN)};var gc=Sb(1,"add"),hc=Sb(-1,"subtract");f.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";
f.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Xc=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(T){return void 0===T?this.localeData():this.locale(T)});z("N",0,0,"eraAbbr");z("NN",0,0,"eraAbbr");z("NNN",0,0,"eraAbbr");z("NNNN",0,0,"eraName");z("NNNNN",0,0,"eraNarrow");z("y",["y",1],"yo","eraYear");z("y",["yy",2],0,"eraYear");z("y",["yyy",3],0,"eraYear");z("y",["yyyy",4],0,"eraYear");aa("N",
jc);aa("NN",jc);aa("NNN",jc);aa("NNNN",function(T,ba){return ba.erasNameRegex(T)});aa("NNNNN",function(T,ba){return ba.erasNarrowRegex(T)});S(["N","NN","NNN","NNNN","NNNNN"],function(T,ba,sa,Ba){(ba=sa._locale.erasParse(T,Ba,sa._strict))?h(sa).era=ba:h(sa).invalidEra=T});aa("y",Bb);aa("yy",Bb);aa("yyy",Bb);aa("yyyy",Bb);aa("yo",function(T,ba){return ba._eraYearOrdinalRegex||Bb});S(["y","yy","yyy","yyyy"],Wb);S(["yo"],function(T,ba,sa,Ba){var Va;sa._locale._eraYearOrdinalRegex&&(Va=T.match(sa._locale._eraYearOrdinalRegex));
ba[Wb]=sa._locale.eraYearOrdinalParse?sa._locale.eraYearOrdinalParse(T,Va):parseInt(T,10)});z(0,["gg",2],0,function(){return this.weekYear()%100});z(0,["GG",2],0,function(){return this.isoWeekYear()%100});yc("gggg","weekYear");yc("ggggg","weekYear");yc("GGGG","isoWeekYear");yc("GGGGG","isoWeekYear");H("weekYear","gg");H("isoWeekYear","GG");Za.weekYear=1;Za.isoWeekYear=1;aa("G",kc);aa("g",kc);aa("GG",gb,eb);aa("gg",gb,eb);aa("GGGG",Cc,db);aa("gggg",Cc,db);aa("GGGGG",Bc,mb);aa("ggggg",Bc,mb);M(["gggg",
"ggggg","GGGG","GGGGG"],function(T,ba,sa,Ba){ba[Ba.substr(0,2)]=N(T)});M(["gg","GG"],function(T,ba,sa,Ba){ba[Ba]=f.parseTwoDigitYear(T)});z("Q",0,"Qo","quarter");H("quarter","Q");Za.quarter=7;aa("Q",cb);S("Q",function(T,ba){ba[tc]=3*(N(T)-1)});z("D",["DD",2],"Do","date");H("date","D");Za.date=9;aa("D",gb);aa("DD",gb,eb);aa("Do",function(T,ba){return T?ba._dayOfMonthOrdinalParse||ba._ordinalParse:ba._dayOfMonthOrdinalParseLenient});S(["D","DD"],mc);S("Do",function(T,ba){ba[mc]=N(T.match(gb)[0])});
var Yc=L("Date",!0);z("DDD",["DDDD",3],"DDDo","dayOfYear");H("dayOfYear","DDD");Za.dayOfYear=4;aa("DDD",Ac);aa("DDDD",nb);S(["DDD","DDDD"],function(T,ba,sa){sa._dayOfYear=N(T)});z("m",["mm",2],0,"minute");H("minute","m");Za.minute=14;aa("m",gb);aa("mm",gb,eb);S(["m","mm"],ac);var Zc=L("Minutes",!1);z("s",["ss",2],0,"second");H("second","s");Za.second=15;aa("s",gb);aa("ss",gb,eb);S(["s","ss"],nc);var gd=L("Seconds",!1);z("S",0,0,function(){return~~(this.millisecond()/100)});z(0,["SS",2],0,function(){return~~(this.millisecond()/
10)});z(0,["SSS",3],0,"millisecond");z(0,["SSSS",4],0,function(){return 10*this.millisecond()});z(0,["SSSSS",5],0,function(){return 100*this.millisecond()});z(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});z(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});z(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});z(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});H("millisecond","ms");Za.millisecond=16;aa("S",Ac,cb);aa("SS",Ac,eb);aa("SSS",Ac,nb);var qc;
for(qc="SSSS";9>=qc.length;qc+="S")aa(qc,Bb);for(qc="S";9>=qc.length;qc+="S")S(qc,Nc);var sd=L("Milliseconds",!1);z("z",0,0,"zoneAbbr");z("zz",0,0,"zoneName");var hb=g.prototype;hb.add=gc;hb.calendar=function(T,ba){if(1===arguments.length)if(arguments[0]){var sa=arguments[0],Ba;if(!(Ba=b(sa)||e(sa)||Hb(sa)||t(sa)||Pb(sa))){Ba=l(sa)&&!c(sa);var Va=!1,bb="years year y months month M days day d dates date D hours hour h minutes minute m seconds second s milliseconds millisecond ms".split(" "),ib,rb=
bb.length;for(ib=0;ib<rb;ib+=1){var vb=bb[ib];Va=Va||d(sa,vb)}Ba=Ba&&Va}if(Ba||null===sa||void 0===sa)T=arguments[0],ba=void 0;else{sa=arguments[0];Ba=l(sa)&&!c(sa);Va=!1;bb="sameDay nextDay lastDay nextWeek lastWeek sameElse".split(" ");for(ib=0;ib<bb.length;ib+=1)vb=bb[ib],Va=Va||d(sa,vb);Ba&&Va&&(ba=arguments[0],T=void 0)}}else ba=T=void 0;sa=T||Ua();Ba=wb(sa,this).startOf("day");Ba=f.calendarFormat(this,Ba)||"sameElse";Va=ba&&(y(ba[Ba])?ba[Ba].call(this,sa):ba[Ba]);return this.format(Va||this.localeData().calendar(Ba,
this,Ua(sa)))};hb.clone=function(){return new g(this)};hb.diff=function(T,ba,sa){if(!this.isValid())return NaN;T=wb(T,this);if(!T.isValid())return NaN;var Ba=6E4*(T.utcOffset()-this.utcOffset());ba=J(ba);switch(ba){case "year":ba=Zb(this,T)/12;break;case "month":ba=Zb(this,T);break;case "quarter":ba=Zb(this,T)/3;break;case "second":ba=(this-T)/1E3;break;case "minute":ba=(this-T)/6E4;break;case "hour":ba=(this-T)/36E5;break;case "day":ba=(this-T-Ba)/864E5;break;case "week":ba=(this-T-Ba)/6048E5;break;
default:ba=this-T}return sa?ba:I(ba)};hb.endOf=function(T){T=J(T);if(void 0===T||"millisecond"===T||!this.isValid())return this;var ba=this._isUTC?ic:wc;switch(T){case "year":var sa=ba(this.year()+1,0,1)-1;break;case "quarter":sa=ba(this.year(),this.month()-this.month()%3+3,1)-1;break;case "month":sa=ba(this.year(),this.month()+1,1)-1;break;case "week":sa=ba(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case "isoWeek":sa=ba(this.year(),this.month(),this.date()-(this.isoWeekday()-
1)+7)-1;break;case "day":case "date":sa=ba(this.year(),this.month(),this.date()+1)-1;break;case "hour":sa=this._d.valueOf();sa+=36E5-Ub(sa+(this._isUTC?0:6E4*this.utcOffset()),36E5)-1;break;case "minute":sa=this._d.valueOf();sa+=6E4-Ub(sa,6E4)-1;break;case "second":sa=this._d.valueOf(),sa+=1E3-Ub(sa,1E3)-1}this._d.setTime(sa);f.updateOffset(this,!0);return this};hb.format=function(T){T||(T=this.isUtc()?f.defaultFormatUtc:f.defaultFormat);T=G(this,T);return this.localeData().postformat(T)};hb.from=
function(T,ba){return this.isValid()&&(b(T)&&T.isValid()||Ua(T).isValid())?yb({to:this,from:T}).locale(this.locale()).humanize(!ba):this.localeData().invalidDate()};hb.fromNow=function(T){return this.from(Ua(),T)};hb.to=function(T,ba){return this.isValid()&&(b(T)&&T.isValid()||Ua(T).isValid())?yb({from:this,to:T}).locale(this.locale()).humanize(!ba):this.localeData().invalidDate()};hb.toNow=function(T){return this.to(Ua(),T)};hb.get=function(T){T=J(T);return y(this[T])?this[T]():this};hb.invalidAt=
function(){return h(this).overflow};hb.isAfter=function(T,ba){T=b(T)?T:Ua(T);if(!this.isValid()||!T.isValid())return!1;ba=J(ba)||"millisecond";return"millisecond"===ba?this.valueOf()>T.valueOf():T.valueOf()<this.clone().startOf(ba).valueOf()};hb.isBefore=function(T,ba){T=b(T)?T:Ua(T);if(!this.isValid()||!T.isValid())return!1;ba=J(ba)||"millisecond";return"millisecond"===ba?this.valueOf()<T.valueOf():this.clone().endOf(ba).valueOf()<T.valueOf()};hb.isBetween=function(T,ba,sa,Ba){T=b(T)?T:Ua(T);ba=
b(ba)?ba:Ua(ba);if(!(this.isValid()&&T.isValid()&&ba.isValid()))return!1;Ba=Ba||"()";return("("===Ba[0]?this.isAfter(T,sa):!this.isBefore(T,sa))&&(")"===Ba[1]?this.isBefore(ba,sa):!this.isAfter(ba,sa))};hb.isSame=function(T,ba){T=b(T)?T:Ua(T);if(!this.isValid()||!T.isValid())return!1;ba=J(ba)||"millisecond";if("millisecond"===ba)return this.valueOf()===T.valueOf();T=T.valueOf();return this.clone().startOf(ba).valueOf()<=T&&T<=this.clone().endOf(ba).valueOf()};hb.isSameOrAfter=function(T,ba){return this.isSame(T,
ba)||this.isAfter(T,ba)};hb.isSameOrBefore=function(T,ba){return this.isSame(T,ba)||this.isBefore(T,ba)};hb.isValid=function(){return q(this)};hb.lang=Xc;hb.locale=Qb;hb.localeData=cc;hb.max=cd;hb.min=jd;hb.parsingFlags=function(){return m({},h(this))};hb.set=function(T,ba){if("object"===typeof T){T=K(T);ba=Q(T);var sa,Ba=ba.length;for(sa=0;sa<Ba;sa++)this[ba[sa].unit](T[ba[sa].unit])}else if(T=J(T),y(this[T]))return this[T](ba);return this};hb.startOf=function(T){T=J(T);if(void 0===T||"millisecond"===
T||!this.isValid())return this;var ba=this._isUTC?ic:wc;switch(T){case "year":var sa=ba(this.year(),0,1);break;case "quarter":sa=ba(this.year(),this.month()-this.month()%3,1);break;case "month":sa=ba(this.year(),this.month(),1);break;case "week":sa=ba(this.year(),this.month(),this.date()-this.weekday());break;case "isoWeek":sa=ba(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case "day":case "date":sa=ba(this.year(),this.month(),this.date());break;case "hour":sa=this._d.valueOf();
sa-=Ub(sa+(this._isUTC?0:6E4*this.utcOffset()),36E5);break;case "minute":sa=this._d.valueOf();sa-=Ub(sa,6E4);break;case "second":sa=this._d.valueOf(),sa-=Ub(sa,1E3)}this._d.setTime(sa);f.updateOffset(this,!0);return this};hb.subtract=hc;hb.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};hb.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),
milliseconds:this.milliseconds()}};hb.toDate=function(){return new Date(this.valueOf())};hb.toISOString=function(T){if(!this.isValid())return null;var ba=(T=!0!==T)?this.clone().utc():this;return 0>ba.year()||9999<ba.year()?G(ba,T?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):y(Date.prototype.toISOString)?T?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",G(ba,"Z")):G(ba,T?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};
hb.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var T="moment",ba="";this.isLocal()||(T=0===this.utcOffset()?"moment.utc":"moment.parseZone",ba="Z");T="["+T+'("]';var sa=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY";return this.format(T+sa+"-MM-DD[T]HH:mm:ss.SSS"+(ba+'[")]'))};"undefined"!==typeof Symbol&&null!=Symbol.for&&(hb[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment\x3c"+this.format()+"\x3e"});hb.toJSON=function(){return this.isValid()?
this.toISOString():null};hb.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};hb.unix=function(){return Math.floor(this.valueOf()/1E3)};hb.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};hb.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};hb.eraName=function(){var T,ba=this.localeData().eras();var sa=0;for(T=ba.length;sa<T;++sa){var Ba=this.clone().startOf("day").valueOf();
if(ba[sa].since<=Ba&&Ba<=ba[sa].until||ba[sa].until<=Ba&&Ba<=ba[sa].since)return ba[sa].name}return""};hb.eraNarrow=function(){var T,ba=this.localeData().eras();var sa=0;for(T=ba.length;sa<T;++sa){var Ba=this.clone().startOf("day").valueOf();if(ba[sa].since<=Ba&&Ba<=ba[sa].until||ba[sa].until<=Ba&&Ba<=ba[sa].since)return ba[sa].narrow}return""};hb.eraAbbr=function(){var T,ba=this.localeData().eras();var sa=0;for(T=ba.length;sa<T;++sa){var Ba=this.clone().startOf("day").valueOf();if(ba[sa].since<=
Ba&&Ba<=ba[sa].until||ba[sa].until<=Ba&&Ba<=ba[sa].since)return ba[sa].abbr}return""};hb.eraYear=function(){var T,ba=this.localeData().eras();var sa=0;for(T=ba.length;sa<T;++sa){var Ba=ba[sa].since<=ba[sa].until?1:-1;var Va=this.clone().startOf("day").valueOf();if(ba[sa].since<=Va&&Va<=ba[sa].until||ba[sa].until<=Va&&Va<=ba[sa].since)return(this.year()-f(ba[sa].since).year())*Ba+ba[sa].offset}return this.year()};hb.year=bc;hb.isLeapYear=function(){return P(this.year())};hb.weekYear=function(T){return Dc.call(this,
T,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};hb.isoWeekYear=function(T){return Dc.call(this,T,this.isoWeek(),this.isoWeekday(),1,4)};hb.quarter=hb.quarters=function(T){return null==T?Math.ceil((this.month()+1)/3):this.month(3*(T-1)+this.month()%3)};hb.month=ea;hb.daysInMonth=function(){return X(this.year(),this.month())};hb.week=hb.weeks=function(T){var ba=this.localeData().week(this);return null==T?ba:this.add(7*(T-ba),"d")};hb.isoWeek=hb.isoWeeks=function(T){var ba=
Ga(this,1,4).week;return null==T?ba:this.add(7*(T-ba),"d")};hb.weeksInYear=function(){var T=this.localeData()._week;return ca(this.year(),T.dow,T.doy)};hb.weeksInWeekYear=function(){var T=this.localeData()._week;return ca(this.weekYear(),T.dow,T.doy)};hb.isoWeeksInYear=function(){return ca(this.year(),1,4)};hb.isoWeeksInISOWeekYear=function(){return ca(this.isoWeekYear(),1,4)};hb.date=Yc;hb.day=hb.days=function(T){if(!this.isValid())return null!=T?this:NaN;var ba=this._isUTC?this._d.getUTCDay():this._d.getDay();
if(null!=T){var sa=this.localeData();"string"===typeof T&&(isNaN(T)?(T=sa.weekdaysParse(T),T="number"===typeof T?T:null):T=parseInt(T,10));return this.add(T-ba,"d")}return ba};hb.weekday=function(T){if(!this.isValid())return null!=T?this:NaN;var ba=(this.day()+7-this.localeData()._week.dow)%7;return null==T?ba:this.add(T-ba,"d")};hb.isoWeekday=function(T){if(!this.isValid())return null!=T?this:NaN;if(null!=T){var ba=this.localeData();T="string"===typeof T?ba.weekdaysParse(T)%7||7:isNaN(T)?null:T;
return this.day(this.day()%7?T:T-7)}return this.day()||7};hb.dayOfYear=function(T){var ba=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==T?ba:this.add(T-ba,"d")};hb.hour=hb.hours=dd;hb.minute=hb.minutes=Zc;hb.second=hb.seconds=gd;hb.millisecond=hb.milliseconds=sd;hb.utcOffset=function(T,ba,sa){var Ba=this._offset||0,Va;if(!this.isValid())return null!=T?this:NaN;if(null!=T){if("string"===typeof T){if(T=ob(lc,T),null===T)return this}else 16>Math.abs(T)&&
!sa&&(T*=60);!this._isUTC&&ba&&(Va=-Math.round(this._d.getTimezoneOffset()));this._offset=T;this._isUTC=!0;null!=Va&&this.add(Va,"m");Ba!==T&&(!ba||this._changeInProgress?Eb(this,yb(T-Ba,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,f.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?Ba:-Math.round(this._d.getTimezoneOffset())};hb.utc=function(T){return this.utcOffset(0,T)};hb.local=function(T){this._isUTC&&(this.utcOffset(0,T),this._isUTC=!1,T&&this.subtract(-Math.round(this._d.getTimezoneOffset()),
"m"));return this};hb.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var T=ob(fc,this._i);null!=T?this.utcOffset(T):this.utcOffset(0,!0)}return this};hb.hasAlignedHourOffset=function(T){if(!this.isValid())return!1;T=T?Ua(T).utcOffset():0;return 0===(this.utcOffset()-T)%60};hb.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};hb.isLocal=function(){return this.isValid()?
!this._isUTC:!1};hb.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};hb.isUtc=Fb;hb.isUTC=Fb;hb.zoneAbbr=function(){return this._isUTC?"UTC":""};hb.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};hb.dates=x("dates accessor is deprecated. Use date instead.",Yc);hb.months=x("months accessor is deprecated. Use month instead",ea);hb.years=x("years accessor is deprecated. Use year instead",bc);hb.zone=x("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",
function(T,ba){return null!=T?("string"!==typeof T&&(T=-T),this.utcOffset(T,ba),this):-this.utcOffset()});hb.isDSTShifted=x("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!u(this._isDSTShifted))return this._isDSTShifted;var T={};k(T,this);T=Ja(T);if(T._a){var ba=T._isUTC?a(T._a):Ua(T._a);var sa;if(sa=this.isValid()){T=T._a;ba=ba.toArray();sa=Math.min(T.length,ba.length);var Ba=Math.abs(T.length-ba.length),Va=0,bb;for(bb=0;bb<
sa;bb++)N(T[bb])!==N(ba[bb])&&Va++;sa=0<Va+Ba}this._isDSTShifted=sa}else this._isDSTShifted=!1;return this._isDSTShifted});var Cb=E.prototype;Cb.calendar=function(T,ba,sa){T=this._calendar[T]||this._calendar.sameElse;return y(T)?T.call(ba,sa):T};Cb.longDateFormat=function(T){var ba=this._longDateFormat[T],sa=this._longDateFormat[T.toUpperCase()];if(ba||!sa)return ba;this._longDateFormat[T]=sa.match(Ka).map(function(Ba){return"MMMM"===Ba||"MM"===Ba||"DD"===Ba||"dddd"===Ba?Ba.slice(1):Ba}).join("");
return this._longDateFormat[T]};Cb.invalidDate=function(){return this._invalidDate};Cb.ordinal=function(T){return this._ordinal.replace("%d",T)};Cb.preparse=Ec;Cb.postformat=Ec;Cb.relativeTime=function(T,ba,sa,Ba){var Va=this._relativeTime[sa];return y(Va)?Va(T,ba,sa,Ba):Va.replace(/%d/i,T)};Cb.pastFuture=function(T,ba){T=this._relativeTime[0<T?"future":"past"];return y(T)?T(ba):T.replace(/%s/i,ba)};Cb.set=function(T){var ba;for(ba in T)if(d(T,ba)){var sa=T[ba];y(sa)?this[ba]=sa:this["_"+ba]=sa}this._config=
T;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};Cb.eras=function(T,ba){var sa=this._eras||Ca("en")._eras;T=0;for(ba=sa.length;T<ba;++T){switch(typeof sa[T].since){case "string":var Ba=f(sa[T].since).startOf("day");sa[T].since=Ba.valueOf()}switch(typeof sa[T].until){case "undefined":sa[T].until=Infinity;break;case "string":Ba=f(sa[T].until).startOf("day").valueOf(),sa[T].until=Ba.valueOf()}}return sa};Cb.erasParse=
function(T,ba,sa){var Ba,Va=this.eras();T=T.toUpperCase();var bb=0;for(Ba=Va.length;bb<Ba;++bb){var ib=Va[bb].name.toUpperCase();var rb=Va[bb].abbr.toUpperCase();var vb=Va[bb].narrow.toUpperCase();if(sa)switch(ba){case "N":case "NN":case "NNN":if(rb===T)return Va[bb];break;case "NNNN":if(ib===T)return Va[bb];break;case "NNNNN":if(vb===T)return Va[bb]}else if(0<=[ib,rb,vb].indexOf(T))return Va[bb]}};Cb.erasConvertYear=function(T,ba){var sa=T.since<=T.until?1:-1;return void 0===ba?f(T.since).year():
f(T.since).year()+(ba-T.offset)*sa};Cb.erasAbbrRegex=function(T){d(this,"_erasAbbrRegex")||xc.call(this);return T?this._erasAbbrRegex:this._erasRegex};Cb.erasNameRegex=function(T){d(this,"_erasNameRegex")||xc.call(this);return T?this._erasNameRegex:this._erasRegex};Cb.erasNarrowRegex=function(T){d(this,"_erasNarrowRegex")||xc.call(this);return T?this._erasNarrowRegex:this._erasRegex};Cb.months=function(T,ba){return T?B(this._months)?this._months[T.month()]:this._months[(this._months.isFormat||Sc).test(ba)?
"format":"standalone"][T.month()]:B(this._months)?this._months:this._months.standalone};Cb.monthsShort=function(T,ba){return T?B(this._monthsShort)?this._monthsShort[T.month()]:this._monthsShort[Sc.test(ba)?"format":"standalone"][T.month()]:B(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};Cb.monthsParse=function(T,ba,sa){var Ba;if(this._monthsParseExact){a:{T=T.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],
Ba=0;12>Ba;++Ba){var Va=a([2E3,Ba]);this._shortMonthsParse[Ba]=this.monthsShort(Va,"").toLocaleLowerCase();this._longMonthsParse[Ba]=this.months(Va,"").toLocaleLowerCase()}if(sa)ba="MMM"===ba?Rb.call(this._shortMonthsParse,T):Rb.call(this._longMonthsParse,T);else if("MMM"===ba){ba=Rb.call(this._shortMonthsParse,T);if(-1!==ba)break a;ba=Rb.call(this._longMonthsParse,T)}else{ba=Rb.call(this._longMonthsParse,T);if(-1!==ba)break a;ba=Rb.call(this._shortMonthsParse,T)}ba=-1!==ba?ba:null}return ba}this._monthsParse||
(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(Ba=0;12>Ba;Ba++)if(Va=a([2E3,Ba]),sa&&!this._longMonthsParse[Ba]&&(this._longMonthsParse[Ba]=new RegExp("^"+this.months(Va,"").replace(".","")+"$","i"),this._shortMonthsParse[Ba]=new RegExp("^"+this.monthsShort(Va,"").replace(".","")+"$","i")),sa||this._monthsParse[Ba]||(Va="^"+this.months(Va,"")+"|^"+this.monthsShort(Va,""),this._monthsParse[Ba]=new RegExp(Va.replace(".",""),"i")),sa&&"MMMM"===ba&&this._longMonthsParse[Ba].test(T)||
sa&&"MMM"===ba&&this._shortMonthsParse[Ba].test(T)||!sa&&this._monthsParse[Ba].test(T))return Ba};Cb.monthsRegex=function(T){if(this._monthsParseExact)return d(this,"_monthsRegex")||ha.call(this),T?this._monthsStrictRegex:this._monthsRegex;d(this,"_monthsRegex")||(this._monthsRegex=Pc);return this._monthsStrictRegex&&T?this._monthsStrictRegex:this._monthsRegex};Cb.monthsShortRegex=function(T){if(this._monthsParseExact)return d(this,"_monthsRegex")||ha.call(this),T?this._monthsShortStrictRegex:this._monthsShortRegex;
d(this,"_monthsShortRegex")||(this._monthsShortRegex=Pc);return this._monthsShortStrictRegex&&T?this._monthsShortStrictRegex:this._monthsShortRegex};Cb.week=function(T){return Ga(T,this._week.dow,this._week.doy).week};Cb.firstDayOfYear=function(){return this._week.doy};Cb.firstDayOfWeek=function(){return this._week.dow};Cb.weekdays=function(T,ba){ba=B(this._weekdays)?this._weekdays:this._weekdays[T&&!0!==T&&this._weekdays.isFormat.test(ba)?"format":"standalone"];return!0===T?ja(ba,this._week.dow):
T?ba[T.day()]:ba};Cb.weekdaysMin=function(T){return!0===T?ja(this._weekdaysMin,this._week.dow):T?this._weekdaysMin[T.day()]:this._weekdaysMin};Cb.weekdaysShort=function(T){return!0===T?ja(this._weekdaysShort,this._week.dow):T?this._weekdaysShort[T.day()]:this._weekdaysShort};Cb.weekdaysParse=function(T,ba,sa){var Ba;if(this._weekdaysParseExact)return wa.call(this,T,ba,sa);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);
for(Ba=0;7>Ba;Ba++){var Va=a([2E3,1]).day(Ba);sa&&!this._fullWeekdaysParse[Ba]&&(this._fullWeekdaysParse[Ba]=new RegExp("^"+this.weekdays(Va,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[Ba]=new RegExp("^"+this.weekdaysShort(Va,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[Ba]=new RegExp("^"+this.weekdaysMin(Va,"").replace(".","\\.?")+"$","i"));this._weekdaysParse[Ba]||(Va="^"+this.weekdays(Va,"")+"|^"+this.weekdaysShort(Va,"")+"|^"+this.weekdaysMin(Va,""),this._weekdaysParse[Ba]=
new RegExp(Va.replace(".",""),"i"));if(sa&&"dddd"===ba&&this._fullWeekdaysParse[Ba].test(T)||sa&&"ddd"===ba&&this._shortWeekdaysParse[Ba].test(T)||sa&&"dd"===ba&&this._minWeekdaysParse[Ba].test(T)||!sa&&this._weekdaysParse[Ba].test(T))return Ba}};Cb.weekdaysRegex=function(T){if(this._weekdaysParseExact)return d(this,"_weekdaysRegex")||za.call(this),T?this._weekdaysStrictRegex:this._weekdaysRegex;d(this,"_weekdaysRegex")||(this._weekdaysRegex=Pc);return this._weekdaysStrictRegex&&T?this._weekdaysStrictRegex:
this._weekdaysRegex};Cb.weekdaysShortRegex=function(T){if(this._weekdaysParseExact)return d(this,"_weekdaysRegex")||za.call(this),T?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;d(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Pc);return this._weekdaysShortStrictRegex&&T?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};Cb.weekdaysMinRegex=function(T){if(this._weekdaysParseExact)return d(this,"_weekdaysRegex")||za.call(this),T?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;
d(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Pc);return this._weekdaysMinStrictRegex&&T?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};Cb.isPM=function(T){return"p"===(T+"").toLowerCase().charAt(0)};Cb.meridiem=function(T,ba,sa){return 11<T?sa?"pm":"PM":sa?"am":"AM"};Oa("en",{eras:[{since:"0001-01-01",until:Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,
ordinal:function(T){var ba=T%10;ba=1===N(T%100/10)?"th":1===ba?"st":2===ba?"nd":3===ba?"rd":"th";return T+ba}});f.lang=x("moment.lang is deprecated. Use moment.locale instead.",Oa);f.langData=x("moment.langData is deprecated. Use moment.localeData instead.",Ca);var uc=Math.abs,td=ec("ms"),ud=ec("s"),md=ec("m"),vd=ec("h"),wd=ec("d"),xd=ec("w"),yd=ec("M"),zd=ec("Q"),Ad=ec("y"),Bd=Xb("milliseconds"),Cd=Xb("seconds"),hd=Xb("minutes"),Dd=Xb("hours"),Ed=Xb("days"),Fd=Xb("months"),Gd=Xb("years"),vc=Math.round,
Jc={ss:44,s:45,m:45,h:22,d:26,w:null,M:11},$c=Math.abs,Ab=ab.prototype;Ab.isValid=function(){return this._isValid};Ab.abs=function(){var T=this._data;this._milliseconds=uc(this._milliseconds);this._days=uc(this._days);this._months=uc(this._months);T.milliseconds=uc(T.milliseconds);T.seconds=uc(T.seconds);T.minutes=uc(T.minutes);T.hours=uc(T.hours);T.months=uc(T.months);T.years=uc(T.years);return this};Ab.add=function(T,ba){return Oc(this,T,ba,1)};Ab.subtract=function(T,ba){return Oc(this,T,ba,-1)};
Ab.as=function(T){if(!this.isValid())return NaN;var ba=this._milliseconds;T=J(T);if("month"===T||"quarter"===T||"year"===T){var sa=this._days+ba/864E5;sa=this._months+4800*sa/146097;switch(T){case "month":return sa;case "quarter":return sa/3;case "year":return sa/12}}else switch(sa=this._days+Math.round(146097*this._months/4800),T){case "week":return sa/7+ba/6048E5;case "day":return sa+ba/864E5;case "hour":return 24*sa+ba/36E5;case "minute":return 1440*sa+ba/6E4;case "second":return 86400*sa+ba/1E3;
case "millisecond":return Math.floor(864E5*sa)+ba;default:throw Error("Unknown unit "+T);}};Ab.asMilliseconds=td;Ab.asSeconds=ud;Ab.asMinutes=md;Ab.asHours=vd;Ab.asDays=wd;Ab.asWeeks=xd;Ab.asMonths=yd;Ab.asQuarters=zd;Ab.asYears=Ad;Ab.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*N(this._months/12):NaN};Ab._bubble=function(){var T=this._milliseconds,ba=this._days,sa=this._months,Ba=this._data;0<=T&&0<=ba&&0<=sa||0>=T&&0>=ba&&0>=sa||(T+=
864E5*dc(146097*sa/4800+ba),sa=ba=0);Ba.milliseconds=T%1E3;T=I(T/1E3);Ba.seconds=T%60;T=I(T/60);Ba.minutes=T%60;T=I(T/60);Ba.hours=T%24;ba+=I(T/24);T=I(4800*ba/146097);sa+=T;ba-=dc(146097*T/4800);T=I(sa/12);Ba.days=ba;Ba.months=sa%12;Ba.years=T;return this};Ab.clone=function(){return yb(this)};Ab.get=function(T){T=J(T);return this.isValid()?this[T+"s"]():NaN};Ab.milliseconds=Bd;Ab.seconds=Cd;Ab.minutes=hd;Ab.hours=Dd;Ab.days=Ed;Ab.weeks=function(){return I(this.days()/7)};Ab.months=Fd;Ab.years=Gd;
Ab.humanize=function(T,ba){if(!this.isValid())return this.localeData().invalidDate();var sa=!1,Ba=Jc;"object"===typeof T&&(ba=T,T=!1);"boolean"===typeof T&&(sa=T);"object"===typeof ba&&(Ba=Object.assign({},Jc,ba),null!=ba.s&&null==ba.ss&&(Ba.ss=ba.s-1));T=this.localeData();ba=!sa;var Va=yb(this).abs(),bb=vc(Va.as("s")),ib=vc(Va.as("m")),rb=vc(Va.as("h")),vb=vc(Va.as("d")),sb=vc(Va.as("M")),Gb=vc(Va.as("w"));Va=vc(Va.as("y"));bb=bb<=Ba.ss&&["s",bb]||bb<Ba.s&&["ss",bb]||1>=ib&&["m"]||ib<Ba.m&&["mm",
ib]||1>=rb&&["h"]||rb<Ba.h&&["hh",rb]||1>=vb&&["d"]||vb<Ba.d&&["dd",vb];null!=Ba.w&&(bb=bb||1>=Gb&&["w"]||Gb<Ba.w&&["ww",Gb]);bb=bb||1>=sb&&["M"]||sb<Ba.M&&["MM",sb]||1>=Va&&["y"]||["yy",Va];bb[2]=ba;bb[3]=0<+this;bb[4]=T;ba=Mc.apply(null,bb);sa&&(ba=T.pastFuture(+this,ba));return T.postformat(ba)};Ab.toISOString=$b;Ab.toString=$b;Ab.toJSON=$b;Ab.locale=Qb;Ab.localeData=cc;Ab.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",$b);Ab.lang=Xc;z("X",0,
0,"unix");z("x",0,0,"valueOf");aa("x",kc);aa("X",/[+-]?\d+(\.\d{1,3})?/);S("X",function(T,ba,sa){sa._d=new Date(1E3*parseFloat(T))});S("x",function(T,ba,sa){sa._d=new Date(N(T))});f.version="2.29.4";var Hd=Ua;f.fn=hb;f.min=function(){var T=[].slice.call(arguments,0);return Ta("isBefore",T)};f.max=function(){var T=[].slice.call(arguments,0);return Ta("isAfter",T)};f.now=function(){return Date.now?Date.now():+new Date};f.utc=a;f.unix=function(T){return Ua(1E3*T)};f.months=function(T,ba){return sc(T,
ba,"months")};f.isDate=e;f.locale=Oa;f.invalid=n;f.duration=yb;f.isMoment=b;f.weekdays=function(T,ba,sa){return Yb(T,ba,sa,"weekdays")};f.parseZone=function(){return Ua.apply(null,arguments).parseZone()};f.localeData=Ca;f.isDuration=fb;f.monthsShort=function(T,ba){return sc(T,ba,"monthsShort")};f.weekdaysMin=function(T,ba,sa){return Yb(T,ba,sa,"weekdaysMin")};f.defineLocale=Na;f.updateLocale=function(T,ba){if(null!=ba){var sa=Wc;if(null!=Ib[T]&&null!=Ib[T].parentLocale)Ib[T].set(D(Ib[T]._config,ba));
else{var Ba=da(T);null!=Ba&&(sa=Ba._config);ba=D(sa,ba);null==Ba&&(ba.abbr=T);ba=new E(ba);ba.parentLocale=Ib[T];Ib[T]=ba}Oa(T)}else null!=Ib[T]&&(null!=Ib[T].parentLocale?(Ib[T]=Ib[T].parentLocale,T===Oa()&&Oa(T)):null!=Ib[T]&&delete Ib[T]);return Ib[T]};f.locales=function(){return Sa(Ib)};f.weekdaysShort=function(T,ba,sa){return Yb(T,ba,sa,"weekdaysShort")};f.normalizeUnits=J;f.relativeTimeRounding=function(T){return void 0===T?vc:"function"===typeof T?(vc=T,!0):!1};f.relativeTimeThreshold=function(T,
ba){if(void 0===Jc[T])return!1;if(void 0===ba)return Jc[T];Jc[T]=ba;"s"===T&&(Jc.ss=ba-1);return!0};f.calendarFormat=function(T,ba){T=T.diff(ba,"days",!0);return-6>T?"sameElse":-1>T?"lastWeek":0>T?"lastDay":1>T?"sameDay":2>T?"nextDay":7>T?"nextWeek":"sameElse"};f.prototype=hb;f.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",
MONTH:"YYYY-MM"};return f})},"arcgisonline/pages/utils/formatters":function(){define("require exports tslib ../pageUtil ./arrays ./date ./number ./culture ./icons dojo/i18n!../../nls/arcgisonline dojo/text!../dijit/Card/_Owner.html dojo/text!../dijit/Card/_OwnerVerified.html dojo/string moment/moment ./recycle".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);
m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);q=l.__importDefault(q);n=l.__importDefault(n);return function(){function g(){}g.timeFromPresent=function(b){return n.default.utc(b).fromNow()};g.fullDate=function(b){return b&&-1<b?u.default.format(new Date(b),"day-short-month-year"):""};g.timeOnly=function(b){return b&&-1<b?u.default.format(new Date(b),"short-time"):""};g.dayOfWeek=function(b){return b&&-1<b?u.default.format(new Date(b),"weekday"):""};g.fullDateEnhanced=function(b){var x=
(0,n.default)(new Date).diff((0,n.default)(b),"days"),v=(0,n.default)(new Date).isSame(b,"day");return v?m.default.filters.today:!v&&2>x?m.default.myOrganization.membersTab.yesterday:15>x?q.default.substitute(m.default.myOrganization.membersTab.daysAgo,{num:x}):this.fullDate(b)};g.completeDate=function(b){return b&&-1<b?u.default.format(new Date(b),"long-date-long-time"):""};g.capitalize=function(b){return b.charAt(0).toUpperCase()+b.slice(1)};g.shortenNumber=function(b){return 1E9<=b?"".concat(t.default.format(Math.round(b/
1E8)/10)," GB"):1E6<=b?"".concat(t.default.format(Math.round(b/1E5)/10)," MB"):1E3<=b?"".concat(t.default.format(Math.round(b/100)/10)," KB"):"".concat(b," B")};g.empty=function(b){return null!==b&&void 0!==b?b:""};g.hide=function(b){return b?"":"hide"};g.show=function(b){return b?"hide":""};g.firstChar=function(b){var x;return null!==(x=null===b||void 0===b?void 0:b.charAt(0).toUpperCase())&&void 0!==x?x:""};g.stripHTML=function(b){var x,v;b=(new DOMParser).parseFromString(b,"text/html");return null!==
(v=b.body&&(null!==(x=b.body.textContent)&&void 0!==x?x:b.body.innerText))&&void 0!==v?v:""};g.formatCategoryChip=function(b){var x=b;"/"===(null===b||void 0===b?void 0:b[0])&&(x=b.slice(1));return x=x.split("/").join(" / ")};g.lowerCase=function(b){var x;return null!==(x=(null===b||void 0===b?void 0:b.toLowerCase)&&b.toLowerCase())&&void 0!==x?x:""};g.hyphenate=function(b){return(b||"").replace(/\s+/g,"-")};g.formatDisplayName=function(b,x,v){var y=(null===b||void 0===b?void 0:b.portal)&&b.portal.portalUser&&
b.portal.portalUser.userRole,D=b&&(b.isAdminView?y&&y.canUpdateOrgItems():b.canUpdate);y="Data Store"===(null===b||void 0===b?void 0:b.type);b&&D&&x&&!b.isUtilityNetwork&&(b.isHostedService?(x=" (".concat(b.isDataView?m.default.viewsWidget.hostedView:"Feature Service"===b.type?m.default.viewsWidget.hostedData:m.default.viewsWidget.hostedService,")"),0>v.indexOf(x)&&(v+=x)):b.isLocatorView?(x=" (".concat(m.default.viewsWidget.locatorView,")"),0>v.indexOf(x)&&(v+=x)):b.isPhotoLocations&&(x=" (".concat(m.default.viewsWidget.photoLocations,
")"),0>v.indexOf(x)&&(v+=x)));y&&(v=d.default.formatDataStoreItem(v,b.typeKeywords));return v};g.selectTitle=function(b){return b?m.default.GroupWidget.selectTitle.replace("${title}",b):m.default.GroupWidget.selectItem};g.moreOptionsTitle=function(b){return b?m.default.siteHeader.moreOptionsTitle.replace("${title}",b):m.default.siteHeader.moreOptions};g.formatNumViews=function(b){return t.default.format(null!==b&&void 0!==b?b:0)};g.formatViewsLabel=function(b){b="file"!==b.classification||c.default.includes(b.types,
"is-views")||c.default.includes(b.types,"is-pdf")?"viewsColon":"downloadsLbl";return m.default.viewsWidget[b]};g.formatOwnerText=function(b,x,v){var y,D,E;if(x)return null!==(D=null===(y=b.verified)||void 0===y?void 0:y.name)&&void 0!==D?D:b.owner;x=(null===(E=b.verified)||void 0===E?void 0:E.name)&&b.verified.url;E=q.default.substitute(a.default,{item:b,i18n:m.default});return x?(b=q.default.substitute(h.default,{item:b,i18n:m.default}),v?'\x3cspan class\x3d"js-owner-section inline-block"\x3e'.concat(b.replace("js-owner-section",
""),' \x3c/span\x3e\x3cdiv class\x3d"item__managed-by-wrapper"\x3e').concat(m.default.itemProperties.managedByOwner," ").concat(E.replace("js-owner-section",""),"\x3c/div\x3e"):b):E};g.formatRecycleTimeRemaining=function(b){b=new Date(b);b=new Date(b.setDate(b.getDate()+k.DAYS_IN_RECYCLE_BIN));b=Math.max(Math.ceil((b.valueOf()-Date.now())/864E5),1);return e.default.getString(m.default.recycle.deletes,b,{days:b})};g.getAccess=function(b){return m.default.itemSharingLabel[b]};g.getAccessIcon=function(b){return{private:r.default.lock["16"],
shared:r.default.users["16"],org:r.default.organization["16"],public:r.default.globe["16"]}[b]};g.getGroupAccess=function(b){return{public:m.default.groupsPage.everyone,private:m.default.groupsPage.groupMembers,org:m.default.groupsPage.organization}[b]};g.getGroupAccessIcon=function(b){return{public:r.default.inline.globe["16"],private:r.default.inline.lock["16"],org:r.default.inline.organization["16"]}[b]};return g}()})},"arcgisonline/pages/utils/date":function(){define(["require","exports","tslib"],
function(f,B,l){function d(b){b=b||g;var x=document.documentElement.lang;x=n[x]||x;k.has(b)||k.set(b,new Intl.DateTimeFormat(x,b));return k.get(b)}function c(b){return q[b]||null}function u(b,x){x=c(x)||g;if("ar"===document.documentElement.lang&&JSON.stringify(x)===JSON.stringify(t)){b=d(x).formatToParts(b).reduce(function(y,D){y[D.type]=D.value;return y},{});x=b.month;var v=b.day;return"".concat(b.year,"/").concat(x,"/").concat(v)}return d(x).format(b)}Object.defineProperty(B,"__esModule",{value:!0});
B.format=B.convertDateFormatToIntlOptions=B.getDateTimeFormatter=B.dateFormats=B.dictionary=void 0;f={year:"numeric",month:"numeric",day:"numeric"};var t={year:"numeric",month:"2-digit",day:"2-digit"},e={year:"numeric",month:"long",day:"numeric"},r={year:"numeric",month:"short",day:"numeric"},m={year:"numeric",month:"long",weekday:"long",day:"numeric"},a={hour:"numeric",minute:"numeric"},h=l.__assign(l.__assign({},a),{second:"numeric"}),q={"short-date":f,"short-date-numeric":t,"short-date-no-year":{month:"numeric",
day:"numeric"},"short-date-short-time":l.__assign(l.__assign({},f),a),"short-date-short-time-24":l.__assign(l.__assign(l.__assign({},f),a),{hour12:!1}),"short-date-long-time":l.__assign(l.__assign({},f),h),"short-date-long-time-24":l.__assign(l.__assign(l.__assign({},f),h),{hour12:!1}),"short-date-le":f,"short-date-le-short-time":l.__assign(l.__assign({},f),a),"short-date-le-short-time-24":l.__assign(l.__assign(l.__assign({},f),a),{hour12:!1}),"short-date-le-long-time":l.__assign(l.__assign({},f),
h),"short-date-le-long-time-24":l.__assign(l.__assign(l.__assign({},f),h),{hour12:!1}),"long-month-day-year":e,"long-month-day-year-short-time":l.__assign(l.__assign({},e),a),"long-month-day-year-short-time-24":l.__assign(l.__assign(l.__assign({},e),a),{hour12:!1}),"long-month-day-year-long-time":l.__assign(l.__assign({},e),h),"long-month-day-year-long-time-24":l.__assign(l.__assign(l.__assign({},e),h),{hour12:!1}),"day-short-month-year":r,"day-short-month-year-short-time":l.__assign(l.__assign({},
r),a),"day-short-month-year-short-time-24":l.__assign(l.__assign(l.__assign({},r),a),{hour12:!1}),"day-short-month-year-long-time":l.__assign(l.__assign({},r),h),"day-short-month-year-long-time-24":l.__assign(l.__assign(l.__assign({},r),h),{hour12:!1}),"long-date":m,"long-date-short-time":l.__assign(l.__assign({},m),a),"long-date-short-time-24":l.__assign(l.__assign(l.__assign({},m),a),{hour12:!1}),"long-date-long-time":l.__assign(l.__assign({},m),h),"long-date-long-time-24":l.__assign(l.__assign(l.__assign({},
m),h),{hour12:!1}),"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},weekday:{weekday:"long"},"short-weekday":{weekday:"short"},year:{year:"numeric"},"short-time":a,"long-time":h};B.dictionary=new Map;[["shortDate","short-date"],["shortDateNumeric","short-date-numeric"],["shortDateNoYear","short-date-no-year"],["shortDateShortTime","short-date-short-time"],["shortDateShortTime24","short-date-short-time-24"],["shortDateLongTime","short-date-long-time"],
["shortDateLongTime24","short-date-long-time-24"],["shortDateLE","short-date-le"],["shortDateLEShortTime","short-date-le-short-time"],["shortDateLEShortTime24","short-date-le-short-time-24"],["shortDateLELongTime","short-date-le-long-time"],["shortDateLELongTime24","short-date-le-long-time-24"],["longMonthDayYear","long-month-day-year"],["longMonthDayYearShortTime","long-month-day-year-short-time"],["longMonthDayYearShortTime24","long-month-day-year-short-time-24"],["longMonthDayYearLongTime","long-month-day-year-long-time"],
["longMonthDayYearLongTime24","long-month-day-year-long-time-24"],["dayShortMonthYear","day-short-month-year"],["dayShortMonthYearShortTime","day-short-month-year-short-time"],["dayShortMonthYearShortTime24","day-short-month-year-short-time-24"],["dayShortMonthYearLongTime","day-short-month-year-long-time"],["dayShortMonthYearLongTime24","day-short-month-year-long-time-24"],["longDate","long-date"],["longDateShortTime","long-date-short-time"],["longDateShortTime24","long-date-short-time-24"],["longDateLongTime",
"long-date-long-time"],["longDateLongTime24","long-date-long-time-24"],["longMonthYear","long-month-year"],["shortMonthYear","short-month-year"],["weekday","weekday"],["shortWeekday","short-weekday"],["year","year"]].forEach(function(b){B.dictionary.set(b[0],b[1])});B.dateFormats=B.dictionary.values;var n={ar:"ar-u-nu-latn-ca-gregory",sr:"sr-Latn",bs:"bs-Cyrl"},k=new WeakMap,g=q["short-date-short-time"];B.getDateTimeFormatter=d;B.convertDateFormatToIntlOptions=c;B.format=u;B.default={format:u,getDateTimeFormatter:d,
convertDateFormatToIntlOptions:c,dictionary:B.dictionary,dateFormats:B.dateFormats}})},"arcgisonline/pages/utils/culture":function(){define(["require","exports","tslib","dojo/string","dojo/_base/kernel"],function(f,B,l,d,c){d=l.__importDefault(d);c=l.__importDefault(c);return function(){function u(){}u.getString=function(t,e,r){var m,a="id ja ko th vi zh-cn zh-hk zh-tw".split(" "),h="en ca da de el es et fi hi hu it nb nl pt-pt sv tr".split(" "),q=null!==(m=u.getRootLocale(c.default.locale))&&void 0!==
m?m:"en";r?r.number=e:r={number:e};return 1===e||-1<a.indexOf(q)?d.default.substitute(t.single,r):1!==e&&-1<h.indexOf(q)?d.default.substitute(t.multiple,r):d.default.substitute(t.unknown,r)};u.stripCultureFormat=function(t,e){return(null===t||void 0===t?0:t.length)&&(null===e||void 0===e?0:e.length)&&(e=t.indexOf("-"+e),-1<e)?t.substring(0,e):t};u.getRootLocale=function(t){if(null===t||void 0===t?0:t.length){t=t.split("-")[0];if(null===t||void 0===t?0:t.length)t=t.toLowerCase();return t}return t};
u.getLocaleFormat=function(t){if(null===t||void 0===t?0:t.length)if(t=t.split("-"),1<t.length)return t[1].toLowerCase()};u.isRightToLeft=function(t){return-1<["ar","he"].indexOf(t)};u.currentLocaleIsRightToLeft=function(){return u.isRightToLeft(document.documentElement.lang)};u.getDatePickerLocale=function(t){return-1<t.indexOf("-")?(t=t.split("-"),"".concat(t[0],"-").concat(t[1].toUpperCase())):"bs"===t?"bs-Cyrl":t};u.getTrialLocale=function(t){var e=["pt-br","pt-pt","zh-cn","zh-hk","zh-tw"];return-1<
(null===t||void 0===t?void 0:t.indexOf("-"))&&-1===e.indexOf(t)?this.getRootLocale(t):t};u.getActualCulture=function(t,e){var r,m=null!==(r=null===t||void 0===t?void 0:t.toLowerCase())&&void 0!==r?r:"",a=m.split("-");if(1<a.length){if(r=e.filter(function(h){return h.culture===m}).shift())return m;r=e.filter(function(h){return h.culture===a[0]}).shift();if(null===r||void 0===r?0:r.cultureFormats){if(r.cultureFormats.filter(function(h){return h.format===a[1]}).shift())return r.culture}else if(r)return r.culture}return t};
u.getSelectedFormat=function(t,e){return e.filter(function(r){return r.format===t}).shift()};u.getPercentString=function(t){var e=c.default.locale.toLowerCase();return"ar"===e?"%".concat(100*t):t.toLocaleString(e,{style:"percent"})};u.getCurrentLocale=function(){return c.default.locale.toLowerCase()};return u}()})},"arcgisonline/pages/utils/icons":function(){define(["require","exports","tslib","dojo/_base/kernel"],function(f,B,l,d){function c(r){var m,a,h=r.paths,q=r.size,n=r.direction,k=r.rtl,g=
r.title,b=r.titleId;r=r.inline?"icon-inline--on-".concat(null!==n&&void 0!==n?n:"left"):"";n=null!==(a=null===(m=d.default.locale)||void 0===m?void 0:m.split("-")[0])&&void 0!==a?a:"en";m=!0===k||k===n?"icon-inline--flip-rtl":"";m="icon-inline ".concat(r," ").concat(m);h=Array.isArray(h)?u(h):'\x3cpath d\x3d"'.concat(h,'"/\x3e');k=(a=g&&b)?'aria-labelledby\x3d"'.concat(b,'"'):'role\x3d"none" focusable\x3d"false" aria-hidden\x3d"true"';return'\x3csvg viewBox\x3d"0 0 '.concat(q," ").concat(q,'" width\x3d"').concat(q,
'" height\x3d"').concat(q,'" class\x3d"').concat(m,'" ').concat(k,"\x3e\n    ").concat(a?'\x3ctitle id\x3d"'.concat(b,'" \x3e').concat(g,"\x3c/title\x3e"):"","\n    ").concat(h,"\n  \x3c/svg\x3e")}function u(r){return r.reduce(function(m,a){var h=a.opacity?'opacity\x3d"'.concat(a.opacity,'" '):"";return"".concat(m," \x3cpath ").concat(h,' d\x3d"').concat(a.d,'" /\x3e')},"")}d=l.__importDefault(d);var t={"app-launcher":{24:"M11.5 18.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM12 20h-1v-1h1zM3.5 2.05A1.45 1.45 0 104.95 3.5 1.45 1.45 0 003.5 2.05zM4 4H3V3h1zm7.5 6.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM12 12h-1v-1h1zm-8.5-1.95a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM4 12H3v-1h1zm-.5 6.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM4 20H3v-1h1zM19.5 4.95a1.45 1.45 0 10-1.45-1.45 1.45 1.45 0 001.45 1.45zM19 3h1v1h-1zm.5 7.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM20 12h-1v-1h1zm-8.5-9.95a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM12 4h-1V3h1zm7.5 14.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM20 20h-1v-1h1z"},
apps:{16:"M6 1H2a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zm0 5H2V2h4zm4 1h4a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1zm4-1h-4V2h4zm-4 9h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1zm4-1h-4v-4h4zM6 9H2a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1zm0 5H2v-4h4z",24:"M9.5 2h-6A1.502 1.502 0 0 0 2 3.5v6A1.502 1.502 0 0 0 3.5 11h6A1.502 1.502 0 0 0 11 9.5v-6A1.502 1.502 0 0 0 9.5 2zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM20.5 2h-6A1.502 1.502 0 0 0 13 3.5v6a1.502 1.502 0 0 0 1.5 1.5h6A1.502 1.502 0 0 0 22 9.5v-6A1.502 1.502 0 0 0 20.5 2zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM9.5 13h-6A1.502 1.502 0 0 0 2 14.5v6A1.502 1.502 0 0 0 3.5 22h6a1.502 1.502 0 0 0 1.5-1.5v-6A1.502 1.502 0 0 0 9.5 13zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM20.5 13h-6a1.502 1.502 0 0 0-1.5 1.5v6a1.502 1.502 0 0 0 1.5 1.5h6a1.502 1.502 0 0 0 1.5-1.5v-6a1.502 1.502 0 0 0-1.5-1.5zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5z",
32:"M13.25 3h-8.5A1.752 1.752 0 0 0 3 4.75v8.5A1.752 1.752 0 0 0 4.75 15h8.5A1.752 1.752 0 0 0 15 13.25v-8.5A1.752 1.752 0 0 0 13.25 3zM14 13.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5A.751.751 0 0 1 4.75 4h8.5a.751.751 0 0 1 .75.75zM27.25 3h-8.5A1.752 1.752 0 0 0 17 4.75v8.5A1.752 1.752 0 0 0 18.75 15h8.5A1.752 1.752 0 0 0 29 13.25v-8.5A1.752 1.752 0 0 0 27.25 3zM28 13.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5a.751.751 0 0 1 .75-.75h8.5a.751.751 0 0 1 .75.75zM27.25 17h-8.5A1.752 1.752 0 0 0 17 18.75v8.5A1.752 1.752 0 0 0 18.75 29h8.5A1.752 1.752 0 0 0 29 27.25v-8.5A1.752 1.752 0 0 0 27.25 17zM28 27.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5a.751.751 0 0 1 .75-.75h8.5a.751.751 0 0 1 .75.75zM13.25 17h-8.5A1.752 1.752 0 0 0 3 18.75v8.5A1.752 1.752 0 0 0 4.75 29h8.5A1.752 1.752 0 0 0 15 27.25v-8.5A1.752 1.752 0 0 0 13.25 17zM14 27.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5a.751.751 0 0 1 .75-.75h8.5a.751.751 0 0 1 .75.75z"},
"arcgis-online":{24:"M24 13.226a4.785 4.785 0 01-3.523 4.658L18.962 17h.633A3.694 3.694 0 0023 13.226a4.173 4.173 0 00-2.895-3.977l-.595-.193-.086-.62A6.164 6.164 0 0013.482 3a5.988 5.988 0 00-5.254 3.265l-.373.703-.769-.206a2.966 2.966 0 00-.763-.116 2.473 2.473 0 00-2.532 2.319l-.041.563-.503.255A4.026 4.026 0 001 13.37 3.614 3.614 0 004.405 17H6v1H4.405A4.606 4.606 0 010 13.37a5.04 5.04 0 012.795-4.479 3.47 3.47 0 013.528-3.244 3.952 3.952 0 011.02.15A6.971 6.971 0 0113.483 2a7.131 7.131 0 016.933 6.297A5.186 5.186 0 0124 13.226zm-6.764 4.78l.846.494-4.534 2.645L9.014 18.5l.846-.493-.734-.428-1.578.92 6 3.501 6-3.5-1.579-.92zm0-3l.846.494-4.534 2.645L9.014 15.5l.846-.493-.734-.428-1.578.92 6 3.501 6-3.5-1.579-.92zm2.312-2.506l-6 3.5-6-3.5 6-3.5zm-6 2.645l4.534-2.645-4.534-2.645L9.014 12.5z",
32:"M32 14.704a6.28 6.28 0 0 1-4.862 6.248l-.942-.55.738-.43A5.29 5.29 0 0 0 31 14.703a5.561 5.561 0 0 0-3.742-5.287l-.872-.297-.13-.911A8.153 8.153 0 0 0 18.462 1a7.848 7.848 0 0 0-6.859 4.294l-.556 1.045-1.146-.298a3.684 3.684 0 0 0-.923-.135 3.105 3.105 0 0 0-3.224 2.956l-.046.86-.765.394A5.37 5.37 0 0 0 2 14.897C2 17.521 4.157 20 6.438 20H9v1H6.437C3.592 21 1 18.092 1 14.897a6.369 6.369 0 0 1 3.486-5.67l.255-.131.016-.287a4.128 4.128 0 0 1 4.222-3.903 4.61 4.61 0 0 1 1.175.168l.382.099.185-.349A8.845 8.845 0 0 1 18.463 0a9.157 9.157 0 0 1 8.782 8.068l.044.304.29.099A6.559 6.559 0 0 1 32 14.704zm-7.591 6.74l1.12.654-7.075 4.128-7.074-4.128 1.188-.694-.794-.463-1.982 1.157 8.662 5.054 8.663-5.054-1.915-1.117zm-.123-3.542l1.31.765-7.075 4.128-7.074-4.128 1.31-.765-.793-.463-2.105 1.228 8.663 5.054 8.663-5.054-2.105-1.228zm2.899-2.849l-8.663 5.054-8.663-5.054L18.522 10zm-1.588 0l-7.076-4.127-7.074 4.128 7.074 4.127z"},
"arrow-left":{24:"M9.11 6.32L4.43 11H20v1H4.43l4.68 4.68-.707.707L2.517 11.5l5.886-5.887z"},"arrow-right":{16:"M2 8h10.26l-1.585-1.585.707-.707 2.81 2.81-2.81 2.808-.707-.707L12.295 9H2z",24:"M15.646 14.646L18.293 12H4v-1h14.293l-2.647-2.646.707-.707 3.854 3.853-3.854 3.854z"},"arrow-down":{32:"M16.5 27.207l-4.854-4.854.707-.707L16 25.293V5h1v20.293l3.646-3.646.707.707z"},attachment:{16:"M3.991 15.92a3.913 3.913 0 0 1-2.767-6.68L9.552.912a2.92 2.92 0 0 1 4.031 0 2.854 2.854 0 0 1 0 4.031l-8.001 7.998a1.833 1.833 0 0 1-2.527 0 1.789 1.789 0 0 1 0-2.526L8.72 4.751l.566.566-5.665 5.665a.985.985 0 0 0 0 1.394 1.009 1.009 0 0 0 1.395 0l8-7.998a2.05 2.05 0 0 0 0-2.899 2.098 2.098 0 0 0-2.898 0L1.79 9.805a3.11 3.11 0 0 0 0 4.403 3.186 3.186 0 0 0 4.403 0l6.555-6.555.566.567-6.554 6.554a3.905 3.905 0 0 1-2.77 1.146z"},
automation:{16:"M5 0v2H2v3h1V3h2v1h4V3h4v5.294L11.707 7 11 7.707l2.483 2.484.017-.017.017.017L16 7.707 15.293 7 14 8.294V2H9V0zm1 3V1h2v2zM.707 9L2 7.706V14h5v2h4v-2h3v-3h-1v2h-2v-1H7v1H3V7.706L4.293 9 5 8.293 2.517 5.809l-.017.017-.017-.017L0 8.293zM10 13v2H8v-2z"},browser:{32:"M2 28h28V5H2zm27-1H8V11h21zM3 6h26v4H3zm0 5h4v16H3zm24-3h-1V7h1z"},calculator:{16:"M14.5 16h-13A1.502 1.502 0 0 1 0 14.5v-13A1.502 1.502 0 0 1 1.5 0h13A1.502 1.502 0 0 1 16 1.5v13a1.502 1.502 0 0 1-1.5 1.5zM1.5 1a.501.501 0 0 0-.5.5v13a.501.501 0 0 0 .5.5h13a.501.501 0 0 0 .5-.5v-13a.501.501 0 0 0-.5-.5zM2 6V2h12v4zm11-1V3H3v2zm0 9h-2a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1zm0-1V8h-2v5zm-5 1H7a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1v-1H7v1zm-4 1H3a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1v-1H3v1zm4-3H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1V8H7v1zm-4 1H3a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1V8H3v1z"},
calendar:{16:"M14 1v1h1v2H1V2h1V1H0v14h16V1zm1 13H1V5h14zM5 2V1h6v1zM4 0v2H3V0zm8 2V0h1v2z"},"caret-right":{16:"M5 1.5l7 7-7 7zm1 11.586L10.586 8.5 6 3.914z"},"caret-down":{16:"M13.1 6L8 11.1 2.9 6z"},check:{16:"M2 8.689l.637-.636L5.5 10.727l8.022-7.87.637.637L5.5 12z",24:"M6.218 13.64l3.288 3.098 10.073-9.92.637.637L9.506 18.01 5.58 14.276z",32:"M12.5 22.142L6.59 16.42l.636-.636L12.5 20.87 25.721 7.8l.637.637L12.5 22.142"},"check-circle":{16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM3.735 8.346l.738-.738 2.084 2.088 4.97-4.97.738.737-5.708 5.705z",
24:"M7 13.689l.637-.636 2.863 2.674 7.022-6.87.637.637L10.5 17zM22.8 12.5A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.5 14.5 0 0 0 15.5 1zm0 28.1a13.6 13.6 0 1 1 13.6-13.6 13.615 13.615 0 0 1-13.6 13.6zM8.581 17.276l.637-.636 3.288 3.098 10.073-9.92.637.637-10.71 10.556z"},"check-circle-f":{16:"M8 .15A7.85 7.85 0 1 0 15.85 8 7.85 7.85 0 0 0 8 .15zM6.557 11.592L3.31 8.346l1.163-1.162L6.557 9.27l5.172-5.17 1.162 1.162z",
24:"M23 11.5A11.5 11.5 0 1 1 11.5 0 11.5 11.5 0 0 1 23 11.5zm-5.5-6.018l-8.5 8.5-3.5-3.5-2 2L9.018 18l.018-.018L11.018 16l8.5-8.5z",32:"M30 16A14 14 0 1 1 16 2a14 14 0 0 1 14 14zm-6.11-7.72L12.823 19.346 8.36 14.883l-2.486 2.486 6.95 6.95 13.554-13.553z"},"chevron-down":{16:"M13 5.293v1.414l-4.5 4.5-4.5-4.5V5.293l4.5 4.5z",24:"M19 8.293v1.414l-7.5 7.5-7.5-7.5V8.293l7.5 7.5z"},"chevron-down-f":{16:"M14 4.217v2.766l-6 6-6-6V4.217l6 6z"},"chevron-left":{16:"M10.707 12H9.293l-4.5-4.5 4.5-4.5h1.414l-4.5 4.5z",
24:"M6.293 12l7-7h1.414l-7 7 7 7h-1.414z"},"chevron-right":{16:"M5.293 3h1.414l4.5 4.5-4.5 4.5H5.293l4.5-4.5z",24:"M8.293 5h1.414l7.5 7.5-7.5 7.5H8.293l7.5-7.5z"},"chevron-up":{24:"M11.5 8.207l-7.5 7.5v-1.414l7.5-7.5 7.5 7.5v1.414z"},clock:{16:"M8 7h3v1H7V3h1zm4.803 5.803a7.5 7.5 0 1 1 0-10.606 7.5 7.5 0 0 1 0 10.606zm-.636-9.97A6.591 6.591 0 0 0 .927 7H2v1H.927A6.567 6.567 0 0 0 7 14.073v-1.38h1v1.38a6.591 6.591 0 0 0 4.167-11.24z"},collection:{16:"M10 10V0H0v10zM9 9H6.416c.007-.188.011-.353.014-.453a1.206 1.206 0 0 0 .545-1.058 1.28 1.28 0 0 0 .092-.15 1.143 1.143 0 0 0 .163-.056A2.782 2.782 0 0 0 9 7.461zM1 9V1h5.098a1.276 1.276 0 0 0-.28 1.041 1.26 1.26 0 0 0-.206.466 1.256 1.256 0 0 0-.52 1.185.696.696 0 0 0-.06.062 1.236 1.236 0 0 0-1.175.418 1.352 1.352 0 0 0-1.779 1.571 1.235 1.235 0 0 0 .333 1.568 1.287 1.287 0 0 0 .568 1.34A2.11 2.11 0 0 0 2.962 9zm3.123-.857c0-.313-.595-.223-.688-.41-.234-.467.395-.587.395-.958 0-.09-.047-.277-.191-.293-.202-.021-.254.088-.454.088a.232.232 0 0 1-.25-.207c0-.22.174-.322.174-.543 0-.144-.06-.224-.06-.367 0-.36.397-.586.692-.06.19.342.808.176.808-.38a.271.271 0 0 1 .25-.28c.199 0 .272.205.47.205.327 0 .316-.432.604-.586.353-.192.25-.604.205-.823-.018-.1.165-.287.264-.281.41.031.236-.308.236-.469 0-.258.353-.302.353-.56 0-.158-.132-.235-.132-.397 0-.424.623-.42.78-.822H9v5.449c-.367.057-1.053.165-1.335-.082-.151-.13-.147-.396-.352-.396-.276 0-.297.412-.573.412-.125 0-.184-.088-.31-.088-.26 0-.22.206-.22.465 0 .242-.322.29-.322.535 0 .098.088.135.088.234 0 .33-.588.286-.588.617 0 .026.044.293.044.293 0 .052-.007.287-.019.56h-1.45c-.002-.341.16-.643.16-.856zM16 5v11H5v-1h10V5zm-3 8H2v-1h10V2h1z",
24:"M17 17V2H2v15zm-1-1h-4.874a8.585 8.585 0 0 0 .03-1.017 1.45 1.45 0 0 0 .897-1.63 1.557 1.557 0 0 0 .381-.659 1.376 1.376 0 0 0 .811-.3 3.207 3.207 0 0 0 2.755.42zM3 16V3h8.81a1.483 1.483 0 0 0-.194 1.43 1.461 1.461 0 0 0-.472 1.029 1.47 1.47 0 0 0-.826 1.501 3.333 3.333 0 0 1 .063.37 1.957 1.957 0 0 0-.602.616 1.417 1.417 0 0 0-1.99.87 1.577 1.577 0 0 0-2.517 1.76.033.033 0 0 0 .02-.016c-.609 1.132-.186 1.97.634 2.256a1.509 1.509 0 0 0 .944 2.189 2.551 2.551 0 0 0-.14.995zm5.001-1.447c0-.528-1.006-.378-1.164-.695-.393-.785.668-.987.668-1.612 0-.154-.08-.47-.323-.497-.338-.034-.426.15-.767.15a.39.39 0 0 1-.422-.348c0-.372.297-.545.297-.917 0-.243-.1-.38-.1-.62a.597.597 0 0 1 .57-.62c.312 0 .446.254.595.52.324.579 1.365.294 1.365-.644a.456.456 0 0 1 .422-.473c.334 0 .459.348.793.348.552 0 .532-.73 1.017-.99.596-.322.422-1.019.348-1.39-.033-.165.279-.483.446-.473.694.052.397-.518.397-.792 0-.435.596-.506.596-.943 0-.27-.224-.396-.224-.668 0-.33.4-.628.883-.889H16v8.782c-.29.075-.54.136-.584.136-.503 0-1.117.07-1.48-.249-.256-.22-.249-.669-.596-.669-.466 0-.501.696-.967.696-.21 0-.31-.151-.52-.151a.342.342 0 0 0-.372.305v.483c0 .409-.547.49-.547.9 0 .166.15.23.15.396 0 .559-.994.484-.994 1.042 0 .172.077.336.077.496 0 .103-.015.456-.043.833H7.73c-.003-.58.27-1.096.27-1.447zM20 20H5v-1h14V5h1zm3-12v15H8v-1h14V8z"},
"copy-to-clipboard":{16:"M16 10H8.767l1.558 1.558-.707.707-2.81-2.81 2.81-2.809.707.707L8.678 9H16zM7 6H3v1h4zm-2 4H3V9h2zm2 3H3v-1h4zm5-2v4H2V3h1v1h8V3h1v5h1V2h-2V1H8.723a1.984 1.984 0 0 0-3.446 0H3v1H1v14h12v-5zM4 2h2v-.318A.682.682 0 0 1 6.682 1h.636A.682.682 0 0 1 8 1.682V2h2v1H4z"},credits:{16:"M10.5 5.05a5.45 5.45 0 1 0 5.45 5.45 5.457 5.457 0 0 0-5.45-5.45zm0 10.05a4.6 4.6 0 1 1 4.6-4.6 4.605 4.605 0 0 1-4.6 4.6zm0-1.2a3.404 3.404 0 0 1-3.398-3.3h.8a2.6 2.6 0 0 0 5.196 0h.8a3.404 3.404 0 0 1-3.398 3.3zm1.597-3.5a1.6 1.6 0 0 0-3.194 0h-.801a2.4 2.4 0 0 1 4.796 0zm-8.19.253a5.397 5.397 0 1 1 6.747-6.747A2.698 2.698 0 0 0 10.5 3.9a6.505 6.505 0 0 0-.693.04A4.588 4.588 0 1 0 3.94 9.806a6.418 6.418 0 0 0-.04.694c0 .052.003.103.006.153zm.272-2.03A3.373 3.373 0 0 1 2.102 5.6h.8a2.583 2.583 0 0 0 1.55 2.274 6.55 6.55 0 0 0-.273.748zM3.102 5.4a2.396 2.396 0 0 1 4.59-.866 6.65 6.65 0 0 0-.708.386A1.585 1.585 0 0 0 5.5 3.9a1.602 1.602 0 0 0-1.597 1.5z"},
cube:{16:"M8.5 1.108L1 4.188v8.753L8.448 16h.104L16 12.94V4.189zM8 14.735l-6-2.464V5.197L8 7.65zM2.906 4.486L8.5 2.19l5.594 2.297L8.5 6.774zM15 12.271l-6 2.464V7.65l6-2.453z"},data:{24:"M11.5 2C5.702 2 1 3.566 1 5.5v12.808C1 20.346 5.702 22 11.5 22S22 20.346 22 18.308V5.5C22 3.566 17.298 2 11.5 2zm0 1C17.768 3 21 4.752 21 5.5S17.768 8 11.5 8 2 6.248 2 5.5 5.232 3 11.5 3zM2 6.983C3.676 8.173 7.294 9 11.5 9s7.824-.827 9.5-2.017V10.5c0 .748-3.232 2.5-9.5 2.5S2 11.248 2 10.5zM11.5 21C5.354 21 2 19.221 2 18.308v-6.325C3.676 13.173 7.294 14 11.5 14s7.824-.827 9.5-2.017v6.325C21 19.22 17.646 21 11.5 21z",
32:"M28.983 7.875C28.803 5.171 22.841 3 15.5 3S2.198 5.17 2.017 7.875H2v16.25C2 26.816 8.045 29 15.5 29S29 26.816 29 24.125V7.875zM28 24.125C28 25.705 23.13 28 15.5 28S3 25.705 3 24.125v-8.241C5.01 17.711 9.846 19 15.5 19s10.49-1.29 12.5-3.116zm0-9.24C25.99 16.71 21.154 18 15.5 18S5.01 16.71 3 14.884v-5C5.01 11.711 9.846 13 15.5 13S25.99 11.71 28 9.884zm-12.5-2.91C7.87 11.974 3 9.62 3 8s4.87-3.974 12.5-3.974S28 6.379 28 8s-4.87 3.974-12.5 3.974z"},download:{32:"M32 15.704C32 19.308 29.13 22 26.562 22H23v-1h3.563C28.372 21 31 18.937 31 15.704a5.561 5.561 0 0 0-3.742-5.287l-.872-.297-.13-.911A8.153 8.153 0 0 0 18.462 2a7.848 7.848 0 0 0-6.859 4.294l-.556 1.045-1.146-.298a3.684 3.684 0 0 0-.923-.135 3.105 3.105 0 0 0-3.224 2.956l-.046.86-.765.394A5.37 5.37 0 0 0 2 15.897C2 18.521 4.157 21 6.438 21H10v1H6.437C3.592 22 1 19.092 1 15.897a6.369 6.369 0 0 1 3.486-5.67l.255-.131.016-.287a4.128 4.128 0 0 1 4.222-3.903 4.61 4.61 0 0 1 1.175.168l.382.099.185-.349A8.845 8.845 0 0 1 18.463 1a9.157 9.157 0 0 1 8.782 8.068l.044.304.29.099A6.559 6.559 0 0 1 32 15.704zM17 28.278V14h-1v14.278l-4.332-4.332-.707.707 5.539 5.54 5.54-5.54-.708-.707z"},
"download-to":{16:"M12 13v1H3v-1zm-1.674-4.618l-.707-.707L8 9.295V1H7v8.26L5.415 7.675l-.707.707 2.81 2.81z",32:"M7 25h17v1H7zm13.354-8.646l-.707-.707L16 19.293V5h-1v14.293l-3.646-3.646-.707.707 4.853 4.853z"},drag:{16:"M5.95 1.5A1.45 1.45 0 1 1 4.5.05 1.45 1.45 0 0 1 5.95 1.5zM10.5.05a1.45 1.45 0 1 0 1.45 1.45A1.45 1.45 0 0 0 10.5.05zm-6 6A1.45 1.45 0 1 0 5.95 7.5 1.45 1.45 0 0 0 4.5 6.05zm6 0a1.45 1.45 0 1 0 1.45 1.45 1.45 1.45 0 0 0-1.45-1.45zm-6 6a1.45 1.45 0 1 0 1.45 1.45 1.45 1.45 0 0 0-1.45-1.45zm7.45 1.45a1.45 1.45 0 1 0-1.45 1.45 1.45 1.45 0 0 0 1.45-1.45z"},
edit:{16:"M14.792 2.666l-1.414-1.413a.965.965 0 0 0-1.385-.03l-1.444 1.444-8.763 8.72L.03 15.481a.371.371 0 0 0 .488.488l4.096-1.756 8.763-8.72-.001-.001.002.002 1.443-1.444a.965.965 0 0 0-.03-1.385zM1.569 14.431l.554-1.293.74.739zm2.338-.924l-1.414-1.414 7.963-7.92 1.414 1.415zm8.67-8.626l-1.413-1.414 1.29-1.29a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .433z"},"ellipsis-f":{16:"M3.55 8A1.55 1.55 0 1 1 2 6.45 1.55 1.55 0 0 1 3.55 8zm6 0A1.55 1.55 0 1 0 8 9.55 1.55 1.55 0 0 0 9.55 8zm6 0A1.55 1.55 0 1 0 14 9.55 1.55 1.55 0 0 0 15.55 8z"},
envelope:{16:"M14 11.434l-4.52-4.52L14 3.301v8.133zM1.566 12L6.15 7.418l1.35 1.08 1.351-1.08L13.434 12H1.566zM1 3.3l4.52 3.614L1 11.434V3.3zM13.095 3L7.5 7.475 1.904 3h11.191zM14 2H1a1.002 1.002 0 0 0-1 1v9a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1z",24:"M22.5 4h-20A1.504 1.504 0 0 0 1 5.5v14A1.5 1.5 0 0 0 2.5 21h20a1.5 1.5 0 0 0 1.5-1.5v-14A1.5 1.5 0 0 0 22.5 4zm-.071 1L12.5 12.94 2.571 5zM2.026 19.63A.482.482 0 0 1 2 19.5V5.568l7.829 6.26zm.763.37l7.67-7.67 2.041 1.633 2.042-1.632L22.21 20zM23 19.5a.483.483 0 0 1-.026.13l-7.803-7.803L23 5.568z"},
"exclamation-mark-circle":{16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zm.994-3.576a1 1 0 0 1-2 0v-.048a1 1 0 0 1 2 0zM7.995 8h-.977V4h.977z",24:"M12 7h1v7h-1zm1.5 9.5a1 1 0 1 0-1 1 1.002 1.002 0 0 0 1-1zm9.3-4A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.517 14.517 0 0 0 15.5 1zm0 28A13.5 13.5 0 1 1 29 15.5 13.515 13.515 0 0 1 15.5 29zm0-5.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM15 8h1v11h-1z"},
"exclamation-mark-circle-f":{24:"M12.5 2.2a10.3 10.3 0 1 0 10.3 10.3A10.299 10.299 0 0 0 12.5 2.2zM12 7h1v7h-1zm.5 10.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1z"},"exclamation-mark-triangle":{16:"M14.78 14.645L8.255 1.52a.938.938 0 0 0-.84-.52.938.938 0 0 0-.84.522L.092 14.647A.938.938 0 0 0 .932 16h13.009a.937.937 0 0 0 .838-1.355zm-.724.49a.137.137 0 0 1-.115.065H.933a.137.137 0 0 1-.116-.063.139.139 0 0 1-.008-.135L7.293 1.876a.14.14 0 0 1 .123-.076.138.138 0 0 1 .125.077l6.521 13.124a.138.138 0 0 1-.006.135zM7.495 11.5a.988.988 0 0 1 1 .976v.048a1 1 0 0 1-2 0v-.048a.988.988 0 0 1 1-.976zM7.018 6h.977v4h-.977z",
24:"M1.225 21.225A1.678 1.678 0 0 0 2.707 22H22.28a1.68 1.68 0 0 0 1.484-.775 1.608 1.608 0 0 0 .003-1.656L13.995 1.827a1.745 1.745 0 0 0-2.969 0l-9.8 17.742a1.603 1.603 0 0 0 0 1.656zm.859-1.143l9.82-17.773A.71.71 0 0 1 12.508 2a.73.73 0 0 1 .629.342l9.751 17.708a.626.626 0 0 1 .017.662.725.725 0 0 1-.626.288H2.708a.723.723 0 0 1-.623-.286.605.605 0 0 1-.001-.632zM13 15h-1V8h1zm-1.5 2.5a1 1 0 1 1 1 1 1.002 1.002 0 0 1-1-1z",32:"M3.929 29h25.148a1.897 1.897 0 0 0 1.67-2.797L18.217 2.951a1.897 1.897 0 0 0-3.337-.005L2.261 26.198A1.897 1.897 0 0 0 3.93 29zm-.788-2.324L15.759 3.423a.896.896 0 0 1 1.577.002l12.531 23.253a.898.898 0 0 1-.79 1.322H3.93a.897.897 0 0 1-.788-1.324zM15.5 24.5a1 1 0 1 1 1 1 1.002 1.002 0 0 1-1-1zM17 21h-1V10h1z"},
"exclamation-mark-triangle-f":{16:"M14.894 12.552l-6-11.998a1 1 0 0 0-1.787 0l-6 11.998A.998.998 0 0 0 2 13.999h12a.998.998 0 0 0 .894-1.447zM9 12H7v-2h2zm0-3H7V4h2z",24:"M13.995 1.827a1.745 1.745 0 0 0-2.969 0l-9.8 17.742a1.603 1.603 0 0 0 0 1.656 1.678 1.678 0 0 0 1.48.775H22.28a1.68 1.68 0 0 0 1.484-.775 1.608 1.608 0 0 0 .003-1.656zM12 8h1v7h-1zm.5 10.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1z",32:"M29.733 27.06L17.734 3.191a2 2 0 0 0-3.463 0L2.268 27.061a2.003 2.003 0 0 0 0 2.001 1.941 1.941 0 0 0 1.73.938H28a1.944 1.944 0 0 0 1.731-.938 2.008 2.008 0 0 0 .002-2.002zM17 25h-2v-2h2zm0-4h-2V11h2z"},
file:{32:"M20.3 1H4v30h24V8.699zM27 30H5V2h14v8h8zM20 9V2l7 7z"},"file-image":{16:"M13 14H4v-1h9zm-9-2h9v-1.44l-1.527-1.472a.27.27 0 0 0-.37-.028l-1.224.824a.269.269 0 0 1-.35-.01L7.498 8.07a.27.27 0 0 0-.382.018L5.1 10.24a.27.27 0 0 1-.4 0 .27.27 0 0 0-.4 0l-.3.32zm1.752-1a1.38 1.38 0 0 0 .077-.076l1.534-1.636 1.501 1.334a1.267 1.267 0 0 0 1.64.041l.687-.458.809.78V11zM15 3.6V16H2V0h9.4zM14 5h-4V1H3v14h11zm0-1.31L11.31 1H11v3h3zm-3.5 3.06a.75.75 0 1 0 .75.75.75.75 0 0 0-.75-.75z",24:"M18 20H6v-1h12zM6 18h12v-2.8l-2.035-2.035a.377.377 0 0 0-.493-.035l-1.633 1.225a.377.377 0 0 1-.468-.012l-2.706-2.256a.377.377 0 0 0-.509.023l-2.69 2.69a.377.377 0 0 1-.533 0 .377.377 0 0 0-.533 0l-.4.4zm1-1v-1.104a1.376 1.376 0 0 0 1.174-.389l2.287-2.287 2.27 1.89a1.375 1.375 0 0 0 1.708.044l1.2-.9L17 15.614V17zM21 6.709V23H3V1h12.29zM20 8h-6V2H4v20h16zm0-1.2L15.2 2H15v5h5zM14.021 12a.979.979 0 0 0 .979-.979A1.021 1.021 0 0 0 13.979 10a.979.979 0 0 0-.979.979v.043a.981.981 0 0 0 .979.978z"},
"file-magnifying-glass":{16:"M12.4 0H6v3.232a5.4 5.4 0 0 1 1 .395V1h4v4h4v7h-3.7l1 1H16V3.6zM15 4h-3V1h.31L15 3.69zm-5.233 6H12v1h-1.714a1.66 1.66 0 0 0-.707-.385A5.485 5.485 0 0 0 9.767 10zM14 9H9.95c.016-.167.05-.33.05-.501 0-.17-.034-.332-.049-.499H14zm0-2H9.768a5.404 5.404 0 0 0-.395-1H14zm-4.358 4.754a.672.672 0 0 0-.951 0l-.115.115L8 11.294A4.484 4.484 0 0 0 4.499 4a4.5 4.5 0 1 0 2.795 8.001l.575.575-.115.114a.672.672 0 0 0 0 .951l2.16 2.159a.672.672 0 0 0 .95 0l.936-.933a.672.672 0 0 0 .001-.951zm-7.617-.78a3.5 3.5 0 1 1 4.95 0 3.5 3.5 0 0 1-4.95 0zm8.365 3.887l-1.697-1.695.473-.473 1.696 1.698z"},
"file-text":{16:"M13 7H4V6h9zm0 2H4v1h9zm-2 3H4v1h7zm4-8.4V16H2V0h9.4zM14 5h-4V1H3v14h11zm0-1.31L11.31 1H11v3h3z"},folder:{16:"M7.3 3.002L5.98 2H3L1.7 3H0v11h15V3zM14 6H1V4h1.04l1.3-1h2.304l1.319 1H14zm0 7H1V7h13z"},"folder-move":{16:"M5 12H1V6h13v2.352l.007.005.993.994V2l-7.7.002L5.98 1H3L1.7 2H0v11h5zM1 3h1.04l1.3-1h2.304l1.319 1H14v2H1zm14.284 9.563l-2.79 2.79-.708-.706L13.433 13H7v-1h6.308l-1.522-1.521.707-.707z"},"folder-open":{16:"M14 6V3l-6.7.002L5.98 2H3L1.7 3H0v11h14l2-8zM1 4h1.041L3.34 3h2.304l1.319 1.002L13 4v2H9L7.7 7h-5L1 11.408zm2.387 4H8.04l1.3-1h5.379l-1.5 6H1.458z"},
"folder-plus":{16:"M14 9h1v5H0V3h1.7L3 2h2.981l1.04.79A1.966 1.966 0 0 0 7 3v1h-.037L5.644 3H3.34l-1.3 1H1v2h9v1H1v6h13zm-1-6V0h-1v3H9v1h3v3h1V4h3V3z"},globe:{16:"M8 0a8 8 0 1 0 8 8 7.999 7.999 0 0 0-8-8zm3.83 3.162c.067.24.01.47-.273.47a.669.669 0 0 0 .16-.55c.039.027.08.055.112.08zm-.372-.95l.207.072a.803.803 0 0 0-.428.158.406.406 0 0 1 .222-.23zM7.792 1.01a2.963 2.963 0 0 1 .638.012l-.054.083c-.123-.004-.54-.027-.653-.01.073-.074.015-.021.07-.085zM2.527 12.357a7.018 7.018 0 0 1-.414-.58 6.759 6.759 0 0 1 .58.405.918.918 0 0 0-.166.175zm7.606 2.31a6.986 6.986 0 0 1-7.058-1.695c-.003-.07 0-.08.059-.122 1-.692.512-1.033-1.055-2.047-.123-.084-.179-.132-.19-.165-.075-1.662-.082-.85-.662-2.313a2.123 2.123 0 0 0-.222-.427 6.967 6.967 0 0 1 1.911-4.701c.616.008.934.146 1.176-.473.015-.04.06-.16.073-.121.7.04.593.475 1.518-.9a1.156 1.156 0 0 0 .157-.36c.2-.065.405-.119.613-.166-.465.623-.137 1.095.319 1.095.141 0 .731-.33 1.07-.387.608.03.853.118 1.201-.337a2.112 2.112 0 0 1 .3-.416 6.936 6.936 0 0 1 1.548.498c-.508.388-.222.396-.56.838-.334.444-.017.803.425 1.138a2.056 2.056 0 0 0-.28.242.59.59 0 0 0-.223-.321.669.669 0 0 0-.735-.596.599.599 0 0 0-.147 1.122.573.573 0 0 0 .292.473c-.164.242-.081.414-.01.663-.052 0-.29-.069-.374-.069-.72 0-.785 1.215-.46 1.543-.79.68-.809.795-.917 1.017a1.921 1.921 0 0 0-1.248 1.686c0 .41-.25.36-.317.682-.102.485.146.728.435 1.006.32.311.152.587.628.973.572.477.863.374 1.603.268a2.339 2.339 0 0 1 1.257.134c.09.021.181.057.1.298a.596.596 0 0 0 .133.739.275.275 0 0 1 .11.19c.05.639-.197.474-.47 1.01zm.383-8.91l.2.098a.313.313 0 0 1 .255-.052c.37.233.57.424.93.066a2.055 2.055 0 0 1 .325.339.593.593 0 0 0 .914.493c.214.276.447.177.757.255a1.3 1.3 0 0 1 .088.284 1.486 1.486 0 0 1-.52.136c-.114-.03-.231-.125-.35-.125a.533.533 0 0 0-.656.356 1.398 1.398 0 0 1-.698-.416c.1-.693-.948-.767-1.63-.616.02-.025.108-.16.089-.185a.665.665 0 0 0 .094-.14.838.838 0 0 0 .315-.284zm-.996.222a.732.732 0 0 0-.064.138c0-.055.002-.102.005-.147l.059.01zm1.844 8.16a1.248 1.248 0 0 0-.241-1.173.955.955 0 0 0-.68-1.316c-.006-.002-.38-.081-.473-.113-1.052-.302-1.98.487-2.265-.484a2.546 2.546 0 0 0-.573-.79c.382-.424.237-.624.333-1.035.313-1.157.897-.378 1.276-1.376.017-.042.634-.564.768-.765.379.458.848.204 1.465.243.133.77 1.55 1.512 2.121.763.703.292 1.96-.216 1.646-1.118v.001a1.301 1.301 0 0 0-.112-.342.945.945 0 0 0-.935-.511.8.8 0 0 0-.72-.205c-.255-.554-.903-1.088-1.488-.733a.95.95 0 0 0-.705-.183.798.798 0 0 0-.36-.04 5.498 5.498 0 0 0-.033-.098.782.782 0 0 0 .065-.216.87.87 0 0 0 .691-.33c1.179.708 2.182-1.263.96-1.935.016 0 .03-.01.046-.011a6.994 6.994 0 0 1-.786 11.766z",
24:"M13.802 4.306a.683.683 0 01.708.76.528.528 0 01.357.467c.055.888-1.127.8-1.014-.09l-.005-.002a.575.575 0 01-.046-1.135zM11.5 23A11.5 11.5 0 010 11.5v-.021a11.738 11.738 0 012.057-6.534 12.15 12.15 0 014.12-3.637h.005A11.595 11.595 0 0113.618.202l.002.002a11.525 11.525 0 019.325 10.188v.004A11.497 11.497 0 0111.5 23zm9.795-7.748a7.604 7.604 0 01-.666-1.746 4.55 4.55 0 01-.651-1.655 1.383 1.383 0 01-.857-.063l-.332.46c-1.962 0-2.952-.953-3.048-1.636a2.144 2.144 0 00-.992.133l-.113.177-.794.021a2.538 2.538 0 01-.483-.213 7.396 7.396 0 00-.628.541 1.463 1.463 0 01-.941.97 1.544 1.544 0 00-.961 1.24 2.264 2.264 0 01-.449 1.34 2.446 2.446 0 01.811 1.108c.406 1.373 1.703.122 3.24.622.843.277 1.569.18 1.832 1.177a1.695 1.695 0 01.028.937 1.452 1.452 0 01-.025.098 2.11 2.11 0 01.327 1.883 10.447 10.447 0 004.702-5.394zm-1.709-7.096l.25.15c.058.072.16.194.208.265a1.699 1.699 0 011.517 2.251 3.648 3.648 0 01.435.592 10.477 10.477 0 00-3.824-8.016h-.103a1.768 1.768 0 01-1.938 2.838 4.716 4.716 0 01-.723.7 1.525 1.525 0 01.97.078l.183-.654a6.478 6.478 0 012.115 1.527c.295.369-.659 1.364.91.27zm2.17 5.578q.026-.121.049-.243a5.462 5.462 0 00-.843-1.825 18.554 18.554 0 00.793 2.068zM11.405 1.147c.155.004.424.03.574.029l.093-.147c-.189-.01-.375-.029-.566-.029a1.863 1.863 0 01-.102.147zm-8.209 16.74a1.557 1.557 0 01.244-.252c-.26-.196-.54-.372-.808-.545q.263.41.564.797zm11.737 3.525c.434-.81.812-.526.724-1.629a.802.802 0 00-.327-.551c-.2-.205-.155-.428-.051-.682.254-.64-.126-.81-.608-.914a3.809 3.809 0 00-2.22-.08 1.602 1.602 0 01-1.633-.391c-.608-.489-.383-.895-.91-1.416-1.3-1.218-.08-1.268-.08-2.268a2.63 2.63 0 011.416-2.11c.302-.106.437-.127.541-.427.236-.604.565-.578.988-1.055.145-.164.257-.285.48-.285a.723.723 0 01.384.135s.282.166.372.2l.074-.002a3.411 3.411 0 012.208-.269.557.557 0 01.432.7c.017.441 1.488 1.005 1.588.837a.745.745 0 00.066-.184.48.48 0 01.562-.362c.2.01.514.231.703.231a4.382 4.382 0 00.786-.238c.332-.095.21-.532.067-.847-.078-.207-.375-.237-.595-.237-.266.003-.498-.021-.616-.307a.433.433 0 00-.161-.218c.007.01-.022.034-.042.068a.52.52 0 01-.871.07c-.272-.394-.011-.289-.317-.67a3.283 3.283 0 00-.72-.63.545.545 0 01-.525.387c-.265 0-.36-.155-.594-.303-.245-.142-.625-.1-.929.324a2.663 2.663 0 01-.49.436c-.211.264-.036.313-.4.628-.342.317-.623.179-1.069.059-.477-.111-.42-.747-.347-1.246.078-.5.294-.712.802-.58.729.178.762.038.579-.475-.17-.378-.042-.636.215-.748.78-.317 1.183-1.443 1.906-1.125a.766.766 0 00.887-1.249.868.868 0 01-.316-.254.095.095 0 00-.07-.033c-.219 0-.155.495-.138.713a.492.492 0 01-.49.525c-.281 0-.753-.454-.953-.653-.385-.387-.119-.603.087-1.004a5.425 5.425 0 01.34-.69 1.71 1.71 0 01.588-.442 10.406 10.406 0 00-3.028-.996c-.332.335-.51.95-.954 1.01-.302.054-.912-.059-1.193-.006-.391.08-1.292.553-1.396.553-.57 0-.81-.74.197-1.574a10.398 10.398 0 00-1.884.475 7.258 7.258 0 01-1.042 1.57c-.299.372-.662.062-1.088.016-.565-.056-.325 1.011-1.198.915a5.775 5.775 0 00-.588-.039A10.467 10.467 0 001 11.5c0 .054.007.107.008.161.061.103.41.9.588 1.252.944 1.962.527 1.457.562 2.457.01.238.202.343.42.493a10.28 10.28 0 012.006 1.477.495.495 0 01.111.525c-.07.264-.346.34-.568.502a.431.431 0 00-.21.376 10.425 10.425 0 0011.017 2.669z"},
grid:{16:"M0 0v7h7V0zm6 6H1V1h5zm3-6v7h7V0zm6 6h-5V1h5zM0 9v7h7V9zm6 6H1v-5h5zm3-6v7h7V9zm6 6h-5v-5h5z",32:"M3 15h12V3H3zM4 4h10v10H4zm13 11h12V3H17zm1-11h10v10H18zM3 29h12V17H3zm1-11h10v10H4zm13 11h12V17H17zm1-11h10v10H18z"},group:{16:"M7.5 5h2a1.497 1.497 0 0 1 1.486 1.359 3.452 3.452 0 0 1 .969-.304 2.498 2.498 0 0 0-1.6-1.895 2.5 2.5 0 1 0-3.71 0 2.498 2.498 0 0 0-1.6 1.895 3.452 3.452 0 0 1 .97.304A1.497 1.497 0 0 1 7.5 5zm1-4A1.5 1.5 0 1 1 7 2.5 1.502 1.502 0 0 1 8.5 1zm5.855 10.16a2.5 2.5 0 1 0-3.71 0A2.5 2.5 0 0 0 9 13.5V16h7v-2.5a2.5 2.5 0 0 0-1.645-2.34zM12.5 8A1.5 1.5 0 1 1 11 9.5 1.502 1.502 0 0 1 12.5 8zm2.5 7h-5v-1.5a1.517 1.517 0 0 1 1.5-1.5h2a1.517 1.517 0 0 1 1.5 1.5zM1 13.5V16h7v-2.5a2.5 2.5 0 0 0-1.645-2.34 2.5 2.5 0 1 0-3.71 0A2.5 2.5 0 0 0 1 13.5zM7 15H2v-1.5A1.517 1.517 0 0 1 3.5 12h2A1.517 1.517 0 0 1 7 13.5zM4.5 8A1.5 1.5 0 1 1 3 9.5 1.502 1.502 0 0 1 4.5 8z",
32:"M16 9a4 4 0 1 0-4-4 4.005 4.005 0 0 0 4 4zm0-7a3 3 0 1 1-3 3 3.003 3.003 0 0 1 3-3zm3.101 16a4.944 4.944 0 0 0 .323 1h-6.848a4.944 4.944 0 0 0 .323-1zm-8.588-5.297a4.945 4.945 0 0 0-.908-.415A4.485 4.485 0 0 1 13.5 10h5a4.485 4.485 0 0 1 3.895 2.288 4.945 4.945 0 0 0-.908.415A3.49 3.49 0 0 0 18.5 11h-5a3.49 3.49 0 0 0-2.987 1.703zM12 17a4 4 0 1 0-4 4 4.005 4.005 0 0 0 4-4zm-4 3a3 3 0 1 1 3-3 3.003 3.003 0 0 1-3 3zm-7 6.5V31h14v-4.5a4.505 4.505 0 0 0-4.5-4.5h-5A4.505 4.505 0 0 0 1 26.5zm9.5-3.5a3.504 3.504 0 0 1 3.5 3.5V30H2v-3.5A3.504 3.504 0 0 1 5.5 23zM24 13a4 4 0 1 0 4 4 4.005 4.005 0 0 0-4-4zm0 7a3 3 0 1 1 3-3 3.003 3.003 0 0 1-3 3zm2.5 2h-5a4.505 4.505 0 0 0-4.5 4.5V31h14v-4.5a4.505 4.505 0 0 0-4.5-4.5zm3.5 8H18v-3.5a3.504 3.504 0 0 1 3.5-3.5h5a3.504 3.504 0 0 1 3.5 3.5z"},
home:{16:"M8 0L6 2V0H3v5L0 8h1v8h5v-6h4v6h5V7.978h1zm6 15h-3V9H5v6H2V7.414l2-2V1h1v3.414l3.001-3L14 7.395z"},image:{16:"M1 2v12h14V2zm13 11H2V3h12zm-1-1H3v-1h10zM3 8.678l.333-.356a.3.3 0 0 1 .445 0 .3.3 0 0 0 .444 0l2.242-2.39a.3.3 0 0 1 .423-.021l2.255 2.005a.299.299 0 0 0 .39.01l1.361-.915a.3.3 0 0 1 .41.032L13 8.678V10H3zM11.894 9l-.89-.859-.846.565a1.299 1.299 0 0 1-1.68-.043L6.732 7.11 4.958 9zm-.644-4.5a.75.75 0 1 1-.75-.75.75.75 0 0 1 .75.75z",32:"M2 4v24h28V4zm27 23H3V5h26zm-9.5-17A1.5 1.5 0 1 1 21 8.5a1.502 1.502 0 0 1-1.5 1.5zm.5-1.5a.5.5 0 1 0-.5.5.5.5 0 0 0 .5-.5zM28 25H4v-1h24zM7.624 16.026l.827.39 5.138-4.267a.652.652 0 0 1 .857.013l.863.774c.864.771 2.71 2.382 3.845 3.357l2.923-2.748a.652.652 0 0 1 .926.033L28 19v4H4v-4.547l2.905-2.31a.642.642 0 0 1 .719-.117zM27 22v-2.61l-4.494-4.875-3.322 3.122-.682-.586a355.007 355.007 0 0 1-3.861-3.37l-.637-.573-5.4 4.487-1.184-.56L5 18.88V22z"},
imagePlus:{16:"M7 14v1H0V1h16v9h-1V2H1v8.2l1.4-1.4a.377.377 0 0 1 .533 0 .377.377 0 0 0 .534 0l2.69-2.69a.377.377 0 0 1 .508-.023L9.37 8.343a.377.377 0 0 0 .468.012L10 8.234v1.133a1.326 1.326 0 0 1-1.269-.256L6.461 7.22 4.173 9.509a1.37 1.37 0 0 1-.973.402 1.387 1.387 0 0 1-.429-.068L1 11.614V14zm4.5-9.5a1 1 0 1 0-1 1 1 1 0 0 0 1-1zM13 16v-3h3v-1h-3V9h-1v3H9v1h3v3z"},info:{16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM7.5 5.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM7 7h1v5H7zm2 5H6v-1h3z",
24:"M11.5 1A10.5 10.5 0 1 0 22 11.5 10.499 10.499 0 0 0 11.5 1zm0 20.1a9.6 9.6 0 1 1 9.6-9.6 9.61 9.61 0 0 1-9.6 9.6zM13 18h-3v-1h1V8h1v9h1zM11.5 6.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM12 9h-2V8h2z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.517 14.517 0 0 0 15.5 1zm0 28A13.5 13.5 0 1 1 29 15.5 13.515 13.515 0 0 1 15.5 29zm1.5-6h-3v-1h1V11h1v11h1zM15.5 8.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM16 12h-2v-1h2z"},"information-f":{16:"M8 .15A7.85 7.85 0 1 0 15.85 8 7.85 7.85 0 0 0 8 .15zM9 12H7V6h2zm0-7H7V3h2z"},
key:{16:"M10.075 1A4.926 4.926 0 0 0 5.15 5.925a4.874 4.874 0 0 0 .51 2.141L0 13.726V16h3.222l.022-.01.756-.756V14h1.233L6 13.233V12h1.232l1.393-1.393a4.869 4.869 0 0 0 1.45.243 4.925 4.925 0 1 0 0-9.85zM6.818 11H5v1.82l-.18.18H3v1.82l-.18.18H1v-.86l5.204-5.204a4.918 4.918 0 0 0 1.434 1.244zm3.257-1.15A3.925 3.925 0 1 1 14 5.925a3.93 3.93 0 0 1-3.925 3.925zM11.5 3A1.5 1.5 0 1 0 13 4.5 1.5 1.5 0 0 0 11.5 3zm0 2a.5.5 0 1 1 .5-.5.501.501 0 0 1-.5.5z"},launch:{16:"M14 8h1v7H1V1h7v1H2v12h12zm-4-7v1h3.29L7.62 7.67l.71.71L14 2.71V6h1V1z",
24:"M13 2v1H3v18h18V11h1v11H2V2zm9 6V2h-6v1h4.3l-8.41 8.403.707.707L21 3.714V8z"},layer:{16:"M12.207 13.2A6.624 6.624 0 0 1 16 14.29L13.867 1.687a8.205 8.205 0 0 0-3.161-.674c-2.69 0-2.724.986-5.412.986a10.39 10.39 0 0 1-3.161-.512L0 14.09a9.158 9.158 0 0 0 3.793.711c3.665 0 4.749-1.6 8.414-1.6zM2.935 2.74A11.376 11.376 0 0 0 5.294 3a7.833 7.833 0 0 0 3.045-.552 5.895 5.895 0 0 1 2.367-.434 7.213 7.213 0 0 1 2.27.399l1.72 10.163a8.317 8.317 0 0 0-2.489-.376 12.79 12.79 0 0 0-4.526.852 10.962 10.962 0 0 1-3.888.748 9.54 9.54 0 0 1-2.668-.363z"},
"layer-basemap":{32:"M31.603 27.899l-4-24s-6-2-11 0a13.388 13.388 0 0 1-11 0L1.61 27.865c.752.17 7.816 2.427 14.994.034 8.04-2.68 15.96.48 15 0zm-7.927-2.091a23.33 23.33 0 0 0-7.389 1.142 21.34 21.34 0 0 1-6.756 1.04 28.2 28.2 0 0 1-6.785-.864L6.39 5.266a13.201 13.201 0 0 0 4.553.8 16.268 16.268 0 0 0 6.032-1.238 12.652 12.652 0 0 1 4.703-.818 20.298 20.298 0 0 1 5.043.674l3.651 21.908a29.998 29.998 0 0 0-6.696-.784zM1.609 27.865l-.006.034c-.103-.052-.084-.055.006-.034zm23.36-21.53a18.501 18.501 0 0 0-2.209-.284l-.011-.001a15.46 15.46 0 0 0-1.071-.04 10.688 10.688 0 0 0-3.961.675 18.243 18.243 0 0 1-6.774 1.382 15.075 15.075 0 0 1-2.927-.282v.001l-.018-.002-2.966 17.79.02.003H5.05a25.156 25.156 0 0 0 4.495.414h.004c.039 0 .075-.005.115-.006a21.638 21.638 0 0 0 3.946-.4v-.005c2.635-.535 4.778-1.771 10.065-1.771a30.81 30.81 0 0 1 4.253.299v-.001h.002zm-3.04 16.538a36.78 36.78 0 0 0-1.061.083 1.708 1.708 0 0 0 .73-1.412 1.502 1.502 0 0 0-.18-.71l.072-.066a2.025 2.025 0 0 0 .82-1.55v-.25a1.794 1.794 0 0 0 .602.105 1.999 1.999 0 0 0 1.63-.97 2.347 2.347 0 0 0 .514.676 2.616 2.616 0 0 0 1.067.564l.603 3.614a31.59 31.59 0 0 0-3.05-.15c-.036 0-.07.004-.106.005a27.32 27.32 0 0 0-1.64.06zM20.693 8.326a2.143 2.143 0 0 0-1.254.76 1.592 1.592 0 0 0-.417 1.319l.023.112c.196.96.153 1.307-.186 1.49a3.217 3.217 0 0 0-1.239 1.38 2.399 2.399 0 0 1-.276.43c.032-.03-.06-.1-.128-.15a2.19 2.19 0 0 0-1.366-.537 1.864 1.864 0 0 0-1.813 1.907c0 .32-.32.815-.48.815a.556.556 0 0 1-.26-.038 2.364 2.364 0 0 0-2.032-1.539 2.151 2.151 0 0 0-2.099 2.196 3.19 3.19 0 0 0 .128.849 1.341 1.341 0 0 1 .062.344.94.94 0 0 1-.164.406 2.694 2.694 0 0 0-.408 1.363 1.746 1.746 0 0 0 1.812 1.667 2.718 2.718 0 0 0 1.043-.213 4.21 4.21 0 0 1-.377.41 2.41 2.41 0 0 0-.75 3.023 1.469 1.469 0 0 0 .58.61c-.35.028-.7.033-1.052.042-.17.004-.336.018-.508.018a23.876 23.876 0 0 1-3.329-.24L8.838 8.932a16.49 16.49 0 0 0 2.123.135 19.256 19.256 0 0 0 7.146-1.454 9.276 9.276 0 0 1 2.658-.57h.016q-.032.073-.058.15a1.815 1.815 0 0 0-.095.583 3.228 3.228 0 0 0 .064.549zm-5.354 15.778a16.56 16.56 0 0 1-2.06.523c-.577-.338-1.65-.315-1.872-.755-.755-1.509 1.29-1.896 1.29-3.103 0-.3-.154-.909-.621-.956-.653-.067-.823.287-1.48.287a.751.751 0 0 1-.812-.667c0-.718.572-1.052.572-1.769 0-.466-.19-.729-.19-1.193a1.15 1.15 0 0 1 1.098-1.196c.598 0 .86.49 1.146 1.004a1.19 1.19 0 0 0 1.147.573c.907 0 1.48-1.133 1.48-1.815a.875.875 0 0 1 .813-.907c.644 0 .883.669 1.528.669 1.062 0 1.022-1.405 1.958-1.912 1.146-.62.812-1.956.668-2.672-.062-.319.54-.932.861-.91 1.337.097.764-1 .764-1.528a.824.824 0 0 1 .042-.263 1.218 1.218 0 0 1 .355-.49A16.23 16.23 0 0 1 24.1 7.2l1.83 10.981a1.527 1.527 0 0 1-.22-.154c-.456-.4-.446-1.2-1.068-1.2-.835 0-.901 1.246-1.736 1.246-.379 0-.557-.268-.935-.268a.616.616 0 0 0-.667.546v.868c0 .733-.978.879-.978 1.614 0 .299.266.41.266.71 0 .934-1.528.893-1.739 1.692a24.652 24.652 0 0 0-3.514.869z"},
"layer-feature":{32:"M27 4a20.57 20.57 0 0 0-4.061-.793 3.177 3.177 0 0 1 .061.6v.412a20.975 20.975 0 0 1 3.117.565l3.614 21.686a20.65 20.65 0 0 0-5.842-.803 25.953 25.953 0 0 0-8.205 1.385 23.961 23.961 0 0 1-7.573 1.281 18.036 18.036 0 0 1-5.993-.957L5.804 5.26A22.899 22.899 0 0 0 9 5.793V4.787A20.657 20.657 0 0 1 5 4L1 28s6 3 15 0 15 0 15 0zm-5 .608v10.665l-6 5.996-6-5.996V4.608C10 2.455 12.258 0 16 0s6 2.455 6 4.608zm-6 15.247l5-4.996V4.607C21 3.095 19.262 1 16 1s-5 2.095-5 3.607V14.86zM19 7a3 3 0 1 1-3-3 3 3 0 0 1 3 3zm-1 0a2 2 0 1 0-2 2 2.002 2.002 0 0 0 2-2z"},
"layer-graphics":{32:"M31 27.9c.96.48-6.96-2.68-15 0s-15.96-.48-15 0l4-24a13.388 13.388 0 0 0 11 0c5-2 11 0 11 0zm-15.316-.949a23.333 23.333 0 0 1 7.389-1.142 29.997 29.997 0 0 1 6.696.784L26.117 4.685a20.301 20.301 0 0 0-5.043-.674 12.648 12.648 0 0 0-4.702.818 16.272 16.272 0 0 1-6.033 1.24 13.214 13.214 0 0 1-4.553-.8L2.143 27.126a28.17 28.17 0 0 0 6.784.864 21.342 21.342 0 0 0 6.757-1.04zm1.543-17.28a12.423 12.423 0 0 1 4.305-.773 20.349 20.349 0 0 1 2.964.229l-.132-.791a17.556 17.556 0 0 0-3.29-.327 10.623 10.623 0 0 0-3.96.774 16.71 16.71 0 0 1-6.188 1.303 23.281 23.281 0 0 1-3.488-.273l-.16.96a26.752 26.752 0 0 0 3.219.202 19.531 19.531 0 0 0 6.73-1.303zm6.41 12.159A26.767 26.767 0 0 0 16 23v-7.828A26.697 26.697 0 0 1 23.637 14c.58 0 1.13.023 1.658.06l1.327 7.965a23.502 23.502 0 0 0-2.985-.195zM17 21.688a27.149 27.149 0 0 1 6.637-.858c.592 0 1.182.023 1.784.068l-.98-5.883Q24.047 15 23.636 15a25.363 25.363 0 0 0-6.637.927zm-8 2.2a3.757 3.757 0 0 1-4-3.445A3.757 3.757 0 0 1 9 17a3.757 3.757 0 0 1 4 3.443 3.757 3.757 0 0 1-4 3.446zm3-3.445A2.768 2.768 0 0 0 9 18a2.768 2.768 0 0 0-3 2.443 2.769 2.769 0 0 0 3 2.446 2.769 2.769 0 0 0 3-2.446z"},
"layer-imagery":{32:[{d:"M23.463 23.2a26.071 26.071 0 0 0-3.463.224v-5.076a34.065 34.065 0 0 1 5.302-.251l.861 5.191c-.9-.059-1.804-.088-2.7-.088zM13 8.705v4.258c.456-.124.916-.253 1.392-.389A46.427 46.427 0 0 1 19 11.432V7.347a16.922 16.922 0 0 0-2.396.56A22.646 22.646 0 0 1 13 8.705z",opacity:.25},{d:"M13 13.999a84.02 84.02 0 0 0 1.666-.464c1.323-.378 2.741-.78 4.334-1.08v5.03a32.286 32.286 0 0 0-4.714 1.202c-.435.137-.86.267-1.286.391zm-4.463 11.8A16.675 16.675 0 0 0 12 25.477v-5.1a15.064 15.064 0 0 1-3.463.395 20.464 20.464 0 0 1-2.259-.142l-.796 4.796a13.024 13.024 0 0 0 3.055.375z",
opacity:.5},{d:"M23.462 27.2A33.153 33.153 0 0 1 31 28L27 3.9a26.401 26.401 0 0 0-5.926-.689c-5.144 0-5.927 1.657-10.735 1.657A14.99 14.99 0 0 1 5 3.9L1 28a16.273 16.273 0 0 0 7.538 1.8c6.876 0 8.048-2.6 14.924-2.6zm-21.355.234L5.795 5.217a15.6 15.6 0 0 0 4.544.651 17.42 17.42 0 0 0 5.445-.847 16.628 16.628 0 0 1 5.29-.81 26.164 26.164 0 0 1 5.05.518l3.651 21.999a37.286 37.286 0 0 0-6.313-.528 22.381 22.381 0 0 0-7.77 1.348A20.422 20.422 0 0 1 8.539 28.8a15.989 15.989 0 0 1-6.43-1.366zM24.384 6.456a23.558 23.558 0 0 0-3.31-.245 14.762 14.762 0 0 0-4.738.733 19.402 19.402 0 0 1-5.996.924 18.182 18.182 0 0 1-2.92-.228L4.349 26.146a14.096 14.096 0 0 0 4.188.654 18.525 18.525 0 0 0 6.541-1.154 24.357 24.357 0 0 1 8.385-1.446c1.448 0 2.763.078 3.896.188zM20 12.29a26.155 26.155 0 0 1 4.29-.29l.845 5.097a35.442 35.442 0 0 0-5.135.242zm3.519-4.935l.604 3.643a27.235 27.235 0 0 0-4.123.276V7.246c.33-.02.68-.035 1.074-.035a21.744 21.744 0 0 1 2.445.143zm-6.915.553A16.922 16.922 0 0 1 19 7.347v4.085a46.427 46.427 0 0 0-4.608 1.142c-.475.136-.936.265-1.392.389V8.705a22.646 22.646 0 0 0 3.604-.798zM13 14a84.02 84.02 0 0 0 1.666-.464c1.323-.378 2.741-.78 4.334-1.08v5.03a32.286 32.286 0 0 0-4.714 1.202c-.435.137-.86.267-1.286.391zm-2.66-5.13c.603 0 1.146-.027 1.66-.065v4.414a13.823 13.823 0 0 1-4.56.414l.808-4.872a19.724 19.724 0 0 0 2.092.108zM12 19.344a15.286 15.286 0 0 1-5.558.299l.832-5.012c.407.04.808.066 1.198.066A15.487 15.487 0 0 0 12 14.241zm-6.518 6.08l.796-4.796a20.464 20.464 0 0 0 2.26.143A15.064 15.064 0 0 0 12 20.376v5.1a16.675 16.675 0 0 1-3.463.324 13.024 13.024 0 0 1-3.055-.375zm9.289-.73a39.72 39.72 0 0 1-1.771.537V20.12a49.66 49.66 0 0 0 1.587-.48A31.896 31.896 0 0 1 19 18.5v5.077a30.389 30.389 0 0 0-4.23 1.117zM20 23.423v-5.076a34.138 34.138 0 0 1 5.302-.25l.861 5.19c-.9-.059-1.804-.088-2.7-.088a26.071 26.071 0 0 0-3.463.224z"}]},
"layer-points":{16:"M12.207 13.2A6.624 6.624 0 0 1 16 14.29L13.867 1.687a8.204 8.204 0 0 0-3.161-.674c-2.69 0-2.724.986-5.412.986a10.39 10.39 0 0 1-3.161-.512L0 14.09a9.158 9.158 0 0 0 3.793.711c3.665 0 4.749-1.6 8.414-1.6zM2.935 2.74A11.376 11.376 0 0 0 5.294 3a7.833 7.833 0 0 0 3.045-.552 5.895 5.895 0 0 1 2.367-.434 7.212 7.212 0 0 1 2.27.399l1.72 10.163a8.317 8.317 0 0 0-2.489-.376 12.79 12.79 0 0 0-4.526.852 10.962 10.962 0 0 1-3.888.748 9.54 9.54 0 0 1-2.668-.363zM4.5 5.5a1 1 0 1 1 1 1 1 1 0 0 1-1-1zm6 3a1 1 0 1 1 1 1 1 1 0 0 1-1-1zm-7 2a1 1 0 1 1 1 1 1 1 0 0 1-1-1z",
32:"M1.006 27.866L1 27.9c-.103-.051-.085-.055.006-.034zM16 27.9c-7.178 2.393-14.242.137-14.994-.034L5 3.9a13.387 13.387 0 0 0 11 0c5-2 11 0 11 0l4 24c.96.48-6.96-2.68-15 0zm13.769-1.307L26.117 4.685a20.301 20.301 0 0 0-5.043-.674 12.648 12.648 0 0 0-4.702.818 16.272 16.272 0 0 1-6.033 1.24 13.214 13.214 0 0 1-4.553-.8L2.143 27.126a28.17 28.17 0 0 0 6.784.864 21.342 21.342 0 0 0 6.757-1.04 23.333 23.333 0 0 1 7.389-1.142 29.997 29.997 0 0 1 6.696.784zM12.5 10.5a1 1 0 1 0 1 1 1 1 0 0 0-1-1zm9 4a1 1 0 1 0 1 1 1 1 0 0 0-1-1zm-10 5a1 1 0 1 0 1 1 1 1 0 0 0-1-1z"},
"layer-tile":{32:"M31 28s-6-3-15 0-15 0-15 0l2.714-16.286.87.87-2.466 14.792a18.032 18.032 0 0 0 5.993.957 23.961 23.961 0 0 0 7.573-1.281 25.957 25.957 0 0 1 8.205-1.385 20.658 20.658 0 0 1 5.842.803L26.117 4.784a20.35 20.35 0 0 0-5.043-.673 12.939 12.939 0 0 0-4.286.677L16 4c5-2 11 0 11 0zM16 7h9v17H8v-9h8zM9 23h3.243l.04-.137a6.48 6.48 0 0 1 .546-1.23 3.236 3.236 0 0 0 .337-.757.575.575 0 0 0-.1-.327 1.52 1.52 0 0 1-.218-.787c0-1.236 1.963-2.573 2.619-2.573H16V16H9zm7 0v-4.812h-.533c-.347.075-1.62 1.022-1.62 1.574a.55.55 0 0 0 .1.313 1.545 1.545 0 0 1 .219.801 2.894 2.894 0 0 1-.454 1.227 6.684 6.684 0 0 0-.414.897zm8 0v-4.918a10.162 10.162 0 0 0-2.276.865c-1.58.79-3.622.08-4.724-.427V23zm0-7h-7v1.41c.751.388 2.867 1.345 4.276.643A10.442 10.442 0 0 1 24 17.058zm-7-1h7V8h-7zM6 14V5h9v9zm8-8H7v5.145a.824.824 0 0 0 .627-.21 2.075 2.075 0 0 0 .663-1.392 1.508 1.508 0 0 1 1.448-1.558 1.893 1.893 0 0 1 1.194.494 1.296 1.296 0 0 0 .467.255.517.517 0 0 0 .123.034c.316 0 .486-.183.738-.608.042-.07.08-.129.126-.212A2.776 2.776 0 0 1 14 6.428zm0 7V7.513a2.36 2.36 0 0 0-.743.926c-.334.592-.75 1.329-1.736 1.329a1.735 1.735 0 0 1-1.069-.403l-.124-.09a.997.997 0 0 0-.59-.29c-.257 0-.448.294-.448.558a2.6 2.6 0 0 1-.112.672 3.02 3.02 0 0 1-.908 1.487 1.854 1.854 0 0 1-1.205.46c-.021 0-.043-.005-.065-.006V13z"},
layers:{16:"M8.023 1.023l-8 4.5 8 4.5 8-4.5zm-5.96 4.5l5.96-3.352 5.96 3.352-5.96 3.353zm13.96 3l-8 4.5-8-4.5 1.02-.573 6.98 3.926 6.98-3.926zm-8 6.353l6.98-3.926 1.02.573-7.914 4.452a.175.175 0 0 1-.171 0L.023 11.523l1.02-.573z"},lightbulb:{24:"M16.337 3.055a6.057 6.057 0 0 0-4.675-2.051l-.162.002-.162-.002a6.057 6.057 0 0 0-4.675 2.05 6.46 6.46 0 0 0-1.63 4.802 11.406 11.406 0 0 0 2.014 4.465 6.703 6.703 0 0 1 .75 1.322 12.957 12.957 0 0 1 .113 1.333c.019.366.037.71.074.994a2.84 2.84 0 0 0 .704 1.576l-.525.458a.804.804 0 0 0 .066 1.264l.414.293-.364.263a.804.804 0 0 0-.333.689.794.794 0 0 0 .37.641l2.45 1.625a1.311 1.311 0 0 0 .723.22h.016a1.316 1.316 0 0 0 .73-.22l2.43-1.613a.803.803 0 0 0 .059-1.34l-.367-.265.418-.295a.806.806 0 0 0 .062-1.263l-.525-.458a2.87 2.87 0 0 0 .707-1.596c.034-.263.052-.607.07-.973a12.957 12.957 0 0 1 .114-1.333 6.703 6.703 0 0 1 .75-1.322 11.406 11.406 0 0 0 2.014-4.465 6.46 6.46 0 0 0-1.63-4.801zm-2.43 17.414l-2.225 1.476a.41.41 0 0 1-.185.053h-.002a.32.32 0 0 1-.177-.053L9.093 20.47l1.264-.923-1.35-.953.68-.594h3.626l.68.594-1.35.953zM12 17h-1v-3h1zm4.975-9.263a10.671 10.671 0 0 1-1.863 4.042 5.638 5.638 0 0 0-.895 1.7 13.401 13.401 0 0 0-.125 1.446c-.018.336-.033.65-.07.93A1.898 1.898 0 0 1 13.456 17H13v-3.421l1.075-3.325-.951-.309L12.136 13h-1.272l-.988-3.055-.951.309L10 13.579V17h-.456a1.93 1.93 0 0 1-.57-1.182c-.033-.243-.048-.557-.066-.893a13.401 13.401 0 0 0-.125-1.446 5.638 5.638 0 0 0-.895-1.7 10.671 10.671 0 0 1-1.863-4.042 5.49 5.49 0 0 1 1.386-4.02 5.083 5.083 0 0 1 3.927-1.713l.162.002.162-.002a5.083 5.083 0 0 1 3.927 1.714 5.49 5.49 0 0 1 1.386 4.02z"},
link:{16:"M5 9.5a4.505 4.505 0 0 0 .048.493c-.007-.007-.016-.011-.023-.018l-3-3a3.5 3.5 0 1 1 4.95-4.95l3 3a3.486 3.486 0 0 1-1.31 5.76l-.226-.225a1.484 1.484 0 0 1-.37-.631 2.495 2.495 0 0 0 1.199-4.197l-3-3a2.5 2.5 0 1 0-3.536 3.536L5.09 8.625A4.498 4.498 0 0 0 5 9.5zm11 3a3.475 3.475 0 0 0-1.025-2.475l-3-3c-.007-.007-.016-.011-.023-.018A4.505 4.505 0 0 1 12 7.5a4.498 4.498 0 0 1-.089.876l2.357 2.356a2.5 2.5 0 0 1-.009 3.544 2.561 2.561 0 0 1-3.527-.008l-3-3a2.5 2.5 0 0 1-.094-3.436 2.43 2.43 0 0 1 1.3-.74 1.485 1.485 0 0 0-.377-.652l-.222-.222a3.482 3.482 0 0 0-1.314 5.757l3 3a3.5 3.5 0 0 0 4.937.012l-.351-.355.352.355A3.476 3.476 0 0 0 16 12.5z",
24:"M7 14c0 .025.003.05.004.075l-3.54-3.54a5 5 0 0 1 7.072-7.07l4 4a4.992 4.992 0 0 1-1.713 8.187l-.237-.237a1.998 1.998 0 0 1-.413-.609 3.985 3.985 0 0 0 1.656-6.635l-4-4a4 4 0 0 0-5.369-.26l-.318-.387.318.386a4 4 0 0 0-.29 5.92l2.94 2.94A7.012 7.012 0 0 0 7 14zm16 4a4.97 4.97 0 0 0-1.464-3.536l-3.54-3.539c0 .025.004.05.004.075a7.087 7.087 0 0 1-.113 1.23l2.942 2.941a4 4 0 0 1-.128 5.78l.338.368-.338-.368a4 4 0 0 1-5.53-.122l-4-4a3.966 3.966 0 0 1 1.658-6.631 1.998 1.998 0 0 0-.415-.613l-.234-.234a5.004 5.004 0 0 0-1.907 1.315 5 5 0 0 0 .191 6.87l4 4A5 5 0 0 0 23 18z"},
list:{16:"M6 14h9v1H6zm-5-1h3v3H1zm1 2h1v-1H2zM6 2v1h9V2zm0 7h9V8H6zM1 1h3v3H1zm1 2h1V2H2zM1 7h3v3H1zm1 2h1V8H2z"},locator:{32:"M27 15h2l-4-4V3h-5v3l-4.5-4.5L2 15h2v14H2v1h27v-1h-2zM21 4h3v6l-3-3zm-5.5-1.086L26.586 14H4.414zM5 29V15h21v14zm4-4h13v-7H9zm12-6v5h-5v-5zm-11 0h5v5h-5z"},lock:{16:"M13 7V5A5 5 0 0 0 3 5v2a1.003 1.003 0 0 0-1 1v7a1.003 1.003 0 0 0 1 1h10a1.003 1.003 0 0 0 1-1V8a1.003 1.003 0 0 0-1-1zM4 5a4 4 0 0 1 8 0v2h-1V5a3 3 0 0 0-6 0v2H4zm6 2H6V5a2 2 0 0 1 4 0zm3 8H3V8h10zm-5-1H7V9h1v1h1v1H8v1h1v1H8z",
32:"M26 14h-2v-3.5a8.5 8.5 0 0 0-17 0V14H5a2.006 2.006 0 0 0-2 2v14a2.006 2.006 0 0 0 2 2h21a2.006 2.006 0 0 0 2-2V16a2.006 2.006 0 0 0-2-2zM8 10.5a7.5 7.5 0 0 1 15 0V14h-1v-3.5a6.5 6.5 0 0 0-13 0V14H8zM21 14H10v-3.5a5.5 5.5 0 0 1 11 0zm6 16a1.001 1.001 0 0 1-1 1H5a1.001 1.001 0 0 1-1-1V16a1.001 1.001 0 0 1 1-1h21a1.001 1.001 0 0 1 1 1zM16 19h1v1h-1zm-1 1h1v1h1v1h-1v1h1v1h-1v1h1v1h-1v1h-1z"},line:{16:"M6 5v1.293L9.707 10h.328L14 3.657V2h2v2h-1.035L11 10.343V12H9v-1.293L5.293 7h-.492L2 12.383V14H0v-2h1.073L4 6.374V5z",
24:"M21 6h.046l-5.25 9h-.944L10 9.455V7H7v2.926L1.862 18H0v3h3v-2.926L8.138 10h1.01L14 15.545V18h3v-3h-.046l5.25-9H24V3h-3zM8 8h1v1H8zM2 20H1v-1h1zm14-3h-1v-1h1zm7-13v1h-1V4z"},"magnifying-glass-plus":{16:"M15.805 13.918l-3.067-3.068a.668.668 0 0 0-.943 0l-.124.124-.968-.968a5.5 5.5 0 1 0-.69.69l.968.968-.13.129a.667.667 0 0 0 0 .943l3.068 3.067a.665.665 0 0 0 .943 0l.943-.942a.666.666 0 0 0 0-.943zM9.683 9.68A4.47 4.47 0 0 1 6.5 10.999a4.502 4.502 0 1 1 3.183-1.318zm4.708 5.18l-2.597-2.596.473-.473 2.595 2.598zM7 6h2v1H7v2H6V7H4V6h2V4h1z"},
map:{16:"M1 1v14h14V1zm9.082 13c-.005-.037-.113-.274-.122-.309a1.498 1.498 0 0 0 .718-1.267 1.24 1.24 0 0 0-.053-.358 1.594 1.594 0 0 0 .326-.607c.03.002.062.003.093.003a1.415 1.415 0 0 0 .836-.266 1.517 1.517 0 0 0 .126.124 2.385 2.385 0 0 0 1.564.68H14v2h-3.183zM14 11h-.43a1.464 1.464 0 0 1-.906-.433c-.264-.23-.258-.782-.617-.782-.482 0-.52.677-1.003.677-.219 0-.38-.177-.599-.177-.193 0-.445.102-.445.293v.502c0 .424-.506.508-.506.934 0 .171.184.236.184.41 0 .58-.893.502-.893 1.08 0 .191.215.305.215.486V14H6.375a1.545 1.545 0 0 0 .09-.502c0-.547-1.043-.393-1.207-.72-.407-.813.693-1.022.693-1.673 0-.16-.082-.488-.334-.513-.351-.035-.443.154-.797.154a.406.406 0 0 1-.437-.36c0-.386.308-.566.308-.952 0-.25-.102-.393-.102-.643a.619.619 0 0 1 .59-.643c.323 0 .464.264.618.54a.642.642 0 0 0 .617.308c.49 0 .798-.61.798-.977a.471.471 0 0 1 .437-.488c.347 0 .476.36.824.36.57 0 .55-.756 1.053-1.03.618-.332.438-1.052.36-1.44-.032-.169.29-.5.464-.487.72.05.412-.54.412-.823a.434.434 0 0 1 .022-.142c.111-.332.595-.438.595-.836 0-.281-.233-.41-.233-.693a.653.653 0 0 1 .22-.44H14zM2 14V2h8.278c-.013.077-.132.356-.132.44a1.496 1.496 0 0 0 .112.567 1.6 1.6 0 0 0-.422.643 1.428 1.428 0 0 0-.074.442 1.676 1.676 0 0 0-.536.43 1.317 1.317 0 0 0-.32 1.091 3.213 3.213 0 0 1 .066.414 1.987 1.987 0 0 0-.649.67 1.462 1.462 0 0 0-.674-.166 1.447 1.447 0 0 0-1.383 1.086 1.443 1.443 0 0 0-1.086-.469 1.62 1.62 0 0 0-1.591 1.643c0 .254.113.293.084.574s-.29.535-.29 1.022a1.371 1.371 0 0 0 .984 1.29 1.583 1.583 0 0 0-.003 1.549c.143.286.636.774.534.774z",
24:"M22.82 15.995l-.02-.016V1.2H1.2v21.6h21.6v-6.78zM22 15.81a2.898 2.898 0 0 1-.749.147 2.476 2.476 0 0 1-.396.044c-.319 0-.746-.376-1.03-.625a1.32 1.32 0 0 1-.214-.39c-.145-.339-.39-.907-1.04-.907a1.585 1.585 0 0 0-1.062.414.625.625 0 0 1-.444.2.77.77 0 0 1-.237-.086 1.52 1.52 0 0 0-.66-.178 1.068 1.068 0 0 0-1.168.94v.752c0 .098-.05.161-.233.346a1.455 1.455 0 0 0-.526 1.055 1.146 1.146 0 0 0 .357.73c.036.042.086.1.11.105a1.85 1.85 0 0 1-.444.16c-.444.122-1.186.326-1.186 1.14a1.214 1.214 0 0 0 .318.73c.029.037.066.086.087.116-.048.124-.14.328-.235.547a15.9 15.9 0 0 0-.391.951h-2.58l-.002-.287a2.293 2.293 0 0 1 .184-.817l.053-.15a2.931 2.931 0 0 0 .186-.999c0-.871-.876-1.076-1.4-1.198-.172-.04-.432-.102-.464-.108-.174-.345-.088-.485.357-.93a1.925 1.925 0 0 0 .736-1.353 1.198 1.198 0 0 0-.951-1.267 1.626 1.626 0 0 0-.856.137.95.95 0 0 1-.39.091.28.28 0 0 1-.156-.039.974.974 0 0 1 .171-.475 1.898 1.898 0 0 0 .292-.955 2.3 2.3 0 0 0-.093-.608 1.337 1.337 0 0 1-.06-.355.434.434 0 0 1 .386-.464c.156 0 .246.118.488.55a1.44 1.44 0 0 0 1.363.721c1.035 0 1.696-1.164 1.696-1.965 0-.113.08-.232.157-.232.084 0 .157.049.315.169a1.468 1.468 0 0 0 .92.37 1.523 1.523 0 0 0 1.335-.997 1.485 1.485 0 0 1 .483-.607 2.175 2.175 0 0 0 .81-2.616c.049-.08.161-.199.152-.217a1.18 1.18 0 0 0 1.02-.32 1.325 1.325 0 0 0 .17-1.18 1.024 1.024 0 0 1-.03-.286 1.002 1.002 0 0 1 .282-.3 1.451 1.451 0 0 0 .637-1.114 1.487 1.487 0 0 0-.238-.764.583.583 0 0 1-.11-.276c0-.055.109-.404.996-.885.281-.152.445-.226.552-.274H22zM2 2h15.354a1.586 1.586 0 0 0-.634 1.16 1.488 1.488 0 0 0 .239.767.582.582 0 0 1 .11.272c0 .092-.069.165-.288.353a1.707 1.707 0 0 0-.58.743 1.173 1.173 0 0 0-.058.372 2.331 2.331 0 0 0 .053.419c.02.106.058.303.097.303h.001a.537.537 0 0 1-.235.012 1.244 1.244 0 0 0-.91.474 1.051 1.051 0 0 0-.293.94c.165.802.165 1.285-.304 1.538a2.313 2.313 0 0 0-.88.995c-.23.41-.305.488-.463.488-.085 0-.158-.049-.317-.169a1.462 1.462 0 0 0-.918-.37 1.197 1.197 0 0 0-1.157 1.232c0 .323-.3.965-.696.965-.375 0-.448-.134-.504-.233a1.569 1.569 0 0 0-1.347-1.038 1.428 1.428 0 0 0-1.386 1.464 2.3 2.3 0 0 0 .093.608 1.337 1.337 0 0 1 .06.355.974.974 0 0 1-.17.476 1.898 1.898 0 0 0-.293.954 1.103 1.103 0 0 0 1.156 1.04 1.936 1.936 0 0 0 .752-.16.874.874 0 0 1 .35-.09h.007a.537.537 0 0 1 .088.288c0 .19-.167.371-.442.646a1.645 1.645 0 0 0-.546 2.086 1.529 1.529 0 0 0 1.131.632c.199.046.568.132.628.225a1.957 1.957 0 0 1-.132.672l-.05.14a3.23 3.23 0 0 0-.24 1.154l.002.287H2zm11.927 20c.07-.168.156-.363.238-.55.297-.682.335-.775.335-.965a1.173 1.173 0 0 0-.31-.708c-.042-.054-.095-.141-.118-.127a1.528 1.528 0 0 1 .457-.17c.415-.115 1.188-.328 1.188-1.144a1.156 1.156 0 0 0-.359-.735c-.047-.054-.116-.132-.117-.08 0-.1.05-.165.235-.35A1.449 1.449 0 0 0 16 16.12v-.66a.498.498 0 0 1 .407.053 1.498 1.498 0 0 0 .658.178 1.587 1.587 0 0 0 1.063-.414.768.768 0 0 1 .4-.217 1.413 1.413 0 0 1 .165.32 1.965 1.965 0 0 0 .473.745 2.772 2.772 0 0 0 1.69.874 3.63 3.63 0 0 0 .551-.056 2.464 2.464 0 0 1 .395-.044.526.526 0 0 0 .198-.038V22z"},
"mega-phone":{32:"M28.97 4.36a2.06 2.06 0 0 0-2.06.002l-12.768 7.372a1.99 1.99 0 0 1-1 .267H4a2 2 0 0 0-2 2V18a2 2 0 0 0 2 2h4v3a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-1.083l9.91 5.722A2.06 2.06 0 0 0 30 25.857V6.144a2.06 2.06 0 0 0-1.03-1.784zM16 23a1.001 1.001 0 0 1-1 1h-5a1.001 1.001 0 0 1-1-1v-3h4.002a2.53 2.53 0 0 1 1.269.341L16 21.34zm13 2.856a1.06 1.06 0 0 1-1.59.916L14.641 19.4a3.015 3.015 0 0 0-1.5-.4H4a1 1 0 0 1-1-1v-4.01a1 1 0 0 1 1-.999h9.144a2.992 2.992 0 0 0 1.496-.4l12.77-7.362a1.067 1.067 0 0 1 .532-.144A1.06 1.06 0 0 1 29 6.145z"},
"minus-circle":{16:"M12 7v1H3V7zM7.5 0A7.5 7.5 0 1 0 15 7.5 7.5 7.5 0 0 0 7.5 0zm0 14A6.5 6.5 0 1 1 14 7.5 6.508 6.508 0 0 1 7.5 14z"},mobile:{16:"M10.983 0H6.017A2.017 2.017 0 0 0 4 2.017v11.966A2.017 2.017 0 0 0 6.017 16h4.966A2.017 2.017 0 0 0 13 13.983V2.017A2.017 2.017 0 0 0 10.983 0zM6.018 1h4.964a1.016 1.016 0 0 1 1.015 1H5.004a1.016 1.016 0 0 1 1.014-1zM12 13.983A1.018 1.018 0 0 1 10.982 15H9v-1H8v1H6.018A1.018 1.018 0 0 1 5 13.983V13h7zM12 12H5V3h7z",24:"M6 2.524v19.952A1.524 1.524 0 0 0 7.524 24h9.952A1.524 1.524 0 0 0 19 22.476V2.524A1.524 1.524 0 0 0 17.476 1H7.524A1.524 1.524 0 0 0 6 2.524zm12 19.953a.524.524 0 0 1-.524.523H14v-1h-3v1H7.524A.524.524 0 0 1 7 22.477V21h11zM18 20H7V4h11zm-.524-18a.524.524 0 0 1 .524.523V3H7v-.477A.524.524 0 0 1 7.524 2z"},
monitor:{16:"M15.167 1H.833A.834.834 0 0 0 0 1.833v10.334A.834.834 0 0 0 .833 13H6v1H5v1h6v-1h-1v-1h5.167a.834.834 0 0 0 .833-.834V1.834A.834.834 0 0 0 15.167 1zM9 14H7v-1h2zm6-2H1V2h14z",24:"M0 4v14a1.001 1.001 0 0 0 1 1h9v1H8v1h8v-1h-2v-1h9a1.001 1.001 0 0 0 1-1V4a1.001 1.001 0 0 0-1-1H1a1.001 1.001 0 0 0-1 1zm13 16h-2v-1h2zm10-2H1V4h22z"},notebook:{32:"M5 24H3v-1h1v-1h1zm0-5H4v1H3v1h2zm0 6H4v1H3v1h2zM28 2v28H4v-2h1v1h2V3H5v3H3V5h1V2zm-1 1H8v26h19zM5 13H4v1H3v1h2zm0 3H4v1H3v1h2zm0-6H4v1H3v1h2zm0-3H4v1H3v1h2zm10.5 14H13V11h2.5v-1H12v12h3.5zM23 10h-3.5v1H22v10h-2.5v1H23z"},
organization:{16:"M8 3V1H2v2H0v13h7v-4h1v4h7V3zm1 12v-4H6v4H1V4h2V2h4v2h7v11zM6 9h3V6H6zm1-2h1v1H7zm3-1v3h3V6zm2 2h-1V7h1zM2 9h3V6H2zm1-2h1v1H3z",24:"M22 4H12V2H5v2H2v18H0v1h11v-5h2v5h11v-1h-2zm-8 18v-5h-4v5H3V5h3V3h5v2h10v17zM5 11h4V7H5zm1-3h2v2H6zm4 3h4V7h-4zm1-3h2v2h-2zm4 3h4V7h-4zm1-3h2v2h-2zM5 16h4v-4H5zm1-3h2v2H6zm4 3h4v-4h-4zm1-3h2v2h-2zm4 3h4v-4h-4zm1-3h2v2h-2z"},"pause-f":{16:"M5 14H2a1.003 1.003 0 0 1-1-1V2a1.003 1.003 0 0 1 1-1h3a1.003 1.003 0 0 1 1 1v11a1.003 1.003 0 0 1-1 1zm9-1V2a1.003 1.003 0 0 0-1-1h-3a1.003 1.003 0 0 0-1 1v11a1.003 1.003 0 0 0 1 1h3a1.003 1.003 0 0 0 1-1z"},
pencil:{16:"M14.792 2.666l-1.414-1.413a.965.965 0 0 0-1.385-.03l-1.444 1.444-8.763 8.72L.03 15.481a.371.371 0 0 0 .488.488l4.096-1.756 8.763-8.72-.001-.001.002.002 1.443-1.444a.965.965 0 0 0-.03-1.385zM1.569 14.431l.554-1.293.74.739zm2.338-.924l-1.414-1.414 7.963-7.92 1.414 1.415zm8.67-8.626l-1.413-1.414 1.29-1.29a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .433z"},pin:{24:"M12 1C8.687 1 6 2.283 6 5.619v11.93l6 6.04 6-6.04V5.619C18 2.283 15.313 1 12 1zm5.1 16.238L12 22.37l-5.1-5.133V5.488c0-3.05 2.773-3.69 5.1-3.69s5.1.64 5.1 3.69zM15 8a3 3 0 1 1-3-3 3 3 0 0 1 3 3zm-1 0a2 2 0 1 0-2 2 2.003 2.003 0 0 0 2-2z"},
plus:{16:"M14 8H9v5H8V8H3V7h5V2h1v5h5z",24:"M22 13h-9v9h-1v-9H3v-1h9V3h1v9h9z",32:"M16 17H8v-1h8V8h1v8h8v1h-8v8h-1z"},"plus-circle":{24:"M11.5 1.2a10.3 10.3 0 1 0 10.3 10.3A10.299 10.299 0 0 0 11.5 1.2zm0 19.6a9.3 9.3 0 1 1 9.3-9.3 9.31 9.31 0 0 1-9.3 9.3zM12 11h5v1h-5v5h-1v-5H6v-1h5V6h1z",32:"M16.5 3.2a13.3 13.3 0 1 0 13.3 13.3A13.3 13.3 0 0 0 16.5 3.2zm0 25.6a12.3 12.3 0 1 1 12.3-12.3 12.314 12.314 0 0 1-12.3 12.3zM17 16h7v1h-7v7h-1v-7H9v-1h7V9h1z"},"plus-f":{16:"M9 7h5v2H9v5H7V9H2V7h5V2h2z"},"plus-square":{16:"M13.071 1H1.93a.929.929 0 0 0-.93.929V13.07a.929.929 0 0 0 .929.929H13.07a.929.929 0 0 0 .929-.929V1.93a.929.929 0 0 0-.928-.93zM13 13H2V2h11zm-2-5H8v3H7V8H4V7h3V4h1v3h3z",
24:"M19.719 2H3.28A1.281 1.281 0 0 0 2 3.281v16.437A1.282 1.282 0 0 0 3.281 21h16.437A1.282 1.282 0 0 0 21 19.718V3.281A1.281 1.281 0 0 0 19.719 2zM20 19.719a.281.281 0 0 1-.281.281H3.28a.281.281 0 0 1-.28-.281V3.28A.281.281 0 0 1 3.281 3H19.72a.281.281 0 0 1 .281.281zM12 11h6v1h-6v6h-1v-6H5v-1h6V5h1z"},polygon:{16:"M15 1L6.833 7 1 4v11h14zm-1 13H2V5.639l4.927 2.534L14 2.976z",24:"M2 4.8V22h20V2l-11.538 8.4zm19-.835V21H3V6.661l7.489 4.956z"},point:{16:"M6 11h5V6H6zm1-4h3v3H7zm5 1h4v1h-4zM1 8h4v1H1zm8 8H8v-4h1zM9 5H8V1h1z",
24:"M16 12h7v1h-7zM2 13h7v-1H2zm10 10h1v-7h-1zm0-14h1V2h-1zm-2 1h5v5h-5zm1 4h3v-3h-3z"},portal:{24:"M11.994 1.115L3.628 5.356A4.8 4.8 0 0 0 1 9.633v7.596A4.732 4.732 0 0 0 5.4 22h11.141A6.786 6.786 0 0 0 23 15.17V6.104zM22 15.17A5.775 5.775 0 0 1 16.541 21H5.401A3.724 3.724 0 0 1 2 17.229V9.633a3.777 3.777 0 0 1 2.08-3.385l7.939-4.024L22 6.748zm-7.686-2.152l2.537 1.4-4.849 2.676-4.85-2.676 2.537-1.4.932.514-1.606.886 2.987 1.648 2.987-1.648-1.607-.886zM12.002 7.8l-4.85 2.676 4.85 2.676 4.85-2.676zm0 4.324l-2.987-1.648 2.987-1.648 2.987 1.648z"},
promote:{48:"M13.147 22.954l-7.021 2.167-.236-.765 7.021-2.167zm.52 1.686l-7.021 2.167.236.764 7.021-2.166zm24.084-4.995l-1.812.56 3.706 12.01a1.861 1.861 0 0 1-1.262 2.31 1.85 1.85 0 0 1-1.416-.152 1.847 1.847 0 0 1-.894-1.11l-.45-1.457c-1.123-.63-9.406-5.06-16.124-2.985l-.917.283-2.128.657c.094.282.188.565.283.842a7.906 7.906 0 0 0 2.858 1.61 1.423 1.423 0 0 1 .616 2.372l-1.252 1.256a26.572 26.572 0 0 0 3.062 4.561l.6-.185a2.224 2.224 0 0 1 2.778 1.469l.128.414a2.223 2.223 0 0 1-1.468 2.78l-5.163 1.592-.17-.166a29.572 29.572 0 0 1-8.8-14.531l-.613.189a6.55 6.55 0 0 1-3.862-12.516l9.269-2.86.916-.283c6.721-2.073 11.068-10.401 11.64-11.552l-.452-1.466a1.86 1.86 0 0 1 1.26-2.315 1.865 1.865 0 0 1 2.31 1.261l3.64 11.799 1.812-.559a3.23 3.23 0 0 1 1.905 6.173zm-19.788 8.812l-3.39-10.986-8.886 2.741A5.749 5.749 0 1 0 9.077 31.2zm1.411 4.526a8.179 8.179 0 0 1-2.9-1.567 7.292 7.292 0 0 0 1.202 3.414 1.309 1.309 0 0 0 .616.547l1.353-1.356a.622.622 0 0 0-.271-1.038zm-3.685-2.986l-5 1.542a28.411 28.411 0 0 0 8.427 14.028l4.706-1.452a1.423 1.423 0 0 0 .942-1.779l-.128-.414a1.426 1.426 0 0 0-1.78-.94l-1.106.34-.17-.2a27.468 27.468 0 0 1-3.354-4.954 1.696 1.696 0 0 1-1.108-.75c-.905-1.154-1.74-3.717-1.32-4.58a.692.692 0 0 1 .125-.146q-.118-.345-.234-.695zm19.598.719L27.613 5.845c-1.316 2.454-5.463 9.288-11.74 11.225l-.535.164 3.39 10.988.535-.165c6.278-1.935 13.554 1.374 16.024 2.659zm3.59 1.727l-9.25-29.979a1.061 1.061 0 1 0-2.037.592l9.249 29.977a1.061 1.061 0 1 0 2.039-.59zM37.516 18.88a2.43 2.43 0 1 0-1.433-4.643l-1.812.559 1.433 4.643zM43.39 3.96l-.567-.565-4.17 4.17.567.566zM43.235 15.5l4.869-1.305-.207-.772-4.869 1.305zm-1.25 8.108l5.911 1.583.207-.772-5.91-1.584z"},
question:{rtl:"ar",16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM7.5 10.5a1 1 0 1 1-1 1 1 1 0 0 1 1-1zM8 9H7a3.046 3.046 0 0 1 1.282-2.51c.47-.462.736-.746.732-1.217a1.324 1.324 0 0 0-1.46-1.27 1.418 1.418 0 0 0-1.548 1.394h-1c0-3.09 5.009-3.154 5.008-.128a2.617 2.617 0 0 1-1.032 1.935C8.462 7.715 8 7.995 8 9z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.517 14.517 0 0 0 15.5 1zm0 28A13.5 13.5 0 1 1 29 15.5 13.515 13.515 0 0 1 15.5 29zm.5-9h-1c0-2.959 1.227-3.919 2.371-5.207.916-1.031 1.639-1.846 1.629-3.264C19 9.104 17.08 8 15.167 8 13.16 8 11 9.194 11 11.817h-1a4.523 4.523 0 0 1 1.648-3.628A5.549 5.549 0 0 1 15.168 7C17.637 7 20 8.555 20 11.525a5.598 5.598 0 0 1-1.881 3.932C17.043 16.668 16 17.421 16 20zm-.5 4.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1z"},
"question-f":{24:"M12.5 19.5a1 1 0 1 1 1-1 1 1 0 0 1-1 1zm0-17.3a10.3 10.3 0 1 0 10.3 10.3A10.299 10.299 0 0 0 12.5 2.2zm2.144 9.9l-.113.11a3.321 3.321 0 0 0-1.33 2.79v.2H11.8V15a4.735 4.735 0 0 1 1.77-3.807l.092-.09c.664-.652 1.144-1.122 1.138-1.906A1.998 1.998 0 0 0 12.607 7.2a2.228 2.228 0 0 0-2.424 2.19v.2h-1.4v-.2a3.382 3.382 0 0 1 1.237-2.711 4.082 4.082 0 0 1 2.587-.88A3.36 3.36 0 0 1 16.2 9.194a3.937 3.937 0 0 1-1.556 2.908z",32:"M16.5 25.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zm0-22.3a13.3 13.3 0 1 0 13.3 13.3A13.3 13.3 0 0 0 16.5 3.2zm2.77 13.388c-.137.155-.273.3-.406.443A4.936 4.936 0 0 0 17.2 21v.2h-1.4V21a6.202 6.202 0 0 1 2.039-4.92c.128-.138.256-.276.383-.42.922-1.038 1.588-1.787 1.578-3.13 0-2.3-1.824-3.33-3.632-3.33-1.911 0-3.968 1.132-3.968 3.617v.2h-1.4v-.2a4.715 4.715 0 0 1 1.721-3.782A5.741 5.741 0 0 1 16.168 7.8c2.424 0 5.032 1.478 5.032 4.725a5.76 5.76 0 0 1-1.93 4.063z"},
"raster-function-template":{32:"M27 6H10V5h17zm0 7H10v1h17zM3 3h5v5H3zm1 4h3V4H4zm-1 4h5v5H3zm1 4h3v-3H4zm-1 4h5v5H3zm1 4h3v-3H4zm6-1h5v-1h-5zm8.856 0l.2-1.411c.203-1.372.388-2.37 1.76-2.37a2.43 2.43 0 0 1 .865.17l.354-1.186a2.21 2.21 0 0 0-.981-.203c-2.132 0-2.997 1.371-3.266 3.3l-.254 1.7h-1.726l-.154 1h1.726l-.964 7h1.321l.964-7h1.93l.153-1zM29.8 22h-1.623l-2.41 2.873L24.059 22h-1.744l2.343 3.693L20.777 30h1.657l2.974-3.453L27.46 30h1.76l-2.701-4.307z"},"recycle-bin":{16:"M16 1.5c0-.827-.673-1.5-1.5-1.5h-13C.673 0 0 .673 0 1.5S.673 3 1.5 3h13c.827 0 1.5-.673 1.5-1.5zm-15 0a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13a.5.5 0 0 1-.5-.5zm10.653 6.465l.866-.5-.72-1.248a.2.2 0 0 0-.347 0L11 6.998l-.038.067-.866-.5.49-.848c.1-.174.246-.303.414-.396.546-.3 1.338-.17 1.665.396l.72 1.248.866-.5-.299 2.482-2.299-.982zm-4.231 3.234l.713-1.236-.866-.5 2.299-.982.299 2.482-.866-.5-.715 1.237a.197.197 0 0 0 0 .198.202.202 0 0 0 .173.102H10v1H8.459c-.427 0-.825-.23-1.04-.6a1.194 1.194 0 0 1 .003-1.201zM11.846 15h1.113l-.007.06c-.111.561-.574.94-1.106.94H4.154c-.532 0-.995-.379-1.1-.901L1.722 4h1.006L4.04 14.94c.006.018.056.06.114.06h7.692zm3.984-3.8a1.202 1.202 0 0 1-1.039 1.8H13v1l-2-1.5 2-1.5v1h1.791a.2.2 0 0 0 .174-.3l-.765-1.325.865-.5.765 1.325z"},
refresh:{16:"M13.91 9h1.01A6.987 6.987 0 0 1 2 11.587V14H1v-4h4v1H2.812A5.99 5.99 0 0 0 13.91 9zM14 2v2.413A6.987 6.987 0 0 0 1.08 7h1.01a5.99 5.99 0 0 1 11.098-2H11v1h4V2z"},reset:{16:"M.146 6.854L4 10.707l3.854-3.853-.707-.707L4.232 9.06a5.48 5.48 0 1 1 3.65 3.697l-.293.956A6.501 6.501 0 1 0 3 7.5a6.58 6.58 0 0 0 .061.854L.854 6.146z"},"road-sign":{32:"M30.927 14.615L17.386 1.076a1.957 1.957 0 0 0-2.77-.002L1.073 14.615a1.96 1.96 0 0 0 0 2.77l13.543 13.542a1.957 1.957 0 0 0 2.768 0l13.543-13.542a1.96 1.96 0 0 0 0-2.77zm-.707 2.063L16.677 30.22a.957.957 0 0 1-1.354 0L1.78 16.678a.96.96 0 0 1 0-1.356l13.543-13.54a.957.957 0 0 1 1.354 0l13.543 13.54a.96.96 0 0 1 0 1.356zM19.354 9.646l3.853 3.855-3.852 3.853-.707-.707L21.293 14h-4.639a4.68 4.68 0 0 0-4.674 4.674v3.282h-1v-3.282A5.68 5.68 0 0 1 16.654 13h4.64l-2.648-2.647z"},
save:{16:"M14.707 3.293l-2-2A.995.995 0 0 0 12 1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4a.99.99 0 0 0-.293-.707zM9 2v2H8V2zM5 2h2v3h3V2h1v4H5zm6 12H5v-4h6zm3 0h-2V9H4v5H2V2l2 .001V6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V2l2 2z",24:"M22.969.844v21.312a.844.844 0 0 1-.844.844H5.25a.848.848 0 0 1-.506-.168L1.37 20.3a.847.847 0 0 1-.338-.676V.844A.845.845 0 0 1 1.875 0h20.25a.845.845 0 0 1 .844.844zM6 1v8h12V1zm3 21v-5H8v5zm9 0v-7H6v7h1v-6h3v6zm4-21h-3v9H5V1H2v18.548l3 2.278v-7.17A.769.769 0 0 1 5.844 14h12.312a.769.769 0 0 1 .844.656V22h3z"},
search:{16:"M9.85 9.153a5 5 0 1 0-.69.69l4.631 4.631.69-.69zm-1.02-.326A3.973 3.973 0 0 1 6 10a4.002 4.002 0 1 1 2.83-1.172z",24:"M21.995 21.288l-6.855-6.855a7.517 7.517 0 1 0-.707.707l6.855 6.855zm-17.092-7.19a6.501 6.501 0 1 1 9.6-.45l-.854.855a6.501 6.501 0 0 1-8.746-.405z"},"search-f":{24:"M22.289 20.91l-6.847-6.846a7.524 7.524 0 1 0-1.419 1.409l6.852 6.852zM4 9.5A5.5 5.5 0 1 1 9.5 15 5.506 5.506 0 0 1 4 9.5z"},"select-category":{16:"M5 8H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zm7-5h-3a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zM13 0h-3a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zM5 0H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zm-4.265 6.646l.738-.738.784.788L4.962 10l.738.738-2.443 2.43z"},
settings:{16:"M2.17 6.06L0 6.862l.009 2.333 2.179.789a6.153 6.153 0 0 0 .317.764l-.966 2.104 1.655 1.643 2.1-.983a6.105 6.105 0 0 0 .765.318L6.863 16l2.333-.008.789-2.18a6.162 6.162 0 0 0 .764-.317l2.104.966 1.643-1.656-.983-2.099a6.097 6.097 0 0 0 .318-.765L16 9.137l-.009-2.333-2.179-.789a6.149 6.149 0 0 0-.318-.764l.967-2.104-1.656-1.643-2.099.983a6.106 6.106 0 0 0-.765-.318L9.137 0 6.804.009l-.789 2.179a6.163 6.163 0 0 0-.764.317L3.147 1.54 1.504 3.195l.983 2.099a6.093 6.093 0 0 0-.318.765zm3.709 1.592a2.15 2.15 0 1 1 1.773 2.47 2.15 2.15 0 0 1-1.773-2.47zm.951 5.382l-.454-.151a5.436 5.436 0 0 1-.644-.268l-.43-.21-1.899.889-.664-.66.876-1.905-.216-.428a5.223 5.223 0 0 1-.265-.64l-.155-.453-1.973-.715-.003-.935 1.963-.728.151-.454a5.436 5.436 0 0 1 .268-.644l.21-.43-.889-1.899.66-.664 1.904.876.43-.216a5.223 5.223 0 0 1 .639-.265l.453-.155.715-1.973.934-.003.728 1.963.455.151a5.368 5.368 0 0 1 .644.268l.43.21 1.899-.889.664.66-.876 1.905.216.428a5.223 5.223 0 0 1 .265.64l.155.453 1.973.715.003.935-1.962.727-.152.454a5.45 5.45 0 0 1-.268.645l-.21.43.889 1.899-.66.664-1.905-.876-.428.216a5.223 5.223 0 0 1-.64.265l-.453.156-.715 1.972-.935.003zM7.998 4.85a3.154 3.154 0 1 0 .512.042 3.138 3.138 0 0 0-.512-.042z"},
share:{16:"M14 9h1v6H1V1h8v1H2v12h12zm-8-.31V11h1V8.69A3.7 3.7 0 0 1 10.6 5h2.68l-1.4 1.42.71.71 2.61-2.61-2.61-2.61-.71.71L13.28 4H10.6A4.67 4.67 0 0 0 6 8.69z"},"sign-out":{16:"M15 1v14H6v-5h1v4h7V2H7v5H6V1zm-4 7H2.773l1.58-1.581-.706-.707-2.81 2.81 2.81 2.808.706-.707L2.73 9H11z"},sliders:{16:"M3 8h1v1H3v7H2V9H1V8h1V0h1zm6-8H8v4H7v1h1v11h1V5h1V4H9zm6 12V0h-1v12h-1v1h1v3h1v-3h1v-1z"},"sort-descending":{rtl:!0,16:"M4 5h11v1H4zM1 2h14V1H1zm6 8h8V9H7zm3 4h5v-1h-5z"},"speech-bubble":{16:"M8.666 12h4.084A2.253 2.253 0 0 0 15 9.75v-5.5A2.253 2.253 0 0 0 12.75 2h-9.5A2.253 2.253 0 0 0 1 4.25v5.5A2.253 2.253 0 0 0 3.25 12H4v3.5zM3.25 11A1.251 1.251 0 0 1 2 9.75v-5.5A1.251 1.251 0 0 1 3.25 3h9.5A1.251 1.251 0 0 1 14 4.25v5.5A1.251 1.251 0 0 1 12.75 11H8.334L5 13.5V11zM12 6H4V5h8zm-2 3H4V8h6z"},
star:{16:"M15.977 6.016H9.883L7.998.2 6.112 6.016H-.023l4.97 3.586-1.893 5.813 4.944-3.597 4.943 3.597-1.894-5.813zm-7.979 4.566l-3.038 2.21 1.164-3.573-3.052-2.203h3.767l1.159-3.573 1.158 3.573h3.746l-3.03 2.206 1.162 3.569z"},"star-f":{16:"M7.998.2l1.885 5.816h6.094l-4.93 3.586 1.894 5.813-4.943-3.597-4.944 3.597 1.893-5.813-4.97-3.586h6.135z"},table:{16:"M16 15H0V1h16zM5 9H1v2h4zm1-3v2h4V6zM5 6H1v2h4zm5 8v-2H6v2zm0-5H6v2h4zm1-3v2h4V6zm-6 6H1v2h4zm6-1h4V9h-4zm0 3h4v-2h-4zm4-12H1v3h14z",32:"M2 5v21h27V5zm5 20H3v-4h4zm0-5H3v-4h4zm0-5H3v-4h4zm10 10H8v-4h9zm0-5H8v-4h9zm0-5H8v-4h9zm11 10H18v-4h10zm0-5H18v-4h10zm0-5H18v-4h10zm0-5H3V6h25z"},
tablet:{16:"M15 2H1a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zM1 3.25A.25.25 0 0 1 1.25 3H2v4H1zM1.25 12a.25.25 0 0 1-.25-.25V8h1v4zM3 12V3h10v9zm12-.25a.25.25 0 0 1-.25.25H14V3h.75a.25.25 0 0 1 .25.25z",24:"M22.75 4H1.25A1.25 1.25 0 0 0 0 5.25v13.5A1.25 1.25 0 0 0 1.25 20h21.5A1.25 1.25 0 0 0 24 18.75V5.25A1.25 1.25 0 0 0 22.75 4zM1.25 19a.25.25 0 0 1-.25-.25V13h1v-2H1V5.25A.25.25 0 0 1 1.25 5H3v14zM4 5h17v14H4zm19 13.75a.25.25 0 0 1-.25.25H22V5h.75a.25.25 0 0 1 .25.25z"},text:{24:"M22 5H12V4h10zm0 3h-8v1h8zm0 5v-1h-6v1zM2 17h20v-1H2zm0 4h20v-1H2zm.234-8L7.042 2.049h.916L12.766 13h-1.093L9.917 9H5.083l-1.756 4zm3.288-5h3.956L7.5 3.494z"},
trash:{16:"M2 4l1 12h9l1-12zm9.08 11H3.92L3.087 5h8.826zM5 6.4a.46.46 0 0 1 .5-.4.46.46 0 0 1 .5.4v7.2a.46.46 0 0 1-.5.4.46.46 0 0 1-.5-.4zm2 0a.46.46 0 0 1 .5-.4.46.46 0 0 1 .5.4v7.2a.46.46 0 0 1-.5.4.46.46 0 0 1-.5-.4zm2 0a.512.512 0 0 1 1 0v7.2a.512.512 0 0 1-1 0zM11 2V0H4v2H1v1h13V2zm-1 0H5V1h5z"},upload:{32:"M32 15.704C32 19.308 29.13 22 26.562 22H23v-1h3.562C28.372 21 31 18.937 31 15.704a5.561 5.561 0 0 0-3.742-5.287l-.872-.297-.13-.911A8.153 8.153 0 0 0 18.462 2a7.848 7.848 0 0 0-6.859 4.294l-.556 1.045-1.146-.298a3.684 3.684 0 0 0-.923-.135 3.105 3.105 0 0 0-3.224 2.956l-.046.86-.765.394A5.37 5.37 0 0 0 2 15.897C2 18.521 4.157 21 6.437 21H10v1H6.437C3.592 22 1 19.092 1 15.897a6.369 6.369 0 0 1 3.486-5.67l.255-.131.016-.287a4.128 4.128 0 0 1 4.222-3.903 4.61 4.61 0 0 1 1.175.168l.382.099.185-.349A8.845 8.845 0 0 1 18.463 1a9.157 9.157 0 0 1 8.782 8.068l.044.304.29.099A6.559 6.559 0 0 1 32 15.704zM10.96 18.3l.708.707L16 14.674V29h1V14.674l4.332 4.332.707-.707-5.539-5.54z"},
"upload-to":{16:"M12 2v1H3V2zM4.708 7.618l.707.707L7 6.74V15h1V6.705l1.62 1.62.706-.707-2.808-2.81z",24:"M11 20V8.707l-2.646 2.647-.707-.707L11.5 6.793l3.854 3.854-.707.707L12 8.707V20zM5 4h13V3H5z",32:"M24 6H7V5h17zm-8.5 3.793l-4.854 4.854.707.707L15 11.707V26h1V11.707l3.646 3.646.707-.707z"},"urban-model":{32:"M13 29V7h2V3h1.455L18 5.568V14h-2v1h3v6h1v-7h-1V5.29L17.02 2H14v4h-2v15H9V11H4v3H2v16h12v-1zm-1 0H3V15h2v-3h3v9H6v1h6zm18-16v17h-4v-1h3V14h-4v7h-1v-8zm-5 9h-6v3h-4v5h10zm-1 7h-8v-3h4v-3h4zM8 24h2v1H8zm0 2h2v1H8z"},
user:{16:"M11 3a3 3 0 1 0-3 3 3 3 0 0 0 3-3zM8 5a2 2 0 1 1 2-2 2 2 0 0 1-2 2zm3 1H5a2 2 0 0 0-2 2v6a1 1 0 0 0 1 1h1a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1h1a1 1 0 0 0 1-1V8a2 2 0 0 0-2-2zm1 3v5h-1V9h-1v6H6V9H5v5H4V8a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"},"user-right":{16:[{d:"M 10 7.292 13.26 7.292 11.675 5.707 12.382 5 15.192 7.81 12.382 10.618 11.675 9.911 13.295 8.292 10 8.292z"},{d:"M7.2,2.7 C7.2,1.20883118 5.99116882,0 4.5,0 C3.00883118,0 1.8,1.20883118 1.8,2.7 C1.8,4.19116882 3.00883118,5.4 4.5,5.4 C5.99116882,5.4 7.2,4.19116882 7.2,2.7 Z M4.5,4.5 C3.50588745,4.5 2.7,3.69411255 2.7,2.7 C2.7,1.70588745 3.50588745,0.9 4.5,0.9 C5.49411255,0.9 6.3,1.70588745 6.3,2.7 C6.3,3.17738968 6.11035769,3.63522672 5.77279221,3.97279221 C5.43522672,4.31035769 4.97738968,4.5 4.5,4.5 Z M7.2,5.4 L1.8,5.4 C0.80588745,5.4 0,6.20588745 0,7.2 L0,12.6 C0,13.0970563 0.402943725,13.5 0.9,13.5 L1.8,13.5 C1.8,13.9970563 2.20294373,14.4 2.7,14.4 L6.3,14.4 C6.79705627,14.4 7.2,13.9970563 7.2,13.5 L8.1,13.5 C8.59705627,13.5 9,13.0970563 9,12.6 L9,7.2 C9,6.20588745 8.19411255,5.4 7.2,5.4 Z M8.1,8.1 L8.1,12.6 L7.2,12.6 L7.2,8.1 L6.3,8.1 L6.3,13.5 L2.7,13.5 L2.7,8.1 L1.8,8.1 L1.8,12.6 L0.9,12.6 L0.9,7.2 C0.9,6.70294373 1.30294373,6.3 1.8,6.3 L7.2,6.3 C7.69705627,6.3 8.1,6.70294373 8.1,7.2 L8.1,8.1 Z"}]},
"user-plus":{24:"M13 4a4 4 0 1 0-4 4 4 4 0 0 0 4-4zM9 7a3 3 0 1 1 3-3 3.003 3.003 0 0 1-3 3zm4 16.25a.75.75 0 0 1-.75.75h-6.5a.75.75 0 0 1-.75-.75V21H3.5A1.5 1.5 0 0 1 2 19.5v-9.25A2.25 2.25 0 0 1 4.25 8h9.5A2.25 2.25 0 0 1 16 10.25V17h-1v-6.75A1.251 1.251 0 0 0 13.75 9h-9.5A1.251 1.251 0 0 0 3 10.25v9.25a.501.501 0 0 0 .5.5H5v-8h1v11h6V12h1m10 7v.999h-4V24h-1v-4.001h-4V19h4v-4h1v4z",32:"M13.065 10a5 5 0 1 0-5-5 5 5 0 0 0 5 5zm.002-9a4 4 0 1 1-4.002 4 4 4 0 0 1 4.002-4zM5 14v12a1 1 0 0 0 1 1h1V15h1v16h10V15h1v16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1v-3H6a2 2 0 0 1-2-2V14a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v10h-1V14a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2zm26 12v.999h-5V32h-1v-5.001h-5V26h5v-5h1v5z"},
users:{16:"M6.5 7a3.49 3.49 0 0 1 .663.067A3.97 3.97 0 0 0 7.8 8.375 2.475 2.475 0 0 0 6.5 8h-3A2.503 2.503 0 0 0 1 10.5V12h4.068a4.642 4.642 0 0 0-.218 1H0v-2.5A3.504 3.504 0 0 1 3.5 7zm1.456-3.564a3.969 3.969 0 0 0-.857 1.702A2.996 2.996 0 1 1 8 3a2.964 2.964 0 0 1-.044.436zM7 3a2 2 0 1 0-2 2 2.002 2.002 0 0 0 2-2zm5.5 7a3.504 3.504 0 0 1 3.5 3.5V16H6v-2.5A3.504 3.504 0 0 1 9.5 10zm-3 1A2.503 2.503 0 0 0 7 13.5V15h8v-1.5a2.503 2.503 0 0 0-2.5-2.5zM8 6a3 3 0 1 1 3 3 3.003 3.003 0 0 1-3-3zm1 0a2 2 0 1 0 2-2 2.002 2.002 0 0 0-2 2z",
24:"M7.5 9A3.5 3.5 0 1 0 4 5.5 3.504 3.504 0 0 0 7.5 9zm0-6A2.5 2.5 0 1 1 5 5.5 2.503 2.503 0 0 1 7.5 3zm2.713 14a5.456 5.456 0 0 0-.188 1H2v-3.5A4.505 4.505 0 0 1 6.5 10h2a4.503 4.503 0 0 1 4.414 3.649 5.518 5.518 0 0 0-.936.632A3.495 3.495 0 0 0 8.5 11h-2A3.504 3.504 0 0 0 3 14.5V17zm6.287-4A3.5 3.5 0 1 0 13 9.5a3.504 3.504 0 0 0 3.5 3.5zm0-6A2.5 2.5 0 1 1 14 9.5 2.503 2.503 0 0 1 16.5 7zM22 18.5a4.505 4.505 0 0 0-4.5-4.5h-2a4.505 4.505 0 0 0-4.5 4.5V22h11zM21 21h-9v-2.5a3.504 3.504 0 0 1 3.5-3.5h2a3.504 3.504 0 0 1 3.5 3.5z",
32:"M10.5 11A4.5 4.5 0 1 0 6 6.5a4.505 4.505 0 0 0 4.5 4.5zm0-8A3.5 3.5 0 1 1 7 6.5 3.504 3.504 0 0 1 10.5 3zm1.166 19a6.98 6.98 0 0 0-.14 1H2v-5.5A5.506 5.506 0 0 1 7.5 12h6a5.464 5.464 0 0 1 2.65.683 5.985 5.985 0 0 0-.138 1.085A4.474 4.474 0 0 0 13.5 13h-6A4.505 4.505 0 0 0 3 17.5V22zm9.834-4a4.5 4.5 0 1 0-4.5-4.5 4.505 4.505 0 0 0 4.5 4.5zm0-8a3.5 3.5 0 1 1-3.5 3.5 3.504 3.504 0 0 1 3.5-3.5zm3 9h-6a5.506 5.506 0 0 0-5.5 5.5V30h17v-5.5a5.506 5.506 0 0 0-5.5-5.5zM29 29H14v-4.5a4.505 4.505 0 0 1 4.5-4.5h6a4.505 4.505 0 0 1 4.5 4.5z"},
web:{24:"M11.5 0A11.5 11.5 0 1 0 23 11.5 11.513 11.513 0 0 0 11.5 0zM1.025 12h3.989a18.969 18.969 0 0 0 .753 5H2.573a10.415 10.415 0 0 1-1.548-5zM12 5V1.05c1.51.274 2.862 1.77 3.779 3.95zm4.15 1a17.518 17.518 0 0 1 .836 5H12V6zM11 1.05V5H7.221C8.138 2.82 9.491 1.324 11 1.05zM11 6v5H6.014a17.518 17.518 0 0 1 .836-5zm-5.986 5H1.025a10.415 10.415 0 0 1 1.548-5h3.194a18.969 18.969 0 0 0-.753 5zm1 1H11v5H6.85a17.518 17.518 0 0 1-.836-5zM11 18v3.95c-1.51-.274-2.862-1.77-3.779-3.95zm1 3.95V18h3.779c-.917 2.18-2.27 3.676-3.779 3.95zM12 17v-5.01h5a17.58 17.58 0 0 1-.85 5.01zm5.986-5.01h3.989A10.453 10.453 0 0 1 20.427 17h-3.194a19.046 19.046 0 0 0 .753-5.01zm0-.99a18.969 18.969 0 0 0-.753-5h3.194a10.415 10.415 0 0 1 1.548 5zm1.744-6h-2.837a9.988 9.988 0 0 0-2.119-3.47A10.528 10.528 0 0 1 19.73 5zM8.226 1.53A9.988 9.988 0 0 0 6.107 5H3.27a10.528 10.528 0 0 1 4.956-3.47zM3.27 18h2.837a9.988 9.988 0 0 0 2.119 3.47A10.528 10.528 0 0 1 3.27 18zm11.504 3.47A9.988 9.988 0 0 0 16.893 18h2.837a10.528 10.528 0 0 1-4.956 3.47z",
32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.5 14.5 0 0 0 15.5 1zM2.025 16h4.99a22.884 22.884 0 0 0 .898 6H3.669a13.424 13.424 0 0 1-1.644-6zM16 8V2.046C18.387 2.33 20.472 4.62 21.732 8zm6.07 1a22.167 22.167 0 0 1 .916 6H16V9zM15 2.046V8H9.268c1.26-3.38 3.345-5.669 5.732-5.954zM15 9v6H8.014a22.167 22.167 0 0 1 .916-6zm-7.985 6h-4.99A13.424 13.424 0 0 1 3.67 9h4.244a22.884 22.884 0 0 0-.898 6zm1 1H15v6H8.93a22.167 22.167 0 0 1-.916-6zM15 23v5.954C12.613 28.67 10.528 26.38 9.268 23zm1 5.954V23h5.732c-1.26 3.38-3.345 5.669-5.732 5.954zM16 22v-6h6.986a22.167 22.167 0 0 1-.916 6zm7.985-6h4.99a13.424 13.424 0 0 1-1.644 6h-4.244a22.884 22.884 0 0 0 .898-6zm0-1a22.884 22.884 0 0 0-.898-6h4.244a13.424 13.424 0 0 1 1.644 6zm2.739-7H22.76a12.808 12.808 0 0 0-3.455-5.447A13.52 13.52 0 0 1 26.724 8zm-15.03-5.447A12.808 12.808 0 0 0 8.239 8H4.276a13.52 13.52 0 0 1 7.418-5.447zM4.276 23H8.24a12.808 12.808 0 0 0 3.455 5.447A13.519 13.519 0 0 1 4.276 23zm15.03 5.447A12.808 12.808 0 0 0 22.761 23h3.963a13.519 13.519 0 0 1-7.418 5.447z"},
wrench:{32:"M23.875 8.884l-.938-2.327 4.145-3.224a.67.67 0 0 0 .264-.677l-.051-.215-.09-.11a.695.695 0 0 0-.441-.251 8.172 8.172 0 0 0-5.858 1.395 5.627 5.627 0 0 0-1.68 6.3l-.008.035a4.82 4.82 0 0 1-.769 1.144L3.124 24.33a3.957 3.957 0 0 0 .002 5.522A3.793 3.793 0 0 0 5.851 31a3.81 3.81 0 0 0 2.75-1.175L21.81 14.193a1.86 1.86 0 0 1 .771-.485 2.076 2.076 0 0 1 .366.022 5.244 5.244 0 0 0 5.196-.662 8.46 8.46 0 0 0 2.85-5.36.692.692 0 0 0-.126-.506l-.123-.138-.09-.054a.698.698 0 0 0-.786.056l-4.074 3.232zm5.992-.55a7.24 7.24 0 0 1-2.339 3.945 4.263 4.263 0 0 1-4.266.5l-.118-.031a3.31 3.31 0 0 0-.617-.038 2.616 2.616 0 0 0-1.435.79L7.862 29.152a2.803 2.803 0 0 1-2.01.848H5.85a2.802 2.802 0 0 1-2.012-.849 2.946 2.946 0 0 1-.03-4.093l15.354-13.409a5.294 5.294 0 0 0 1.018-1.57 1.989 1.989 0 0 0 .054-.288l.015-.118-.04-.112a4.648 4.648 0 0 1 1.31-5.297A6.938 6.938 0 0 1 25.627 3c.083 0 .166.001.25.004L22.321 5.77a.968.968 0 0 0-.306 1.105l.937 2.393a.904.904 0 0 0 .107.19.856.856 0 0 0 .195.193l1.938 1.446a.937.937 0 0 0 1.147-.018zM6.501 25H5.5a1.499 1.499 0 0 0-1.499 1.495L4 27.505a1.502 1.502 0 0 0 1.5 1.497l1.009-.001a1.503 1.503 0 0 0 1.495-1.504l-.003-1A1.5 1.5 0 0 0 6.501 25zm.005 3l-1.006.002a.5.5 0 0 1-.5-.5l.001-1.004A.5.5 0 0 1 5.5 26h1.001a.5.5 0 0 1 .5.5l.003.999a.502.502 0 0 1-.498.501z"},
x:{16:"M8.718 8l5.303 5.303-.707.707L8.01 8.707 2.707 14.01 2 13.303 7.303 8 2 2.697l.707-.707L8.01 7.293l5.304-5.303.707.707z",24:"M18.01 6.697L12.707 12l5.303 5.303-.707.707L12 12.707 6.697 18.01l-.707-.707L11.293 12 5.99 6.697l.707-.707L12 11.293l5.303-5.303z",32:"M23.985 8.722L16.707 16l7.278 7.278-.707.707L16 16.707l-7.278 7.278-.707-.707L15.293 16 8.015 8.722l.707-.707L16 15.293l7.278-7.278z"},"x-circle":{32:"M25.753 5.247a14.5 14.5 0 1 0 0 20.506 14.5 14.5 0 0 0 0-20.506zm-.636 19.87a13.6 13.6 0 1 1 0-19.234 13.6 13.6 0 0 1 0 19.234zM21.864 9.843L16.207 15.5l5.657 5.657-.707.707-5.657-5.657-5.657 5.657-.707-.707 5.657-5.657-5.657-5.657.707-.707 5.657 5.657 5.657-5.657z",
24:"M17.45 8.257L13.207 12.5l4.243 4.243-.707.707-4.243-4.243-4.243 4.243-.707-.707 4.243-4.243L7.55 8.257l.707-.707 4.243 4.243 4.243-4.243zM22.8 12.5A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z"},"x-circle-f":{16:"M8 .15A7.85 7.85 0 1 0 15.85 8 7.85 7.85 0 0 0 8 .15zm4.95 11.386l-1.414 1.414L8 9.414 4.464 12.95 3.05 11.536 6.586 8 3.05 4.464 4.464 3.05 8 6.586l3.536-3.536 1.414 1.414L9.414 8z",24:"M19.632 3.368a11.5 11.5 0 1 0 0 16.264 11.5 11.5 0 0 0 0-16.264zM18.57 16.45l-2.12 2.12-4.95-4.95-4.95 4.95-2.12-2.12 4.95-4.95-4.95-4.95 2.12-2.12 4.95 4.95 4.95-4.95 2.12 2.12-4.95 4.95z",
32:"M16 2a14 14 0 1 0 14 14A14 14 0 0 0 16 2zm9.192 20.364l-2.828 2.828L16 18.828l-6.364 6.364-2.828-2.828L13.172 16 6.808 9.636l2.828-2.828L16 13.172l6.364-6.364 2.828 2.828L18.828 16z"}},e={inline:{},"inline-end":{},getIconWithTitle:function(r,m,a,h){r=t[r];return c({paths:r[m],size:m,rtl:r.rtl,title:a,titleId:h})}};Object.keys(t).forEach(function(r){Object.keys(t[r]).filter(function(m){return"rtl"!==m}).forEach(function(m){var a,h,q,n=t[r],k=n.rtl;e[r]=null!==(a=e[r])&&void 0!==a?a:{};e.inline[r]=
null!==(h=e.inline[r])&&void 0!==h?h:{};e["inline-end"][r]=null!==(q=e["inline-end"][r])&&void 0!==q?q:{};e[r][m]=c({paths:n[m],size:m,rtl:k});e.inline[r][m]=c({paths:n[m],size:m,inline:!0,rtl:k});e["inline-end"][r][m]=c({paths:n[m],size:m,inline:!0,direction:"right",rtl:k})})});return e})},"arcgisonline/pages/utils/recycle":function(){define(["require","exports","tslib","../../sharing/util"],function(f,B,l,d){var c=this;Object.defineProperty(B,"__esModule",{value:!0});B.getRestorableItems=B.canRestoreItem=
B.getProtectedItems=B.canDeleteItem=B.userCanAttemptToDeleteItem=B.DAYS_IN_RECYCLE_BIN=void 0;d=l.__importDefault(d);B.DAYS_IN_RECYCLE_BIN=14;B.userCanAttemptToDeleteItem=function(t,e){return l.__awaiter(c,void 0,void 0,function(){var r,m,a,h;return l.__generator(this,function(q){r=e||{};m=r.userRole;a=t.isAdmin||t.isOwner||r.isOrgAdmin&&t.isOwnedByMyOrg;h=(null===m||void 0===m?void 0:m.isCustom())&&m.canDeleteOrgItems();return[2,!!(a||t.isOwnedByMyOrg&&h)]})})};B.canDeleteItem=function(t){return l.__awaiter(c,
void 0,void 0,function(){var e,r;return l.__generator(this,function(m){switch(m.label){case 0:return e=t.portal.recycleBinEnabled?"/canRecycle":"/canDelete",r="".concat(t.userItemUrl).concat(e),[4,d.default.request({url:r})];case 1:return[2,m.sent()]}})})};B.getProtectedItems=function(t,e){void 0===e&&(e=!1);return l.__awaiter(c,void 0,void 0,function(){var r,m,a,h,q=this;return l.__generator(this,function(n){switch(n.label){case 0:return r=[],m=[],a=[],h=function(k,g,b){return l.__awaiter(q,void 0,
void 0,function(){return l.__generator(this,function(x){return[2,!g&&(null===b||void 0===b?void 0:b.length)&&!k.isHostedService]})})},[4,Promise.all(t.map(function(k){return l.__awaiter(q,void 0,void 0,function(){var g,b,x,v,y,D,E,C,z,w;return l.__generator(this,function(A){switch(A.label){case 0:return A.trys.push([0,7,,8]),[4,(0,B.canDeleteItem)(k)];case 1:return g=A.sent(),g.success?[4,k.getSourceData()]:[3,5];case 2:return b=A.sent(),[4,k.getResultData()];case 3:return x=A.sent(),[4,h(k,b,x)];
case 4:return v=A.sent(),y=!v&&!!x&&!("Feed"===k.type&&k.isHostedService&&1===(null===x||void 0===x?void 0:x.length)&&"Feature Service"===x[0].type&&x[0].typeKeywords.includes("Hosted Service"))&&!("Feature Service"===k.type&&k.isHostedService&&1===(null===x||void 0===x?void 0:x.length)&&"Feed"===x[0].type&&x[0].typeKeywords.includes("Hosted Service")),(D=null!==(w=e&&1===t.length&&v&&l.__assign(l.__assign({},k),{error:{message:"Delete discouraged"}}))&&void 0!==w?w:null)?m.push(D):v&&!u(t,x)?r.push(l.__assign(l.__assign({},
k),{error:{message:"Delete discouraged"}})):y&&!u(t,x)?r.push(l.__assign(l.__assign({},k),{error:{messageCode:"CONT_00481",offendingItems:x}})):m.push(k),[3,6];case 5:k.protected?r.push(l.__assign(l.__assign({},k),{error:{messageCode:"CONT_0048"}})):a.push(k),A.label=6;case 6:return[3,8];case 7:E=A.sent();C=l.__assign({},E);switch(E.messageCode){case "CONT_00481":z=E.offendingItems;u(t,z)?m.push(k):r.push(l.__assign(l.__assign({},k),{error:C}));break;case "CONT_0048":r.push(l.__assign(l.__assign({},
k),{error:C}));break;case "CONT_0298":a.push(k);break;default:r.push(l.__assign(l.__assign({},k),{error:C}))}return[3,8];case 8:return[2]}})})}))];case 1:return n.sent(),[2,Promise.resolve({protectedItems:r,unprotectedItems:m,unrecyclableItems:a})]}})})};var u=function(t,e){var r,m=null!==(r=null===e||void 0===e?void 0:e.map(function(a){var h;return null!==(h=a.itemId)&&void 0!==h?h:a.id}))&&void 0!==r?r:[];r=t.filter(function(a){return m.includes(a.id)});e=m.every(function(a){return t.some(function(h){return h.id===
a})});r=r.every(function(a){return!a.protected});return e&&r};B.canRestoreItem=function(t,e){return l.__awaiter(c,void 0,void 0,function(){var r;return l.__generator(this,function(m){switch(m.label){case 0:return r="".concat(e.userContentUrl,"/items/").concat(t.id,"/canRestore"),[4,d.default.request({url:r})];case 1:return[2,m.sent()]}})})};B.getRestorableItems=function(t,e){return l.__awaiter(c,void 0,void 0,function(){var r,m,a,h=this;return l.__generator(this,function(q){switch(q.label){case 0:return r=
[],m=[],a=[],[4,Promise.all(t.map(function(n){return l.__awaiter(h,void 0,void 0,function(){var k,g,b,x,v;return l.__generator(this,function(y){switch(y.label){case 0:return y.trys.push([0,2,,3]),[4,(0,B.canRestoreItem)(n,e)];case 1:return y.sent(),m.push(n),[3,3];case 2:k=y.sent();g=l.__assign({},k);switch(k.messageCode){case "CONT_00486":b=k.offendingItems;x=null!==(v=null===b||void 0===b?void 0:b.map(function(D){return D.itemId}))&&void 0!==v?v:[];x.every(function(D){return t.map(function(E){return E.id}).includes(D)})?
r.push(n):a.push(l.__assign(l.__assign({},n),{error:g}));break;default:a.push(l.__assign(l.__assign({},n),{error:g}))}return[3,3];case 3:return[2]}})})}))];case 1:return q.sent(),[2,Promise.resolve({restorableItems:r,sourceItems:m,unrestorableItems:a})]}})})}})},"arcgisonline/sharing/geow/Roles":function(){define("require exports tslib ../../esriGeowConfig ../util dojo/Deferred dojo/promise/all".split(" "),function(f,B,l,d,c,u,t){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);
t=l.__importDefault(t);return function(){function e(){this.declaredClass="arcgisonline.sharing.geow.Roles"}e.exceedsRolePrivileges=function(r,m,a){m=m||[];a&&(r=l.__spreadArray(l.__spreadArray([],r,!0),e.extraLevelOnePrivileges,!0));for(a=0;a<m.length;a++)if(-1===r.indexOf(m[a]))return!0;return!1};e.prototype.createRole=function(r,m){var a="".concat(d.default.restBaseUrl,"portals/self/createRole");return c.default.request({url:a,content:{name:r,description:m}},{usePost:!0})};e.prototype.updateRole=
function(r,m,a){r="".concat(d.default.restBaseUrl,"portals/self/roles/").concat(r,"/update");return c.default.request({url:r,content:{name:m,description:a}},{usePost:!0})};e.prototype.deleteRole=function(r){r="".concat(d.default.restBaseUrl,"portals/self/roles/").concat(r,"/delete");return c.default.request({url:r},{usePost:!0})};e.prototype.setPrivileges=function(r,m){var a="".concat(d.default.restBaseUrl,"portals/self/roles/").concat(r,"/setPrivileges");r={id:r,privileges:JSON.stringify({privileges:m})};
return c.default.request({url:a,content:r},{usePost:!0})};e.prototype.getPrivileges=function(r){r="".concat(d.default.restBaseUrl,"portals/self/roles/").concat(r,"/privileges");return c.default.request({url:r})};e.prototype.getAllUsersForRole=function(r){var m=this,a=new u.default,h=[],q=[],n=1,k,g,b;this.getUsersForRole(1,100,r).then(function(x){if(null===x||void 0===x?0:x.users){q=q.concat(x.users);n=x.nextStart;k=x.total-q.length;g=Math.ceil(k/100);for(b=0;b<g;b++)h.push(m.getUsersForRole(n+100*
b,100,r));(0,t.default)(h).then(function(v){v.forEach(function(y){q=q.concat(y.users)});a.resolve(q)},function(){a.resolve(q)})}},function(){a.resolve(q)});return a};e.prototype.getUsersForRole=function(r,m,a){var h="".concat(d.default.restBaseUrl,"portals/self/users");return c.default.request({url:h,content:{start:r,num:m,role:a}})};e.prototype.getAllRoles=function(r){var m=this,a=new u.default,h=[],q=1,n=[],k,g,b;this.getRoles(q,100,r).then(function(x){if(null===x||void 0===x?0:x.roles){n=n.concat(x.roles);
q=x.nextStart;k=x.total-n.length;g=Math.ceil(k/100);for(b=0;b<g;b++)h.push(m.getRoles(q+100*b,100,r));(0,t.default)(h).then(function(v){v.forEach(function(y){n=n.concat(y.roles)});a.resolve(n)},function(){a.resolve(n)})}},function(){a.resolve(n)});return a};e.prototype.getRoles=function(r,m,a){var h=d.default.restBaseUrl+"portals/self/roles";r={start:r,num:m,returnPrivileges:null};a&&(r.returnPrivileges=a);return c.default.request({url:h,content:r})};e.prototype.getRole=function(r){r="".concat(d.default.restBaseUrl,
"portals/self/roles/").concat(r);return c.default.request({url:r})};e.prototype.containsPrivilegesOutsideRole=function(r,m,a){var h=new u.default;r={roleResult:this.getPrivileges(r),compareResult:this.getPrivileges(m)};var q=!1,n,k;(0,t.default)(r).then(function(g){var b,x;n=(null===(b=g.roleResult)||void 0===b?void 0:b.privileges)||[];k=(null===(x=g.compareResult)||void 0===x?void 0:x.privileges)||[];a&&a instanceof Array?n=n.concat(a):a&&a instanceof String&&n.push(a);q=e.exceedsRolePrivileges(n,
k);h.resolve(q)},function(){h.resolve(q)});return h};e.extraLevelOnePrivileges=["portal:user:joinNonOrgGroup","portal:user:viewTracks"];return e}()})},"arcgisonline/sharing/geow/Licenses":function(){define("require exports tslib dojo/Deferred dojo/string dojo/i18n!../../nls/arcgisonline esri/lang ../../esriGeowConfig ../../pages/pageUtil ../../pages/utils/organization ../../pages/utils/promises ../../pages/components/ManageBlockedApps/blocked-apps-service ../util".split(" "),function(f,B,l,d,c,u,
t,e,r,m,a,h,q){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);q=l.__importDefault(q);return function(){function n(){this.proEntitlements=[];this._productListings=[];this.productEntitlements={};this._remainingProEntitlements={};this._remainingProductEntitlements={};this.appUserCounts=[];this._userEntitlementsUrl=e.default.restBaseUrl+"content/listings/${itemId}/userEntitlements";
this._userEntitlementUrl=this._userEntitlementsUrl+"/${username}";this._userSessionsUrl=e.default.restBaseUrl+"content/listings/${itemId}/users/${username}/sessions"}n.terminateUserSession=function(k,g,b){var x=q.default.getSecureUrl(e.default.restBaseUrl);k="".concat(x,"content/listings/").concat(k,"/terminateUserSession");return q.default.request({url:k,content:{username:g,sessionId:b}},{usePost:!0})};n.prototype.provisionUserEntitlements=function(k,g,b){return r.default.sendAllResourcesSerially("".concat(e.default.restBaseUrl,
"content/listings/").concat(k,"/provisionUserEntitlements"),25,g.users,function(x){return{userEntitlements:JSON.stringify({users:x,entitlements:g.entitlements}),suppressCustomerEmail:!b}})};n.prototype.retrieveProvisionedUserEntitlement=function(k,g){k=c.default.substitute(this._userEntitlementUrl,{itemId:k,username:g});return q.default.request({url:k})};n.prototype.retrieveProvisionedUserEntitlements=function(k,g,b){k=c.default.substitute(this._userEntitlementsUrl,{itemId:k});return q.default.request({url:k,
content:{start:g?g:1,num:b?b:10}})};n.prototype.retrieveSessionInformation=function(k,g){k=c.default.substitute(this._userSessionsUrl,{itemId:k,username:g});return q.default.request({url:k})};n.prototype.provisionUserAppBundle=function(k,g,b){var x=new d.default,v=new d.default;b?v.resolve():this.getAppBundles(!0).then(function(y){y=y.appBundles.filter(function(D){return D.appBundleItemId===k})[0];y.maxUsers-y.assigned>=g.length?v.resolve():x.reject()});v.then(function(){r.default.sendAllResourcesWithDelay("".concat(e.default.restBaseUrl,
"content/listings/").concat(k,"/provisionUserAppBundle"),25,g,function(y){return{users:JSON.stringify(y),revoke:b}},500).then(function(y){x.resolve(y)},function(y){x.reject(y)})});return x};n.prototype.updateUserLicenseType=function(k,g){var b=new d.default;r.default.sendAllResourcesSerially("".concat(e.default.restBaseUrl,"portals/self/updateUserLicenseType"),25,k,function(x){return{users:JSON.stringify(x),userLicenseType:g}}).then(function(x){b.resolve(x)},function(){b.reject()});return b};n.prototype.getUserCounts=
function(k){return q.default.request({url:"".concat(e.default.restBaseUrl,"portals/self/users/counts?type\x3d").concat(k)})};n.prototype.getUserLicenseType=function(k){var g=new d.default,b;h.default.getBlockedAppsWithInfo().then(function(x){b=x;return q.default.request({url:"".concat(e.default.restBaseUrl,"community/users/").concat(k,"/userLicenseType")})}).then(function(x){x.apps.forEach(function(v){v.isAppBundle?v.apps.forEach(function(y){y.blocked=h.default.isBlocked(b,y)}):v.blocked=h.default.isBlocked(b,
v)});g.resolve(x)},function(){g.resolve()});return g};n.prototype.getUserAppBundles=function(k){return r.default.fetchAllResources("".concat(e.default.restBaseUrl,"community/users/").concat(k,"/appBundles"),{num:10},"appBundles")};n.prototype.getUserProvisionedListings=function(k,g,b){var x=g||{},v=new d.default,y;b?h.default.getBlockedAppsWithInfo().then(function(D){v.resolve(D)}):v.resolve([]);return v.then(function(D){y=D;return r.default.fetchAllResources("".concat(e.default.restBaseUrl,"community/users/").concat(k,
"/provisionedListings"),x,"provisionedListings")}).then(function(D){m.default.licensesConfig&&D.forEach(function(E){var C=m.default.licensesConfig.apps.filter(function(z){return z.title===E.title})[0];C&&C.label&&(E.title=C.label);E.blocked=h.default.isBlocked(y,E)});return D})};n.prototype.getUserEntitlements=function(k,g){return q.default.request({url:"".concat(e.default.restBaseUrl,"content/listings/").concat(k,"/userEntitlements/").concat(g)})};n.prototype.getLicenseTypes=function(k){var g=this,
b=new d.default,x;h.default.getBlockedAppsWithInfo().then(function(v){x=v;return r.default.fetchAllResources("".concat(e.default.restBaseUrl,"portals/self/userLicenseTypes"),{num:10},"userLicenseTypes")}).then(function(v){(null===x||void 0===x?0:x.length)&&v.forEach(function(y){y.apps.forEach(function(D){D.isAppBundle?D.apps.forEach(function(E){E.blocked=x.some(function(C){var z;return C.itemid&&C.itemid===E.id||C.title===E.title||(null===(z=C.related)||void 0===z?void 0:z.some(function(w){return w.itemid&&
w.itemid===E.id||w.title===E.title}))})}):D.blocked=x.some(function(E){var C;return E.itemid&&E.itemid===D.id||E.title===D.title||(null===(C=E.related)||void 0===C?void 0:C.some(function(z){return z.itemid&&z.itemid===D.id||z.title===D.title}))})})});g.getUserCounts("userLicenseType").then(function(y){v.forEach(function(E){var C=y.results.filter(function(z){return z.key===E.id})[0];E.assigned=C?C.count:0});var D=v.filter(function(E){return k||0!==E.assigned||0!==E.maxUsers});r.default.sortListByStrProp(D,
"name");b.resolve({userLicenseTypes:D})})});return b};n.prototype.getAppBundles=function(k){var g=this,b=new d.default,x;h.default.getBlockedAppsWithInfo().then(function(v){x=v;return q.default.request({url:"".concat(e.default.restBaseUrl,"portals/self/appBundles")})}).then(function(v){v.appBundles.forEach(function(y){y.apps.forEach(function(D){D.blocked=x.some(function(E){var C;return E.itemid&&E.itemid===D.id||E.title===D.title||(null===(C=E.related)||void 0===C?void 0:C.some(function(z){return z.itemid&&
z.itemid===D.id||z.title===D.title}))})})});g.getUserCounts("appBundle").then(function(y){v.appBundles.forEach(function(D){var E=y.results.filter(function(C){return C.key===D.appBundleItemId})[0];D.assigned=E?E.count:0});v.appBundles=v.appBundles.filter(function(D){return 0!==D.maxUsers||0!==D.assigned});r.default.sortListByStrProp(v.appBundles,"name");k?b.resolve(v):a.default.eachAlways(v.appBundles.map(function(D){return g.getUsersForAppBundle(D.appBundleItemId)})).then(function(D){D.forEach(function(E,
C){v.appBundles[C].usernames=E.value.results.map(function(z){return z.username})});a.default.eachAlways(v.appBundles.map(function(E){return g.getAppBundleListing(E.appBundleItemId)})).then(function(E){v.appBundles.forEach(function(C,z){C.allowedLevels=E[z].value.allowedUserLevels?E[z].value.allowedUserLevels.split(",").map(function(w){return w.trim()}):[]});b.resolve(v)})})})});return b};n.prototype.getAppBundleListing=function(k){return q.default.request({url:"".concat(q.default.getSecureUrl(e.default.restBaseUrl),
"content/listings/").concat(k)})};n.prototype.getUsersForAppBundle=function(k){return q.default.request({url:"".concat(e.default.restBaseUrl,"portals/self/users/search"),content:{q:"appbundle: ".concat(k)}})};n.prototype.getLicensedEntitlements=function(){var k=this,g=new d.default,b;m.default.initLicensesConfig(e.default.portal).then(function(){return h.default.getBlockedAppsWithInfo()}).then(function(x){b=x;return k.retrieveProductListings()}).then(function(){k._retrieveUserEntitlements().then(function(){var x;
k._hasNegativeLicenses();var v=[];if(k._hasProListing()){var y={};k.appUserCounts.forEach(function(z){z.key!==k._proListing.listing.itemId||y[z.secondaryKey]||(y[z.secondaryKey]={num:0})});var D=!(k._proListing.provision.orgEntitlements&&k._proListing.provision.orgEntitlements.entitlements),E=[];var C=D?y:k._proListing.provision.orgEntitlements.entitlements;D||Object.keys(y).forEach(function(z){C[z]||(C[z]=y[z],E.push(z))});Object.keys(C).forEach(function(z){var w;D||(D=-1!==E.indexOf(z));var A=(null===
(w=k.appUserCounts.filter(function(K){return K.key===k._proListing.listing.itemId&&K.secondaryKey===z})[0])||void 0===w?void 0:w.count)||0;w=C[z].num;var G=w-A,F=k.proEntitlements.filter(function(K){return-1!==K.entitlements.indexOf(z)}),H=-1===["desktopBasicN","desktopStdN","desktopAdvN"].indexOf(z),J=k._isLicenseExpired(k._proListing.provision.endDate,D,w,A);A={title:n.getProEntitlementTitle(z),key:z,total:w,used:A,remaining:G,status:c.default.substitute(n.i18n.licensesUsed,{used:A,total:w}),isPro:!0,
proEntitlements:k.proEntitlements,allowedLevels:["2"],itemId:k._proListing.listing.itemId,usernames:F.map(function(K){return K.username}),extNotSupported:n.getExtNotSupported(z),expiration:k._proListing.provision.endDate,isExpired:J,isExtension:H,trial:k._proListing.provision.trial,isEsriApp:!0};v.push(A)})}null===(x=k._productListings)||void 0===x?void 0:x.forEach(function(z){var w,A=z.listing,G=A.itemId,F={},H=!(z.provision.orgEntitlements&&z.provision.orgEntitlements.entitlements),J=A.title,K=
k.appUserCounts.filter(function(I){return I.key===G})[0];K&&(F[K.secondaryKey]={num:0});C=H?F:z.provision.orgEntitlements.entitlements;F&&Object.keys(F).length&&Object.keys(F).forEach(function(I){C[I]||(C[I]=F[I])});var Q=[],P="esri"===A.owner||"esri_apps"===A.owner;!P&&C&&Object.keys(C).length&&(Q=Object.keys(C),K=Q[0],C=(w={},w[K]=C[K],w));Object.keys(C).forEach(function(I){var N,L,W,Z=!0;if(m.default.licensesConfig){var aa=-1<(null===(N=z.listing.typeKeywords)||void 0===N?void 0:N.indexOf("User License Type Extension"));
N=aa?m.default.licensesConfig.userTypeExtensions:m.default.licensesConfig.apps;if(N=null===N||void 0===N?void 0:N.filter(function(R){return R.entitlement===I})[0])aa||(J=N.label||N.title),"false"===N.supportsKubernetes&&(Z=!1)}aa=(null===(L=k.appUserCounts.filter(function(R){return R.key===G&&R.secondaryKey===I})[0])||void 0===L?void 0:L.count)||0;L={drone2MapAdvN:"ArcGIS Drone2Map Advanced",drone2MapStdN:"ArcGIS Drone2Map Standard"};L[I]&&(J=L[I]);L=C[I].num;N=L-aa;var ia=k._isLicenseExpired(z.provision.endDate,
H,L,aa);Z={title:J,key:I,total:L,used:aa,remaining:N,status:c.default.substitute(n.i18n.licensesUsed,{used:aa,total:L}),icon:A.icon,properties:A.properties,itemId:G,type:A.type,allowedLevels:A.allowedUserLevels?A.allowedUserLevels.split(",").map(function(R){return R.trim()}):[],usernames:k.productEntitlements[G]?k.productEntitlements[G].map(function(R){return R.username}):[],expiration:z.provision.endDate,isExpired:ia,trial:z.provision.trial,requiredListings:A.requiredListings,dependentListings:A.dependentListings,
owner:A.owner,isBusinessAnalyst:m.default.isBusinessAnalyst(I),isDrone2Map:m.default.isDrone2Map(I),blocked:b.some(function(R){var S;return R.itemid&&R.itemid===G||R.title===J||(null===(S=R.related)||void 0===S?void 0:S.some(function(M){return M.itemid&&M.itemid===G||M.title===J}))}),entitlementKeys:Q,isEsriApp:P,supportsKubernetes:Z};"ArcGIS for Power BI"===Z.title&&(null===(W=m.default.licensesConfig)||void 0===W?0:W.hidePowerBI)||v.push(Z)})});r.default.sortListByStrProp(v,"title");g.resolve(v)})});
return g};n.prototype.getProListing=function(){return this._hasProListing()?this._proListing:void 0};n.prototype.getDisconnectSettingForListing=function(k){k="".concat(q.default.getSecureUrl(e.default.restBaseUrl),"content/listings/").concat(k,"/disconnectSettings");return q.default.request({url:k})};n.prototype.updateDisconnectSettingForListing=function(k,g,b){k="".concat(q.default.getSecureUrl(e.default.restBaseUrl),"content/listings/").concat(k,"/setDisconnectSettings");var x=new d.default;g={canDisconnect:g};
t.default.isDefined(b)&&(g.maxDisconnectTime=b);q.default.request({url:k,content:g},{usePost:!0}).then(function(v){v&&v.code&&v.messageCode?x.resolve({error:!0,messageCode:v.messageCode}):x.resolve(v)},function(v){var y={error:!0,messageCode:void 0};v&&v.messageCode&&(y.messageCode=v.messageCode);x.resolve(y)});return x};n.getExtNotSupported=function(k){return this._extNotSupported[k]};n.getProEntitlementTitle=function(k){switch(k){case "desktopBasicN":return n.i18n.licenseTypes.agsProLabel+" "+n.i18n.licenseTypes.basicLabel;
case "desktopStdN":return n.i18n.licenseTypes.agsProLabel+" "+n.i18n.licenseTypes.standardLabel;case "desktopAdvN":return n.i18n.licenseTypes.agsProLabel+" "+n.i18n.licenseTypes.advancedLabel;case "spatialAnalystN":return n.i18n.licenseTypes.spatialAnalyst;case "3DAnalystN":return n.i18n.licenseTypes.threeDAnalyst;case "networkAnalystN":return n.i18n.licenseTypes.networkAnalyst;case "geostatAnalystN":return n.i18n.licenseTypes.geostatisticalAnalyst;case "dataReviewerN":return n.i18n.licenseTypes.dataReviewer;
case "workflowMgrN":return n.i18n.licenseTypes.workflowManager;case "dataInteropN":return n.i18n.licenseTypes.dataInterop;case "defenseN":return n.i18n.licenseTypes.defenseMapping;case "FMVN":return n.i18n.licenseTypes.fullMotionVideo;case "businessBasicN":return n.i18n.licenseTypes.businessBasic;case "businessStdN":return n.i18n.licenseTypes.businessStd;case "roadsHighwaysN":return n.i18n.licenseTypes.roadsHighways;case "publisherN":return n.i18n.licenseTypes.publisher;case "productionMapN":return n.i18n.licenseTypes.productionMapping;
case "schematicsN":return n.i18n.licenseTypes.schematics;case "trackingN":return n.i18n.licenseTypes.tracking;case "aviationN":return n.i18n.licenseTypes.aviation;case "airportsN":return n.i18n.licenseTypes.airports;case "maritimeN":return n.i18n.licenseTypes.maritime;case "bathymetryN":return n.i18n.licenseTypes.bathymetry;case "smpNAmericaN":return n.i18n.licenseTypes.streetMapNA;case "smpEuropeN":return n.i18n.licenseTypes.streetMapEU;case "smpAsiaPacificN":return n.i18n.licenseTypes.streetMapAPAC;
case "smpMidEAfricaN":return n.i18n.licenseTypes.streetMapMEA;case "smpLAmericaN":return n.i18n.licenseTypes.streetMapLA;case "smpJapanN":return n.i18n.licenseTypes.streetMapJA;case "LocRefDesktopN":return n.i18n.licenseTypes.locationRef;case "imageAnalystN":return n.i18n.licenseTypes.imageAnalyst;case "locateXTN":return n.i18n.licenseTypes.locateXT;case "indoorsN":return n.i18n.licenseTypes.indoors;default:return""}};n.prototype._hasNegativeLicenses=function(){var k=this,g={},b=!1,x=!1;this._proListing&&
(this._proListing.provision.orgEntitlements&&this._proListing.provision.orgEntitlements.entitlements&&(g=this._convertOrgEntitlementsToPurchaseMap(this._proListing.provision.orgEntitlements.entitlements)),this._remainingProEntitlements=l.__assign({},g),this.proEntitlements.forEach(function(v){v.entitlements.forEach(function(y){k._remainingProEntitlements[y]||(k._remainingProEntitlements[y]=0);--k._remainingProEntitlements[y];0>k._remainingProEntitlements[y]&&(b=!0)})}));this._productListings&&0<this._productListings.length&&
(this._remainingProductEntitlements={},this._productListings.forEach(function(v){g={};var y=v.listing.itemId;v.provision.orgEntitlements&&v.provision.orgEntitlements.entitlements&&(g=k._convertOrgEntitlementsToPurchaseMap(v.provision.orgEntitlements.entitlements));k._remainingProductEntitlements[y]=l.__assign({},g);k.productEntitlements[y]&&k.productEntitlements[y].forEach(function(D){D.entitlements.forEach(function(E){k._remainingProductEntitlements[y]||(k._remainingProductEntitlements[y]={});k._remainingProductEntitlements[y][E]||
(k._remainingProductEntitlements[y][E]=0);--k._remainingProductEntitlements[y][E];0>k._remainingProductEntitlements[y][E]&&(x=!0)})})}));return b||x};n.prototype._convertOrgEntitlementsToPurchaseMap=function(k){var g={};if(k)for(var b in k)k[b]&&t.default.isDefined(k[b].num)?g[b]=k[b].num:g[b]=k[b];return g};n.prototype._hasProListing=function(){var k=this;return!!(this._proListing&&this._proListing.provision&&(this._proListing.provision.orgEntitlements&&!r.default.isEmptyObject(this._proListing.provision.orgEntitlements)||
this.appUserCounts.some(function(g){var b;return g.key===(null===(b=k._proListing.listing)||void 0===b?void 0:b.itemId)})))};n.prototype._isLicenseExpired=function(k,g,b,x){var v=t.default.isDefined(k),y=-1===k;k=k<Date.now();return v&&!y&&k||g||0===b&&0<x};n.prototype.retrieveProductListings=function(){var k=this,g=new d.default;q.default.findLicenseByUserProducts().then(function(b){b&&b.pro&&(k._proListing=l.__assign({},b.pro));b&&b.products&&(k._productListings=l.__spreadArray([],b.products,!0));
g.resolve()},function(){k._proListing=void 0;k._productListings=void 0;g.resolve()});return g};n.prototype.retrieveUserEntitlementsForListing=function(k){k=c.default.substitute(this._userEntitlementsUrl,{itemId:k});return r.default.fetchAllResources(k,{},"userEntitlements")};n.prototype.getAppUserCounts=function(){var k=this;return r.default.fetchAllResources("".concat(e.default.restBaseUrl,"portals/self/users/counts?type\x3dapp")).then(function(g){k.appUserCounts=g})};n.prototype._retrieveUserEntitlements=
function(){var k=new d.default;this.getAppUserCounts().then(function(){k.resolve()},function(){k.resolve()});return k};n.prototype._retrieveProUserEntitlements=function(){var k=c.default.substitute(this._userEntitlementsUrl,{itemId:this._proListing.listing.itemId});return r.default.fetchAllResources(k,{},"userEntitlements")};n.prototype._retrieveProductUserEntitlements=function(){var k=this,g={};this._productListings.forEach(function(b){b=b.listing.itemId;var x=c.default.substitute(k._userEntitlementsUrl,
{itemId:b});g[b]=r.default.fetchAllResources(x,{},"userEntitlements")});return g};n.prototype.getUserLicensedItems=function(k){return l.__awaiter(this,void 0,void 0,function(){var g;return l.__generator(this,function(b){switch(b.label){case 0:return b.trys.push([0,2,,3]),[4,q.default.request({url:"".concat(e.default.restBaseUrl,"community/users/").concat(k),content:{returnUserLicensedItems:!0}})];case 1:return g=b.sent(),[2,(null===g||void 0===g?void 0:g.userLicensedItems)||[]];case 2:return b.sent(),
[2,[]];case 3:return[2]}})})};n.i18n=l.__assign({},u.default.manageLicenses);n._extNotSupported={desktopBasicN:"defenseN roadsHighwaysN productionMapN aviationN airportsN maritimeN bathymetryN LocRefDesktopN".split(" "),desktopStdN:["maritimeN"],desktopAdvN:[]};return n}()})},"arcgisonline/pages/components/ManageBlockedApps/blocked-apps-service":function(){define("require exports tslib dojo/Deferred dojo/promise/all arcgisonline/sharing/util arcgisonline/esriGeowConfig".split(" "),function(f,B,l,
d,c,u,t){Object.defineProperty(B,"__esModule",{value:!0});d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);var e,r,m,a,h,q,n=function(x){var v=new d.default;if(m&&!x)return m;if(!x&&(null===r||void 0===r?0:r.blockedApps)&&3E3>=Date.now()-r.timestamp)return v.resolve(r.blockedApps),m=void 0,v;m=v;(0,c.default)({signinSettings:u.default.request({url:"".concat(t.default.restBaseUrl,"portals/self/signinSettings")}),blockable:b()}).then(function(y){var D=y.signinSettings;
y=y.blockable;var E=D.blockedApps;!x&&D.blockBetaApps&&y.forEach(function(C){C.isBeta&&!E.includes(C.clientid)&&E.push(C.clientid)});r={blockedApps:E,timestamp:Date.now()};v.resolve(E);m=void 0},function(){v.resolve([]);m=void 0});return v},k=function(){var x=new d.default;if(q)return x.resolve(q),x;if(a)return a;a=x;u.default.request({url:"".concat(t.default.restBaseUrl,"search"),content:{num:10,start:0,sortField:"title",sortOrder:"asc",q:t.default.blockedAppsConfigItemQuery}}).then(function(v){a=
void 0;q=v;x.resolve(v)},function(){a=void 0;x.resolve(void 0)});return x},g=function(x){var v=new d.default;if(!x)return v.resolve(void 0),v;if(h)return h;h=v;u.default.request({url:"".concat(t.default.restBaseUrl,"content/items/").concat(x,"/data")}).then(function(y){h=void 0;e=(null===y||void 0===y?void 0:y.blockedApps)||[];v.resolve(e)},function(){h=void 0;v.resolve(e)});return v},b=function(){var x=new d.default;if(e)return x.resolve(e),x;k().then(function(v){var y,D;if(v)return v=null===(D=
null===(y=v.results)||void 0===y?void 0:y[0])||void 0===D?void 0:D.id,g(v);x.resolve(e)}).then(function(v){x.resolve(v)});return x};B.default={updateBlockedApps:function(x){x=l.__assign({blockedApps:x.length?JSON.stringify(x):""},!x.length&&{clearEmptyFields:!0});return u.default.request({url:"".concat(t.default.restBaseUrl,"portals/self/setSigninSettings"),content:x},{usePost:!0})},getBlockedApps:n,getBlockableApps:b,getBlockedAppsWithInfo:function(x){var v=new d.default;(0,c.default)({blockable:b(),
clientIds:n(x)}).then(function(y){var D=y.blockable,E=y.clientIds;(null===D||void 0===D?0:D.length)&&E||v.resolve([]);v.resolve((D||[]).filter(function(C){return-1<(null===E||void 0===E?void 0:E.indexOf(C.clientid))}))},function(){v.resolve([])});return v},isBlocked:function(x,v){return x.some(function(y){var D;return y.itemid&&(y.itemid===v.id||y.itemid===v.itemId)||y.title===v.title||(null===(D=y.related)||void 0===D?void 0:D.some(function(E){return E.itemid&&(E.itemid===v.id||E.itemid===v.itemId)||
E.title===v.title}))})},extractClientIds:function(x){var v=[];x.forEach(function(y){var D,E;v.push(y.clientid);null===(E=null===(D=y.related)||void 0===D?void 0:D.forEach)||void 0===E?void 0:E.call(D,function(C){v.push(C.clientid)})});return v}}})},"arcgisonline/sharing/dijit/Role":function(){define("require exports tslib ../../esriGeowConfig ../../pages/utils/arrays ./_LevelAwareMixin esri/lang dojo/i18n!../../nls/custom-roles".split(" "),function(f,B,l,d,c,u,t,e){d=l.__importDefault(d);c=l.__importDefault(c);
u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);return function(r){function m(a){var h=r.call(this)||this;h.declaredClass="arcgisonline.sharing.dijit.Role";h.id=null;h.baseRole=null;h.name=null;h.description=null;h.privileges=[];h.privilegeObj={portal:{admin:{inviteUsers:!1,disableUsers:!1,viewUsers:!1,updateUsers:!1,deleteUsers:!1,changeUserRoles:!1,viewGroups:!1,updateGroups:!1,deleteGroups:!1,reassignGroups:!1,assignToGroups:!1,manageEnterpriseGroups:!1,viewItems:!1,updateItems:!1,
deleteItems:!1,reassignItems:!1,manageLicenses:!1,shareToOrg:!1,shareToPublic:!1,createUpdateCapableGroup:!1,updateItemCategorySchema:!1,updateMemberCategorySchema:!1,manageCollaborations:!1,manageSecurity:!1,manageWebsite:!1,manageRoles:!1,manageServers:!1,manageUtilityServices:!1,manageCredits:!1,manageWebhooks:!1,createGPWebhook:!1,createReports:!1},publisher:{publishFeatures:!1,publishTiles:!1,publishScenes:!1,publishTiledImagery:!1,publishDynamicImagery:!1,publishServerServices:!1,publishServerGPServices:!1,
publishKnowledgeGraph:!1,registerDataStores:!1,bulkPublishFromDataStores:!1,enumerateDataStores:!1,createFeatureWebhook:!1,createDataPipelines:!1,publishVideo:!1,publishLivestreamVideo:!1,publishFeeds:!1,publishRealTimeAnalytics:!1,publishBigDataAnalytics:!1},user:{createGroup:!1,joinGroup:!1,joinNonOrgGroup:!1,invitePartneredCollaborationMembers:!1,addExternalMembersToGroup:!1,createItem:!1,reassignItems:!1,receiveItems:!1,runWebTool:!1,shareToGroup:!1,shareToOrg:!1,shareToPublic:!1,shareGroupToOrg:!1,
shareGroupToPublic:!1,viewOrgUsers:!1,viewOrgItems:!1,viewOrgGroups:!1,viewTracks:!1}},features:{user:{edit:!1,fullEdit:!1,manageVersions:!1,editIndoorsSpaces:!1}},opendata:{user:{openDataAdmin:!1,designateGroup:!1}},premium:{user:{geocode:!1,networkanalysis:!1,spatialanalysis:!1,geoenrichment:!1,demographics:!1,featurereport:!1},publisher:{geoanalytics:!1,rasteranalysis:!1,createNotebooks:!1,scheduleNotebooks:!1,publishNotebooks:!1,createAdvancedNotebooks:!1}},marketplace:{admin:{manage:!1,purchase:!1,
startTrial:!1}}};a=a||{};var q=a.portalUser;q?(h.id=q.roleId?q.roleId:q.role,h.baseRole=q.role,h.setPrivileges(q.privileges)):(h.id=a.id,h.baseRole=a.role,h.name=a.name,h.description=a.description,a.privileges&&h.setPrivileges(a.privileges));a.viewOnly&&h.setViewOnly();return h}l.__extends(m,r);m.prototype.setViewOnly=function(){var a=this;this.baseRole="org_user";this.id=this.SYSTEM_ROLES.VIEWER;var h=this._buildPrivilegesArray().filter(function(q){return c.default.includes(a.SYSTEM_ROLES.PRIVILEGES[a.id],
q)});this.setPrivileges(h)};m.prototype.isViewer=function(){return t.default.isDefined(this.id)&&this.id===this.SYSTEM_ROLES.VIEWER};m.prototype.isDataEditor=function(){return t.default.isDefined(this.id)&&this.id===this.SYSTEM_ROLES.DATA_EDITOR};m.prototype.isFacilitator=function(){return t.default.isDefined(this.id)&&this.id===this.SYSTEM_ROLES.FACILITATOR};m.prototype.isUser=function(){return t.default.isDefined(this.id)&&("org_user"===this.id||"account_user"===this.id)};m.prototype.isPublisher=
function(){return t.default.isDefined(this.id)&&("org_publisher"===this.id||"account_publisher"===this.id)};m.prototype.isAdmin=function(){return t.default.isDefined(this.id)&&("org_admin"===this.id||"account_admin"===this.id)};m.prototype.isBasedOnUser=function(){return this.isUser()||t.default.isDefined(this.baseRole)&&("org_user"===this.baseRole||"account_user"===this.baseRole)};m.prototype.isBasedOnPublisher=function(){return this.isPublisher()||t.default.isDefined(this.baseRole)&&("org_publisher"===
this.baseRole||"account_publisher"===this.baseRole)};m.prototype.isBasedOnAdmin=function(){return this.isAdmin()||t.default.isDefined(this.baseRole)&&("org_admin"===this.baseRole||"account_admin"===this.baseRole)};m.prototype.isCustom=function(){return!this.isUser()&&!this.isPublisher()&&!this.isAdmin()&&t.default.isDefined(this.id)&&0<this.id.length};m.prototype.isBuiltIn=function(){var a=this.isUser()||this.isPublisher()||this.isAdmin(),h=this.isViewer()||this.isDataEditor()||this.isFacilitator();
return a||h};m.prototype.canInviteUsers=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.inviteUsers};m.prototype.canDisableUsers=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.disableUsers};m.prototype.canViewUsers=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.viewUsers};m.prototype.canGetCoordinators=function(){return this.canViewUsers()||this.canViewOrgUsers()};m.prototype.canUpdateUsers=
function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.updateUsers};m.prototype.canDeleteUsers=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.deleteUsers};m.prototype.canChangeUserRoles=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.changeUserRoles};m.prototype.canViewOrgGroups=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.viewGroups};m.prototype.canUpdateOrgGroups=
function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.updateGroups};m.prototype.canDeleteOrgGroups=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.deleteGroups};m.prototype.canReassignOrgGroups=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.reassignGroups};m.prototype.canAssignUsersToOrgGroups=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.assignToGroups};
m.prototype.canManageEnterpriseGroups=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.manageEnterpriseGroups};m.prototype.canViewOrgItems=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.viewItems};m.prototype.canUpdateOrgItems=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.updateItems};m.prototype.canDeleteOrgItems=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:
a.portal.admin.deleteItems};m.prototype.canReassignOrgItems=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.reassignItems};m.prototype.canReassignOwnItems=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.reassignItems};m.prototype.canReceiveUserItems=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.receiveItems};m.prototype.canRunWebTool=function(){var a;return null===(a=this.privilegeObj)||
void 0===a?void 0:a.portal.user.runWebTool};m.prototype.canManageItems=function(){return this.isAdmin()||this.canViewUsers()&&this.canViewOrgItems()&&(this.canUpdateOrgItems()||this.canDeleteOrgItems()||this.canReassignOrgItems())};m.prototype.canManageOrgRecycleBin=function(){return this.isAdmin()||this.canDeleteOrgItems()&&this.canViewUsers()&&this.canViewOrgItems()&&this.canUpdateOrgItems()};m.prototype.canManageLicenses=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.manageLicenses};
m.prototype.canShareOthersItemsToOrg=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.shareToOrg};m.prototype.canShareOthersItemsToPublic=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.shareToPublic};m.prototype.canCreateUpdateCapableGroup=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.createUpdateCapableGroup};m.prototype.canUpdateItemCategories=function(){var a;return null===(a=
this.privilegeObj)||void 0===a?void 0:a.portal.admin.updateItemCategorySchema};m.prototype.canUpdateMemberCategories=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.updateMemberCategorySchema};m.prototype.canManageCollaborations=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.manageCollaborations};m.prototype.canManageSecurity=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.manageSecurity};
m.prototype.canManageWebsite=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.manageWebsite};m.prototype.canManageRoles=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.manageRoles};m.prototype.canManageServers=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.manageServers};m.prototype.canManageUtilityServices=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.manageUtilityServices};
m.prototype.canManageCredits=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.manageCredits};m.prototype.canManageWebhooks=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.manageWebhooks};m.prototype.canCreateGeoprocessingWebhook=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.admin.createGPWebhook};m.prototype.canCreateReports=function(){var a;return null===(a=this.privilegeObj)||void 0===
a?void 0:a.portal.admin.createReports};m.prototype.canCreateGroup=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.createGroup};m.prototype.canJoinOrgGroup=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.joinGroup};m.prototype.canJoinNonOrgGroup=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.joinNonOrgGroup};m.prototype.canManageCollaborationGroupMembers=function(){var a;return null===
(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.invitePartneredCollaborationMembers};m.prototype.canAddExternalMembersToGroup=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.addExternalMembersToGroup};m.prototype.canPublishFeatures=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishFeatures};m.prototype.canPublishTiles=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishTiles};
m.prototype.canPublishScenes=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishScenes};m.prototype.canPublishTiledImagery=function(){var a,h;return(null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishTiledImagery)&&!(null===(h=d.default.self)||void 0===h?0:h.isPortal)&&this._hasImageEntitlement()};m.prototype.canPublishDynamicImagery=function(){var a,h;return(null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishDynamicImagery)&&
((null===(h=d.default.self)||void 0===h?void 0:h.isPortal)||this._hasImageEntitlement())};m.prototype.canPublishServerServices=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishServerServices};m.prototype.canPublishServerGPServices=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishServerGPServices};m.prototype.canPublishKnowledgeGraphServices=function(){var a;return null===(a=this.privilegeObj)||void 0===
a?void 0:a.portal.publisher.publishKnowledgeGraph};m.prototype.canPublishVideo=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishVideo};m.prototype.canPublishLivestreamVideo=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishLivestreamVideo};m.prototype.canPublishFeeds=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishFeeds};m.prototype.canPublishRealTimeAnalytics=
function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishRealTimeAnalytics};m.prototype.canPublishBigDataAnalytics=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.publishBigDataAnalytics};m.prototype.canPublishVectorTiles=function(){return!0};m.prototype.canPublishImageCollection=function(){var a=d.default.self&&d.default.self.isPortal,h=this.canPublishDynamicImagery()||this.canPublishTiledImagery();return a?this.canPublishDynamicImagery():
h};m.prototype.canCreateItem=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.createItem};m.prototype.canShareItemToGroup=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.shareToGroup};m.prototype.canShareItemToOrg=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.shareToOrg};m.prototype.canShareItemToPublic=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.shareToPublic};
m.prototype.canShareGroupToOrg=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.shareGroupToOrg};m.prototype.canShareGroupToPublic=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.shareGroupToPublic};m.prototype.canViewOrgUsers=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.viewOrgUsers};m.prototype.canViewOrgUserContent=function(){var a;return null===(a=this.privilegeObj)||void 0===a?
void 0:a.portal.user.viewOrgItems};m.prototype.canViewOrgUserGroups=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.viewOrgGroups};m.prototype.canViewTracks=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.user.viewTracks};m.prototype.canEditFeatures=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.features.user.edit};m.prototype.canEditFeaturesFullControl=function(){var a;return null===(a=this.privilegeObj)||
void 0===a?void 0:a.features.user.fullEdit};m.prototype.canManageVersions=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.features.user.manageVersions};m.prototype.canEditIndoorsSpaces=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.features.user.editIndoorsSpaces};m.prototype.canManageOpenData=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.opendata.user.openDataAdmin};m.prototype.canDesignateOpenDataGroups=function(){var a;
return null===(a=this.privilegeObj)||void 0===a?void 0:a.opendata.user.designateGroup};m.prototype.canUseGeocode=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.premium.user.geocode};m.prototype.canUseNetworkAnalysis=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.premium.user.networkanalysis};m.prototype.canUseSpatialAnalysis=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.premium.user.spatialanalysis};m.prototype.canUseGeoenrichment=
function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.premium.user.geoenrichment};m.prototype.canUseDemographics=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.premium.user.demographics};m.prototype.canUseFeatureReport=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.premium.user.featurereport};m.prototype.canUseGeoanalytics=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.premium.publisher.geoanalytics};
m.prototype.canUseRasterAnalysis=function(){var a;return(null===(a=this.privilegeObj)||void 0===a?void 0:a.premium.publisher.rasteranalysis)&&this.canPublishImageCollection()};m.prototype.canPurchaseMarketplace=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.marketplace.admin.purchase};m.prototype.canManageMarketplace=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.marketplace.admin.manage};m.prototype.canTrialMarketplace=function(){var a;return null===
(a=this.privilegeObj)||void 0===a?void 0:a.marketplace.admin.startTrial};m.prototype.canCreateNotebooks=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.premium.publisher.createNotebooks};m.prototype.canScheduleNotebooks=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.premium.publisher.scheduleNotebooks};m.prototype.canPublishNotebooks=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.premium.publisher.publishNotebooks};m.prototype.canCreateAdvancedNotebooks=
function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.premium.publisher.createAdvancedNotebooks};m.prototype.canBulkPublishFromDataStores=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.bulkPublishFromDataStores};m.prototype.canEnumerateDataStores=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.enumerateDataStores};m.prototype.canRegisterDataStores=function(){var a;return null===(a=this.privilegeObj)||
void 0===a?void 0:a.portal.publisher.registerDataStores};m.prototype.canCreateFeatureWebhook=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.createFeatureWebhook};m.prototype.canCreateDataPipelines=function(){var a;return null===(a=this.privilegeObj)||void 0===a?void 0:a.portal.publisher.createDataPipelines};m.prototype.setPrivileges=function(a){this.privileges=a;this._initPrivilegesObject();t.default.isDefined(a)&&this._readPrivileges(a)};m.prototype.summarize=
function(){var a=[],h=d.default.self&&d.default.self.isPortal,q=d.default.self&&d.default.self.portalProperties&&d.default.self.portalProperties.openData&&!0===d.default.self.portalProperties.openData.enabled,n=this.privilegeObj;n.portal.user.viewOrgUsers&&a.push(h?e.default.customRoles.users.canViewOrgUsersSumPortal:e.default.customRoles.users.canViewOrgUsersSum);n.portal.user.createGroup&&a.push(e.default.customRoles.groups.canCreateSum);n.portal.user.joinGroup&&a.push(h?e.default.customRoles.groups.canJoinIntSumPortal:
e.default.customRoles.groups.canJoinIntSum);n.portal.user.joinNonOrgGroup&&a.push(e.default.customRoles.groups.canJoinExt);n.portal.user.viewOrgGroups&&a.push(h?e.default.customRoles.groups.canViewOrgGroupsPortal:e.default.customRoles.groups.canViewOrgGroups);!h&&n.portal.user.invitePartneredCollaborationMembers&&a.push(e.default.customRoles.groups.canInvitePartnered);!h&&n.portal.user.addExternalMembersToGroup&&a.push(e.default.customRoles.groups.canAddExternal);n.portal.user.createItem&&a.push(e.default.customRoles.items.canCreateSum);
n.portal.publisher.publishFeatures&&a.push(e.default.customRoles.items.canPublishFeatures);n.portal.publisher.publishTiles&&a.push(e.default.customRoles.items.canPublishTiles);n.portal.publisher.publishScenes&&a.push(e.default.customRoles.items.canPublishScenes);n.portal.publisher.publishTiledImagery&&a.push(e.default.customRoles.items.canPublishTiledImagery);n.portal.publisher.publishDynamicImagery&&a.push(e.default.customRoles.items.canPublishDynamicImagery);h&&n.portal.publisher.publishServerServices&&
a.push(e.default.customRoles.items.canPublishServerServices);h&&n.portal.publisher.registerDataStores&&a.push(e.default.customRoles.items.canRegisterDataStore);h&&n.portal.publisher.createFeatureWebhook&&a.push(e.default.customRoles.webhooks.canCreateFeatureSum);n.portal.publisher.createDataPipelines&&a.push(e.default.customRoles.items.canCreatePipelines);n.portal.publisher.publishFeeds&&a.push(e.default.customRoles.items.canPublishFeeds);n.portal.publisher.publishRealTimeAnalytics&&a.push(e.default.customRoles.items.canPublishRealTime);
n.portal.publisher.publishBigDataAnalytics&&a.push(e.default.customRoles.items.canPublishBigData);h&&(n.portal.publisher.publishVideo&&a.push(e.default.customRoles.items.canPublishVideo),n.portal.publisher.publishLivestreamVideo&&a.push(e.default.customRoles.items.canPublishLivestreamVideo));n.portal.user.viewOrgItems&&a.push(h?e.default.customRoles.items.canViewOrgItemsPortal:e.default.customRoles.items.canViewOrgItems);n.portal.user.viewTracks&&a.push(e.default.customRoles.items.canViewTracks);
n.portal.user.reassignItems&&a.push(e.default.customRoles.items.canReassignOwnItems);n.portal.user.receiveItems&&a.push(e.default.customRoles.items.canReceiveReassignment);n.portal.user.shareToGroup&&a.push(e.default.customRoles.itemSharing.canShareGroupsSum);n.portal.user.shareToOrg&&a.push(h?e.default.customRoles.itemSharing.canShareOrgSumPortal:e.default.customRoles.itemSharing.canShareOrgSum);n.portal.user.shareToPublic&&a.push(e.default.customRoles.itemSharing.canSharePublicSum);n.portal.user.shareGroupToOrg&&
a.push(h?e.default.customRoles.groupSharing.canShareOrgPortal:e.default.customRoles.groupSharing.canShareOrg);n.portal.user.shareGroupToPublic&&a.push(e.default.customRoles.groupSharing.canSharePublic);q&&n.opendata.user.openDataAdmin&&a.push(e.default.customRoles.openData.canAdmin);n.premium.user.geocode&&a.push(e.default.customRoles.geoservices.canUseGeocoding);n.premium.user.networkanalysis&&a.push(e.default.customRoles.geoservices.canUseNA);n.premium.user.spatialanalysis&&a.push(e.default.customRoles.geoservices.canUseSA);
n.premium.user.geoenrichment&&a.push(e.default.customRoles.geoservices.canUseGeoenrichment);n.premium.user.demographics&&a.push(e.default.customRoles.geoservices.canUseDemographics);n.premium.user.featurereport&&a.push(e.default.customRoles.geoservices.canUseFeatureReport);h&&n.premium.publisher.geoanalytics&&a.push(e.default.customRoles.geoservices.canUseGeoanalytics);n.premium.publisher.rasteranalysis&&a.push(e.default.customRoles.geoservices.canUseRasterAnalysis);n.portal.user.runWebTool&&a.push(e.default.customRoles.geoservices.canRunWebTool);
n.features.user.edit&&a.push(e.default.customRoles.features.canEditSum);n.features.user.fullEdit&&a.push(e.default.customRoles.features.canManageSum);n.features.user.manageVersions&&a.push(e.default.customRoles.versioning.canManage);q&&n.opendata.user.designateGroup&&a.push(e.default.customRoles.openData.canDesignate);n.portal.admin.viewUsers&&a.push(h?e.default.customRoles.userAdmin.canViewSumPortal:e.default.customRoles.userAdmin.canViewSum);n.portal.admin.updateUsers&&a.push(h?e.default.customRoles.userAdmin.canUpdateSumPortal:
e.default.customRoles.userAdmin.canUpdateSum);n.portal.admin.deleteUsers&&a.push(h?e.default.customRoles.userAdmin.canDeleteSumPortal:e.default.customRoles.userAdmin.canDeleteSum);n.portal.admin.inviteUsers&&a.push(h?e.default.customRoles.userAdmin.canAddSum:e.default.customRoles.userAdmin.canInviteSum);n.portal.admin.disableUsers&&a.push(h?e.default.customRoles.userAdmin.canDisableSumPortal:e.default.customRoles.userAdmin.canDisableSum);n.portal.admin.changeUserRoles&&a.push(h?e.default.customRoles.userAdmin.canChangeRolesSumPortal:
e.default.customRoles.userAdmin.canChangeRolesSum);n.portal.admin.manageLicenses&&a.push(h?e.default.customRoles.userAdmin.canManageLicensesSumPortal:e.default.customRoles.userAdmin.canManageLicensesSum);n.portal.admin.viewGroups&&a.push(h?e.default.customRoles.groupAdmin.canViewSumPortal:e.default.customRoles.groupAdmin.canViewSum);n.portal.admin.updateGroups&&a.push(h?e.default.customRoles.groupAdmin.canUpdateSumPortal:e.default.customRoles.groupAdmin.canUpdateSum);n.portal.admin.deleteGroups&&
a.push(h?e.default.customRoles.groupAdmin.canDeleteSumPortal:e.default.customRoles.groupAdmin.canDeleteSum);n.portal.admin.reassignGroups&&a.push(h?e.default.customRoles.groupAdmin.canReassignSumPortal:e.default.customRoles.groupAdmin.canReassignSum);n.portal.admin.assignToGroups&&a.push(h?e.default.customRoles.groupAdmin.canAssignSumPortal:e.default.customRoles.groupAdmin.canAssignSum);n.portal.admin.manageEnterpriseGroups&&a.push(e.default.customRoles.groupAdmin.canLink);n.portal.admin.createUpdateCapableGroup&&
a.push(e.default.customRoles.groupAdmin.canCreateUpdateCapable);n.portal.admin.viewItems&&a.push(h?e.default.customRoles.itemAdmin.canViewSumPortal:e.default.customRoles.itemAdmin.canViewSum);n.portal.admin.updateItems&&a.push(h?e.default.customRoles.itemAdmin.canUpdateSumPortal:e.default.customRoles.itemAdmin.canUpdateSum);n.portal.admin.deleteItems&&a.push(h?e.default.customRoles.itemAdmin.canDeleteSumPortal:e.default.customRoles.itemAdmin.canDeleteSum);n.portal.admin.reassignItems&&a.push(h?e.default.customRoles.itemAdmin.canReassignSumPortal:
e.default.customRoles.itemAdmin.canReassignSum);n.portal.admin.updateItemCategorySchema&&a.push(h?e.default.customRoles.itemAdmin.canManageItemCategoriesSumPortal:e.default.customRoles.itemAdmin.canManageItemCategoriesSum);n.portal.admin.updateMemberCategorySchema&&a.push(h?e.default.customRoles.userAdmin.canManageMemberCategoriesSumPortal:e.default.customRoles.userAdmin.canManageMemberCategoriesSum);n.portal.admin.manageCollaborations&&a.push(h?e.default.customRoles.settingsAdmin.canManageCollabPortalSum:
e.default.customRoles.settingsAdmin.canManageCollabSum);n.portal.admin.manageSecurity&&a.push(h?e.default.customRoles.settingsAdmin.canManageSecurityPortalSum:e.default.customRoles.settingsAdmin.canManageSecuritySum);n.portal.admin.manageWebsite&&a.push(h?e.default.customRoles.settingsAdmin.canManageWebsitePortalSum:e.default.customRoles.settingsAdmin.canManageWebsiteSum);n.portal.admin.manageRoles&&a.push(h?e.default.customRoles.settingsAdmin.canManageRolesPortalSum:e.default.customRoles.settingsAdmin.canManageRolesSum);
n.portal.admin.manageServers&&a.push(e.default.customRoles.settingsAdmin.canManageServersSum);n.portal.admin.manageUtilityServices&&a.push(h?e.default.customRoles.settingsAdmin.canManageUtilityServicesPortalSum:e.default.customRoles.settingsAdmin.canManageUtilityServicesSum);n.portal.admin.manageCredits&&a.push(e.default.customRoles.settingsAdmin.canManageCreditsSum);h&&n.portal.admin.manageWebhooks&&a.push(e.default.customRoles.admin.manageWebhooksSum);h&&n.portal.admin.createGPWebhook&&a.push(e.default.customRoles.webhooksAdmin.canCreateGPSum);
n.portal.admin.createReports&&a.push(e.default.customRoles.itemAdmin.canCreateReports);h&&n.portal.publisher.publishServerGPServices&&a.push(e.default.customRoles.items.canPublishServerGPServices);h&&n.portal.publisher.publishKnowledgeGraph&&a.push(e.default.customRoles.items.canPublishKnowledgeGraph);n.portal.admin.shareToOrg&&a.push(h?e.default.customRoles.itemAdmin.canShareToOrgSumPortal:e.default.customRoles.itemAdmin.canShareToOrgSum);n.portal.admin.shareToPublic&&a.push(e.default.customRoles.itemAdmin.canShareToPublicSum);
h||(n.marketplace.admin.manage&&a.push(e.default.customRoles.marketplace.canAdminSum),n.marketplace.admin.purchase&&a.push(e.default.customRoles.marketplace.canPurchaseSum),n.marketplace.admin.startTrial&&a.push(e.default.customRoles.marketplace.canTrialSum));n.premium.publisher.createAdvancedNotebooks&&a.push(e.default.customRoles.geoservices.canUseAdvancedNotebooks);n.premium.publisher.createNotebooks&&a.push(e.default.customRoles.items.canCreateNotebooks);n.premium.publisher.publishNotebooks&&
a.push(e.default.customRoles.items.canPublishNotebooks);n.premium.publisher.scheduleNotebooks&&a.push(e.default.customRoles.itemAdmin.canScheduleNotebooks);return a};m.prototype._initPrivilegesObject=function(){this._applyToAll(!1)};m.prototype._readPrivileges=function(a){var h=this;t.default.isDefined(a)&&a instanceof Array&&a.forEach(function(q){h._readPrivilege(q)})};m.prototype._readPrivilege=function(a){this._applyEffectToAction(!0,a)};m.prototype._hasImageEntitlement=function(){var a,h,q;return!(null===
(q=null===(h=null===(a=d.default.self)||void 0===a?void 0:a.communitySelf)||void 0===h?void 0:h.userLicensedItems)||void 0===q||!q.some(function(n){var k;return null===(k=n.entitlements)||void 0===k?void 0:k.some(function(g){return"image"===g.toLowerCase()})}))};m.prototype._applyEffectToAction=function(a,h){switch(h){case "portal:admin:inviteUsers":this.privilegeObj.portal.admin.inviteUsers=a;break;case "portal:admin:disableUsers":this.privilegeObj.portal.admin.disableUsers=a;break;case "portal:admin:viewUsers":this.privilegeObj.portal.admin.viewUsers=
a;break;case "portal:admin:updateUsers":this.privilegeObj.portal.admin.updateUsers=a;break;case "portal:admin:deleteUsers":this.privilegeObj.portal.admin.deleteUsers=a;break;case "portal:admin:changeUserRoles":this.privilegeObj.portal.admin.changeUserRoles=a;break;case "portal:admin:viewGroups":this.privilegeObj.portal.admin.viewGroups=a;break;case "portal:admin:updateGroups":this.privilegeObj.portal.admin.updateGroups=a;break;case "portal:admin:deleteGroups":this.privilegeObj.portal.admin.deleteGroups=
a;break;case "portal:admin:reassignGroups":this.privilegeObj.portal.admin.reassignGroups=a;break;case "portal:admin:assignToGroups":this.privilegeObj.portal.admin.assignToGroups=a;break;case "portal:admin:manageEnterpriseGroups":this.privilegeObj.portal.admin.manageEnterpriseGroups=a;break;case "portal:admin:viewItems":this.privilegeObj.portal.admin.viewItems=a;break;case "portal:admin:updateItems":this.privilegeObj.portal.admin.updateItems=a;break;case "portal:admin:deleteItems":this.privilegeObj.portal.admin.deleteItems=
a;break;case "portal:admin:reassignItems":this.privilegeObj.portal.admin.reassignItems=a;break;case "portal:admin:manageLicenses":this.privilegeObj.portal.admin.manageLicenses=a;break;case "portal:admin:shareToOrg":this.privilegeObj.portal.admin.shareToOrg=a;break;case "portal:admin:shareToPublic":this.privilegeObj.portal.admin.shareToPublic=a;break;case "portal:admin:createUpdateCapableGroup":this.privilegeObj.portal.admin.createUpdateCapableGroup=a;break;case "portal:admin:updateItemCategorySchema":this.privilegeObj.portal.admin.updateItemCategorySchema=
a;break;case "portal:admin:updateMemberCategorySchema":this.privilegeObj.portal.admin.updateMemberCategorySchema=a;break;case "portal:admin:manageCollaborations":this.privilegeObj.portal.admin.manageCollaborations=a;break;case "portal:admin:manageSecurity":this.privilegeObj.portal.admin.manageSecurity=a;break;case "portal:admin:manageWebsite":this.privilegeObj.portal.admin.manageWebsite=a;break;case "portal:admin:manageRoles":this.privilegeObj.portal.admin.manageRoles=a;break;case "portal:admin:manageServers":this.privilegeObj.portal.admin.manageServers=
a;break;case "portal:admin:manageUtilityServices":this.privilegeObj.portal.admin.manageUtilityServices=a;break;case "portal:admin:manageCredits":this.privilegeObj.portal.admin.manageCredits=a;break;case "portal:admin:manageWebhooks":this.privilegeObj.portal.admin.manageWebhooks=a;break;case "portal:admin:createGPWebhook":this.privilegeObj.portal.admin.createGPWebhook=a;break;case "portal:admin:createReports":this.privilegeObj.portal.admin.createReports=a;break;case "portal:publisher:publishFeatures":this.privilegeObj.portal.publisher.publishFeatures=
a;break;case "portal:publisher:publishTiles":this.privilegeObj.portal.publisher.publishTiles=a;break;case "portal:publisher:publishScenes":this.privilegeObj.portal.publisher.publishScenes=a;break;case "portal:publisher:publishTiledImagery":this.privilegeObj.portal.publisher.publishTiledImagery=a;break;case "portal:publisher:publishDynamicImagery":this.privilegeObj.portal.publisher.publishDynamicImagery=a;break;case "portal:publisher:publishServerServices":this.privilegeObj.portal.publisher.publishServerServices=
a;break;case "portal:publisher:publishServerGPServices":this.privilegeObj.portal.publisher.publishServerGPServices=a;break;case "portal:publisher:bulkPublishFromDataStores":this.privilegeObj.portal.publisher.bulkPublishFromDataStores=a;break;case "portal:publisher:enumerateDataStores":this.privilegeObj.portal.publisher.enumerateDataStores=a;break;case "portal:publisher:registerDataStores":this.privilegeObj.portal.publisher.registerDataStores=a;break;case "portal:publisher:createFeatureWebhook":this.privilegeObj.portal.publisher.createFeatureWebhook=
a;break;case "portal:publisher:createDataPipelines":this.privilegeObj.portal.publisher.createDataPipelines=a;break;case "portal:publisher:publishVideo":this.privilegeObj.portal.publisher.publishVideo=a;break;case "portal:publisher:publishLivestreamVideo":this.privilegeObj.portal.publisher.publishLivestreamVideo=a;break;case "portal:publisher:publishFeeds":this.privilegeObj.portal.publisher.publishFeeds=a;break;case "portal:publisher:publishRealTimeAnalytics":this.privilegeObj.portal.publisher.publishRealTimeAnalytics=
a;break;case "portal:publisher:publishBigDataAnalytics":this.privilegeObj.portal.publisher.publishBigDataAnalytics=a;break;case "portal:user:createGroup":this.privilegeObj.portal.user.createGroup=a;break;case "portal:user:joinGroup":this.privilegeObj.portal.user.joinGroup=a;break;case "portal:user:joinNonOrgGroup":this.privilegeObj.portal.user.joinNonOrgGroup=a;break;case "portal:user:invitePartneredCollaborationMembers":this.privilegeObj.portal.user.invitePartneredCollaborationMembers=a;break;case "portal:user:addExternalMembersToGroup":this.privilegeObj.portal.user.addExternalMembersToGroup=
a;break;case "portal:user:createItem":this.privilegeObj.portal.user.createItem=a;break;case "portal:user:shareToGroup":this.privilegeObj.portal.user.shareToGroup=a;break;case "portal:user:shareToOrg":this.privilegeObj.portal.user.shareToOrg=a;break;case "portal:user:shareToPublic":this.privilegeObj.portal.user.shareToPublic=a;break;case "portal:user:shareGroupToOrg":this.privilegeObj.portal.user.shareGroupToOrg=a;break;case "portal:user:shareGroupToPublic":this.privilegeObj.portal.user.shareGroupToPublic=
a;break;case "portal:user:viewOrgUsers":this.privilegeObj.portal.user.viewOrgUsers=a;break;case "portal:user:viewOrgItems":this.privilegeObj.portal.user.viewOrgItems=a;break;case "portal:user:viewOrgGroups":this.privilegeObj.portal.user.viewOrgGroups=a;break;case "portal:user:viewTracks":this.privilegeObj.portal.user.viewTracks=a;break;case "portal:user:reassignItems":this.privilegeObj.portal.user.reassignItems=a;break;case "portal:user:receiveItems":this.privilegeObj.portal.user.receiveItems=a;break;
case "portal:user:runWebTool":this.privilegeObj.portal.user.runWebTool=a;break;case "features:user:edit":this.privilegeObj.features.user.edit=a;break;case "features:user:fullEdit":this.privilegeObj.features.user.fullEdit=a;break;case "features:user:manageVersions":this.privilegeObj.features.user.manageVersions;break;case "features:user:editIndoorsSpaces":this.privilegeObj.features.user.editIndoorsSpaces;break;case "opendata:user:openDataAdmin":this.privilegeObj.opendata.user.openDataAdmin=a;break;
case "opendata:user:designateGroup":this.privilegeObj.opendata.user.designateGroup=a;break;case "premium:user:geocode":this.privilegeObj.premium.user.geocode=a;break;case "premium:user:networkanalysis":this.privilegeObj.premium.user.networkanalysis=a;break;case "premium:user:spatialanalysis":this.privilegeObj.premium.user.spatialanalysis=a;break;case "premium:user:geoenrichment":this.privilegeObj.premium.user.geoenrichment=a;break;case "premium:user:demographics":this.privilegeObj.premium.user.demographics=
a;break;case "premium:user:featurereport":this.privilegeObj.premium.user.featurereport=a;break;case "premium:publisher:geoanalytics":this.privilegeObj.premium.publisher.geoanalytics=a;break;case "premium:publisher:rasteranalysis":this.privilegeObj.premium.publisher.rasteranalysis=a;break;case "marketplace:admin:purchase":this.privilegeObj.marketplace.admin.purchase=a;break;case "marketplace:admin:manage":this.privilegeObj.marketplace.admin.manage=a;break;case "marketplace:admin:startTrial":this.privilegeObj.marketplace.admin.startTrial=
a;break;case "premium:publisher:createNotebooks":this.privilegeObj.premium.publisher.createNotebooks=a;break;case "premium:publisher:scheduleNotebooks":this.privilegeObj.premium.publisher.scheduleNotebooks=a;break;case "premium:publisher:publishNotebooks":this.privilegeObj.premium.publisher.publishNotebooks=a;break;case "premium:publisher:createAdvancedNotebooks":this.privilegeObj.premium.publisher.createAdvancedNotebooks=a}};m.prototype._applyToAll=function(a){this.privilegeObj.portal.admin.inviteUsers=
a;this.privilegeObj.portal.admin.disableUsers=a;this.privilegeObj.portal.admin.viewUsers=a;this.privilegeObj.portal.admin.updateUsers=a;this.privilegeObj.portal.admin.deleteUsers=a;this.privilegeObj.portal.admin.changeUserRoles=a;this.privilegeObj.portal.admin.viewGroups=a;this.privilegeObj.portal.admin.updateGroups=a;this.privilegeObj.portal.admin.deleteGroups=a;this.privilegeObj.portal.admin.reassignGroups=a;this.privilegeObj.portal.admin.assignToGroups=a;this.privilegeObj.portal.admin.manageEnterpriseGroups=
a;this.privilegeObj.portal.admin.viewItems=a;this.privilegeObj.portal.admin.updateItems=a;this.privilegeObj.portal.admin.deleteItems=a;this.privilegeObj.portal.admin.reassignItems=a;this.privilegeObj.portal.admin.manageLicenses=a;this.privilegeObj.portal.admin.shareToOrg=a;this.privilegeObj.portal.admin.shareToPublic=a;this.privilegeObj.portal.admin.createUpdateCapableGroup=a;this.privilegeObj.portal.admin.updateItemCategorySchema=a;this.privilegeObj.portal.admin.updateMemberCategorySchema=a;this.privilegeObj.portal.admin.manageCollaborations=
a;this.privilegeObj.portal.admin.manageSecurity=a;this.privilegeObj.portal.admin.manageWebsite=a;this.privilegeObj.portal.admin.manageRoles=a;this.privilegeObj.portal.admin.manageServers=a;this.privilegeObj.portal.admin.manageUtilityServices=a;this.privilegeObj.portal.admin.manageCredits=a;this.privilegeObj.portal.admin.manageWebhooks=a;this.privilegeObj.portal.admin.createGPWebhook=a;this.privilegeObj.portal.admin.createReports=a;this.privilegeObj.portal.publisher.publishFeatures=a;this.privilegeObj.portal.publisher.publishTiles=
a;this.privilegeObj.portal.publisher.publishScenes=a;this.privilegeObj.portal.publisher.publishServerServices=a;this.privilegeObj.portal.publisher.publishServerGPServices=a;this.privilegeObj.portal.publisher.publishTiledImagery=a;this.privilegeObj.portal.publisher.publishDynamicImagery=a;this.privilegeObj.portal.publisher.publishKnowledgeGraph=a;this.privilegeObj.portal.publisher.registerDataStores=a;this.privilegeObj.portal.publisher.bulkPublishFromDataStores=a;this.privilegeObj.portal.publisher.enumerateDataStores=
a;this.privilegeObj.portal.publisher.createFeatureWebhook=a;this.privilegeObj.portal.publisher.createDataPipelines=a;this.privilegeObj.portal.user.createGroup=a;this.privilegeObj.portal.user.joinGroup=a;this.privilegeObj.portal.user.joinNonOrgGroup=a;this.privilegeObj.portal.user.invitePartneredCollaborationMembers=a;this.privilegeObj.portal.user.addExternalMembersToGroup=a;this.privilegeObj.portal.user.createItem=a;this.privilegeObj.portal.user.reassignItems=a;this.privilegeObj.portal.user.receiveItems=
a;this.privilegeObj.portal.user.runWebTool=a;this.privilegeObj.portal.user.shareToGroup=a;this.privilegeObj.portal.user.shareToOrg=a;this.privilegeObj.portal.user.shareToPublic=a;this.privilegeObj.portal.user.shareGroupToOrg=a;this.privilegeObj.portal.user.shareGroupToPublic=a;this.privilegeObj.portal.user.viewOrgUsers=a;this.privilegeObj.portal.user.viewOrgItems=a;this.privilegeObj.portal.user.viewOrgGroups=a;this.privilegeObj.portal.user.viewTracks=a;this.privilegeObj.features.user.edit=a;this.privilegeObj.features.user.fullEdit=
a;this.privilegeObj.features.user.manageVersions=a;this.privilegeObj.features.user.editIndoorsSpaces=a;this.privilegeObj.opendata.user.openDataAdmin=a;this.privilegeObj.opendata.user.designateGroup=a;this.privilegeObj.premium.user.geocode=a;this.privilegeObj.premium.user.networkanalysis=a;this.privilegeObj.premium.user.spatialanalysis=a;this.privilegeObj.premium.user.geoenrichment=a;this.privilegeObj.premium.user.demographics=a;this.privilegeObj.premium.user.featurereport=a;this.privilegeObj.premium.publisher.geoanalytics=
a;this.privilegeObj.premium.publisher.rasteranalysis=a;this.privilegeObj.premium.publisher.createNotebooks=a;this.privilegeObj.premium.publisher.scheduleNotebooks=a;this.privilegeObj.premium.publisher.publishNotebooks=a;this.privilegeObj.premium.publisher.createAdvancedNotebooks=a;this.privilegeObj.portal.publisher.publishVideo=a;this.privilegeObj.portal.publisher.publishLivestreamVideo=a;this.privilegeObj.portal.publisher.publishFeeds=a;this.privilegeObj.portal.publisher.publishRealTimeAnalytics=
a;this.privilegeObj.portal.publisher.publishBigDataAnalytics=a;this.privilegeObj.marketplace.admin.purchase=a;this.privilegeObj.marketplace.admin.manage=a;this.privilegeObj.marketplace.admin.startTrial=a};m.prototype._buildPrivilegesArray=function(){var a=[];!0===this.privilegeObj.portal.admin.inviteUsers&&a.push("portal:admin:inviteUsers");!0===this.privilegeObj.portal.admin.disableUsers&&a.push("portal:admin:disableUsers");!0===this.privilegeObj.portal.admin.viewUsers&&a.push("portal:admin:viewUsers");
!0===this.privilegeObj.portal.admin.updateUsers&&a.push("portal:admin:updateUsers");!0===this.privilegeObj.portal.admin.deleteUsers&&a.push("portal:admin:deleteUsers");!0===this.privilegeObj.portal.admin.changeUserRoles&&a.push("portal:admin:changeUserRoles");!0===this.privilegeObj.portal.admin.viewGroups&&a.push("portal:admin:viewGroups");!0===this.privilegeObj.portal.admin.updateGroups&&a.push("portal:admin:updateGroups");!0===this.privilegeObj.portal.admin.deleteGroups&&a.push("portal:admin:deleteGroups");
!0===this.privilegeObj.portal.admin.reassignGroups&&a.push("portal:admin:reassignGroups");!0===this.privilegeObj.portal.admin.assignToGroups&&a.push("portal:admin:assignToGroups");!0===this.privilegeObj.portal.admin.manageEnterpriseGroups&&a.push("portal:admin:manageEnterpriseGroups");!0===this.privilegeObj.portal.admin.viewItems&&a.push("portal:admin:viewItems");!0===this.privilegeObj.portal.admin.updateItems&&a.push("portal:admin:updateItems");!0===this.privilegeObj.portal.admin.deleteItems&&a.push("portal:admin:deleteItems");
!0===this.privilegeObj.portal.admin.reassignItems&&a.push("portal:admin:reassignItems");!0===this.privilegeObj.portal.admin.manageLicenses&&a.push("portal:admin:manageLicenses");!0===this.privilegeObj.portal.admin.shareToOrg&&a.push("portal:admin:shareToOrg");!0===this.privilegeObj.portal.admin.shareToPublic&&a.push("portal:admin:shareToPublic");!0===this.privilegeObj.portal.admin.createUpdateCapableGroup&&a.push("portal:admin:createUpdateCapableGroup");!0===this.privilegeObj.portal.admin.updateItemCategorySchema&&
a.push("portal:admin:updateItemCategorySchema");!0===this.privilegeObj.portal.admin.updateMemberCategorySchema&&a.push("portal:admin:updateMemberCategorySchema");!0===this.privilegeObj.portal.admin.manageCollaborations&&a.push("portal:admin:manageCollaborations");!0===this.privilegeObj.portal.admin.manageSecurity&&a.push("portal:admin:manageSecurity");!0===this.privilegeObj.portal.admin.manageWebsite&&a.push("portal:admin:manageWebsite");!0===this.privilegeObj.portal.admin.manageRoles&&a.push("portal:admin:manageRoles");
!0===this.privilegeObj.portal.admin.manageServers&&a.push("portal:admin:manageServers");!0===this.privilegeObj.portal.admin.manageUtilityServices&&a.push("portal:admin:manageUtilityServices");!0===this.privilegeObj.portal.admin.manageCredits&&a.push("portal:admin:manageCredits");!0===this.privilegeObj.portal.admin.manageWebhooks&&a.push("portal:admin:manageWebhooks");!0===this.privilegeObj.portal.admin.createGPWebhook&&a.push("portal:admin:createGPWebhook");!0===this.privilegeObj.portal.admin.createReports&&
a.push("portal:admin:createReports");!0===this.privilegeObj.portal.publisher.publishFeatures&&a.push("portal:publisher:publishFeatures");!0===this.privilegeObj.portal.publisher.publishTiles&&a.push("portal:publisher:publishTiles");!0===this.privilegeObj.portal.publisher.publishScenes&&a.push("portal:publisher:publishScenes");!0===this.privilegeObj.portal.publisher.publishTiledImagery&&a.push("portal:publisher:publishTiledImagery");!0===this.privilegeObj.portal.publisher.publishDynamicImagery&&a.push("portal:publisher:publishDynamicImagery");
!0===this.privilegeObj.portal.publisher.publishKnowledgeGraph&&a.push("portal:publisher:publishKnowledgeGraph");!0===this.privilegeObj.portal.publisher.publishServerServices&&a.push("portal:publisher:publishServerServices");!0===this.privilegeObj.portal.publisher.publishServerGPServices&&a.push("portal:publisher:publishServerGPServices");!0===this.privilegeObj.portal.publisher.bulkPublishFromDataStores&&a.push("portal:publisher:bulkPublishFromDataStores");!0===this.privilegeObj.portal.publisher.enumerateDataStores&&
a.push("portal:publisher:enumerateDataStores");!0===this.privilegeObj.portal.publisher.registerDataStores&&a.push("portal:publisher:registerDataStores");!0===this.privilegeObj.portal.publisher.createFeatureWebhook&&a.push("portal:publisher:createFeatureWebhook");!0===this.privilegeObj.portal.publisher.createDataPipelines&&a.push("portal:publisher:createDataPipelines");!0===this.privilegeObj.portal.publisher.publishVideo&&a.push("portal:publisher:publishVideo");!0===this.privilegeObj.portal.publisher.publishLivestreamVideo&&
a.push("portal:publisher:publishLivestreamVideo");!0===this.privilegeObj.portal.publisher.publishFeeds&&a.push("portal:publisher:publishFeeds");!0===this.privilegeObj.portal.publisher.publishRealTimeAnalytics&&a.push("portal:publisher:publishRealTimeAnalytics");!0===this.privilegeObj.portal.publisher.publishBigDataAnalytics&&a.push("portal:publisher:publishBigDataAnalytics");!0===this.privilegeObj.portal.user.createGroup&&a.push("portal:user:createGroup");!0===this.privilegeObj.portal.user.joinGroup&&
a.push("portal:user:joinGroup");!0===this.privilegeObj.portal.user.joinNonOrgGroup&&a.push("portal:user:joinNonOrgGroup");!0===this.privilegeObj.portal.user.invitePartneredCollaborationMembers&&a.push("portal:user:invitePartneredCollaborationMembers");!0===this.privilegeObj.portal.user.addExternalMembersToGroup&&a.push("portal:user:addExternalMembersToGroup");!0===this.privilegeObj.portal.user.createItem&&a.push("portal:user:createItem");!0===this.privilegeObj.portal.user.reassignItems&&a.push("portal:user:reassignItems");
!0===this.privilegeObj.portal.user.receiveItems&&a.push("portal:user:receiveItems");!0===this.privilegeObj.portal.user.runWebTool&&a.push("portal:user:runWebTool");!0===this.privilegeObj.portal.user.shareToGroup&&a.push("portal:user:shareToGroup");!0===this.privilegeObj.portal.user.shareToOrg&&a.push("portal:user:shareToOrg");!0===this.privilegeObj.portal.user.shareToPublic&&a.push("portal:user:shareToPublic");!0===this.privilegeObj.portal.user.shareGroupToOrg&&a.push("portal:user:shareGroupToOrg");
!0===this.privilegeObj.portal.user.shareGroupToPublic&&a.push("portal:user:shareGroupToPublic");!0===this.privilegeObj.portal.user.viewOrgUsers&&a.push("portal:user:viewOrgUsers");!0===this.privilegeObj.portal.user.viewOrgItems&&a.push("portal:user:viewOrgItems");!0===this.privilegeObj.portal.user.viewOrgGroups&&a.push("portal:user:viewOrgGroups");!0===this.privilegeObj.portal.user.viewTracks&&a.push("portal:user:viewTracks");!0===this.privilegeObj.features.user.edit&&a.push("features:user:edit");
!0===this.privilegeObj.features.user.fullEdit&&a.push("features:user:fullEdit");!0===this.privilegeObj.features.user.manageVersions&&a.push("features:user:manageVersions");!0===this.privilegeObj.features.user.editIndoorsSpaces&&a.push("features:user:editIndoorsSpaces");!0===this.privilegeObj.opendata.user.openDataAdmin&&a.push("opendata:user:openDataAdmin");!0===this.privilegeObj.opendata.user.designateGroup&&a.push("opendata:user:designateGroup");!0===this.privilegeObj.premium.user.geocode&&a.push("premium:user:geocode");
!0===this.privilegeObj.premium.user.networkanalysis&&a.push("premium:user:networkanalysis");!0===this.privilegeObj.premium.user.spatialanalysis&&a.push("premium:user:spatialanalysis");!0===this.privilegeObj.premium.user.geoenrichment&&a.push("premium:user:geoenrichment");!0===this.privilegeObj.premium.user.demographics&&a.push("premium:user:demographics");!0===this.privilegeObj.premium.user.featurereport&&a.push("premium:user:featurereport");!0===this.privilegeObj.premium.publisher.geoanalytics&&
a.push("premium:publisher:geoanalytics");!0===this.privilegeObj.premium.publisher.rasteranalysis&&a.push("premium:publisher:rasteranalysis");!0===this.privilegeObj.premium.publisher.createNotebooks&&a.push("premium:publisher:createNotebooks");!0===this.privilegeObj.premium.publisher.scheduleNotebooks&&a.push("premium:publisher:scheduleNotebooks");!0===this.privilegeObj.premium.publisher.publishNotebooks&&a.push("premium:publisher:publishNotebooks");!0===this.privilegeObj.premium.publisher.createAdvancedNotebooks&&
a.push("premium:publisher:createAdvancedNotebooks");!0===this.privilegeObj.marketplace.admin.purchase&&a.push("marketplace:admin:purchase");!0===this.privilegeObj.marketplace.admin.manage&&a.push("marketplace:admin:manage");!0===this.privilegeObj.marketplace.admin.startTrial&&a.push("marketplace:admin:startTrial");return a};return m}(u.default)})},"arcgisonline/sharing/dijit/_LevelAwareMixin":function(){define(["require","exports","tslib"],function(f,B,l){Object.defineProperty(B,"__esModule",{value:!0});
B.LevelAwareInfo=void 0;f="portal:user:joinGroup portal:user:viewOrgGroups portal:user:viewOrgItems portal:user:viewOrgUsers premium:user:demographics premium:user:featurereport premium:user:geocode premium:user:networkanalysis".split(" ");var d=l.__spreadArray(["features:user:edit"],f,!0);B.LevelAwareInfo={SYSTEM_ROLES:{VIEWER:"iAAAAAAAAAAAAAAA",DATA_EDITOR:"iBBBBBBBBBBBBBBB",FACILITATOR:"iCCCCCCCCCCCCCCC",PRIVILEGES:{iAAAAAAAAAAAAAAA:f,iBBBBBBBBBBBBBBB:d,iCCCCCCCCCCCCCCC:l.__spreadArray("portal:admin:createUpdateCapableGroup portal:user:invitePartneredCollaborationMembers portal:user:addExternalMembersToGroup portal:publisher:publishFeatures portal:publisher:publishTiles portal:publisher:publishServerServices portal:user:createGroup portal:user:createItem portal:user:joinNonOrgGroup portal:user:shareGroupToOrg portal:user:shareGroupToPublic portal:user:shareToGroup portal:user:shareToOrg portal:user:shareToPublic portal:user:viewOrgUsers portal:user:viewOrgItems portal:user:viewOrgGroups premium:user:geoenrichment premium:user:spatialanalysis premium:publisher:geoanalytics premium:publisher:rasteranalysis portal:publisher:bulkPublishFromDataStores portal:publisher:enumerateDataStores portal:publisher:registerDataStores".split(" "),
d,!0)}},LICENSE_LEVELS:{ONE:"1",ONE_PLUS_EDIT:"11",TWO:"2"}};l=function(){return function(){this.SYSTEM_ROLES=B.LevelAwareInfo.SYSTEM_ROLES;this.LICENSE_LEVELS=B.LevelAwareInfo.LICENSE_LEVELS}}();B.default=l})},"arcgisonline/pages/utils/enterprise":function(){define(["require","exports","tslib"],function(f,B,l){Object.defineProperty(B,"__esModule",{value:!0});var d="extentService footerLinks gcsBasemapService httpsDomains longTokenExpiration restrictOrganizationPageToAdmin searchArcGISOnlineEnabled showCreateDashboard showInAppLauncher sceneViewerEnabled surveyUrl tokenExpiration webAppBuilderEnabled configurePortalAGOEnv portalAGOConfigEnabled portalLivingAtlasConfigEnabled showSocialMediaLinks iotViewerUrl".split(" ");
B.default={copyPortalConfigProperties:function(c,u){if(!c)return u;var t=l.__assign({},u);d.forEach(function(e){void 0!==c[e]&&(t[e]=c[e])});return t}}})},"arcgisonline/pages/utils/a11y":function(){define(["require","exports"],function(f,B){function l(c){var u,t,e,r=null!==(u=null===c||void 0===c?void 0:c.parent)&&void 0!==u?u:document.body;u=null!==(t=null===c||void 0===c?void 0:c.id)&&void 0!==t?t:"a11y-live-region";c=null!==(e=null===c||void 0===c?void 0:c.mode)&&void 0!==e?e:"polite";e=r.querySelector("#".concat(u));
e||(e=document.createElement("div"),e.id=u,e.classList.add("screen-readers-only"),e.setAttribute("role","alert"),e.setAttribute("aria-live",c),e.setAttribute("aria-atomic","true"),e.textContent="",r.appendChild(e));window.addEventListener("liveRegionUpdate",function(m){d(m.detail)});return e}function d(c,u){if(u=document.body.querySelector("#".concat(u?u:"a11y-live-region")))u.textContent=c}Object.defineProperty(B,"__esModule",{value:!0});B.postToLiveRegion=B.setupLiveRegion=void 0;B.setupLiveRegion=
l;B.postToLiveRegion=d;B.default={setupLiveRegion:l,postToLiveRegion:d}})},"arcgisonline/pages/utils/accessNotice":function(){define("require exports tslib ../../esriGeowConfig ./storage ../../sharing/util".split(" "),function(f,B,l,d,c,u){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);return function(){function t(){}t.checkSettings=function(){return u.default.request({url:"".concat(d.default.restBaseUrl,"portals/self/settings"),content:{f:"json"}}).then(function(e){var r;if(null===
(r=e.anonymousAccessNotice)||void 0===r?0:r.enabled){if(c.default.getCookie("ago_conditions_accepted"))return{redirected:!1,response:e};window.location.href="".concat(d.default.baseUrl,"pages/Account/accept_conditions.html#client_id\x3darcgisonline\x26redirect_uri\x3d").concat(window.location.href);return{redirected:!0}}return{redirected:!1,response:e}},function(){return{redirected:!1}})};return t}()})},"arcgisonline/pages/utils/signin":function(){define("require exports tslib ../../esriGeowConfig ./storage ./queryHandler esri/IdentityManager esri/arcgis/OAuthInfo dojo/_base/kernel dojo/Deferred".split(" "),
function(f,B,l,d,c,u,t,e,r,m){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importStar(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);return function(){function a(){}a.getPortalUrl=function(){var h,q=d.default.restBaseUrl.substring(0,d.default.restBaseUrl.indexOf("/sharing/rest")).replace("http://","https://");if(null===(h=d.default.self)||void 0===h?0:h.portalHostname)q="https://".concat(d.default.self.portalHostname);return q};a.setupOAuthInfo=
function(h){var q={appId:a.getClientId(),portalUrl:a.getPortalUrl(),locale:r.default.locale,popup:!1};h&&(q.forceLogin=h);h=new e.default(q);a.esriId.registerOAuthInfos([h]);a.esriId.useSignInPage=!1};a.checkSignInStatus=function(){var h=new m.default;a.setupOAuthInfo(!1);var q="".concat(a.getPortalUrl(),"/sharing");a.esriId.checkSignInStatus(q).then(function(n){n&&(d.default.userInfo=l.__assign(l.__assign({},d.default.userInfo||{}),{username:n.userId,token:n.token,credential:n}));h.resolve(n)},function(){h.resolve(null)});
return h};a.getCredential=function(h,q){var n=new m.default;a.setupOAuthInfo(h);h="".concat(a.getPortalUrl(),"/sharing");a.esriId.getCredential(h,q).then(function(k){n.resolve(k)},function(){n.resolve(null)});return n};a.isValidReturnUrl=function(h,q){return h?this.isValidPortalReturnUrl(q):this.isValidOnlineReturnUrl(q)};a.isValidOnlineReturnUrl=function(h){var q=decodeURI(h),n=a.getHostName(window.location.href);h=this.getHostName(q);var k=0===q.indexOf("http://")||0===q.indexOf("https://"),g=k&&
h?h.lastIndexOf(".arcgis.com"):-1,b=k&&h?h.lastIndexOf(".esri.com"):-1,x=k&&h?h.lastIndexOf(n):-1;q=-1<q.indexOf("/sharing/proxy");g=-1<g&&g+11-1===h.length-1;b=-1<b&&b+9-1===h.length-1;n=-1<x&&x+n.length-1===h.length-1;return k&&h&&(g||b||n)&&!q};a.isValidPortalReturnUrl=function(h){h=decodeURI(h);var q=a.getDomainName(window.location.hostname),n=a.getDomainName(this.getHostName(h));return(0===h.indexOf("http://")||0===h.indexOf("https://"))&&n&&n===q};a.getHostName=function(h){h=h.match(/:\/\/(.[^/:]+)/i);
return null!==h&&1<h.length&&"string"===typeof h[1]&&0<h[1].length?h[1]:null};a.getDomainName=function(h){return h.substring(h.lastIndexOf(".",h.lastIndexOf(".")-1)+1)};a.getClientId=function(){try{return c.default.getLocalStorageItem(a.clientIdStorageKey)||c.default.getSessionStorageItem(a.clientIdStorageKey)||a.clientIds.ArcGISOnline}catch(h){return a.clientIds.ArcGISOnline}};a.getStoredClientId=function(){return c.default.getLocalStorageItem(a.clientIdStorageKey)||c.default.getSessionStorageItem(a.clientIdStorageKey)};
a.removeStoredCredential=function(){c.default.removeLocalStorageItem(a.credentialStorageKey);c.default.removeSessionStorageItem(a.credentialStorageKey)};a.checkForOrgUserOnOnlineBaseHostAndRedirect=function(h){var q=d.default.isDebug,n=h.isPortal,k=h.user,g=h.urlKey,b=h.customBaseUrl;k=null===k||void 0===k?void 0:k.orgId;h=window.location.host===h.portalHostname;var x=!!g,v=a.getClientId()===a.clientIds.ArcGISOnline;!q&&!n&&k&&h&&x&&v&&(window.location.href=window.location.href.replace(window.location.host,
"".concat(g,".").concat(b)))};a.getFreshToken=function(){return l.__awaiter(this,void 0,void 0,function(){var h;return l.__generator(this,function(q){switch(q.label){case 0:return q.trys.push([0,2,,3]),[4,t.default._getPlatformSelf(a.getPortalUrl(),a.getClientId())];case 1:return h=q.sent(),[2,null===h||void 0===h?void 0:h.token];case 2:return q.sent(),[3,3];case 3:return[2]}})})};a.authorizeWithoutForcedLogin=function(h,q,n){var k=a.getClientId();h={portalUrl:a.getPortalUrl(),returnUrl:h,useLandingPage:!1,
initialAdmin:!0,clientId:k};n=n||d.default.baseUrl;k={client_id:k,display:"default",response_type:"token",state:JSON.stringify(h),expiration:d.default.expiration||20160,locale:document.documentElement.lang,redirect_uri:"".concat(n.replace("http:","https:"),"accountswitcher-callback.html"),force_login:!1,hideCancel:!0,showSignupOption:!1,canHandleCrossOrgSignIn:!0,signuptype:"esri",redirectToUserOrgUrl:!0};q=q?"".concat(q,"/sharing/rest/"):d.default.restBaseUrl;q="".concat(q.replace(/^http:/i,"https:"),
"oauth2/authorize");q="".concat(q,"?").concat(u.objectToQuery(k));document.location.replace(q)};a.esriId=t.default;a.clientIds={ArcGISOnline:"arcgisonline",ArcGISNotebooks:"arcgisnotebooks",GeoanalyticsEngine:"geoanalyticsengine"};a.clientIdStorageKey="portalAppClientId";a.credentialStorageKey="esriJSAPIOAuth";return a}()})},"dijit/_base":function(){define("./main ./a11y ./WidgetSet ./_base/focus ./_base/manager ./_base/place ./_base/popup ./_base/scroll ./_base/sniff ./_base/typematic ./_base/wai ./_base/window".split(" "),
function(f){return f._base})},"dijit/WidgetSet":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","./registry"],function(f,B,l,d){var c=B("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0},add:function(u){if(this._hash[u.id])throw Error("Tried to register widget with id\x3d\x3d"+u.id+" but that id is already registered");this._hash[u.id]=u;this.length++},remove:function(u){this._hash[u]&&(delete this._hash[u],this.length--)},forEach:function(u,
t){t=t||l.global;var e=0,r;for(r in this._hash)u.call(t,this._hash[r],e++,this._hash);return this},filter:function(u,t){t=t||l.global;var e=new c,r=0,m;for(m in this._hash){var a=this._hash[m];u.call(t,a,r++,this._hash)&&e.add(a)}return e},byId:function(u){return this._hash[u]},byClass:function(u){var t=new c,e;for(e in this._hash){var r=this._hash[e];r.declaredClass==u&&t.add(r)}return t},toArray:function(){var u=[],t;for(t in this._hash)u.push(this._hash[t]);return u},map:function(u,t){return f.map(this.toArray(),
u,t)},every:function(u,t){t=t||l.global;var e=0,r;for(r in this._hash)if(!u.call(t,this._hash[r],e++,this._hash))return!1;return!0},some:function(u,t){t=t||l.global;var e=0,r;for(r in this._hash)if(u.call(t,this._hash[r],e++,this._hash))return!0;return!1}});f.forEach("forEach filter byClass map every some".split(" "),function(u){d[u]=c.prototype[u]});return c})},"dijit/_base/focus":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/topic dojo/_base/window ../focus ../selection ../main".split(" "),
function(f,B,l,d,c,u,t,e){u.focus=function(r){if(r){var m="node"in r?r.node:r,a=r.bookmark;r=r.openedForWindow;var h=a?a.isCollapsed:!1;if(m){var q="iframe"==m.tagName.toLowerCase()?m.contentWindow:m;if(q&&q.focus)try{q.focus()}catch(n){}u._onFocusNode(m)}if(a&&c.withGlobal(r||c.global,e.isCollapsed)&&!h){r&&r.focus();try{c.withGlobal(r||c.global,e.moveToBookmark,null,[a])}catch(n){}}}};u.watch("curNode",function(r,m,a){e._curFocus=a;e._prevFocus=m;a&&d.publish("focusNode",a)});u.watch("activeStack",
function(r,m,a){e._activeStack=a});u.on("widget-blur",function(r,m){d.publish("widgetBlur",r,m)});u.on("widget-focus",function(r,m){d.publish("widgetFocus",r,m)});l.mixin(e,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return e.getBookmark().isCollapsed},getBookmark:function(){return(c.global==window?t:new t.SelectionManager(c.global)).getBookmark()},moveToBookmark:function(r){return(c.global==window?t:new t.SelectionManager(c.global)).moveToBookmark(r)},getFocus:function(r,m){r=!u.curNode||
r&&B.isDescendant(u.curNode,r.domNode)?e._prevFocus:u.curNode;return{node:r,bookmark:r&&r==u.curNode&&c.withGlobal(m||c.global,e.getBookmark),openedForWindow:m}},_activeStack:[],registerIframe:function(r){return u.registerIframe(r)},unregisterIframe:function(r){r&&r.remove()},registerWin:function(r,m){return u.registerWin(r,m)},unregisterWin:function(r){r&&r.remove()}});return e})},"dijit/_base/place":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],function(f,
B,l,d,c){var u={getViewport:function(){return l.getBox()}};u.placeOnScreen=d.at;u.placeOnScreenAroundElement=function(t,e,r,m){if(B.isArray(r))var a=r;else{a=[];for(var h in r)a.push({aroundCorner:h,corner:r[h]})}return d.around(t,e,a,!0,m)};u.placeOnScreenAroundNode=u.placeOnScreenAroundElement;u.placeOnScreenAroundRectangle=u.placeOnScreenAroundElement;u.getPopupAroundAlignment=function(t,e){var r={};f.forEach(t,function(m){var a=e;switch(m){case "after":r[e?"BR":"BL"]=e?"BL":"BR";break;case "before":r[e?
"BL":"BR"]=e?"BR":"BL";break;case "below-alt":a=!a;case "below":r[a?"BL":"BR"]=a?"TL":"TR";r[a?"BR":"BL"]=a?"TR":"TL";break;case "above-alt":a=!a;default:r[a?"TL":"TR"]=a?"BL":"BR",r[a?"TR":"TL"]=a?"BR":"BL"}});return r};B.mixin(c,u);return c})},"dijit/_base/popup":function(){define(["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(f,B,l){var d=l._createWrapper;l._createWrapper=function(u){u.declaredClass||(u={_popupWrapper:u.parentNode&&f.contains(u.parentNode,"dijitPopup")?
u.parentNode:null,domNode:u,destroy:function(){},ownerDocument:u.ownerDocument,ownerDocumentBody:B.body(u.ownerDocument)});return d.call(this,u)};var c=l.open;l.open=function(u){if(u.orient&&"string"!=typeof u.orient&&!("length"in u.orient)){var t=[],e;for(e in u.orient)t.push({aroundCorner:e,corner:u.orient[e]});u.orient=t}return c.call(this,u)};return l})},"dijit/_base/scroll":function(){define(["dojo/window","../main"],function(f,B){B.scrollIntoView=function(l,d){f.scrollIntoView(l,d)}})},"dijit/_base/sniff":function(){define(["dojo/uacss"],
function(){})},"dijit/_base/typematic":function(){define(["../typematic"],function(){})},"dijit/_base/wai":function(){define(["dojo/dom-attr","dojo/_base/lang","../main","../hccss"],function(f,B,l){B.mixin(l,{hasWaiRole:function(d,c){d=this.getWaiRole(d);return c?-1<d.indexOf(c):0<d.length},getWaiRole:function(d){return B.trim((f.get(d,"role")||"").replace("wairole:",""))},setWaiRole:function(d,c){f.set(d,"role",c)},removeWaiRole:function(d,c){var u=f.get(d,"role");u&&(c?(c=B.trim((" "+u+" ").replace(" "+
c+" "," ")),f.set(d,"role",c)):d.removeAttribute("role"))},hasWaiState:function(d,c){return d.hasAttribute?d.hasAttribute("aria-"+c):!!d.getAttribute("aria-"+c)},getWaiState:function(d,c){return d.getAttribute("aria-"+c)||""},setWaiState:function(d,c,u){d.setAttribute("aria-"+c,u)},removeWaiState:function(d,c){d.removeAttribute("aria-"+c)}});return l})},"dijit/_base/window":function(){define(["dojo/window","../main"],function(f,B){B.getDocumentWindow=function(l){return f.get(l)}})},"xstyle/core/load-css":function(){define([],
function(){function f(u){if(d.createStyleSheet){var t=d.createStyleSheet();t.cssText=u;return t.owningElement}t=d.createElement("style");t.setAttribute("type","text/css");t.appendChild(d.createTextNode(u));c.appendChild(t);return t}function B(u,t,e){var r=l[u];if(r)return m=f(r),t(m);var m=d.createElement("link");m.type="text/css";m.rel="stylesheet";m.href=u;var a=!e||!1!==e.wait;u=(u=navigator.userAgent.match(/AppleWebKit\/(\d+\.?\d*)/))&&+u[1];if(null===m.onload&&!(536>u))m.onload=function(){m.onload=
null;m.onerror=null;a&&t(m)},m.onerror=function(){a&&t(m)};else if(a)var h=setInterval(function(){m.style&&(clearInterval(h),t(m))},15);(c||d.getElementsByTagName("head")[0]).appendChild(m);a||t(m)}var l="undefined"==typeof _css_cache?{}:_css_cache,d=document,c=d.head;B.insertCss=f;return B})},"esri/main":function(){define(["./kernel","dojo/i18n!./nls/jsapi","./config","./sniff"],function(f,B){f.bundle=B;return f})},"arcgisonline/base":function(){define(["dojo","dijit","dojox","dojo/i18n!arcgisonline/nls/arcgisonline",
"dojo/require!esri/main,esri/utils,arcgisonline/init,arcgisonline/sharing/dijit/SiteHeader,arcgisonline/sharing/dijit/SiteFooter,arcgisonline/sharing/dijit/SiteFooterMap,arcgisonline/sharing/dijit/SignUpInternal,dijit/form/Form,arcgisonline/sharing/geow/Account,arcgisonline/sharing/dijit/HelpManager,dojo/date/locale,dojox/widget/Rotator,dojox/widget/AutoRotator,dojox/widget/rotator/Controller,dojox/widget/rotator/Fade,dijit/layout/StackController,dojo/cookie,dojo/json,arcgisonline/sharing/dijit/TextMenu,arcgisonline/sharing/util,dojo/topic,dijit/_base,dijit/form/DropDownButton,dijit/form/ComboButton,dijit/form/ToggleButton,dijit/form/RadioButton,dijit/PopupMenuItem,dijit/_Contained,dijit/_Container,dijit/_WidgetBase,dijit/main,dojo/Stateful,dojo/date/locale,arcgisonline/sharing/dijit/Gallery,arcgisonline/sharing/util,arcgisonline/sharing/dijit/views,dojo/parser,dijit/_base,dojo/dnd/AutoSource,dojo/dnd/Target,dojo/fx/Toggler,dijit/TooltipDialog,dijit/MenuSeparator"],
function(f,B,l){f.provide("arcgisonline.base");f.require("esri.main");f.require("esri.utils");f.require("arcgisonline.init");f.require("arcgisonline.sharing.dijit.SiteHeader");f.require("arcgisonline.sharing.dijit.SiteFooter");f.require("arcgisonline.sharing.dijit.SiteFooterMap");f.require("arcgisonline.sharing.dijit.SignUpInternal");f.require("dijit.form.Form");f.require("arcgisonline.sharing.geow.Account");f.require("arcgisonline.sharing.dijit.HelpManager");f.require("dojo.date.locale");f.require("dojox.widget.Rotator");
f.require("dojox.widget.AutoRotator");f.require("dojox.widget.rotator.Controller");f.require("dojox.widget.rotator.Fade");f.require("dijit.layout.StackController");f.require("dojo.cookie");f.require("dojo.json");f.require("arcgisonline.sharing.dijit.TextMenu");f.require("arcgisonline.sharing.util");f.require("dojo.topic");f.require("dijit._base");f.require("dijit.form.DropDownButton");f.require("dijit.form.ComboButton");f.require("dijit.form.ToggleButton");f.require("dijit.form.RadioButton");f.require("dijit.PopupMenuItem");
f.require("dijit._Contained");f.require("dijit._Container");f.require("dijit._WidgetBase");f.require("dijit.main");f.require("dojo.Stateful");f.require("dojo.date.locale");f.require("arcgisonline.sharing.dijit.Gallery");f.require("arcgisonline.sharing.util");f.require("arcgisonline.sharing.dijit.views");f.require("dojo.parser");f.require("dijit._base");f.require("dojo.dnd.AutoSource");f.require("dojo.dnd.Target");f.require("dojo.fx.Toggler");f.require("dijit.TooltipDialog");f.require("dijit.MenuSeparator");
f.requireLocalization("arcgisonline","arcgisonline")})},"arcgisonline/init":function(){define("require exports tslib ./esriGeowConfig ./pages/utils/organization ./pages/utils/user ./sharing/util ./sharing/dijit/_Empty ./sharing/dijit/Gallery ./sharing/geow/Account dojo/dom-construct dojo/DeferredList dojo/query dojo/string dojo/_base/connect dojox/widget/AutoRotator dojox/widget/rotator/Controller esri/domUtils esri/lang esri/libs/sanitizer/Sanitizer dojo/i18n!./nls/arcgisonline".split(" "),function(f,
B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);q=l.__importDefault(q);n=l.__importDefault(n);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);x=l.__importDefault(x);v=l.__importDefault(v);y=l.__importDefault(y);D=l.__importDefault(D);return function(){function E(){}E.loadLabels=function(){this.labels=
l.__assign(l.__assign(l.__assign({},D.default.common),D.default.homePage),D.default.emptyStates);this.viewerLink.innerHTML=this.labels.viewerLink;this.viewerDescription.innerHTML=this.labels.viewerDescription;this.signUpLink.innerHTML=this.labels.signUpLink;this.signUpDescription.innerHTML=this.labels.signUpDescription;this.featuredVideosLink.innerHTML=this.labels.featuredVideosLink;this.featuredVideosDescription.innerHTML=this.labels.featuredVideosDescription;this.lnkExplore.innerHTML=this.labels.explorerLink;
this.pExplore.innerHTML=this.labels.explorerDescription;this.signUpImg.setAttribute("alt",this.labels.signUpLink);this.signUpImg.title=this.labels.signUpLink;this.mapImg.setAttribute("alt",this.labels.viewerLink);this.mapImg.title=this.labels.viewerLink;this.developersImg.setAttribute("alt",this.labels.explorerLink);this.developersImg.title=this.labels.explorerLink;this.videosImg.setAttribute("alt",this.labels.featuredVideosLink);this.videosImg.title=this.labels.featuredVideosLink;this.next.setAttribute("aria-label",
d.default.isRightToLeft?this.labels.previous:this.labels.next);this.prev.setAttribute("aria-label",d.default.isRightToLeft?this.labels.next:this.labels.previous);this.skipToContent.innerHTML=this.labels.skipToContent};E.loadElements=function(){this.skipToContent=document.getElementById("skipToContent");this.headerTitle=document.getElementById("headerTitle");this.viewerLink=document.querySelector("#viewerLink");this.viewerDescription=document.getElementById("viewerDescription");this.signUpLink=document.querySelector("#signUpLink");
this.signUpDescription=document.getElementById("signUpDescription");this.featuredVideosLink=document.querySelector("#featuredVideosLink");this.featuredVideosDescription=document.getElementById("featuredVideosDescription");this.lnkExplore=document.querySelector("#lnkExplore");this.pExplore=document.getElementById("pExplore");this.signUpImg=document.querySelector("#signUpImg");this.mapImg=document.querySelector("#mapImg");this.developersImg=document.querySelector("#developersImg");this.videosImg=document.querySelector("#videosImg");
this.logoImg=document.querySelector("#logoImg");this.next=document.querySelector("#next");this.prev=document.querySelector("#prev");this.matrixLayout=document.getElementById("matrixLayout");this.details=document.getElementById("details");this.homeCalciteBanner=document.getElementById("homeCalciteBanner");this.featuredMaps=document.getElementById("featuredMaps");this.bottomContent=document.getElementById("bottomContent");this.bottomSection=document.getElementById("bottomSection");this.topRow2=document.getElementById("topRow2");
this.orgDetails=document.getElementById("orgDetails");this.organizationSection=document.getElementById("organizationSection")};E.initialize=function(C){var z=this,w,A;this.credential=C;window.esri.i18nBundle=D.default;this.loadElements();this.loadLabels();this.initSanitizer();this.initPage=this.initPage.bind(this);this.getGroupContent=this.getGroupContent.bind(this);this.createGallery=this.createGallery.bind(this);null===(w=this.logoImg)||void 0===w?void 0:w.setAttribute("src",t.default.relativeToExplicitUrl("images/logo-pod.jpg"));
null===(A=this.featuredVideosLink)||void 0===A?void 0:A.setAttribute("href",d.default.learnArcGIS);this.isSingleTenant=!1===d.default.isMultiTenant;u.default.getUserProperties(d.default.userInfo).then(function(G){d.default.userProperties=G;m.default.getSelf(z.initPage,z.initPage)})};E.unhide=function(){document.body.classList.remove("hide")};E.initSanitizer=function(){this.sanitizer=new y.default(c.default.orgSettingsSanitizerParams,!0);this.sanitizer.sanitizeUrl=c.default.sanitizeUrlOrgOverride;
c.default.adjustSanitizerForOrgSettingsUse(this.sanitizer)};E.overrideSettings=function(C){var z,w;this.settings=C;this.isPortal=t.default.isPortal();0<(null===(z=this.settings.id)||void 0===z?void 0:z.length)&&(this.isOrg=!0,null===(w=this.headerTitle)||void 0===w?void 0:w.parentNode.removeChild(this.headerTitle));this.isPortal&&this.getFederatedServers();C.allSSL&&(this.allSSL=C.allSSL);C.portalName&&(d.default.portalName=C.portalName);C.portalHostname&&(d.default.portalHostname=C.portalHostname);
C.portalHeaderImage&&(d.default.portalHeaderImage=C.portalHeaderImage);C.homePageFeaturedContent?d.default.homePageFeaturedContent=C.homePageFeaturedContent:this.isOrg&&(d.default.homePageFeaturedContent=null);v.default.isDefined(C.homePageFeaturedContentCount)&&(d.default.homePageFeaturedContentCount=C.homePageFeaturedContentCount);if(C.rotatorPanels)if(this.isOrg)for(d.default.rotatorPanels=C.rotatorPanels,z=d.default.rotatorPanels,w=0;w<z.length;w++){var A=z[w];if(this.isPortal&&"7443"===location.port&&
-1===d.default.self.portalHostname.indexOf(":7443")){var G=new RegExp(d.default.self.portalHostname,"gi");if(G.test(A.innerHTML)){var F=d.default.self.portalHostname.split("/");F[0]+=":7443";F[1]="arcgis";A.innerHTML=A.innerHTML.replace(G,F.join("/"))}}z[w].innerHTML=A.innerHTML.replace(/CDN_SERVER/gi,d.default.cdnServerUrl)}else a.default.create("div",{id:"homeCalciteBanner"},this.matrixLayout),this.details.classList.add("calcite_home"),this.details.classList.add("calcite_home_details"),this.matrixLayout.classList.add("calcite_home"),
this.matrixLayout.classList.add("calcite_home_matrixLayout"),this.homeCalciteBanner.classList.add("calcite_home"),this.homeCalciteBanner.classList.add("calcite_home_banner"),this.featuredMaps.classList.add("calcite_home"),this.featuredMaps.classList.add("calcite_home_featuredMaps"),this.bottomContent.classList.add("calcite_home"),this.bottomContent.classList.add("calcite_home_bottomContent");else this.isOrg&&(d.default.rotatorPanels=null);z=C.showHomePageDescription;d.default.showHomePageDescription=
void 0!==z&&null!==z?C.showHomePageDescription:!1};E.getFederatedServers=function(){var C=t.default.getUser();!d.default.federatedServers&&C&&(C="".concat(d.default.restBaseUrl,"portals/").concat(d.default.self.id,"/servers"),t.default.request({url:C}).then(function(z){t.default.setFederatedServers((z||{}).servers||[])}))};E.initOrganization=function(){x.default.hide(this.bottomSection);if(d.default.explorerOnline){var C="http://developers.arcgis.com",z=this.labels.explorerLink,w=this.labels.explorerDescription;
this.isSingleTenant&&(C=d.default.explorerOnline,z=this.labels.explorerLinkPortal,w=this.labels.explorerDescriptionPortal);a.default.create("div",{id:"appOrgDiv",innerHTML:'\x3ch2 id\x3d"h2Explore"\x3e\x3ca id\x3d"lnkExplore" class\x3d"explorerLink" href\x3d"'.concat(C,'" target\x3d"_blank" \x3e').concat(z,'\x3c/a\x3e\x3c/h2\x3e\x3cp id\x3d"pExplore"\x3e').concat(w,"\x3c/p\x3e")},this.topRow2)}C=this.settings.name;z=this.settings.description;w=d.default.showHomePageDescription;w=void 0!==w&&null!==
w&&!1===w?!1:!0;var A=v.default.isDefined(z)&&"\x3cbr\x3e"!==z&&"\x3cbr/\x3e"!==z&&"\x3cbr /\x3e"!==z&&""!==z;A&&w?(this.orgDetails.innerHTML=this.sanitizer.sanitize(z),x.default.show(this.organizationSection)):!this.isPortal||A||w||(z="".concat(this.settings.helpBase).concat(this.settings.helpMap.m["120000837"]),z='\x3cspan class\x3d"esriItemLinks"\x3e\x3ca href\x3d"'.concat(z,'" target\x3d"_blank"\x3e'),this.orgDetails.innerHTML=v.default.substitute({linkStart:z,linkEnd:"\x3c/a\x3e\x3c/span\x3e"},
this.labels.portalDefaultDesc),x.default.show(this.organizationSection));z=(z=t.default.getToken())?"?token\x3d".concat(z):"";w=this.settings.backgroundImage;v.default.isDefined(w)?"none"!==w?0===w.indexOf("images/")?(0,q.default)("body").addClass("defaultBackground"):(w="".concat(d.default.restBaseUrl,"portals/self/resources/").concat(w).concat(z),A=(0,q.default)("body.esri")[0],A.style.backgroundImage="url('".concat(w,"')"),A.style.backgroundPosition="top center",A.style.backgroundRepeat="repeat-x"):
(0,q.default)("body").addClass("calciteBackground"):(0,q.default)("body").addClass("calciteBackground");if(d.default.rotatorPanels){this.matrixLayout.classList.add("matrixLayoutShort");this.details.classList.add("detailsShort");C=t.default.getToken();z=d.default.rotatorPanels;for(w=0;w<z.length;w++)A=z[w],A.id&&(A.innerHTML=this.allSSL||this.isPortal&&"https:"===location.protocol?A.innerHTML.replace(/http:/g,"https:"):A.innerHTML),A.innerHTML=A.innerHTML.replace(/CDN_SERVER/gi,d.default.cdnServerUrl),
A.innerHTML=A.innerHTML.replace("SECURITY_TOKEN",C?C:""),A.innerHTML=this.expandPredefinedImageUrls(A.innerHTML),A.innerHTML=this.expandProtocolAgnosticUrls(A.innerHTML),A.innerHTML=this.sanitizer.sanitize(A.innerHTML);this.createRotator(z)}else w=d.default.portalHeaderImage?d.default.portalHeaderImage:t.default.relativeToExplicitUrl("images/organizationSplash.jpg"),a.default.create("img",{id:"headerImage",src:w},this.matrixLayout),document.getElementById("headerImage").classList.add("portalImage"),
w=a.default.create("div",{id:"logoDisplay"},this.matrixLayout),A="",this.settings&&this.settings.thumbnail&&(A="".concat(d.default.restBaseUrl,"portals/self/resources/").concat(this.settings.thumbnail).concat(z),a.default.create("img",{src:A,alt:C},w)),a.default.create("span",{innerHTML:C},w),this.matrixLayout.classList.add("matrixLayoutShort"),this.details.classList.add("detailsShort");this.unhide()};E.expandPredefinedImageUrls=function(C){var z=window.location.href.substring(0,window.location.href.lastIndexOf("/")+
1);C=this.expandPredefinedImageUrl(C,"images/banner-1.jpg",z);C=this.expandPredefinedImageUrl(C,"images/banner-2.jpg",z);C=this.expandPredefinedImageUrl(C,"images/banner-3.jpg",z);C=this.expandPredefinedImageUrl(C,"images/banner-4.jpg",z);C=this.expandPredefinedImageUrl(C,"images/banner-5.jpg",z);C=this.expandPredefinedImageUrl(C,"images/organizationSplash.jpg",z);return C=this.expandPredefinedImageUrl(C,"images/arcgis_background.jpg",z)};E.expandPredefinedImageUrl=function(C,z,w){return C.replace('src\x3d"'.concat(z,
'"'),'src\x3d"'.concat(w).concat(z,'"')).replace("src\x3d'".concat(z,"'"),"src\x3d'".concat(w).concat(z,"'"))};E.expandProtocolAgnosticUrls=function(C){var z=window.location.protocol;return C.replace('src\x3d"//','src\x3d"'.concat(z,"//")).replace("src\x3d'//","src\x3d'".concat(z,"//"))};E.initPage=function(C){var z,w;d.default.userInfo&&this.credential&&(d.default.userInfo.credential=this.credential,d.default.userInfo.token=this.credential.token);!C||C.code||C.message||this.overrideSettings(C);C=
t.default.getUser();if(this.isSingleTenant||C&&C.accountId)this.isOrg=!0,null===(z=this.headerTitle)||void 0===z?void 0:z.parentNode.removeChild(this.headerTitle);this.isOrg?document.title=this.settings.name:(document.title=d.default.portalName||this.labels.arcgis,document.body.classList.add("defaultBackground"),d.default.portalHeaderImage?(null===(w=this.headerTitle)||void 0===w?void 0:w.parentNode.removeChild(this.headerTitle),a.default.create("img",{id:"headerImage",src:d.default.portalHeaderImage},
this.matrixLayout),document.getElementById("headerImage").classList.add("portalImage")):this.createRotator(d.default.rotatorPanels));z="";C&&!C.accountId?(this.signUpLink.innerHTML=this.labels.readyToUse,this.signUpDescription.innerHTML=this.labels.readyToUseDescription,this.signUpLink.href="".concat(location.protocol,"//www.esri.com/software/apps")):(-1===d.default.signin.indexOf("http")?(z="".concat(d.default.baseUrl).concat(d.default.signin),!1!==d.default.useSSL&&(z=z.replace("http:","https:"))):
z=d.default.signin,(0,q.default)("#signUpLink").attr("href",z));d.default.explorerOnline?(0,q.default)(".explorerLink").attr("href","http://developers.arcgis.com"):(document.getElementById("bottom3Grid").style.display="none",document.getElementById("bottomRow2").classList.remove("middle"),document.getElementById("bottomRow2").classList.add("last"),document.getElementById("bottom2Grid").classList.add("grid_6"),document.getElementById("bottom1Grid").classList.add("grid_6"));document.getElementById("page-border").style.visibility=
"visible";d.default.homePageFeaturedContent?this.getGroup(d.default.homePageFeaturedContent):x.default.hide(document.getElementById("featuredMaps"));this.isOrg?this.initOrganization():this.unhide()};E.createRotator=function(C){var z=new g.default({transition:"dojox.widget.rotator.crossFade",duration:1E4,panes:C,autoStart:!0,pauseOnManualChange:!0,cycles:12,suspendOnHover:!0},document.getElementById("imgRotator"));new b.default({rotator:z,commands:"#"},document.getElementById("categories"));1===(null===
C||void 0===C?void 0:C.length)&&(document.getElementById("categories").style.display="none")};E.getNextElementSibling=function(C){if(C instanceof HTMLElement&&C.nextElementSibling)return C.nextElementSibling;for(;C.nextSibling;){if(1===C.nextSibling.nodeType)return C.nextSibling;C=C.nextSibling}};E.getGroup=function(C){C={q:C,f:"json",ts:Date.now()};t.default.request({url:"".concat(d.default.restBaseUrl,"community/groups"),content:C}).then(this.getGroupContent,this.getGroupContent)};E.getGroupContent=
function(C){var z;if(null!==(z=null===C||void 0===C?void 0:C.results)&&void 0!==z&&z[0]){z=0;for(var w=C.results[z];C.results.length>z+1&&!(-1<C.query.indexOf('"'.concat(w.title,'"')));)z++,w=C.results[z];document.getElementById("galleryTitle").innerHTML=w.title;0===d.default.homePageFeaturedContentCount?this.showAllGroupItems(w):(C={q:"group:".concat(w.id,' -(type:"Code Attachment" OR type:"Windows Viewer Add In" OR type:"Windows Viewer Configuration" OR type:"Map Area") -typekeywords:"MapAreaPackage"'),
f:"json",num:d.default.homePageFeaturedContentCount,sortField:w.sortField?w.sortField:"modified",sortOrder:w.sortOrder?w.sortOrder:"desc",ts:Date.now()},t.default.request({url:"".concat(d.default.restBaseUrl,"search"),content:C}).then(this.createGallery,function(A){}))}else x.default.hide(document.getElementById("featuredMaps"))};E.showAllGroupItems=function(C){var z=this,w={q:"group:".concat(C.id,' -(type:"Code Attachment" OR type:"Windows Viewer Add In" OR type:"Windows Viewer Configuration" OR type:"Map Area") -typekeywords:"MapAreaPackage"'),
f:"json",num:100,sortField:C.sortField?C.sortField:"modified",sortOrder:C.sortOrder?C.sortOrder:"desc",ts:Date.now()};t.default.request({url:"".concat(d.default.restBaseUrl,"search"),content:w}).then(function(A){var G={results:A.results},F=0;F=0;if(0<A.nextStart){F=A.total-A.results.length;F=Math.ceil(F/100);var H=[];A=A.nextStart;for(var J=0;J<F;J++)w.start=A+100*J,H.push(t.default.request({url:"".concat(d.default.restBaseUrl,"search"),content:w}));(new h.default(H)).then(function(K){K.forEach(function(Q){Q[1]&&
Q[1].results&&(G.results=G.results.concat(Q[1].results))});z.createGallery(G)},function(K){z.createGallery(G)})}else z.createGallery(G)},function(A){})};E.createGallery=function(C){var z=this,w=C.results,A=new r.default({nodesPerPage:4,showThumbnailInDetails:!1,showToolTip:!1,showPageControls:!1,fadeOutOtherNodes:!0,noResultsMessage:n.default.substitute(e.default,{message:this.labels.noContentAvailable,width:96})},"gallery"),G=document.getElementById("next"),F=document.getElementById("prev");k.default.connect(A,
"onContentChange",function(){w.length<=A.nodesPerPage&&(d.default.isRightToLeft?(G.classList.remove("prevButtonEnabled"),G.classList.add("prevButtonDisabled")):(G.classList.remove("nextButtonEnabled"),G.classList.add("nextButtonDisabled")))});A.set("items",w);d.default.isRightToLeft?(k.default.connect(F,"click, keyup",A,A.nextPage),k.default.connect(G,"click, keyup",A,A.prevPage),G.classList.remove("nextButtonEnabled"),G.classList.add("nextButtonDisabled")):(k.default.connect(F,"click, keyup",A,A.prevPage),
k.default.connect(G,"click, keyup",A,A.nextPage),F.classList.remove("prevButtonEnabled"),F.classList.add("prevButtonDisabled"));k.default.connect(A,"onPageChange",function(H){z.galleryNodeMap={};d.default.isRightToLeft?(1===H?(G.classList.remove("nextButtonEnabled"),G.classList.add("nextButtonDisabled")):(G.classList.remove("nextButtonDisabled"),G.classList.add("nextButtonEnabled")),H===A.pageCount?(F.classList.remove("prevButtonEnabled"),F.classList.add("prevuttonDisabled")):(F.classList.remove("prevButtonDisabled"),
F.classList.add("prevButtonEnabled"))):(1===H?(F.classList.remove("prevButtonEnabled"),F.classList.add("prevButtonDisabled")):(F.classList.remove("prevButtonDisabled"),F.classList.add("prevButtonEnabled")),H===A.pageCount?(G.classList.remove("nextButtonEnabled"),G.classList.add("nextButtonDisabled")):(G.classList.remove("nextButtonDisabled"),G.classList.add("nextButtonEnabled")))});k.default.connect(A,"onNodeMouseEnter",function(H,J){H=H.currentTarget;var K=t.default.getUser();(0,q.default)("a",H).forEach(function(Q){var P;
if(!E.galleryNodeMap[J.id]){var I=t.default.getHomePageGalleryLinkInfo(J),N=!1;-1<(null===(P=I.href)||void 0===P?void 0:P.toLowerCase().indexOf("javascript"))&&J.url&&("Web Mapping Application"===J.type||"Mobile Application"===J.type||"Document Link"===J.type||"Site Application"===J.type||"Hub Site Application"===J.type||"StoryMap"===J.type)&&(I.href=J.url,N=!0);if("CityEngine Web Scene"===J.type||"Dashboard"===J.type||"Operation View"===J.type)N=!0;(null===I||void 0===I?0:I.href)&&"JavaScript:void(0)"===
I.href&&I.onclick?k.default.connect(Q,"onclick",I.onclick):(!K&&"self"!==J.contentOrigin&&"public"===J.access&&I.href&&(P=I.href.indexOf("/apps/"),0===P?I.href="https://".concat(d.default.self.portalHostname).concat(I.href):0<I.href.indexOf("".concat(window.location.host).concat(t.default.getHomeAppContext()))&&0<P?I.href="https://".concat(d.default.self.portalHostname).concat(I.href.substring(P)):-1<I.href.indexOf(".arcgis.com")&&(P=I.href.split(".arcgis.com"),P=P[P.length-1],I.href="https://".concat(d.default.self.portalHostname).concat(P))),
Q.href=I.href);Q.target=N?"_blank":"";E.galleryNodeMap[J.id]=!0}})}.bind(E))};E.allSSL=!1;E.isOrg=!1;E.isSingleTenant=!1;E.galleryNodeMap={};return E}()})},"arcgisonline/pages/utils/user":function(){define("require exports tslib ../../esriGeowConfig ./resources ./arrays ../../sharing/util dojo/Deferred dojo/_base/kernel esri/lang".split(" "),function(f,B,l,d,c,u,t,e,r,m){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);
m=l.__importDefault(m);return function(){function a(){}a.createFullName=function(h,q){var n=null===h||void 0===h?void 0:h.fullName;q||(q=r.default.locale);m.default.isDefined(h.firstName)&&m.default.isDefined(h.lastName)&&(n="ja"===q?h.lastName+" "+h.firstName:h.firstName+" "+h.lastName);return n};a.splitFullName=function(h){var q={first:void 0,last:void 0};h&&(h=h.split(" "),1===h.length?(q.first=h[0],q.last=""):1<h.length&&(q.last=h.splice(h.length-1,1)[0],q.first=h.join(" ")));return q};a.checkUsernames=
function(h,q){var n=new e.default,k="".concat(d.default.restBaseUrl,"community/checkUsernames"),g={usernames:[]};(q?c.default.sendAllResourcesSerially:c.default.sendAllResources)(k,200,h,function(b){return{usernames:b.join(",")}}).then(function(b){b.forEach(function(x){return g.usernames=g.usernames.concat(x.usernames)});n.resolve(g)},function(b){n.resolve(b)});return n};a.checkForFavorites=function(h,q,n){var k=new e.default,g=(null===n||void 0===n?void 0:n.items)||[];h=null===h||void 0===h?void 0:
h.favGroupId;var b=g.map(function(x){return x.id});h&&(null===b||void 0===b?0:b.length)?(h='(group:"'.concat(h,'" AND id:(').concat(b.join(" OR "),"))"),q.queryItems({q:h,num:g.length||1},!0).then(function(x){var v=x.results||[];g.forEach(function(y){y.isFavorite=!!u.default.find(v,function(D){return y.id===D.id})});k.resolve(n)},function(x){k.resolve(n)})):k.resolve(n);return k};a.createValidOrgUsername=function(h,q,n,k){var g,b=null!==(g=(null===h||void 0===h?void 0:h.length)+(null===q||void 0===
q?void 0:q.length))&&void 0!==g?g:0;h=h.substring(0,h.length-(b>k?b%k:0))+q.replace(/-/g,"_");h.length<n&&(q=n-h.length,h&&0<q&&(n=""+(new Date).getTime(),h+=n.substring(n.length-q)));return h=h.replace(/\+/g,"_")};a.stripOrgKeyFromUsername=function(h,q){if(h){var n=h.lastIndexOf(q);if(-1<n&&n<h.length-1&&n===h.length-q.length-1)return h.substring(0,n)}return h};a.cleanUsername=function(h,q){var n=/[^[a-zA-Z0-9@_\.]]*/g,k=/[^[a-zA-Z0-9@_\.\-]]*/g;return 0<(null===h||void 0===h?void 0:h.length)?q?
h.replace(k,"_"):h.replace(n,"_"):h};a.cleanUsernameDomain=function(h,q,n){return h&&(q||n)&&(q=h.indexOf("\\"),-1<q&&q<=h.length-2)?h.substring(q+1)+"@"+h.substring(0,q).toUpperCase():h};a.stripUsernameDomain=function(h,q,n){return h&&!q&&n?h.split("@").shift():h};a.removeSAMLSuffix=function(h,q){q="_"+q;return h.lastIndexOf(q)===h.length-q.length?h.substring(0,h.lastIndexOf(q)):h};a.addSAMLSuffix=function(h,q){var n=h&&q;q="_"+q;var k=n&&-1===h.indexOf(q);n=n&&h.lastIndexOf(q)===h.length-q.length;
return k||n?h+q:h};a.isStoryteller=function(h){var q;return"storytellerut"===(null===(q=h.userLicenseTypeId)||void 0===q?void 0:q.toLowerCase())};a.getUserProperties=function(h){var q=new e.default;(null===h||void 0===h?0:h.username)?t.default.request({url:"".concat(d.default.restBaseUrl,"community/users/").concat(h.username,"/properties"),content:{f:"json"}}).then(function(n){q.resolve(n.properties)},function(){q.resolve(null)}):q.resolve(null);return q};return a}()})},"arcgisonline/sharing/dijit/_Empty":function(){define(["require",
"exports","tslib","dojo/text!./templates/_Empty.html"],function(f,B,l,d){d=l.__importDefault(d);return d.default})},"arcgisonline/sharing/dijit/Gallery":function(){define(["dojo","dijit","dojox","dojo/i18n!arcgisonline/nls/arcgisonline","dojo/require!arcgisonline/sharing/dijit/views,dijit/_Widget,dijit/_Templated,dojo/NodeList-fx,dijit/layout/ContentPane,arcgisonline/sharing/util,dijit/form/Button,arcgisonline/sharing/geow/QueryReadStore"],function(f,B,l){f.provide("arcgisonline.sharing.dijit.Gallery");
f.require("arcgisonline.sharing.dijit.views");f.require("dijit._Widget");f.require("dijit._Templated");f.require("dojo.NodeList-fx");f.require("dijit.layout.ContentPane");f.require("arcgisonline.sharing.util");f.require("dijit.form.Button");f.requireLocalization("arcgisonline","arcgisonline");f.require("arcgisonline.sharing.geow.QueryReadStore");f.declare("arcgisonline.sharing.dijit.Gallery",[B._Widget,B._Templated],{widgetsInTemplate:!0,templateString:'\x3cdiv dojoAttachPoint\x3d"containerNode"\x3e\r\n  \x3cdiv class\x3d"clearfix galleryBackground"\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"flowContainer" class\x3d"clearfix"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"pageControls" class\x3d"esriFloatLeading" style\x3d"maxheight: 3em; width: 100%; clear: both;"\x3e\r\n      \x3cp style\x3d"text-align: center;"\x3e\r\n        \x3cspan dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"_prev" style\x3d"display:none;"\x3e${i18n.previous}\x3c/span\x3e\r\n        \x3cspan dojoAttachPoint\x3d"_pages" dojoAttachEvent\x3d"onClick:goToPage" class\x3d"esriItemLinks esriPagingLinks"\x3e\x3c/span\x3e\r\n        \x3cspan dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"_next" style\x3d"display:none;"\x3e${i18n.next}\x3c/span\x3e\r\n      \x3c/p\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
tooltip:null,showToolTip:!0,showNodeLabels:!0,showThumbnailInDetails:!0,fadeOutOtherNodes:!0,animFadeOut:!0,unfocusedOpacity:.5,highlightFocusedNode:!0,largeNodes:0,maxNodes:0,flowContainer:null,showDelay:300,nodesPerPage:4,currentPage:1,pageCount:1,maxPages:null,showPageControls:!0,_prev:null,_next:null,_pages:null,nodeClass:"galleryNode",nodeHighlightClass:"highlight",thumbClass:"galleryThumbnail",labelClass:"label",labelBgClass:"galleryLabelContainer",detailsClass:"galleryDetail",detailsThumbClass:"galleryDetailThumb",
messageClass:"galleryMessage",_lastFocusedNode:null,_timer:null,_galleryFadeIn:null,_galleryFadeOut:null,_galleryFadeOutTotal:null,_suspendTooltip:!1,includeNode:null,_defaultNoResultsMessage:null,noResultsMessage:null,items:null,i18n:null,postMixInProperties:function(){this.inherited(arguments);this.i18n=f.i18n.getLocalization("arcgisonline","arcgisonline").common;f.mixin(this.i18n,f.i18n.getLocalization("arcgisonline","arcgisonline").gallery);this._defaultNoResultsMessage=this.i18n.filterNoResults},
postCreate:function(){this._userToken=(this._user=arcgisonline.sharing.util.getUser())&&this._user.token;null===this.tooltip&&(this.tooltip=new arcgisonline.sharing.dijit._GalleryContentPane({_gallery:this},f.create("div",{id:this.id+"_popup"},f.body())),this._galleryFadeIn=f.animateProperty({node:this.flowContainer,properties:{opacity:1}}),this._galleryFadeOut=f.animateProperty({node:this.flowContainer,properties:{opacity:this.unfocusedOpacity}}),this._galleryFadeOutTotal=f.animateProperty({node:this.flowContainer,
properties:{opacity:0}}),f.connect(this.domNode,"scroll",this,function(){this.tooltip&&this.tooltip.isShowing&&this.tooltip.hide()}),this.showPageControls&&(f.connect(this,"onContentChange",this,this._layoutPageControls),f.connect(this,"onPageChange",this,this._layoutPageControls)))},_showTooltip:function(d,c){var u=this.tooltip.domNode,t;esriGeowConfig.isRightToLeft||(t=this.showThumbnailInDetails?{TL:"TL",TR:"TR"}:{TL:"TR",TR:"TL"});esriGeowConfig.isRightToLeft&&(t=this.showThumbnailInDetails?{BR:"BR"}:
{BR:"TR"});t=B.placeOnScreenAroundNode(u,d,t);this.tooltip.set("content",this._buildItemDetailsLayout(c,t,d));if(this.showThumbnailInDetails){(d="none"==f.style(u,"display"))&&f.style(u,{visibility:"hidden",display:"block"});var e=f.contentBox(u),r=f.coords(u);d&&f.style(u,{visibility:"",display:"none"});"TR"==t.aroundCorner?(f.style(u,"top",r.t-e.t+"px"),f.style(u,"left",r.l+e.l+"px")):"TL"==t.aroundCorner&&(f.style(u,"top",r.t-e.t+"px"),f.style(u,"left",r.l-e.l+"px"))}this._highlightNode(c);this.tooltip.show()},
node_onMouseEnter:function(d){var c=d.currentTarget,u=this._getItemByNode(c);this.onNodeMouseEnter(d,u);!this._suspendTooltip&&this.showToolTip&&(this.tooltip.isShowing&&this.tooltip.hide(),this._timer&&(clearTimeout(this._timer),this._timer=null),this._unhighlightNodes(),this._timer||(this._timer=setTimeout(f.hitch(this,function(){this._showTooltip(c,u)}),this.showDelay)))},node_onMouseLeave:function(d){this._timer&&(clearTimeout(this._timer),this._timer=null);var c=this._getItemByNode(d.currentTarget);
this.onNodeMouseLeave(d,c)},tooltip_onMouseLeave:function(d){this._unhighlightNodes();this.tooltip.hide()},_highlightNode:function(d){d=f.byId("galleryNode_"+d.id);this.fadeOutOtherNodes&&(this.animFadeOut?(this._galleryFadeIn.stop(),this._galleryFadeOut.play()):f.style(this.flowContainer,"opacity",this.unfocusedOpacity));this.highlightFocusedNode&&f.addClass(d,this.nodeHighlightClass);this._lastFocusedNode=d},_unhighlightNodes:function(){this.fadeOutOtherNodes&&(this.animFadeOut?(this._galleryFadeOut.stop(),
this._galleryFadeIn.play()):f.style(this.flowContainer,"opacity",1));null!==this._lastFocusedNode&&f.removeClass(this._lastFocusedNode,this.nodeHighlightClass);this._lastFocusedNode=null},_loadItems:function(d){this.tooltip&&this.tooltip.hide();this._galleryFadeIn.stop();this._galleryFadeOut.stop();this._galleryFadeOutTotal.onEnd=f.hitch(this,function(c){f.empty(this.flowContainer);0<c.length?(this.maxNodes&&(c=c.splice(0,this.maxNodes)),f.forEach(c,f.hitch(this,function(u,t){u.id||(u.id=t);this.flowContainer.appendChild(this._buildNodeLayout(u,
t<this.largeNodes))})),f.create("br",{style:{clear:"both"}},this.flowContainer),c=f.query("."+this.nodeClass,this.domNode),c.connect("onmouseenter",this,this.node_onMouseEnter),c.connect("onmouseleave",this,this.node_onMouseLeave),this.tooltip&&f.connect(this.tooltip.domNode,"onmouseleave",this,this.tooltip_onMouseLeave)):f.create("span",{innerHTML:this.noResultsMessage||this._defaultNoResultsMessage,"class":this.messageClass},this.flowContainer);this._galleryFadeIn.play();this._galleryFadeOut.onEnd=
null;this._suspendTooltip=!1},d);this._galleryFadeOutTotal.play()},clear:function(d){this.tooltip&&this.tooltip.hide();this._galleryFadeIn.stop();this._galleryFadeOut.stop();f.empty(this.flowContainer);f.empty(this._pages);f.create("span",{innerHTML:d,"class":this.messageClass},this.flowContainer);this._galleryFadeIn.play();this._galleryFadeOut.onEnd=null;this._suspendTooltip=!1},_buildNodeLayout:function(d,c){var u=f.create("div",{id:"galleryNode_"+d.id,"class":this.nodeClass});f.addClass(u,c?"large":
"small");var t=arcgisonline.sharing.util;c=t.relativeToExplicitUrl("images/transparent.gif");"Web Mapping Application"==d.type&&(c=t.getStaticImagesUrl()+"/webapp.png");c="Mobile Application"==d.type?t.getStaticImagesUrl()+"/mobileapp.png":"Web Scene"===d.type||"Scene Service"===d.type?t.getStaticImagesUrl()+"/desktopapp.png":"Workforce Project"===d.type?t.getStaticImagesUrl()+"/workforceproject.png":"Hub Initiative"===d.type?t.getStaticImagesUrl()+"/hubinitiative.png":"Hub Page"===d.type?t.getStaticImagesUrl()+
"/hubpage.png":"Hub Site Application"===d.type?t.getStaticImagesUrl()+"/hubsite.png":"Dashboard"===d.type?t.getStaticImagesUrl()+"/opsdashboard.png":"Geoprocessing Service"===d.type&&esriGeowConfig.self&&esriGeowConfig.self.isPortal?t.getStaticImagesUrl()+"/webtool.png":"Ortho Mapping Project"===d.type?t.getStaticImagesUrl()+"/orthomappingproject.png":"Ortho Mapping Template"===d.type?t.getStaticImagesUrl()+"/orthomappingtemplate.png":"Notebook"===d.type?t.relativeToExplicitUrl("/js/arcgisonline/css/images/notebook-thumb.png"):
t.getStaticImagesUrl()+"/desktopapp.png";t.getGalleryMainLinkInfo(d);t=f.create("a",{href:"#"},u);f.connect(t,"onclick",this,this.onNodeClick,d);f.create("img",{"class":this.thumbClass,alt:d.snippet||"",src:d.thumbnail?this._getThumbailUrl(d):c},t);this.showNodeLabels&&(c=f.create("div",{"class":"galleryLabelContainer"},u),d=d.title||"",f.create("span",{innerHTML:d,alt:d,title:d},c));return u},_buildItemDetailsLayout:function(d,c,u){return arcgisonline.sharing.dijit.views.item.medium(d,{showThumb:this.showThumbnailInDetails,
align:(esriGeowConfig.isRightToLeft?0:"TR"==c.aroundCorner)?"right":"left",hideOpenMenu:!0,showProfilePopup:!1})},_getItemByNode:function(d){for(;!f.hasClass(d,this.nodeClass);)d=d.parentNode;d=d.id.substr(d.id.indexOf("_")+1);for(var c=0;c<this.items.length;c++)if(this.items[c].id==d)return this.items[c];return null},_getThumbailUrl:function(d){var c=this._userToken;return esriGeowConfig.restBaseUrl+"content/items/"+d.id+"/info/"+d.thumbnail+(c?"?token\x3d"+c:"")},_layoutPageControls:function(){f.empty(this._pages);
if(1!==this.pageCount){for(var d=1;d<=this.pageCount;d++){var c=f.create("span",{innerHTML:d},f.create("a",{onclick:f.hitch(this,this.goToPage,d)},this._pages));d==this.currentPage&&f.addClass(c,"currentPage")}1==this.currentPage?f.style(this._prev.domNode,"visibility","hidden"):f.style(this._prev.domNode,"visbility","");this.currentPage==this.pageCount?f.style(this._next.domNode,"visibility","hidden"):f.style(this._next.domNode,"visbility","")}},nextPage:function(d){this.currentPage<this.pageCount&&
(!d.keyCode||13===d.keyCode||32===d.keyCode)&&this.goToPage(this.currentPage+1)},prevPage:function(d){1<this.currentPage&&(!d.keyCode||13===d.keyCode||32===d.keyCode)&&this.goToPage(this.currentPage-1)},goToPage:function(d){0<this.pageCount&&!isNaN(d)&&0<d&&(this._suspendTooltip=!0,this._loadRange((d-1)*this.nodesPerPage,this.nodesPerPage),this.currentPage=d,this.onPageChange(this.currentPage,-1))},_loadRange:function(d,c){var u=f.clone(this.items);this._loadItems(u.splice(d,c))},_setItemsAttr:function(d){this.items=
this.includeNode?f.filter(d,this.includeNode):d;0==this.items.length?(this.pageCount=1,this.onContentChange(0)):(this.pageCount=Math.ceil(this.items.length/this.nodesPerPage),this.onContentChange(this.items.length));this.currentPage=1;this.goToPage(1)},onPageChange:function(d,c){},onContentChange:function(d){},onNodeClick:function(d,c){},onNodeMouseEnter:function(d,c){},onNodeMouseLeave:function(d,c){}});f.declare("arcgisonline.sharing.dijit._GalleryContentPane",B.layout.ContentPane,{_gallery:null,
animateShowHide:!0,"class":"galleryPopup",fadeDuration:300,isShowing:!1,postCreate:function(){this.inherited(arguments);f.style(this.domNode,{position:"absolute",top:"-1000px",opacity:0});f.style(this.domNode,esriGeowConfig.isRightToLeft||-1<f.indexOf(["ar","he"],f.locale)?"right":"left","-1000px");this.fadeIn=f.fadeIn({node:this.domNode,duration:this.fadeDuration});this.fadeOut=f.fadeOut({node:this.domNode,duration:this.fadeDuration,onEnd:f.hitch(this,"_afterFade")})},_afterFade:function(){f.style(this.domNode,
{top:"-1000px"});f.style(this.domNode,esriGeowConfig.isRightToLeft?"right":"left","-1000px")},show:function(d){this.isShowing=!0;this.animateShowHide?(this.fadeOut.stop(),this.fadeIn.play()):f.style(this.domNode,"display","block")},hide:function(){this.isShowing=!1;this.animateShowHide?(this.fadeIn.stop(),this.fadeOut.play()):f.style(this.domNode,"display","none")}})})},"arcgisonline/sharing/dijit/views":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/dijit/TextMenu,arcgisonline/sharing/util,arcgisonline/pages/organization/widgets/ProfilePopup,arcgisonline/pages/portal/Portal,arcgisonline/pages/utils/arrays,arcgisonline/pages/item/_Info"],
function(f,B,l){f.provide("arcgisonline.sharing.dijit.views");f.require("arcgisonline.sharing.dijit.TextMenu");f.require("arcgisonline.sharing.util");f.require("arcgisonline.pages.organization.widgets.ProfilePopup");f.require("arcgisonline.pages.portal.Portal");f.require("arcgisonline.pages.utils.arrays");f.require("arcgisonline.pages.item._Info");arcgisonline.sharing.dijit.views.item={detailClass:"itemDetail",thumbClass:"itemThumbnail",thumbContainerClass:"itemThumbnailContainer",titleClass:"esriItemTitle",
snippetClass:"esriItemSnippet",i18n:function(){if(this._i18n)return this._i18n;this._i18n=f.i18n.getLocalization("arcgisonline","arcgisonline").common;f.mixin(this._i18n,f.i18n.getLocalization("arcgisonline","arcgisonline").viewsWidget);f.mixin(this._i18n,{source:f.i18n.getLocalization("arcgisonline","arcgisonline").itemProperties.source});f.mixin(this._i18n,{visitOrganization:f.i18n.getLocalization("arcgisonline","arcgisonline").itemProperties.visitOrganization});return this._i18n},_util:arcgisonline.sharing.util,
small:function(d,c,u){var t=f.create,e=t("div",{"class":this.detailClass+" small"}),r=this._util.getGalleryMainLinkInfo(d);c&&(c=t("div",{"class":this.thumbContainerClass},e),f.addClass(e,u),t("img",{src:this._getThumbnailUrl(d),"class":this.thumbClass},t("a",{href:r.href||"#",target:r.target,alt:r.tip,title:r.tip},c)));t("a",{href:"#",innerHTML:d.title},t("span",{"class":this.titleClass},e));u=this._util.getSnippet(d.snippet,d.description);t("span",{"class":this.snippetClass,innerHTML:u},e);d=arcgisonline.sharing.geow.Content.changeTypename(d)+
arcgisonline.sharing.dijit.views.item.i18n().spaceBy+"\x3cspan class\x3d'esriItemOwner'\x3e"+d.owner+"\x3c/span\x3e ("+this._util.toFullDateString(d.modified)+")";t("span",{innerHTML:d},e);return e},mediumFormat:function(d,c){return this.medium(c,!0,"left")},itemLinkInfo:function(d){var c=this._util.getGalleryMainLinkInfo(d);d=this._util.getItemDetailsLinkInfo(d);return{openLink:c,detailLink:d}},medium:function(d,c){var u=f.create,t=u("div",{"class":this.detailClass+" medium"});if(c.unshareHandler){var e=
u("a",{href:"#",className:"unshare esriFloatTrailing",style:{display:"none"}},t);u("img",{src:arcgisonline.sharing.util.relativeToExplicitUrl("images/delete_20x20.png"),alt:arcgisonline.sharing.dijit.views.item.i18n().removeItemFromGroup,title:arcgisonline.sharing.dijit.views.item.i18n().removeItemFromGroup},e);f.connect(e,"onclick",f.partial(c.unshareHandler,d.id,t))}var r=this.itemLinkInfo(d);e=r.openLink;r=r.detailLink;if(c.showThumb){var m=u("div",{"class":this.thumbContainerClass},t);f.addClass(t,
c.align||"left");if(d.thumbnail&&0<d.thumbnail.length){var a=u("img",{src:this._getThumbnailUrl(d),"class":this.thumbClass},u("a",{href:e.href||"#",target:e.target,alt:e.tip,title:e.tip},m));e.onclick&&f.connect(a,"onclick",e.onclick)}else a=this._util.relativeToExplicitUrl("images/web-thumbnail-error.png"),a="Web Mapping Application"==d.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/webapp.png":"Mobile Application"==d.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/mobileapp.png":"Workforce Project"==
d.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/workforceproject.png":"Hub Initiative"===d.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/hubinitiative.png":"Hub Page"===d.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/hubpage.png":"Hub Site Application"===d.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/hubsite.png":"Dashboard"===d.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/opsdashboard.png":"Geoprocessing Service"===d.type&&esriGeowConfig.self&&esriGeowConfig.self.isPortal?
arcgisonline.sharing.util.getStaticImagesUrl()+"/webtool.png":"Image"===d.type?arcgisonline.sharing.util.relativeToExplicitUrl("js/arcgisonline/sharing/dijit/css/images/image-thumb.png"):"Web Scene"===d.type||"Scene Service"===d.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/scene.png":"Ortho Mapping Template"===d.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/orthomappingtemplate.png":"Ortho Mapping Project"===d.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/orthomappingproject.png":
arcgisonline.sharing.util.getStaticImagesUrl()+"/desktopapp.png",a=u("img",{src:a,"class":this.thumbClass},u("a",{href:e.href||"#",target:e.target,alt:e.tip,title:e.tip},m)),e.onclick&&f.connect(a,"onclick",e.onclick);u("br",null,m);m=u("span",{"class":"esriItemLinks"},m);a=this._util.getItemOpenLinkObjects(d);if(0<a.length){var h=u("span",{innerHTML:e.label},u("a",{href:e.href||"#",target:e.target,alt:e.tip,title:e.tip,style:{marginRight:0}},m));e.onclick&&f.connect(h,"onclick",e.onclick);c.hideOpenMenu||
(u("span",{innerHTML:"\x26nbsp;"},m),e=u("div",{innerHTML:"","class":"dijitReset dijitInline esriArrows",title:arcgisonline.sharing.dijit.views.item.i18n().moreOptions,alt:arcgisonline.sharing.dijit.views.item.i18n().moreOptions,style:{height:"11px",cursor:"pointer"}},m),new arcgisonline.sharing.dijit.TextMenu({triggerNode:e,labelNode:h,textMenuItems:a}));u("span",{innerHTML:"\x26nbsp;\x26nbsp\x26nbsp;"},m)}null!==r&&u("span",{innerHTML:r.label},u("a",{href:r.link||"#",alt:r.tip,title:r.tip,target:r.target?
r.target:""},m))}e=u("div",{"class":"itemTextContainer"},t);u("a",{href:r.link,innerHTML:d.title,alt:r.tip,title:r.tip},u("span",{"class":this.titleClass},e));r=this._util.getSnippet(d.snippet,d.description);u("span",{"class":this.snippetClass,innerHTML:r||""},e);r=u("div",null,e);(m=this._getTypeIcon(d))&&u("span",{innerHTML:m},r);m="";m=arcgisonline.sharing.geow.Content.changeTypename(d)+arcgisonline.sharing.dijit.views.item.i18n().spaceBy;a=-1<f.indexOf(d.typeKeywords,"ArcGIS Server")||"Feature Collection"==
d.type?arcgisonline.sharing.dijit.views.item.i18n().source+" ":"";h="GeoJson"===d.type?"GeoJSON":d.type;h=-1<h.toLowerCase().indexOf("add in")?h.replace(/(add in)/ig,"Add-In"):h;u("span",{title:a+h,innerHTML:m,"class":"dim"},r);m=u("span",{"class":"esriItemAuthor"},r);m=u("a",{innerHTML:d.owner,"class":"linkNoHref",owner:d.owner,alt:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile,title:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile},m);c.showProfilePopup?(this._bindProfilePopup(m),
f.attr(m,{"class":"linkNoHref",owner:d.owner})):f.attr(m,"href",esriGeowConfig.baseUrl+"user.html?user\x3d"+d.owner);u("div",{innerHTML:"\x3cspan\x3e"+arcgisonline.sharing.dijit.views.item.i18n().lastModifiedTitle+"\x3c/span\x3e\x3cspan\x3e"+this._util.toFullDateString(d.modified)+"\x3c/span\x3e","class":"dim esriLastModified"},r);(c=arcgisonline.sharing.geow.Content._getPremiumItemNode(d))&&f.place(c,f.create("div",{className:"dim esriPremiumContent"},r,"last"));c=f.create("span",{"class":"dojoxRating dijitInline"});
9>f.isIE&&f.style(c,"zoom",0);r=f.create("ul",null,c);m=Math.round(d.avgRating);for(a=1;a<=m;a++)f.create("li",{"class":"dojoxRatingStar dijitInline dojoxRatingStarChecked"},r);for(;5>m;m++)f.create("li",{"class":"dojoxRatingStar dijitInline Hover"},r);d=this._getMsgRatings(d);u=u("span",{innerHTML:d,"class":"dim"},e);f.place(c,u,"first");return t},map:function(d,c){var u=f.create;c=c||u("div",{"class":this.detailClass+" medium"});if("public_authoritative"===d.contentStatus&&!d.orgSelf)if(esriGeowConfig.self.id&&
d.orgId===esriGeowConfig.self.id)d.orgSelf=esriGeowConfig.self;else return esri.request({url:location.protocol+"//"+esriGeowConfig.self.portalHostname+"/sharing/rest/portals/"+d.orgId+"?f\x3djson",callbackParamName:"callback",load:function(h,q){d.orgSelf=h;arcgisonline.sharing.dijit.views.item.map(d,c)},error:function(h,q){d.orgSelf={};arcgisonline.sharing.dijit.views.item.map(d,c)}}),c;var t=u("div",{"class":"itemTextContainer"},c),e=this._util.getSnippet(d.snippet,d.description);u("span",{"class":this.snippetClass,
innerHTML:e?this._util.htmlEncode(e):""},t);e=u("span",null,t);var r=this._getTypeIcon(d,!0);r&&u("span",{innerHTML:r},e);r="";r=d.url&&-1<f.indexOf(d.typeKeywords,"Hosted Service")&&(arcgisonline.sharing.util.isHostedServiceItem(d)||arcgisonline.sharing.util.portalSupportsHostedServices())?arcgisonline.sharing.geow.Content.changeTypename(d,!0)+arcgisonline.sharing.dijit.views.item.i18n().startBracket+arcgisonline.sharing.dijit.views.item.i18n().hostedService+arcgisonline.sharing.dijit.views.item.i18n().endBracket+
arcgisonline.sharing.dijit.views.item.i18n().spaceBy:arcgisonline.sharing.geow.Content.changeTypename(d,!1)+arcgisonline.sharing.dijit.views.item.i18n().spaceBy;var m=-1<f.indexOf(d.typeKeywords,"ArcGIS Server")||"Feature Collection"==d.type?arcgisonline.sharing.dijit.views.item.i18n().source+" ":"",a="GeoJson"===d.type?"GeoJSON":d.type;a=-1<a.toLowerCase().indexOf("add in")?a.replace(/(add in)/ig,"Add-In"):a;u("span",{title:m+a,innerHTML:r,"class":"dim"},e);r=u("span",{"class":"esriItemAuthor"},
e);"public_authoritative"===d.contentStatus&&d.orgSelf&&d.orgSelf.name?(r=u("a",{innerHTML:d.orgSelf.name,"class":"linkNoHref",owner:d.orgSelf.name,alt:arcgisonline.sharing.dijit.views.item.i18n().visitOrganization,title:arcgisonline.sharing.dijit.views.item.i18n().visitOrganization},r),f.connect(r,"onclick",this,function(h){arcgisonline.map.storage.saveMapInCookie(null,!1);d.orgSelf.urlKey?h=location.protocol+"//"+d.orgSelf.urlKey+"."+d.orgSelf.customBaseUrl+"/home/index.html":(h=location.protocol+
"//"+d.orgSelf.portalHostname+"/home/index.html","7443"===location.port&&(h=arcgisonline.sharing.util.getSecureUrl(baseUrl)));window.open(h)})):(r=u("a",{innerHTML:d.owner,"class":"linkNoHref",owner:d.owner,alt:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile,title:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile},r),this._bindProfilePopup(r));f.attr(r,{"class":"linkNoHref",owner:d.owner});u("div",{innerHTML:"\x3cbr/\x3e\x3cspan\x3e"+arcgisonline.sharing.dijit.views.item.i18n().lastModifiedTitle+
"\x3c/span\x3e\x3cspan\x3e"+this._util.toFullDateString(d.modified)+"\x3c/span\x3e","class":"dim esriLastModified"},e);(r=arcgisonline.sharing.geow.Content._getPremiumItemNode(d))&&f.place(r,f.create("div",{className:"dim esriPremiumContent"},e,"last"));e=f.create("span",{"class":"dojoxRating dijitInline"});9>f.isIE&&f.style(e,"zoom",0);r=f.create("ul",null,e);m=Math.round(d.avgRating);for(a=1;a<=m;a++)f.create("li",{"class":"dojoxRatingStar dijitInline dojoxRatingStarChecked"},r);for(;5>m;m++)f.create("li",
{"class":"dojoxRatingStar dijitInline Hover"},r);r=this._getMsgRatings(d);u=u("span",{innerHTML:r,"class":"dim"},t);f.place(e,u,"first");return c},_bindProfilePopup:function(d){this.popup&&this.popup.close();f.connect(d,"onclick",this,function(c){var u=f.attr(c.currentTarget,"owner");this.popup=new arcgisonline.pages.organization.widgets.ProfilePopup({username:u,opener:c.target,portal:new arcgisonline.pages.portal.Portal(esriGeowConfig.restBaseUrl)});this.popup.open()})},_getMsgRatings:function(d){var c=
"";c=1===d.numRatings?c+f.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().ratingMsg,{ratingcount:f.number.format(d.numRatings,{pattern:"#,###,###,##0"})}):c+f.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().ratingsMsg,{ratingcount:f.number.format(d.numRatings,{pattern:"#,###,###,##0"})});c=1===d.numComments?c+f.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().commentMsg,{commentcount:f.number.format(d.numComments,{pattern:"#,###,###,##0"})}):c+f.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().commentsMsg,
{commentcount:f.number.format(d.numComments,{pattern:"#,###,###,##0"})});var u=d.type;u=u?arcgisonline.pages.item._Info[u]||null:null;c=!u||"file"!==u.classification||arcgisonline.pages.utils.arrays.includes(u.types,"is-views")||arcgisonline.pages.utils.arrays.includes(u.types,"is-pdf")?1===d.numViews?c+f.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().viewMsg,{viewcount:f.number.format(d.numViews,{pattern:"#,###,###,##0"})}):c+f.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().viewsMsg,
{viewcount:f.number.format(d.numViews,{pattern:"#,###,###,##0"})}):1===d.numViews?c+f.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().downloadMsg,{downloadcount:f.number.format(d.numViews,{pattern:"#,###,###,##0"})}):c+f.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().downloadsMsg,{downloadcount:f.number.format(d.numViews,{pattern:"#,###,###,##0"})});return c=arcgisonline.sharing.dijit.views.item.i18n().startBracket+c+arcgisonline.sharing.dijit.views.item.i18n().endBracket},
_getThumbnailUrl:function(d){var c=this._util.getToken();c=c?"?token\x3d"+c:"";if(d.thumbnail)return esriGeowConfig.restBaseUrl+"content/items/"+d.id+"/info/"+d.thumbnail+c;c=this._util.relativeToExplicitUrl("images/web-thumbnail-error.png");return c="Web Mapping Application"==d.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/webapp.png":"Mobile Application"==d.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/mobileapp.png":"Workforce Project"==d.type?arcgisonline.sharing.util.getStaticImagesUrl()+
"/workforceproject.png":"Geoprocessing Service"===d.type&&esriGeowConfig.self&&esriGeowConfig.self.isPortal?arcgisonline.sharing.util.getStaticImagesUrl()+"/webtool.png":"Web Scene"==d.type||"Scene Service"===d.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/scene.png":arcgisonline.sharing.util.getStaticImagesUrl()+"/desktopapp.png"},_getTypeIcon:function(d,c){c=arcgisonline.sharing.geow.Content._getItemIconUrl(d,!0);var u=(-1<f.indexOf(d.typeKeywords,"ArcGIS Server")||"Feature Collection"==
d.type?this.i18n().source+" ":"")+("GeoJson"===d.type?"GeoJSON":d.type),t="";c&&("Web Scene"===u&&(u=-1<f.indexOf(d.typeKeywords,"ViewingMode-Local")?this.i18n().localWebScene:this.i18n().globalWebScene),t='\x3cimg src\x3d"'+c+'" alt\x3d"'+u+'" title\x3d"'+u+'" style\x3d"vertical-align:middle;"/\x3e\x26nbsp;');return t}};arcgisonline.sharing.dijit.views.group={_util:arcgisonline.sharing.util,detailClass:"itemDetail group",thumbClass:"groupThumbnail",thumbContainerClass:"itemThumbnailContainer",titleClass:"esriItemTitle",
snippetClass:"esriItemSnippet",i18n:function(){if(this._i18n)return this._i18n;this._i18n=f.i18n.getLocalization("arcgisonline","arcgisonline").common;f.mixin(this._i18n,f.i18n.getLocalization("arcgisonline","arcgisonline").viewsWidget);return this._i18n},_getThumbnailUrl:function(d){var c=this._util.getToken();return esriGeowConfig.restBaseUrl+"community/groups/"+d.id+"/info/"+d.thumbnail+(c?"?token\x3d"+c:"")},small:function(d,c,u){var t=f.create,e=t("div",{"class":this.detailClass});f.addClass(e,
"small");var r={target:"",href:"#"};c&&(c=t("div",{"class":this.thumbContainerClass},e),f.addClass(e,u||"left"),d.thumbnail&&0<d.thumbnail.length?t("img",{src:this._getThumbnailUrl(d),"class":this.thumbClass},c):t("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),"class":this.thumbClass},c));t("a",{href:r.href,target:r.target,innerHTML:d.title,alt:r.tip,title:r.tip},t("span",{"class":this.titleClass},e));u=this._util.getSnippet(d.snippet,d.description);t("span",{"class":this.snippetClass,
innerHTML:u},e);u=t("span",null,null);t("span",{innerHTML:"owned by ","class":"dim"},u);u=t("span",{"class":"esriItemAuthor"},u);t("a",{innerHTML:d.owner,href:""},u);return e},medium:function(d,c){var u=f.create,t=u("div",{"class":this.detailClass+" medium"}),e=esriGeowConfig.baseUrl+"group.html?id\x3d"+d.id;arcgisonline.sharing.dijit.views.group.i18n();arcgisonline.sharing.dijit.views.group.i18n();if(c.showThumb){var r=u("div",{"class":this.thumbContainerClass},t);f.addClass(t,c.align||"left");if(c.groupsUser){var m=
this._util.getUser();arcgisonline.sharing.geow.Community.getProfile(d.owner,f.hitch(this,function(q,n,k){n.code||n.message?u("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),"class":this.thumbClass},u("a",{href:e||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},r)):"public"===q.access||n.orgId&&n.orgId===m.accountId?d.thumbnail&&0<d.thumbnail.length?u("img",{src:this._getThumbnailUrl(d),
"class":this.thumbClass},u("a",{href:e||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},r)):u("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),"class":this.thumbClass},u("a",{href:e||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},r)):u("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),
"class":this.thumbClass},u("a",{href:e||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},r))},d))}else d.thumbnail&&0<d.thumbnail.length?u("img",{src:this._getThumbnailUrl(d),"class":this.thumbClass},u("a",{href:e||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},r)):u("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),
"class":this.thumbClass},u("a",{href:e||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},r)),u("br",null,r),f.place(this._util.getGroupLinks(d),r)}var a=u("div",{"class":"itemTextContainer"},t);u("a",{href:e,innerHTML:d.title,alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},u("span",{"class":this.titleClass},a));var h=this._util.getSnippet(d.snippet,
d.description);u("span",{"class":this.snippetClass,innerHTML:h||""},a);a=u("span",null,a);u("span",{innerHTML:arcgisonline.sharing.dijit.views.group.i18n().createdBy,"class":"dim"},a);h=u("span",{"class":"esriItemAuthor"},a);h=u("a",{innerHTML:d.owner,alt:arcgisonline.sharing.dijit.views.group.i18n().viewUserprofile,title:arcgisonline.sharing.dijit.views.group.i18n().viewUserprofile},h);c.showProfilePopup?(this._bindProfilePopup(h),f.attr(h,{"class":"linkNoHref",owner:d.owner})):f.attr(h,"href",esriGeowConfig.baseUrl+
"user.html?user\x3d"+d.owner);c=d.created;u("span",{innerHTML:"\x26nbsp;"+arcgisonline.sharing.dijit.views.group.i18n().createdOn+"\x26nbsp;"+this._util.toFullDateString(c),"class":"dim"},a);return t}};arcgisonline.sharing.dijit.views.profile={_util:arcgisonline.sharing.util,detailClass:"itemDetail",thumbClass:"profileThumbnail",thumbContainerClass:"itemThumbnailContainer",titleClass:"esriItemTitle esriProfilePopupTitle",snippetClass:"esriItemSnippet",noDescriptionText:"",i18n:function(){if(this._i18n)return this._i18n;
this._i18n=f.i18n.getLocalization("arcgisonline","arcgisonline").common;f.mixin(this._i18n,f.i18n.getLocalization("arcgisonline","arcgisonline").viewsWidget);return this._i18n},_getThumbnailUrl:function(d){var c=this._util.getToken();return esriGeowConfig.restBaseUrl+"community/users/"+d.username+"/info/"+d.thumbnail+(c?"?token\x3d"+c:"")},medium:function(d,c){arcgisonline.sharing.dijit.views.profile.noDescriptionText=arcgisonline.sharing.dijit.views.profile.i18n().userPersonalInfoMsg;arcgisonline.sharing.dijit.views.profile.memberNoDescriptionText=
arcgisonline.sharing.dijit.views.profile.i18n().memberPersonalInfoMsg;var u=arcgisonline.sharing.util.getUser(),t=f.create,e=t("div",{"class":this.detailClass});f.addClass(e,"medium");t("div",{"class":this.titleClass,innerHTML:d.fullName||d.username},e);if(u&&u.accountId&&d.accountId&&d.role&&u.accountId==d.accountId){var r="\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;";"account_publisher"===d.role?r+=arcgisonline.sharing.dijit.views.profile.i18n().publisher:"account_admin"===d.role?r+=arcgisonline.sharing.dijit.views.profile.i18n().administrator:
"account_user"===d.role&&(r+=arcgisonline.sharing.dijit.views.profile.i18n().user);t("span",{innerHTML:r},t("strong",{},e))}c.showThumb&&(r=t("div",{"class":this.thumbContainerClass},e),f.addClass(e,c.align||"left"),d.thumbnail&&0<d.thumbnail.length?t("img",{src:this._getThumbnailUrl(d),"class":this.thumbClass},r):t("img",{src:this._util.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg"),"class":this.thumbClass,style:"width:150px; height:150px;"},r));c=t("div",{"class":this.snippetClass},
t("span",{"class":"esriItemLinks"},e));r=this._util.removeHTMLTags(d.description);var m=u&&u.accountId&&d.orgId&&u.accountId===d.orgId?arcgisonline.sharing.dijit.views.profile.memberNoDescriptionText:arcgisonline.sharing.dijit.views.profile.noDescriptionText;r=0<r.length?d.description:m;r=this._util.linkifyText(r);8>f.isIE&&(r="\x3cpre class\x3d'esriProfileDesc'\x3e"+r+"\x3c/pre\x3e");t("span",{innerHTML:r,style:"white-space:pre-wrap;"},c,"only");if("undefined"!==typeof isEmbedded&&isEmbedded)return e;
c=t("div",{style:{clear:"both"},"class":"profileLinks esriItemLinks esriFloatTrailing left"},e);r=t("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"user.html?user\x3d"+d.username,innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().profile},c,"last");f.connect(r,"onclick",function(){-1<window.location.href.indexOf(esriGeowConfig.webmapViewerPath)&&arcgisonline.map.main.map&&arcgisonline.map.main.mapInitialized?arcgisonline.map.storage.saveMapInCookie(null,!0,null,null,f.hitch(this,function(){window.location=
esriGeowConfig.baseUrl+"user.html?user\x3d"+d.username})):window.location=esriGeowConfig.baseUrl+"user.html?user\x3d"+d.username});this._util.relativeToExplicitUrl("js/arcgisonline/css/images/transparent.gif");-1<window.location.href.indexOf(esriGeowConfig.webmapViewerPath)&&this._util.relativeToExplicitUrl("images/transparent.gif");r=esriGeowConfig.userRole&&esriGeowConfig.userRole.isAdmin();var a=(m=esriGeowConfig.userRole&&esriGeowConfig.userRole.isCustom())&&esriGeowConfig.userRole.canViewUsers()&&
esriGeowConfig.userRole.canViewOrgItems();u&&(u.username===d.username?t("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"content.html",innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().manageItems},c,"last"):u.accountId&&u.role&&d.orgId&&d.role&&(r||m&&a)&&u.accountId===d.orgId&&t("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"content.html?user\x3d"+d.username,innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().manageItems},c,"last"));t("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"search.html?q\x3downer:%22"+
d.username+"%22\x26restrict\x3dfalse",innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().items},c,"last");t("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"search.html?t\x3dgroups\x26q\x3downer:%22"+d.username+"%22\x26restrict\x3dfalse",innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().groups},c,"last");t("div",{style:{clear:"both",width:"100%"}},e);return e}}})},"arcgisonline/sharing/dijit/TextMenu":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/util"],function(f,
B,l){f.provide("arcgisonline.sharing.dijit.TextMenu");f.require("arcgisonline.sharing.util");f.declare("arcgisonline.sharing.dijit.TextMenu",[B._Widget],{_util:arcgisonline.sharing.util,textMenuItems:[{label:"No menu items",href:"#",iconClass:null}],labelNode:null,triggerNode:null,menu:null,handlers:[],constructor:function(d){f.mixin(this,d)},postCreate:function(){this.menu=(new B.Menu({})).placeAt(f.body());f.addClass(this.menu.domNode,"esriTextMenu");B.popup.moveOffScreen(this.menu.domNode);null!==
this.textMenuItems&&this._renderItems(this.textMenuItems);f.style(this.triggerNode,"cursor","hand");f.style(this.triggerNode,"cursor","pointer");this.handlers.push(f.connect(this.triggerNode,"onclick",this,this.show));f.connect(this.menu,"onMouseLeave",f.hitch(this,function(){this.hide()}))},show:function(d){d.preventDefault();B.popup.open({popup:this.menu,around:this.labelNode,orient:{BL:"TL",BR:"TR",TL:"BL",TR:"BR"},onExecute:f.hitch(this,this.hide),onCancel:f.hitch(this,this.hide)});this.menu.focus()},
hide:function(){B.popup.close(this.menu)},destroy:function(){this.hide();f.forEach(this.handlers,function(d){f.disconnect(d)});f.forEach(f.query(".esriTextMenuItem"),function(d){B.byNode(d).destroy()},this);this.menu.destroy();this.inherited(arguments)},_renderItems:function(d){f.forEach(d,function(c){c=new B.MenuItem(c);f.addClass(c.domNode,"esriTextMenuItem");this.menu.addChild(c)},this)}})})},"arcgisonline/pages/organization/widgets/ProfilePopup":function(){define("require exports tslib calcite-web/js/calcite-web esri/Evented dojo/keys dojo/on dojo/text!./templates/ProfilePopup.html dojo/i18n!../../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase dijit/popup dijit/TooltipDialog arcgisonline/pages/utils/icons arcgisonline/pages/utils/dom arcgisonline/pages/utils/strings arcgisonline/pages/utils/user arcgisonline/pages/utils/focus arcgisonline/pages/pageUtil arcgisonline/pages/dijit/MemberThumb arcgisonline/pages/portal/PortalUser arcgisonline/sharing/util arcgisonline/esriGeowConfig arcgisonline/sharing/dijit/_LevelAwareMixin arcgisonline/telemetry arcgisonline/tsutils/declareDecorator".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E,C,z,w,A){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);q=l.__importDefault(q);n=l.__importDefault(n);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);x=l.__importDefault(x);v=l.__importDefault(v);y=l.__importDefault(y);D=l.__importDefault(D);E=l.__importDefault(E);C=
l.__importDefault(C);z=l.__importDefault(z);w=l.__importDefault(w);A=l.__importDefault(A);return function(){function G(F,H){this.templateString=e.default;this.i18n=r.default;this.icons=n.default;this.isSelf=this.loaded=!1;this.itemTotal=0;this.canUpdateProfile=!1}G.prototype.postCreate=function(){var F;this.inherited(arguments);this.telemetry=w.default.init(this.portal,!0);this.dialog=new q.default({class:"profile-popup",title:"",content:this.domNode,_onKey:this.handleDialogKeydown.bind(this)});this.currentUser=
E.default.getUser();this.isSelf=(null===(F=this.currentUser)||void 0===F?void 0:F.username)===this.username;this.addEventListeners()};G.prototype.open=function(){this.logEvent("open");this.render()};G.prototype.close=function(){this.loaded&&(h.default.close(this.dialog),this.emit("close"),this.dialog.destroy(),this.destroy())};G.prototype.handleDialogKeydown=function(F){var H=this;if(F.keyCode===u.default.TAB)if(F.stopPropagation(),this.lastFocusItem!==F.target||F.shiftKey)F.shiftKey&&this.firstFocusItem===
F.target&&(F.preventDefault(),this.opener.focus(),this.close());else{F.preventDefault();var J=x.default.getFocusableElements(document.body);J.forEach(function(K,Q){K===H.opener&&J[Q+1].focus()});this.close()}};G.prototype.render=function(){var F=this;this.getUser(this.username).then(function(H){var J,K,Q=null===(J=F.currentUser)||void 0===J?void 0:J.userRole;J=H.orgId&&H.orgId===(null===(K=F.currentUser)||void 0===K?void 0:K.orgId);K=(null===Q||void 0===Q?void 0:Q.isAdmin())&&J;F.canUpdateProfile=
F.isSelf||K||(null===Q||void 0===Q?void 0:Q.canUpdateUsers())&&J;H.fullName||(H.fullName=b.default.createFullName(H));Q=H.username;K=H.groups;J=H.description;H.thumbnailUrl||(H.thumbnailUrl="");new y.default({member:new D.default(l.__assign(l.__assign({},H),{portal:F.portal})),showName:!0},F.domNode.querySelector(".js-member-thumb"));J&&(J=g.default.escapeNewlines(g.default.addHyperlinks(g.default.restoreNewlines(J))));F.bioEl.innerHTML=g.default.insertHTMLLineBreaks(J);J||k.default.hideNode(F.bioContainer);
K?F.renderGroups(K):F.getUserGroups(Q).then(function(P){F.renderGroups(P.results)});F.user=H;F.getUserItems(Q).then(function(P){P.total&&(F.itemCountEl.textContent=F.itemTotal=P.total,k.default.showNode(F.itemsSection));F.showContent();F.checkIfHideProfileLink()},function(){F.showContent();F.checkIfHideProfileLink()});Q=F.i18n.myOrganization.formatters.viewUserProfile.replace("${username}",H.fullName);F.viewProfileBtn.setAttribute("aria-label",Q);Q=F.i18n.userProfile.viewUserGroup.replace("${username}",
H.fullName);F.viewGroupsBtn.setAttribute("aria-label",Q);H=F.i18n.userProfile.viewUserItem.replace("${username}",H.fullName);F.viewItemsBtn.setAttribute("aria-label",H)})};G.prototype.checkIfHideProfileLink=function(){this.itemTotal||this.canUpdateProfile||k.default.hideNode(this.viewProfileBtn)};G.prototype.renderGroups=function(F){F&&F.length?k.default.createElement("arcgis-group-thumbnail-stack",{portal:this.portal,groups:F,maxGroups:5,tooltip:!0},this.groupIcons):k.default.hideNode(this.groupsSection)};
G.prototype.getUserItems=function(F){var H;return E.default.request({url:"".concat(C.default.restBaseUrl,"search"),content:{q:'owner:"'.concat(F,'" ').concat((null===(H=null===C.default||void 0===C.default?void 0:C.default.viewQueries)||void 0===H?void 0:H.none)||""),sortField:"relevance",sortOrder:"desc",num:100}})};G.prototype.getUserGroups=function(F){return E.default.request({url:"".concat(C.default.restBaseUrl,"community/groups"),content:{q:'(owner:"'.concat(F,'")')}})};G.prototype.showContent=
function(){var F=this;this.groupsSection.classList.contains("hide")&&this.itemsSection.classList.contains("hide")&&!this.bioEl.innerHTML&&k.default.hideNode(this.bottomSection);this.loader.classList.remove("is-active");k.default.showNode(this.content);this.loaded=!0;h.default.open({popup:this.dialog,orient:["below","above"],around:this.opener,onCancel:function(){F.opener.focus();F.close()}});var H=x.default.getFocusableElements(this.dialog.domNode);this.firstFocusItem=H[0];this.lastFocusItem=H[H.length-
1];this.firstFocusItem.focus();this.dialog.domNode.parentElement.classList.add("profile-popup__container");this.dialogClass&&this.dialog.domNode.parentElement.classList.add(this.dialogClass);setTimeout(function(){k.default.showHide(F.bioToggle,F.bioEl.scrollHeight>F.bioEl.clientHeight)},100)};G.prototype.getUser=function(F){return E.default.request({url:"".concat(C.default.restBaseUrl,"community/users/").concat(F)})};G.prototype.addEventListeners=function(){var F=this;this.own((0,t.default)(this.closeIcon,
"click",function(){h.default.close(F.dialog)}),(0,t.default)(this.domNode,"click",function(H){H.stopPropagation()}),(0,t.default)(document.body,"click",function(){F.close()}),(0,t.default)(this.groupsSection,"click",function(){F.logEvent("view all groups");v.default.goToPage("groups",F.user)}),(0,t.default)(this.itemsSection,"click",function(){F.logEvent("view all content");v.default.goToPage("content",F.user)}),(0,t.default)(this.viewProfileBtn,"click",function(){F.logEvent("view profile");window.open("".concat(C.default.baseUrl,
"user.html").concat(F.isSelf?"":"?user\x3d".concat(encodeURIComponent(F.username))),"_blank")}),(0,t.default)(this.bioToggle,"click",function(){return F.handleBioToggleClick()}));d.default.bus.on("dropdown:toggle",function(H){F.close()})};G.prototype.handleBioToggleClick=function(){this.bioContainer.classList.toggle("profile-popup__bio-container--expanded")};G.prototype.logEvent=function(F){var H;null===(H=this.telemetry)||void 0===H?void 0:H.logEvent({category:"profile popup",action:F})};return G=
l.__decorate([(0,A.default)(a.default,m.default,z.default,c.default)],G)}()})},"calcite-web/js/calcite-web":function(){(function(f,B){"object"===typeof exports&&"undefined"!==typeof module?module.exports=B():"function"===typeof define&&define.amd?define(B):f.calcite=B()})(this,function(){function f(ia,R){for(;R;R=R.parentNode){var S=R&&R.getAttribute&&R.getAttribute("class")||"";S=(new RegExp("(\\s|^)"+ia+"(\\s|$)")).test(S);if(1===R.nodeType&&S)break}return R}function B(ia){return Array.isArray(ia)?
ia:Array.prototype.slice.call(ia)}function l(ia,R){ia=(R||document).querySelectorAll(ia);return B(ia)}function d(ia,R){return(new RegExp("(\\s|^)"+R+"(\\s|$)")).test(ia.getAttribute("class"))}function c(ia,R){R.split(" ").forEach(function(S){if(!d(ia,S)){var M=ia.getAttribute("class")||"";ia.setAttribute("class",M+" "+S)}})}function u(ia,R){R.split(" ").forEach(function(S){var M=(ia.getAttribute("class")||"").replace(new RegExp("(\\s|^)"+S+"(\\s|$)","g"),"$2");d(ia,S)&&ia.setAttribute("class",M)})}
function t(ia){ia=B(ia);ia.forEach(function(R){u(R,"is-active")})}function e(ia,R){t(ia);c(R,"is-active")}function r(ia,R,S){if(ia.addEventListener)return ia.addEventListener(R,S,!1);if(ia.attachEvent)return ia.attachEvent("on"+R,S)}function m(ia,R,S){if(ia.removeEventListener)return ia.removeEventListener(R,S,!1);if(ia.detachEvent)return ia.detachEvent("on"+R,S)}function a(ia){if(ia.preventDefault)return ia.preventDefault();ia.returnValue&&(ia.returnValue=!1)}function h(ia){ia=ia||window.event;if(ia.stopPropagation)return ia.stopPropagation();
ia.cancelBubble&&(ia.cancelBubble=!0)}function q(){}function n(ia){for(var R="",S=0;S<ia;S++)R+=(65536*(1+Math.random())|0).toString(16).substring(1);return R}function k(ia){if(!ia)throw new TypeError("Invalid argument `value` has no value.");this.value=k.EMPTY;ia&&ia instanceof k?this.value=ia.toString():ia&&"[object String]"===Object.prototype.toString.call(ia)&&k.isGuid(ia)&&(this.value=ia);this.equals=function(R){return k.isGuid(R)&&this.value===R};this.isEmpty=function(){return this.value===
k.EMPTY};this.toString=function(){return this.value};this.toJSON=function(){return this.value}}function g(ia){h(ia);ia=f("accordion-section",ia.target||ia.srcElement);L.emit("accordion:toggle",{node:ia})}function b(ia){var R=ia.node;d(R,"is-active")?u(R,"is-active"):c(R,"is-active");(ia=ia.node.querySelector(".accordion-title"))&&(ia.getAttribute("aria-expanded")?ia.removeAttribute("aria-expanded"):ia.setAttribute("aria-expanded","true"))}function x(ia){13!==ia.keyCode&&32!==ia.keyCode||!d(ia.target||
ia.srcElement,"accordion-title")||(a(ia),h(ia),g(ia))}function v(ia){var R=l(".js-accordion");ia?y(ia.node):R.forEach(function(S){y(S)})}function y(ia){ia.setAttribute("aria-live","polite");ia.setAttribute("role","tablist");B(ia.children).forEach(function(R){var S=R.querySelector(".accordion-title"),M=R.querySelector(".accordion-content"),X=M.id||k.raw();M.id=X;S.setAttribute("role","tab");S.setAttribute("tabindex","0");S.setAttribute("aria-controls",X);d(R,"is-active")&&S.setAttribute("aria-expanded",
"true");var fa=!1;N.accordions.forEach(function(ea){ea.target===S&&"click"===ea.event&&ea.fn===g&&(fa=!0)});fa||(N.accordions.push({target:S,event:"click",fn:g}),N.accordions.push({target:R,event:"keydown",fn:x}),r(S,"click",g),r(R,"keydown",x))})}function D(){Z||(L.on("accordion:bind",v),L.on("accordion:toggle",b),Z=!0);L.emit("accordion:bind")}function E(ia){m(document.body,"click",E);l(".js-dropdown").forEach(function(R){u(R,"is-active")});l(".js-dropdown-toggle").forEach(function(R){R.setAttribute("aria-expanded",
"false")});m(document,"keydown",w);m(document.body,"focusin",C)}function C(ia){ia.target&&!f("js-dropdown",ia.target)&&L.emit("dropdown:close")}function z(ia){if(ia){var R=d(ia.node,"is-active");L.emit("dropdown:close");R||(c(ia.node,"is-active"),ia.target&&ia.target.setAttribute("aria-expanded","true"),r(document,"keydown",w));d(ia.node,"is-active")&&(r(document.body,"click",E),r(document.body,"focusin",C))}}function w(ia){40===ia.keyCode|38===ia.keyCode&&ia.preventDefault()}function A(ia){l(".js-dropdown-toggle").forEach(function(R){var S=
!1;N.dropdowns.forEach(function(M){M.target===R&&"click"===M.event&&M.fn===K&&(S=!0)});S||(N.dropdowns.push({target:R,event:"click",fn:K}),r(R,"click",K))})}function G(){var ia=document.querySelector(".js-dropdown.is-active");return ia?ia:!1}function F(ia){var R=ia.links.indexOf(document.activeElement);-1===R?R=ia.forward?0:ia.links.length-1:ia.forward?(R+=1,R===ia.links.length&&(R=0)):(--R,-1===R&&(R=ia.links.length-1));ia.links[R].focus()}function H(){var ia=G();ia&&(ia=l(".dropdown-link",ia).filter(function(R){return null!==
R.offsetParent}),L.emit("dropdown:focus",{links:ia,forward:!0}))}function J(){var ia=G();ia&&(ia=l(".dropdown-link",ia).filter(function(R){return null!==R.offsetParent}),L.emit("dropdown:focus",{links:ia,forward:!1}))}function K(ia){a(ia);h(ia);var R=f("js-dropdown",ia.target);L.emit("dropdown:toggle",{node:R,target:ia.target})}function Q(){aa||(L.on("dropdown:toggle",z),L.on("dropdown:close",E),L.on("keyboard:escape",E),L.on("keyboard:arrow:down",H),L.on("keyboard:arrow:up",J),L.on("dropdown:focus",
F),aa=!0);A()}function P(){L.on("scrolling:at",function(R){ia.forEach(function(S){var M=S.element;d(S.element,"is-sticky")&&(M=S.element.getAttribute("data-sticky-id"),M=document.querySelector('.js-shim[data-sticky-id\x3d"'+M+'"]'));if(M){var X=M.getAttribute("data-top")||0;S.top=M.offsetTop-parseInt(X,0)}S.top<R?L.emit("sticky:stick",S):L.emit("sticky:unstick",S)})});L.on("sticky:stick",function(R){var S=R.element.getAttribute("data-sticky-id"),M=document.querySelector('.js-shim[data-sticky-id\x3d"'+
S+'"]');S&&M&&(c(R.element,"is-sticky"),M.style.display="")});L.on("sticky:unstick",function(R){var S=R.element.getAttribute("data-sticky-id"),M=document.querySelector('.js-shim[data-sticky-id\x3d"'+S+'"]');S&&M&&(u(R.element,"is-sticky"),M.style.display="none")});var ia=l(".js-sticky").map(function(R){var S=R.offsetTop,M=R.getAttribute("data-top")||0;R.style.top=M+"px";if(!R.getAttribute("data-sticky-id")){var X=k.raw();R.setAttribute("data-sticky-id",X);var fa=R.parentNode,ea=R.cloneNode("deep");
c(ea,"js-shim");u(ea,"js-sticky");ea.setAttribute("data-sticky-id",X);ea.style.visibility="hidden";ea.style.display="none";fa.insertBefore(ea,R)}return{top:S-parseInt(M,0),element:R}})}function I(){function ia(X){var fa=X.getAttribute("data-tab");if(fa)return fa;fa=k.raw();X.setAttribute("data-tab",fa);return fa}function R(X){var fa=X.target;d(fa,"js-tab")||(fa=X.currentTarget);X=f("js-tab-group",fa);var ea=ia(X);return{parent:X,id:ea,active:fa}}function S(X){X.preventDefault();X=R(X);L.emit("tabs:active",
X)}function M(X){var fa=R(X);if(13===X.keyCode||32===X.keyCode)X.preventDefault(),L.emit("tabs:active",fa);if(39===X.keyCode||37===X.keyCode){var ea=B(fa.parent.querySelectorAll(".js-tab")),ha=ea.indexOf(document.activeElement);-1<ha&&d(document.activeElement,"js-tab")&&(fa=ea[ha+1]||ea[0],ea=ea[ha-1]||ea[ea.length-1],(39===X.keyCode?fa:ea).focus())}}L.on("tabs:bind",function(){var X=l(".js-tab"),fa=l(".js-tab-group"),ea=l(".js-tab-section");fa.forEach(function(ha){ha.setAttribute("aria-live","polite");
ia(ha);ha.children[0].setAttribute("role","tablist");ha=ha.querySelectorAll(".js-tab");for(var ra=100/ha.length,Aa=0;Aa<ha.length;Aa++)ha[Aa].style.maxWidth=ra+"%"});X.forEach(function(ha){ha.setAttribute("aria-expanded","false");ha.setAttribute("role","tab");ha.setAttribute("tabindex","0");r(ha,"click",S);r(ha,"keydown",M)});ea.forEach(function(ha){ha.setAttribute("role","tabpanel");d(ha,"is-active")?ha.setAttribute("aria-expanded",!0):ha.setAttribute("aria-expanded",!1)})});L.on("tabs:active",function(X){var fa=
X.parent,ea=B(fa.querySelectorAll(".js-tab"));X=X.active;fa=B(fa.querySelectorAll(".js-tab-section"));var ha=ea.indexOf(X);ha=fa[ha];ea.forEach(function(ra){ra.setAttribute("aria-expanded",!1)});X.setAttribute("aria-expanded",!0);e(ea,X);fa.forEach(function(ra){ra.setAttribute("aria-expanded",!1)});ha.setAttribute("aria-expanded",!0);e(fa,ha);X.focus()});L.emit("tabs:bind")}var N={dropdowns:[],accordions:[],modals:[]};q.prototype={on:function(ia,R,S){var M=this.e||(this.e={});(M[ia]||(M[ia]=[])).push({fn:R,
ctx:S});return this},once:function(ia,R,S){function M(){X.off(ia,M);R.apply(S,arguments)}var X=this;M._=R;return this.on(ia,M,S)},emit:function(ia){var R=[].slice.call(arguments,1),S=((this.e||(this.e={}))[ia]||[]).slice(),M=0,X=S.length;for(M;M<X;M++)S[M].fn.apply(S[M].ctx,R);return this},off:function(ia,R){var S=this.e||(this.e={}),M=S[ia],X=[];if(M&&R)for(var fa=0,ea=M.length;fa<ea;fa++)M[fa].fn!==R&&M[fa].fn._!==R&&X.push(M[fa]);X.length?S[ia]=X:delete S[ia];return this}};var L=new q,W=RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$",
"i");k.EMPTY="00000000-0000-0000-0000-000000000000";k.isGuid=function(ia){return ia&&(ia instanceof k||W.test(ia.toString()))};k.create=function(){return new k([n(2),n(1),n(1),n(1),n(3)].join("-"))};k.raw=function(){return[n(2),n(1),n(1),n(1),n(3)].join("-")};var Z=!1,aa=!1;r(document,"keyup",function(ia){27===ia.keyCode?L.emit("keyboard:escape"):13===ia.keyCode?L.emit("keyboard:return"):32===ia.keyCode?L.emit("keyboard:space"):38===ia.keyCode?L.emit("keyboard:arrow:up"):40===ia.keyCode?L.emit("keyboard:arrow:down"):
37===ia.keyCode?L.emit("keyboard:arrow:left"):39===ia.keyCode&&L.emit("keyboard:arrow:right")});r(window,"scroll",function(ia,R,S){var M,X,fa;var ea=function(){M=!1;X&&(fa.apply(S,X),X=!1)};return fa=function(){M?X=arguments:(ia.apply(S,arguments),setTimeout(ea,R),M=!0)}}(function(){L.emit("scrolling:at",window.pageYOffset)},100));return{bus:L,accordion:D,dropdown:Q,sticky:P,tabs:I,init:function(){[D,Q,P,I].forEach(function(ia){ia()})}}})},"dijit/TooltipDialog":function(){define("dojo/_base/declare dojo/dom-class dojo/has dojo/keys dojo/_base/lang dojo/on ./focus ./layout/ContentPane ./_DialogMixin ./form/_FormMixin ./_TemplatedMixin dojo/text!./templates/TooltipDialog.html ./main".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q){f=f("dijit.TooltipDialog",[e,a,m,r],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:h,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments);this.own(u(this.domNode,"keydown",c.hitch(this,"_onKey")))},orient:function(n,k,g){n={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft",
"TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[k+"-"+g];B.replace(this.domNode,n,this._currentOrientClass||"");this._currentOrientClass=n},focus:function(){this._getFocusItems();
t.focus(this._firstFocusItem)},onOpen:function(n){this.orient(this.domNode,n.aroundCorner,n.corner);var k=n.aroundNodePos;"M"==n.corner.charAt(0)&&"M"==n.aroundCorner.charAt(0)?(this.connectorNode.style.top=k.y+(k.h-this.connectorNode.offsetHeight>>1)-n.y+"px",this.connectorNode.style.left=""):"M"==n.corner.charAt(1)&&"M"==n.aroundCorner.charAt(1)&&(this.connectorNode.style.left=k.x+(k.w-this.connectorNode.offsetWidth>>1)-n.x+"px");this._onShow()},onClose:function(){this.onHide()},_onKey:function(n){if(n.keyCode==
d.ESCAPE)this.defer("onCancel"),n.stopPropagation(),n.preventDefault();else if(n.keyCode==d.TAB){var k=n.target;this._getFocusItems();this._firstFocusItem==this._lastFocusItem?(n.stopPropagation(),n.preventDefault()):k==this._firstFocusItem&&n.shiftKey?(t.focus(this._lastFocusItem),n.stopPropagation(),n.preventDefault()):k!=this._lastFocusItem||n.shiftKey?n.stopPropagation():(t.focus(this._firstFocusItem),n.stopPropagation(),n.preventDefault())}}});l("dojo-bidi")&&f.extend({_setTitleAttr:function(n){this.containerNode.title=
this.textDir&&this.enforceTextDirWithUcc?this.enforceTextDirWithUcc(null,n):n;this._set("title",n)},_setTextDirAttr:function(n){this._created&&this.textDir==n||(this._set("textDir",n),this.textDir&&this.title&&(this.containerNode.title=this.enforceTextDirWithUcc(null,this.title)))}});return f})},"arcgisonline/pages/utils/dom":function(){define("require exports tslib ./strings dojo/dom-style preact".split(" "),function(f,B,l,d,c,u){d=l.__importDefault(d);c=l.__importDefault(c);return function(){function t(){}
t.createElement=function(e,r,m){m||(m=document.createElement("div"),document.body.appendChild(m));var a=document.createElement(e);Object.keys(r||{}).forEach(function(h){a[h]=r[h]});m.appendChild(a);return a};t.removeComponent=function(e,r){(0,u.render)(null,e);r.removeChild(e)};t.addStylesheet=function(e){var r=document.createElement("link");r.rel="stylesheet";r.type="text/css";r.href=e;document.head.appendChild(r)};t.isHidden=function(e){var r=["none","none !important","none!important"],m=["hidden",
"hidden !important","hidden!important"],a="".concat(c.default.get(e,"visibility")),h="".concat(c.default.get(e,"display"));return e&&(-1<r.indexOf(h)||-1<m.indexOf(a))};t.hideNode=function(e){null===e||void 0===e?void 0:e.classList.add("hide")};t.hideNodes=function(e){if(e)if(e.forEach)e.forEach(this.hideNode);else for(var r=0;r<e.length;r++)this.hideNode(e[r])};t.showNode=function(e){null===e||void 0===e?void 0:e.classList.remove("hide")};t.showNodes=function(e){if(e)if(e.forEach)e.forEach(this.showNode);
else for(var r=0;r<e.length;r++)this.showNode(e[r])};t.showHide=function(e,r){null===e||void 0===e?void 0:e.classList[r?"remove":"add"]("hide")};t.showHideAll=function(e,r){var m=this;null===e||void 0===e?void 0:e.forEach(function(a){return m.showHide(a,r)})};t.addRemoveClass=function(e,r,m){null===e||void 0===e?void 0:e.classList[m?"add":"remove"](r)};t.addRemoveClassAll=function(e,r,m){var a=this;null===e||void 0===e?void 0:e.forEach(function(h){return a.addRemoveClass(h,r,m)})};t.setVisibility=
function(e,r){null===e||void 0===e?void 0:e.classList[r?"remove":"add"]("visibility-hidden")};t.toggleHide=function(e){null===e||void 0===e?void 0:e.classList.toggle("hide")};t.toggleHideAll=function(e){null===e||void 0===e?void 0:e.forEach(function(r){r.classList.toggle("hide")})};t.activateNode=function(e){null===e||void 0===e?void 0:e.classList.add("is-active")};t.deactivateNode=function(e){null===e||void 0===e?void 0:e.classList.remove("is-active")};t.canBeDisabled=function(e){return e instanceof
HTMLInputElement||e instanceof HTMLButtonElement||e instanceof HTMLFieldSetElement||e instanceof HTMLOptGroupElement||e instanceof HTMLOptionElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement};t.isDisabled=function(e){var r;return null!==(r=null===e||void 0===e?void 0:e.disabled)&&void 0!==r?r:!1};t.disableNode=function(e,r){e&&(e.disabled=r)};t.disableNodes=function(e,r){var m=this;null===e||void 0===e?void 0:e.forEach(function(a){m.disableNode(a,r)})};t.isNodeVisible=function(e){return 0!==
(null===e||void 0===e?void 0:e.offsetHeight)};t.isChecked=function(e){var r;return null!==(r=null===e||void 0===e?void 0:e.checked)&&void 0!==r?r:!1};t.checkNode=function(e,r){e&&(e.checked=r)};t.selectOption=function(e,r){if(e)for(var m=0;m<e.length;m++){var a=e[m];if(d.default.areEqual(a.value,r)){a.selected=!0;break}}};t.getSelectedOption=function(e){if(e)for(var r=0;r<e.length;r++){var m=e[r];if(m.selected)return m}return null};t.addClasses=function(e,r){e&&(null===r||void 0===r?0:r.length)&&
r.forEach(function(m){e.classList.add(m)})};t.removeClasses=function(e,r){e&&(null===r||void 0===r?0:r.length)&&r.forEach(function(m){e.classList.remove(m)})};t.setModifierClass=function(e,r,m){var a,h=new RegExp("(^| )".concat(r,"\\S+"),"g");(h=null===(a=e.className.match(h))||void 0===a?void 0:a[0].replace(/ +/g,""))&&e.classList.remove(h);e.classList.add("".concat(r).concat(m))};t.appendChildren=function(e,r){var m=document.createDocumentFragment();null===e||void 0===e?void 0:e.forEach(function(a){m.appendChild(a)});
null===r||void 0===r?void 0:r.appendChild(m)};t.forEachNode=function(e,r,m){for(var a=0;a<e.length;a++)null===r||void 0===r?void 0:r.call(m,e[a],a)};t.nodeListToArray=function(e){return Array.prototype.slice.call(e)};t.querySelectorAllAsArray=function(e,r){return this.nodeListToArray(r.querySelectorAll(e))};return t}()})},"arcgisonline/pages/utils/focus":function(){define(["require","exports","tslib","./dom"],function(f,B,l,d){d=l.__importDefault(d);return function(){function c(){}c.getFocusableElements=
function(u){u=u.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex\x3d"-1"]), iframe');for(var t=[],e=0;e<u.length;e++){var r=u[e];null===r.offsetParent||d.default.canBeDisabled(r)&&r.disabled||t.push(r)}return t};c.trapFocus=function(u){function t(r){var m=e(),a=m[0];m=m[m.length-1];if("Tab"===r.key||9===r.keyCode)r.shiftKey?document.activeElement===a&&(m.focus(),r.preventDefault()):document.activeElement===m&&(a.focus(),r.preventDefault())}var e=this.getFocusableElements.bind(this,
u);u.addEventListener("keydown",t);return t};c.untrapFocus=function(u,t){u.removeEventListener("keydown",t)};return c}()})},"arcgisonline/pages/dijit/MemberThumb":function(){define("require exports tslib dojo/on dojo/text!./MemberThumb/templates/MemberThumb.html dijit/_TemplatedMixin dijit/_WidgetBase ../utils/formatters ../utils/strings ../utils/icons ../utils/dom ../../tsutils/declareDecorator arcgisonline/esriGeowConfig".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h,q){d=l.__importDefault(d);c=l.__importDefault(c);
u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);q=l.__importDefault(q);return function(){function n(k,g){this.icons=m.default;this.templateString=c.default;this.hide=e.default.hide;this.show=e.default.show;this.cssClasses="";this.showTooltip=this.showName=!1;this.scale="l";this.isCustomSize=!1}n.prototype.postMixInProperties=function(){var k,g,b;this.inherited(arguments);if(this.member.thumbnailUrl&&
this.member.thumbnailUrl!==this.member.defaultThumbnailUrl){var x=(null===(g=null===(k=q.default.userInfo)||void 0===k?void 0:k.credential)||void 0===g?void 0:g.token)||(null===(b=q.default.userInfo)||void 0===b?void 0:b.token);x&&-1===this.member.thumbnailUrl.indexOf("token")&&(this.member.thumbnailUrl+="".concat(-1<this.member.thumbnailUrl.indexOf("?")?"\x26":"?","token\x3d").concat(x));this.member.initials="";this.member.backgroundColor="#FFFFFF"}else this.showInitials()};n.prototype.postCreate=
function(){var k=this;this.inherited(arguments);this.showTooltip&&(this.domNode.setAttribute("aria-label",this.member.fullName),this.domNode.classList.add("tooltip"));if(this.isCustomSize)this.content&&(this.member.backgroundColor&&(this.content.style.backgroundColor=this.member.backgroundColor),this.content.classList.add("member-thumb")),this.own((0,d.default)(this.img,"error",function(){return k.showInitials()})),a.default.showNode(this.customContainer);else{this.customContainer.remove();var g=
document.createElement("arcgis-user-avatar");g.classList.add("flex");g.user=this.member;g.portal=this.member.portal;g.scale=this.scale;if(g.showName=this.showName)g.description=this.member.username;this.domNode.querySelector(".js-mask").insertAdjacentElement("beforebegin",g)}};n.prototype.showInitials=function(){if(this.member.fullName.trim()){var k=this.member.fullName.split(" ");this.member.initials=k[0].substring(0,1)+(k[1]?k[1].substring(0,1):"")}else this.member.username&&(this.member.initials=
this.member.username.substring(0,2));this.initials&&(this.initials.textContent=this.member.initials);this.member.backgroundColor=this._getMemberFillColor(this.member);this.content&&(this.content.style.backgroundColor=this.member.backgroundColor);a.default.hideNode(this.img);a.default.showNode(this.initials)};n.prototype._getMemberFillColor=function(k){var g=k.id?k.id.substr(k.id.length-6):"";r.default.isValidHex(g)||(g=r.default.stringToHex(k.username));k=r.default.hexToRgb(g);return"rgba("+k.r+","+
k.g+","+k.b+", 0.2)"};return n=l.__decorate([(0,h.default)(t.default,u.default)],n)}()})},"arcgisonline/telemetry":function(){define(["require","exports","tslib","./esriGeowConfig","telemetry/telemetry.dojo.min"],function(f,B,l,d,c){Object.defineProperty(B,"__esModule",{value:!0});d=l.__importDefault(d);c=l.__importDefault(c);f=function(){function u(){}u.init=function(t,e){if(this._instance)return this._instance;this._envCredentials=JSON.parse(atob(d.default.telemetryConfig||"Int9Ig\x3d\x3d"));if(JSON.stringify(this._envCredentials)!==
JSON.stringify("{}"))return e=new c.default({disabled:!(d.default.usageTrackingEnabled&&!t.disabled&&!t.config.isPortal),portal:t.config,amazon:this._getAmazonCredentials(t)}),"logPageView"in t&&!0!==t.logPageView||(null===e||void 0===e?void 0:e.logEvent({eventType:"pageView",pageName:this.getPageName(),path:window.location.pathname,pageUrl:window.location.href})),this._instance=e};u.getPageName=function(){if(!window.location.pathname||!window.location.pathname.includes(".html")||window.location.pathname.includes("index.html"))return"home";
var t=window.location.pathname.split("/").find(function(e){return e.includes(".html")});return t?t.replace(".html",""):"ArcGIS"};u._getAmazonCredentials=function(t){var e=this._getEnvironment(t.config.portalHostname);return{userPoolID:this._envCredentials[e].userPoolID,app:{name:t.name||"Arcgis Online",id:this._envCredentials[e].appId,version:t.config.currentVersion||"5.2"}}};u._getEnvironment=function(t){t=t.replace("www.","");return"arcgis.com"===t&&"production"||"qaext.arcgis.com"===t&&"qa"||"dev"};
return u}();B.default=f})},"telemetry/telemetry.dojo.min":function(){define(function(){function f(R,S){var M=new XMLHttpRequest;M.addEventListener("load",function(){S(M.responseText)});M.open(R.method,R.url);Object.keys(R.headers).forEach(function(X){M.setRequestHeader(X,R.headers[X])});M.send(R.body)}function B(R,S){var M=D.get(A);if(M&&Date.now()/1E3<M.Expiration)return S(M);l(R,function(X){D.set(A,X);S(X)})}function l(R,S){var M=w({},G);M.headers["X-Amz-Target"]="AWSCognitoIdentityService.GetId";
M.body=JSON.stringify({IdentityPoolId:R});f(M,function(X){d(JSON.parse(X),S)})}function d(R,S){var M=w({},G);M.headers["X-Amz-Target"]="AWSCognitoIdentityService.GetCredentialsForIdentity";M.body=JSON.stringify({IdentityId:R.IdentityId});f(M,function(X){X=JSON.parse(X);S(X.Credentials)})}function c(){var R=void 0,S=D.get(H);var M=((!S||Date.now()>S.expiration)&&(R=!0,S={id:Math.floor(17592186044416*(1+Math.random())).toString(16),startTimestamp:(new Date).toISOString()}),S.expiration=Date.now()+F,
D.set(H,S),R&&(S.new=!0),S);S=D.get(J);R=(S||(S=u()+u()+"-"+u()+"-"+u()+"-"+u()+"-"+u()+u()+u(),D.set(J,S)),S);return{session:M,id:R}}function u(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function t(R,S){var M={host:S.uri.host,"content-type":R.config.defaultContentType,accept:R.config.defaultAcceptType,"x-amz-date":r(S.signDate)};S.request.method=S.request.method.toUpperCase();S.request.body?S.payload=S.request.body:S.request.data&&R.payloadSerializer?S.payload=R.payloadSerializer(S.request.data):
delete M["content-type"];S.request.headers=m(M,Object.keys(S.request.headers||{}).reduce(function(X,fa){return X[fa.toLowerCase()]=S.request.headers[fa],X},{}));S.sortedHeaderKeys=Object.keys(S.request.headers).sort();S.request.headers["content-type"]&&(S.request.headers["content-type"]=S.request.headers["content-type"].split(";")[0]);"object"===E(S.request.params)&&m(S.uri.queryParams,S.request.params)}function e(R,S){S.signedHeaders=S.sortedHeaderKeys.map(function(M){return M.toLowerCase()}).join(";");
S.canonicalRequest=String(S.request.method).toUpperCase()+"\n"+encodeURI(S.uri.path)+"\n"+Object.keys(S.uri.queryParams).sort().map(function(M){return encodeURIComponent(M)+"\x3d"+encodeURIComponent(S.uri.queryParams[M])}).join("\x26")+"\n"+S.sortedHeaderKeys.map(function(M){return M.toLocaleLowerCase()+":"+S.request.headers[M]}).join("\n")+"\n\n"+S.signedHeaders+"\n"+R.hasher.hash(S.payload?S.payload:"")}function r(R,S){R=R.toISOString().replace(/[:\-]|\.\d{3}/g,"").substr(0,17);return S?R.substr(0,
8):R}function m(R){return[].slice.call(arguments,1).forEach(function(S){S&&"object"===(void 0===S?"undefined":E(S))&&Object.keys(S).forEach(function(M){var X=S[M];void 0!==X&&(null!==X&&"object"===(void 0===X?"undefined":E(X))?(R[M]=Array.isArray(X)?[]:{},m(R[M],X)):R[M]=X)})}),R}function a(R){var S=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},M=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},X=c().session;return{eventType:"pageView",timestamp:(new Date).toISOString(),session:{id:X.id,
startTimestamp:X.startTimestamp},attributes:w({referrer:document.referrer,hostname:window.location.hostname,path:R||window.location.pathname,pageUrl:R||window.location.pathname,pageName:document.title,previousPageUrl:S.pageUrl,previousPageName:S.pageName},h(M)),metrics:q(M)}}function h(R){var S=w({},R);return delete S.workflow,I.forEach(function(M){return delete S[M]}),Object.keys(S).forEach(function(M){S[M]="json"===M?S[M]?JSON.stringify(S[M]):"null":void 0!==S[M]?S[M].toString():"null"}),S}function q(R){var S=
{};return I.forEach(function(M){R[M]&&(S[M]=R[M])}),S}function n(){var R=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},S=arguments[1];return(new P({region:"us-east-1",service:"mobileanalytics",accessKeyId:R.AccessKeyId,secretAccessKey:R.SecretKey,sessionToken:R.SessionToken})).sign(S)}function k(R,S,M){var X=c();R=Array.isArray(R)?R:[R];var fa=g(R);B(S,function(ea){try{fa.headers=n(ea,fa),fa.headers["x-amz-Client-Context"]=JSON.stringify({client:{client_id:X.id,app_title:M.name,app_version_name:M.version||
"unknown"},services:{mobile_analytics:{app_id:M.id}}})}catch(ha){return}f(fa,function(ha){})})}function g(R){return{url:1<arguments.length&&void 0!==arguments[1]?arguments[1]:N,method:"POST",body:JSON.stringify({events:R})}}function b(R){window.ga&&window.ga(function(){R(window.ga.getAll())})}function x(R,S){return y({hitType:"pageview",page:R||window.location.pathname},S,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},3<arguments.length&&void 0!==arguments[3]?arguments[3]:{})}function v(R){return y({hitType:"event",
eventCategory:R.category||"none",eventAction:R.action,eventLabel:R.label},R,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:{})}function y(R,S,M,X){return Object.keys(M).forEach(function(fa){R["dimension"+M[fa]]=S[fa]}),Object.keys(X).forEach(function(fa){R["metric"+X[fa]]=S[fa]}),R}var D={storage:{},memory:!0,get:function(R){var S=void 0;try{S=window.localStorage&&window.localStorage.getItem(R)||this.storage[R]}catch(M){S=this.storage[R]}if(S)try{return JSON.parse(S)}catch(M){}},
set:function(R,S){S=JSON.stringify(S);try{window.localStorage.setItem(R,S)}catch(M){this.memory||(this.memory=!0),this.storage[R]=S}},delete:function(R){try{window.localStorage.removeItem(R)}catch(S){this.memory||(this.memory=!0),delete this.storage[R]}}},E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(R){return typeof R}:function(R){return R&&"function"==typeof Symbol&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},C=function(R,S){if(!(R instanceof S))throw new TypeError("Cannot call a class as a function");
},z=function(){function R(S,M){for(var X=0;X<M.length;X++){var fa=M[X];fa.enumerable=fa.enumerable||!1;fa.configurable=!0;"value"in fa&&(fa.writable=!0);Object.defineProperty(S,fa.key,fa)}}return function(S,M,X){return M&&R(S.prototype,M),X&&R(S,X),S}}(),w=Object.assign||function(R){for(var S=1;S<arguments.length;S++){var M=arguments[S],X;for(X in M)Object.prototype.hasOwnProperty.call(M,X)&&(R[X]=M[X])}return R},A="TELEMETRY_COGNITO_CREDENTIALS",G={method:"POST",url:"https://cognito-identity.us-east-1.amazonaws.com/",
headers:{"Content-type":"application/x-amz-json-1.1"}},F=18E5,H="TELEMETRY_SESSION",J="TELEMETRY_CLIENT_ID",K=function(R,S){S={};var M=S.lib={},X=function(){},fa=M.Base={extend:function(ca){X.prototype=this;var ja=new X;return ca&&ja.mixIn(ca),ja.hasOwnProperty("init")||(ja.init=function(){ja.$super.init.apply(this,arguments)}),ja.init.prototype=ja,ja.$super=this,ja},create:function(){var ca=this.extend();return ca.init.apply(ca,arguments),ca},init:function(){},mixIn:function(ca){for(var ja in ca)ca.hasOwnProperty(ja)&&
(this[ja]=ca[ja]);ca.hasOwnProperty("toString")&&(this.toString=ca.toString)},clone:function(){return this.init.prototype.extend(this)}},ea=M.WordArray=fa.extend({init:function(ca,ja){ca=this.words=ca||[];this.sigBytes=void 0!=ja?ja:4*ca.length},toString:function(ca){return(ca||ra).stringify(this)},concat:function(ca){var ja=this.words,wa=ca.words,za=this.sigBytes;if(ca=ca.sigBytes,this.clamp(),za%4)for(var Fa=0;Fa<ca;Fa++)ja[za+Fa>>>2]|=(wa[Fa>>>2]>>>24-Fa%4*8&255)<<24-(za+Fa)%4*8;else if(65535<
wa.length)for(Fa=0;Fa<ca;Fa+=4)ja[za+Fa>>>2]=wa[Fa>>>2];else ja.push.apply(ja,wa);return this.sigBytes+=ca,this},clamp:function(){var ca=this.words,ja=this.sigBytes;ca[ja>>>2]&=4294967295<<32-ja%4*8;ca.length=R.ceil(ja/4)},clone:function(){var ca=fa.clone.call(this);return ca.words=this.words.slice(0),ca},random:function(ca){for(var ja=[],wa=0;wa<ca;wa+=4)ja.push(4294967296*R.random()|0);return new ea.init(ja,ca)}}),ha=S.enc={},ra=ha.Hex={stringify:function(ca){var ja=ca.words;ca=ca.sigBytes;for(var wa=
[],za=0;za<ca;za++){var Fa=ja[za>>>2]>>>24-za%4*8&255;wa.push((Fa>>>4).toString(16));wa.push((15&Fa).toString(16))}return wa.join("")},parse:function(ca){for(var ja=ca.length,wa=[],za=0;za<ja;za+=2)wa[za>>>3]|=parseInt(ca.substr(za,2),16)<<24-za%8*4;return new ea.init(wa,ja/2)}},Aa=ha.Latin1={stringify:function(ca){var ja=ca.words;ca=ca.sigBytes;for(var wa=[],za=0;za<ca;za++)wa.push(String.fromCharCode(ja[za>>>2]>>>24-za%4*8&255));return wa.join("")},parse:function(ca){for(var ja=ca.length,wa=[],
za=0;za<ja;za++)wa[za>>>2]|=(255&ca.charCodeAt(za))<<24-za%4*8;return new ea.init(wa,ja)}},Ea=ha.Utf8={stringify:function(ca){try{return decodeURIComponent(escape(Aa.stringify(ca)))}catch(ja){throw Error("Malformed UTF-8 data");}},parse:function(ca){return Aa.parse(unescape(encodeURIComponent(ca)))}},va=M.BufferedBlockAlgorithm=fa.extend({reset:function(){this._data=new ea.init;this._nDataBytes=0},_append:function(ca){"string"==typeof ca&&(ca=Ea.parse(ca));this._data.concat(ca);this._nDataBytes+=
ca.sigBytes},_process:function(ca){var ja=this._data,wa=ja.words,za=ja.sigBytes,Fa=this.blockSize,O=za/(4*Fa);O=ca?R.ceil(O):R.max((0|O)-this._minBufferSize,0);if(ca=O*Fa,za=R.min(4*ca,za),ca){for(var ya=0;ya<ca;ya+=Fa)this._doProcessBlock(wa,ya);ya=wa.splice(0,ca);ja.sigBytes-=za}return new ea.init(ya,za)},clone:function(){var ca=fa.clone.call(this);return ca._data=this._data.clone(),ca},_minBufferSize:0});M.Hasher=va.extend({cfg:fa.extend(),init:function(ca){this.cfg=this.cfg.extend(ca);this.reset()},
reset:function(){va.reset.call(this);this._doReset()},update:function(ca){return this._append(ca),this._process(),this},finalize:function(ca){return ca&&this._append(ca),this._doFinalize()},blockSize:16,_createHelper:function(ca){return function(ja,wa){return(new ca.init(wa)).finalize(ja)}},_createHmacHelper:function(ca){return function(ja,wa){return(new Ga.HMAC.init(ca,wa)).finalize(ja)}}});var Ga=S.algo={};return S}(Math);!function(R){var S=K.lib,M=S.WordArray,X=S.Hasher;S=K.algo;for(var fa=[],
ea=[],ha=function(ja){return 4294967296*(ja-(0|ja))|0},ra=2,Aa=0;64>Aa;){a:{var Ea=ra;for(var va=R.sqrt(Ea),Ga=2;Ga<=va;Ga++)if(!(Ea%Ga)){Ea=!1;break a}Ea=!0}Ea&&(8>Aa&&(fa[Aa]=ha(R.pow(ra,.5))),ea[Aa]=ha(R.pow(ra,1/3)),Aa++);ra++}var ca=[];S=S.SHA256=X.extend({_doReset:function(){this._hash=new M.init(fa.slice(0))},_doProcessBlock:function(ja,wa){for(var za=this._hash.words,Fa=za[0],O=za[1],ya=za[2],Ha=za[3],da=za[4],Oa=za[5],Na=za[6],Ca=za[7],V=0;64>V;V++){if(16>V)ca[V]=0|ja[wa+V];else{var oa=ca[V-
15],pa=ca[V-2];ca[V]=((oa<<25|oa>>>7)^(oa<<14|oa>>>18)^oa>>>3)+ca[V-7]+((pa<<15|pa>>>17)^(pa<<13|pa>>>19)^pa>>>10)+ca[V-16]}oa=Ca+((da<<26|da>>>6)^(da<<21|da>>>11)^(da<<7|da>>>25))+(da&Oa^~da&Na)+ea[V]+ca[V];pa=((Fa<<30|Fa>>>2)^(Fa<<19|Fa>>>13)^(Fa<<10|Fa>>>22))+(Fa&O^Fa&ya^O&ya);Ca=Na;Na=Oa;Oa=da;da=Ha+oa|0;Ha=ya;ya=O;O=Fa;Fa=oa+pa|0}za[0]=za[0]+Fa|0;za[1]=za[1]+O|0;za[2]=za[2]+ya|0;za[3]=za[3]+Ha|0;za[4]=za[4]+da|0;za[5]=za[5]+Oa|0;za[6]=za[6]+Na|0;za[7]=za[7]+Ca|0},_doFinalize:function(){var ja=
this._data,wa=ja.words,za=8*this._nDataBytes,Fa=8*ja.sigBytes;return wa[Fa>>>5]|=128<<24-Fa%32,wa[14+(Fa+64>>>9<<4)]=R.floor(za/4294967296),wa[15+(Fa+64>>>9<<4)]=za,ja.sigBytes=4*wa.length,this._process(),this._hash},clone:function(){var ja=X.clone.call(this);return ja._hash=this._hash.clone(),ja}});K.SHA256=X._createHelper(S);K.HmacSHA256=X._createHmacHelper(S)}(Math);(function(){var R=K.enc.Utf8;K.algo.HMAC=K.lib.Base.extend({init:function(S,M){S=this._hasher=new S.init;"string"==typeof M&&(M=R.parse(M));
var X=S.blockSize,fa=4*X;M.sigBytes>fa&&(M=S.finalize(M));M.clamp();S=this._oKey=M.clone();M=this._iKey=M.clone();for(var ea=S.words,ha=M.words,ra=0;ra<X;ra++)ea[ra]^=1549556828,ha[ra]^=909522486;S.sigBytes=M.sigBytes=fa;this.reset()},reset:function(){var S=this._hasher;S.reset();S.update(this._iKey)},update:function(S){return this._hasher.update(S),this},finalize:function(S){var M=this._hasher;return S=M.finalize(S),M.reset(),M.finalize(this._oKey.clone().concat(S))}})})();var Q={region:"eu-west-1",
service:"execute-api",defaultContentType:"application/json",defaultAcceptType:"application/json",payloadSerializerFactory:function(){return function(R){return JSON.stringify(R)}},uriParserFactory:function(){function R(M){return/^\??(.*)$/.exec(M)[1].split("\x26").reduce(function(X,fa){return fa=/^(.+)=(.*)$/.exec(fa),fa&&(X[fa[1]]=fa[2]),X},{})}var S=document?document.createElement("a"):{};return function(M){return S.href=M,{protocol:S.protocol,host:S.host.replace(/^(.*):((80)|(443))$/,"$1"),path:("/"!==
S.pathname.charAt(0)?"/":"")+S.pathname,queryParams:R(S.search)}}},hasherFactory:function(){return{hash:function(R,S){S=m({hexOutput:!0,textInput:!0},S);R=K.SHA256(R);return S.hexOutput?R.toString(K.enc.Hex):R},hmac:function(R,S,M){M=m({hexOutput:!0,textInput:!0},M);R=K.HmacSHA256(S,R,{asBytes:!0});return M.hexOutput?R.toString(K.enc.Hex):R}}}},P=function(){function R(S){C(this,R);this.config=m({},Q,S);this.payloadSerializer=this.config.payloadSerializer||this.config.payloadSerializerFactory();this.uriParser=
this.config.uriParserFactory();this.hasher=this.config.hasherFactory();S=this.config.accessKeyId;if(void 0===S||!S)throw Error("AwsSigner requires AWS AccessKeyID");S=this.config.secretAccessKey;if(void 0===S||!S)throw Error("AwsSigner requires AWS SecretAccessKey");}return z(R,[{key:"sign",value:function(S,M){S={request:m({},S),signDate:M||new Date,uri:this.uriParser(S.url)};t(this,S);e(this,S);S.credentialScope=[r(S.signDate,!0),this.config.region,this.config.service,"aws4_request"].join("/");S.stringToSign=
"AWS4-HMAC-SHA256\n"+r(S.signDate)+"\n"+S.credentialScope+"\n"+this.hasher.hash(S.canonicalRequest);M=this.hasher.hmac;var X=M(M(M(M("AWS4"+this.config.secretAccessKey,r(S.signDate,!0),{hexOutput:!1}),this.config.region,{hexOutput:!1,textInput:!1}),this.config.service,{hexOutput:!1,textInput:!1}),"aws4_request",{hexOutput:!1,textInput:!1});S.signature=M(X,S.stringToSign,{textInput:!1});S.authorization="AWS4-HMAC-SHA256 Credential\x3d"+this.config.accessKeyId+"/"+S.credentialScope+", SignedHeaders\x3d"+
S.signedHeaders+", Signature\x3d"+S.signature;return{Accept:S.request.headers.accept,Authorization:S.authorization,"Content-Type":S.request.headers["content-type"],"x-amz-date":S.request.headers["x-amz-date"],"x-amz-security-token":this.config.sessionToken||void 0}}}]),R}(),I=["size","duration","position","number","count"],N="https://mobileanalytics.us-east-1.amazonaws.com/2014-06-05/events",L=function(){function R(S){C(this,R);this.name="amazon";w(this,S);c().session.new&&!S.test&&this.logEvent({eventType:"_session.start"})}
return z(R,[{key:"logPageView",value:function(S,M){S=a(S,this.previousPage,M);k(S,this.userPoolID,this.app);this.previousPage=S.attributes}},{key:"logEvent",value:function(S){var M=c().session;S={eventType:S.eventType||"other",timestamp:(new Date).toISOString(),session:{id:M.id,startTimestamp:M.startTimestamp},attributes:w({referrer:document.referrer,hostname:window.location.hostname,path:window.location.pathname},h(S)),metrics:q(S)};k(S,this.userPoolID,this.app)}}]),R}(),W=function(){function R(){var S=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};C(this,R);this.name="google";w(this,S)}return z(R,[{key:"logPageView",value:function(S,M){var X=x(S,M,this.dimensions,this.metrics);b(function(fa){fa.forEach(function(ea){ea.send(X)})})}},{key:"logEvent",value:function(S){var M=v(S,this.dimensions,this.metrics);b(function(X){X.forEach(function(fa){fa.send(M)})})}}]),R}(),Z=function(R){if(R)return K.SHA256(R).toString(K.enc.Hex)},aa="esri.com esriuk.com esri.de esri.ca esrifrance.fr esri.nl esri-portugal.pt esribulgaria.com esri.fi esri.kr esrimalaysia.com.my esri.es esriaustralia.com.au esri-southafrica.com esri.cl esrichina.com.cn esri.co esriturkey.com.tr geodata.no esriitalia.it esri.pl".split(" "),
ia=function(){var R=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},S=R.portal||{};return!R.disabled&&"1"!==navigator.doNotTrack&&"1"!==window.doNotTrack&&(void 0===S.eueiEnabled||!1!==S.eueiEnabled)&&(!(!S.eueiEnabled||!S.user||S.user.orgId!==S.id)||!(!S.user||S.user.orgId||"US"!==S.ipCntryCode)||!S.user&&"US"===S.ipCntryCode||!(0<Object.keys(S).length))};return function(){function R(S){C(this,R);try{(this.trackers=[],this.workflows={},this.test=S.test,this.debug=S.debug,this.disabled=
!ia(S),S.portal&&S.portal.user)?this.setUser(S.portal.user,(S.portal.subscriptionInfo||{}).type):S.user&&this.setUser(S.user),this.disabled||this._initTrackers(S)}catch(M){this.disabled=!0}}return z(R,[{key:"_initTrackers",value:function(S){if(S.amazon){var M=new L(S.amazon);this.trackers.push(M)}S.google&&(S=new W(S.google),this.trackers.push(S))}},{key:"setUser",value:function(){var S=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},M=1<arguments.length&&void 0!==arguments[1]?arguments[1]:
"Public";this.user=S="string"==typeof S?{username:S}:S;this.user.accountType=M;var X=void 0;if(S.email&&S.email.split){var fa=S.email.split("@")[1];X=0<aa.filter(function(ea){return fa===ea}).length}(X||-1<["In House","Demo and Marketing"].indexOf(M))&&(this.user.internalUser=!0)}},{key:"logPageView",value:function(S){var M=this.preProcess(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});return this.debug||!this.test||this.disabled?!this.trackers.length||this.disabled?!1:(this.trackers.forEach(function(X){try{X.logPageView(S,
M)}catch(fa){}}),!0):M}},{key:"logEvent",value:function(){var S=this.preProcess(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});return!this.debug&&this.test?S:!this.trackers.length||this.disabled?!1:(this.trackers.forEach(function(M){try{M.logEvent(S)}catch(X){}}),!0)}},{key:"logError",value:function(){var S=w({eventType:"error"},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});this.logEvent(S)}},{key:"startWorkflow",value:function(S){var M=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:{},X={name:S,start:Date.now(),steps:[],workflowId:Math.floor(17592186044416*(1+Math.random())).toString(16)};this._saveWorkflow(X);M=w({name:S,step:"start"},M);return this._logWorkflow(M),X}},{key:"stepWorkflow",value:function(S,M){var X=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};X=w({name:S,step:M,details:"string"==typeof options?X:X.details},X);this._logWorkflow(X)}},{key:"endWorkflow",value:function(S){var M=w({name:S,step:"finish"},1<arguments.length&&void 0!==arguments[1]?
arguments[1]:{});this._logWorkflow(M)}},{key:"cancelWorkflow",value:function(S){var M=w({name:S,step:"cancel"},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});this._logWorkflow(M)}},{key:"getWorkflow",value:function(S){if(S=D.get("TELEMETRY-WORKFLOW:"+S)){if(18E5>Date.now()-S.start)return S;this._deleteWorkflow(S)}}},{key:"_saveWorkflow",value:function(S){D.set("TELEMETRY-WORKFLOW:"+S.name,S)}},{key:"_deleteWorkflow",value:function(S){D.delete("TELEMETRY-WORKFLOW:"+S.name)}},{key:"_logWorkflow",
value:function(){var S=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};S=this.preProcess(S);var M=this.getWorkflow(S.name);M||(this.startWorkflow(S.name),M=this.getWorkflow(S.name));M.steps.push(S.step);M.duration=(Date.now()-M.start)/1E3;-1<["cancel","finish"].indexOf(S.step)?this._deleteWorkflow(M):this._saveWorkflow(M);S=w(S,{eventType:"workflow",category:S.name,action:S.step,label:S.details,duration:M.duration,workflowId:M.workflowId});this.logEvent(S)}},{key:"preProcess",value:function(){var S=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},M={};return this.user&&(M={user:Z(this.user.username),orgId:Z(this.user.orgId),lastLogin:this.user.lastLogin,userSince:this.user.created,internalUser:this.user.internalUser||!1,accountType:this.user.accountType}),w({},S,M)}}]),R}()})},"dojo/NodeList-fx":function(){define(["./query","./_base/lang","./aspect","./_base/fx","./fx"],function(f,B,l,d,c){f=f.NodeList;B.extend(f,{_anim:function(u,t,e){e=e||{};var r=c.combine(this.map(function(m){m=
{node:m};B.mixin(m,e);return u[t](m)}));return e.auto?r.play()&&this:r},wipeIn:function(u){return this._anim(c,"wipeIn",u)},wipeOut:function(u){return this._anim(c,"wipeOut",u)},slideTo:function(u){return this._anim(c,"slideTo",u)},fadeIn:function(u){return this._anim(d,"fadeIn",u)},fadeOut:function(u){return this._anim(d,"fadeOut",u)},animateProperty:function(u){return this._anim(d,"animateProperty",u)},anim:function(u,t,e,r,m){var a=c.combine(this.map(function(h){return d.animateProperty({node:h,
properties:u,duration:t||350,easing:e})}));r&&l.after(a,"onEnd",r,!0);return a.play(m||0)}});return f})},"arcgisonline/sharing/geow/QueryReadStore":function(){define("require exports tslib ./Community ./Content ../../tsutils/declareDecorator dojo/topic dojox/data/QueryReadStore".split(" "),function(f,B,l,d,c,u,t,e){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);return function(){function r(){}r.prototype._fetchItems=function(m,a,
h){var q=this,n=m.serverQuery||m.query||{};n.start=m.start||0;n.start++;m.count&&(n.num=m.count);c.default.search(this.url,n,function(k){var g=k.total||-1;t.default.publish("gridCount",[k.total]);q.onResultCount(k.total);q._total=k.total;q._items=[];(k.results||[]).forEach(function(v){var y,D,E=v.tags||v.keywords||[],C=void 0===v.imageUrl?c.default._getItemImageUrl(v):v.imageUrl,z=v.uploaded||v.created,w=void 0===v.extent?d.default._getGroupTitleLink(v):v.title,A=v.item||"",G="";0<(null===(y=v.snippet)||
void 0===y?void 0:y.length)&&"null"!==v.snippet?G=150<v.snippet.length?v.snippet.substring(0,150)+"...":v.snippet:0<(null===(D=v.description)||void 0===D?void 0:D.length)&&"null"!==v.description&&(G=150<v.description.length?v.description.substring(0,150)+"...":v.description);v={id:v.id||"",owner:v.owner,title:w,description:v.description,snippet:G,snippetFull:v.snippet,tags:E.join?E.join(","):E,imageUrl:C,thumbnail:v.thumbnail,isInvitationOnly:v.isInvitationOnly,created:z,modified:v.modified,itemType:v.itemType||
"",typeKeywords:v.typeKeywords||"",type:v.type||"",extent:v.extent||"",item:A,numComments:v.numComments,numRatings:v.numRatings,avgRating:v.avgRating,numViews:v.numViews};q._items.push({i:v,r:q})},q);q._itemsByIdentity={};q._identifier="id";for(k=0;k<q._items.length;++k){var b=q._items[k].i,x=b.id;q._itemsByIdentity[x]||(q._itemsByIdentity[x]=b)}g=-1===g?q._items.length:g;a(q._items,m,g);q.lastRequestHash=(new Date).getTime()+"-"+String(Math.random()).substring(2);q._lastServerQuery=l.__assign({},
n)}.bind(this))};r.prototype.onResultCount=function(m){};return r=l.__decorate([(0,u.default)(e.default)],r)}()})},"arcgisonline/sharing/geow/Community":function(){define("require exports tslib ../../esriGeowConfig ../util dojo/Deferred dojo/topic dojo/data/ItemFileReadStore dojo/i18n!../../nls/arcgisonline".split(" "),function(f,B,l,d,c,u,t,e,r){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);return function(){function m(){}
m.getProfile=function(a,h,q){if(null===a)return t.default.publish("globalMessage",[{message:m.i18n.noUser,type:"error",duration:0}]),null;a="".concat(d.default.restBaseUrl,"community/users/").concat(a);c.default.getJson(a,h)};m.getProfileThumbnailUrl=function(a,h){if(null!==a.thumbnail){var q=c.default.getToken();q=null===q||0===q.length?"":"?token\x3d".concat(q);return h?(h=d.default.restBaseUrl,d.default.useDefaultIdentityStore&&(h=!1!==d.default.useSSL?c.default.getSecureUrl(h):h),"".concat(h,
"community/users/").concat(a.username,"/info/").concat(a.thumbnail).concat(q)):"".concat(d.default.restBaseUrl,"community/users/").concat(a.username,"/info/").concat(a.thumbnail).concat(q)}return null};m.updateProfile=function(a,h,q){q=c.default.getUser();null===q&&t.default.publish("globalMessage",[{message:this.i18n.mustLogIn,type:"error",duration:0}]);q=q.username||q.email;q="".concat(c.default.getSecureUrl(d.default.restBaseUrl),"community/users/").concat(q,"/update");c.default.postForm(a,q,h)};
m.updateProfileByUser=function(a,h,q){null!==c.default.getUser()&&(q="".concat(c.default.getSecureUrl(d.default.restBaseUrl),"community/users/").concat(a.username.value,"/update"),c.default.postForm(a,q,h))};m.getUserGroups=function(a,h){var q=c.default.getUser();(q=q&&(q.username||q.email))?a=m.getUserGroupsByUser(q,a,h):(a=new u.default,a.resolve());return a};m.getUserGroupsByUser=function(a,h,q){a="".concat(d.default.restBaseUrl,"community/users/").concat(a);var n=new u.default;c.default.request({url:a}).then(function(k){n.resolve(k);
h&&h(k)},function(k){n.reject(k);q&&q(k)});return n};m.getGroup=function(a,h,q){a="".concat(d.default.restBaseUrl,"community/groups/").concat(a);c.default.getJson(a,h,q)};m.createGroup=function(a,h,q){if(null!==c.default.getUser()){var n="".concat(d.default.restBaseUrl,"community/createGroup");c.default.postForm(a,n,h,q)}};m.updateGroup=function(a,h,q,n){null!==c.default.getUser()&&(a="".concat(d.default.restBaseUrl,"community/groups/").concat(a,"/update"),c.default.postForm(h,a,q,n))};m.deleteGroup=
function(a,h,q){null!==c.default.getUser()&&(a="".concat(d.default.restBaseUrl,"community/groups/").concat(a.id,"/delete"),c.default.postJson("",a,h,q))};m.reassignGroup=function(a,h,q,n){null!==c.default.getUser()&&(h={targetUsername:h},a="".concat(d.default.restBaseUrl,"community/groups/").concat(a.id,"/reassign"),c.default.postJson(h,a,q,n))};m.leaveGroup=function(a,h,q){a="".concat(d.default.restBaseUrl,"community/groups/").concat(a.id,"/leave");c.default.postJson("",a,h,q)};m.inviteToGroup=function(a,
h,q){c.default.getUser()};m.searchGroups=function(a,h,q){a="".concat(d.default.restBaseUrl,"community/groups?q\x3d").concat(a);c.default.getJson(a,h)};m.searchToStore=function(a){var h=[];(a.results||[]).forEach(function(q,n){q={id:n,title:m._getGroupTitleLink(q),owner:q.owner,description:q.description,imageUrl:q.imageUrl,tags:q.keywords,created:q.created};h[n]=q});return new e.default({data:{identifier:"id",label:"item",items:h},url:void 0})};m._getGroupTitleLink=function(a){var h=encodeURIComponent(a.title);
return'\x3ca href\x3d"group.html?owner\x3d'.concat(a.owner,"\x26title\x3d").concat(h,'" class\x3d"esriGroupTitle" alt\x3d"').concat(m.i18n.viewGroupDetails,'" title\x3d"').concat(m.i18n.viewGroupDetails,"\x3e").concat(a.title,"\x3c/a\x3e")};m.getNotificationsCount=function(){var a=c.default.getUser();if(null!==a){a=a.username||a.email;a="".concat(d.default.restBaseUrl,"community/users/").concat(a,"/notifications");var h;c.default.getJson(a).then(function(q){h=((null===q||void 0===q?void 0:q.notifications)||
[]).filter(function(n){return n&&"message_received"!==n.type});t.default.publish("onNotificationCount",[h.length])})}};m.deleteNotifictation=function(a){var h=c.default.getUser();null!==h&&(h=h.username||h.email,a="".concat(d.default.restBaseUrl,"community/users/").concat(h,"/notifications/").concat(a,"/delete"),c.default.postJson("",a,function(q,n){t.default.publish("onNotificationDelete",[""])}.bind(this)))};m.updateUserSecure=function(a,h,q,n){n=d.default.restBaseUrl;d.default.useDefaultIdentityStore&&
(n=!1!==d.default.useSSL?c.default.getSecureUrl(n):n);a="".concat(n,"community/users/").concat(a,"/update");c.default.postForm(h,a,q)};m.getProvisionedListings=function(a,h,q){a="".concat(d.default.restBaseUrl,"community/users/").concat(a,"/provisionedListings");return c.default.request({url:a,content:{start:h||1,num:q||100}})};m.i18n=l.__assign(l.__assign({},r.default.common),r.default.community);return m}()})},"arcgisonline/sharing/geow/Content":function(){define("require exports tslib ../../esriGeowConfig ../../pages/utils/arrays ../util dojo/dom-construct dojo/_base/lang dojo/data/ItemFileReadStore dojo/data/ItemFileWriteStore dojo/topic esri/arcgis/Portal esri/config dojo/i18n!../../nls/arcgisonline ../../pages/utils/queryHandler".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);q=l.__importDefault(q);n=l.__importDefault(n);k=l.__importStar(k);return function(){function g(){}g.getUserInfo=function(b,x){var v=u.default.getUser();null!==v&&(v=v.username||v.email,v="".concat(d.default.restBaseUrl,"content/users/").concat(v),u.default.getJson(v,
b,x))};g.getUserItems=function(b,x,v){var y=u.default.getUser();null!==y&&(y=y.username||y.email,y="".concat(d.default.restBaseUrl,"content/users/").concat(y),null!==b&&""!==b&&(y="".concat(y,"/").concat(b)),u.default.getJson(y,x,v))};g.getUserItemsByUser=function(b,x,v,y){null!==u.default.getUser()&&(b="".concat(d.default.restBaseUrl,"content/users/").concat(b),null!=x&&""!==x&&(b="".concat(b,"/").concat(x)),u.default.getJson(b,v,y))};g.getUserServers=function(b){void 0!==g._userServers&&b(g._userServers);
u.default.getJson(d.default.serversRestBaseUrl,function(x){b(g._userServers=x.servers)},function(){b(null)})};g.addItem=function(b,x,v,y){var D=u.default.getUser();if(null!==D){D=D.username||D.email;D="".concat(d.default.restBaseUrl,"content/users/").concat(D);null!==b&&(D="".concat(D,"/").concat(b));D="".concat(D,"/addItem");b=!1;for(var E=0;E<x.childNodes.length;E++){var C=x.childNodes[E];if("async"===C.name&&"true"===C.value){b=!0;break}}b?u.default.postForm(x,D,g.addItemAsyncHandler.bind(g,v,
y),y):u.default.postForm(x,D,v,y)}};g.addItemByUser=function(b,x,v,y,D){if(null!==u.default.getUser()){b="".concat(d.default.restBaseUrl,"content/users/").concat(b);null!=x&&(b="".concat(b,"/").concat(x));b="".concat(b,"/addItem");x=!1;for(var E=0;E<v.childNodes.length;E++){var C=v.childNodes[E];if("async"===C.name&&"true"===C.value){x=!0;break}}x?u.default.postForm(v,b,g.addItemByUserAsyncHandler.bind(g,y,D),D):u.default.postForm(v,b,y,D)}};g.addItemAsyncHandler=function(b,x,v,y){(null===v||void 0===
v?0:v.success)&&!0===v.success?g.itemStatus(v,g.itemStatusHandler.bind(g,0,v,b,x),x):x(v,y)};g.addItemByUserAsyncHandler=function(b,x,v,y){(null===v||void 0===v?0:v.success)&&!0===v.success?g.itemStatus(v,g.itemStatusByUserHandler.bind(g,0,v,b,x),x):x(v,y)};g.deleteService=function(b,x){this.getUserServers(function(v){if((null===v||void 0===v?0:v.length)&&-1<b.indexOf("".concat(d.default.featuresRestBaseUrl).concat(v[0].id,"/"))){v="".concat(d.default.serversRestBaseUrl).concat(v[0].id,"/arcgis/admin/services/");
v+="".concat(b.substr(b.indexOf(x)).replace("/","."),"/delete");q.default.defaults.io.proxyUrl=d.default.proxyServer;var y=function(){q.default.defaults.io.proxyUrl=null};u.default.postJson("",v,y,y)}})};g.publishService=function(b,x,v,y){b=u.default.getUser();null!==b&&(b=b.username||b.email,b="".concat(d.default.restBaseUrl,"content/users/").concat(b,"/publish"),u.default.postJson(x.params,b,function(D){var E;D=D.services[0];D.success=D.success||0<(null===(E=D.serviceurl)||void 0===E?void 0:E.length);
D.success&&(D.id=D.serviceItemId);v(D)},function(){v({success:!1})}))};g.itemStatus=function(b,x,v){var y,D=u.default.getUser();if(null!==D){var E=D.username||D.email;D=b.folder;E="".concat(d.default.restBaseUrl,"content/users/").concat(b.overrideUser||E);0<(null===D||void 0===D?void 0:D.length)&&"/"!==D&&(E+="/".concat(D));E="".concat(E,"/items/").concat(b.id,"/status");b.jobid&&(E+="?jobid\x3d".concat(b.jobid));"image service"===(null===(y=b.type)||void 0===y?void 0:y.toLowerCase())&&(E+="\x26jobType\x3dPublishImageService");
u.default.getJson(E,x,v)}};g.itemStatusByUser=function(b,x,v){if(null!==u.default.getUser()){var y=b.folder,D="".concat(d.default.restBaseUrl,"content/users/").concat(b.owner);0<(null===y||void 0===y?void 0:y.length)&&"/"!==y&&(D+="/".concat(y));D="".concat(D,"/items/").concat(b.id,"/status");u.default.getJson(D,x,v)}};g.itemStatusHandler=function(b,x,v,y,D,E){(null===D||void 0===D?0:D.status)&&"processing"===D.status?(b++,setTimeout(function(){g.itemStatus(x,g.itemStatusHandler.bind(g,b,x,v,y),y)},
Math.min(1E3*Math.pow(2,b),6E4))):(D=l.__assign(l.__assign({},D),x),v(D,E))};g.itemStatusByUserHandler=function(b,x,v,y,D,E){(null===D||void 0===D?0:D.status)&&"processing"===D.status?(b++,setTimeout(function(){g.itemStatusByUser(x,g.itemStatusByUserHandler.bind(g,b,x,v,y),y)},Math.min(1E3*Math.pow(2,b),6E4))):(D=l.__assign(l.__assign({},D),x),v(D,E))};g.deleteItems=function(b,x,v){var y=u.default.getUser();if(null!==y){y=y.username||y.email;if(1===b.length)return b=b[0],y="".concat(d.default.restBaseUrl,
"content/users/").concat(y),null!=b.folderId&&""!==b.folderId&&"/"!==b.folderId&&(y+="/".concat(b.folderId)),y="".concat(y,"/items/").concat(b.id,"/delete"),u.default.postJson("",y,x,v);if(1<b.length){var D="",E="";b.forEach(function(C){D+="".concat(E).concat(C.id);E=","});b={items:D};y="".concat(d.default.restBaseUrl,"content/users/").concat(y,"/deleteItems");return u.default.postJson(b,y,x,v)}}};g.deleteItemsByUser=function(b,x,v,y){if(null!==u.default.getUser()){if(1===x.length)return x=x[0],b=
"".concat(d.default.restBaseUrl,"content/users/").concat(b),null!==x.folderId&&""!==x.folderId&&"/"!==x.folderId&&(b+="/".concat(x.folderId)),b="".concat(b,"/items/").concat(x.id,"/delete"),u.default.postJson("",b,v,y);if(1<x.length){var D="",E="";x.forEach(function(C){D+="".concat(E).concat(C.id);E=","},this);x={items:D};b="".concat(d.default.restBaseUrl,"content/users/").concat(b,"/deleteItems");return u.default.postJson(x,b,v,y)}}};g.getApplicationCode=function(b,x,v){var y=null,D="WMA2Code";e.default.isObject(b)?
(y=b.id,"Mobile Application"===b.type&&(D="MobileApp2Code")):y=b;b="".concat(d.default.restBaseUrl,"content/items/").concat(y,"/relatedItems?relationshipType\x3d").concat(D);u.default.getJson(b,x,v)};g.addApplicationCodeRelate=function(b,x,v,y){var D=u.default.getUser();if(null===D)a.default.publish("globalMessage",[{message:this.i18n.mustLogIn,type:"error",duration:0}]);else{var E=null,C="WMA2Code";e.default.isObject(b)?(E=b.id,"Mobile Application"===b.type&&(C="MobileApp2Code")):E=b;b=D.username||
D.email;b="".concat(d.default.restBaseUrl,"content/users/").concat(b,"/addRelationship?relationshipType\x3d").concat(C,"\x26originItem\x3d").concat(E,"\x26destinationItemId\x3d").concat(x);u.default.postJson({relationshipType:C,originItemId:E,desinationItemId:x},b,v,y)}};g.getComments=function(b,x,v,y){b="".concat(d.default.restBaseUrl,"content/items/").concat(b,"/comments");u.default.getJson(b,v,y)};g.addComment=function(b,x,v,y){null===u.default.getUser()?a.default.publish("globalMessage",[{message:this.i18n.mustLogIn,
type:"error",duration:0}]):(b="".concat(d.default.restBaseUrl,"content/items/").concat(b,"/addComment"),u.default.postJson({comment:x},b,v,y))};g.deleteComment=function(b,x,v,y){null===u.default.getUser()?a.default.publish("globalMessage",[{message:this.i18n.mustLogIn,type:"error",duration:0}]):(b="".concat(d.default.restBaseUrl,"content/items/").concat(b,"/comments/").concat(x,"/delete"),u.default.postJson({},b,v,y))};g.addRating=function(b,x,v,y){null===u.default.getUser()?a.default.publish("globalMessage",
[{message:this.i18n.mustLogIn,type:"error",duration:0}]):(b="".concat(d.default.restBaseUrl,"content/items/").concat(b,"/addRating"),u.default.postJson({rating:x},b,v,y))};g.getRating=function(b,x,v){null!=u.default.getUser()&&(b="".concat(d.default.restBaseUrl,"content/items/").concat(b,"/rating"),u.default.postJson({},b,x,v))};g.deleteItem=function(b,x,v){var y=u.default.getUser();if(null!==y){y=y.username||y.email;y="".concat(d.default.restBaseUrl,"content/users/").concat(b.owner||y);var D=b.ownerFolder||
b.folderId;D&&"/"!==D&&(y="".concat(y,"/").concat(D));y="".concat(y,"/items/").concat(b.id,"/delete");u.default.postJson("",y,x,v)}};g.deleteItemByUser=function(b,x,v){if(null!==u.default.getUser()){var y="".concat(d.default.restBaseUrl,"content/users/").concat(b.owner);null!=b.folderId&&(y="".concat(y,"/").concat(b.folderId));y="".concat(y,"/items/").concat(b.id,"/delete");u.default.postJson("",y,x,v)}};g.updateItem=function(b,x,v,y){var D=u.default.getUser();null!==D&&(D=D.username||D.email,D="".concat(d.default.restBaseUrl,
"content/users/").concat(b.owner||D),null!=b.folderId&&(D="".concat(D,"/").concat(b.folderId)),D="".concat(D,"/items/").concat(b.id,"/update"),u.default.postForm(x,D,v,y))};g.updateItemByUser=function(b,x,v,y){if(null!==u.default.getUser()){var D="".concat(d.default.restBaseUrl,"content/users/").concat(b.owner);null!==b.folderId&&(D="".concat(D,"/").concat(b.folderId));D="".concat(D,"/items/").concat(b.id,"/update");u.default.postForm(x,D,v,y)}};g.updateItemJson=function(b,x,v,y){var D=u.default.getUser();
null!==D&&(D=D.username||D.email,D="".concat(d.default.restBaseUrl,"content/users/").concat(b.overrideUser||D),null!==b.folderId&&(D="".concat(D,"/").concat(b.folderId)),D="".concat(D,"/items/").concat(b.id,"/update"),u.default.postJson(x,D,v,y))};g.updateItemJsonByUser=function(b,x,v,y){null!==u.default.getUser()&&(b="".concat(d.default.restBaseUrl,"content/users/").concat(b),null!==x.folderId&&(b="".concat(b,"/").concat(x.folderId)),b="".concat(b,"/items/").concat(x.id,"/update"),u.default.postJson(v,
b,y))};g.filterErrors=function(b){b=null===b||void 0===b?void 0:b.results;if(null===b||void 0===b?0:b.length)if(b=b.filter(function(x){return x.error}),null===b||void 0===b?0:b.length)return u.default.checkError(b[0].error),b;return!1};g.shareItems=function(b,x,v){var y=u.default.getUser();y&&(y=y.username||y.email,y="".concat(d.default.restBaseUrl,"content/users/").concat(b.owner||y,"/shareItems"),u.default.postJson(b,y,function(D){var E=g.filterErrors(D);E?v(E):x(D)},v))};g.shareItemsByUser=function(b,
x,v,y){null!==u.default.getUser()&&(b="".concat(d.default.restBaseUrl,"content/users/").concat(b,"/shareItems"),u.default.postJson(x,b,v,y))};g.shareItem=function(b,x,v,y){var D=u.default.getUser();null!==D&&(D=D.username||D.email,D="".concat(d.default.restBaseUrl,"content/users/").concat(D),null!=b.folderId&&(D="".concat(D,"/").concat(b.folderId)),D="".concat(D,"/items/").concat(b.id,"/share"),u.default.postJson(x,D,v,y))};g.shareItemByID=function(b,x,v,y){null!==u.default.getUser()&&(b="".concat(d.default.restBaseUrl,
"content/items/").concat(b.id,"/share"),u.default.postJson(x,b,v,y))};g.unshareItems=function(b,x,v){var y=u.default.getUser();null!==y&&(y=y.username||y.email,y="".concat(d.default.restBaseUrl,"content/users/").concat(b.owner||y,"/unshareItems"),u.default.postJson(b,y,function(D){var E=g.filterErrors(D);E?v(E):x(D)},v))};g.unshareItemsByUser=function(b,x,v,y){null!==u.default.getUser()&&(b="".concat(d.default.restBaseUrl,"content/users/").concat(b,"/unshareItems"),u.default.postJson(x,b,v,y))};g.unshareItem=
function(b,x,v,y){var D=u.default.getUser();null!==D&&(D=D.username||D.email,D="".concat(d.default.restBaseUrl,"content/users/").concat(D),null!=b.folderId&&(D="".concat(D,"/").concat(b.folderId)),D="".concat(D,"/items/").concat(b.id,"/unshare"),u.default.postJson(x,D,v,y))};g.unshareItemByID=function(b,x,v,y){null!==u.default.getUser()&&(b="".concat(d.default.restBaseUrl,"content/items/").concat(b.id,"/unshare"),u.default.postJson(x,b,v,y))};g.moveItems=function(b,x,v,y){var D=u.default.getUser();
if(null!==D){var E="",C="";(b||[]).forEach(function(z){E+="".concat(C).concat(z.id);C=","});x.items=E;b=D.username||D.email;b="".concat(d.default.restBaseUrl,"content/users/").concat(b,"/moveItems");u.default.postJson(x,b,v,y)}};g.moveItemsByUser=function(b,x,v,y,D){if(null!==u.default.getUser()){var E="",C="";(x||[]).forEach(function(z){E+="".concat(C).concat(z.id);C=","});v.items=E;b="".concat(d.default.restBaseUrl,"content/users/").concat(b,"/moveItems");u.default.postJson(v,b,y,D)}};g.reassignItem=
function(b,x,v,y,D){if(null!==u.default.getUser()){var E="".concat(d.default.restBaseUrl,"content/users/").concat(b.owner);null!==b.folderId&&(E="".concat(E,"/").concat(b.folderId));E="".concat(E,"/items/").concat(b.id,"/reassign");u.default.postJson({targetUsername:x,targetFolderName:v},E,y,D)}};g.moveItem=function(b,x,v,y){var D=u.default.getUser();null!==D&&(D=D.username||D.email,D="".concat(d.default.restBaseUrl,"content/users/").concat(D),null!=b.folderId&&(D="".concat(D,"/").concat(b.folderId)),
D="".concat(D,"/items/").concat(b.id,"/move"),u.default.postJson(x,D,v,y))};g.moveItemByUser=function(b,x,v,y){if(null!==u.default.getUser()){var D="".concat(d.default.restBaseUrl,"content/users/").concat(b.owner);null!=b.folderId&&(D="".concat(D,"/").concat(b.folderId));D="".concat(D,"/items/").concat(b.id,"/move");u.default.postJson(x,D,v,y)}};g.search=function(b,x,v,y){var D,E;if(b){y="";if(0>b.indexOf("community/groups")){var C=u.default.userPreferences(null,"contentModePrefs"),z=k.queryToObject(window.location.search.slice(1));
"all"===(null===(D=z.content)||void 0===D?void 0:D.toLowerCase())?C.contentMode="GIS":"web"===(null===(E=z.content)||void 0===E?void 0:E.toLowerCase())&&(C.contentMode="Web");y=(null===C||void 0===C?0:C.contentMode)&&"GIS"===C.contentMode?d.default.viewQueries.gis:y+d.default.viewQueries.web;y+=d.default.viewQueries.none}x.q+=y;u.default.getJsonWithContent(b,x,v)}};g.getFeaturedItems=function(b,x,v){b="".concat(d.default.restBaseUrl,"content/items/").concat(b,"/relatedItems?relationshipType\x3dFeaturedItems2Item\x26direction\x3dforward");
u.default.getJson(b,x)};g.getUserItem=function(b,x,v){v=u.default.getUser();null!==v&&(v=v.username||v.email,v="".concat(d.default.restBaseUrl,"content/users/").concat(v),null!=b.folderId&&(v="".concat(v,"/").concat(b.folderId)),v="".concat(v,"/items/").concat(b.id),u.default.getJson(v,x))};g.getItem=function(b,x,v){b="".concat(d.default.restBaseUrl,"content/items/").concat(b);u.default.getJson(b,x,v)};g.getItemData=function(b,x,v){b="".concat(d.default.restBaseUrl,"content/items/").concat(b,"/data");
u.default.getJson(b,x,v)};g.getItemFolder=function(b,x){var v=u.default.getUser();if(null!==v){var y=v.username||v.email;v="".concat(d.default.restBaseUrl,"content/users/").concat(y);u.default.getJson(v,function(D){for(var E=null,C=0;C<D.items.length;C++)if(D.items[C].id===b){E="";break}if(null!==E)x(E);else{var z=function(w){for(var A=w.currentFolder.id,G=0;G<w.items.length;G++)if(w.items[G].id===b){E=A;x(E);break}};D.folders.forEach(function(w){w=w.folderName;w="".concat(d.default.restBaseUrl,"content/users/").concat(y,
"/").concat(w);u.default.getJson(w,z)})}})}};g.itemsToStore=function(b){var x,v=(null===(x=b.currentFolder)||void 0===x?void 0:x.id)||"",y=[];(b.items||[]).forEach(function(D,E){var C,z;D.folderId=v;D.imageUrl=g._getItemIconUrl(D);D.selected=!1;D.item=D.name||D.url||D.title;0<(null===(C=D.snippet)||void 0===C?void 0:C.length)&&"null"!==D.snippet?D.snippet=D.snippet:0<(null===(z=D.description)||void 0===z?void 0:z.length)&&"null"!==D.description?(C=u.default.removeHTMLTags(D.description),D.snippet=
150<C.length?"".concat(C.substring(0,150),"..."):C):D.snippet="";delete D.listingProperties;delete D.properties;y[E]=D});return new m.default({data:{identifier:"id",label:"item",items:y},url:void 0})};g.searchToStore=function(b){var x=[];(b.items||b.results||[]).forEach(function(v,y){var D,E=v.id,C=v.owner,z=v.title,w=v.description,A=v.created,G=v.modified,F=(null===(D=v.tags)||void 0===D?void 0:D.join(","))||[];v=g._getItemImageUrl(v);x[y]={id:E,owner:C,title:z,description:w,tags:F,imageUrl:v,created:A,
modified:G}});return new r.default({data:{identifier:"id",label:"item",items:x},url:void 0})};g._getPremiumItemNode=function(b){var x,v,y=(new h.default.PortalItem(l.__assign(l.__assign({},b),{portal:{isPortal:null===(x=d.default.self)||void 0===x?void 0:x.isPortal}}))).getTypeInfo();x=(null===(v=d.default.self)||void 0===v?0:v.isPortal)?"portal":"";b=c.default.includes(b.typeKeywords,"Requires Credits");return y.isPremiumContent?(b=t.default.create("div",{className:"esri-premium-content",title:b?
this.i18n["premiumcontentcreditstitle"+x]:this.i18n["premiumcontenttitle"+x],innerHTML:b?this.i18n.premiumcontent:this.i18n.subscriptioncontent}),t.default.create("img",{className:"esri-premium-icon",src:y.premiumIconUrl},b,"first"),b):!1};g._getItemIconUrl=function(b){var x;return(new h.default.PortalItem(l.__assign(l.__assign({},b),{portal:{isPortal:null===(x=d.default.self)||void 0===x?void 0:x.isPortal}}))).iconUrl};g._getItemImageUrl=function(b,x){var v;b=(null===(v=b.type)||void 0===v?void 0:
v.toLowerCase())||"";return u.default.relativeToExplicitUrl("geocoding service"===b||"network analysis service"===b||"geoprocessing service"===b||"geodata service"===b||"geometry service"===b||"workflow manager service"===b?x?"images/tool_16x16.png":"images/tool_32x32.png":"wms"===b||"kml"===b||"globe service"===b||"map service"===b||"image service"===b||"feature service"===b||"scene service"===b||"stream service"===b?x?"images/layer_16x16.png":"images/layer_32x32.png":"web mapping application"===
b||"mobile application"===b||"web map"===b?x?"images/map_16x16.png":"images/map_32x32.png":"layer"===b||"layer package"===b||"tile package"===b||"vector tile package"===b||"scene package"===b||"image collection"===b||"explorer layer"===b||"cad drawing"===b?x?"images/layer-download_16x16.png":"images/layer-download_32x32.png":"explorer add in"===b||"desktop add in"===b||"geoprocessing package"===b||"locator package"===b?x?"images/tool-download_16x16.png":"images/tool-download_32x32.png":"map document"===
b||"globe document"===b||"scene document"===b?x?"images/map-download_16x16.png":"images/map-download_32x32.png":"task file"===b?x?"images/taskfile16.png":"images/taskfile32.png":x?"images/noimage_16.png":"images/noimage.gif")};g.changeTypename=function(b,x,v){var y,D,E=new h.default.PortalItem(l.__assign(l.__assign({},b),{portal:{isPortal:null===(y=d.default.self)||void 0===y?void 0:y.isPortal}})),C=E.getTypeInfo();y=-1<(null===(D=b.type)||void 0===D?void 0:D.toLowerCase().indexOf("add in"))?E.displayName:
E.type;D=c.default.includes(b.typeKeywords,"Hosted Service");E=c.default.includes(b.typeKeywords,"View Service");var z=c.default.includes(b.typeKeywords,"ArcGIS Server"),w="Feature Service"===b.type;b="Feature Collection"===b.type;C=C.displayName;v&&(C=D?C+" (".concat(E?this.i18n.viewsWidget.hostedView:w?this.i18n.viewsWidget.hostedData:this.i18n.viewsWidget.hostedService,")"):C+" (".concat(this.i18n.viewsWidget.locatorView,")"));v=z||b?"".concat(this.i18n.source," "):"";return x?'\x3cspan title\x3d"'.concat(v).concat(y,
'"\x3e').concat(C,"\x3c/span\x3e"):C};g.getFavorites=function(){var b=d.default.self.user.favGroupId;b="".concat(d.default.restBaseUrl,"content/groups/").concat(b);var x,v={};return u.default.request({url:b}).then(function(y){x=y.items||[];x.forEach(function(D){v[D.id]=!0});return v})};g.addToFavorites=function(b){var x,v,y=u.default.getUser().favGroupId,D="".concat(d.default.restBaseUrl,"content/items/").concat(b.id,"/share"),E=b.access&&"public"===b.access||(null===(x=b.sharing)||void 0===x?void 0:
x.access)&&"public"===b.sharing.access;x=b.access&&"org"===b.access||(null===(v=b.sharing)||void 0===v?void 0:v.access)&&"org"===b.sharing.access;return u.default.request({url:D,content:{f:"json",everyone:E||!1,org:x||!1,groups:[y],items:[b.id]}},{usePost:!0})};g.removeFromFavorites=function(b){var x=u.default.getUser().favGroupId,v="".concat(d.default.restBaseUrl,"content/items/").concat(b.id,"/unshare");return u.default.request({url:v,content:{f:"json",everyone:!1,org:!1,groups:[x],items:[b.id]}},
{usePost:!0})};g.i18n=l.__assign(l.__assign({},n.default.common),{source:n.default.itemProperties.source,viewsWidget:n.default.viewsWidget});return g}()})},"dojo/data/ItemFileWriteStore":function(){define("../_base/lang ../_base/declare ../_base/array ../_base/json ../_base/kernel ./ItemFileReadStore ../date/stamp".split(" "),function(f,B,l,d,c,u,t){return B("dojo.data.ItemFileWriteStore",u,{constructor:function(e){this._features["dojo.data.api.Write"]=!0;this._features["dojo.data.api.Notification"]=
!0;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};this._datatypeMap.Date.serialize||(this._datatypeMap.Date.serialize=function(r){return t.toISOString(r,{zulu:!0})});e&&!1===e.referenceIntegrity&&(this.referenceIntegrity=!1);this._saveInProgress=!1},referenceIntegrity:!0,_assert:function(e){if(!e)throw Error("assertion failed in ItemFileWriteStore");},_getIdentifierAttribute:function(){return this.getFeatures()["dojo.data.api.Identity"]},newItem:function(e,r){this._assert(!this._saveInProgress);
this._loadFinished||this._forceLoad();if("object"!=typeof e&&"undefined"!=typeof e)throw Error("newItem() was passed something other than an object");var m=null,a=this._getIdentifierAttribute();if(a===Number)m=this._arrayOfAllItems.length;else{m=e[a];if("undefined"===typeof m)throw Error("newItem() was not passed an identity for the new item");if(f.isArray(m))throw Error("newItem() was not passed an single-valued identity");}this._itemsByIdentity&&this._assert("undefined"===typeof this._itemsByIdentity[m]);
this._assert("undefined"===typeof this._pending._newItems[m]);this._assert("undefined"===typeof this._pending._deletedItems[m]);var h={};h[this._storeRefPropName]=this;h[this._itemNumPropName]=this._arrayOfAllItems.length;this._itemsByIdentity&&(this._itemsByIdentity[m]=h,h[a]=[m]);this._arrayOfAllItems.push(h);a=null;if(r&&r.parent&&r.attribute){a={item:r.parent,attribute:r.attribute,oldValue:void 0};var q=this.getValues(r.parent,r.attribute);if(q&&0<q.length){var n=q.slice(0,q.length);a.oldValue=
1===q.length?q[0]:q.slice(0,q.length);n.push(h);this._setValueOrValues(r.parent,r.attribute,n,!1);a.newValue=this.getValues(r.parent,r.attribute)}else this._setValueOrValues(r.parent,r.attribute,h,!1),a.newValue=h}else h[this._rootItemPropName]=!0,this._arrayOfTopLevelItems.push(h);this._pending._newItems[m]=h;for(var k in e){if(k===this._storeRefPropName||k===this._itemNumPropName)throw Error("encountered bug in ItemFileWriteStore.newItem");r=e[k];f.isArray(r)||(r=[r]);h[k]=r;if(this.referenceIntegrity)for(m=
0;m<r.length;m++)q=r[m],this.isItem(q)&&this._addReferenceToMap(q,h,k)}this.onNew(h,a);return h},_removeArrayElement:function(e,r){r=l.indexOf(e,r);return-1!=r?(e.splice(r,1),!0):!1},deleteItem:function(e){this._assert(!this._saveInProgress);this._assertIsItem(e);var r=e[this._itemNumPropName],m=this.getIdentity(e);if(this.referenceIntegrity){var a=this.getAttributes(e);e[this._reverseRefMap]&&(e["backup_"+this._reverseRefMap]=f.clone(e[this._reverseRefMap]));l.forEach(a,function(b){l.forEach(this.getValues(e,
b),function(x){this.isItem(x)&&(e["backupRefs_"+this._reverseRefMap]||(e["backupRefs_"+this._reverseRefMap]=[]),e["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(x),attr:b}),this._removeReferenceFromMap(x,e,b))},this)},this);if(a=e[this._reverseRefMap])for(var h in a){var q=null;if(q=this._itemsByIdentity?this._itemsByIdentity[h]:this._arrayOfAllItems[h])for(var n in a[h]){var k=this.getValues(q,n)||[],g=l.filter(k,function(b){return!(this.isItem(b)&&this.getIdentity(b)==m)},this);this._removeReferenceFromMap(e,
q,n);g.length<k.length&&this._setValueOrValues(q,n,g,!0)}}}this._arrayOfAllItems[r]=null;e[this._storeRefPropName]=null;this._itemsByIdentity&&delete this._itemsByIdentity[m];this._pending._deletedItems[m]=e;e[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,e);this.onDelete(e);return!0},setValue:function(e,r,m){return this._setValueOrValues(e,r,m,!0)},setValues:function(e,r,m){return this._setValueOrValues(e,r,m,!0)},unsetAttribute:function(e,r){return this._setValueOrValues(e,
r,[],!0)},_setValueOrValues:function(e,r,m,a){this._assert(!this._saveInProgress);this._assertIsItem(e);this._assert(f.isString(r));this._assert("undefined"!==typeof m);var h=this._getIdentifierAttribute();if(r==h)throw Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");h=this._getValueOrValues(e,r);var q=this.getIdentity(e);if(!this._pending._modifiedItems[q]){var n={};for(k in e)n[k]=k===this._storeRefPropName||k===this._itemNumPropName||k===this._rootItemPropName?
e[k]:k===this._reverseRefMap?f.clone(e[k]):e[k].slice(0,e[k].length);this._pending._modifiedItems[q]=n}q=!1;if(f.isArray(m)&&0===m.length){if(q=delete e[r],m=void 0,this.referenceIntegrity&&h){var k=h;f.isArray(k)||(k=[k]);for(var g=0;g<k.length;g++)n=k[g],this.isItem(n)&&this._removeReferenceFromMap(n,e,r)}}else{q=f.isArray(m)?m.slice(0,m.length):[m];if(this.referenceIntegrity)if(h){k=h;f.isArray(k)||(k=[k]);var b={};l.forEach(k,function(x){this.isItem(x)&&(x=this.getIdentity(x),b[x.toString()]=
!0)},this);l.forEach(q,function(x){if(this.isItem(x)){var v=this.getIdentity(x);b[v.toString()]?delete b[v.toString()]:this._addReferenceToMap(x,e,r)}},this);for(g in b)this._removeReferenceFromMap(this._itemsByIdentity?this._itemsByIdentity[g]:this._arrayOfAllItems[g],e,r)}else for(g=0;g<q.length;g++)n=q[g],this.isItem(n)&&this._addReferenceToMap(n,e,r);e[r]=q;q=!0}if(a)this.onSet(e,r,h,m);return q},_addReferenceToMap:function(e,r,m){r=this.getIdentity(r);var a=e[this._reverseRefMap];a||(a=e[this._reverseRefMap]=
{});(e=a[r])||(e=a[r]={});e[m]=!0},_removeReferenceFromMap:function(e,r,m){r=this.getIdentity(r);var a=e[this._reverseRefMap],h;if(a){for(h in a)h==r&&(delete a[h][m],this._isEmpty(a[h])&&delete a[h]);this._isEmpty(a)&&delete e[this._reverseRefMap]}},_dumpReferenceMap:function(){var e;for(e=0;e<this._arrayOfAllItems.length;e++);},_getValueOrValues:function(e,r){var m=void 0;this.hasAttribute(e,r)&&(e=this.getValues(e,r),m=1==e.length?e[0]:e);return m},_flatten:function(e){if(this.isItem(e))return{_reference:this.getIdentity(e)};
if("object"===typeof e)for(var r in this._datatypeMap){var m=this._datatypeMap[r];if(f.isObject(m)&&!f.isFunction(m)){if(e instanceof m.type){if(!m.serialize)throw Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+r+"]");return{_type:r,_value:m.serialize(e)}}}else if(e instanceof m)return{_type:r,_value:e.toString()}}return e},_getNewFileContentString:function(){var e={},r=this._getIdentifierAttribute();r!==Number&&(e.identifier=r);this._labelAttr&&(e.label=this._labelAttr);e.items=
[];for(r=0;r<this._arrayOfAllItems.length;++r){var m=this._arrayOfAllItems[r];if(null!==m){var a={},h;for(h in m)if(h!==this._storeRefPropName&&h!==this._itemNumPropName&&h!==this._reverseRefMap&&h!==this._rootItemPropName){var q=this.getValues(m,h);if(1==q.length)a[h]=this._flatten(q[0]);else for(var n=[],k=0;k<q.length;++k)n.push(this._flatten(q[k])),a[h]=n}e.items.push(a)}}return d.toJson(e,!0)},_isEmpty:function(e){var r=!0;if(f.isObject(e))for(var m in e){r=!1;break}else f.isArray(e)&&0<e.length&&
(r=!1);return r},save:function(e){this._assert(!this._saveInProgress);this._saveInProgress=!0;var r=this,m=function(){r._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};r._saveInProgress=!1;e&&e.onComplete&&e.onComplete.call(e.scope||c.global)},a=function(q){r._saveInProgress=!1;e&&e.onError&&e.onError.call(e.scope||c.global,q)};if(this._saveEverything){var h=this._getNewFileContentString();this._saveEverything(m,a,h)}this._saveCustom&&this._saveCustom(m,a);this._saveEverything||this._saveCustom||
m()},revert:function(){this._assert(!this._saveInProgress);for(var e in this._pending._modifiedItems){var r=this._pending._modifiedItems[e],m=null;m=this._itemsByIdentity?this._itemsByIdentity[e]:this._arrayOfAllItems[e];r[this._storeRefPropName]=this;for(var a in m)delete m[a];f.mixin(m,r)}for(e in this._pending._deletedItems){var h=this._pending._deletedItems[e];h[this._storeRefPropName]=this;r=h[this._itemNumPropName];h["backup_"+this._reverseRefMap]&&(h[this._reverseRefMap]=h["backup_"+this._reverseRefMap],
delete h["backup_"+this._reverseRefMap]);this._arrayOfAllItems[r]=h;this._itemsByIdentity&&(this._itemsByIdentity[e]=h);h[this._rootItemPropName]&&this._arrayOfTopLevelItems.push(h)}for(e in this._pending._deletedItems)h=this._pending._deletedItems[e],h["backupRefs_"+this._reverseRefMap]&&(l.forEach(h["backupRefs_"+this._reverseRefMap],function(q){this._addReferenceToMap(this._itemsByIdentity?this._itemsByIdentity[q.id]:this._arrayOfAllItems[q.id],h,q.attr)},this),delete h["backupRefs_"+this._reverseRefMap]);
for(e in this._pending._newItems)r=this._pending._newItems[e],r[this._storeRefPropName]=null,this._arrayOfAllItems[r[this._itemNumPropName]]=null,r[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,r),this._itemsByIdentity&&delete this._itemsByIdentity[e];this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return!0},isDirty:function(e){return e?(e=this.getIdentity(e),(new Boolean(this._pending._newItems[e]||this._pending._modifiedItems[e]||this._pending._deletedItems[e])).valueOf()):
!this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems)},onSet:function(e,r,m,a){},onNew:function(e,r){},onDelete:function(e){},close:function(e){if(this.clearOnClose){if(this.isDirty())throw Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");this.inherited(arguments)}}})})},"dojox/data/QueryReadStore":function(){define(["dojo","dojox",
"dojo/data/util/sorter","dojo/string"],function(f,B){return f.declare("dojox.data.QueryReadStore",null,{url:"",requestMethod:"get",_className:"dojox.data.QueryReadStore",_items:[],_lastServerQuery:null,_numRows:-1,lastRequestHash:null,doClientPaging:!1,doClientSorting:!1,_itemsByIdentity:null,_identifier:null,_features:{"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0},_labelAttr:"label",constructor:function(l){f.mixin(this,l)},getValue:function(l,d,c){this._assertIsItem(l);if(!f.isString(d))throw Error(this._className+
".getValue(): Invalid attribute, string expected!");return!this.hasAttribute(l,d)&&c?c:l.i[d]},getValues:function(l,d){this._assertIsItem(l);var c=[];this.hasAttribute(l,d)&&c.push(l.i[d]);return c},getAttributes:function(l){this._assertIsItem(l);var d=[],c;for(c in l.i)d.push(c);return d},hasAttribute:function(l,d){return this.isItem(l)&&"undefined"!=typeof l.i[d]},containsValue:function(l,d,c){l=this.getValues(l,d);d=l.length;for(var u=0;u<d;u++)if(l[u]==c)return!0;return!1},isItem:function(l){return l?
"undefined"!=typeof l.r&&l.r==this:!1},isItemLoaded:function(l){return this.isItem(l)},loadItem:function(l){this.isItemLoaded(l.item)},fetch:function(l){l=l||{};l.store||(l.store=this);var d=this;this._fetchItems(l,function(c,u,t){var e=u.abort||null,r=!1,m=u.start?u.start:0;0==d.doClientPaging&&(m=0);var a=u.count?m+u.count:c.length;u.abort=function(){r=!0;e&&e.call(u)};var h=u.scope||f.global;u.store||(u.store=d);u.onBegin&&u.onBegin.call(h,t,u);u.sort&&d.doClientSorting&&c.sort(f.data.util.sorter.createSortFunction(u.sort,
d));if(u.onItem)for(t=m;t<c.length&&t<a;++t){var q=c[t];r||u.onItem.call(h,q,u)}u.onComplete&&!r&&(t=null,u.onItem||(t=c.slice(m,a)),u.onComplete.call(h,t,u))},function(c,u){u.onError&&u.onError.call(u.scope||f.global,c,u)});return l},getFeatures:function(){return this._features},close:function(l){},getLabel:function(l){if(this._labelAttr&&this.isItem(l))return this.getValue(l,this._labelAttr)},getLabelAttributes:function(l){return this._labelAttr?[this._labelAttr]:null},_xhrFetchHandler:function(l,
d,c,u){l=this._filterResponse(l);l.label&&(this._labelAttr=l.label);u=l.numRows||-1;this._items=[];f.forEach(l.items,function(m){this._items.push({i:m,r:this})},this);l=l.identifier;this._itemsByIdentity={};if(l){this._identifier=l;var t;for(t=0;t<this._items.length;++t){var e=this._items[t].i,r=e[l];if(this._itemsByIdentity[r])throw Error(this._className+":  The json data as specified by: ["+this.url+"] is malformed.  Items within the list have identifier: ["+l+"].  Value collided: ["+r+"]");this._itemsByIdentity[r]=
e}}else for(this._identifier=Number,t=0;t<this._items.length;++t)this._items[t].n=t;u=this._numRows=-1===u?this._items.length:u;c(this._items,d,u);this._numRows=u},_fetchItems:function(l,d,c){var u=l.serverQuery||l.query||{};this.doClientPaging||(u.start=l.start||0,l.count&&(u.count=l.count));if(!this.doClientSorting&&l.sort){var t=[];f.forEach(l.sort,function(r){r&&r.attribute&&t.push((r.descending?"-":"")+r.attribute)});u.sort=t.join(",")}if(this.doClientPaging&&null!==this._lastServerQuery&&f.toJson(u)==
f.toJson(this._lastServerQuery))this._numRows=-1===this._numRows?this._items.length:this._numRows,d(this._items,l,this._numRows);else{var e=("post"==this.requestMethod.toLowerCase()?f.xhrPost:f.xhrGet)({url:this.url,handleAs:"json-comment-optional",content:u,failOk:!0});l.abort=function(){e.cancel()};e.addCallback(f.hitch(this,function(r){this._xhrFetchHandler(r,l,d,c)}));e.addErrback(function(r){c(r,l)});this.lastRequestHash=(new Date).getTime()+"-"+String(Math.random()).substring(2);this._lastServerQuery=
f.mixin({},u)}},_filterResponse:function(l){return l},_assertIsItem:function(l){if(!this.isItem(l))throw Error(this._className+": Invalid item argument.");},_assertIsAttribute:function(l){if("string"!==typeof l)throw Error(this._className+": Invalid attribute argument ('"+l+"').");},fetchItemByIdentity:function(l){if(this._itemsByIdentity){var d=this._itemsByIdentity[l.identity];if(void 0!==d){l.onItem&&l.onItem.call(l.scope?l.scope:f.global,{i:d,r:this});return}}this._fetchItems({serverQuery:{id:l.identity}},
function(c,u){u=l.scope?l.scope:f.global;try{var t=null;c&&1==c.length&&(t=c[0]);l.onItem&&l.onItem.call(u,t)}catch(e){l.onError&&l.onError.call(u,e)}},function(c,u){u=l.scope?l.scope:f.global;l.onError&&l.onError.call(u,c)})},getIdentity:function(l){var d=null;return d=this._identifier===Number?l.n:l.i[this._identifier]},getIdentityAttributes:function(l){return[this._identifier]}})})},"arcgisonline/sharing/geow/Account":function(){define("require exports tslib dijit/registry dojo/_base/kernel dojo/Deferred dojo/json dojo/promise/all dojo/on dojo/request/iframe dojo/sniff dojo/data/util/sorter dojo/when dojo/_base/url esri/config esri/lang esri/request esri/IdentityManager ../../pages/utils/promises ../../pages/utils/signin ../../pages/utils/storage ../../pages/utils/enterprise ../../esriGeowConfig ../util ../dijit/Role ../dijit/dialog/GeneralDlg dojo/i18n!../../nls/arcgisonline".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E,C,z,w,A,G){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);q=l.__importDefault(q);n=l.__importDefault(n);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);x=l.__importDefault(x);v=l.__importDefault(v);y=l.__importDefault(y);D=l.__importDefault(D);E=l.__importDefault(E);
C=l.__importDefault(C);z=l.__importDefault(z);w=l.__importDefault(w);A=l.__importDefault(A);G=l.__importDefault(G);return function(){function F(){}F.loadMapSettings=function(H){this.getSelf(function(J){var K;if(J){J.allSSL&&(C.default.allSSL=J.allSSL);g.default.isDefined(C.default.allSSL)&&C.default.allSSL&&"http:"===location.protocol&&(window.location.href=z.default.getSecureUrl(location.href));J.basemapGalleryGroupQuery&&(C.default.basemapGalleryGroupQuery=J.basemapGalleryGroupQuery);J.templatesGroupQuery&&
(C.default.templatesGroupQuery=J.templatesGroupQuery);J.defaultBasemap&&(C.default.defaultBasemap=J.defaultBasemap);J.defaultExtent&&(C.default.defaultExtent=J.defaultExtent);J.symbolSetsGroupQuery&&(C.default.symbolSetsGroupQuery=J.symbolSetsGroupQuery);J.staticImagesUrl&&(C.default.staticImagesUrl=J.staticImagesUrl);J.layerTemplatesGroupQuery&&(C.default.layerTemplatesGroupQuery=J.layerTemplatesGroupQuery);J.colorSetsGroupQuery&&(C.default.colorSetsGroupQuery=J.colorSetsGroupQuery);J.helpBase&&
(C.default.help=J.helpBase,C.default.helpBase=J.helpBase);J.helpMap&&J.helpMap.m&&(C.default.helpMap=J.helpMap.m);J.urlKey&&(C.default.urlKey=J.urlKey);var Q=void 0;if(J.authorizedCrossOriginDomains&&0<J.authorizedCrossOriginDomains.length)for(Q=0;Q<J.authorizedCrossOriginDomains.length;Q++){var P=J.authorizedCrossOriginDomains[Q];g.default.isDefined(P)&&0<P.length&&k.default.defaults.io.corsEnabledServers.push({host:P,withCredentials:!0})}y.default.checkForOrgUserOnOnlineBaseHostAndRedirect(J);J.isPortal&&
-1===(null===(K=z.default._cookies)||void 0===K?void 0:K.arcgis_auth)&&delete z.default._cookies.arcgis_auth;K=!1===C.default.isMultiTenant;P=(Q=z.default.getUser())?!0:!1;var I=window.location.pathname.toLowerCase(),N=-1!==I.indexOf(C.default.signin),L=-1!==I.indexOf("troubleshoot.html");I=-1!==I.indexOf("setup.html");K||!Q||"account_admin"!==Q.role&&"org_admin"!==Q.role||!J.id||J.urlKey||I||(window.location.href="".concat(C.default.baseUrl,"setup.html"));K?(!J.access||"private"!==J.access||P||N||
L||(window.location.href="".concat(z.default.getSecureUrl()).concat(C.default.signin,"?returnUrl\x3d").concat(encodeURIComponent(window.location.href))),J.isPortal&&"singletenant"===J.portalMode&&("7080"===location.port||"7443"===location.port)&&z.default.checkForIAA().then(function(W){if(null===W||void 0===W?0:W.hasIAA)if(J.portalHostname.match(/:7080\//)&&"http:"===location.protocol&&-1===location.href.indexOf("error.html")&&(window.location.href="".concat(z.default.getHttpUrl(C.default.baseUrl),
"error.html?c\x3dWebAdaptorRequired")),!J.portalHostname.match(/:7080\//)&&80!==C.default.self.httpPort&&443!==C.default.self.httpsPort&&"http:"===location.protocol&&-1===location.href.indexOf("error.html")){W=new n.default(location.href);var Z=W.path.indexOf("/home/");Z=W.path.substring(Z+6);W=g.default.isDefined(W.query)?"?".concat(W.query):"";window.location.href="".concat(z.default.getHttpUrl("http://".concat(J.portalHostname))).concat("/home/").concat(Z).concat(W)}})):J.id||!J.urlKey||P||N||
L||(window.location.href="".concat(C.default.baseUrl.replace("http:","https:")).concat(C.default.signin,"?returnUrl\x3d").concat(encodeURIComponent(window.location.href)))}H&&H(J)})};F.getSelf=function(H,J,K){var Q=this;if(this._isRequestingSelf)setTimeout(this.getSelf.bind(this,H,J),75);else{var P="".concat(C.default.restBaseUrl,"portals/helpmap?culture\x3d").concat(c.default.locale),I="".concat(C.default.restBaseUrl,"portals/self?culture\x3d").concat(c.default.locale);K&&(P+="\x26token\x3d".concat(K),
I+="\x26token\x3d".concat(K));var N="".concat(C.default.restBaseUrl,"community/self");N=(K=x.default.findCredential(C.default.restBaseUrl))?{url:N,content:{returnUserLicensedItems:!0,token:K.token}}:null;P=(null===C.default||void 0===C.default?void 0:C.default.self)||v.default.eachAlways({helpMapResult:z.default._requestWithAppHandlers({url:P}),selfResult:z.default._requestWithAppHandlers({url:I}),communitySelfResult:K?z.default._requestWithAppHandlers(N):v.default.resolve(null)}).then(function(L){var W,
Z,aa;if(null===(W=L.selfResult)||void 0===W?0:W.error)throw L.selfResult.error;var ia=L.selfResult.value;if(null===(Z=L.helpMapResult)||void 0===Z?0:Z.value)ia.helpMap=L.helpMapResult.value.helpMap;if(null===(aa=L.communitySelfResult)||void 0===aa?0:aa.value)ia.communitySelf=L.communitySelfResult.value;return ia.user?x.default.checkAppAccess(C.default.restBaseUrl,Q.getAppClientId()).always(function(R){return Q.setupAfterSelf(ia,!(null===R||void 0===R||!R.viewOnly)).then(function(S){Q._isRequestingSelf=
!1;10>=(0,a.default)("ie")&&Q.throwawayIEPostFix();return S})}):Q.setupAfterSelf(ia).then(function(R){Q._isRequestingSelf=!1;10>=(0,a.default)("ie")&&Q.throwawayIEPostFix();return R})},function(L){throw L;});this._isRequestingSelf=!C.default.self;return(0,q.default)(P,H,J)}};F.getAppClientId=function(){var H=-1<window.location.href.indexOf("webmap/viewer.html")?"arcgisWebApps":"arcgisonline";try{return D.default.getLocalStorageItem("portalAppClientId")||D.default.getSessionStorageItem("portalAppClientId")||
H}catch(J){return H}};F.setupAfterSelf=function(H,J){var K=new u.default;C.default.self=H;this.setupUserRole(H,J);H.isPortal?this.getPortalAppSettings().then(function(Q){if(Q&&!Q.code&&(null===Q||void 0===Q?0:Q.portalConfigProperties)){var P=E.default.copyPortalConfigProperties(Q.portalConfigProperties,C.default);Object.keys(P).forEach(function(I){C.default[I]=P[I]})}K.resolve(H)},function(){K.resolve(H)}):K.resolve(H);return K};F.getPortalAppSettings=function(){return z.default.request({url:"".concat(C.default.restBaseUrl,
"portals/self/settings"),content:{f:"json"}})};F.setupUserRole=function(H,J){var K,Q;C.default.userInfo=H.user&&l.__assign(l.__assign({},C.default.userInfo),H.user);if(null===(K=C.default.userInfo)||void 0===K?0:K.orgId)C.default.userInfo.accountId=C.default.userInfo.orgId;if(null===(Q=H.user)||void 0===Q?0:Q.role)C.default.userRole=new w.default({id:H.user.roleId?H.user.roleId:H.user.role,role:H.user.role,privileges:H.user.privileges?H.user.privileges:void 0,viewOnly:J}),J&&(C.default.self.user.role=
C.default.userInfo.role=H.user.role=C.default.userRole.baseRole,C.default.self.user.roleId=C.default.userInfo.roleId=H.user.roleId=C.default.userRole.id,C.default.self.user.privileges=C.default.userInfo.privileges=H.user.privileges=C.default.userRole.privileges,C.default.self.user.level=C.default.userInfo.level=H.user.level="1");this.normalizeOrgIdAndRole()};F.normalizeOrgIdAndRole=function(){g.default.isDefined(C.default.self.user)&&(g.default.isDefined(C.default.self.user.orgId)&&(C.default.self.user.accountId=
C.default.self.user.orgId),g.default.isDefined(C.default.self.user.role)&&(C.default.self.user.role=z.default.normalizeOrgRole(C.default.self.user.role)));g.default.isDefined(C.default.userInfo)&&(g.default.isDefined(C.default.userInfo.orgId)&&(C.default.userInfo.accountId=C.default.userInfo.orgId),g.default.isDefined(C.default.userInfo.role)&&(C.default.userInfo.role=z.default.normalizeOrgRole(C.default.userInfo.role)))};F.throwawayIEPostFix=function(){var H=document.createElement("form");H.encoding=
"multipart/form-data";H.method="POST";var J=document.createElement("input");J.type="hidden";J.name="f";J.value="json";H.appendChild(J);J=document.createElement("input");J.type="hidden";J.name="q";J.value="*";H.appendChild(J);J=document.createElement("input");J.type="hidden";J.name="callback.html";J.value="textarea";H.appendChild(J);m.default.post("".concat(C.default.restBaseUrl,"community/users"),{form:H,handleAs:"json"}).then(function(){}).otherwise(function(){})};F.updateAccount=function(H,J,K){var Q;
if(null!==z.default.getUser()){var P="";H.defaultBasemap&&(P=t.default.stringify(H.defaultBasemap));var I=0<(null===(Q=H.metadataFormats)||void 0===Q?void 0:Q.length)?H.metadataFormats.join(","):"",N=!!C.default.userRole,L=C.default.userRole.isAdmin(),W=C.default.self&&(C.default.self.canListApps||C.default.self.canListData),Z=N&&(L||C.default.userRole.canManageCredits());Q=N&&(L||C.default.userRole.canManageSecurity());var aa=N&&(L||C.default.userRole.canManageWebsite());W=W&&N&&(L||C.default.userRole.canManageMarketplace());
N=N&&(L||C.default.userRole.canManageUtilityServices());L=aa||Q||N||Z;Z={clearEmptyFields:!0};aa&&(Z.name=H.name,Z.description=H.description,Z.culture=H.culture,Z.cultureFormat=H.cultureFormat,Z.region=H.region,Z.featuredItemsGroupQuery=H.featuredItemsGroupQuery,Z.thumbnail=H.thumbnail,Z.basemapGalleryGroupQuery=H.basemapGalleryGroupQuery,Z.defaultBasemap=P,Z.defaultExtent=H.defaultExtent?t.default.stringify(H.defaultExtent):"",Z.featuredGroups=t.default.stringify(H.featuredGroups),Z.homePageFeaturedContent=
H.homePageFeaturedContent,Z.homePageFeaturedContentCount=H.homePageFeaturedContentCount,Z.rotatorPanels=t.default.stringify(H.rotatorPanels),Z.showHomePageDescription=H.showHomePageDescription,Z.templatesGroupQuery=H.templatesGroupQuery,Z.analysisLayersGroupQuery=H.analysisLayersGroupQuery,Z.galleryTemplatesGroupQuery=H.galleryTemplatesGroupQuery,Z.stylesGroupQuery=H.stylesGroupQuery,Z.bingKey=H.bingKey,Z.canShareBingPublic=H.canShareBingPublic,Z.backgroundImage=H.backgroundImage,Z.units=H.units,
Z.metadataEditable=H.metadataEditable,Z.metadataFormats=I,Z.useVectorBasemaps=H.useVectorBasemaps);N&&H.helperServices&&(Z.geocodeService=t.default.stringify(H.helperServices.geocode),Z.printServiceTask=t.default.stringify(H.helperServices.printTask),Z.geometryService=t.default.stringify(H.helperServices.geometry),Z.routeServiceLayer=t.default.stringify(H.helperServices.route),g.default.isDefined(H.helperServices.asyncRoute)&&(Z.asyncRouteService=t.default.stringify(H.helperServices.asyncRoute)),
g.default.isDefined(H.helperServices.closestFacility)&&(Z.closestFacilityService=t.default.stringify(H.helperServices.closestFacility)),g.default.isDefined(H.helperServices.asyncClosestFacility)&&(Z.asyncClosestFacilityService=t.default.stringify(H.helperServices.asyncClosestFacility)),g.default.isDefined(H.helperServices.serviceArea)&&(Z.serviceAreaService=t.default.stringify(H.helperServices.serviceArea)),g.default.isDefined(H.helperServices.asyncServiceArea)&&(Z.asyncServiceAreaService=t.default.stringify(H.helperServices.asyncServiceArea)),
g.default.isDefined(H.helperServices.syncVRP)&&(Z.syncVRPService=t.default.stringify(H.helperServices.syncVRP)),g.default.isDefined(H.helperServices.asyncVRP)&&(Z.asyncVRPService=t.default.stringify(H.helperServices.asyncVRP)),g.default.isDefined(H.helperServices.asyncLocationAllocation)&&(Z.asyncLocationAllocationService=t.default.stringify(H.helperServices.asyncLocationAllocation)),g.default.isDefined(H.helperServices.routingUtilities)&&(Z.routingUtilitiesService=t.default.stringify(H.helperServices.routingUtilities)),
g.default.isDefined(H.helperServices.traffic)&&(Z.trafficService=t.default.stringify(H.helperServices.traffic)),g.default.isDefined(H.helperServices.asyncODCostMatrix)&&(Z.asyncODCostMatrixService=t.default.stringify(H.helperServices.asyncODCostMatrix)),z.default.isPortal()&&(g.default.isDefined(H.helperServices.analysis)&&(Z.analysisService=t.default.stringify(H.helperServices.analysis)),g.default.isDefined(H.helperServices.asyncGeocode)&&(Z.asyncGeocodeService=t.default.stringify(H.helperServices.asyncGeocode)),
g.default.isDefined(H.helperServices.geoenrichment)&&(Z.geoenrichmentService=t.default.stringify(H.helperServices.geoenrichment)),g.default.isDefined(H.helperServices.hydrology)&&(Z.hydrologyService=t.default.stringify(H.helperServices.hydrology)),g.default.isDefined(H.helperServices.orthomappingElevation)&&(Z.orthomappingElevationService=t.default.stringify(H.helperServices.orthomappingElevation)),g.default.isDefined(H.helperServices.elevation)&&(Z.elevationService=t.default.stringify(H.helperServices.elevation)),
g.default.isDefined(H.helperServices.elevationSync)&&(Z.elevationSyncService=t.default.stringify(H.helperServices.elevationSync)),g.default.isDefined(H.helperServices.defaultElevationLayers)&&(Z.elevation3DService=t.default.stringify(H.helperServices.defaultElevationLayers))));W&&(Z.orgUrl=H.orgUrl,Z.orgEmail=H.orgEmail,Z.orgPhone=H.orgPhone);Q&&(Z.access=H.access,Z.allSSL=H.allSSL,Z.commentsEnabled=H.commentsEnabled,Z.canSharePublic=H.canSharePublic,Z.canSearchPublic=H.canSearchPublic,Z.urlKey=H.urlKey,
Z.canSignInIDP=H.canSignInIDP,Z.canSignInArcGIS=H.canSignInArcGIS,Z.useStandardizedQuery=H.useStandardizedQuery,Z.mfaEnabled=H.mfaEnabled,Z.mfaAdmins=t.default.stringify(H.mfaAdmins),Z.authorizedCrossOriginDomains=t.default.stringify(H.authorizedCrossOriginDomains),Z.allowedOrigins=H.allowedOrigins,Z.allowedRedirectUris=t.default.stringify(H.allowedRedirectUris),Z.updateUserProfileDisabled=H.updateUserProfileDisabled,Z.eueiEnabled=H.eueiEnabled,Z.contacts=t.default.stringify(H.contacts||[]));L&&(Z.portalProperties=
t.default.stringify(H.portalProperties));H=Object.keys(Z);1===H.length&&"clearEmptyFields"===H[0]?null===J||void 0===J?void 0:J():(H="".concat(z.default.getSecureUrl(C.default.restBaseUrl),"portals/self/update"),z.default.request({url:H,content:Z},{usePost:!0}).then(J.bind(this),K.bind(this)))}};F.checkUsernames=function(H,J,K){var Q="";0<(null===H||void 0===H?void 0:H.length)&&(Q=H.join(","));H="".concat(C.default.restBaseUrl,"community/checkUsernames");z.default.request({url:H,content:{usernames:Q}},
{usePost:!0}).then(J,K)};F.getPendingAccountUsers=function(H,J,K){if(null!==z.default.getUser()){var Q=1,P=10;H=g.default.isDefined(J.sortField)?J.sortField:void 0;var I=g.default.isDefined(J.sortOrder)?J.sortOrder:void 0,N=g.default.isDefined(J.type)?J.type:void 0;g.default.isDefined(J.start)&&(Q=J.start);g.default.isDefined(J.num)&&(P=J.num);J="".concat(C.default.restBaseUrl,"portals/self/invitations?start\x3d").concat(Q,"\x26num\x3d").concat(P);H&&(J+="\x26sortField\x3d".concat(H));I&&(J+="\x26sortOrder\x3d".concat(I));
N&&(J+="\x26type\x3d".concat(N));z.default.request({url:J}).then(K,K)}};F.getInvitation=function(H,J,K){null!==z.default.getUser()&&(H="".concat(C.default.restBaseUrl,"community/invitations/").concat(H),z.default.request({url:H}).then(J.bind(this),K))};F.acceptInvitation=function(H,J,K){if(null!==z.default.getUser()){var Q="".concat(C.default.restBaseUrl,"community/invitations/").concat(H,"/accept");z.default.request({url:Q,content:{invitationId:H}},{usePost:!0}).then(J.bind(this),K.bind(this))}};
F.updateUserRole=function(H,J,K,Q){var P=null,I=z.default.getUser();if(null!==I){P=I.accountId;var N=I.username||I.email;if(null!==P)if(N===H&&"account_admin"===I.role&&"account_admin"!==J){var L=new A.default;r.default.once(L._dialog,"hide",function(){L._dialog.destroyRecursive();L.destroyRecursive()});L.onOkClick=function(){d.default.byId("general-dialog").hide();K(null)};L.show(G.default.common.errors.accountAdmin)}else H={user:H,role:J},J="".concat(C.default.restBaseUrl,"portals/self/updateUserRole"),
z.default.request({url:J,content:H},{usePost:!0}).then(K.bind(this),Q.bind(this))}};F.deleteUser=function(H,J,K){null!==z.default.getUser()&&(H="".concat(C.default.restBaseUrl,"community/users/").concat(H,"/delete"),z.default.request({url:H,content:{}},{usePost:!0}).then(J.bind(this),K.bind(this)))};F.caseInsensitiveComparator=function(H,J){H&&(H=H.toLowerCase());J&&(J=J.toLowerCase());return h.default.basicComparator(H,J)};F.lastLoginComparator=function(H,J){var K,Q=0===H||-1===H?void 0:H,P=0===
J||-1===J?void 0:J,I=-1;(null===(K=C.default.self)||void 0===K?0:K.isPortal)||!1===C.default.isMultiTenant?I=h.default.basicComparator(Q,P):Q===P?I=H===J?0:H<J?-1:1:Q&&P&&H>J?I=1:Q&&!P?I=1:!Q&&P&&(I=-1);return I};F.getSupportedLanguages=function(H,J){var K="".concat(C.default.restBaseUrl,"portals/languages");return(0,b.default)({url:K,content:{f:"json"},load:H,callbackParamName:"callback",error:J})};F.getSupportedRegions=function(H,J){var K="".concat(C.default.restBaseUrl,"portals/regions");return(0,b.default)({url:K,
content:{f:"json",culture:c.default.locale},load:H,callbackParamName:"callback",error:J})};F.getSupportedLanguagesAndRegions=function(){var H=new u.default;(0,e.default)({languages:this.getSupportedLanguages(null,null),regions:this.getSupportedRegions(null,null)}).then(function(J){H.resolve({languages:J.languages,regions:J.regions})},function(J){H.resolve(J)});return H};F.displayedPortalNonSSLNotice=!1;return F}()})},"dojox/widget/AutoRotator":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/on dojo/mouse dojox/widget/Rotator".split(" "),
function(f,B,l,d,c,u){return f("dojox.widget.AutoRotator",u,{suspendOnHover:!1,duration:4E3,autoStart:!0,pauseOnManualChange:!1,cycles:-1,random:!1,reverse:!1,constructor:function(){var t=this;t.cycles-0==t.cycles&&0<t.cycles?t.cycles++:t.cycles=t.cycles?-1:0;t._signals=[d(t._domNode,c.enter,function(){if(t.suspendOnHover&&!t.anim&&!t.wfe){var e=t._endTime,r=t._now();t._suspended=!0;t._resetTimer();t._resumeDuration=e>r?e-r:.01}}),d(t._domNode,c.leave,function(){t.suspendOnHover&&!t.anim&&(t._suspended=
!1,t.playing&&!t.wfe&&t.play(!0))})];t.autoStart&&1<t.panes.length?t.play():t.pause()},destroy:function(){B.forEach(this._signals,function(t){t.remove()});delete this._signals;dojo.forEach(this._connects,dojo.disconnect);this.inherited(arguments)},play:function(t,e){this.playing=!0;this._resetTimer();!0!==t&&0<this.cycles&&this.cycles--;0==this.cycles?this.pause():this._suspended||(this.onUpdate("play"),e?this._cycle():(t=(this._resumeDuration||0)-0,t=(0<t?t:this.panes[this.idx].duration||this.duration)-
0,this._resumeDuration=0,this._endTime=this._now()+t,this._timer=setTimeout(l.hitch(this,"_cycle",!1),t)))},pause:function(){this.playing=this._suspended=!1;this.cycles=-1;this._resetTimer();this.onUpdate("pause")},_now:function(){return(new Date).getTime()},_resetTimer:function(){clearTimeout(this._timer)},_cycle:function(t){var e=this;t=e.idx;if(e.random){do var r=Math.floor(Math.random()*e.panes.length+1);while(r==t)}else r=t+(e.reverse?-1:1);(t=e.go(r))&&t.addCallback(function(m){e.onUpdate("cycle");
e.playing&&e.play(!1,m)})},onManualChange:function(t){this.cycles=-1;"play"!=t&&(this._resetTimer(),this.pauseOnManualChange&&this.pause());this.playing&&this.play()}})})},"dojox/widget/Rotator":function(){define("dojo/aspect dojo/_base/declare dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/fx dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/topic dojo/on dojo/parser dojo/query dojo/fx/easing dojo/NodeList-dom".split(" "),function(f,B,l,d,c,u,t,e,r,
m,a,h,q,n,k){B=B("dojox.widget.Rotator",null,{transition:"dojox.widget.rotator.swap",transitionParams:"duration:500",panes:null,constructor:function(g,b){d.mixin(this,g);var x=this;g=x.transition;var v=x._transitions={};x._idMap={};var y=x.transitionParams=eval("({ "+x.transitionParams+" })");b=x._domNode=t.byId(b);x._domNodeContentBox=m.getContentBox(b);x.id=b.id||(new Date).getTime();"static"==a.get(b,"position")&&a.set(b,"position","relative");v[g]=d.getObject(g);v[g]||(this._transitionWarn(g,
"dojox.widget.rotator.swap"),v[x.transition="dojox.widget.rotator.swap"]=d.getObject("dojox.widget.rotator.swap"));y.duration||(y.duration=500);c.forEach(x.panes,function(D){r.create("div",D,b)});x.panes=[];k("\x3e *",b).forEach(function(D,E){x._initializePane(D,E)});x._controlSub=h.subscribe(x.id+"/rotator/control",d.hitch(x,this.control))},insert:function(g,b){var x=this.panes;null==b&&(b=x.length);b<x.length?(x=x[b],r.place(g,x.node,"before")):r.place(g,this._domNode,"last");this._initializePane(g,
b)},remove:function(g){function b(E){var C=v.splice(E,1)[0];C&&(C.id&&(x._idMap[C.id]=void 0),x._domNode.removeChild(C.node));x.idx>E&&x.idx--}var x=this,v=this.panes;if("number"===typeof g)var y=g;else{for(var D=0;D<v.length;D++)if(v[D].node===g){y=D;break}if(null==y)return}if(y===this.idx&&(g=this.go(this.idx-1)))return g.then(function(){b(y)});b(y)},destroy:function(){c.forEach([this._controlSub,this.wfe],function(g){g&&g.remove()});r.destroy(this._domNode);this.panes=[]},next:function(){return this.go(this.idx+
1)},prev:function(){return this.go(this.idx-1)},go:function(g){var b=this,x=b.idx,v=b.panes,y=v.length,D=b._idMap[g];b._resetWaitForEvent();g=null!=D?D:g||0;g=g<y?0>g?y-1:g:0;if(g==x||b.anim)return null;var E=v[x],C=v[g];a.set(E.node,"zIndex",2);a.set(C.node,"zIndex",1);var z={current:E,next:C,rotator:b};if(x=b.anim=b._transitions[C.trans](d.mixin({rotatorBox:b._domNodeContentBox},z,C.params))){var w=new l,A=C.waitForEvent,G=f.after(x,"onEnd",function(){a.set(E.node,{display:"none",left:0,opacity:1,
top:0,zIndex:0});G.remove();b.anim=null;b.idx=g;if(E.onAfterOut)E.onAfterOut(z);if(C.onAfterIn)C.onAfterIn(z);b.onUpdate("onAfterTransition");A||(b._resetWaitForEvent(),w.callback())},!0);b.wfe=A?h.subscribe(A,function(){b._resetWaitForEvent();w.callback(!0)}):null;b.onUpdate("onBeforeTransition");if(E.onBeforeOut)E.onBeforeOut(z);if(C.onBeforeIn)C.onBeforeIn(z);x.play();return w}},onUpdate:function(g,b){h.publish(this.id+"/rotator/update",g,this,b||{})},_initializePane:function(g,b){var x={node:g,
idx:b,params:d.mixin({},this.transitionParams,eval("({ "+(e.get(g,"transitionParams")||"")+" })"))},v=x.trans=e.get(g,"transition")||this.transition,y=this._transitions,D=this.panes,E={left:0,top:0,position:"absolute",display:"none"};c.forEach(["id","title","duration","waitForEvent"],function(C){x[C]=e.get(g,C)});x.id&&(this._idMap[x.id]=b);y[v]||(y[v]=d.getObject(v))||this._transitionWarn(v,x.trans=this.transition);if(null==this.idx||e.get(g,"selected"))null!=this.idx&&a.set(D[this.idx].node,"display",
"none"),this.idx=b,E.display="";a.set(g,E);k("\x3e script[type^\x3d'dojo/method']",g).orphan().forEach(function(C){var z=e.get(C,"event");z&&(x[z]=n._functionFromScript(C))});D.splice(b,0,x)},_resetWaitForEvent:function(){this.wfe&&(this.wfe.remove(),delete this.wfe)},control:function(g){var b=d._toArray(arguments),x=this;b.shift();x._resetWaitForEvent();x[g]&&((b=x[g].apply(x,b))&&b.addCallback(function(){x.onUpdate(g)}),x.onManualChange(g))},resize:function(g,b){var x=this._domNodeContentBox={w:g,
h:b};m.setContentSize(this._domNode,x);c.forEach(this.panes,function(v){m.setContentSize(v.node,x)})},onManualChange:function(){},_transitionWarn:function(g,b){}});d.setObject("dojox.widget.rotator.swap",function(g){return new u.Animation({play:function(){a.set(g.current.node,"display","none");a.set(g.next.node,"display","");this._fire("onEnd")}})});return B})},"dojo/fx/easing":function(){define(["../_base/lang"],function(f){var B={linear:function(l){return l},quadIn:function(l){return Math.pow(l,
2)},quadOut:function(l){return l*(l-2)*-1},quadInOut:function(l){l*=2;return 1>l?Math.pow(l,2)/2:-1*(--l*(l-2)-1)/2},cubicIn:function(l){return Math.pow(l,3)},cubicOut:function(l){return Math.pow(l-1,3)+1},cubicInOut:function(l){l*=2;return 1>l?Math.pow(l,3)/2:(Math.pow(l-2,3)+2)/2},quartIn:function(l){return Math.pow(l,4)},quartOut:function(l){return-1*(Math.pow(l-1,4)-1)},quartInOut:function(l){l*=2;return 1>l?Math.pow(l,4)/2:-.5*(Math.pow(l-2,4)-2)},quintIn:function(l){return Math.pow(l,5)},quintOut:function(l){return Math.pow(l-
1,5)+1},quintInOut:function(l){l*=2;return 1>l?Math.pow(l,5)/2:(Math.pow(l-2,5)+2)/2},sineIn:function(l){return-1*Math.cos(Math.PI/2*l)+1},sineOut:function(l){return Math.sin(Math.PI/2*l)},sineInOut:function(l){return-1*(Math.cos(Math.PI*l)-1)/2},expoIn:function(l){return 0==l?0:Math.pow(2,10*(l-1))},expoOut:function(l){return 1==l?1:-1*Math.pow(2,-10*l)+1},expoInOut:function(l){if(0==l)return 0;if(1==l)return 1;l*=2;if(1>l)return Math.pow(2,10*(l-1))/2;--l;return(-1*Math.pow(2,-10*l)+2)/2},circIn:function(l){return-1*
(Math.sqrt(1-Math.pow(l,2))-1)},circOut:function(l){return Math.sqrt(1-Math.pow(l-1,2))},circInOut:function(l){l*=2;return 1>l?-.5*(Math.sqrt(1-Math.pow(l,2))-1):.5*(Math.sqrt(1-Math.pow(l-2,2))+1)},backIn:function(l){return Math.pow(l,2)*(2.70158*l-1.70158)},backOut:function(l){--l;return Math.pow(l,2)*(2.70158*l+1.70158)+1},backInOut:function(l){l*=2;if(1>l)return Math.pow(l,2)*(3.5949095*l-2.5949095)/2;l-=2;return(Math.pow(l,2)*(3.5949095*l+2.5949095)+2)/2},elasticIn:function(l){if(0==l||1==l)return l;
--l;return-1*Math.pow(2,10*l)*Math.sin(2*(l-.075)*Math.PI/.3)},elasticOut:function(l){return 0==l||1==l?l:Math.pow(2,-10*l)*Math.sin(2*(l-.075)*Math.PI/.3)+1},elasticInOut:function(l){if(0==l)return 0;l*=2;if(2==l)return 1;var d=.3*1.5,c=d/4;if(1>l)return--l,-.5*Math.pow(2,10*l)*Math.sin(2*(l-c)*Math.PI/d);--l;return.5*Math.pow(2,-10*l)*Math.sin(2*(l-c)*Math.PI/d)+1},bounceIn:function(l){return 1-B.bounceOut(1-l)},bounceOut:function(l){return l=l<1/2.75?7.5625*Math.pow(l,2):l<2/2.75?7.5625*Math.pow(l-
1.5/2.75,2)+.75:l<2.5/2.75?7.5625*Math.pow(l-2.25/2.75,2)+.9375:7.5625*Math.pow(l-2.625/2.75,2)+.984375},bounceInOut:function(l){return.5>l?B.bounceIn(2*l)/2:B.bounceOut(2*l-1)/2+.5}};f.setObject("dojo.fx.easing",B);return B})},"dojox/widget/rotator/Controller":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/event dojo/_base/array dojo/_base/connect dojo/query".split(" "),function(f,B,l,d,c,u,t){return f("dojox.widget.rotator.Controller",null,{rotator:null,commands:"prev,play/pause,info,next",
constructor:function(e,r){B.mixin(this,e);var m=this.rotator;if(m){for(;r.firstChild;)r.removeChild(r.firstChild);var a=this._domNode=l.create("ul",null,r),h=function(q,n,k){l.create("li",{className:n,innerHTML:'\x3ca href\x3d"#"\x3e\x3cspan\x3e'+q+"\x3c/span\x3e\x3c/a\x3e",onclick:function(g){d.stop(g);m&&m.control.apply(m,k)}},a)};c.forEach(this.commands.split(","),function(q,n){switch(q){case "prev":h("Prev","dojoxRotatorPrev dojoxRotatorIcon",["prev"]);break;case "play/pause":h("Play","dojoxRotatorPlay dojoxRotatorIcon",
["play"]);h("Pause","dojoxRotatorPause dojoxRotatorIcon",["pause"]);break;case "info":this._info=l.create("li",{className:"dojoxRotatorInfo",innerHTML:this._buildInfo(m)},a);break;case "next":h("Next","dojoxRotatorNext dojoxRotatorIcon",["next"]);break;case "#":case "titles":for(n=0;n<m.panes.length;n++)h("#"==q?n+1:m.panes[n].title||"Tab "+(n+1),("#"==q?"dojoxRotatorNumber":"dojoxRotatorTab")+" "+(n==m.idx?"dojoxRotatorSelected":"")+" dojoxRotatorPane"+n,["go",n])}},this);t("li:first-child",a).addClass("dojoxRotatorFirst");
t("li:last-child",a).addClass("dojoxRotatorLast");this._togglePlay();this._con=u.connect(m,"onUpdate",this,"_onUpdate")}},destroy:function(){u.disconnect(this._con);l.destroy(this._domNode)},_togglePlay:function(e){e=this.rotator.playing;t(".dojoxRotatorPlay",this._domNode).style("display",e?"none":"");t(".dojoxRotatorPause",this._domNode).style("display",e?"":"none")},_buildInfo:function(e){return"\x3cspan\x3e"+(e.idx+1)+" / "+e.panes.length+"\x3c/span\x3e"},_onUpdate:function(e){var r=this.rotator;
switch(e){case "play":case "pause":this._togglePlay();break;case "onAfterTransition":this._info&&(this._info.innerHTML=this._buildInfo(r)),e=function(m){r.idx<m.length&&l.addClass(m[r.idx],"dojoxRotatorSelected")},e(t(".dojoxRotatorNumber",this._domNode).removeClass("dojoxRotatorSelected")),e(t(".dojoxRotatorTab",this._domNode).removeClass("dojoxRotatorSelected"))}}})})},"arcgisonline/sharing/dijit/SiteHeader":function(){define("require exports tslib ../../agoNav ../../esriGeowConfig ../../pages/utils/signin ../../pages/utils/storage ../util ../geow/Account ../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin dojo/Deferred dojo/_base/url dojo/_base/kernel dojo/sniff dojo/topic esri/config esri/lang dojo/i18n!../../nls/arcgisonline dojo/text!./templates/SiteHeaderSimple.html ../../pages/utils/queryHandler".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);q=l.__importDefault(q);n=l.__importDefault(n);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);x=l.__importDefault(x);v=l.__importDefault(v);y=l.__importDefault(y);D=l.__importDefault(D);E=l.__importStar(E);return function(){function C(z,
w){this.declaredClass="arcgisonline.sharing.dijit.SiteHeader";this.templateString=D.default;this.i18n=l.__assign(l.__assign({},y.default.common),y.default.siteHeader)}C.prototype.postMixInProperties=function(){this.inherited(arguments);this.webLabel=this.i18n.webOnly;this.webDescription=this.i18n.webDesc;this.desktopLabel=this.i18n.allContent;this.desktopDescription=this.i18n.allDesc;this.relativePath=c.default.baseUrl||"./"};C.prototype.postCreate=function(){var z=window.location.pathname.toLowerCase();
this.isSignInPage=-1!==z.indexOf(c.default.signin);this.isSignUpPage=-1!==z.indexOf(c.default.signup);this.isJoinPage=-1!==z.indexOf(c.default.join);this.isSetupPage=-1!==z.indexOf(c.default.setup);this.isIEPage=-1!==z.indexOf("ie6.html");this.isTroubleshootPage=-1!==z.indexOf("troubleshoot.html");7>(0,g.default)("ie")&&!this.isIEPage&&(window.location.href="ie6.html");if(z=document.getElementById("page-border"))z.onclick=function(){}};C.prototype.startup=function(){this.inherited(arguments);x.default.defaults.io.corsEnabledServers.push("http://"+
location.host);x.default.defaults.io.corsEnabledServers.push("https://"+location.host);x.default.defaults.io.proxyUrl=c.default.proxyServer;return this._fetchSelf()};C.prototype._generateGlobalNav=function(z){this._agoNavIsLoaded||(this.agoNav=new d.default,this.agoNav.init({config:c.default.self,legacy:this.legacy,relativePath:this.relativePath}),this._agoNavIsLoaded=!0)};C.prototype._logCookieChange=function(z){var w=this.telemetry;z&&(null===w||void 0===w?0:w.logEvent)&&w.logEvent({category:"cookie",
label:"Organization changed",details:"Yes"})};C.prototype._fetchSelf=function(){var z=this,w=new q.default;r.default.getSelf(function(A){z._finishStartup(A);w.resolve(A);b.default.publish("OnFetchSelf",A)},function(A){z._finishStartup();throw A;});return w};C.prototype._finishStartup=function(z){var w;if(z&&!z.code&&!z.message){var A=void 0,G=void 0;z.httpsPort&&(c.default.httpsPort=z.httpsPort,G=x.default.defaults.io.corsEnabledServers.pop());z.httpPort&&(c.default.httpPort=z.httpPort,A=x.default.defaults.io.corsEnabledServers.pop());
A&&x.default.defaults.io.corsEnabledServers.push(e.default.getHttpUrl("http://".concat(location.host)).replace(/:80$/,""));G&&x.default.defaults.io.corsEnabledServers.push(e.default.getSecureUrl("http://".concat(location.host)).replace(/:443$/,""));(z.authorizedCrossOriginDomains||[]).forEach(function(K){v.default.isDefined(K)&&0<K.length&&x.default.defaults.io.corsEnabledServers.push({host:K,withCredentials:!0})});u.default.checkForOrgUserOnOnlineBaseHostAndRedirect(z);this._generateGlobalNav({user:z.user});
this.isLoggedIn=e.default.isLoggedIn();z.isPortal&&e.default._cookies&&-1===e.default._cookies.arcgis_auth&&delete e.default._cookies.arcgis_auth;G=void 0;A=(null===(w=z.user)||void 0===w?void 0:w.culture)||z.culture||k.default.locale;w=e.default.getUser();G=E.queryToObject(window.location.search.substring(1));var F=-1<["hi"].indexOf(A);if(z.culture&&!w)z.culture=z.culture.toLowerCase(),this.updateLocaleCookie(z.culture,z.isPortal,z.allSSL),-1!==z.culture.indexOf("ar")?c.default.isRightToLeft=!0:
c.default.isRightToLeft=!1,k.default.locale.toLowerCase()!==z.culture.toLowerCase()&&window.location.reload();else if(!z.culture&&!w)this.hasLocaleCookie()&&(this.removeLocaleCookie(z.isPortal,z.allSSL),window.location.reload());else if(w&&A&&k.default.locale!==A.toLowerCase()&&!F&&!G.locale&&w.username&&w.username===z.user.username){var H=e.default.getCookie("esri_auth");9>(0,g.default)("ie")&&z.isWebTierAuth&&(G=new Date,H.expires=new Date(G.setSeconds(G.getSeconds()+Number(7200))));!w.culture||
w.culture&&w.culture!==A.toLowerCase()?(w.culture=A.toLowerCase(),this.updateLocaleCookie(w.culture.toLowerCase(),z.isPortal,z.allSSL)):w.culture&&w.culture===A.toLowerCase()&&k.default.locale!==A.toLowerCase()&&this.updateLocaleCookie(A.toLowerCase(),z.isPortal,z.allSSL);window.location.reload()}if(z.isWebTierAuth)if(w&&(w.username=w.username||w.email),(null===w||void 0===w?0:w.culture)&&w.culture.toLowerCase()!==A.toLowerCase()&&!F){var J=e.default.getCookie("esri_auth")||{};9>(0,g.default)("ie")&&
(G=new Date,J.expires=new Date(G.setSeconds(G.getSeconds()+Number(7200))));if(!w.culture||w.culture&&w.culture.toLowerCase()!==(null===A||void 0===A?void 0:A.toLowerCase()))w.culture=A.toLowerCase(),J.culture=w.culture,z.allSSL&&(J.allSSL=!0,J.secure=!0),w=l.__assign(l.__assign({},w),J);window.location.reload()}else(null===(J=null===w||void 0===w?void 0:w.culture)||void 0===J?void 0:J.toLowerCase())!==A.toLowerCase()||k.default.locale.toLowerCase()===A.toLowerCase()||F||window.location.reload();z.allSSL&&
(this.allSSL=c.default.allSSL=z.allSSL);v.default.isDefined(c.default.allSSL)&&c.default.allSSL&&"http:"===location.protocol&&(window.location.href=e.default.getSecureUrl(location.href));z.helpBase&&(c.default.help=z.helpBase,c.default.helpBase=z.helpBase,J=c.default.self&&c.default.self.helpBase||"support.html",e.default.isPortal()&&(J="".concat(location.protocol,"//").concat(location.host).concat(z.helpBase),J=this.allSSL||e.default.usePortalSSL()?e.default.getSecureUrl(J):e.default.getHttpUrl(J)));
z.helpMap&&z.helpMap.m&&(c.default.helpMap=z.helpMap.m);z.portalHostname&&(c.default.portalHostname=z.portalHostname);z.urlKey&&(c.default.urlKey=z.urlKey);z.staticImagesUrl&&(c.default.staticImagesUrl=z.staticImagesUrl);J=!1===c.default.isMultiTenant;J||(A=window.location.host,A===z.portalHostname||-1===A.indexOf(z.customBaseUrl)||z.access||z.name||u.default.getClientId()===u.default.clientIds.GeoanalyticsEngine||(window.location.href=window.location.href.replace(A,z.portalHostname)),!w||"account_admin"!==
w.role&&"org_admin"!==w.role||!z.id||z.urlKey||this.isSetupPage||(window.location.href="".concat(c.default.baseUrl,"setup.html")));J?("private"!==(null===z||void 0===z?void 0:z.access)||this.isLoggedIn||this.isSignInPage||this.isTroubleshootPage||this.isJoinPage||this.isSignUpPage||(window.location.href="".concat(e.default.getSecureUrl()).concat(c.default.signin,"?returnUrl\x3d").concat(encodeURIComponent(window.location.href))),!z.isPortal||"singletenant"!==z.portalMode||"7080"!==location.port&&
"7443"!==location.port||e.default.checkForIAA().then(function(K){if(null===K||void 0===K?0:K.hasIAA)if(z.portalHostname.match(/:7080\//)&&"http:"===location.protocol&&-1===location.href.indexOf("error.html")&&(window.location.href="".concat(e.default.getHttpUrl(c.default.baseUrl),"error.html?c\x3dWebAdaptorRequired")),!z.portalHostname.match(/:7080\//)&&80!==c.default.httpPort&&443!==c.default.httpsPort&&"http:"===location.protocol&&-1===location.href.indexOf("error.html")){K=new n.default(location.href);
var Q=K.path.indexOf("/home/");Q=K.path.substring(Q+6);K=v.default.isDefined(K.query)?"?".concat(K.query):"";window.location.href="".concat(e.default.getHttpUrl("http://".concat(z.portalHostname))).concat("/home/").concat(Q).concat(K)}})):z.id||!z.urlKey||this.isLoggedIn||this.isSignInPage||this.isTroubleshootPage||this.isJoinPage||(window.location.href="".concat(c.default.baseUrl.replace("http:","https:")).concat(c.default.signin,"?returnUrl\x3d").concat(encodeURIComponent(window.location.href)))}};
C.prototype.hasLocaleCookie=function(){return!!t.default.getCookie("arcgisLocale")||!!t.default.getCookie("esri_locale")};C.prototype.removeLocaleCookie=function(z,w){t.default.setCookie("arcgisLocale",null,{expires:-1});t.default.setCookie("esri_locale",null,{path:"/",domain:z?window.location.hostname:".arcgis.com",secure:!z||w,expires:-1})};C.prototype.updateLocaleCookie=function(z,w,A){t.default.setCookie("arcgisLocale",z,{sameSite:"Strict"});t.default.setCookie("esri_locale",z,{path:"/",domain:w?
window.location.hostname:".arcgis.com",secure:!w||A})};C.prototype.updateEsriAccessLinks=function(z){var w=this;c.default.self.user.userType=z;window.require(["arcgisonline/agoNav"],function(A){w.agoNav=A;A.updateHeaderComponent({config:c.default.self})})};return C=l.__decorate([(0,m.default)(a.default,h.default)],C)}()})},"arcgisonline/agoNav":function(){define("require exports tslib arcgis-components/wrappers/InfoBanner ./esriGeowConfig ./pages/components/ConfirmDialog ./pages/components/StatusBanner ./pages/portal/PortalItem ./pages/portal/PortalUser ./pages/portal/LicenseInfo ./pages/organization/widgets/GroupIcon ./pages/utils/a11y ./pages/utils/notifications ./pages/utils/icons ./pages/utils/notebook ./pages/utils/mapViewer ./pages/utils/storage ./pages/utils/organization ./pages/utils/dom ./sharing/geow/Account ./sharing/geow/Geow ./sharing/dijit/Webworker/_AppLauncher ./sharing/util dojo/promise/all dojo/debounce dojo/string dojo/topic dojo/query dojo/_base/kernel dojo/_base/lang dojo/Deferred dojo/on esri/arcgis/Portal esri/request esri/IdentityManager ./pages/utils/queryHandler esri-global-nav/esri-global-nav preact dojo/i18n!./nls/arcgisonline".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E,C,z,w,A,G,F,H,J,K,Q,P,I,N,L,W,Z,aa){Object.defineProperty(B,"__esModule",{value:!0});c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);q=l.__importDefault(q);n=l.__importDefault(n);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);x=l.__importDefault(x);v=l.__importDefault(v);y=l.__importDefault(y);
D=l.__importDefault(D);E=l.__importDefault(E);C=l.__importDefault(C);z=l.__importDefault(z);w=l.__importDefault(w);A=l.__importDefault(A);G=l.__importDefault(G);F=l.__importDefault(F);H=l.__importDefault(H);J=l.__importDefault(J);K=l.__importDefault(K);Q=l.__importDefault(Q);P=l.__importDefault(P);I=l.__importDefault(I);N=l.__importDefault(N);L=l.__importStar(L);aa=l.__importDefault(aa);f=function(){function ia(){this.GlobalNavLink={label:void 0,href:void 0,data:void 0,active:void 0,newContext:void 0,
init:function(R,S){this.label=R;R=S.href;var M=S.data,X=S.active;S=S.openInNewTab;this.href=R?"function"===typeof R?R():R:"#";this.data=M||void 0;this.active=X||void 0;this.newContext=S||void 0;return this}}}ia.prototype.init=function(R){var S=this;this.legacy=R.legacy;(0,z.default)({orgSettings:this.getOrgSettings(),userProperties:this.getUserProperties()}).then(function(M){S.orgSettings=M.orgSettings;S.userProperties=M.userProperties;S.setup(R)});G.default.subscribe("account-menu/close",this.closeAccountMenu.bind(this));
G.default.subscribe("portal-helpBase/update",this.updateHelpUrl.bind(this));G.default.subscribe("top-nav/update",this.updateMenu.bind(this));G.default.subscribe("mapviewer/user-update",this.updateUserMapViewerPreference.bind(this));G.default.subscribe("mapviewer/org-update",this.updateOrgMapViewerPreference.bind(this))};ia.prototype.setup=function(R){var S=this,M,X,fa,ea=this.orgSettings;if(ea&&ea.anonymousAccessNotice&&ea.anonymousAccessNotice.enabled&&!b.default.getCookie("ago_conditions_accepted"))return window.location.href=
"".concat(c.default.baseUrl,"pages/Account/accept_conditions.html#client_id\x3darcgisonline\x26redirect_url\x3d").concat(window.location.href);(null===(M=null===ea||void 0===ea?void 0:ea.informationalBanner)||void 0===M?0:M.enabled)&&this.createClassificationBanner(ea.informationalBanner);M=36E5>=Date.now()-R.config.created;!R.config.isPortal&&0>=(null===(X=R.config.subscriptionInfo)||void 0===X?void 0:X.availableCredits)&&!M&&"suspended"!==R.config.subscriptionInfo.state&&"expired"!==R.config.subscriptionInfo.state&&
("geoanalyticsengine"===this.getAppClientId()?this.createNoCoreHoursBanner():this.createRestrictedStatusBanner(R));this.relativePath=R.relativePath||"./";c.default.self=R.config;this.customNavStructure=R.customNavStructure;this.isOrgUser=null===(fa=c.default.userInfo)||void 0===fa?void 0:fa.orgId;this.userIsSignedIn=!(!c.default.userInfo||!c.default.userInfo.username&&!c.default.userInfo.email);this.defaultNavStructure={header:{theme:"web",brand:{label:"ArcGIS Online",href:"../features/features.html",
brandText:"ArcGIS"},menus:[[{label:"Features",href:"../features/features.html"},{label:"Plans",href:"../features/plans/pricing.html"},{label:"Map",href:"".concat(this.relativePath,"webmap/viewer.html?useExisting\x3d1")},{label:"Scene",href:"webscene/viewer.html"},{label:"Help",href:"http://doc.arcgis.com/en/arcgis-online/"}]],search:{label:aa.default.common.search,hide:"search.html"===window.location.pathname.split("/")[2],inline:!0,dialog:{prefix:"esri-header-search-dialog",action:"".concat(c.default.baseUrl,
"search.html"),label:"ArcGIS Online",submitLabel:aa.default.common.search,cancelLabel:aa.default.common.cancel,queryLabel:aa.default.siteHeader.searchAgo}},account:{label:aa.default.siteHeader.yourProfile,controls:{signin:aa.default.siteHeader.signIn,signout:aa.default.siteHeader.signOut,switch:aa.default.siteHeader.switchAccounts},menus:[{label:"profile \x26 settings",href:"".concat(this.relativePath,"user.html")},{label:"my esri",href:"#",data:{agoMethod:"goMyesri"}},{label:"training",href:"#",
data:{agoMethod:"goTraining"}},{label:"community \x26 forums",href:"#",data:{agoMethod:"goEsriCommunity"}},{label:"help",href:"http://doc.arcgis.com/en/arcgis-online/"}]}}};this.fixMobileBannerHeight();this.createPortalInstance().then(function(){var ha=L.queryToObject(window.location.search.slice(1));(-1<window.location.pathname.indexOf("user.html")||-1<window.location.pathname.indexOf("userprofile.html"))&&(null===ha||void 0===ha?0:ha.hideNav)?(document.body.classList.add("is-embedded"),ha=document.querySelector(".esri-header-barrier"),
ha.parentNode.removeChild(ha)):(S.navLinks=S.buildNavLinks(S,c.default),S.createGlobalNav(c.default.userInfo,R.customNavStructure));(ha=window.esri)&&!ha.i18nBundle&&(ha.i18nBundle=aa.default)})};ia.prototype.createRestrictedStatusBanner=function(R){var S=this,M,X;if("Developer Subscription"!==(null===(M=R.config.subscriptionInfo)||void 0===M?void 0:M.type)){M=document.createElement("div");var fa="restricted"===R.config.subscriptionInfo.state,ea=aa.default.restrictedOrg;R=ea.title;var ha=ea.titleSoft,
ra=ea.you,Aa=ea.allMembers,Ea=ea.someMembers,va=ea.learnMore;ea=ea.removeRestrictions;var Ga="".concat(c.default.self.helpBase).concat(c.default.self.helpMap.m["120001308"]||""),ca="".concat(c.default.self.helpBase).concat(c.default.self.helpMap.m["120004138"]||""),ja={};ja=(null===(X=c.default.userRole)||void 0===X?0:X.isAdmin())?{strings:{title:fa?R:ha,message:fa?Aa:Ea,action:ea},onAction:function(wa){S.openRemoveRestrictionsDialog(null===wa||void 0===wa?void 0:wa.target,Ga,fa)}}:{strings:{message:ra,
learnMore:va},youLink:ca};document.body.insertBefore(M,document.body.firstChild);(0,Z.render)((0,Z.h)(t.default,ja),M);this.hasStatusBanner=!0}};ia.prototype.createNoCoreHoursBanner=function(){var R=document.createElement("div"),S=aa.default.myOrganization.geoAnalyticsEngine.noCoreHours;S={strings:{title:S.title,message:S.message}};document.body.insertBefore(R,document.body.firstChild);(0,Z.render)((0,Z.h)(t.default,S),R);this.hasStatusBanner=!0};ia.prototype.openRemoveRestrictionsDialog=function(R,
S,M){var X=aa.default.restrictedOrg.removeRestrictions,fa=x.default.getBuyLink(c.default.self),ea='\x3ca href\x3d"'.concat(fa,'" target\x3d"_blank"\x3e'),ha='\x3ca href\x3d"'.concat("http://www.esri.com/about-esri/offices/",'"\x3e');S='\x3ca href\x3d"'.concat(S,'" target\x3d"_blank"\x3e').concat(aa.default.restrictedOrg.learnMoreLong,' \x3ccalcite-icon icon\x3d"launch" scale\x3d"s"\x3e\x3c/calcite-icon\x3e\x3c/a\x3e');M='\x3cp class\x3d"leader-half esriItemLinks"\x3e'.concat(M?aa.default.restrictedOrg.noCredits:
aa.default.restrictedOrg.titleSoft," ").concat(fa?A.default.substitute(aa.default.restrictedOrg.visitEsriStore,{startLink:ea,endLink:"\x3c/a\x3e"}):A.default.substitute(aa.default.restrictedOrg.contactCS,{startLink:ha,endLink:"\x3c/a\x3e"}),"\x3c/p\x3e").concat(M?'\x3cp class\x3d"esriItemLinks"\x3e'.concat(S,"\x3c/p\x3e"):"");X={title:X,description:M,ok:aa.default.common.ok};var ra=document.createElement("div");M=function(){v.default.removeComponent(ra,document.body);null===R||void 0===R?void 0:R.focus()};
document.body.appendChild(ra);(0,Z.render)((0,Z.h)(u.default,{strings:X,onOk:M,onCancel:M,autoCloseOnOk:!0,hideCancel:!0,renderHtmlDescription:!0,width:"s"}),ra)};ia.prototype.closeAccountMenu=function(){this.updateComponent("header:menu:close",document.querySelector(".esri-header-wrap"))};ia.prototype.updateUserMapViewerPreference=function(R){var S,M;this.userProperties.mapViewer=R;R=null===(M=null===(S=c.default.self)||void 0===S?void 0:S.portalProperties)||void 0===M?void 0:M.topNav;this.updateMenu(R||
{})};ia.prototype.updateOrgMapViewerPreference=function(R){var S=c.default.self;S&&(S.portalProperties=S.portalProperties||{},S.portalProperties.mapViewer=R,this.updateMenu(S.portalProperties.topNav||{}))};ia.prototype.getMapViewerLink=function(R){return R===g.default.MapViewerType.Classic?"".concat(this.relativePath,"webmap/viewer.html?useExisting\x3d1"):c.default.newMapViewerUrl};ia.prototype.updateHelpUrl=function(R){this.updateHeaderComponent({config:R})};ia.prototype.updateMenu=function(R){var S=
c.default.self.portalProperties||{};S.topNav=R;c.default.self.portalProperties=S;this.navLinks=this.buildNavLinks(this,c.default);R=this.getNavStructure(c.default.userInfo,this.customNavStructure);this.updateComponent("header:update:menus",document.querySelector("#esri-header-menus-desktop"),R.header.menus);this.updateComponent("header:update:menus",document.querySelector("#esri-header-menus-mobile"),R.header.menus)};ia.prototype.createClassificationBanner=function(R){var S=document.createElement("div"),
M=document.createElement("div");document.body.insertBefore(S,document.body.childNodes[0]);document.body.appendChild(M);new d.InfoBanner({bannerConfig:R,topContainer:S,bottomContainer:M});this.hasInfoBanner=!0};ia.prototype.getAppClientId=function(){try{return b.default.getLocalStorageItem("portalAppClientId")||b.default.getSessionStorageItem("portalAppClientId")||"arcgisonline"}catch(R){return"arcgisonline"}};ia.prototype.createPortalInstance=function(){var R=this,S=new K.default;(this.portal=c.default&&
c.default.portal)?S.resolve(!0):y.default.getSelf(function(M){R.portal=new P.default.Portal({url:c.default.restBaseUrl.replace("http://","https://"),self:J.default.clone(M)});Q.default.once(R.portal,"load",function(){R.portal.portalUser=R.portal.getPortalUser();m.default.isOrgUser=R.isOrgUser;m.default.portal=R.portal;m.default.getLicenseInfo().then(function(){c.default.userInfo&&(c.default.userInfo=l.__assign(l.__assign({},c.default.userInfo),m.default));R.portal.portalUser?N.default.checkAppAccess(R.portal.portalUrl,
R.getAppClientId()).always(function(X){if(X=!(!X||!X.viewOnly))R.portal.user.cookie=R.getUserCookie(),R.portal.user.credential=R.portal.portalUser.credential,R.portal.user.portal=R.portal,R.portal.user.viewOnly=X,R.portal.portalUser=new r.default(R.portal.user);S.resolve(!0)}):S.resolve(!0)})})});return S};ia.prototype.fixMobileBannerHeight=function(){var R;this.hasInfoBanner&&!this.hasStatusBanner||this.hasStatusBanner&&!this.hasInfoBanner?R=56+document.body.childNodes[0].clientHeight:this.hasInfoBanner&&
this.hasStatusBanner&&(R=56+document.body.childNodes[0].clientHeight+document.body.childNodes[1].clientHeight);R&&setTimeout(function(){var S=document.getElementById("esri-header-menus-content-mobile");S&&(S.style.height="calc(var(--esri-vh) - ".concat(R,"px)"))},1E3)};ia.prototype.createGlobalNav=function(R,S){var M,X,fa,ea;S=this.getNavStructure(R,S);var ha=((null===(X=null===(M=c.default.self)||void 0===M?void 0:M.portalProperties)||void 0===X?void 0:X.topNav)||{}).search;M=this.isOrgUser&&c.default.self&&
c.default.userInfo.orgId===c.default.self.id;"members"!==ha||M||delete S.header.search;(0,W.createHeader)({targetElm:".esri-header-barrier",menuData:S});this.setupInlineSearch();this.userIsSignedIn?(this.setupAccountSwitcherLink(),this.setupSignOutLink(),this.setupNotifications(R),this.isOrgUser&&(c.default.self.isPortal||"active"===(null===(fa=c.default.self.subscriptionInfo)||void 0===fa?void 0:fa.state)||"restricted"===(null===(ea=c.default.self.subscriptionInfo)||void 0===ea?void 0:ea.state))&&
this.createAppSwitcher()):this.setupSignInLink();this.addLegacyClasses()};ia.prototype.addLegacyClasses=function(){if(this.legacy){var R=window.location.pathname.toLowerCase();if(-1!==R.indexOf("index.html")||-1===R.indexOf(".html"))(0,F.default)(".siteHeader").addClass("top-nav"),(0,F.default)(".-desktop .esri-header-menus-link,.esri-header-brand-text,.esri-header-menus-toggle,.esri-header-notifications-control,.esri-header-inlineSearch-control,.esri-header-account-control,.esri-header-apps-control").addClass("top-nav-link"),
(0,F.default)(".top-nav-link.-is-active").removeClass("-is-active").addClass("is-active")}};ia.prototype.getNavStructure=function(R,S){R=(this.userCookie=this.userIsSignedIn&&this.getUserCookie())?this.getSignedInNavStructure(R,this.userCookie):this.getSignedOutNavStructure();return J.default.mixin(c.default.self.isPortal?this.modifyStructureForPortal(R):R,S||{})};ia.prototype.getSignedOutNavStructure=function(){var R=c.default.self.isPortal,S=this.showProductLinks()?["overview","pricing","map","scene",
"help"]:["home_link","gallery","map","scene","groups"].concat(R?["help"]:[]);this.defaultNavStructure.header.menus=[this.filterAndCreateLinks(S,aa.default.siteHeader)];this.defaultNavStructure.header.brand.href="".concat(this.relativePath).concat(R?"index.html":"../features/features.html");return this.defaultNavStructure};ia.prototype.isGeode=function(){return"geoanalyticsengine"===this.getAppClientId()};ia.prototype.getSignedInNavStructure=function(R,S){var M=this.isGeode();R={name:R.fullName,id:R.username,
group:"",image:this.getUserProfileImage(R.username,R.thumbnail,S.token)};S=M?[]:"myProfile mySettings myEsri training trialDownload esriCommunity arcgisBlog help".split(" ");var X=this.isPublicAccount()?"ArcGIS overview pricing map scene groups myContent".split(" "):"home_link gallery map scene notebook groups myContent myAccount".split(" ");this.defaultNavStructure.header.account.user=R;this.defaultNavStructure.header.menus=M?[[{active:!0,href:"".concat(this.relativePath,"geoanalyticsengine.html#subscription"),
label:aa.default.siteHeader.subscription},{href:"".concat(this.relativePath,"geoanalyticsengine.html#downloads"),label:aa.default.siteHeader.downloads}]]:[this.filterAndCreateLinks(X,aa.default.siteHeader)];this.defaultNavStructure.header.account.menus=this.filterAndCreateLinks(S,aa.default.siteHeader);this.defaultNavStructure.header.brand.href="".concat(this.relativePath).concat(c.default.self.isPortal?"index.html":"../features/features.html");this.userIsSignedIn&&(this.defaultNavStructure.header.notifications=
this._getDefaultNotifications());M&&delete this.defaultNavStructure.header.search;return this.defaultNavStructure};ia.prototype.modifyStructureForPortal=function(R){R.header.search.dialog.queryLabel=aa.default.siteHeader.searchAgoEnterprise;return R};ia.prototype.getFooterLinks=function(){var R=this,S,M,X,fa;this.i18n=l.__assign(l.__assign(l.__assign({},aa.default.siteFooter),aa.default.common),{helpLabel:aa.default.supportPage.helpLabel});var ea=c.default.footerLinks.reduce(function(ha,ra){var Aa=
ra.title.indexOf("${");Aa=-1<Aa?R._evalString(ra.title,Aa):ra.title;return"ArcGIS Marketplace"===ra.title?c.default.self&&R.userIsSignedIn?ha.concat({label:Aa,href:c.default.marketplaceUrl.replace("http://","https://")}):ha:"contactUs"===ra.type?ha.concat({label:Aa,href:R._constructContactUsUrl(ra)}):"reportAbuse"===ra.type?ha.concat({label:Aa,href:R._constructReportAbuseUrl(ra)}):ra.url?ha.concat({label:Aa,href:ra.url}):ha},[]);(null===(fa=null===(X=null===(M=null===(S=c.default.self)||void 0===
S?void 0:S.portalProperties)||void 0===M?void 0:M.links)||void 0===X?void 0:X.contactUs)||void 0===fa?0:fa.visible)&&ea.push({label:this.i18n.customContactUs,href:c.default.self.portalProperties.links.contactUs.url});return ea};ia.prototype.updateComponent=function(R,S,M){R=new CustomEvent(R,{detail:M});S.dispatchEvent(R)};ia.prototype.updateAppSwitcherComponent=function(){var R,S=this.portal.isPortal&&!1===(null===(R=this.portal.portalProperties)||void 0===R?void 0:R.newMapViewerEnabled);this.updateComponent("header:update:appSwitcher",
document.querySelector(".esri-header-app-switcher"),{portal:this.portal,user:this.portal.portalUser,api:3,newMapViewerEnabled:c.default.newMapViewerEnabled&&!S,showInAppLauncher:c.default.showInAppLauncher,notebookServerEnabled:c.default.notebookServerEnabled&&(!this.portal.isPortal||this.portal.supportsHostedNotebooks),trackViewerEnabled:c.default.trackViewerEnabled})};ia.prototype.updateAppLauncherComponent=function(R){this.updateComponent("header:update:apps",document.querySelector(".esri-header-apps"),
this._appsJson(R))};ia.prototype.updateHeaderComponent=function(R){c.default.self=R.config;this.navLinks=this.buildNavLinks(this,c.default);R=this.getNavStructure(c.default.userInfo,R.customNavStructure);this.updateComponent("header:update:account",document.querySelector(".esri-header-client").lastChild,R.header.account)};ia.prototype.updateNotificationsComponent=function(R){this.defaultNavStructure.header.notifications.messages=R;this.updateComponent("header:update:notifications",document.querySelector(".esri-header-notifications"),
this._getDefaultNotifications(R));0===R.length&&this.updateComponent("header:menu:close",document.querySelector(".esri-header-notifications"))};ia.prototype.updateSearchComponent=function(R,S){this.updateComponent("header:search:update:suggestions",document.querySelector(".esri-header-wrap"),this._searchJson(R,S))};ia.prototype.createAppLauncher=function(){var R=this,S;this.portal.token=(null===(S=this.userCookie.credential)||void 0===S?void 0:S.token)||this.userCookie.token;this.appLauncher=new E.default(this.portal,
this.userProperties);this.appLauncher.getApps({noStrings:!0}).then(function(M){if(M.primary.length||M.secondary.length)R.fixRelativeAppUrls(M.primary),R.fixRelativeAppUrls(M.secondary),R.updateAppLauncherComponent(M),document.querySelector(".esri-header-barrier").addEventListener("header:apps:reorder",function(X){R.appLauncher.setApps(JSON.stringify(X.detail.icons),!0)}),G.default.subscribe("appLauncher/app/updated",R._restartAppLauncherApp.bind(R)),G.default.subscribe("appLauncher/app/deleted",R._restartAppLauncherApp.bind(R)),
G.default.subscribe("appLauncher/restart",R._restartAppLauncherApp.bind(R,!0)),G.default.subscribe("appLauncher-license/refresh",R._refreshLicenseAndRestartAppLauncher.bind(R)),R.addLegacyClasses()})};ia.prototype.createAppSwitcher=function(){G.default.subscribe("appLauncher/app/updated",this.updateAppSwitcherComponent.bind(this));G.default.subscribe("appLauncher/app/deleted",this.updateAppSwitcherComponent.bind(this));G.default.subscribe("appLauncher/restart",this.updateAppSwitcherComponent.bind(this,
!0));G.default.subscribe("appLauncher-license/refresh",this.updateAppSwitcherComponent.bind(this));this.updateAppSwitcherComponent();this.addLegacyClasses()};ia.prototype.fixRelativeAppUrls=function(R){if(-1!==window.location.pathname.indexOf("/home/notebook/")){var S="".concat(window.location.protocol,"//").concat(window.location.host).concat(C.default.getHomeAppContext(),"/");(R||[]).forEach(function(M){M.url=(M.url||"").replace("../",S)})}};ia.prototype._restartAppLauncherApp=function(R){var S=
this;this.appLauncher&&this.appLauncher.refreshApps(R).then(function(M){return S.updateAppLauncherComponent(M)})};ia.prototype._refreshLicenseAndRestartAppLauncher=function(){var R=this;this.appLauncher&&(m.default.licenses={arcgiswebapps:{valid:!1,className:"web-apps-not-licensed"},arcgisinsights:{valid:!1,className:"insights-not-licensed"},hubforarcgis:{valid:!1},orthomaker:{valid:!1,className:"orthomaker-not-licensed"},opsdashboard:{valid:!1,className:"web-dashboard-not-licensed"},workforce:{valid:!1,
className:"workforce-not-licensed"},survey123:{valid:!1,className:"survey123-not-licensed"},arcgisurban:{valid:!1,className:"arcgisUrban-not-licensed"},analytics4iot:{valid:!1,isCapability:!0}},this.appLauncher.fetchAndSetupLicenseInfo().then(function(){return R.appLauncher.refreshApps(!0)}).then(function(S){return R.updateAppLauncherComponent(S)}))};ia.prototype._appsJson=function(R){return l.__assign(l.__assign({},{label:aa.default.appSwitcher.appLauncher,disableDragDrop:!1,loading:!R,text:{title:aa.default.appSwitcher.appLauncher,
confirm:aa.default.appSwitcher.gotIt,dragAppsHere:aa.default.appSwitcher.dragAppsHere,intro:aa.default.appSwitcher.dragAndDropIntroText,removed:aa.default.appSwitcher.noLongerAvailable,removedMessage:aa.default.appSwitcher.removedApp,showMore:aa.default.appSwitcher.showMore}}),R)};ia.prototype._getAppsLoadingJson=function(R){return{label:aa.default.appSwitcher.appLauncher,disableDragDrop:!1,loading:R}};ia.prototype._searchJson=function(R,S){var M;return null!==(M=null===S||void 0===S?void 0:S.results)&&
void 0!==M&&M.length?{minIconWidth:"44",suggestions:[this._generateSuggestionsSection({searchTerm:R,category:"item",data:S.results})]}:{suggestions:[]}};ia.prototype._disabledSearchJson=function(){return{minIconWidth:"44",disabled:!0,suggestions:[{hideHR:!0,links:[{text:aa.default.search.error.wildCardSearchError,secondary:null,href:null,htmlIcon:'\x3cspan class\x3d"esri-header-inlineSearch-suggestion-error-icon"\x3e'+n.default["exclamation-mark-circle"]["16"]+"\x3c/span\x3e"}]}]}};ia.prototype._generateSuggestionsSection=
function(R){return{hideHR:!0,links:R.data.map(this._generateSuggestionLink.bind(this,R.category))}};ia.prototype._generateSuggestionLink=function(R,S){var M={text:S.title,secondary:this._getSecondaryOwnerText(R,S),href:"".concat(this.relativePath).concat(R,".html?id\x3d").concat(S.id),iconSize:"group"===R?"28":"22"};R=S.icon||"group"!==R?{icon:S.icon}:{htmlIcon:this._getGroupIcon(S)};return l.__assign(l.__assign({},M),R)};ia.prototype._getGroupIcon=function(R){return(new a.default({portal:this.portal,
group:R,scale:"m"})).domNode.outerHTML};ia.prototype._getSecondaryOwnerText=function(R,S){var M=S.owner;return"item"===R?A.default.substitute(aa.default.siteHeader.itemTypeBy,{itemType:S.type,owner:M}):A.default.substitute(aa.default.siteHeader.groupOwner,{owner:M})};ia.prototype._generateSearchLink=function(R){return this._constructSecureBaseUrl("search.html?start\x3d1\x26sortOrder\x3dtrue\x26sortField\x3drelevance\x26".concat(R))};ia.prototype._constructSearchQ=function(R,S){var M;return"".concat(R).concat(S&&
(null===(M=c.default.userInfo)||void 0===M?0:M.orgId)?" orgid:".concat(c.default.userInfo.orgId):"")};ia.prototype._getSuggestFilters=function(){return"".concat(c.default.self.id?'accountid:"'.concat(c.default.self.id,'"'):"").concat(c.default.viewQueries.none||"")};ia.prototype.fetchSuggestionResults=function(R){R=R.substring(0,409).replace(/(\/)/g,"\\/").replace(/(\?)/g,"\\?");return(0,I.default)({url:"".concat(c.default.restBaseUrl.replace("http://","https://"),"search/suggest"),content:{suggest:R,
filters:this._getSuggestFilters(),searchFields:"title",f:"json"},handleAs:"json",callbackParamName:"callback"})};ia.prototype.fetchItemSearchResults=function(R){return(0,I.default)({url:"".concat(c.default.restBaseUrl.replace("http://","https://"),"search"),content:{q:this._constructSearchQ(R,!0),start:1,num:3,f:"json"},handleAs:"json",callbackParamName:"callback"})};ia.prototype.fetchGroupSearchResults=function(R){return(0,I.default)({url:"".concat(c.default.restBaseUrl.replace("http://","https://"),
"/community/groups"),content:{q:this._constructSearchQ(R,!1),start:1,num:3,f:"json"},handleAs:"json",callbackParamName:"callback"})};ia.prototype.mixinItemIcon=function(R){this.portal.portalUser&&!this.portal.portalUser.userRole&&(this.portal.portalUser.userRole=c.default.userRole);var S=new e.default(l.__assign(l.__assign({},R),{portal:this.portal}));return l.__assign(l.__assign({},R),{type:S.displayName,icon:"".concat(c.default.baseUrl).concat(S.svgIconUrl32)})};ia.prototype.mixinGroupIcon=function(R){return l.__assign(l.__assign({},
R),{icon:R.thumbnail?this._constructRestUrlWithToken("community/groups/".concat(R.id,"/info/").concat(R.thumbnail)):null})};ia.prototype._constructRestUrlWithToken=function(R){return"".concat(this.portal.portalUrl).concat(R).concat(this.userCookie?"?token\x3d".concat(this.userCookie.token):"")};ia.prototype._constructSecureBaseUrl=function(R){return"".concat(c.default.baseUrl.replace("http://","https://")).concat(R)};ia.prototype.buildNavLinks=function(R,S){var M,X,fa,ea,ha=!!c.default.self,ra=window.location.pathname.toLowerCase(),
Aa=ha&&(null===(M=c.default.self.portalProperties)||void 0===M?void 0:M.topNav)||{};M=Aa.gallery;var Ea=Aa.map,va=Aa.scene,Ga=Aa.groups;ha=this.isOrgUser&&ha&&c.default.userInfo.orgId===c.default.self.id;var ca=c.default.notebookLandingEnabled?"notebookhome.html":"notebook.html",ja=g.default.determineMapViewerSetting(this.userProperties);Aa=Aa.notebook||"members";return{myProfile:{href:"".concat(this.relativePath,"user.html")},mySettings:{href:"".concat(this.relativePath,"user.html#settings")},pricing:{href:"".concat(this.relativePath,
"../features/plans/pricing.html")},overview:{href:"".concat(this.relativePath,"../features/features.html")},ArcGIS:{href:"".concat(this.relativePath).concat(R.isPublicAccount()?"index.html":"../features/features.html")},groups:{show:!Ga||"all"===Ga||"members"===Ga&&ha,href:"".concat(this.relativePath,"groups.html"),active:-1<ra.indexOf("groups.html")},myContent:{href:"".concat(this.relativePath,"content.html"),active:-1<ra.indexOf("content.html")},map:{show:m.default.isLicensed("arcgisWebApps")&&
(!Ea||"all"===Ea||"members"===Ea&&ha||"mapCreators"===Ea&&ha&&(null===(X=c.default.userRole)||void 0===X?void 0:X.canCreateItem())),href:this.getMapViewerLink(ja)},help:{href:R._getHelpUrl.bind(R),openInNewTab:!0},gallery:{show:"noOne"!==M&&(!M||"all"===M||"members"===M&&ha)&&c.default.self.id,href:"".concat(this.relativePath,"gallery.html"),active:-1<ra.indexOf("gallery.html")},home_link:{show:!R.isPublicAccount(),href:"".concat(this.relativePath,"index.html"),active:-1<ra.indexOf("index.html")||
0>ra.indexOf(".html")},scene:{show:S.sceneViewerEnabled&&m.default.isLicensed("arcgisWebApps")&&(!va||"all"===va||"members"===va&&ha||"sceneCreators"===va&&ha&&(null===(fa=c.default.userRole)||void 0===fa?void 0:fa.canCreateItem())),href:"".concat(this.relativePath,"webscene/viewer.html")},notebook:{show:k.default.notebookServerConfigured()&&("members"===Aa&&ha||"notebookCreators"===Aa&&(null===(ea=c.default.userRole)||void 0===ea?void 0:ea.canCreateNotebooks())),href:"".concat(this.relativePath,
"notebook/").concat(ca),openInNewTab:!c.default.notebookLandingEnabled,active:-1<ra.indexOf("notebookhome.html")},myAccount:{show:R.canViewOrgUsers()&&R.orgPageRestrictionsDoNotApply(),href:"".concat(this.relativePath,"organization.html"),active:-1<ra.indexOf("organization.html")},marketplace:{show:!R.isPublicAccount(),href:R._getMarketplaceUrl.bind(R)},features:{show:R.isPublicAccount()&&!c.default.self.isPortal,href:"".concat(this.relativePath,"../features/features.html")},esriCommunity:{show:R.showEsriLinks(),
href:R._getEsriCommunityUrl.bind(R),openInNewTab:!0},myEsri:{show:R.showEsriLinks(),href:R._getMyEsriUrl.bind(R),openInNewTab:!0},arcgisBlog:{show:R.showEsriLinks(),href:"https://www.esri.com/arcgis-blog/arcgis-online/",openInNewTab:!0},training:{show:R.showEsriLinks(),href:R._getEsriTrainingUrl.bind(R),openInNewTab:!0},trialDownload:{show:R.subscriptionIsTrial(),href:R._getTrialDownloadUrl.bind(R),openInNewTab:!0}}};ia.prototype.filterAndCreateLinks=function(R,S){var M=this,X=[];R.forEach(function(fa){var ea=
M.navLinks[fa];!ea||"show"in ea&&!ea.show||X.push(M.createGlobalNavLink(S[fa]||fa,ea))},this);return X};ia.prototype.createGlobalNavLink=function(R,S){return Object.create(this.GlobalNavLink).init(R,S)};ia.prototype.getUserProfileImage=function(R,S,M){return S?"".concat(c.default.restBaseUrl.replace("http://","https://"),"community/users/").concat(R,"/info/").concat(S,"?token\x3d").concat(M):this.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg")};ia.prototype.getUserCookie=function(){return c.default.userInfo||
null};ia.prototype.getOrgSettings=function(){return C.default.request({url:"".concat(c.default.restBaseUrl,"portals/self/settings"),content:{f:"json"}})};ia.prototype.getUserProperties=function(){var R,S=new K.default;(null===(R=c.default.userInfo)||void 0===R?0:R.username)?C.default.request({url:"".concat(c.default.restBaseUrl,"community/users/").concat(c.default.userInfo.username,"/properties"),content:{f:"json"}}).then(function(M){S.resolve(M.properties)},function(){S.resolve(null)}):S.resolve(null);
return S};ia.prototype.setupSignInLink=function(){var R;if(this.hideSignInLink())return null===(R=document.querySelector(".esri-header-account-control--signin"))||void 0===R?void 0:R.classList.add("hide");(0,F.default)(".esri-header-account-control--signin").on("click",function(){var S="".concat(c.default.baseUrl,"signin.html?");-1<window.location.href.indexOf("item.html")?window.location.href="".concat(S,"useLandingPage\x3dfalse\x26returnUrl\x3d").concat(window.location.href):window.location.href=
"".concat(S,"useLandingPage\x3dtrue")})};ia.prototype.setupSignOutAndAccountSwitcherLinks=function(){var R=this,S;c.default.showAccountSwitcher&&(null===(S=document.querySelector(".esri-header-account-signin-control.-switch"))||void 0===S?void 0:S.classList.add("hide"));(0,Q.default)(document.querySelector(".esri-header-account-control-logout"),"click",function(M){R._selectLogOut(M)});(0,Q.default)(document.querySelector(".esri-header-account-control.-switch"),"click",function(){R._openSwitchAccounts()})};
ia.prototype.setupSignOutLink=function(){var R=this,S;if(null===(S=this.portal)||void 0===S?0:S.isWebTierAuth)return document.querySelector(".esri-header-account-signin-control.-logout").classList.add("hide");(0,Q.default)(document.querySelector(".esri-header-account-signin-control.-logout"),"click",function(M){R._selectLogOut(M)})};ia.prototype.setupAccountSwitcherLink=function(){var R=this,S;if("showAccountSwitcher"in c.default&&!c.default.showAccountSwitcher)return null===(S=document.querySelector(".esri-header-account-signin-control.-switch"))||
void 0===S?void 0:S.classList.add("hide");(0,Q.default)(document.querySelector(".esri-header-account-signin-control.-switch"),"click",function(){R._openSwitchAccounts()})};ia.prototype.setupInlineSearch=function(){var R=this;document.querySelector(".esri-header-barrier").addEventListener("header::search:typing",(0,w.default)(function(S){-1<S.detail.indexOf("*")?R.updateComponent("header:search:update:suggestions",document.querySelector(".esri-header-inlineSearch"),R._disabledSearchJson()):2<=S.detail.length&&
R.fetchSuggestionResults(S.detail).then(function(M){M.results=M.results.map(R.mixinItemIcon.bind(R));h.default.postToLiveRegion(A.default.substitute(1===M.results.length?aa.default.searchPage.contentSearchResultLabel:aa.default.searchPage.contentSearchResultsLabel,{resultcount:M.results.length,keyword:S.detail}));R.updateSearchComponent(S.detail,M)})},280))};ia.prototype.setupNotifications=function(R){var S=this;q.default.fetchNotifications(R,this.portal).then(this.updateNotificationsComponent.bind(this));
document.addEventListener("header:click:notifications:dismiss",function(M){q.default.deleteNotifications(R,M.detail).then(function(X){var fa=X.filter(function(ea){return ea.success}).map(function(ea){return ea.notificationId});X=(S.defaultNavStructure.header.notifications.messages||[]).filter(function(ea){return 0>fa.indexOf(ea.id)});S.updateNotificationsComponent(X)})})};ia.prototype._getDefaultNotifications=function(R){var S=aa.default.notifications;return{label:S.label,dismissAllLabel:S.dismissAllLabel,
dismissLabel:S.dismissLabel,emptyMessage:{image:{path:["M15.5 1A14.5 14.5 0 1 0 30 15.5 14.5 14.5 0 0 0 15.5 1zm0 28.1a13.6 13.6 0 1 1 13.6-13.6 13.615 13.615 0 0 1-13.6 13.6zM8.581 17.276l.637-.636 3.288 3.098 10.073-9.92.637.637-10.71 10.556z"],viewBox:"0 0 32 32"},text:S.noNotifications},messages:R||[]}};ia.prototype._evalString=function(R,S){var M=R.indexOf("}",S),X=R.substring(S+2,M);return"".concat(R.substring(0,S)).concat(this[X]).concat(R.substring(M+1,R.length))};ia.prototype._constructContactUsUrl=
function(R){var S=c.default.portalName||"ArcGIS.com",M=encodeURIComponent(window.location.href);return"mailto:".concat(R.email,"?subject\x3dA comment about ").concat(S,"\x26body\x3dI have the following comment about the ").concat(S," Web site. %0AReferring page: ").concat(M," %0A %0A(Please provide as much detail as possible. Note: Contact Us is not meant for obtaining technical support or general product information.)")};ia.prototype._constructReportAbuseUrl=function(R){var S=encodeURIComponent(window.location.href);
return"mailto:".concat(R.email,"?subject\x3dConcerns about an item\x26body\x3dI have concerns about the following. %0AReferring page: ").concat(S," %0A %0A(Please describe your concerns. If you have concerns about a particular item, it's best to click the 'Report Abuse' link while viewing the item description. Doing so will include the URL to the specific item in this e-mail.)")};ia.prototype._selectLogOut=function(R){R.preventDefault();c.default.self.isPortal?this._standardLogOut():this._agolLogOut()};
ia.prototype._agolLogOut=function(){b.default.setCookie("esri_webmap","",{expires:-1,path:"/"});var R=c.default.isDebug?c.default.baseUrl:c.default.baseUrl.replace("http://","https://");R="".concat(R,"pages/Account/manage_accounts.html#");R+="client_id\x3d".concat(this.getAppClientId(),"\x26signout\x3dtrue");window.location.href=R};ia.prototype._standardLogOut=function(){b.default.setCookie("esri_webmap","",{expires:-1,path:"/"});var R="".concat(C.default.getHttpUrl(),"index.html");"private"===c.default.self.access&&
(R="".concat(C.default.getSecureUrl()).concat(c.default.signin));"public"===c.default.self.access&&(R="".concat(c.default.self.allSSL||this.usePortalSSL()?C.default.getSecureUrl():C.default.getHttpUrl(),"index.html"));D.default.signout(R)};ia.prototype._openSwitchAccounts=function(){var R="".concat(c.default.baseUrl,"pages/Account/manage_accounts.html#client_id\x3darcgisonline");window.open(R,"_blank").focus()};ia.prototype.relativeToExplicitUrl=function(R){c.default.cdnServerUrl=H.default.baseUrl.substring(0,
H.default.baseUrl.indexOf("/js/"));return c.default.cdnServerUrl.lastIndexOf("/")===c.default.cdnServerUrl.length-1?"".concat(c.default.cdnServerUrl).concat(R):"".concat(c.default.cdnServerUrl,"/").concat(R)};ia.prototype._getHelpUrl=function(){var R;return c.default.self.isPortal?this._getPortalHelpUrl():(null===(R=c.default.self)||void 0===R?void 0:R.helpBase)||"support.html"};ia.prototype._getPortalHelpUrl=function(){if(-1<c.default.self.helpBase.indexOf("enterprise.arcgis.com"))return"".concat(c.default.self.helpBase,
"portal/");var R=c.default.self.helpBase;"ArcGISEnterpriseOnKubernetes"!==(c.default.self||{}).portalDeploymentType&&(R+="portal/");return c.default.self.allSSL||"https:"===window.location.protocol||this.usePortalSSL()||"7443"===window.location.port?"".concat(C.default.getSecureUrl("".concat(window.location.protocol,"//").concat(window.location.host))).concat(R):R};ia.prototype._getEsriTrainingUrl=function(){return this.generateEsriLoginHandlerUrl("".concat(window.location.protocol,"//www.esri.com/training/arcgis-online-training"))};
ia.prototype._getMyEsriUrl=function(){return this.generateEsriLoginHandlerUrl(c.default.myEsriLink)};ia.prototype._getEsriCommunityUrl=function(){return this.generateEsriLoginHandlerUrl(c.default.esriCommunityLink)};ia.prototype._getMarketplaceUrl=function(){var R=this.getDevEnviroment();return"".concat(window.location.protocol,"//marketplace").concat(R?"".concat(R,"ext"):"",".arcgis.com")};ia.prototype._getTrialDownloadUrl=function(){var R,S,M={"pt-br":1,"pt-pt":1,"zh-cn":1,"zh-hk":1,"zh-tw":1},
X=((null===(R=c.default.userInfo)||void 0===R?void 0:R.culture)||(null===(S=c.default.self)||void 0===S?void 0:S.culture)||H.default.locale||"en").toLowerCase();R={nl:1}[X]?"en":X in M?X:X.split("-")[0].toLowerCase();return"".concat(c.default.learnArcGIS,"/").concat(R,"/trial")};ia.prototype.generateEsriLoginHandlerUrl=function(R){var S=this.getDevEnviroment(),M="https://accounts".concat(S?"dev"===S?"-dev":"-stg":"",".esri.com/");S="\x26authBaseUrl\x3d".concat(C.default.getSecureUrl(c.default.restBaseUrl.replace("/sharing/rest/",
"")));M="".concat(M,"LoginHandler/switchuser?");R="username\x3d".concat(c.default.userInfo.username,"\x26redirect_uri\x3d").concat(R).concat(S);return"".concat(M).concat(R)};ia.prototype.getDevEnviroment=function(){var R=c.default.self.portalHostname;return-1!==R.indexOf("dev")?"dev":-1!==R.indexOf("qa")?"qa":null};ia.prototype._getOriginOfUrl=function(R){var S=window.location;R=R?"".concat(R,":"):S.protocol;return"".concat(R,"//").concat(S.hostname).concat(S.port?":".concat(S.port):"","/")};ia.prototype.hideSignInLink=
function(){return c.default.self.isPortal&&"singletenant"===c.default.self.portalMode&&c.default.self.isWebTierAuth&&"7443"!==window.location.port};ia.prototype.showProductLinks=function(){var R=c.default.self,S=R.access,M=R.isPortal;return!R.id&&!S&&!M};ia.prototype.isPublicAccount=function(){var R=c.default.self,S=R.isPortal;return!R.urlKey&&!S&&!!c.default.userInfo};ia.prototype.canViewOrgUsers=function(){var R;return null===(R=c.default.userRole)||void 0===R?void 0:R.canViewOrgUsers()};ia.prototype.orgPageRestrictionsDoNotApply=
function(){var R=c.default.userInfo,S=!R.accountId;R=R.role&&("org_admin"===R.role||"account_admin"===R.role)&&!R.roleId;return!c.default.restrictOrganizationPageToAdmin||S||R};ia.prototype.showEsriLinks=function(){var R;return!c.default.self.isPortal&&"both"===(null===(R=c.default.userInfo)||void 0===R?void 0:R.userType)};ia.prototype.subscriptionIsTrial=function(){return!c.default.self.isPortal&&c.default.self.subscriptionInfo&&("Trial"===c.default.self.subscriptionInfo.type||"Trial Press"===c.default.self.subscriptionInfo.type)};
ia.prototype.usePortalSSL=function(){var R;return(!1===c.default.isMultiTenant||C.default.isPortal())&&(null===(R=c.default.self)||void 0===R?void 0:R.portalHostname)&&!c.default.self.portalHostname.match(/:7080\//)&&80!==c.default.self.httpPort&&443!==c.default.self.httpsPort&&"https:"===window.location.protocol};return ia}();B.default=f})},"arcgis-components/wrappers/InfoBanner":function(){define(["../Component","../InfoBanner/index"],function(f,B){return function(l){function d(u){if(c[u])return c[u].exports;
var t=c[u]={i:u,l:!1,exports:{}};return l[u].call(t.exports,t,t.exports,d),t.l=!0,t.exports}var c={};return d.m=l,d.c=c,d.d=function(u,t,e){d.o(u,t)||Object.defineProperty(u,t,{enumerable:!0,get:e})},d.r=function(u){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"});Object.defineProperty(u,"__esModule",{value:!0})},d.t=function(u,t){if((1&t&&(u=d(u)),8&t)||4&t&&"object"==typeof u&&u&&u.__esModule)return u;var e=Object.create(null);if(d.r(e),
Object.defineProperty(e,"default",{enumerable:!0,value:u}),2&t&&"string"!=typeof u)for(var r in u)d.d(e,r,function(m){return u[m]}.bind(null,r));return e},d.n=function(u){var t=u&&u.__esModule?function(){return u.default}:function(){return u};return d.d(t,"a",t),t},d.o=function(u,t){return Object.prototype.hasOwnProperty.call(u,t)},d.p="",d(d.s=945)}({1:function(l,d,c){function u(n,k){function g(){this.constructor=n}if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+
" is not a constructor or null");h(n,k);n.prototype=null===k?Object.create(k):(g.prototype=k.prototype,new g)}function t(n,k){var g={},b;for(b in n)Object.prototype.hasOwnProperty.call(n,b)&&0>k.indexOf(b)&&(g[b]=n[b]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var x=0;for(b=Object.getOwnPropertySymbols(n);x<b.length;x++)0>k.indexOf(b[x])&&Object.prototype.propertyIsEnumerable.call(n,b[x])&&(g[b[x]]=n[b[x]])}return g}function e(n,k,g,b){var x,v=arguments.length,y=3>v?k:null===b?
b=Object.getOwnPropertyDescriptor(k,g):b;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)y=Reflect.decorate(n,k,g,b);else for(var D=n.length-1;0<=D;D--)(x=n[D])&&(y=(3>v?x(y):3<v?x(k,g,y):x(k,g))||y);return 3<v&&y&&Object.defineProperty(k,g,y),y}function r(n,k,g,b){return new (g||(g=Promise))(function(x,v){function y(C){try{E(b.next(C))}catch(z){v(z)}}function D(C){try{E(b.throw(C))}catch(z){v(z)}}function E(C){var z;C.done?x(C.value):(z=C.value,z instanceof g?z:new g(function(w){w(z)})).then(y,
D)}E((b=b.apply(n,k||[])).next())})}function m(n,k){function g(E){return function(C){return function(z){if(b)throw new TypeError("Generator is already executing.");for(;y&&(y=0,z[0]&&(D=0)),D;)try{if(b=1,x&&(v=2&z[0]?x.return:z[0]?x.throw||((v=x.return)&&v.call(x),0):x.next)&&!(v=v.call(x,z[1])).done)return v;switch(x=0,v&&(z=[2&z[0],v.value]),z[0]){case 0:case 1:v=z;break;case 4:return D.label++,{value:z[1],done:!1};case 5:D.label++;x=z[1];z=[0];continue;case 7:z=D.ops.pop();D.trys.pop();continue;
default:if(!(v=D.trys,(v=0<v.length&&v[v.length-1])||6!==z[0]&&2!==z[0])){D=0;continue}if(3===z[0]&&(!v||z[1]>v[0]&&z[1]<v[3]))D.label=z[1];else if(6===z[0]&&D.label<v[1])D.label=v[1],v=z;else if(v&&D.label<v[2])D.label=v[2],D.ops.push(z);else{v[2]&&D.ops.pop();D.trys.pop();continue}}z=k.call(n,D)}catch(w){z=[6,w],x=0}finally{b=v=0}if(5&z[0])throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}([E,C])}}var b,x,v,y,D={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return y=
{next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(y[Symbol.iterator]=function(){return this}),y}function a(n,k,g){if(g||2===arguments.length)for(var b,x=0,v=k.length;x<v;x++)!b&&x in k||(b||(b=Array.prototype.slice.call(k,0,x)),b[x]=k[x]);return n.concat(b||Array.prototype.slice.call(k))}c.d(d,"d",function(){return u});c.d(d,"a",function(){return q});c.d(d,"f",function(){return t});c.d(d,"c",function(){return e});c.d(d,"b",function(){return r});c.d(d,"e",function(){return m});c.d(d,"g",
function(){return a});var h=function(n,k){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,b){g.__proto__=b}||function(g,b){for(var x in b)Object.prototype.hasOwnProperty.call(b,x)&&(g[x]=b[x])})(n,k)},q=function(){return(q=Object.assign||function(n){for(var k,g=1,b=arguments.length;g<b;g++)for(var x in k=arguments[g])Object.prototype.hasOwnProperty.call(k,x)&&(n[x]=k[x]);return n}).apply(this,arguments)};Object.create;Object.create},165:function(l,d){d=function(){return this}();
try{d=d||(new Function("return this"))()}catch(c){"object"==typeof window&&(d=window)}l.exports=d},17:function(l,d){l.exports=f},189:function(l,d){function c(){throw Error("setTimeout has not been defined");}function u(){throw Error("clearTimeout has not been defined");}function t(x){if(h===setTimeout)return setTimeout(x,0);if((h===c||!h)&&setTimeout)return h=setTimeout,setTimeout(x,0);try{return h(x,0)}catch(v){try{return h.call(null,x,0)}catch(y){return h.call(this,x,0)}}}function e(){g&&n&&(g=
!1,n.length?k=n.concat(k):b=-1,k.length&&r())}function r(){if(!g){var x=t(e);g=!0;for(var v=k.length;v;){n=k;for(k=[];++b<v;)n&&n[b].run();b=-1;v=k.length}n=null;g=!1;(function(y){if(q===clearTimeout)return clearTimeout(y);if((q===u||!q)&&clearTimeout)return q=clearTimeout,clearTimeout(y);try{q(y)}catch(D){try{return q.call(null,y)}catch(E){return q.call(this,y)}}})(x)}}function m(x,v){this.fun=x;this.array=v}function a(){}l=l.exports={};try{var h="function"==typeof setTimeout?setTimeout:c}catch(x){h=
c}try{var q="function"==typeof clearTimeout?clearTimeout:u}catch(x){q=u}!0;var n,k=[],g=!1,b=-1;l.nextTick=function(x){var v=Array(arguments.length-1);if(1<arguments.length)for(var y=1;y<arguments.length;y++)v[y-1]=arguments[y];k.push(new m(x,v));1!==k.length||g||t(r)};m.prototype.run=function(){this.fun.apply(null,this.array)};l.title="browser";l.browser=!0;l.env={};l.argv=[];l.version="";l.versions={};l.on=a;l.addListener=a;l.once=a;l.off=a;l.removeListener=a;l.removeAllListeners=a;l.emit=a;l.prependListener=
a;l.prependOnceListener=a;l.listeners=function(x){return[]};l.binding=function(x){throw Error("process.binding is not supported");};l.cwd=function(){return"/"};l.chdir=function(x){throw Error("process.chdir is not supported");};l.umask=function(){return 0}},28:function(l,d,c){(function(u,t){l.exports=function(){function e(){var R=setTimeout;return function(){return R(r,1)}}function r(){for(var R=0;R<C;R+=2)(0,K[R])(K[R+1]),K[R]=void 0,K[R+1]=void 0;C=0}function m(R,S){var M=this,X=new this.constructor(h);
void 0===X[W]&&D(X);var fa=M._state;if(fa){var ea=arguments[fa-1];A(function(){return y(fa,X,ea,M._result)})}else x(M,X,R,S);return X}function a(R){if(R&&"object"==typeof R&&R.constructor===this)return R;var S=new this(h);return n(S,R),S}function h(){}function q(R,S,M){S.constructor===R.constructor&&M===m&&S.constructor.resolve===a?function(X,fa){1===fa._state?g(X,fa._result):2===fa._state?b(X,fa._result):x(fa,void 0,function(ea){return n(X,ea)},function(ea){return b(X,ea)})}(R,S):void 0===M?g(R,
S):"function"==typeof M?function(X,fa,ea){A(function(ha){var ra=!1,Aa=function(Ea,va,Ga,ca){try{Ea.call(va,Ga,ca)}catch(ja){return ja}}(ea,fa,function(Ea){ra||(ra=!0,fa!==Ea?n(ha,Ea):g(ha,Ea))},function(Ea){ra||(ra=!0,b(ha,Ea))},ha._label);!ra&&Aa&&(ra=!0,b(ha,Aa))},X)}(R,S,M):g(R,S)}function n(R,S){if(R===S)b(R,new TypeError("You cannot resolve a promise with itself"));else if(X=typeof(M=S),null===M||"object"!==X&&"function"!==X)g(R,S);else{M=void 0;try{M=S.then}catch(fa){return void b(R,fa)}q(R,
S,M)}var M,X}function k(R){R._onerror&&R._onerror(R._result);v(R)}function g(R,S){void 0===R._state&&(R._result=S,R._state=1,0!==R._subscribers.length&&A(v,R))}function b(R,S){void 0===R._state&&(R._state=2,R._result=S,A(k,R))}function x(R,S,M,X){var fa=R._subscribers,ea=fa.length;R._onerror=null;fa[ea]=S;fa[ea+1]=M;fa[ea+2]=X;0===ea&&R._state&&A(v,R)}function v(R){var S=R._subscribers,M=R._state;if(0!==S.length){for(var X=void 0,fa=void 0,ea=R._result,ha=0;ha<S.length;ha+=3)X=S[ha],fa=S[ha+M],X?
y(M,X,fa,ea):fa(ea);R._subscribers.length=0}}function y(R,S,M,X){var fa="function"==typeof M,ea=void 0,ha=void 0,ra=!0;if(fa){try{ea=M(X)}catch(Aa){ra=!1,ha=Aa}if(S===ea)return void b(S,new TypeError("A promises callback cannot return that same promise."))}else ea=X;void 0!==S._state||(fa&&ra?n(S,ea):!1===ra?b(S,ha):1===R?g(S,ea):2===R&&b(S,ea))}function D(R){R[W]=Z++;R._state=void 0;R._result=void 0;R._subscribers=[]}var E=Array.isArray?Array.isArray:function(R){return"[object Array]"===Object.prototype.toString.call(R)},
C=0,z=void 0,w=void 0,A=function(R,S){K[C]=R;K[C+1]=S;2===(C+=2)&&(w?w(r):L())},G="undefined"!=typeof window?window:void 0,F=G||{};F=F.MutationObserver||F.WebKitMutationObserver;var H="undefined"==typeof self&&void 0!==u&&"[object process]"==={}.toString.call(u),J="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,K=Array(1E3),Q,P,I,N,L=void 0;H?L=function(){return u.nextTick(r)}:F?(P=0,I=new F(r),N=document.createTextNode(""),I.observe(N,
{characterData:!0}),L=function(){N.data=P=++P%2}):J?((Q=new MessageChannel).port1.onmessage=r,L=function(){return Q.port2.postMessage(0)}):L=void 0===G?function(){try{var R=Function("return this")().require("vertx");return void 0!==(z=R.runOnLoop||R.runOnContext)?function(){z(r)}:e()}catch(S){return e()}}():e();var W=Math.random().toString(36).substring(2),Z=0,aa=function(){function R(S,M){this._instanceConstructor=S;this.promise=new S(h);this.promise[W]||D(this.promise);E(M)?(this.length=M.length,
this._remaining=M.length,this._result=Array(this.length),0===this.length?g(this.promise,this._result):(this.length=this.length||0,this._enumerate(M),0===this._remaining&&g(this.promise,this._result))):b(this.promise,Error("Array Methods must be provided an Array"))}return R.prototype._enumerate=function(S){for(var M=0;void 0===this._state&&M<S.length;M++)this._eachEntry(S[M],M)},R.prototype._eachEntry=function(S,M){var X=this._instanceConstructor,fa=X.resolve;if(fa===a){var ea=fa=void 0,ha=!1;try{fa=
S.then}catch(ra){ha=!0,ea=ra}fa===m&&void 0!==S._state?this._settledAt(S._state,M,S._result):"function"!=typeof fa?(this._remaining--,this._result[M]=S):X===ia?(X=new X(h),ha?b(X,ea):q(X,S,fa),this._willSettleAt(X,M)):this._willSettleAt(new X(function(ra){return ra(S)}),M)}else this._willSettleAt(fa(S),M)},R.prototype._settledAt=function(S,M,X){var fa=this.promise;void 0===fa._state&&(this._remaining--,2===S?b(fa,X):this._result[M]=X);0===this._remaining&&g(fa,this._result)},R.prototype._willSettleAt=
function(S,M){var X=this;x(S,void 0,function(fa){return X._settledAt(1,M,fa)},function(fa){return X._settledAt(2,M,fa)})},R}(),ia=function(){function R(S){this[W]=Z++;this._result=this._state=void 0;this._subscribers=[];if(h!==S){if("function"!=typeof S)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof R)(function(M,X){try{X(function(fa){n(M,fa)},function(fa){b(M,fa)})}catch(fa){b(M,fa)}})(this,S);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
}}return R.prototype.catch=function(S){return this.then(null,S)},R.prototype.finally=function(S){var M=this.constructor;return"function"==typeof S?this.then(function(X){return M.resolve(S()).then(function(){return X})},function(X){return M.resolve(S()).then(function(){throw X;})}):this.then(S,S)},R}();return ia.prototype.then=m,ia.all=function(R){return(new aa(this,R)).promise},ia.race=function(R){var S=this;return E(R)?new S(function(M,X){for(var fa=R.length,ea=0;ea<fa;ea++)S.resolve(R[ea]).then(M,
X)}):new S(function(M,X){return X(new TypeError("You must pass an array to race."))})},ia.resolve=a,ia.reject=function(R){var S=new this(h);return b(S,R),S},ia._setScheduler=function(R){w=R},ia._setAsap=function(R){A=R},ia._asap=A,ia.polyfill=function(){var R=void 0;if(void 0!==t)R=t;else if("undefined"!=typeof self)R=self;else try{R=Function("return this")()}catch(X){throw Error("polyfill failed because global object is unavailable in this environment");}var S=R.Promise;if(S){var M=null;try{M=Object.prototype.toString.call(S.resolve())}catch(X){}if("[object Promise]"===
M&&!S.cast)return}R.Promise=ia},ia.Promise=ia,ia}()}).call(this,c(189),c(165))},33:function(l,d,c){function u(K){return K.reduce(function(Q,P){return P&&P.relatedItems?Q.concat(P.relatedItems.map(function(I){return I})):Q},[])}function t(K,Q,P){return K(Q,{query:Object(m.a)({f:"json"},P)}).then(function(I){return I.data})}function e(K,Q){void 0===Q&&(Q=100);for(var P=[],I=0;I<Math.ceil(K.length/Q);I++)P.push(K.slice(I*Q,(I+1)*Q));return P.filter(function(N){return 0<N.length})}function r(K){var Q=
K.itemIds,P=K.request,I=K.groupIds,N="".concat(K.portal.restUrl,"/content/itemsgroups");return new a.Promise(function(L,W){P(N,{method:"get",query:{f:"json",items:Q,groups:I}}).then(function(Z){L(Z.data)},W)})}c.d(d,"u",function(){return h});c.d(d,"n",function(){return q});c.d(d,"h",function(){return n});c.d(d,"e",function(){return k});c.d(d,"f",function(){return g});c.d(d,"j",function(){return b});c.d(d,"o",function(){return x});c.d(d,"l",function(){return v});c.d(d,"k",function(){return y});c.d(d,
"m",function(){return D});c.d(d,"c",function(){return E});c.d(d,"d",function(){return C});c.d(d,"r",function(){return z});c.d(d,"s",function(){return w});c.d(d,"t",function(){return A});c.d(d,"g",function(){return G});c.d(d,"p",function(){return F});c.d(d,"q",function(){return H});c.d(d,"v",function(){return t});c.d(d,"a",function(){return e});c.d(d,"i",function(){return r});c.d(d,"b",function(){return J});var m=c(1),a=c(28),h=function(K){return function(Q,P){return K({url:Q,content:P.query},{usePost:"post"===
P.method}).then(function(I){return{data:I}})}},q=function(K,Q,P){return t(K,"".concat(Q.restUrl,"/portals/self"),{culture:P,default:!0})},n=function(K,Q,P){return t(K,"".concat(Q.restUrl,"/content/items/").concat(P,"/data"))},k=function(K,Q,P,I){return t(K,"".concat(Q.restUrl,"/community/groups"),Object(m.a)({q:P},I))},g=function(K,Q,P){return t(K,"".concat(Q.restUrl,"/community/groups/").concat(P,"/categorySchema"))},b=function(K,Q,P){return t(K,"".concat(Q.restUrl,"/portals/").concat(P||Q.id,"/categorySchema"))},
x=function(K,Q){return t(K,"".concat(Q.restUrl,"/portals/").concat(Q.id,"/servers"))},v=function(K,Q,P,I){return K("".concat(Q.restUrl,"/portals/").concat(P||Q.id,"/collaborationsSummary"),I)},y=function(K,Q,P,I){return K("".concat(Q.restUrl,"/portals/").concat(P||Q.id,"/collaboratedItems"),I)},D=function(K,Q,P){return t(K,"".concat(location.protocol,"//").concat(Q.portalHostname,"/sharing/rest/portals/").concat(P||"self"))},E=function(K,Q,P){return K("".concat(Q.restUrl,"/community/groups"),{query:{f:"json",
q:"orgid:".concat(Q.id," AND access:public"),num:100,start:P||1,sortField:"title",sortOrder:"asc"}}).then(function(I){return I.data.total>I.data.start+I.data.num?E(K,Q,I.data.start+I.data.num).then(function(N){return Object(m.a)(Object(m.a)({},N),{data:Object(m.a)(Object(m.a)({},N.data),{results:I.data.results.concat(N.data.results)})})}):I})},C=function(K,Q,P,I){return K("".concat(Q.restUrl,"/community/users/").concat(P,"/provisionedListings"),{query:{f:"json",num:100,start:I||1}}).then(function(N){var L=
a.Promise.all(N.data.provisionedListings.filter(function(Z){return Z.itemId}).map(function(Z){return(new a.Promise(function(aa,ia){K("".concat(Q.restUrl,"/content/items/").concat(Z.itemId),{method:"get",query:{f:"json"}}).then(function(R){aa(R.data)},ia)})).catch(function(aa){return 0})})),W=N.data.provisionedListings.map(function(Z){return t(K,"".concat(Q.restUrl,"/content/items/").concat(Z.id||Z.itemId,"/relatedItems?relationshipType\x3dListed2ImplicitlyListed\x26direction\x3dforward")).then(function(aa){return aa},
function(aa){})});return N.data.total>N.data.start+N.data.num?C(K,Q,P,N.data.start+N.data.num).then(function(Z){return a.Promise.all([L].concat(W)).then(function(aa){return aa[0].results.concat(u(aa.slice(1))).concat(Z)})}):a.Promise.all([L].concat(W)).then(function(Z){return Z[0].filter(function(aa){return void 0!==aa}).concat(u(Z.slice(1)))})})},z=function(K,Q,P){return t(K,"".concat(Q.restUrl,"/community/users/").concat(P||Q.user.username))},w=function(K,Q,P){return t(K,"".concat(Q.restUrl,"/content/users/").concat(P||
Q.user.username),{num:1})},A=function(K,Q,P){return t(K,"".concat(Q.restUrl,"/content/groups/").concat(P))},G=function(K,Q,P){return t(K,"".concat(Q.restUrl,"/community/groups"),P)},F=function(K,Q){return t(K,"".concat(Q.restUrl,"/portals/self/settings"))},H=function(K,Q){return t(K,"".concat(Q.restUrl,"/portals/self/trustedOrgs"),{num:100})},J=function(K,Q){return void 0===Q&&(Q=","),K.map(function(P){return P.id}).join(Q)}},679:function(l,d){l.exports=B},945:function(l,d,c){c.r(d);c.d(d,"InfoBanner",
function(){return m});var u=c(1),t=c(17);l=c(679);var e=c.n(l),r=c(33),m=function(){function a(h){var q=this;this.options=h;var n=h.bottomContainer;(this.topContainer=h.topContainer,this.bottomContainer=n,h.bannerConfig)?(h.bannerConfig.text&&(h.bannerConfig.text=this.htmlDecode(h.bannerConfig.text)),this.setupBanners(h.bannerConfig)):h.request&&h.portal&&h.apiVersion&&(n=4===h.apiVersion?h.request:this.shimmedRequest.bind(this),h=4===h.apiVersion?h.portal:Object(u.a)(Object(u.a)({},h.portal),{restUrl:h.portal.portalUrl.slice(0,
-1),credential:h.portal.user&&h.portal.user.credential?h.portal.user.credential:void 0}),Object(r.p)(n,h).then(function(k){q.setupBanners(k.informationalBanner)}))}return a.prototype.destroy=function(){this.topContainer&&(this.topProjector.stop(),this.topContainer.remove?this.topContainer.remove():this.topContainer.parentNode&&this.topContainer.parentNode.removeChild(this.topContainer));this.bottomContainer&&(this.bottomProjector.stop(),this.bottomContainer.remove?this.bottomContainer.remove():this.bottomContainer.parentNode&&
this.bottomContainer.parentNode.removeChild(this.bottomContainer))},a.prototype.htmlDecode=function(h){var q=document.createElement("textarea");return q.innerHTML=h,q.value},a.prototype.setupBanners=function(h){h&&h.enabled&&(this.topContainer&&(this.topProjector=this.createProjector(this.topContainer,"top-info-banner","top",h)),this.bottomContainer&&(this.bottomProjector=this.createProjector(this.bottomContainer,"bottom-info-banner","bottom",h)))},a.prototype.createProjector=function(h,q,n,k){var g=
{key:q,position:n,bannerConfig:k};return this.store=Object(t.createStore)(function(b,x){x.type;x.payload;return Object(u.a)({},g)},g),Object(t.createProjector)(this.store,function(b){return b(e.a,Object(u.a)({},g))},h)},a.prototype.shimmedRequest=function(h,q){var n=Object(u.a)({},q.query);return this.options.portal&&this.options.portal.user&&this.options.portal.user.credential&&-1<h.indexOf(this.options.portal.restUrl)&&(n.token=this.options.portal.user.credential.token),this.options.request({url:h,
content:q.query},{usePost:"post"===q.method}).then(function(k){return{data:k}})},a}()}})})},"arcgis-components/Component":function(){define(function(){return function(f){function B(d){if(l[d])return l[d].exports;var c=l[d]={i:d,l:!1,exports:{}};return f[d].call(c.exports,c,c.exports,B),c.l=!0,c.exports}var l={};return B.m=f,B.c=l,B.d=function(d,c,u){B.o(d,c)||Object.defineProperty(d,c,{enumerable:!0,get:u})},B.r=function(d){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,
{value:"Module"});Object.defineProperty(d,"__esModule",{value:!0})},B.t=function(d,c){if((1&c&&(d=B(d)),8&c)||4&c&&"object"==typeof d&&d&&d.__esModule)return d;var u=Object.create(null);if(B.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:d}),2&c&&"string"!=typeof d)for(var t in d)B.d(u,t,function(e){return d[e]}.bind(null,t));return u},B.n=function(d){var c=d&&d.__esModule?function(){return d.default}:function(){return d};return B.d(c,"a",c),c},B.o=function(d,c){return Object.prototype.hasOwnProperty.call(d,
c)},B.p="",B(B.s=772)}({1:function(f,B,l){function d(h,q){function n(){this.constructor=h}if("function"!=typeof q&&null!==q)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");m(h,q);h.prototype=null===q?Object.create(q):(n.prototype=q.prototype,new n)}function c(h,q){var n={},k;for(k in h)Object.prototype.hasOwnProperty.call(h,k)&&0>q.indexOf(k)&&(n[k]=h[k]);if(null!=h&&"function"==typeof Object.getOwnPropertySymbols){var g=0;for(k=Object.getOwnPropertySymbols(h);g<
k.length;g++)0>q.indexOf(k[g])&&Object.prototype.propertyIsEnumerable.call(h,k[g])&&(n[k[g]]=h[k[g]])}return n}function u(h,q,n,k){var g,b=arguments.length,x=3>b?q:null===k?k=Object.getOwnPropertyDescriptor(q,n):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)x=Reflect.decorate(h,q,n,k);else for(var v=h.length-1;0<=v;v--)(g=h[v])&&(x=(3>b?g(x):3<b?g(q,n,x):g(q,n))||x);return 3<b&&x&&Object.defineProperty(q,n,x),x}function t(h,q,n,k){return new (n||(n=Promise))(function(g,b){function x(D){try{y(k.next(D))}catch(E){b(E)}}
function v(D){try{y(k.throw(D))}catch(E){b(E)}}function y(D){var E;D.done?g(D.value):(E=D.value,E instanceof n?E:new n(function(C){C(E)})).then(x,v)}y((k=k.apply(h,q||[])).next())})}function e(h,q){function n(y){return function(D){return function(E){if(k)throw new TypeError("Generator is already executing.");for(;x&&(x=0,E[0]&&(v=0)),v;)try{if(k=1,g&&(b=2&E[0]?g.return:E[0]?g.throw||((b=g.return)&&b.call(g),0):g.next)&&!(b=b.call(g,E[1])).done)return b;switch(g=0,b&&(E=[2&E[0],b.value]),E[0]){case 0:case 1:b=
E;break;case 4:return v.label++,{value:E[1],done:!1};case 5:v.label++;g=E[1];E=[0];continue;case 7:E=v.ops.pop();v.trys.pop();continue;default:if(!(b=v.trys,(b=0<b.length&&b[b.length-1])||6!==E[0]&&2!==E[0])){v=0;continue}if(3===E[0]&&(!b||E[1]>b[0]&&E[1]<b[3]))v.label=E[1];else if(6===E[0]&&v.label<b[1])v.label=b[1],b=E;else if(b&&v.label<b[2])v.label=b[2],v.ops.push(E);else{b[2]&&v.ops.pop();v.trys.pop();continue}}E=q.call(h,v)}catch(C){E=[6,C],g=0}finally{k=b=0}if(5&E[0])throw E[1];return{value:E[0]?
E[1]:void 0,done:!0}}([y,D])}}var k,g,b,x,v={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return x={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(x[Symbol.iterator]=function(){return this}),x}function r(h,q,n){if(n||2===arguments.length)for(var k,g=0,b=q.length;g<b;g++)!k&&g in q||(k||(k=Array.prototype.slice.call(q,0,g)),k[g]=q[g]);return h.concat(k||Array.prototype.slice.call(q))}l.d(B,"d",function(){return d});l.d(B,"a",function(){return a});l.d(B,"f",
function(){return c});l.d(B,"c",function(){return u});l.d(B,"b",function(){return t});l.d(B,"e",function(){return e});l.d(B,"g",function(){return r});var m=function(h,q){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,k){n.__proto__=k}||function(n,k){for(var g in k)Object.prototype.hasOwnProperty.call(k,g)&&(n[g]=k[g])})(h,q)},a=function(){return(a=Object.assign||function(h){for(var q,n=1,k=arguments.length;n<k;n++)for(var g in q=arguments[n])Object.prototype.hasOwnProperty.call(q,
g)&&(h[g]=q[g]);return h}).apply(this,arguments)};Object.create;Object.create},15:function(f,B,l){function d(u){return function e(){for(var r=this,m=[],a=0;a<arguments.length;a++)m[a]=arguments[a];return m.length>=u.length?u.call.apply(u,Object(c.g)([this],m,!1)):function(){for(var h=[],q=0;q<arguments.length;q++)h[q]=arguments[q];return e.call.apply(e,Object(c.g)(Object(c.g)([r],m,!1),h,!1))}}}l.d(B,"a",function(){return d});var c=l(1)},423:function(f,B,l){!function(d){var c="".concat("http://www.w3.org/",
"2000/svg"),u="".concat("http://www.w3.org/","1999/xlink"),t=[],e=function(F,H){var J={};return Object.keys(F).forEach(function(K){J[K]=F[K]}),H&&Object.keys(H).forEach(function(K){J[K]=H[K]}),J},r=function(F,H){return F.vnodeSelector===H.vnodeSelector&&(F.properties&&H.properties?F.properties.key===H.properties.key&&F.properties.bind===H.properties.bind:!F.properties&&!H.properties)},m=function(F){if("string"!=typeof F)throw Error("Style values must be strings");},a=function(F,H,J,K){var Q=F[H];
if(""!==Q.vnodeSelector){var P=Q.properties;if(!(P&&(void 0===P.key?P.bind:P.key)))for(P=0;P<F.length;P++)if(P!==H&&r(F[P],Q))throw{error:Error("".concat(J.vnodeSelector," had a ").concat(Q.vnodeSelector," child ").concat("added"===K?K:"removed",", but there is now more than one. You must add unique key properties to make them distinguishable.")),parentNode:J,childNode:Q};}},h=[],q=!1,n=function(F){(F.children||[]).forEach(n);F.properties&&F.properties.afterRemoved&&F.properties.afterRemoved.apply(F.properties.bind||
F.properties,[F.domNode])},k=function(){q=!1;h.forEach(n);h.length=0},g=function(F){h.push(F);q||(q=!0,"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(k,{timeout:16}):setTimeout(k,16))},b=function(F){var H=F.domNode;if(F.properties){var J=F.properties.exitAnimation;if(J)return H.style.pointerEvents="none",void J(H,function(){H.parentNode&&(H.parentNode.removeChild(H),g(F))},F.properties)}H.parentNode&&(H.parentNode.removeChild(H),g(F))},x=function(F,H,J){!function(K,
Q,P){if(Q)for(var I=0;I<Q.length;I++)v(Q[I],K,void 0,P)}(F,H.children,J);H.text&&(F.textContent=H.text);(function(K,Q,P){if(Q)for(var I=P.eventHandlerInterceptor,N=Object.keys(Q),L=N.length,W=function(aa){var ia,R=N[aa];aa=Q[R];if("className"===R)throw Error('Property "className" is not supported, use "class".');if("class"===R)y(K,aa,!0);else if("classes"===R){var S=Object.keys(aa),M=S.length;for(R=0;R<M;R++){var X=S[R];aa[X]&&K.classList.add(X)}}else if("styles"===R)for(S=Object.keys(aa),M=S.length,
R=0;R<M;R++){X=S[R];var fa=aa[X];fa&&(m(fa),P.styleApplyer(K,X,fa))}else"key"!==R&&null!=aa&&(S=typeof aa,"function"===S?(0===R.lastIndexOf("on",0)&&(I&&(aa=I(R,aa,K,Q)),"oninput"===R&&(ia=aa,aa=function(ea){ia.apply(this,[ea]);ea.target["oninput-value"]=ea.target.value})),K[R]=aa):P.namespace===c?"href"===R?K.setAttributeNS(u,R,aa):K.setAttribute(R,aa):"string"===S&&"value"!==R&&"innerHTML"!==R?K.setAttribute(R,aa):K[R]=aa)},Z=0;Z<L;Z++)W(Z)})(F,H.properties,J);H.properties&&H.properties.afterCreate&&
H.properties.afterCreate.apply(H.properties.bind||H.properties,[F,J,H.vnodeSelector,H.properties,H.children])},v=function(F,H,J,K){var Q,P=0,I=F.vnodeSelector,N=H.ownerDocument;if(""===I)F.domNode?F.domNode.nodeValue=F.text:(Q=F.domNode=N.createTextNode(F.text),void 0!==J?H.insertBefore(Q,J):H.appendChild(Q));else{for(var L=0;L<=I.length;++L){var W=I.charAt(L);if(L===I.length||"."===W||"#"===W)W=I.charAt(P-1),P=I.slice(P,L),"."===W?Q.classList.add(P):"#"===W?Q.id=P:("svg"===P&&(K=e(K,{namespace:c})),
void 0!==K.namespace?Q=F.domNode=N.createElementNS(K.namespace,P):(Q=F.domNode=F.domNode||N.createElement(P),"input"===P&&F.properties&&void 0!==F.properties.type&&Q.setAttribute("type",F.properties.type)),void 0!==J?H.insertBefore(Q,J):Q.parentNode!==H&&H.appendChild(Q)),P=L+1}x(Q,F,K)}},y=function(F,H,J){H&&H.split(" ").forEach(function(K){K&&F.classList.toggle(K,J)})};var D=function(F,H,J){var K=F.domNode,Q=!1;if(F===H)return!1;var P=!1;if(""===H.vnodeSelector){if(H.text!==F.text)return F=K.ownerDocument.createTextNode(H.text),
K.parentNode.replaceChild(F,K),H.domNode=F,Q=!0;H.domNode=K}else 0===H.vnodeSelector.lastIndexOf("svg",0)&&(J=e(J,{namespace:c})),F.text!==H.text&&(P=!0,void 0===H.text?K.removeChild(K.firstChild):K.textContent=H.text),H.domNode=K,P=function(I,N,L,W,Z){if(L===W)return!1;W=W||t;for(var aa,ia=(L=L||t).length,R=W.length,S=aa=0,M=!1;S<R;){var X=aa<ia?L[aa]:void 0,fa=W[S];if(void 0!==X&&r(X,fa))M=D(X,fa,Z)||M,aa++;else{a:{X=L;var ea=fa;if(""!==ea.vnodeSelector)for(var ha=aa+1;ha<X.length;ha++)if(r(X[ha],
ea)){X=ha;break a}X=-1}if(0<=X){for(;aa<X;aa++)b(L[aa]),a(L,aa,I,"removed");M=D(L[X],fa,Z)||M;aa=X+1}else v(fa,N,aa<ia?L[aa].domNode:void 0,Z),fa.properties&&(X=fa.properties.enterAnimation)&&X(fa.domNode,fa.properties),a(W,S,I,"added")}S++}if(ia>aa)for(;aa<ia;aa++)b(L[aa]),a(L,aa,I,"removed");return M}(H,K,F.children,H.children,J)||P,P=function(I,N,L,W){if(L){for(var Z=!1,aa=Object.keys(L),ia=aa.length,R=0;R<ia;R++){var S=aa[R],M=L[S],X=N[S];if("class"===S)X!==M&&(y(I,X,!1),y(I,M,!0));else if("classes"===
S){var fa=I.classList,ea=Object.keys(M),ha=ea.length;for(S=0;S<ha;S++){var ra=ea[S],Aa=!!M[ra];Aa!==!!X[ra]&&(Z=!0,Aa?fa.add(ra):fa.remove(ra))}}else if("styles"===S)for(fa=Object.keys(M),ea=fa.length,S=0;S<ea;S++)ha=fa[S],ra=M[ha],ra!==X[ha]&&(Z=!0,ra?(m(ra),W.styleApplyer(I,ha,ra)):W.styleApplyer(I,ha,""));else(M||"string"!=typeof X||(M=""),"value"===S)?(fa=I[S],fa!==M&&(I["oninput-value"]?fa===I["oninput-value"]:M!==X)&&(I[S]=M,I["oninput-value"]=void 0),M!==X&&(Z=!0)):M!==X&&(X=typeof M,"function"===
X&&W.eventHandlerInterceptor||(W.namespace===c?"href"===S?I.setAttributeNS(u,S,M):I.setAttribute(S,M):"string"===X&&"innerHTML"!==S?"role"===S&&""===M?I.removeAttribute(S):I.setAttribute(S,M):I[S]!==M&&(I[S]=M),Z=!0))}return Z}}(K,F.properties,H.properties,J)||P,H.properties&&H.properties.afterUpdate&&H.properties.afterUpdate.apply(H.properties.bind||H.properties,[K,J,H.vnodeSelector,H.properties,H.children]);return P&&H.properties&&H.properties.updateAnimation&&H.properties.updateAnimation(K,H.properties,
F.properties),Q};var E=function(F,H){return{getLastRender:function(){return F},update:function(J){if(F.vnodeSelector!==J.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");var K=F;F=J;D(K,J,H)},domNode:F.domNode}},C={namespace:void 0,performanceLogger:function(){},eventHandlerInterceptor:void 0,styleApplyer:function(F,H,J){"-"===H.charAt(0)?F.style.setProperty(H,J):F.style[H]=J}},z={create:function(F,
H){return H=e(C,H),v(F,document.createElement("div"),void 0,H),E(F,H)},append:function(F,H,J){return J=e(C,J),v(H,F,void 0,J),E(H,J)},insertBefore:function(F,H,J){return J=e(C,J),v(H,F.parentNode,F,J),E(H,J)},merge:function(F,H,J){return J=e(C,J),H.domNode=F,x(F,H,J),E(H,J)},replace:function(F,H,J){return J=e(C,J),v(H,F.parentNode,F,J),F.parentNode.removeChild(F),E(H,J)}},w=function(F,H,J){for(var K=0,Q=H.length;K<Q;K++){var P=H[K];Array.isArray(P)?w(F,P,J):null!=P&&!1!==P&&("string"==typeof P&&(P=
{vnodeSelector:"",properties:void 0,children:void 0,text:P.toString(),domNode:null}),J.push(P))}};var A=Array.prototype.find?function(F,H){return F.find(H)}:function(F,H){return F.filter(H)[0]};var G=function(F,H){var J=F;return H.forEach(function(K){J=J&&J.children?A(J.children,function(Q){return Q.domNode===K}):void 0}),J};d.createCache=function(){var F,H;return{invalidate:function(){F=H=void 0},result:function(J,K){if(F)for(var Q=0;Q<J.length;Q++)F[Q]!==J[Q]&&(H=void 0);return H||(H=K(),F=J),H}}};
d.createMapping=function(F,H,J){var K=[],Q=[];return{results:Q,map:function(P){for(var I=P.map(F),N=Q.slice(),L=0,W=0;W<P.length;W++){var Z=P[W],aa=I[W];if(aa===K[L])Q[W]=N[L],J(Z,N[L],W),L++;else{for(var ia=!1,R=1;R<K.length+1;R++){var S=(L+R)%K.length;if(K[S]===aa){Q[W]=N[S];J(P[W],N[S],W);L=S+1;ia=!0;break}}ia||(Q[W]=H(Z,W))}}Q.length=P.length;K=I}}};d.createProjector=function(F){var H,J,K=e(C,F),Q=K.performanceLogger,P=!0,I=!1,N=[],L=[],W=function(aa,ia,R){K.eventHandlerInterceptor=function(M,
X,fa){function ea(ha){fa("domEvent",ha);for(var ra=X(),Aa=ha.currentTarget,Ea=ra.domNode,va=[];Aa&&Aa!==Ea;)va.push(Aa),Aa=Aa.parentNode;va.reverse();var Ga;ra=G(ra.getLastRender(),va);return M.scheduleRender(),ra&&(Ga=ra.properties["on".concat(ha.type)].apply(ra.properties.bind||this,arguments)),fa("domEventProcessed",ha),Ga}return function(ha,ra,Aa,Ea){return ea}}(H,function(){return S},Q);var S=aa(ia,R(),K);N.push(S);L.push(R)},Z=function(){if(J=void 0,P){P=!1;Q("renderStart",void 0);for(var aa=
0;aa<N.length;aa++){var ia=L[aa]();Q("rendered",void 0);N[aa].update(ia);Q("patched",void 0)}Q("renderDone",void 0);P=!0}};return H={renderNow:Z,scheduleRender:function(){J||I||(J=requestAnimationFrame(Z))},stop:function(){J&&(cancelAnimationFrame(J),J=void 0);I=!0},resume:function(){I=!1;P=!0;H.scheduleRender()},append:function(aa,ia){W(z.append,aa,ia)},insertBefore:function(aa,ia){W(z.insertBefore,aa,ia)},merge:function(aa,ia){W(z.merge,aa,ia)},replace:function(aa,ia){W(z.replace,aa,ia)},detach:function(aa){for(var ia=
0;ia<L.length;ia++)if(L[ia]===aa)return L.splice(ia,1),N.splice(ia,1)[0];throw Error("renderFunction was not found");}}};d.dom=z;d.h=function(F,H,J){if(Array.isArray(H))J=H,H=void 0;else if(H&&("string"==typeof H||H.vnodeSelector)||J&&("string"==typeof J||J.vnodeSelector))throw Error("h called with invalid arguments");var K,Q;return J&&1===J.length&&"string"==typeof J[0]?K=J[0]:J&&(w(F,J,Q=[]),0===Q.length&&(Q=void 0)),{vnodeSelector:F,properties:H,children:Q,text:""===K?void 0:K,domNode:null}};Object.defineProperty(d,
"__esModule",{value:!0})}(B)},64:function(f,B,l){function d(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];return function(t){return c.reduceRight(function(e,r){return r(e)},t)}}l.d(B,"a",function(){return d})},7:function(f,B,l){function d(h){return 0===Object.keys(h).length&&h.constructor===Object}function c(h){return null!=h}function u(h,q){return m.apply(null,arguments)}function t(h,q){return a.apply(null,arguments)}l.d(B,"b",function(){return d});l.d(B,"a",function(){return c});l.d(B,
"e",function(){return r});l.d(B,"c",function(){return u});l.d(B,"d",function(){return t});var e=l(1);f=l(15);var r=Object(f.a)(function(h,q){q=Object(e.a)({},q);return delete q[h],q}),m=Object(f.a)(function(h,q){return Object.keys(q).reduce(function(n,k){return n[k]=h(q[k],k,q),n},{})}),a=Object(f.a)(function(h,q){return Object.keys(q).reduce(function(n,k){return h(q[k],k,q)&&(n[k]=q[k]),n},{})})},772:function(f,B,l){function d(x,v,y,D){var E=new g({key:"root"},v);x&&(E.store=x);var C=Object(h.createProjector)(D);
v=Object(a.a)(Object(a.a)({},C),{append:function(z){return C.append(z,function(){return E.render.bind(E)(E.tsx.bind(E))})}});return v.append(y),x&&x.subscribe(function(){return C.scheduleRender()}),v}function c(x,v){return function(y){return function(D,E){return function(C,z){return E(y,Object(a.a)(Object(a.a)(Object(a.a)({},D),x(z(),D)),v(C,D)))}}}}function u(){for(var x=[],v=0;v<arguments.length;v++)x[v]=arguments[v];return function(y){return function(D,E){var C=y(D,E);D=q.a;var z=C.dispatch;E=
x.map(function(w){return w({dispatch:function(A){return z(A)},getState:C.getState})});return z=D.apply(void 0,E)(C.dispatch),Object(a.a)(Object(a.a)({},C),{dispatch:z})}}}function t(x){return function(v){return function(y,D){return v(function(E,C){if("@@shunt/SETSTATE"===C.type)return C.payload;E=y(E,C);return-1===C.type.indexOf("@@component/INIT")&&x(C,E),E},D)}}}function e(x){return function(v){v.dispatch;var y=v.getState;return function(D){return function(E){var C=D(E);return x(E,y()),C}}}}function r(x){var v=
Object(n.d)(function(y){return"function"==typeof y},x);return function(y,D){return void 0===y&&(y={}),Object(n.c)(function(E,C){return E(y[C],D)},v)}}function m(x,v){var y=v,D=[];v={dispatch:function(E){return y=x(y,E),D.forEach(function(C){return C()}),E},subscribe:function(E){return D.push(E),function(){D.splice(D.indexOf(E),1)}},getState:function(){return y}};return v.dispatch({type:"@@component/INIT"+Math.random().toString(36).substring(7)}),v}l.r(B);l.d(B,"createProjector",function(){return d});
l.d(B,"Component",function(){return k});l.d(B,"RootComponent",function(){return g});l.d(B,"connect",function(){return c});l.d(B,"applyMiddleware",function(){return u});l.d(B,"shunt",function(){return t});l.d(B,"thunk",function(){return b});l.d(B,"addListener",function(){return e});l.d(B,"combineReducers",function(){return r});l.d(B,"createStore",function(){return m});var a=l(1),h=l(423),q=l(64),n=l(7),k=function(){function x(v){this.childComponents={};this.state={};this.props=v}return x.prototype.componentDidConnect=
function(){},x.prototype.componentWillReceiveProps=function(v){},x.prototype.setState=function(v){this.state=Object(a.a)(Object(a.a)({},this.state),v);this.store&&this.store.dispatch({type:"".concat(this.props.key,"_COMPONENT_STATE_UPDATE")})},x.prototype.tsx=function(v,y,D){var E=Array.prototype.slice.call(arguments).slice(2);if("string"==typeof v)var C=h.h.apply(this,[v,y,E]);else if(v.prototype&&v.prototype.constructor.name){var z=v;E=Object(a.a)(Object(a.a)({},y),{children:E});var w=this.childComponents[E.key];
w?(w.componentWillReceiveProps(E),w.props=E,C=w.render(w.tsx.bind(w))):((w=this.childComponents[E.key]=new z(E)).store=this.store,w.componentDidConnect(),C=w.render(w.tsx.bind(w)))}else C=(z=v)(Object(a.a)(Object(a.a)({},y),{children:E}),this.tsx.bind(this));return"function"==typeof C?C(this.store.dispatch,this.store.getState):C},x}(),g=function(x){function v(y,D){y=x.call(this,y)||this;return y.renderRoot=D,y}return Object(a.d)(v,x),v.prototype.render=function(y){var D=this;return y(function(E,C){return D.renderRoot(C)})},
v}(k);void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){var x=/function\s([^(]{1,})\(/.exec(this.toString());return x&&1<x.length?x[1].trim():""},set:function(x){}});var b=function(x){var v=x.dispatch,y=x.getState;return function(D){return function(E){return"function"==typeof E?E(v,y):D(E)}}}}})})},"arcgis-components/InfoBanner/index":function(){define(["../Component"],function(f){return function(B){function l(c){if(d[c])return d[c].exports;
var u=d[c]={i:c,l:!1,exports:{}};return B[c].call(u.exports,u,u.exports,l),u.l=!0,u.exports}var d={};return l.m=B,l.c=d,l.d=function(c,u,t){l.o(c,u)||Object.defineProperty(c,u,{enumerable:!0,get:t})},l.r=function(c){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});Object.defineProperty(c,"__esModule",{value:!0})},l.t=function(c,u){if((1&u&&(c=l(c)),8&u)||4&u&&"object"==typeof c&&c&&c.__esModule)return c;var t=Object.create(null);if(l.r(t),
Object.defineProperty(t,"default",{enumerable:!0,value:c}),2&u&&"string"!=typeof c)for(var e in c)l.d(t,e,function(r){return c[r]}.bind(null,e));return t},l.n=function(c){var u=c&&c.__esModule?function(){return c.default}:function(){return c};return l.d(u,"a",u),u},l.o=function(c,u){return Object.prototype.hasOwnProperty.call(c,u)},l.p="",l(l.s=821)}({1:function(B,l,d){function c(q,n){function k(){this.constructor=q}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+
" is not a constructor or null");a(q,n);q.prototype=null===n?Object.create(n):(k.prototype=n.prototype,new k)}function u(q,n){var k={},g;for(g in q)Object.prototype.hasOwnProperty.call(q,g)&&0>n.indexOf(g)&&(k[g]=q[g]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var b=0;for(g=Object.getOwnPropertySymbols(q);b<g.length;b++)0>n.indexOf(g[b])&&Object.prototype.propertyIsEnumerable.call(q,g[b])&&(k[g[b]]=q[g[b]])}return k}function t(q,n,k,g){var b,x=arguments.length,v=3>x?n:null===g?
g=Object.getOwnPropertyDescriptor(n,k):g;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)v=Reflect.decorate(q,n,k,g);else for(var y=q.length-1;0<=y;y--)(b=q[y])&&(v=(3>x?b(v):3<x?b(n,k,v):b(n,k))||v);return 3<x&&v&&Object.defineProperty(n,k,v),v}function e(q,n,k,g){return new (k||(k=Promise))(function(b,x){function v(E){try{D(g.next(E))}catch(C){x(C)}}function y(E){try{D(g.throw(E))}catch(C){x(C)}}function D(E){var C;E.done?b(E.value):(C=E.value,C instanceof k?C:new k(function(z){z(C)})).then(v,
y)}D((g=g.apply(q,n||[])).next())})}function r(q,n){function k(D){return function(E){return function(C){if(g)throw new TypeError("Generator is already executing.");for(;v&&(v=0,C[0]&&(y=0)),y;)try{if(g=1,b&&(x=2&C[0]?b.return:C[0]?b.throw||((x=b.return)&&x.call(b),0):b.next)&&!(x=x.call(b,C[1])).done)return x;switch(b=0,x&&(C=[2&C[0],x.value]),C[0]){case 0:case 1:x=C;break;case 4:return y.label++,{value:C[1],done:!1};case 5:y.label++;b=C[1];C=[0];continue;case 7:C=y.ops.pop();y.trys.pop();continue;
default:if(!(x=y.trys,(x=0<x.length&&x[x.length-1])||6!==C[0]&&2!==C[0])){y=0;continue}if(3===C[0]&&(!x||C[1]>x[0]&&C[1]<x[3]))y.label=C[1];else if(6===C[0]&&y.label<x[1])y.label=x[1],x=C;else if(x&&y.label<x[2])y.label=x[2],y.ops.push(C);else{x[2]&&y.ops.pop();y.trys.pop();continue}}C=n.call(q,y)}catch(z){C=[6,z],b=0}finally{g=x=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([D,E])}}var g,b,x,v,y={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return v=
{next:k(0),throw:k(1),return:k(2)},"function"==typeof Symbol&&(v[Symbol.iterator]=function(){return this}),v}function m(q,n,k){if(k||2===arguments.length)for(var g,b=0,x=n.length;b<x;b++)!g&&b in n||(g||(g=Array.prototype.slice.call(n,0,b)),g[b]=n[b]);return q.concat(g||Array.prototype.slice.call(n))}d.d(l,"d",function(){return c});d.d(l,"a",function(){return h});d.d(l,"f",function(){return u});d.d(l,"c",function(){return t});d.d(l,"b",function(){return e});d.d(l,"e",function(){return r});d.d(l,"g",
function(){return m});var a=function(q,n){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,g){k.__proto__=g}||function(k,g){for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&(k[b]=g[b])})(q,n)},h=function(){return(h=Object.assign||function(q){for(var n,k=1,g=arguments.length;k<g;k++)for(var b in n=arguments[k])Object.prototype.hasOwnProperty.call(n,b)&&(q[b]=n[b]);return q}).apply(this,arguments)};Object.create;Object.create},17:function(B,l){B.exports=f},821:function(B,
l,d){d.r(l);var c=d(1);B=function(u){function t(e){return u.call(this,e)||this}return Object(c.d)(t,u),t.prototype.render=function(e){var r=this.props.position,m=this.props.bannerConfig,a=m.text,h=m.fontColor;return e("div",{classes:{"info-banner":!0,"info-banner--top":"top"===r,"info-banner--bottom":"bottom"===r},style:"background-color: ".concat(m.bgColor,"; color: ").concat(h)},e("p",{class:"info-banner-text"},a))},t}(d(17).Component);l.default=B}})})},"arcgisonline/pages/components/StatusBanner":function(){define(["require",
"exports","preact"],function(f,B,l){Object.defineProperty(B,"__esModule",{value:!0});B.default=function(d){var c=d.strings,u=d.link,t=d.onAction;d=function(e){if(!e.defaultPrevented&&"status-banner__link"===e.target.id)switch(e.key){case "Enter":null===t||void 0===t?void 0:t(e),e.preventDefault()}};return(0,l.h)("div",{class:"status-banner status-banner__danger text-center"},(0,l.h)("div",{class:"status-banner__wrapper leader-half padding-trailer-half grid-container"},(0,l.h)("calcite-icon",{icon:"exclamation-mark-triangle",
class:"status-banner-icon__danger leader-quarter",scale:"s"}),(0,l.h)("span",{class:"status-banner__title margin-left-half margin-right-half"},(0,l.h)("strong",null,c.title)),(0,l.h)("span",{class:"status-banner__message margin-right-half"},c.message),c.learnMore&&u?(0,l.h)("a",{class:"status-banner_link",href:u,target:"_blank",id:"status-banner__link"},c.learnMore," ",(0,l.h)("calcite-icon",{icon:"launch",scale:"s",class:"status-banner__link-icon margin-left-half margin-right-half"})):null,c.action&&
t?(0,l.h)("a",{class:"status-banner_link",onClick:t,onKeyUp:d,id:"status-banner__link",tabIndex:0},c.action):null))}})},"arcgisonline/pages/organization/widgets/GroupIcon":function(){define("require exports tslib dojo/text!./templates/_groupIcon.html dijit/_TemplatedMixin dijit/_WidgetBase ../../portal/PortalGroup ../../utils/dom ../../../tsutils/declareDecorator".split(" "),function(f,B,l,d,c,u,t,e,r){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);
r=l.__importDefault(r);return function(){function m(a,h){this.templateString=d.default;this.scale="l";this._tooltip=null===a||void 0===a?void 0:a.tooltip}m.prototype.postMixInProperties=function(){this.inherited(arguments);this._group=new t.default(l.__assign(l.__assign({},this.group),{portal:this.portal}))};m.prototype.postCreate=function(){var a=e.default.createElement("arcgis-group-thumbnail",{group:this._group,portal:this.portal,scale:this.scale,tooltip:this._tooltip},this.domNode.querySelector(".js-group-thumbnail"));
this.cssClasses&&a.classList.add(this.cssClasses)};return m=l.__decorate([(0,r.default)(u.default,c.default)],m)}()})},"arcgisonline/pages/utils/notifications":function(){define("require exports tslib moment/moment dojo/promise/all dojo/Deferred dojo/string dojo/_base/kernel ../../esriGeowConfig ../../sharing/util ./date dojo/i18n!../../nls/arcgisonline".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h){function q(n){n="".concat(r.default.restBaseUrl,"community/users/").concat(n.username,"/notifications/").concat(n.id,
"/delete");return m.default.request({url:n},{usePost:!0})}d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);return{fetchNotifications:function(n,k){n=n.username||n.email;if(!n)return n=new u.default,n.resolve([]),n;n="".concat(r.default.restBaseUrl,"community/users/").concat(n,"/notifications");return m.default.request({url:n}).then(function(g){return(g.notifications||
[]).map(function(b){var x=b.received,v=b.id,y=e.default.locale?e.default.locale.substring(0,2):"en";b&&b.received&&b.id?(x={date:"en"===y?(0,d.default)(x).fromNow():a.default.format(new Date(x),"day-short-month-year-short-time"),id:v,text:""},"webapp_not_copied"===b.type&&k.isPortal&&(b.type="webapp_not_copied_portal"),h.default.notifications.types[b.type]&&(b.data.baseUrl=r.default.baseUrl,x.text=t.default.substitute(h.default.notifications.types[b.type],b.data)),"message_received"===b.type&&b.data&&
b.data.message&&(x.text=b.data.message),b=x.text&&x):b=null;return b}).filter(function(b){return b})})},deleteNotifications:function(n,k){k=k.map(function(g){return{username:n.username,id:g}}).map(q);return(0,c.default)(k)}}})},"arcgisonline/pages/utils/notebook":function(){define("require exports tslib ../../esriGeowConfig ../pageUtil ./signin ../../sharing/util ../../sharing/dijit/dialog/GeneralDlg dojo/Deferred dojo/request dojo/promise/all dojo/on dojo/string esri/lang esri/request dojo/i18n!../../nls/arcgisonline dojo/i18n!../../nls/notebooks".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);q=l.__importDefault(q);n=l.__importDefault(n);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);return function(){function x(){}x.notebookServerConfigured=function(){var v,y,D;if(null===(v=d.default.self)||void 0===v?0:v.isPortal)return d.default.notebookServerEnabled&&
d.default.self.supportsHostedNotebooks?!0:!1;v=-1!==["Trial Developer","Trial","Trial Press","Developer Subscription"].indexOf(null===(y=d.default.self.subscriptionInfo)||void 0===y?void 0:y.type);return d.default.notebookServerEnabled&&(!v||-1!==((null===(D=d.default.self)||void 0===D?void 0:D.allowedBetaFeatures)||[]).indexOf("notebooks"))};x.closeNotebook=function(v,y){y=y.split("/");var D=y[y.length-3],E=y[y.length-1].replace(".ipynb","");D&&E&&x.notebookRequest("".concat(v,"/admin/system/containers/").concat(D,
"/notebooks"),"GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(C){var z;if(null===(z=C.notebooks)||void 0===z?0:z.length)C=C.notebooks.filter(function(w){return w.itemId===E}),C.length&&x.closeNotebookRequest(v,D,C[0].id)})};x.closeNotebookRequest=function(v,y,D){return x.notebookRequest("".concat(v,"/admin/system/containers/").concat(y,"/notebooks/").concat(D,"/closeNotebook"),"POST",null,{useJsonFormatParam:!0,useCredentials:!0})};x.getNotebookServer=function(){var v=new r.default;
(d.default.portal||d.default.self).isPortal?d.default.userInfo?d.default.portal.getFederatedServers().then(function(y){var D;n.default.isDefined(null===(D=null===y||void 0===y?void 0:y.servers)||void 0===D?void 0:D.length)?(y=y.servers.filter(function(E){return"ARCGIS_NOTEBOOK_SERVER"===E.serverType&&"NotebookServer"===E.serverFunction}),y.length?(y=y[0],y.adminContext="/admin",v.resolve(y)):v.resolve(null)):v.resolve(null)},function(y){v.resolve(null)}):v.resolve(null):t.default.request({url:"".concat(d.default.restBaseUrl,
"portals/self/urls")}).then(function(y){var D,E;(y=null===(E=null===(D=null===y||void 0===y?void 0:y.urls)||void 0===D?void 0:D.notebooks)||void 0===E?void 0:E.https)?v.resolve({url:"https://".concat(y),adminContext:""}):v.resolve(null)},function(y){v.resolve(null)});return v};x.notebooksBetaFormatter=function(v){return v};x.buildSelfSignedErrorMessage=function(v,y,D){v.messageHTML="\n      \x3ch4\x3e\n        ".concat(D?b.default.notebookViewer.openNotebookServerCertificateError:b.default.notebookViewer.openNotebookCertificateError,
"\n      \x3c/h4\x3e\n      \x3cp\x3e\n        ").concat(b.default.notebookViewer.openNotebookCertificateErrorDescription,"\n      \x3c/p\x3e\n      \x3col\x3e\n        \x3cli\x3e\n          ").concat(b.default.notebookViewer.openNotebookCertificateErrorStep1,'\n          \x3ca href\x3d"').concat("".concat(y.url).concat(y.adminContext),'" target\x3d"_blank" \x3e\n            ').concat("".concat(y.url).concat(y.adminContext),"\n          \x3c/a\x3e\n        \x3c/li\x3e\n        \x3cli\x3e").concat(b.default.notebookViewer.openNotebookCertificateErrorStep2,
"\x3c/li\x3e\n        \x3cli\x3e").concat(b.default.notebookViewer.openNotebookCertificateErrorStep3,"\x3c/li\x3e\n      \x3c/ol\x3e")};x.getNotebookServerMachines=function(v){var y=new r.default,D=[],E={useJsonFormatParam:!0,useCredentials:!0};x.notebookRequest("".concat(v,"/admin/machines/"),"GET",null,E).then(function(C){C=(null===C||void 0===C?void 0:C.machines)||[];C.length?(C.forEach(function(z){var w=new r.default;(0,a.default)({hardware:x.getNotebookServerMachineHardware(v,z,E),health:x.getNotebookServerMachineHealth(v,
z,E)}).then(function(A){w.resolve({machineName:z.machineName,hardware:A.hardware,health:A.health})});D.push(w)}),(0,a.default)(D).then(function(z){y.resolve(z)})):y.resolve([])});return y};x.getNotebookServerMachineHardware=function(v,y,D){var E=new r.default;x.notebookRequest("".concat(v,"/admin/machines/").concat(y.machineName,"/hardware"),"GET",null,D).then(function(C){E.resolve(C)},function(C){E.resolve({error:C})});return E};x.getNotebookServerMachineHealth=function(v,y,D){var E=new r.default;
x.notebookRequest("".concat(v,"/admin/machines/").concat(y.machineName,"/status"),"GET",null,D).then(function(C){E.resolve(C)},function(C){E.resolve({error:C})});return E};x.getNotebookServerOS=function(v){var y=new r.default,D={useJsonFormatParam:!0,useCredentials:!0};x.notebookRequest("".concat(v,"/admin/machines/"),"GET",null,D).then(function(E){((null===E||void 0===E?void 0:E.machines)||[]).length?(E=E.machines[0].machineName,x.notebookRequest("".concat(v,"/admin/machines/").concat(E,"/hardware"),
"GET",null,D).then(function(C){C=-1!==(C.os||"").toLowerCase().indexOf("windows")?"windows":"linux";y.resolve(C)},function(C){y.reject(C)})):y.reject()});return y};x.getNotebookRuntimes=function(v){var y=new r.default;x.getNotebookServer().then(function(D){null!==D?x.getNotebookRuntimesBase(D.url).then(function(E){v?y.resolve({runtimes:E.runtimes,server:D}):y.resolve(E.runtimes)},function(E){y.reject(E)}):y.reject()});return y};x.getNotebookRuntimesBase=function(v){return x.notebookRequest("".concat(v,
"/admin/notebooks/runtimes"),"GET",null,{useJsonFormatParam:!0,useCredentials:!0})};x.getNotebookRuntimeInfo=function(v,y){var D=this,E=new r.default;v&&y?this.getNotebookRuntimes(!0).then(function(C){var z=C.runtimes.filter(function(w){return w.name.toLowerCase()===v.toLowerCase()&&w.version.toLowerCase()===y.toLowerCase()});1!==z.length?E.reject():(z=z[0].id,D.notebookRequest("".concat(C.server.url,"/admin/notebooks/runtimes/").concat(z,"/manifest"),"GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(w){E.resolve(w)},
function(w){E.reject(w)}))},function(C){E.reject(C)}):E.reject();return E};x.startNotebookServerPoller=function(){return window.setInterval(function(){x.getNotebookServerInfo()},6E5)};x.getNotebookServerInfo=function(){var v=new r.default;x.getNotebookServer().then(function(y){null!==y?x.pingNotebookServer(y.url).then(function(D){v.resolve(D)},function(D){v.reject(D)}):v.reject()});return v};x.pingNotebookServer=function(v){var y=new r.default;x.notebookRequest("".concat(v,"/rest/info"),"GET",null,
{useJsonFormatParam:!0,useCredentials:!0}).then(function(D){y.resolve(D)},function(D){y.reject(D)});return y};x.getSampleNotebooksGroup=function(){var v=new r.default,y=d.default.self&&d.default.self.isPortal?"esri sample notebooks":"arcgis sample notebooks",D="".concat(d.default.restBaseUrl,"community/groups"),E={q:"title:(".concat(y,') AND owner:"').concat("esri_notebook",'"')};t.default.request({url:D,content:E}).then(function(C){C=(C.results||[]).filter(function(z){return(z.title||"").toLowerCase()===
y});1===C.length?v.resolve({id:C[0].id}):v.resolve({id:null})},function(C){v.resolve({id:null})});return v};x.getSampleNotebooksUrl=function(){var v=new r.default;x.getSampleNotebooksGroup().then(function(y){y.id&&(y="".concat(d.default.baseUrl,"group.html?id\x3d").concat(y.id,"#content"),v.resolve(y))});return v};x.getSampleNotebooks=function(){var v=new r.default;x.getSampleNotebooksGroup().then(function(y){y.id?(y="".concat(d.default.restBaseUrl,"content/groups/").concat(y.id),t.default.request({url:y}).then(function(D){v.resolve({items:(D.items||
[]).filter(function(E){return"notebook"===(E.type||"").toLowerCase()})})},function(D){v.resolve({items:[]})})):v.resolve({items:[]})});return v};x.getAllNotebooks=function(v){var y=new r.default;x.notebookRequest("".concat(v,"/admin/notebooks"),"GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(D){y.resolve(D)},function(D){y.reject({error:D})});return y};x.getNotebookServerDirectories=function(v){var y=new r.default;x.notebookRequest("".concat(v,"/admin/system/directories"),"GET",
null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(D){y.resolve(D)},function(D){y.resolve({error:D})});return y};x.deleteDataDirectory=function(v,y){var D=new r.default;x.notebookRequest("".concat(v,"/admin/system/directories/").concat(y,"/unregister"),"POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(E){D.resolve(E)},function(E){D.resolve({error:E})});return D};x.deleteNotebookRuntime=function(v,y){var D=new r.default;x.notebookRequest("".concat(v,"/admin/notebooks/runtimes/").concat(y,
"/unregister"),"POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(E){D.resolve(E)},function(E){D.resolve({error:E})});return D};x.getAllContainers=function(v){var y=new r.default,D={allUsers:d.default.userRole.isAdmin()};x.notebookRequest("".concat(v,"/admin/system/containers"),"GET",D,{useJsonFormatParam:!0,useCredentials:!0}).then(function(E){y.resolve(E)},function(E){y.resolve({error:E})});return y};x.terminateContainer=function(v,y){var D=new r.default;x.notebookRequest("".concat(v,
"/admin/system/containers/").concat(y,"/terminateContainer"),"POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(E){D.resolve(E)},function(E){D.resolve({error:E})});return D};x.getNotebookServerLogs=function(v,y){var D=new r.default;x.notebookRequest("".concat(v,"/admin/logs/query"),"GET",y,{useJsonFormatParam:!0,useCredentials:!0}).then(function(E){D.resolve(E)},function(E){D.resolve({error:E})});return D};x.deleteNotebookServerLogs=function(v){var y=new r.default;x.notebookRequest("".concat(v,
"/admin/logs/clean"),"POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(D){y.resolve(D)},function(D){y.reject({error:D})});return y};x.createNotebookRuntimeProperties=function(v,y,D){void 0===D&&(D=null);D=D||y.value;v=v.filter(function(E){return E.id===D})[0];return JSON.stringify({notebookRuntimeName:v.name,notebookRuntimeVersion:v.version})};x.formatNotebookRuntimeVersion=function(v){return{"10.7":"1.0","10.7.0":"1.0","10.7.1":"2.0","10.8":"3.0","10.8.0":"3.0","10.8.1":"4.0"}[v]||
v};x.showRuntimeInfo=function(v,y,D){var E=D.target;"runtime-button"===(null===E||void 0===E?void 0:E.name)&&(E.disabled=!0);D.stopPropagation();D.preventDefault();v=v||D.currentTarget.dataset.runtimeName;y=y||D.currentTarget.dataset.runtimeVersion;var C="".concat(v).concat(y?" - ".concat(x.formatNotebookRuntimeVersion(y)):""),z=c.default.createSpecifiedDialog(e.default);z._dialog.domNode.classList.add("notebook__runtime-info-dialog");x.getNotebookRuntimeInfo(v,y).then(function(w){w=x.buildRuntimeInfoTable(w,
C);z.show({title:C,content:w})},function(w){z.show({title:g.default.generalDlg.errorDlgTitle,message:b.default.notebookViewer.tabContent.info.runtimeInfoError})});h.default.once(z,"hide",function(){z.destroyRecursive();"runtime-button"===(null===E||void 0===E?void 0:E.name)&&(E.disabled=!1)})};x.buildRuntimeInfoTable=function(v,y){var D=document.createElement("div");if((v.libraries||[]).length){var E=document.createElement("p");E.innerHTML=q.default.substitute(b.default.notebookViewer.tabContent.info.runtimeMessage,
[y]);D.appendChild(E);y=document.createElement("table");y.classList.add("table");D.appendChild(y);var C=document.createElement("thead");y.appendChild(C);E=document.createElement("tr");C.appendChild(E);C=document.createElement("th");C.innerHTML=b.default.notebookViewer.tabContent.info.name;E.appendChild(C);C=document.createElement("th");C.innerHTML=b.default.notebookViewer.tabContent.info.version;E.appendChild(C);var z=document.createElement("tbody");y.appendChild(z);v.libraries.forEach(function(w){var A=
document.createElement("tr");z.appendChild(A);var G=document.createElement("td");G.innerHTML=w.name;A.appendChild(G);G=document.createElement("td");G.innerHTML=w.version;A.appendChild(G)})}else v=document.createElement("p"),v.innerHTML=q.default.substitute(b.default.notebookViewer.tabContent.info.runtimeMessageNoManifest,[y]),D.appendChild(v);return D.outerHTML};x.getContainerLogs=function(v,y){return x.notebookRequest("".concat(v,"/admin/system/containers/").concat(y,"/logs"),"POST",null,{useJsonFormatParam:!0,
useCredentials:!0})};x.getContainerInformation=function(v,y){var D=new r.default,E={useJsonFormatParam:!0,useCredentials:!0};(0,a.default)({containerInfo:x.notebookRequest("".concat(v,"/admin/system/containers/").concat(y),"GET",null,E),containerStats:x.notebookRequest("".concat(v,"/admin/system/containers/").concat(y,"/statistics"),"GET",null,E)}).then(function(C){D.resolve(C)},function(C){D.reject(C)});return D};x.createRuntimeSelect=function(v,y,D,E){void 0===E&&(E=!1);v=v||[];v.sort(function(w,
A){return A.esriProvidedRuntime-w.esriProvidedRuntime});var C=d.default.userRole.canCreateAdvancedNotebooks();C||(v=v.filter(function(w){return!w.requiresAdvancedPrivileges}));var z={esriProvided:0,custom:0};v.forEach(function(w){var A={value:E?x.createNotebookRuntimeProperties(v,null,w.id):w.id,innerHTML:"".concat(w.name).concat(w.version?" - ".concat(x.formatNotebookRuntimeVersion(w.version)):"")};if(x.formatNotebookRuntimeVersion(y)===x.formatNotebookRuntimeVersion(w.version)||!w.esriProvidedRuntime){w.esriProvidedRuntime?
(z.esriProvided++,C?w.requiresAdvancedPrivileges&&!w.supportsGPU&&(A.selected=""):A.selected=""):z.custom++;var G=document.createElement("option");Object.keys(A).forEach(function(F){G.setAttribute(F,A[F])});D.appendChild(G)}});return z};x.showNotebookPreview=function(v,y,D){var E=new r.default;y="".concat(d.default.restBaseUrl,"content/items/").concat(y,"/resources/").concat(D);t.default.request({url:y,content:{"request.preventCache":+new Date}},{useProxy:t.default.shouldUseProxy(y)}).then(function(C){if(C.html){var z=
v.contentWindow.document;z.open();z.write(C.html);z.close();E.resolve({success:!0})}else E.resolve({success:!1,error:C.error})},function(C){E.resolve({success:!1,error:C})});return E};x.canScheduleNotebooks=function(v,y){var D=new r.default,E="Notebook"===(null===y||void 0===y?void 0:y.type),C=x.notebookServerConfigured();E&&C&&x.getNotebookRuntimes().then(function(z){var w,A,G,F=null===(w=y.properties)||void 0===w?void 0:w.notebookRuntimeName,H=x.formatNotebookRuntimeVersion(null===(A=y.properties)||
void 0===A?void 0:A.notebookRuntimeVersion);z=(z||[]).some(function(J){return F===J.name&&H===x.formatNotebookRuntimeVersion(J.version)&&"1.0"!==H&&"2.0"!==H});(null===(G=null===v||void 0===v?void 0:v.userRole)||void 0===G?0:G.canScheduleNotebooks())&&(null===y||void 0===y?0:y.isOwner)&&z&&document.body.classList.add("can-schedule-notebooks");D.resolve(!0)},function(z){D.resolve(!1)});return D};x.getNotebooksInContainer=function(v,y){return x.notebookRequest("".concat(y,"/admin/system/containers/").concat(v,
"/notebooks"),"POST",null,{useJsonFormatParam:!0,useCredentials:!0})};x.getNotebookDataAccessUrl=function(v){return t.default.request({url:"".concat(d.default.restBaseUrl,"content/users/").concat(v,"/generateDirectAccessUrl"),content:{storeType:"notebookWorkspace"}},{usePost:!0})};x.getParametersJson=function(v){return new Promise(function(y,D){t.default.request({url:v,content:{ts:Date.now()}}).then(function(E){E=l.__spreadArray(l.__spreadArray([],E.inputs.map(function(C){C.direction="input";return C}),
!0),E.outputs.map(function(C){C.direction="output";return C}),!0);E.forEach(function(C,z){C.idx=z});y({initialized:!0,parameters:E})},function(E){404===E.code?y({initialized:!1,parameters:[]}):D(E)})})};x.checkIfWebToolsPublished=function(v){var y="".concat(d.default.restBaseUrl,"content/items/").concat(v,"/relatedItems?relationshipType\x3dNotebook2WebTool");return new Promise(function(D,E){t.default.request({url:y}).then(function(C){C.error&&E(C.error.message);return 0<C.total?D(C.relatedItems[0]):
D(null)},function(C){E(C)})})};x.publishAsWebtool=function(v,y){return x.notebookRequest("".concat(v,"/admin/services/createService"),"POST",y,{useJsonFormatParam:!0,useCredentials:!0})};x.getOpenNotebookToken=function(){return(0,k.default)({url:t.default.getSecureUrl("".concat(d.default.restBaseUrl,"oauth2/platformSelf")),content:{f:"json"},headers:{"X-Esri-Auth-Client-Id":u.default.clientIds.ArcGISNotebooks,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},withCredentials:!0},
{disableIdentityLookup:!0,usePost:!0}).then(function(v){return v.token},function(){return""})};x.notebookRequest=function(v,y,D,E){E=E||{};var C={},z={"X-Requested-With":null},w=d.default.userInfo?d.default.userInfo.credential.token:null;if(null===D||void 0===D?0:D.token)w=D.token,delete D.token;E.useJsonFormatParam&&(C.f="json");"GET"===y&&(C=l.__assign(l.__assign({},C),D));E.bypassCustomHeaders||(z["X-Esri-Authorization"]="Bearer ".concat(w),E.useJsonBody&&(z["Content-Type"]="application/json"));
E.contentType&&(z["Content-Type"]=E.contentType);C={data:E.useJsonBody?D?JSON.stringify(D):null:D,method:y,handleAs:"json",headers:Object.keys(z).length?z:null,query:Object.keys(C).length?C:null,preventCache:!1===E.preventCache?!1:!0,withCredentials:E.bypassCustomHeaders?!1:!0};z={url:v};"multipart/form-data"===E.contentType?z.form=D:z.content=D;return E.useProxy?t.default.request(z,{usePost:"POST"===y,useProxy:E.useProxy}):(0,m.default)(v,C)};return x}()})},"arcgisonline/sharing/geow/Geow":function(){define("require exports tslib ../../esriGeowConfig ../../telemetry ../../map/utils/deleteMapStorageNoFeedback ../util ./Community ../../pages/utils/storage dojo/Deferred dojo/dom-construct dojo/topic dojo/_base/window esri/IdentityManager ../../pages/utils/queryHandler".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);q=l.__importDefault(q);n=l.__importDefault(n);k=l.__importStar(k);return function(){function g(){}g.generatetoken=function(b,x,v){var y="".concat(d.default.restBaseUrl.replace("http:","https:"),"generatetoken"),D=document.domain,E=D.split(".");1<E.length&&
(D="".concat(E[E.length-2],".").concat(E[E.length-1]));b.referer=D;this._tokenExpiration=b.expiration;t.default.postJson(b,y,x,v)};g.signup=function(b,x,v){var y="".concat(d.default.restBaseUrl,"community/signup"),D=document.domain,E=D.split(".");1<E.length&&(D="".concat(E[E.length-2],".").concat(E[E.length-1]));b.referer=D;t.default.postJson(b,y,x,v)};g.signin=function(b,x,v){this.generatetoken(b,g.signInHandler(b.username,x,v),v)};g.signInHandler=function(b,x,v,y,D){var E=new Date,C=new Date(E.setMinutes(E.getMinutes()+
(this._tokenExpiration||120)));b="".concat(d.default.restBaseUrl,"community/users/").concat(b,"?token\x3d").concat(y.token);t.default.getJson(t.default.useSSL(b),function(z){z.culture&&(z.culture=z.culture.toLowerCase());var w={email:z.username,username:z.username,privacy:z.privacy,token:y.token,ssl:y.ssl,culture:z.culture,region:z.region,expires:C.getTime()};z.orgId&&z.role&&(w.accountId=z.orgId,w.role=z.role);d.default.userInfo=l.__assign(l.__assign({},d.default.userInfo),w);if(z.preferredView&&
null!==z.preferredView)t.default.userPreferences({contentMode:z.preferredView},d.default.contentModeCookieName);else{var A=t.default.userPreferences(null,d.default.contentModeCookieName);if(null===A||void 0===A?0:A.contentMode){var G=a.default.create,F=G("form",{method:"POST"},q.default.body());G("input",{type:"hidden",name:"preferredView",value:A.contentMode},F);G("input",{type:"hidden",name:"clearEmptyFields",value:"false"},F);e.default.updateProfile(F,function(){})}}w=l.__assign(l.__assign({},
w),z);x&&x(w,D);h.default.publish("onSignIn",[w])},v)};g.signInHandler2=function(b,x,v){x="".concat(d.default.restBaseUrl,"community/users/").concat(b.username,"?token\x3d").concat(b.token);v=new Date;var y=Number(b.expires_in),D=new Date(v.setSeconds(v.getSeconds()+Number(y))),E=b&&!!b.ssl;return t.default.getJson(t.default.useSSL(x)).then(g._hasSecurityQuestion.bind(g)).then(function(C){var z,w={email:C.username,username:C.username,privacy:C.privacy,token:b.token,culture:(null===(z=C.culture)||
void 0===z?void 0:z.toLowerCase())||"",region:C.region,expires:D&&D.getTime()||null,persistent:b.persist?!0:void 0,allSSL:E};C.orgId&&C.role&&(w.accountId=C.orgId,w.role=C.role);d.default.userInfo=l.__assign(l.__assign({},d.default.userInfo),w);C.preferredView&&t.default.userPreferences({contentMode:C.preferredView},d.default.contentModeCookieName);w=l.__assign(l.__assign({},w),C);h.default.publish("onSignIn",[w]);return w})};g._hasSecurityQuestion=function(b){var x=new m.default;b.validateUserProfile=
!0;if(!b||b.idpUsername||"arcgisonly"!==b.userType&&"both"!==b.userType||!b.validateUserProfile)x.resolve(b);else return x="".concat(d.default.restBaseUrl,"community/users/").concat(b.username,"/forgotPassword"),t.default.request({url:x,content:{}}).then(function(v){v&&"enterprise"!==v.provider&&-1===v.securityQuestionIdx&&(b.noSecurityQuestion=!0);return b});return x};g.signout=function(b){var x,v,y=null===(x=d.default.userInfo)||void 0===x?void 0:x.token;x=0===window.location.href.indexOf("http://");
d.default.userInfo=null;d.default.userPreferences=null;n.default.destroyCredentials();r.default.removeSessionStorageItem("portalAppClientId");r.default.removeLocalStorageItem("portalAppClientId");(0,u.default)().then(function(){h.default.publish("onSignOut",[])});var D;b&&(D={client_id:"arcgisonline",redirect_uri:b});y&&d.default.self&&x&&(d.default.self.isPortal||"enterprise"===(null===(v=d.default.self.user)||void 0===v?void 0:v.provider))&&(D=l.__assign(l.__assign({},D||{}),{token:y}));b=b||window.location.href;
b=t.default.getSecureUrl("".concat(d.default.restBaseUrl,"oauth2/signout"));window.location.href="".concat(b).concat(D?"?".concat(k.objectToQuery(D)):"")};g.getSharedCookie=function(){var b=n.default,x={};b&&(b=(b._getAllCookies("esri_auth")||[]).map(function(v){return JSON.parse(v)}).filter(function(v){return!v.portalApp}),x=(null===b||void 0===b?0:b.length)?b.shift():{});return x};g._logCookieChange=function(b,x){b=c.default.init({config:b});!this._cookieChangeLogged&&(null===b||void 0===b?0:b.logEvent)&&
(this._cookieChangeLogged=!0,b.logEvent({category:"cookie",label:"Organization changed",details:x?"Yes":"No"}))};g.setCookies=function(b,x){b.isPortal||d.default.isDebug||!b.urlKey||-1!==window.location.hostname.toLowerCase().indexOf(b.urlKey.toLowerCase())||x&&"arcgisonline"!==x||(window.location.href=window.location.href.replace(window.location.hostname,"".concat(b.urlKey,".").concat(b.customBaseUrl)))};return g}()})},"arcgisonline/map/utils/deleteMapStorageNoFeedback":function(){define(["require",
"exports","tslib","dojo/Deferred"],function(f,B,l,d){Object.defineProperty(B,"__esModule",{value:!0});d=l.__importDefault(d);B.default=function(){var c=new d.default;sessionStorage.removeItem("Esri_webmap");c.resolve(!0);return c}})},"arcgisonline/sharing/dijit/Webworker/_AppLauncher":function(){define("require exports tslib ../../../esriGeowConfig ../../../pages/components/ManageBlockedApps/blocked-apps-service ../../../pages/portal/LicenseInfo ../../../pages/utils/storage ../../util dojo/_base/lang dojo/Deferred dojo/promise/all dojo/sniff esri/request dojo/i18n!../../../nls/arcgisonline".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);q=l.__importDefault(q);n=l.__importDefault(n);return function(){function k(g,b){var x;this._browserIsEdge=!1;this.appIconPath="/css/images/app-icons/";this.basePath="js/arcgisonline/sharing/dijit";this._portal=g;this._portalUser=this._portal.portalUser||this._portal.user;
this._self=d.default.self||g;this._userProperties=b;this.userToken=(null===(x=g.credential)||void 0===x?void 0:x.token)||g.token;d.default.userInfo&&d.default.userInfo.isLicensed||this.fetchAndSetupLicenseInfo();this.imgDir=e.default.relativeToExplicitUrl("".concat(this.basePath).concat(this.appIconPath));this.appSwitcherInConfig=d.default.appSwitcherConfigItemQuery?!0:null;this.__displayIntro=!1}k.prototype.getApps=function(g){var b=this;g&&g.noStrings||!n.default||(this.i18n=l.__assign({},n.default.appSwitcher),
this._clearText=n.default.configAGOLUtilServices.clear);return this.queryItems().then(function(x){b.appSwitcherConfig=x.results[0];return b.refreshApps()})};k.prototype.refreshApps=function(g){var b=this;return this._queryItemsAndInitApps(this.appSwitcherConfig,null,null,g).then(function(x){return(new m.default).resolve({provisionedListings:x.provisionedListings,willQueryForItems:x.willQueryForItems})}).then(function(x){return b._init(x.provisionedListings,x.willQueryForItems)})};k.prototype.setApps=
function(g){if("string"===typeof g)try{g=JSON.parse(g)}catch(x){return(new m.default).resolve({success:!1})}if(this._appArraysAreValid(g.primaryApps,g.secondaryApps)){var b=g.revisions||{};return this._saveAppOrderToUserProperties(this.populateDataIdAttributes(g.primaryApps,b.targetUid,b.isNew&&"isNew",b.targetValue||!1),this.populateDataIdAttributes(g.secondaryApps))}return(new m.default).resolve({success:!1})};k.prototype._appArraysAreValid=function(g,b){return g&&b&&Array.isArray(g)&&Array.isArray(b)?
g.length+b.length>=this._minNumberOfAppsToSave:!1};k.prototype.fetchAndSetupLicenseInfo=function(){var g=this,b=new m.default;u.default.isOrgUser=this._portalUser&&this._portalUser.orgId;u.default.portal=this._portal;u.default.portal.user=u.default.portal.user||this._portalUser;return u.default.getLicenseInfo().then(function(){g._portalUser&&(d.default.userInfo=r.default.mixin(g._portalUser,u.default));return b.resolve(!0)})};k.prototype.queryItems=function(g,b){return this.portalQueryItems(d.default.appSwitcherConfigItemQuery,
1)};k.prototype._queryItemsAndInitApps=function(g,b,x,v){var y=this,D;g.itemDataUrl=this.formatUrlWithToken("".concat(this._portal.portalUrl,"content/items/").concat(g.id,"/data"));this._browserInUse=this._getBrowserInUse();this.__changedApp=b&&x?b:null;var E=!this._cookieForQueryingItemsExists(),C=new m.default;if(null===(D=this._portalUser)||void 0===D?0:D.orgId)return(0,a.default)({config:(0,q.default)({url:g.itemDataUrl,content:{f:"json"}}),marketplace:this._getMarketPlaceProvisionedListings(v),
preferences:this._getUserProperties(),customOrgApps:this._getApprovedApps()}).then(function(z){var w;y.userProperties=z.preferences.properties||{};y.userApps=z.config.appSwitcher;y._self.isPortal||y.userApps.apps.unshift(y._getAgoApp());y.approvedApps=(null===(w=z.customOrgApps.approvedApps)||void 0===w?void 0:w.filter(function(A){return!A.hideForNonPrivilegedMember}))||[];y.userProperties.appLauncher||(E=!1,y.__displayIntro=!0);return C.resolve({provisionedListings:z.marketplace,willQueryForItems:E})})};
k.prototype._filterBlockedApps=function(g){var b=this;return g.filter(function(x){var v;return!(null===(v=b._blockedApps)||void 0===v?0:v.some(function(y){return x.itemId&&x.itemId===y.itemid||x.title&&x.title===y.title}))})};k.prototype._mapAppTitles=function(g){var b=this._self.isPortal,x={"Map Viewer Beta":{value:"Map Viewer"},"Operations Dashboard for ArcGIS":{value:"ArcGIS Dashboards Classic",isPortal:!0},"Workforce for ArcGIS":{value:"ArcGIS Workforce",isPortal:!0}};g.forEach(function(v){Object.keys(x).forEach(function(y){var D=
x[y];D.isPortal&&!b||v.uid!==y||(v.uid=D.value)})})};k.prototype._init=function(g,b,x,v){var y=this;return this._getBlockedApps().then(function(){return y._getLicensedApps(g,b)}).then(function(D){y._appDictionary=D[1];var E=new m.default;y.userProperties.appLauncher&&(y.userProperties.appLauncher.primary&&y._mapAppTitles(y.userProperties.appLauncher.primary),y.userProperties.appLauncher.secondary&&y._mapAppTitles(y.userProperties.appLauncher.secondary));if(y.userProperties.appLauncher&&y.userProperties.appLauncher.primary&&
y.userProperties.appLauncher.secondary)return y._queryAppItemsForChanges(y.approvedApps,b).then(function(){y._newAppDictionary=r.default.clone(y._appDictionary);y.primaryApps=y.userProperties.appLauncher.primary.reduce(y._populateAppIdentifiers.bind(y),[]);y.secondaryApps=y.userProperties.appLauncher.secondary.reduce(y._populateAppIdentifiers.bind(y),[]);y.primaryApps=y._filterBlockedApps(y.primaryApps);y.secondaryApps=y._filterBlockedApps(y.secondaryApps);for(var C in y._newAppDictionary)y._newAppDictionary[C].canAccess&&
(y._newAppDictionary[C].isNew=!0,y._appDictionary[C]=y._newAppDictionary[C],y.primaryApps.push(y._newAppDictionary[C]));y._minNumberOfAppsToSave=y.primaryApps.concat(y.secondaryApps).filter(function(z){return z.canAccess}).length;return E.resolve(y._getResponseObject())});y.primaryApps=D[0].slice().sort(function(C,z){return C.label<z.label?-1:1});y.primaryApps=y._filterBlockedApps(y.primaryApps);y.secondaryApps=[];y._minNumberOfAppsToSave=y.primaryApps.filter(function(C){return C.canAccess}).length;
return E.resolve(y._getResponseObject())})};k.prototype._getResponseObject=function(){var g=this.i18n?{text:this.getAppLauncherStrings()}:{};return l.__assign(l.__assign({},g),{primary:this.primaryApps,secondary:this.secondaryApps,ieVersion:this._browserInUse,highContrast:(0,h.default)("highcontrast"),displayIntro:this.__displayIntro})};k.prototype.getAppLauncherStrings=function(){return{clear:this._clearText,confirm:this.i18n.gotIt,intro:this.i18n.dragAndDropIntroText,dragAppsHere:this.i18n.dragAppsHere,
removed:this.i18n.noLongerAvailable,removedMessage:this.i18n.removedApp,showMore:this.i18n.showMore}};k.prototype._getBlockedApps=function(){var g=this;return(0,a.default)({blockedApps:c.default.getBlockedApps(),blockableApps:c.default.getBlockableApps()}).then(function(b){if(!b.blockableApps||!b.blockableApps.length)return[];var x=b.blockableApps||[];b=b.blockedApps||[];g._blockedApps=[];b.forEach(function(v){var y=x.filter(function(D){return D.clientid===v})[0];y&&g._blockedApps.push(y)})})};k.prototype._getLicensedApps=
function(g,b){for(var x=this,v,y,D={},E={},C=this._getAppExceptions(),z=this._getExcludedProvisionedListings(),w=[],A=new m.default,G=this.userApps.apps.length,F=function(K){var Q=H.userApps.apps[K];K=Q.itemId||Q.title;var P=!0,I=null===(v=H._blockedApps)||void 0===v?void 0:v.some(function(N){return Q.itemId&&Q.itemId===N.itemid||Q.title&&Q.title===N.title});D[K]=1;E[K]=Q;if(I||e.default.isArcGISEnterpriseOnKubernetes()&&!1===Q.supportsKubernetes||C[Q.title]&&!C[Q.title].hasAccess(Q.title))return"continue";
if(!(Q.privileges&&0!==Q.privileges.length||Q.isLicensed)||H._portalUser.userLicenseTypeId&&"storytellerut"===H._portalUser.userLicenseTypeId.toLowerCase()&&Q.label&&"storymaps"===Q.label.toLowerCase())return E[K].canAccess=!0,w.push(H._modifySystemAppForView(Q,K)),"continue";if(0<(null===(y=Q.privileges)||void 0===y?void 0:y.length)&&H._portalUser.privileges){for(I=0;I<Q.privileges.length;I++)if(0>H._portalUser.privileges.indexOf(Q.privileges[I])){P=!1;break}if(!Q.isLicensed&&P)return E[K].canAccess=
!0,w.push(H._modifySystemAppForView(Q,K)),"continue"}if(Q.isLicensed&&P)for(P=0;P<g.length;P++)if(K===g[P].itemId||K===g[P].title){E[K].canAccess=!0;w.push(H._modifySystemAppForView(Q,K));break}},H=this,J=0;J<G;J++)F(J);g.forEach(function(K){"Web Mapping Application"===K.type&&!z[K.clientId]&&!D[K.itemId]&&K.url&&K.title&&!D[K.title]&&0>K.typeKeywords.indexOf("hideFromAppSwitcher")&&(K=x._modifyPartnerAppForView(K),E[K.itemId]=K,w.push(K))});return A.resolve([this.approvedApps.map(function(K){var Q=
l.__assign(l.__assign({},K.appProperties),{itemId:K.itemId,webMappingApp:!0,approvedApp:!0,canAccess:!b});E[K.itemId]=Q;return x._modifyWebAppForView(Q)}).concat(w),E])};k.prototype._getApprovedApps=function(g){return this.requestWithAuth("".concat(d.default.restBaseUrl.replace("http://","https://"),"portals/").concat(this._portalUser.orgId,"/approvedApps"),{f:"json",returnAllApps:g})};k.prototype._populateAppIdentifiers=function(g,b,x){var v=this;(x=Object.keys(this._appDictionary).map(function(y){return v._appDictionary[y]}).filter(function(y){return y.itemId===
b.uid||y.title===b.uid}).shift())&&!this._appDictionary[b.uid]&&(b.uid=x.itemId||x.title);if(null===x||void 0===x?0:x.hasBeenPopulated)return g;x?((b.hasChanged||x.hasChanged||!x.canAccess&&!x.ignoreNoAccess)&&this._isAdmin()&&(b.hasChanged||b.ignoreNoAccess||(this.__saveOnLoad=!0),this._appDictionary[b.uid].hasChanged=!0,this._appDictionary[b.uid].ignoreNoAccess=b.ignoreNoAccess),b.isNew&&(this._appDictionary[b.uid].isNew=!0),delete this._newAppDictionary[b.uid]):(x=b,x.canAccess=!1,x.itemId=b.uid,
this._appDictionary[b.uid]=x);this._appDictionary[b.uid].hasBeenPopulated=!0;g.push(x);return g};k.prototype.populateDataIdAttributes=function(g,b,x,v){var y=this;return g.map(function(D,E){var C=y._appDictionary[D],z={label:C.label,uid:D};C.isNew&&(z.isNew=!0);C.hasChanged&&!C.ignoreNoAccess&&(z.hasChanged=!0);b&&D===b&&(g[E-1]===D&&(y.__duplicateValueIndex=E),v?(y._appDictionary[D][x]=v,z[x]=v):(delete y._appDictionary[D][x],delete z[x]));C.canAccess&&C.ignoreNoAccess&&delete z.ignoreNoAccess;return z})};
k.prototype._getImgSrcForWebMappingApp=function(g){if(!g.icon){var b="https://".concat(this._self.portalHostname,"/sharing/rest/content/items/").concat(g.itemId,"/resources/");return"".concat(b).concat(g.appSwitcher.image,"?token\x3d").concat(this.userToken)}return"".concat(d.default.restBaseUrl,"portals/self/resources/").concat(g.icon,"?token\x3d").concat(this.userToken)};k.prototype._modifySystemAppForView=function(g,b){var x;g.image?g.image="".concat(this.imgDir).concat(g.image):g.placeHolderIcon=
"".concat(this.imgDir,"svg-app-icon.svg");0===(null===(x=g.url)||void 0===x?void 0:x.indexOf("../"))&&(x=this._portal.urlKey?"".concat(this._portal.urlKey,".").concat(this._portal.customBaseUrl):this._self.portalHostname,g.url="".concat(location.protocol,"//").concat(x).concat(g.url.substring(2,g.url.length)));delete g.isLicensed;delete g.privileges;g.itemId=b;return g};k.prototype._modifyWebAppForView=function(g){var b,x;(null===(b=g.appSwitcher)||void 0===b?0:b.image)||g.icon?g.image=this._getImgSrcForWebMappingApp(g):
g.placeHolderIcon="".concat(this.imgDir,"svg-app-circle.svg");g.abbr=(null===(x=g.appSwitcher)||void 0===x?void 0:x.abbr)||g.abbreviation;delete g.abbreviation;delete g.appSwitcher;delete g.approvedApp;delete g.webMappingApp;return g};k.prototype._modifyPartnerAppForView=function(g){var b,x,v;g.appSwitcher=null===(b=g.properties)||void 0===b?void 0:b.appSwitcher;b=(null===(x=g.appSwitcher)||void 0===x?void 0:x.image)||g.icon;return{abbr:(null===(v=g.appSwitcher)||void 0===v?void 0:v.abbr)||g.abbreviation,
itemId:g.itemId,canAccess:!0,webMappingApp:!0,image:b?this._getImgSrcForWebMappingApp(g):null,label:g.title||g.label,url:g.url,placeHolderIcon:g.placeHolderIcon||"".concat(this.imgDir,"svg-app-circle.svg")}};k.prototype._saveAppOrderToUserProperties=function(g,b){this.userProperties.appLauncher||(this.userProperties.appLauncher={});if(JSON.stringify(this.userProperties.appLauncher.primary)!==JSON.stringify(g)||JSON.stringify(this.userProperties.appLauncher.secondary)!==JSON.stringify(b))return this.userProperties.appLauncher.primary=
g,this.userProperties.appLauncher.secondary=b,this._updateUserProperties(this.userProperties)};k.prototype._getUserProperties=function(){var g=new m.default;return this._userProperties?(this._userProperties.properties||(this._userProperties={properties:this._userProperties}),g.resolve(this._userProperties)):this.requestWithAuth("".concat(d.default.restBaseUrl,"community/users/").concat(this._portalUser.username,"/properties"),{f:"json"})};k.prototype._getMarketPlaceProvisionedListings=function(g){var b,
x=new m.default;return!g&&(null===(b=d.default.userInfo)||void 0===b?0:b.provisionedListings)?(x.resolve(d.default.userInfo.provisionedListings),x):this.fetchAllResources("".concat(this._portal.portalUrl,"community/users/").concat(this._portalUser.username,"/provisionedListings"),{returnAppClientIds:!0,returnAllProvisions:!0},"provisionedListings")};k.prototype._updateUserProperties=function(g){var b="".concat(d.default.restBaseUrl,"community/users/").concat(this._portalUser.username,"/setProperties"),
x=this._portalUser?{token:this.userToken}:{};g=l.__assign({f:"json",properties:JSON.stringify(g)},x);return(0,q.default)({url:b,content:g},{usePost:!0})};k.prototype._getExcludedProvisionedListings=function(){var g={opsdashboard:1,arcgisWebApps:1,Workforce:1,geoplanner:1,webappbuilder:1,HubforArcGIS:1,appstudio:1,survey123:1,storymaps:1,mapsForOffice:1,mapsForO365:1,mapsForSharePoint:1};this._self.isPortal&&(g.arcgisonline=1);return g};k.prototype._getAppExceptions=function(){var g=this;return{"Open Data":{hasAccess:this._userHasAccessToOpenData.bind(this)},
AppStudio:{hasAccess:this._hasLicense.bind(this,"arcgisWebApps")},"ArcGIS Velocity":{hasAccess:this._userHasAccessToAnalyticsForIoT.bind(this)},"ArcGIS Hub":{hasAccess:this._hasLicense.bind(this,"HubforArcGIS")},"ArcGIS Enterprise Sites":{hasAccess:this._userHasAccessToSites.bind(this)},"ArcGIS Experience Builder":{hasAccess:function(b){return g._isInPortalConfig(b)}},"ArcGIS StoryMaps":{hasAccess:function(b){return g._isInPortalConfig(b)}},"ArcGIS QuickCapture Web Designer":{hasAccess:function(b){return g._isInPortalConfig(b)&&
g._hasLicense("arcgisWebApps")}},"ArcGIS Collector":{hasAccess:this._userHasAccessToCollectorWeb.bind(this)},"ArcGIS Field Maps":{hasAccess:this._userHasAccessToCollectorWeb.bind(this)},"ArcGIS Dashboards":{hasAccess:function(b){return d.default.showCreateDashboard&&g._isInPortalConfig(b)&&g._hasLicense("dashboards")}},"ArcGIS Solutions":{hasAccess:function(b){return!g._self.isPortal||g._isInPortalConfig(b)}},"ArcGIS Workforce":{hasAccess:function(b){return!g._self.isPortal||g._isInPortalConfig(b)}},
"Deep Learning Studio":{hasAccess:function(b){return!g._self.isPortal||g._isInPortalConfig(b)}},"Map Viewer":{hasAccess:function(b){return g._userHasAccessToMapViewer()&&g._isInPortalConfig("ArcGIS Map Viewer")}},"Map Viewer Classic":{hasAccess:function(b){return g._hasLicense("arcgisWebApps")&&g._isInPortalConfig("ArcGIS Map Viewer Classic")}},"Operations Dashboard for ArcGIS":{hasAccess:function(){return g._hasLicense("opsdashboard")&&g._isInPortalConfig("ArcGIS Dashboards Classic")}},"ArcGIS Dashboards Classic":{hasAccess:function(b){return g._hasLicense("opsdashboard")&&
g._isInPortalConfig(b)}},"Ortho Maker":{hasAccess:this._userHasAccessToOrthoMaker.bind(this)},Notebook:{hasAccess:this._hasAccessToNotebooks.bind(this)},"Scene Viewer":{hasAccess:this._hasLicense.bind(this,"arcgisWebApps")},"Story Maps":{hasAccess:this._hasLicense.bind(this,"arcgisWebApps")},Survey123:{hasAccess:this._hasLicense.bind(this,"survey123")},"Track Viewer":{hasAccess:this._userHasAccessToTrackViewer.bind(this)}}};k.prototype._hasAccessToNotebooks=function(g){return this._notebookServerConfigured()&&
this._isInPortalConfig(g)&&this._canCreateNotebooks()};k.prototype._notebookServerConfigured=function(){return this._self.isPortal?d.default.notebookServerEnabled&&this._self.supportsHostedNotebooks:d.default.notebookServerEnabled};k.prototype._canCreateNotebooks=function(){return(this._portalUser.privileges||[]).length?this._portalUser.privileges.some(function(g){return"premium:publisher:createNotebooks"===g}):!1};k.prototype._isInPortalConfig=function(g){return!this._self.isPortal||d.default.showInAppLauncher&&
-1!==d.default.showInAppLauncher.indexOf(g)};k.prototype._userHasAccessToMapViewer=function(){var g=this._self.isPortal&&this._self.portalProperties&&!1===this._self.portalProperties.newMapViewerEnabled;return d.default.newMapViewerEnabled&&!g&&this._hasLicense("arcgisWebApps")};k.prototype._userHasAccessToOpenData=function(){var g;return(null===(g=this._self)||void 0===g?0:g.portalProperties)&&(!this._self.portalProperties.openData||this._self.portalProperties.openData&&!this._self.portalProperties.openData.enabled)?
!1:this._hasLicense("HubforArcGIS")};k.prototype._userHasAccessToAnalyticsForIoT=function(){var g=["portal:publisher:publishFeeds","portal:publisher:publishRealTimeAnalytics","portal:publisher:publishBigDataAnalytics"],b=(this._portalUser.privileges||[]).some(function(v){return-1<g.indexOf(v)}),x=this._hasLicense("velocity");return b&&x};k.prototype._userHasAccessToSites=function(g){return this._isInPortalConfig(g)&&this._hasLicense("HubforArcGIS")};k.prototype._userHasAccessToCollectorWeb=function(g){return this._isInPortalConfig(g)};
k.prototype._userHasAccessToOrthoMaker=function(){var g,b;return(null===(b=null===(g=this._self)||void 0===g?void 0:g.helperServices)||void 0===b?void 0:b.rasterAnalytics)&&this._self.helperServices.orthoMapping&&this._isInPortalConfig("Ortho Maker")};k.prototype._userHasAccessToTrackViewer=function(){var g,b;return(null===(b=null===(g=this._self)||void 0===g?void 0:g.helperServices)||void 0===b?void 0:b.locationTracking)&&d.default.trackViewerEnabled&&this._isInPortalConfig("Track Viewer")};k.prototype._hasLicense=
function(g){var b;return(null===(b=d.default.userInfo)||void 0===b?0:b.isLicensed)?d.default.userInfo.isLicensed(g):!0};k.prototype._getAgoApp=function(){return{image:"arcgis-online.png",label:"ArcGIS Online",title:"ArcGIS Online",url:this.userProperties.landingPage?"".concat(d.default.baseUrl).concat(this.userProperties.landingPage.url):this._portalUser.isOrgAdmin?"organization.html":"index.html"}};k.prototype._getOriginOfUrl=function(g){g=window.location;return"".concat(g.protocol,"//").concat(g.hostname).concat(g.port?
":"+g.port:"")};k.prototype._getNewAppIconFromAppIdAndProperties=function(g,b){if(!this._appDictionary[g])return b=l.__assign(l.__assign({},JSON.parse(b)),{itemId:g,webMappingApp:!0,approvedApp:!0,canAccess:!0,isNew:!0}),this._appDictionary[g]=b};k.prototype._queryAppItemsForChanges=function(g,b){var x=this,v=new m.default,y="".concat(d.default.restBaseUrl,"search?");if(!b||!g||!g.length)return v.resolve({success:!0});y=y+"f\x3djson\x26num\x3d100\x26q\x3d id:("+"".concat(g.map(function(D){return'"'.concat(D.itemId,
'"')}).join(" OR "),")");return this.requestWithAuth(y,{f:"json"}).then(function(D){var E;0<(null===(E=D.results)||void 0===E?void 0:E.length)&&D.results.forEach(function(C){var z=x._appDictionary[C.id];z.canAccess=1;z.hasChanged=z.url!==C.url?C.url:0});return v.resolve({success:!0})})};k.prototype._getAppsFromLocalStorage=function(){if(!this.__localStorageIsAvailable)return!1;var g=localStorage.getItem("APSW-primary"),b=localStorage.getItem("APSW-secondary");return g?{primaryApps:g,secondaryApps:b}:
!1};k.prototype._saveAppsToLocalStorage=function(g,b){this.__localStorageIsAvailable&&(localStorage.setItem("APSW-primary",JSON.stringify(g)),localStorage.setItem("APSW-secondary",JSON.stringify(b)))};k.prototype._cookieForQueryingItemsExists=function(){var g=t.default.getCookie("APSW-query",!0);if((null===g||void 0===g?void 0:g.expires)>(new Date).setHours((new Date).getHours()))return!0;g={expires:(new Date).setHours((new Date).getHours()+5)};t.default.setCookie("APSW-query",g,{path:"/",domain:document.domain,
sameSite:"Strict"},!0);return!1};k.prototype.requestWithAuth=function(g,b){b=this.userToken?l.__assign(l.__assign({},b),{token:this.userToken}):b;return(0,q.default)({url:g,content:b})};k.prototype.fetchAllResources=function(g,b,x){var v=new m.default,y=1,D=[],E,C,z,w,A={f:"json",token:this.userToken};b=b?l.__assign(l.__assign({},b),A):A;x=x||"results";b.start=y;b.num||(b.num=100);(0,q.default)({url:g,content:b}).then(function(G){if(G&&G[x]){D=D.concat(G[x]);y=G.nextStart;E=G.total-D.length;C=Math.ceil(E/
100);z=[];for(w=0;w<C;w++)b.start=y+100*w,z.push(e.default.request({url:g,content:b}));(0,a.default)(z).then(function(F){F.forEach(function(H){D=D.concat(H[x])});v.resolve(D)},function(F){v.reject(F)})}else v.resolve(D)},function(G){v.reject(G)});return v};k.prototype._isAdmin=function(){return this._portalUser.role&&("org_admin"===this._portalUser.role||"account_admin"===this._portalUser.role)};k.prototype.portalQueryItems=function(g,b){g={num:b||10,start:0,sortField:"title",sortOrder:"asc",f:"json",
q:g};b="";b=this._portal.urlKey?"https://".concat(this._portal.urlKey,".").concat(this._portal.customBaseUrl,"/sharing/rest/search"):"".concat(this._portal.url,"search");return this.requestWithAuth(b,g)};k.prototype.useSSL=function(g,b){if(this._self.isPortal){var x=this.getLocation(b);if(-1<this._self.portalHostname.toLowerCase().indexOf(x.hostname.toLowerCase())&&x.port&&"80"!==x.port&&"443"!==x.port)return b=x.pathname,b=0===b.indexOf("/")?b:"/".concat(b),this._self.allSSL||-1<g.indexOf("https:")?
"https://".concat(x.hostname).concat(this._self.httpsPort&&"443"!==this._self.httpsPort?":".concat(this._self.httpsPort):"").concat(b).concat(x.search):"http://".concat(x.hostname).concat(this._self.httpPort&&"80"!==this._self.httpPort?":".concat(this._self.httpPort):"").concat(b).concat(x.search)}return-1!==g.indexOf("https:")||this._self.allSSL?b.replace("http:","https:"):b};k.prototype.getLocation=function(g){var b=document.createElement("a");b.href=g;return{protocol:b.protocol,hostname:b.hostname,
port:b.port,pathname:b.pathname,search:b.search,hash:b.hash,host:b.host}};k.prototype.formatUrlWithToken=function(g){var b=this.userToken;return-1!==g.indexOf("null")?null:this.useSSL(window.location.protocol,b?"".concat(g).concat(-1!==g.indexOf("?")?"\x26":"?","token\x3d").concat(b):g)};k.prototype._checkIfLocalStorageIsAvailable=function(){if("object"===typeof localStorage)try{return localStorage.setItem("testLocalStorage","1"),localStorage.removeItem("testLocalStorage"),!0}catch(g){return!1}};
k.prototype._getBrowserInUse=function(){return 10>=(0,h.default)("ie")||6<(0,h.default)("trident")?"ie11":(0,h.default)("edge")?"edge":null};return k}()})},"dojo/debounce":function(){define([],function(){return function(f,B){var l;return function(){l&&clearTimeout(l);var d=this,c=arguments;l=setTimeout(function(){f.apply(d,c)},B)}}})},"arcgisonline/sharing/dijit/SiteFooter":function(){define("require exports tslib ../../esriGeowConfig ../../pages/utils/dom ../../pages/utils/organization ../util ../geow/Account ../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dojo/dom dojo/dom-construct dojo/i18n!../../nls/arcgisonline dojo/string dojo/topic dojo/text!./templates/SiteFooter.html dojo/_base/lang esri/lang".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);q=l.__importDefault(q);n=l.__importDefault(n);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);x=l.__importDefault(x);v=l.__importDefault(v);return function(){function y(D,E){this.templateString=b.default;this.isTroubleshootPage=
this.isSignInPage=!1}y.prototype.postMixInProperties=function(){this.i18n=x.default.mixin({},n.default.common);x.default.mixin(this.i18n,n.default.siteFooter);x.default.mixin(this.i18n,n.default.supportPage.helpLabel)};y.prototype.postCreate=function(){var D=window.location.pathname.toLowerCase();this.isSignInPage=-1!==D.indexOf(d.default.signin);this.isTroubleshootPage=-1!==D.indexOf("troubleshoot.html");this.addEventListeners()};y.prototype.startup=function(){this._loadLinks()};y.prototype.refresh=
function(){q.default.destroy("".concat(this.id,"_links"));q.default.create("span",{id:"".concat(this.id,"_links"),className:"esriItemLinks"},this.domNode);this._loadLinks()};y.prototype.addEventListeners=function(){this.own(g.default.subscribe("contact-us-link/update",this.handleContactUsLinkUpdate.bind(this)))};y.prototype.handleContactUsLinkUpdate=function(D){var E=h.default.byId("".concat(this.id,"_links")),C=window.location.href,z=!1,w=null;-1<C.indexOf("viewer.html")&&!u.default.isMobile()&&
-1===C.indexOf("returnUrl")&&(z=!0);w=z?q.default.create("span",{innerHTML:"\x26nbsp;. "}):q.default.create("span",{innerHTML:""});v.default.isDefined(D)||(D={visible:!1,url:""});(C=h.default.byId("".concat(this.id,"_customContactUs")))?(c.default.showHide(C,D.visible),C.href=D.url):(C=q.default.create("a",{href:D.url,innerHTML:this.i18n.customContactUs,id:"".concat(this.id,"_customContactUs"),class:D.visible?"footer__contact-us":"footer__contact-us hide"}),D=h.default.byId("".concat(this.id,"_contactEsri")),
v.default.isDefined(D)?(q.default.place(C,D,"after"),q.default.place(w,D,"after")):(0<d.default.footerLinks.length&&q.default.place(w,E,"last"),q.default.place(C,E,"last")))};y.prototype._getTitle=function(D){return-1<(null===D||void 0===D?void 0:D.indexOf("${"))&&-1<D.indexOf("}")?k.default.substitute(D,{i18n:this.i18n}):D};y.prototype._loadLinks=function(){var D=this;e.default.getSelf(function(E){var C,z,w,A=t.default.getUser(),G=E.isPortal,F=h.default.byId("".concat(D.id,"_links")),H=window.location.href,
J=!1,K=null;-1<H.indexOf("?useExisting\x3d1")&&(H=H.substring(0,H.length-14));-1<H.indexOf("viewer.html")&&!u.default.isMobile()&&-1===H.indexOf("returnUrl")&&(J=!0);(d.default.footerLinks||[]).forEach(function(P){var I="${i18n.legal}"===(null===P||void 0===P?void 0:P.title),N=!!(I&&v.default.isDefined(A)&&v.default.isDefined(A.accountId)),L="${i18n.help}"===(null===P||void 0===P?void 0:P.title)||"support.html"===(null===P||void 0===P?void 0:P.url),W=!(L&&!v.default.isDefined(A)&&v.default.isDefined(E.access)&&
"public"===E.access&&(G||!G&&v.default.isDefined(E.customBaseUrl)));N=!I&&!L||I&&!N||L&&!W;K&&N&&q.default.place(K,F,"last");I=D._getTitle(P.title);if(P.url){-1===P.url.indexOf("http")&&-1===P.url.indexOf("mailto:")&&J&&(P.url="support.html"===P.url?E.helpBase||d.default.baseUrl+P.url:d.default.baseUrl+P.url);if("${i18n.help}"===P.title||"support.html"===P.url)P.url=E.helpBase;P=q.default.create("a",{href:P.url,target:"_blank",innerHTML:I});N&&q.default.place(P,F,"last")}else G&&"contactUs"===P.type?
(N=d.default.portalName||"ArcGIS.com",L=escape(H),P="mailto:".concat(P.email),P+='?subject\x3d"A comment about '.concat(N,'"'),P+='\x26body\x3d"I have the following comment about the '.concat(N," Web site. %0AReferring page: ").concat(L,' %0A %0A(Please provide as much detail as possible. Note: Contact Us is not meant for obtaining technical support or general product information.)"'),P=q.default.create("a",{id:"".concat(D.id,"_contactEsri"),href:P,innerHTML:I}),q.default.place(P,F,"last")):"reportAbuse"===
P.type&&(L=escape(H),P="mailto:".concat(P.email,'?subject\x3d"Concerns about an item"'),P+='\x26body\x3d"I have concerns about the following. %0AReferring page: '.concat(L," %0A %0A(Please describe your concerns. If you have concerns about a particular item, it's best to click the 'Report Abuse' link while viewing the item description. Doing so will include the URL to the specific item in this e-mail.)\""),P=q.default.create("a",{href:P,innerHTML:I}),q.default.place(P,F,"last"));K=J?q.default.create("span",
{innerHTML:"\x26nbsp;. "}):q.default.create("span",{innerHTML:""})});var Q=null!==(w=null===(z=null===(C=E.portalProperties)||void 0===C?void 0:C.links)||void 0===z?void 0:z.contactUs)&&void 0!==w?w:{visible:!1,url:""};(C=h.default.byId("".concat(D.id,"_customContactUs")))?(c.default.showHide(C,Q.visible),C.href=Q.url):(C=q.default.create("a",{href:Q.url,innerHTML:D.i18n.customContactUs,id:"".concat(D.id,"_customContactUs"),class:Q.visible?"footer__contact-us":"footer__contact-us hide"}),Q=h.default.byId("".concat(D.id,
"_contactEsri")),v.default.isDefined(Q)?(q.default.place(C,Q,"after"),q.default.place(K,Q,"after")):(0<d.default.footerLinks.length&&q.default.place(K,F,"last"),q.default.place(C,F,"last")))})};return y=l.__decorate([(0,r.default)(a.default,m.default)],y)}()})},"arcgisonline/sharing/dijit/SiteFooterMap":function(){define("require exports tslib ./SiteFooter ../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dojo/text!./templates/SiteFooterMap.html".split(" "),function(f,B,l,d,c,
u,t,e){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);return function(){function r(){this.templateString=e.default}return r=l.__decorate([(0,c.default)(t.default,u.default,d.default)],r)}()})},"arcgisonline/sharing/dijit/SignUpInternal":function(){define("require exports tslib ../../esriGeowConfig ../../pages/pageUtil ../../pages/dijit/PasswordStrength ../../pages/portal/Portal ../../pages/utils/dom ../../pages/utils/validation ../geow/Account ../geow/Geow ./Role ../util ../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/dom-attr dojo/dom-construct dojo/_base/kernel dojo/string dojo/i18n!../../nls/arcgisonline dojo/_base/lang dojo/on dojo/text!./templates/SignUpInternal.html dojo/topic esri/config esri/lang esri/request ../../pages/utils/queryHandler".split(" "),
function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x,v,y,D,E,C,z,w,A,G,F,H,J){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);q=l.__importDefault(q);n=l.__importDefault(n);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);x=l.__importDefault(x);v=l.__importDefault(v);y=l.__importDefault(y);D=l.__importDefault(D);E=l.__importDefault(E);
C=l.__importDefault(C);z=l.__importDefault(z);w=l.__importDefault(w);A=l.__importDefault(A);G=l.__importDefault(G);F=l.__importDefault(F);H=l.__importDefault(H);J=l.__importStar(J);return function(){function K(Q,P){this.templateString=w.default;this.widgetsInTemplate=!0;this.i18n=l.__assign(l.__assign(l.__assign({},E.default.common),E.default.signUpInternalWidget),{securityQuestions:E.default.securityQuestions,passwordTooWeak:E.default.myOrganization.inviteMembers.passwordTooWeak,usernameTooShort:E.default.organizationInvite.step2Create.invalid.usernameTooShort,
usernameTooLong:E.default.organizationInvite.step2Create.invalid.usernameTooLong,usernameInvalidChars:E.default.organizationInvite.step2Create.invalid.usernameInvalidChars,usernameStartEndChars:E.default.organizationInvite.step2Create.invalid.usernameStartEndChars});this.redirectUrl="".concat(d.default.baseUrl.replace("https:","http:"),"index.html");this.orgRedirectUrl="".concat(d.default.baseUrl.replace("https:","http:"),"organization.html");this.isValidUsername=!1;this.accountMode="arcgis"}K.prototype.postCreate=
function(){this.inherited(arguments);this.fetchPasswordPolicy()};K.prototype.startup=function(){var Q=this;this.inherited(arguments);m.default.getSelf(function(P){Q._portal=new t.default({url:d.default.restBaseUrl,self:C.default.clone(P)});Q._portal.on("load",function(){Q.setupPasswordStrength()});G.default.defaults.io.corsEnabledServers.push(d.default.DEPLOY_ROOT);G.default.defaults.io.corsEnabledServers.push("http://".concat(location.host));G.default.defaults.io.corsEnabledServers.push("https://".concat(location.host));
G.default.defaults.io.proxyUrl=d.default.proxyUrl;C.default.mixin(Q,J.queryToObject(window.location.search.slice(1)));Q._svcUrl=d.default.restBaseUrl+(d.default.restBaseUrl.lastIndexOf("/")===d.default.restBaseUrl.length-1?"":"/");Q._communityUri="".concat(Q._svcUrl,"community/");x.default.set("pagetitle","innerHTML",Q.i18n.signUpInternalTitle);Q.setupQuestions();Q.loadConnections();Q.checkInvitation();setTimeout(function(){Q._firstname.focus()},50);A.default.subscribe("registerUser",Q.registerUser.bind(Q));
Q.adjustNameRows()})};K.prototype.loadConnections=function(){this.own((0,z.default)(this._firstname,"change",this.validFirstName.bind(this)),(0,z.default)(this._lastname,"change",this.validLastName.bind(this)),(0,z.default)(this._email,"change",this.validEmail.bind(this)),(0,z.default)(this._confirmEmail,"change",this.validConfirmEmail.bind(this)),(0,z.default)(this._username,"change",this.usernameChange.bind(this)),(0,z.default)(this._pwd,"change",this.validPassword.bind(this)),(0,z.default)(this._pwd,
"keyup",this.validPassword.bind(this)),(0,z.default)(this._verifyPwd,"change",this.validVerifyPassword.bind(this)),(0,z.default)(this._identityQuestion,"change",this.identityQuestionChange.bind(this)),(0,z.default)(this._identityAnswer,"change",this.validIdentityAnswer.bind(this)),(0,z.default)(this._form,"submit",this.initiateSignUp.bind(this)),(0,z.default)(this._cancelBtn,"click",this.cancel.bind(this)))};K.prototype.adjustNameRows=function(){"ja"===y.default.locale&&v.default.place("first-name-block",
"last-name-block","after")};K.prototype.checkInvitation=function(){var Q=this;this.invitation&&this.fetchInvitation().then(function(P){Q.invitationOrgName=P.account.name},this.fetchInvitationError.bind(this))};K.prototype.setupPasswordStrength=function(){this._strengthMeter=new u.default({baseClass:"leader-half",portal:this._portal},this.domNode.querySelector(".js-strength-meter"));this._strengthMeter.update(this._pwd.value)};K.prototype.setupQuestions=function(){var Q=this;this.identityQuestions=
[{id:0,name:this.i18n.securityQLabel},{id:1,name:this.i18n.securityQuestions[1]},{id:2,name:this.i18n.securityQuestions[2]},{id:3,name:this.i18n.securityQuestions[3]},{id:4,name:this.i18n.securityQuestions[4]},{id:5,name:this.i18n.securityQuestions[5]},{id:6,name:this.i18n.securityQuestions[6]},{id:7,name:this.i18n.securityQuestions[7]},{id:8,name:this.i18n.securityQuestions[8]},{id:9,name:this.i18n.securityQuestions[9]},{id:10,name:this.i18n.securityQuestions[10]},{id:11,name:this.i18n.securityQuestions[11]},
{id:12,name:this.i18n.securityQuestions[12]},{id:13,name:this.i18n.securityQuestions[13]},{id:14,name:this.i18n.securityQuestions[14]}];this.identityQuestions.forEach(function(P){v.default.create("option",{value:P.id,innerHTML:P.name},Q._identityQuestion)})};K.prototype.fetchPasswordPolicy=function(){var Q=this,P="".concat(q.default.getSecureUrl(d.default.restBaseUrl),"portals/self/securityPolicy/passwordPolicy");q.default.request({url:P}).then(function(I){Q._passwordPolicy=!I||I.code||I.messageCode?
null:I})};K.prototype.registerUser=function(Q){var P=this;Q=D.default.trim(this._firstname.value);var I=D.default.trim(this._lastname.value),N=D.default.trim(this._email.value),L=q.default.stripHTML(D.default.trim(this._username.value)),W=D.default.trim(this._pwd.value),Z=D.default.trim(this._identityAnswer.value),aa={fullname:"ja"===y.default.locale?"".concat(I," ").concat(Q):"".concat(Q," ").concat(I),firstname:Q,lastname:I,email:N,username:L,password:W,securityQuestionIdx:this._identityQuestionID,
securityAnswer:Z,invitationId:void 0,provider:void 0};this.invitation&&(aa.invitationId=this.invitation,aa.provider=this.accountMode);this.signUp(aa).then(function(ia){null!=ia.error&&""!==ia.error?(e.default.disableNode(P._createAccountBtn,!1),x.default.set(P._createAccountBtn,"innerHTML",P.i18n.createAcc),ia.error.messageCode&&"COM_1054"===ia.error.messageCode?c.default.createConfirmationDialog({strings:{title:P.i18n.errorTitle,description:P.i18n.error.maxUsers},hideCancel:!0,autoCloseOnOk:!0}):
P.handleError(ia)):P.invitation?a.default.signInHandler(aa.username,P.acceptInvitation.bind(P,aa),P.signInError.bind(P),ia):a.default.signInHandler(aa.username,P.signIn.bind(P),P.signInError.bind(P),ia)},this.signUpError.bind(this))};K.prototype.signUp=function(Q){Q=l.__assign({},Q);var P="".concat(d.default.restBaseUrl,"community/signup"),I=document.domain,N=I.split(".");1<N.length&&(I="".concat(N[N.length-2],".").concat(N[N.length-1]));Q.referer=I;Q.f="json";return(0,H.default)({url:P,content:Q,
headers:{"X-Esri-Auth-Client-Id":"arcgisonline","X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")}},{disableIdentityLookup:!0,usePost:!0})};K.prototype.signIn=function(){d.default.self=null;m.default.getSelf(this.routeUser.bind(this))};K.prototype.routeUser=function(Q){var P=q.default.getUser(),I=new h.default({portalUser:Q.user||{}}),N=J.queryToObject(window.location.search.slice(1)).returnUrl;if(!Q||Q.code||Q.message)null!==N?window.location.href=N:(P="".concat(q.default.getHttpUrl(),
"user.html?newUser\x3dtrue"),window.location.href=q.default.getSecureUrl(P));else{Q=Q.allSSL;var L=q.default.usePortalSSL();this.redirectUrl="".concat(q.default.getHttpUrl(),"index.html");this.orgRedirectUrl="".concat(q.default.getHttpUrl(),"organization.html");N?(L=-1<N.indexOf("https:"),window.location.href=Q||L?q.default.getSecureUrl(N):N):"account_admin"===P.role&&(!d.default.self.restrictOrganizationPageToAdmin&&I.canViewOrgUsers()||d.default.self.restrictOrganizationPageToAdmin&&I.isAdmin())?
window.location.href=Q||L?q.default.getSecureUrl(this.orgRedirectUrl):this.orgRedirectUrl:window.location.href=Q||L?q.default.getSecureUrl(this.redirectUrl):this.redirectUrl}};K.prototype.acceptInvitation=function(Q){var P=this;m.default.acceptInvitation(this.invitation,function(){P.signIn()},this.acceptFail.bind(this))};K.prototype.initiateSignUp=function(Q){var P=this;Q&&Q.preventDefault();this.validates().then(function(I){I&&(e.default.disableNode(P._createAccountBtn,!0),x.default.set(P._createAccountBtn,
"innerHTML",P.i18n.creatingAcc),P.registerUser(!0))})};K.prototype.cancel=function(){var Q="".concat(d.default.baseUrl.replace("http:","https:")).concat(d.default.signin);this.invitation&&(Q+="?invitation\x3d".concat(this.invitation));window.location.href=Q};K.prototype.fetchInvitationError=function(Q){(null===Q||void 0===Q?0:Q.code)&&Q.message&&403===Q.code?(Q="\x3cp\x3e".concat(this.i18n.emailInvitation,"\x3c/p\x3e\x3cp\x3e").concat(this.i18n.clickOkSignIn,"\x3c/p\x3e"),c.default.createConfirmationDialog({strings:{title:this.i18n.notice,
description:Q},hideCancel:!0,autoCloseOnOk:!0,renderHtmlDescription:!0,onOk:function(){window.location.href="".concat(d.default.baseUrl.replace("http:","https:")).concat(d.default.signin)}})):(null===Q||void 0===Q?0:Q.code)&&Q.message&&400===Q.code?(Q="\x3cp\x3e".concat(this.i18n.invitationUsedMsg,"\x3c/p\x3e\x3cp\x3e").concat(this.i18n.clickOkSignIn,"\x3c/p\x3e"),c.default.createConfirmationDialog({strings:{title:this.i18n.notice,description:Q},hideCancel:!0,autoCloseOnOk:!0,renderHtmlDescription:!0,
onOk:function(){window.location.href="".concat(q.default.getSecureUrl()).concat(d.default.signin)}})):(null===Q||void 0===Q?void 0:Q.id)===this.invitation?this.invitationOrgName=Q.account.name:this.invitation=null};K.prototype.acceptFail=function(){var Q=this;c.default.createConfirmationDialog({strings:{title:this.i18n.unableToJoin,description:this.i18n.problemJoining},hideCancel:!0,autoCloseOnOk:!0,onOk:function(){e.default.disableNode(Q._createAccountBtn,!1);x.default.set(Q._createAccountBtn,"innerHTML",
Q.i18n.createAcc)}})};K.prototype.usernameChange=function(){var Q=q.default.stripHTML(D.default.trim(this._username.value)),P=this.handleCheckUsername.bind(this);m.default.checkUsernames([q.default.stripHTML(Q)],P,P)};K.prototype.identityQuestionChange=function(){var Q=this._identityQuestion.value;this._identityQuestionID=Q?parseInt(Q,10):void 0;this.validIdentityQuestion()};K.prototype.handleCheckUsername=function(Q){this.isValidUsername=!1;var P=q.default.stripHTML(D.default.trim(this._username.value));
!Q||Q.code||Q.message?Q.messageCode&&"DB_0006"===Q.messageCode?this.showErrorMessage(this.i18n.error.restrictedCharacters):P?this.showErrorMessage(this.i18n.error.checkingUsername):this.isValidUsername=!0:0<(null===Q||void 0===Q?void 0:Q.usernames.length)&&P===Q.usernames[0].suggested&&(this.isValidUsername=!0);this.validUsername()};K.prototype.signUpError=function(Q){e.default.disableNode(this._createAccountBtn,!1);x.default.set(this._createAccountBtn,"innerHTML",this.i18n.createAccount);var P=this.i18n.unableCreateAccount,
I=this.i18n.contactAdmin;-1<Q.message.indexOf("already registered")&&(I=this.i18n.error.emailInUse);-1<Q.message.indexOf("Username '")&&-1<Q.message.indexOf("' not available.")&&(I=this.i18n.error.usernameInValid);Q='\x3cb style\x3d"font-size:1.2em;line-height:30px;"\x3e'.concat(P,'\x3c/b\x3e\x3cbr\x3e\x3cspan style\x3d"color:#000000;"\x3e').concat(I,"\x3c/span\x3e\x3cbr\x3e\x26nbsp;");this.showErrorMessage(Q)};K.prototype.signInError=function(){e.default.disableNode(this._createAccountBtn,!1);x.default.set(this._createAccountBtn,
"innerHTML",this.i18n.createAccount);var Q='\x3cb style\x3d"font-size:1.2em;line-height:30px;"\x3e'.concat(this.i18n.unableSignAuto,'\x3c/b\x3e\x3cbr\x3e\x3cspan style\x3d"color:#000000;"\x3e').concat(this.i18n.pleaseTrySignManually,"\x3c/span\x3e\x3cbr\x3e\x26nbsp;");this.showErrorMessage(Q)};K.prototype.showErrorMessage=function(Q){c.default.createConfirmationDialog({strings:{title:this.i18n.errorTitle,description:Q},renderHtmlDescription:!0,hideCancel:!0,autoCloseOnOk:!0})};K.prototype.usernameContainsAlphaNumeric=
function(Q){var P=/^[a-zA-Z0-9@_.]+$/g;return Q&&!!P.test(Q)};K.prototype.usernameValidStartEnd=function(Q){var P=/^([a-zA-Z0-9_][a-zA-Z0-9@_\-.]+[a-zA-Z0-9_])?$/g;return Q&&P.test(Q)};K.prototype.validFirstName=function(){var Q=D.default.trim(this._firstname.value);r.default.clearState([this._firstname,this._firstnameError]);if(F.default.isDefined(Q)&&""!==Q)return r.default.setValidState(this._firstname),!0;r.default.setInvalidState(this._firstname,this._firstnameError,this.i18n.error.firstNameReqd);
return!1};K.prototype.validLastName=function(){var Q=D.default.trim(this._lastname.value);r.default.clearState([this._lastname,this._lastnameError]);if(F.default.isDefined(Q)&&""!==Q)return r.default.setValidState(this._lastname),!0;r.default.setInvalidState(this._lastname,this._lastnameError,this.i18n.error.lastNameReqd);return!1};K.prototype.validEmail=function(){var Q=D.default.trim(this._email.value);r.default.clearState([this._email,this._emailError]);if(F.default.isDefined(Q)&&0!==Q.length&&
q.default.isValidEmailAddress(Q))return r.default.setValidState(this._email),!0;r.default.setInvalidState(this._email,this._emailError,this.i18n.error.emailReqd);return!1};K.prototype.validConfirmEmail=function(){var Q=D.default.trim(this._email.value),P=D.default.trim(this._confirmEmail.value);r.default.clearState([this._confirmEmail,this._confirmEmailError]);if(F.default.isDefined(P)&&0!==P.length&&q.default.isValidEmailAddress(P)){if(Q!==P)return r.default.setInvalidState(this._confirmEmail,this._confirmEmailError,
this.i18n.error.confirmEmailNoMatch),!1;r.default.setValidState(this._confirmEmail);return!0}r.default.setInvalidState(this._confirmEmail,this._confirmEmailError,this.i18n.error.confirmEmailReqd);return!1};K.prototype.validUsername=function(){var Q=q.default.stripHTML(D.default.trim(this._username.value));r.default.clearState([this._username,this._usernameError]);if(F.default.isDefined(Q)&&""!==Q){if(6>Q.length)return r.default.setInvalidState(this._username,this._usernameError,this.i18n.usernameTooShort),
!1;if(128<Q.length)return r.default.setInvalidState(this._username,this._usernameError,this.i18n.usernameTooLong),!1;if(this.usernameContainsAlphaNumeric(Q)){if(this.usernameValidStartEnd(Q)){if(this.isValidUsername)return r.default.setValidState(this._username),!0;Q=D.default.substitute(this.i18n.error.usernameInUse,{username:Q,linkStart:'\x3cspan class\x3d"esriItemLinks"\x3e\x3ca href\x3d"'.concat(q.default.getSecureUrl(d.default.baseUrl)).concat(d.default.signin).concat(window.location.search,
'"\x3e'),linkEnd:"\x3c/a\x3e\x3c/span\x3e"});r.default.setInvalidState(this._username,this._usernameError,Q);return!1}r.default.setInvalidState(this._username,this._usernameError,this.i18n.usernameStartEndChars)}else return r.default.setInvalidState(this._username,this._usernameError,this.i18n.usernameInvalidChars),!1}else return r.default.setInvalidState(this._username,this._usernameError,this.i18n.error.userReqd),!1};K.prototype.validPassword=function(){var Q=this,P=q.default.stripHTML(D.default.trim(this._username.value)),
I=D.default.trim(this._pwd.value);r.default.clearState([this._pwd,this._pwdError]);return this._strengthMeter.update(I).then(function(N){if(F.default.isDefined(I)&&""!==I){if(Q._passwordPolicy){if(!N.isValidStrength)return r.default.setInvalidState(Q._pwd,Q._pwdError,Q.i18n.passwordTooWeak),!1;if(N.isValid){if(P.toLowerCase()===I.toLowerCase())return r.default.setInvalidState(Q._pwd,Q._pwdError,Q.i18n.passwordNotToPolicy),!1;r.default.setValidState(Q._pwd);return!0}if(!1===N.longEnough)return r.default.setInvalidState(Q._pwd,
Q._pwdError,D.default.substitute(Q.i18n.error.passwordLength,{num:Q._passwordPolicy.minLength})),!1;if(!1===N.enoughLetter)return r.default.setInvalidState(Q._pwd,Q._pwdError,D.default.substitute(Q.i18n.error.passwordLetter,{num:Q._passwordPolicy.minLetter})),!1;if(!1===N.enoughUpper)return r.default.setInvalidState(Q._pwd,Q._pwdError,D.default.substitute(Q.i18n.error.passwordUpper,{num:Q._passwordPolicy.minUpper})),!1;if(!1===N.enoughLower)return r.default.setInvalidState(Q._pwd,Q._pwdError,D.default.substitute(Q.i18n.error.passwordLower,
{num:Q._passwordPolicy.minLower})),!1;if(!1===N.enoughDigit)return r.default.setInvalidState(Q._pwd,Q._pwdError,D.default.substitute(Q.i18n.error.passwordDigit,{num:Q._passwordPolicy.minDigit})),!1;if(!1===N.enoughOther)return r.default.setInvalidState(Q._pwd,Q._pwdError,D.default.substitute(Q.i18n.error.passwordOther,{num:Q._passwordPolicy.minOther})),!1;r.default.setValidState(Q._pwd);return!0}if(N.isValidStrength){if(8>I.length||28<I.length)return r.default.setInvalidState(Q._pwd,Q._pwdError,Q.i18n.error.invalidPassword),
!1;if(P.toLowerCase()===I.toLowerCase())return r.default.setInvalidState(Q._pwd,Q._pwdError,Q.i18n.passwordNotToPolicy),!1;r.default.setValidState(Q._pwd);return!0}r.default.setInvalidState(Q._pwd,Q._pwdError,Q.i18n.passwordTooWeak);return!1}r.default.setInvalidState(Q._pwd,Q._pwdError,Q.i18n.error.passReqd);return!1})};K.prototype.validVerifyPassword=function(){var Q=D.default.trim(this._pwd.value),P=D.default.trim(this._verifyPwd.value);r.default.clearState([this._verifyPwd,this._verifyPwdError]);
if(Q!==P)return r.default.setInvalidState(this._verifyPwd,this._verifyPwdError,this.i18n.error.passwordsNotMatch),!1;r.default.setValidState(this._verifyPwd);return!0};K.prototype.validIdentityQuestion=function(){r.default.clearState([this._identityQuestion,this._identityQuestionError]);if(!this._identityQuestionID||1>this._identityQuestionID)return r.default.setInvalidState(this._identityQuestion,this._identityQuestionError,this.i18n.error.questionSelection),!1;r.default.setValidState(this._identityQuestion);
return!0};K.prototype.validIdentityAnswer=function(){var Q=D.default.trim(this._identityAnswer.value);r.default.clearState([this._identityAnswer,this._identityAnswerError]);if(F.default.isDefined(Q)&&""!==Q){if(60<Q.length)return r.default.setInvalidState(this._identityAnswer,this._identityAnswerError,this.i18n.error.answerTooLong),!1;r.default.setValidState(this._identityAnswer);return!0}r.default.setInvalidState(this._identityAnswer,this._identityAnswerError,this.i18n.error.answerIsBlank);return!1};
K.prototype.validates=function(){var Q=this,P=[this.validFirstName(),this.validLastName(),this.validEmail(),this.validConfirmEmail(),this.validUsername(),this.validVerifyPassword(),this.validIdentityQuestion(),this.validIdentityAnswer()].every(function(I){return!0===I});return this.validPassword().then(function(I){(P=P&&I)||r.default.focusFirstInvalidInput(Q._form.domNode);return P})};K.prototype.fetchInvitation=function(){var Q="".concat(this._communityUri,"invitations/").concat(this.invitation);
return q.default.request({url:Q})};K.prototype.handleError=function(Q){var P,I;Q=Q.error||Q||{};Q.code=Q.code||0;Q=this.i18n.errors[Q.code]||Q;Q.details=(null===(P=Q.details)||void 0===P?0:P.length)?Q.details.filter(function(N){return null!==N}):null;if(null===(I=Q.details)||void 0===I?0:I.length)Q.details=Q.details.join("\x3cbr /\x3e"),Q.message=Q.message?"".concat(Q.message,"\x3cbr\x3e").concat(Q.details):Q.details;Q=l.__assign(l.__assign({},this.i18n.errors.error),Q);this.showErrorMessage(Q.message);
return!0};return K=l.__decorate([(0,n.default)(g.default,k.default,b.default)],K)}()})},"arcgisonline/pages/dijit/PasswordStrength":function(){define("require exports tslib dojo/text!./PasswordStrength/templates/PasswordStrength.html dojo/i18n!../../nls/arcgisonline dojo/Deferred dijit/_TemplatedMixin dijit/_WidgetBase ../utils/icons ../utils/dom ../utils/organization ../../tsutils/declareDecorator".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);
t=l.__importDefault(t);e=l.__importDefault(e);r=l.__importDefault(r);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);return function(){function q(n,k){this.templateString=d.default;this.i18n=c.default;this.icons=r.default}q.prototype.postCreate=function(){var n,k,g;this.inherited(arguments);var b=null!==(k=null===(n=this.portal.helpMap)||void 0===n?void 0:n.m)&&void 0!==k?k:{};n=this.portal.helpBase+(null!==(g=b["120001688"])&&void 0!==g?g:"");this._moreInfo.href=n};q.prototype.update=
function(n){var k=this,g,b=new u.default;(null===(g=this._previousResult)||void 0===g?void 0:g.password)===n?b.resolve(this._previousResult):n?a.default.checkPasswordStrength(n).then(function(x){var v=x.strength;k._strengthLabel.className="password-strength__label--".concat(v);k._strengthLabel.textContent=k.i18n.passwordStrengthMeter["score".concat(v)];k._strengthMeterFill.className="password-strength-meter__fill password-strength-meter__fill--".concat(v);var y=Object.keys(x).every(function(D){var E=
x[D];return"strength"===D?1<E:!1!==E});y?m.default.hideNode(k._moreInfo):m.default.showNode(k._moreInfo);k._previousResult=l.__assign({password:n,isValidStrength:1<v,isValid:y},x);b.resolve(k._previousResult)}):(this._strengthLabel.className="",this._strengthLabel.textContent=this.i18n.passwordStrengthMeter.none,this._strengthMeterFill.className="password-strength-meter__fill password-strength-meter__fill--unknown",this._previousResult={password:n,isValid:!1,isValidStrength:!1},b.resolve(this._previousResult));
return b};return q=l.__decorate([(0,h.default)(e.default,t.default)],q)}()})},"arcgisonline/pages/utils/validation":function(){define(["require","exports"],function(f,B){return function(){function l(){}l.clearState=function(d){null===d||void 0===d?void 0:d.forEach(function(c){var u,t,e;null===c||void 0===c?void 0:c.removeAttribute("aria-live");null===(u=null===c||void 0===c?void 0:c.classList)||void 0===u?void 0:u.remove("input-success");null===(t=null===c||void 0===c?void 0:c.classList)||void 0===
t?void 0:t.remove("input-error");null===(e=null===c||void 0===c?void 0:c.classList)||void 0===e?void 0:e.remove("is-active")})};l.setValidState=function(d){var c;null===(c=null===d||void 0===d?void 0:d.classList)||void 0===c?void 0:c.add("input-success")};l.setInvalidState=function(d,c,u,t){var e,r,m;null===(e=null===d||void 0===d?void 0:d.classList)||void 0===e?void 0:e.add("input-error");null===(r=null===c||void 0===c?void 0:c.classList)||void 0===r?void 0:r.add("is-active");c&&u&&(null===c||void 0===
c?void 0:c.setAttribute("aria-live","polite"),c.innerHTML=u);t&&(null===(m=null===d||void 0===d?void 0:d.focus)||void 0===m?void 0:m.call(d))};l.focusFirstInvalidInput=function(d){var c;d=null!==(c=null===d||void 0===d?void 0:d.querySelector(".input-error"))&&void 0!==c?c:void 0;(null===d||void 0===d?0:d.focus)&&d.focus()};l.toggleError=function(d,c,u,t){u?l.setInvalidState(d,c,t):l.clearState([d,c])};return l}()})},"arcgisonline/sharing/dijit/HelpManager":function(){define("require exports tslib ../../esriGeowConfig ../util ../../tsutils/declareDecorator dijit/_WidgetBase".split(" "),
function(f,B,l,d,c,u,t){d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);var e=function(){function r(){this.helpTopics=this.helpBaseUrl=null;this._isSingleTenant=!1}r.prototype.postCreate=function(){this._isSingleTenant=void 0!==d.default.isMultiTenant&&null!==d.default.isMultiTenant&&!1===d.default.isMultiTenant;this.helpBaseUrl=d.default.self.helpBase;this._load()};r.prototype._load=function(){var m=this,a;(null===(a=d.default.self.helpMap)||void 0===a?
0:a.m)?(this.helpTopics=d.default.self.helpMap.m,this.onLoad(this.helpBaseUrl,this.helpTopics)):(a="".concat(d.default.restBaseUrl,"portals/helpmap"),c.default.request({url:a}).then(function(h){!h||h.code||h.message||(m.helpTopics=h.helpMap&&h.helpMap.m||{},m.onLoad(m.helpBaseUrl,m.helpTopics))}))};r.prototype.onLoad=function(m,a){};r.prototype.isLoaded=function(){return!(!this.helpBaseUrl||!this.helpTopics)};r.prototype.getHelpUrl=function(m){return this.isLoaded()?"".concat(this.helpBaseUrl).concat(this.helpTopics[m]):
"#"};return r=l.__decorate([(0,u.default)(t.default)],r)}();e.prototype.statics={_instance:null,getInstance:function(){null===this._instance&&(this._instance=new e);return this._instance}};return e})},"dojox/widget/rotator/Fade":function(){define(["dojo/_base/lang","dojo/_base/fx","dojo/dom-style","dojo/fx"],function(f,B,l,d){function c(t,e){var r=t.next.node;l.set(r,{display:"",opacity:0});t.node=t.current.node;return d[e]([B.fadeOut(t),B.fadeIn(f.mixin(t,{node:r}))])}var u={fade:function(t){return c(t,
"chain")},crossFade:function(t){return c(t,"combine")}};f.mixin(f.getObject("dojox.widget.rotator"),u);return u})},"dijit/layout/StackController":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/topic ../focus ../registry ../_Widget ../_TemplatedMixin ../_Container ../form/ToggleButton dojo/touch".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h,q,n){d=B("dijit.layout._StackButton",n,{tabIndex:"-1",closeButton:!1,_aria_attr:"aria-selected",
buildRendering:function(k){this.inherited(arguments);(this.focusNode||this.domNode).setAttribute("role","tab")}});B=B("dijit.layout.StackController",[a,h,q],{baseClass:"dijitStackController",templateString:"\x3cspan role\x3d'tablist' data-dojo-attach-event\x3d'onkeydown'\x3e\x3c/span\x3e",containerId:"",buttonWidget:d,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(k){return m.byId(this.id+"_"+k)},postCreate:function(){this.inherited(arguments);this.own(e.subscribe(this.containerId+
"-startup",u.hitch(this,"onStartup")),e.subscribe(this.containerId+"-addChild",u.hitch(this,"onAddChild")),e.subscribe(this.containerId+"-removeChild",u.hitch(this,"onRemoveChild")),e.subscribe(this.containerId+"-selectChild",u.hitch(this,"onSelectChild")),e.subscribe(this.containerId+"-containerKeyDown",u.hitch(this,"onContainerKeyDown")));this.containerNode.dojoClick=!0;this.own(t(this.containerNode,"click",u.hitch(this,function(k){var g=m.getEnclosingWidget(k.target);if(g!=this.containerNode&&
!g.disabled&&g.page)for(k=k.target;k!==this.containerNode;k=k.parentNode)if(l.contains(k,this.buttonWidgetCloseClass)){this.onCloseButtonClick(g.page);break}else if(k==g.domNode){this.onButtonClick(g.page);break}})))},onStartup:function(k){this.textDir=k.textDir;f.forEach(k.children,this.onAddChild,this);if(k.selected)this.onSelectChild(k.selected);var g=m.byId(this.containerId).containerNode,b=u.hitch(this,"pane2button");k={title:"label",showtitle:"showLabel",iconclass:"iconClass",closable:"closeButton",
tooltip:"title",disabled:"disabled",textdir:"textdir"};var x=function(y,D){return t(g,"attrmodified-"+y,function(E){var C=b(E.detail&&E.detail.widget&&E.detail.widget.id);C&&C.set(D,E.detail.newValue)})},v;for(v in k)this.own(x(v,k[v]))},destroy:function(k){this.destroyDescendants(k);this.inherited(arguments)},onAddChild:function(k,g){var b=new (u.isString(this.buttonWidget)?u.getObject(this.buttonWidget):this.buttonWidget)({id:this.id+"_"+k.id,name:this.id+"_"+k.id,label:k.title,disabled:k.disabled,
ownerDocument:this.ownerDocument,dir:k.dir,lang:k.lang,textDir:k.textDir||this.textDir,showLabel:k.showTitle,iconClass:k.iconClass,closeButton:k.closable,title:k.tooltip,page:k});this.addChild(b,g);k.controlButton=b;if(!this._currentChild)this.onSelectChild(k);g=k._wrapper.getAttribute("aria-labelledby")?k._wrapper.getAttribute("aria-labelledby")+" "+b.id:b.id;k._wrapper.removeAttribute("aria-label");k._wrapper.setAttribute("aria-labelledby",g)},onRemoveChild:function(k){this._currentChild===k&&(this._currentChild=
null);var g=this.pane2button(k.id);g&&(this.removeChild(g),g.destroy());delete k.controlButton},onSelectChild:function(k){if(k){if(this._currentChild){var g=this.pane2button(this._currentChild.id);g.set("checked",!1);g.focusNode.setAttribute("tabIndex","-1")}g=this.pane2button(k.id);g.set("checked",!0);this._currentChild=k;g.focusNode.setAttribute("tabIndex","0");m.byId(this.containerId)}},onButtonClick:function(k){var g=this.pane2button(k.id);r.focus(g.focusNode);this._currentChild&&this._currentChild.id===
k.id&&g.set("checked",!0);m.byId(this.containerId).selectChild(k)},onCloseButtonClick:function(k){m.byId(this.containerId).closeChild(k);this._currentChild&&(k=this.pane2button(this._currentChild.id))&&r.focus(k.focusNode||k.domNode)},adjacent:function(k){this.isLeftToRight()||this.tabPosition&&!/top|bottom/.test(this.tabPosition)||(k=!k);var g=this.getChildren(),b=f.indexOf(g,this.pane2button(this._currentChild.id)),x=g[b];do{b=(b+(k?1:g.length-1))%g.length;var v=g[b]}while(v.disabled&&v!=x);return v},
onkeydown:function(k,g){if(!this.disabled&&!k.altKey&&(g=null,k.ctrlKey||!k._djpage)){switch(k.keyCode){case c.LEFT_ARROW:case c.UP_ARROW:k._djpage||(g=!1);break;case c.PAGE_UP:k.ctrlKey&&(g=!1);break;case c.RIGHT_ARROW:case c.DOWN_ARROW:k._djpage||(g=!0);break;case c.PAGE_DOWN:k.ctrlKey&&(g=!0);break;case c.HOME:for(var b=this.getChildren(),x=0;x<b.length;x++){var v=b[x];if(!v.disabled){this.onButtonClick(v.page);break}}k.stopPropagation();k.preventDefault();break;case c.END:b=this.getChildren();
for(x=b.length-1;0<=x;x--)if(v=b[x],!v.disabled){this.onButtonClick(v.page);break}k.stopPropagation();k.preventDefault();break;case c.DELETE:case 87:this._currentChild.closable&&(k.keyCode==c.DELETE||k.ctrlKey)&&(this.onCloseButtonClick(this._currentChild),k.stopPropagation(),k.preventDefault());break;case c.TAB:k.ctrlKey&&(this.onButtonClick(this.adjacent(!k.shiftKey).page),k.stopPropagation(),k.preventDefault())}null!==g&&(this.onButtonClick(this.adjacent(g).page),k.stopPropagation(),k.preventDefault())}},
onContainerKeyDown:function(k){k.e._djpage=k.page;this.onkeydown(k.e)}});B.StackButton=d;return B})},"dijit/form/ComboButton":function(){define("dojo/_base/declare dojo/keys ../focus ./DropDownButton dojo/text!./templates/ComboButton.html ../a11yclick".split(" "),function(f,B,l,d,c){return f("dijit.form.ComboButton",d,{templateString:c,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{buttonNode:"dijitButtonNode",
titleNode:"dijitButtonContents",_popupStateNode:"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyDown:function(u){u.keyCode==B[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]&&(l.focus(this._popupStateNode),u.stopPropagation(),u.preventDefault())},_onArrowKeyDown:function(u){u.keyCode==B[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]&&(l.focus(this.titleNode),u.stopPropagation(),u.preventDefault())},focus:function(u){this.disabled||l.focus("start"==u?this.titleNode:this._popupStateNode)}})})},
"dijit/form/RadioButton":function(){define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(f,B,l){return f("dijit.form.RadioButton",[B,l],{baseClass:"dijitRadio"})})},"dijit/form/_RadioButtonMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/lang dojo/query!css2 ../registry".split(" "),function(f,B,l,d,c,u){return B("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var t=[];c("input[type\x3dradio]",this.focusNode.form||
this.ownerDocument).forEach(d.hitch(this,function(e){e.name==this.name&&e.form==this.focusNode.form&&(e=u.getEnclosingWidget(e))&&t.push(e)}));return t},_setCheckedAttr:function(t){this.inherited(arguments);this._created&&t&&f.forEach(this._getRelatedWidgets(),d.hitch(this,function(e){e!=this&&e.checked&&e.set("checked",!1)}))},_getSubmitValue:function(t){return null==t?"on":t},_onClick:function(t){if(this.checked||this.disabled)return t.stopPropagation(),t.preventDefault(),!1;if(this.readOnly)return t.stopPropagation(),
t.preventDefault(),f.forEach(this._getRelatedWidgets(),d.hitch(this,function(m){l.set(this.focusNode||this.domNode,"checked",m.checked)})),!1;var e=!1,r;f.some(this._getRelatedWidgets(),function(m){return m.checked?(r=m,!0):!1});this.checked=!0;r&&(r.checked=!1);if(!1===this.onClick(t)||t.defaultPrevented)e=!0;this.checked=!1;r&&(r.checked=!0);e?t.preventDefault():this.set("checked",!0);return!e}})})},"dijit/PopupMenuItem":function(){define("dojo/_base/declare dojo/dom-style dojo/_base/lang dojo/query ./popup ./registry ./MenuItem ./hccss".split(" "),
function(f,B,l,d,c,u,t){return f("dijit.PopupMenuItem",t,{baseClass:"dijitMenuItem dijitPopupMenuItem",_fillContent:function(){if(this.srcNodeRef){var e=d("*",this.srcNodeRef);this.inherited(arguments,[e[0]]);this.dropDownContainer=this.srcNodeRef}},_openPopup:function(e,r){var m=this.popup;c.open(l.delegate(e,{popup:this.popup,around:this.domNode}));r&&m.focus&&m.focus()},_closePopup:function(){c.close(this.popup);this.popup.parentMenu=null},startup:function(){if(!this._started){this.inherited(arguments);
if(!this.popup){var e=d("[widgetId]",this.dropDownContainer)[0];this.popup=u.byNode(e)}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id);this.popup.startup();this.popup.domNode.style.display="none";this.arrowWrapper&&B.set(this.arrowWrapper,"visibility","");this.focusNode.setAttribute("aria-haspopup","true")}},destroyDescendants:function(e){this.popup&&(this.popup._destroyed||this.popup.destroyRecursive(e),delete this.popup);
this.inherited(arguments)}})})},"dojo/dnd/AutoSource":function(){define(["../_base/declare","./Source"],function(f,B){return f("dojo.dnd.AutoSource",B,{constructor:function(){this.autoSync=!0}})})},"dojo/dnd/Target":function(){define(["../_base/declare","../dom-class","./Source"],function(f,B,l){return f("dojo.dnd.Target",l,{constructor:function(){this.isSource=!1;B.remove(this.node,"dojoDndSource")}})})},"dojo/fx/Toggler":function(){define(["../_base/lang","../_base/declare","../_base/fx","../aspect"],
function(f,B,l,d){return B("dojo.fx.Toggler",null,{node:null,showFunc:l.fadeIn,hideFunc:l.fadeOut,showDuration:200,hideDuration:200,constructor:function(c){f.mixin(this,c);this.node=c.node;this._showArgs=f.mixin({},c);this._showArgs.node=this.node;this._showArgs.duration=this.showDuration;this.showAnim=this.showFunc(this._showArgs);this._hideArgs=f.mixin({},c);this._hideArgs.node=this.node;this._hideArgs.duration=this.hideDuration;this.hideAnim=this.hideFunc(this._hideArgs);d.after(this.showAnim,
"beforeBegin",f.hitch(this.hideAnim,"stop",!0),!0);d.after(this.hideAnim,"beforeBegin",f.hitch(this.showAnim,"stop",!0),!0)},show:function(c){return this.showAnim.play(c||0)},hide:function(c){return this.hideAnim.play(c||0)}})})},"dijit/MenuSeparator":function(){define("dojo/_base/declare dojo/dom ./_WidgetBase ./_TemplatedMixin ./_Contained dojo/text!./templates/MenuSeparator.html".split(" "),function(f,B,l,d,c,u){return f("dijit.MenuSeparator",[l,d,c],{templateString:u,buildRendering:function(){this.inherited(arguments);
B.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dojo/selector/lite":function(){define(["../has","../_base/kernel"],function(f,B){var l=document.createElement("div"),d=l.matches||l.webkitMatchesSelector||l.mozMatchesSelector||l.msMatchesSelector||l.oMatchesSelector,c=l.querySelectorAll,u=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g;f.add("dom-matches-selector",!!d);f.add("dom-qsa",!!c);var t=function(a,h){if(m&&-1<a.indexOf(","))return m(a,h);var q=h?h.ownerDocument||
h:B.doc||document,n=(c?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(a);h=h||q;if(n){var k=8===f("ie")&&f("quirks")?h.nodeType===q.nodeType:null!==h.parentNode&&9!==h.nodeType&&h.parentNode===q;if(n[2]&&k){var g=B.byId?B.byId(n[2],q):q.getElementById(n[2]);if(!g||n[1]&&n[1]!=g.tagName.toLowerCase())return[];if(h!=q)for(a=g;a!=h;)if(a=a.parentNode,!a)return[];return n[3]?t(n[3],g):[g]}if(n[3]&&h.getElementsByClassName)return h.getElementsByClassName(n[4]);
if(n[5])if(g=h.getElementsByTagName(n[5]),n[4]||n[6])a=(n[4]||"")+n[6];else return g}if(c)return 1===h.nodeType&&"object"!==h.nodeName.toLowerCase()?e(h,a,h.querySelectorAll):h.querySelectorAll(a);g||(g=h.getElementsByTagName("*"));n=[];q=0;for(k=g.length;q<k;q++){var b=g[q];1==b.nodeType&&r(b,a,h)&&n.push(b)}return n},e=function(a,h,q){var n=a,k=a.getAttribute("id"),g=k||"__dojo__",b=a.parentNode,x=/^\s*[+~]/.test(h);if(x&&!b)return[];k?g=g.replace(/'/g,"\\$\x26"):a.setAttribute("id",g);x&&b&&(a=
a.parentNode);h=h.match(u);for(b=0;b<h.length;b++)h[b]="[id\x3d'"+g+"'] "+h[b];h=h.join(",");try{return q.call(a,h)}finally{k||n.removeAttribute("id")}};if(!f("dom-matches-selector"))var r=function(){function a(v,y,D){var E=y.charAt(0);if('"'==E||"'"==E)y=y.slice(1,-1);y=y.replace(/\\/g,"");var C=b[D||""];return function(z){return(z=z.getAttribute(v))&&C(z,y)}}function h(v){return function(y,D){for(;(y=y.parentNode)!=D;)if(v(y,D))return!0}}function q(v){return function(y,D){y=y.parentNode;return v?
y!=D&&v(y,D):y==D}}function n(v,y){return v?function(D,E){return y(D)&&v(D,E)}:y}var k="div"==l.tagName?"toLowerCase":"toUpperCase",g={"":function(v){v=v[k]();return function(y){return y.tagName==v}},".":function(v){var y=" "+v+" ";return function(D){return-1<D.className.indexOf(v)&&-1<(" "+D.className+" ").indexOf(y)}},"#":function(v){return function(y){return y.id==v}}},b={"^\x3d":function(v,y){return 0==v.indexOf(y)},"*\x3d":function(v,y){return-1<v.indexOf(y)},"$\x3d":function(v,y){return v.substring(v.length-
y.length,v.length)==y},"~\x3d":function(v,y){return-1<(" "+v+" ").indexOf(" "+y+" ")},"|\x3d":function(v,y){return 0==(v+"-").indexOf(y+"-")},"\x3d":function(v,y){return v==y},"":function(v,y){return!0}},x={};return function(v,y,D){var E=x[y];if(!E){if(y.replace(/(?:\s*([> ])\s*)|(#|\.)?((?:\\.|[\w-])+)|\[\s*([\w-]+)\s*(.?=)?\s*("(?:\\.|[^"])+"|'(?:\\.|[^'])+'|(?:\\.|[^\]])*)\s*\]/g,function(C,z,w,A,G,F,H){A?E=n(E,g[w||""](A.replace(/\\/g,""))):z?E=(" "==z?h:q)(E):G&&(E=n(E,a(G,H,F)));return""}))throw Error("Syntax error in query");
if(!E)return!0;x[y]=E}return E(v,D)}}();if(!f("dom-qsa"))var m=function(a,h){for(var q=a.match(u),n=[],k=0;k<q.length;k++){a=new String(q[k].replace(/\s*$/,""));a.indexOf=escape;a=t(a,h);for(var g=0,b=a.length;g<b;g++){var x=a[g];n[x.sourceIndex]=x}}h=[];for(k in n)h.push(n[k]);return h};t.match=d?function(a,h,q){return q&&9!=q.nodeType?e(q,h,function(n){return d.call(a,n)}):d.call(a,h)}:r;return t})},"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/GeneralDlg.html":'\x3cdiv class\x3d"widgetContent"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"_dialog" id\x3d"general-dialog-${id}" class\x3d"general-dialog" title\x3d"${i18n.notificationDlgTitle}" role\x3d"alertdialog" aria-labelledby\x3d"general-dialog-${id} general-dialog-content"\x3e\r\n    \x3cdiv id\x3d"general-dialog-content" class\x3d"general-dialog-content"\x3e\x3c/div\x3e\r\n    \x3cbr\x3e\r\n    \x3cdiv class\x3d"esriFloatTrailing clearfix right"\x3e\r\n      \x3cbutton id\x3d"button_general-close" data-dojo-attach-point\x3d"_okBtn" data-dojo-attach-event\x3d"onClick:onOkClick" class\x3d"jevent primary right" data-dojo-type\x3d"dijit/form/Button"\x3e${i18n.ok}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n      \x3cbr style\x3d"clear:both;"\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/actionBar.html":'\x3cdiv class\x3d"dijitDialogPaneActionBar esriAlignTrailing right clearfix" data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n  \x3cspan class\x3d"busyMessage hide inline-block padding-leader-quarter padding-right-1 left" data-dojo-attach-point\x3d"busyMessageSpan"\x3e\x3c/span\x3e\r\n  \x3cbutton class\x3d"calcite cancel right" data-dojo-type\x3d"dijit/form/Button" type\x3d"button" data-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"click:onCancel"\x3e\x3c/button\x3e\r\n  \x3cbutton class\x3d"calcite primary right js-submit-button" data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"okButton"\x3e\x3c/button\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      if (window.origin !\x3d\x3d "null") {\r\n        return; // page is not in an iframe sandbox\r\n      }\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/DownloadImageDlg.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"dialog" title\x3d"${_i18nStrings.downloadImageDlg.title}"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"message"\x3e\x3c/div\x3e\r\n    \x3cdiv\x3e\r\n      \x3cdiv class\x3d"esriFloatTrailing" style\x3d"margin-top: 1em;"\x3e\r\n        \x3cbutton class\x3d"jevent cancel" data-dojo-attach-point\x3d"_cancelBtn" disabled data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-event\x3d"onClick:_handleCancelButtonClick"\x3e${_i18nStrings.common.cancel}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/authoritative.html":'\x3cspan class\x3d"badge badge--authoritative ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cg fill\x3d"#2B622B"\x3e\x3cpath d\x3d"M8 0a8 8 0 1 0 8 8 8.01 8.01 0 0 0-8-8zm0 15a7 7 0 1 1 7-7 7.008 7.008 0 0 1-7 7z"/\x3e\x3cpath d\x3d"M11.834 5.146l-5.646 5.647-2.334-2.334a.5.5 0 0 0-.708.707l3.042 3.041 6.353-6.353a.5.5 0 1 0-.707-.707z"/\x3e\x3c/g\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.authoritative}\x3c/span\x3e\r\n\x3c/span\x3e',
"url:arcgisonline/pages/dijit/Card/badges/deprecated.html":'\x3cspan class\x3d"badge badge--deprecated ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath fill\x3d"#8C2907" d\x3d"M8 0a8 8 0 1 0 8 8 8.01 8.01 0 0 0-8-8zM1 8a6.99 6.99 0 0 1 11.577-5.284l-9.861 9.861A6.964 6.964 0 0 1 1 8zm7 7a6.964 6.964 0 0 1-4.577-1.716l9.861-9.861A6.99 6.99 0 0 1 8 15z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.deprecated}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/solution.html":'\x3cspan class\x3d"badge badge--solution ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 32 32"\x3e\r\n    \x3cpath fill\x3d"#312b43" d\x3d"M29.963 7.672a1.586 1.586 0 0 0-1.584-1.585h-5.274a.187.187 0 0 1-.188-.187V3.977A2 2 0 0 0 20.825 2h-9.672A2.095 2.095 0 0 0 9.06 4.093V5.9a.187.187 0 0 1-.187.187H3.598a1.586 1.586 0 0 0-1.584 1.585v4.016a.281.281 0 0 0 .281.28H4.9l.014-.013V9.153a.177.177 0 0 1 .177-.177h21.46a.456.456 0 0 1 .449.45v13.742A1.832 1.832 0 0 1 25.168 25h-8.892a.568.568 0 0 1-.534-.373 3.98 3.98 0 0 0-7.6.373H5.657a.757.757 0 0 1-.757-.757v-3.055A.188.188 0 0 0 4.714 21H2.028l-.014.014v4.58a2.35 2.35 0 0 0 2.347 2.346h4.161a3.963 3.963 0 0 0 6.8.256.569.569 0 0 1 .475-.256h12.065a2.102 2.102 0 0 0 2.101-2.101zM21 5.625a.375.375 0 0 1-.375.375h-9.25A.375.375 0 0 1 11 5.625V4.45a.456.456 0 0 1 .45-.45h9.1a.456.456 0 0 1 .45.45zM12 28a2 2 0 1 1 2-2 2 2 0 0 1-2 2z"/\x3e\r\n    \x3cpath class\x3d"cls-1" d\x3d"M13.273 17.994a.57.57 0 0 1 .479.262A3.73 3.73 0 0 0 17 20a3.74 3.74 0 0 0 3.403-2.006h3.41a.188.188 0 0 0 .187-.188v-2.589a.187.187 0 0 0-.188-.188H20.8A3.8 3.8 0 0 0 17 12a4.058 4.058 0 0 0-3.69 2.647.568.568 0 0 1-.537.383H1.093a.094.094 0 0 0-.093.093V17.9a.094.094 0 0 0 .094.094zM17 13.9a2.1 2.1 0 1 1-2.1 2.1 2.1 2.1 0 0 1 2.1-2.1z"/\x3e\r\n  \x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.solution}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/living-atlas.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cg fill\x3d"#196fa6"\x3e\x3cpath d\x3d"M14.753 4.57a.5.5 0 0 0-.842-.539 5.86 5.86 0 0 1-1.046 1.13A27.861 27.861 0 0 1 8.5 8.199a27.487 27.487 0 0 1-4.814 2.262 5.906 5.906 0 0 1-1.5.34.5.5 0 0 0 .021 1h.023a6.513 6.513 0 0 0 1.46-.304 5.98 5.98 0 0 0 3.81 1.81V15H5a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1H8.5v-1.699A5.953 5.953 0 0 0 13.753 5.7a6.385 6.385 0 0 0 1-1.13zM10.5 11.664a4.999 4.999 0 0 1-5.742-.535A30.772 30.772 0 0 0 9 9.065a30.801 30.801 0 0 0 3.908-2.642 5 5 0 0 1-2.408 5.24zM7.068 2.42a5.007 5.007 0 0 1 4.71 1.638.5.5 0 1 0 .758-.654 6.01 6.01 0 0 0-5.654-1.967.5.5 0 0 0 .186.982zM2.802 9.633a.5.5 0 0 0 .472-.664 4.99 4.99 0 0 1 1.815-5.677l.228.394a.5.5 0 0 0 .866-.5l-1-1.732a.5.5 0 0 0-.866.5l.272.472a5.988 5.988 0 0 0-2.26 6.87.5.5 0 0 0 .473.337z"/\x3e\x3c/g\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.livingAtlas}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/marketplace.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${i18n.badges.marketplaceTooltip}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"#196FA6" d\x3d"M15.939 13L12.832 3h-3.65L8.033 6.68 6.811 3H3.16L.054 13H4.13l.96-3.21L6.192 13h3.594l1.104-3.17.993 3.17h4.056zM3.386 12H1.41l2.486-8h1.881l-2.391 8zm2.196-3.856l.893-2.983 1.048 3.156-.895 2.871-1.046-3.044zM9.075 12H7.422l2.496-8h1.943l-2.786 8zm3.409-6.749L14.583 12h-1.966l-1.176-3.755 1.043-2.994z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.marketplace}\x3c/span\x3e\r\n\x3c/span\x3e',
"url:arcgisonline/pages/dijit/Card/badges/open-data.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${i18n.badges.openDataTooltip}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cg fill\x3d"#196fa6"\x3e\x3cpath d\x3d"M8 1C4.58 1 2 2.29 2 4s2.58 3 6 3a8.628 8.628 0 0 0 5-1.297v5.334a.5.5 0 0 0 1 0V4c0-1.71-2.58-3-6-3zm0 5C5.138 6 3 4.944 3 4s2.138-2 5-2 5 1.056 5 2-2.138 2-5 2zM13.5 12.5a.5.5 0 0 0-.5.5v.064C13 13.96 10.816 15 8 15s-5-1.04-5-1.936V8.85a11.968 11.968 0 0 0 5 .984.5.5 0 0 0 0-1A10.146 10.146 0 0 1 2.815 7.62a.484.484 0 0 0-.799.3c-.002.013-.006.025-.007.037C2.007 7.972 2 7.985 2 8v5.064C2 14.902 5.05 16 8 16s6-1.098 6-2.936V13a.5.5 0 0 0-.5-.5z"/\x3e\x3c/g\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.openData}\x3c/span\x3e\r\n\x3c/span\x3e',
"url:arcgisonline/pages/dijit/Card/badges/premium.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer tooltip-multiline" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath d\x3d"M8.05 15.5a.497.497 0 0 1-.25-.067C.6 11.275 1.542 2.038 1.552 1.944a.5.5 0 0 1 .259-.382.507.507 0 0 1 .463-.009 5.15 5.15 0 0 0 5.459-.94.5.5 0 0 1 .64.006c1.817 1.54 3.601 1.844 5.457.932a.5.5 0 0 1 .718.394 16.944 16.944 0 0 1-.344 4.965.5.5 0 1 1-.978-.211 16.952 16.952 0 0 0 .367-3.962 5.57 5.57 0 0 1-5.55-1.098A6.178 6.178 0 0 1 2.51 2.706c-.057 2.086.231 8.651 5.79 11.86a.5.5 0 0 1-.25.934z" fill\x3d"#196fa6"/\x3e\x3cpath d\x3d"M12 15.5a4 4 0 1 1 4-4 4.005 4.005 0 0 1-4 4zm0-7a3 3 0 1 0 3 3 3.003 3.003 0 0 0-3-3z" fill\x3d"#196fa6"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.premium}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/retired.html":'\x3cspan class\x3d"badge badge--retired ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"#786d1c" d\x3d"M14.78 14.645L8.255 1.52a.938.938 0 0 0-.84-.52.938.938 0 0 0-.84.522L.092 14.647A.938.938 0 0 0 .932 16h13.009a.937.937 0 0 0 .838-1.355zm-.724.49a.137.137 0 0 1-.115.065H.933a.137.137 0 0 1-.116-.063.139.139 0 0 1-.008-.135L7.293 1.876a.14.14 0 0 1 .123-.076.138.138 0 0 1 .125.077l6.521 13.124a.138.138 0 0 1-.006.135zM7.495 11.5a.988.988 0 0 1 1 .976v.048a1 1 0 0 1-2 0v-.048a.988.988 0 0 1 1-.976zM7.018 6h.977v4h-.977z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.retired}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/registered.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer tooltip-multiline" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath xmlns\x3d"http://www.w3.org/2000/svg" fill\x3d"currentColor" d\x3d"M11 1a5 5 0 0 0-5 5 4.947 4.947 0 0 0 .53 2.197L1 13.727V16h3.222l.022-.01.756-.756V14h1.233L7 13.233V12h1.232l1.258-1.258A4.943 4.943 0 0 0 11 11a5 5 0 0 0 0-10zm0 9a3.95 3.95 0 0 1-1.758-.425L7.818 11H6v1.82l-.18.18H4v1.82l-.18.18H2v-.86l5.784-5.784A3.964 3.964 0 0 1 7 6a4 4 0 1 1 4 4zm1.5-7A1.5 1.5 0 1 0 14 4.5 1.5 1.5 0 0 0 12.5 3zm0 2a.5.5 0 1 1 .5-.5.501.501 0 0 1-.5.5z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.registered}\x3c/span\x3e\r\n\x3c/span\x3e',
"url:arcgisonline/pages/dijit/Card/badges/public-data-collection.html":'\x3cspan class\x3d"badge badge--retired ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"#786d1c" d\x3d"M15.721 4.007a.965.965 0 0 0-.03-1.385l-1.413-1.414a.965.965 0 0 0-1.385-.03L2.841 11.23l-1.756 4.097a.371.371 0 0 0 .488.487L5.67 14.06l8.607-8.609zM2.624 14.276l.554-1.294.74.74zm2.338-.924L3.55 11.937l8.007-8.008 1.414 1.415zm8.716-8.716l-1.414-1.414 1.09-1.09a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .434z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.publicDataCollection}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/subscriber.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer tooltip-multiline" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\r\n    \x3cpath d\x3d"M8.054 15.5H8.05a.5.5 0 0 1-.25-.067C.6 11.275 1.542 2.038 1.552 1.944a.5.5 0 0 1 .259-.382.507.507 0 0 1 .463-.009 5.15 5.15 0 0 0 5.459-.94.518.518 0 0 1 .638 0 5.146 5.146 0 0 0 5.458.94.507.507 0 0 1 .463.009.5.5 0 0 1 .26.382c.01.094.952 9.331-6.248 13.49a.5.5 0 0 1-.25.066zm0-.5zM2.51 2.706c-.056 2.054.222 8.455 5.542 11.713 5.32-3.258 5.598-9.66 5.542-11.713a6.177 6.177 0 0 1-5.542-1.074A6.183 6.183 0 0 1 2.51 2.706z" fill\x3d"#196fa6"/\x3e\r\n  \x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.subscriber}\x3c/span\x3e\r\n\x3c/span\x3e\r\n\r\n',
"url:arcgisonline/pages/dijit/Card/badges/collaboration.html":'\x3cspan class\x3d"badge badge--collaboration ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${i18n.badges.collaborationTooltip}"\x3e\r\n    \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\r\n      \x3cg fill\x3d"#196FA6"\x3e\r\n        \x3cpath d\x3d"M5.42,11.36a2.7,2.7,0,0,0-.25-.61A2.31,2.31,0,0,1,5.42,11.36Z" /\x3e\r\n        \x3cpath d\x3d"M12.64,15.42a2.7,2.7,0,0,0,.61-.25A2.31,2.31,0,0,1,12.64,15.42Z" /\x3e\r\n        \x3cpath d\x3d"M11.36,5.42a2.31,2.31,0,0,1-.61-.25A2.7,2.7,0,0,0,11.36,5.42Z" /\x3e\r\n        \x3cpath d\x3d"M13.25.83a2.7,2.7,0,0,0-.61-.25A2.31,2.31,0,0,1,13.25.83Z" /\x3e\r\n        \x3cpath d\x3d"M5.42,11.36a2.7,2.7,0,0,0-.25-.61A2.31,2.31,0,0,1,5.42,11.36Z" /\x3e\r\n        \x3cpath d\x3d"M12.64,15.42a2.7,2.7,0,0,0,.61-.25A2.31,2.31,0,0,1,12.64,15.42Z" /\x3e\r\n        \x3cpath d\x3d"M4.78,13.75A2.62,2.62,0,0,0,5,13.5,2.53,2.53,0,0,0,5.5,12a2.74,2.74,0,0,0-.08-.64,2.7,2.7,0,0,0-.25-.61,2.48,2.48,0,0,0-2.64-1.2A4.93,4.93,0,0,1,2.5,9,5.52,5.52,0,0,1,5.71,4a2.5,2.5,0,0,0,4.58,0A5.52,5.52,0,0,1,13.5,9a4.93,4.93,0,0,1,0,.55,2.48,2.48,0,0,0-2.64,1.2,2.7,2.7,0,0,0-.25.61,2.74,2.74,0,0,0-.08.64,2.53,2.53,0,0,0,.5,1.5,2.62,2.62,0,0,0,.22.25,2.45,2.45,0,0,0,.53.42,2.51,2.51,0,0,0,3.42-.92,2.7,2.7,0,0,0,.25-.61A2.74,2.74,0,0,0,15.5,12a2.53,2.53,0,0,0-.5-1.5,2.62,2.62,0,0,0-.22-.25,2,2,0,0,0-.35-.3A6,6,0,0,0,14.5,9a6.52,6.52,0,0,0-4-6,2.5,2.5,0,0,0-5,0,6.52,6.52,0,0,0-4,6,6,6,0,0,0,.07.95,2,2,0,0,0-.35.3A2.62,2.62,0,0,0,1,10.5,2.53,2.53,0,0,0,.5,12a2.74,2.74,0,0,0,.08.64,2.7,2.7,0,0,0,.25.61,2.51,2.51,0,0,0,3.42.92A2.45,2.45,0,0,0,4.78,13.75Zm8.5-3.22a1.66,1.66,0,0,1,.47.17,1.61,1.61,0,0,1,.42.36,1.51,1.51,0,0,1,.33.94,1.53,1.53,0,0,1-.2.75,1.46,1.46,0,0,1-.91.7A1.5,1.5,0,0,1,11.5,12a1.53,1.53,0,0,1,.2-.75,1.46,1.46,0,0,1,.91-.7A1.38,1.38,0,0,1,13.28,10.53ZM6.5,3a1.19,1.19,0,0,1,0-.33,1.5,1.5,0,0,1,2.92,0A1.19,1.19,0,0,1,9.5,3a1.39,1.39,0,0,1-.17.67,1.48,1.48,0,0,1-2.66,0A1.39,1.39,0,0,1,6.5,3ZM2.61,13.45a1.46,1.46,0,0,1-.91-.7A1.53,1.53,0,0,1,1.5,12a1.51,1.51,0,0,1,.33-.94,1.61,1.61,0,0,1,.42-.36,1.66,1.66,0,0,1,.47-.17,1.38,1.38,0,0,1,.67,0,1.46,1.46,0,0,1,.91.7,1.5,1.5,0,0,1-.55,2.05A1.51,1.51,0,0,1,2.61,13.45Z" /\x3e\r\n        \x3cpath d\x3d"M11.36,5.42a2.31,2.31,0,0,1-.61-.25A2.7,2.7,0,0,0,11.36,5.42Z" /\x3e\r\n        \x3cpath d\x3d"M13.25.83a2.7,2.7,0,0,0-.61-.25A2.31,2.31,0,0,1,13.25.83Z" /\x3e\r\n      \x3c/g\x3e\r\n    \x3c/svg\x3e\r\n    \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.collaboration}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/_Owner.html":'\x3cbutton class\x3d"js-card-item-owner btn-link font-size--1 text-left text-ellipsis flex-1 max-full-width js-action-profilePopup js-owner-section" data-action\x3d"profilePopup" data-owner\x3d"${item.owner}" title\x3d"${i18n.itemProperties.viewProfile}"\x3e${item.owner}\x3c/button\x3e\r\n',"url:arcgisonline/pages/dijit/Card/_OwnerVerified.html":'\x3cbutton class\x3d"flex-1 btn-link btn-link--inherit text-left text-ellipsis flex-1 js-owner-section js-verified-owner-link max-full-width" title\x3d"${i18n.itemProperties.viewOrg}"\x3e${item.verified.name}\x3c/button\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/_Empty.html":'\x3cdiv class\x3d"text-center trailer-half"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 256 256" width\x3d"${width}"\x3e\x3cpath fill\x3d"#ccc" d\x3d"M149.375 182.444l56.463-56.471-25.376-25.376 5.523-14.541-59.827-22.726L110.828 48H56v124h18.365l12.437 4.724 34.182 34.101 15.33-15.294 7.07 2.686 5.164-13.597zm50.806-56.472l-47.34 47.35 26.064-68.626zM112 54.828L141.172 84H112zM60 52h48v36h36v80H60zm60.984 153.17L95.95 180.199l36.263 13.775zm20.081-12.113L85.632 172H148V85.172L133.059 70.23l47.766 18.144-34.628 91.171z"/\x3e\x3c/svg\x3e\r\n  \x3cp class\x3d"leader-0 font-size-1 avenir-regular"\x3e\r\n    \x3cspan\x3e${message}\x3c/span\x3e\r\n  \x3c/p\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/pages/organization/widgets/templates/ProfilePopup.html":'\x3cdiv\x3e\r\n  \x3cspan tabindex\x3d"0" data-dojo-attach-point\x3d"closeIcon" class\x3d"hide popover-close icon-ui-close" tab-index\x3d"0" aria-label\x3d"${i18n.common.close}"\x3e\x3c/span\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"loader" class\x3d"profile-popup__loader loader is-active"\x3e\r\n    \x3cdiv class\x3d"profile-popup__loader-bars loader-bars"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"hide text-left" data-dojo-attach-point\x3d"content"\x3e\r\n    \x3cdiv class\x3d"profile-popup__top-section flex flex-align-center"\x3e\r\n      \x3cdiv class\x3d"flex-1 margin-right-1"\x3e\r\n        \x3cdiv class\x3d"js-member-thumb"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cbutton type\x3d"button" data-dojo-attach-point\x3d"viewProfileBtn" class\x3d"btn-link profile-popup__link font-size--1 flex-0" aria-label\x3d"${i18n.myOrganization.formatters.viewProfile}"\x3e${i18n.myOrganization.formatters.viewProfile} ${!icons.inline-end.launch.16}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"profile-popup__bottom-section" data-dojo-attach-point\x3d"bottomSection"\x3e\r\n      \x3cdiv class\x3d"profile-popup__bio-container" data-dojo-attach-point\x3d"bioContainer"\x3e\r\n        \x3cp class\x3d"profile-popup__bio-section trailer-half" data-dojo-attach-point\x3d"bioEl"\x3e\x3c/p\x3e\r\n        \x3cbutton class\x3d"hide btn-link btn-link-darker-gray profile-popup__more-toggle" data-dojo-attach-point\x3d"bioToggle"\x3e${!icons.chevron-down.24}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"flex flex-align-center profile-popup__groups-section" data-dojo-attach-point\x3d"groupsSection"\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e\r\n          \x3cdiv class\x3d"avenir-bold"\x3e${i18n.userProfile.groups}\x3c/div\x3e\r\n          \x3cdiv class\x3d"flex" data-dojo-attach-point\x3d"groupIcons"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cbutton class\x3d"btn-link profile-popup__link font-size--1" data-dojo-attach-point\x3d"viewGroupsBtn"\x3e${i18n.userProfile.viewAll} ${!icons.inline-end.launch.16}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"flex flex-align-center profile-popup__items-section hide" data-dojo-attach-point\x3d"itemsSection"\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e\r\n          \x3cdiv class\x3d"avenir-bold"\x3e${i18n.userProfile.items}\x3c/div\x3e\r\n          \x3cdiv class\x3d"font-size-4 profile-popup__item-count" data-dojo-attach-point\x3d"itemCountEl"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cbutton class\x3d"btn-link profile-popup__link font-size--1" data-dojo-attach-point\x3d"viewItemsBtn"\x3e${i18n.userProfile.viewAll} ${!icons.inline-end.launch.16}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/TooltipDialog.html":'\x3cdiv role\x3d"alertdialog" tabIndex\x3d"-1"\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"contentsNode" class\x3d"dijitTooltipContents dijitTooltipFocusNode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\t\t\t${!actionBarTemplate}\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipConnector" role\x3d"presentation" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/MemberThumb/templates/MemberThumb.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"content" class\x3d"position-relative ${cssClasses}"\x3e\r\n    \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"customContainer"\x3e\r\n      \x3cimg src\x3d"${member.thumbnailUrl}" alt\x3d"" class\x3d"margin-left-0 ${member.thumbnail:hide}" data-dojo-attach-point\x3d"img"\x3e\r\n      \x3cdiv class\x3d"member-thumb__initials ${member.thumbnail:show}" data-dojo-attach-point\x3d"initials"\x3e\r\n        ${member.initials}\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"member-thumb__edit-mask js-mask"\x3e\r\n      ${!icons.plus-circle.32}\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/_groupIcon.html":'\x3cdiv\x3e\r\n  \x3cspan class\x3d"js-group-thumbnail display-block"\x3e\x3c/span\x3e\r\n\x3c/div\x3e\r\n',"url:arcgisonline/sharing/dijit/templates/SiteHeaderSimple.html":'\x3cdiv class\x3d"widgetContent siteHeader" id\x3d"header" data-dojo-attach-point\x3d"containerNode"\x3e\r\n    \x3cdiv class\x3d"esri-header-barrier"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:arcgisonline/sharing/dijit/templates/SiteFooter.html":'\x3cdiv dojoAttachPoint\x3d"containerNode" class\x3d"padding-leader-2 footer text-center padding-trailer-1 font-size--2 text-light-gray" role\x3d"contentinfo"\x3e\r\n\x3c!-- style\x3d"padding-top: 0.5em; margin-bottom: 1em; white-space: nowrap; text-align: center;"\x3e--\x3e\r\n  \x3cspan id\x3d"${id}_links" class\x3d"esriItemLinks"\x3e\x3c/span\x3e\r\n  \x3cdiv class\x3d"esri-footer-barrier"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/SiteFooterMap.html":'\x3cdiv style\x3d"border-top:1px solid #ccc; padding-top: 0.5em; padding-left:2px; margin-bottom: 3em; white-space: nowrap; text-align: center;"\x3e\r\n  \x3cspan id\x3d"${id}_links" class\x3d"esriItemLinks esriFloatLeading esriAlignLeading" style\x3d"color:#777; line-height:14px"\x3e\x3c/span\x3e\r\n\x3c/div\x3e\r\n',"url:arcgisonline/pages/dijit/PasswordStrength/templates/PasswordStrength.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"password-strength-meter"\x3e\r\n        \x3cdiv class\x3d"password-strength-meter__fill" data-dojo-attach-point\x3d"_strengthMeterFill"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"leader-half password-strength-description"\x3e\r\n        ${i18n.passwordStrengthMeter.passwordStrength}: \x3cspan data-dojo-attach-point\x3d"_strengthLabel"\x3e\x3c/span\x3e \x3ca class\x3d"tooltip" target\x3d"_blank" data-dojo-attach-point\x3d"_moreInfo" aria-label\x3d"${i18n.passwordStrengthMeter.learnMore}"\x3e${!icons.inline-end.question.16}\x3c/a\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/SignUpInternal.html":'\x3cdiv class\x3d"widgetContent grid-container"\x3e\r\n  \x3cdiv id\x3d"sign-up-form" class\x3d"leader-1 column-12 tablet-column-12 phone-column-6"\x3e\r\n    \x3cform data-dojo-type\x3d"dijit/form/Form" id\x3d"signup-form" data-dojo-attach-point\x3d"_form" method\x3d"POST" action\x3d""\x3e\r\n      \x3cp\x3e${i18n.enterAccountInfo}\x3c/p\x3e\r\n      \x3cdiv class\x3d"formBlock" id\x3d"first-name-block"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_firstname"\x3e\r\n          ${i18n.firstNameLabel}\r\n          \x3cinput id\x3d"register_firstname" name\x3d"register_firstname" data-dojo-attach-point\x3d"_firstname"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_firstnameError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock" id\x3d"last-name-block"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_lastname"\x3e\r\n          ${i18n.lastNameLabel}\r\n          \x3cinput id\x3d"register_lastname" name\x3d"register_lastname" data-dojo-attach-point\x3d"_lastname"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_lastnameError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_email"\x3e\r\n          ${i18n.currentEmailAdr}\r\n          \x3cinput id\x3d"register_email" name\x3d"register_email" data-dojo-attach-point\x3d"_email"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_emailError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"confirm_register_email"\x3e\r\n          ${i18n.confirmEmailAdr}\r\n          \x3cinput id\x3d"confirm_register_email" name\x3d"confirm_register_email" data-dojo-attach-point\x3d"_confirmEmail"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_confirmEmailError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_username"\x3e\r\n          ${i18n.yourUserName}\r\n          \x3cinput id\x3d"register_username" name\x3d"register_username" data-dojo-attach-point\x3d"_username"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_usernameError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_password"\x3e\r\n          ${i18n.choosePwd}\r\n          \x3cinput id\x3d"register_password" name\x3d"register_password" data-dojo-attach-point\x3d"_pwd" type\x3d"password"/\x3e\r\n          \x3cdiv class\x3d"invite-members__form-password" data-dojo-attach-point\x3d"_pwdStrengthError"\x3e\r\n              \x3cdiv class\x3d"js-strength-meter"\x3e\x3c/div\x3e\r\n              \x3cdiv class\x3d"font-size-0 input-error-message" data-dojo-attach-point\x3d"_pwdError"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_password2"\x3e\r\n          ${i18n.renterPwd}\r\n          \x3cinput id\x3d"register_password2" name\x3d"register_password2" data-dojo-attach-point\x3d"_verifyPwd" type\x3d"password"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_verifyPwdError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"identity_question"\x3e\r\n          ${i18n.identityQLabel}\x3cbr\x3e\r\n          \x3cselect id\x3d"identity_question" data-dojo-attach-point\x3d"_identityQuestion"\x3e\x3c/select\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_identityQuestionError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"identity_answer"\x3e\r\n          ${i18n.identityALabel}\r\n          \x3cinput id\x3d"identity_answer" data-dojo-attach-point\x3d"_identityAnswer" type\x3d"text"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_identityAnswerError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"leader-1 right"\x3e\r\n        \x3cbutton id\x3d"button_create_account" class\x3d"btn btn-blue" type\x3d"submit" data-dojo-attach-point\x3d"_createAccountBtn"\x3e${i18n.createAcc}\x3c/button\x3e\r\n        \x3cbutton id\x3d"button_cancel" class\x3d"btn btn-clear" type\x3d"button" data-dojo-attach-point\x3d"_cancelBtn"\x3e${i18n.cancel}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/form\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/form/templates/ComboButton.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tcellspacing\x3d\'0\' cellpadding\x3d\'0\' role\x3d"presentation"\r\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point\x3d"buttonNode" data-dojo-attach-event\x3d"ondijitclick:__onClick,onkeydown:_onButtonKeyDown"\r\n\t\t\x3e\x3cdiv id\x3d"${id}_button" class\x3d"dijitReset dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitButtonText" id\x3d"${id}_label" data-dojo-attach-point\x3d"containerNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd id\x3d"${id}_arrow" class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\r\n\t\t\tdata-dojo-attach-point\x3d"_popupStateNode,focusNode,_buttonNode"\r\n\t\t\tdata-dojo-attach-event\x3d"onkeydown:_onArrowKeyDown"\r\n\t\t\ttitle\x3d"${optionsTitle}"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonInner" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonChar" role\x3d"presentation"\x3e\x26#9660;\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd style\x3d"display:none !important;"\r\n\t\t\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" data-dojo-attach-point\x3d"valueNode"\r\n\t\t\t\tclass\x3d"dijitOffScreen" aria-hidden\x3d"true" data-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\t/\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\r\n\x3e\x3c/table\x3e\r\n',
"url:dijit/templates/MenuSeparator.html":'\x3ctr class\x3d"dijitMenuSeparator" role\x3d"separator"\x3e\r\n\t\x3ctd class\x3d"dijitMenuSeparatorIconCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd colspan\x3d"3" class\x3d"dijitMenuSeparatorLabelCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop dijitMenuSeparatorLabel"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"*now":function(f){f(['dojo/i18n!*preload*arcgisonline/nls/main*["ar","bg","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("arcgisonline/main","require exports tslib ./esriGeowConfig ./pages/portal/Portal ./pages/portal/PortalUser ./pages/utils/a11y ./pages/utils/accessNotice ./pages/utils/arrays ./pages/utils/organization ./pages/utils/signin ./pages/utils/storage dojo/query dojo/hash esri/config esri/IdentityManager dojo/i18n!./nls/arcgisonline ./pages/utils/queryHandler".split(" "),function(f,B,l,d,c,u,t,e,r,m,a,h,q,n,k,g,b,x){function v(E){var C,z=(null===(C=window.location)||void 0===C?void 0:C.pathname).replace(/^.*\//,
"").replace(/\?.*$/,"").split(".html")[0];C=a.default.getClientId();y(C,a.default.clientIds.GeoanalyticsEngine,["geoanalyticsengine"],z,!0,E)}function y(E,C,z,w,A,G){var F="".concat(d.default.baseUrl,"signin.html?forceLogin\x3d").concat(A,"\x26returnUrl\x3d").concat(encodeURIComponent(window.location.href));if(E!==C&&z.includes(w))h.default.setSessionStorageItem(a.default.clientIdStorageKey,C),A&&(a.default.removeStoredCredential(),window.location.href=F),null===G||void 0===G?void 0:G(null);else if(E===
C&&!z.includes(w))h.default.removeSessionStorageItem(a.default.clientIdStorageKey),A&&(a.default.removeStoredCredential(),window.location.href=F),null===G||void 0===G?void 0:G(null);else if(E===C&&z.includes(w)){var H=h.default.getSessionStorageItem(a.default.credentialStorageKey,!0)||h.default.getLocalStorageItem(a.default.credentialStorageKey,!0);(null===H||void 0===H?0:H["/"])&&A&&Object.keys(H["/"]).some(function(J){return H["/"][J].appId!==C})&&(a.default.removeStoredCredential(),window.location.reload())}}
function D(){function E(K){var Q=window.location.hash;"#"===Q.charAt(0)&&(Q=Q.substring(1));Q=x.queryToObject(Q);K=h.default.getCookie(K,!0);var P=new Date;return(null===Q||void 0===Q?0:Q.access_token)?l.__assign(l.__assign({},Q),{token:Q.access_token,expires:new Date(P.setSeconds(P.getSeconds()+Number(Q.expires_in)))}):K}function C(K){return new Promise(function(Q){J.getDefaultMapViewer().then(function(){Q(K)})})}function z(K){return new Promise(function(Q){m.default.checkForAutoMigratedOrgHomePage(J).then(function(){Q(K)})})}
function w(K){return K?new Promise(function(Q){J.getContentCategoryLimit().then(function(){Q(K)})}):Promise.resolve(K)}function A(K){return l.__awaiter(this,void 0,void 0,function(){return l.__generator(this,function(Q){return[2,new Promise(function(P){-1<["item","organization"].indexOf(K)?f(["./pages/".concat(K,"/widgets/_settings")],function(){P(["./pages/".concat(K)])}):P(["./pages/".concat(K)])})]})})}function G(K){var Q;return l.__awaiter(this,void 0,void 0,function(){var P,I,N,L,W,Z,aa,ia,R;
return l.__generator(this,function(S){switch(S.label){case 0:P=null===(Q=window.location)||void 0===Q?void 0:Q.pathname;I=P.replace(/^.*\//,"").replace(/\?.*$/,"").split(".html")[0];N=(0,n.default)().split("/");L=["organization","content"];W={portal:J,portalUser:K,pageName:I,cookie:null===K||void 0===K?void 0:K.cookie,esriPortalConfig:d.default,i18n:b.default,hashParts:N};Z=m.default.calculateHomePageLoadingProperties(J);aa=I.toLowerCase();if("index2"===aa||"home-mobile"===aa)I=Z.showModern?"home":
"home-mobile",W.pageName=I;"viewer"===aa&&(I="mobilemap",W.pageName=I);!K&&J.isPortal&&"private"===J.access&&(L=L.concat(["home","home-mobile","groups","gallery"]));if(!K&&r.default.includes(L,I))return window.location.href="signin.html?returnUrl\x3d".concat(encodeURIComponent(window.location.href)),[2,Promise.resolve(!0)];I||(I="index");"gallery2"===I&&(I="gallery");"groups2"===I&&(I="groups");"search2"===I&&(I="search");d.default.pageNotFound&&(W.pageName=I="notfound");S.label=1;case 1:return S.trys.push([1,
3,,4]),[4,A(I)];case 2:return ia=S.sent(),[2,new Promise(function(M,X){f(ia,function(fa){var ea=new fa(W);ea.startup();ea.on("ready",function(){ea.set("isLoaded",!0);M(ea)});ea.on("error",function(ha){X(ha)})})})];case 3:return R=S.sent(),[2,Promise.reject(R)];case 4:return[2]}})})}function F(){g.default._getPlatformSelf(a.default.getPortalUrl(),a.default.getClientId()).then(function(K){d.default.userInfo&&(null===K||void 0===K?0:K.token)&&(d.default.userInfo.token=K.token,d.default.userInfo.credential&&
(d.default.userInfo.credential.token=K.token),setTimeout(function(){F()},1E3*K.expires_in-12E4))})}function H(){return new Promise(function(K,Q){var P,I=E(d.default.cookieName||"arcgis_auth");(null===(P=d.default.userInfo)||void 0===P?0:P.credential)?J.signIn().then(function(N){N||(window.location.href="signin.html?returnUrl\x3d".concat(encodeURIComponent(window.location.href)),K(null));v(K);g.default.checkAppAccess(J.portalUrl,a.default.getClientId()).always(function(L){L=!(null===L||void 0===L||
!L.viewOnly);N=new u.default(l.__assign(l.__assign({},J.user),{cookie:I,credential:N.credential,portal:J,viewOnly:L}));N.getLicenseInfo().then(function(){J.portalUser=N;d.default.userInfo=N;d.default.portal=J;d.default.userRole=N.userRole;(null===N||void 0===N?0:N.credential)&&d.default.userInfo&&(d.default.userInfo.token=N.credential.token);J.portalUser&&J.isWebTierAuth&&F();a.default.checkForOrgUserOnOnlineBaseHostAndRedirect(J);J.allSSL&&"https:"!==window.location.protocol?(window.location.href=
window.location.href.replace("http:","https:"),K(null)):K(N)})})},function(){window.location.href="signin.html?returnUrl\x3d".concat(encodeURIComponent(window.location.href));K(null)}):K(null)})}(0,q.default)(".js-page-loader .loader-text").attr("innerHTML",b.default.common.loading);window.document.title=b.default.common.arcgis;var J=new c.default(d.default.restBaseUrl);k.default.defaults.io.corsEnabledServers.push(d.default.deployRoot);k.default.defaults.io.corsEnabledServers.push("http://".concat(location.host));
k.default.defaults.io.corsEnabledServers.push("https://".concat(location.host));k.default.defaults.io.proxyUrl=d.default.proxyUrl;J.on("load",function(){return H().then(C).then(z).then(w).then(G).then(function(){(0,q.default)(".js-page-loader").removeClass("is-active");(0,q.default)(".js-content-wrapper").removeClass("hide")},function(K){!K||498!==K.httpCode&&499!==K.httpCode||(window.location.href="signin.html?returnUrl\x3d".concat(encodeURIComponent(window.location.href)))})});J.on("error",function(K){!K||
498!==K.httpCode&&499!==K.httpCode?403===K.code&&-1<window.location.pathname.indexOf("error.html")&&G({}).then(function(){(0,q.default)(".js-page-loader").removeClass("is-active");(0,q.default)(".js-content-wrapper").removeClass("hide")}):window.location.href="signin.html?returnUrl\x3d".concat(encodeURIComponent(window.location.href))})}Object.defineProperty(B,"__esModule",{value:!0});d=l.__importDefault(d);c=l.__importDefault(c);u=l.__importDefault(u);t=l.__importDefault(t);e=l.__importDefault(e);
r=l.__importDefault(r);m=l.__importDefault(m);a=l.__importDefault(a);h=l.__importDefault(h);q=l.__importDefault(q);n=l.__importDefault(n);k=l.__importDefault(k);g=l.__importDefault(g);b=l.__importDefault(b);x=l.__importStar(x);(function(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);Element.prototype.closest||(Element.prototype.closest=function(E){var C=this;do{if(C.matches(E))return C;C=C.parentElement||C.parentNode}while(null!==
C&&1===C.nodeType);return null})})();t.default.setupLiveRegion();(function(){var E,C=(null===(E=window.location)||void 0===E?void 0:E.pathname).replace(/^.*\//,"").replace(/\?.*$/,"").split(".html")[0];E=a.default.getStoredClientId();var z=["manager","notebook","notebookhome"];"geoanalyticsengine"!==C||E?z.includes(C)&&!E&&h.default.setSessionStorageItem(a.default.clientIdStorageKey,a.default.clientIds.ArcGISNotebooks):h.default.setSessionStorageItem(a.default.clientIdStorageKey,a.default.clientIds.GeoanalyticsEngine);
var w;C=(null===(w=window.location)||void 0===w?void 0:w.pathname).replace(/^.*\//,"").replace(/\?.*$/,"").split(".html")[0];w=a.default.getClientId();y(w,a.default.clientIds.ArcGISNotebooks,["manager","notebook","notebookhome"],C,!1)})();a.default.checkSignInStatus().then(function(){e.default.checkSettings().then(function(E){E.redirected||D()})})});