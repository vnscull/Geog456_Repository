!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).taginsert=e()}(this,(function(){"use strict";"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},writable:!0,configurable:!0});var t={w3c:{title:"title",description:"snippet",keywords:"typeKeywords",image_src:"thumbnail"},twitter:{title:"title",description:"snippet",image:"thumbnail"},og:{title:"title",description:"snippet",url:"itemUrl",image:"thumbnail"}};function e(t){if(t){if(!window.URL||"function"!=typeof window.URL)return function(t){var e=t.split("?");if(1===e.length||0===e[1].length)return t;var n=e[1].split("#");n[1]&&n[1].length?(e[1]=n[0],n=n[1]):n="";var r=e[1].split("&").map((function(t){var e=t.split("=");return"token"==e[0]?[]:e})).reduce((function(t,e){return t.length&&(t+="&"),e.length&&(t+=e.join("=")),t}),""),i=e[0];r&&r.length&&(i+="?"+r);n&&n.length&&(i+="#"+n);return i}(t);try{var e=new URL(t);return e.searchParams.has("token")&&e.searchParams.delete("token"),e.toString()}catch(e){return console.log("can not parse ".concat(t," into a valid URL")),""}}}function n(t){var e=document.createElement("meta");for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];e.setAttribute(n,r)}document.head.appendChild(e)}return function(r){var i=r.profiles,o=void 0===i?"w3c,twitter,og":i,a=r.mapping,c=r.item,s=r.imageSrc,u=r.noindex,f=r.canonicalUrl;if(c&&u&&"function"==typeof u&&u(c))n({name:"robots",content:"noindex"});else{o=o.toLowerCase().split(",").map((function(t){return t.trim()}));var l=function(t){return Object.keys(t).reduce((function(e,n){return e[n]=Object.assign({},t[n]),e}),{})}(t);if(s&&(l.w3c.image_src=s,l.twitter.image=s,l.og.image=s),a)for(var p in a)if(a.hasOwnProperty(p)){var d=a[p];l[p]?Object.assign(l[p],d):l[p]=d}if(o.forEach((function(t){"w3c"==t?function(t,r){if(["title","description","keywords"].forEach((function(e){var i=r[e],o=t[i];Array.isArray(o)&&(o=o.join(",")),void 0!==o&&n({name:e,content:o})})),null!=t[r.image_src]){var i=e(t[r.image_src]);if(""!=i){var o=document.createElement("link");o.setAttribute("rel","image_src"),o.setAttribute("href",i),document.head.appendChild(o)}}}(c,l[t]):"twitter"==t?function(t,r){for(var i in n({name:"twitter:card",content:"summary"}),n({name:"twitter:site",content:"@arcgisonline"}),r)if(r.hasOwnProperty(i)){var o=r[i],a="image"==i?e(t[o]):t[o];Array.isArray(a)&&(a=a.join(",")),void 0!==a&&""!==a&&n({name:"twitter:".concat(i),content:a})}}(c,l[t]):"og"==t?function(t,r){for(var i in r)if(r.hasOwnProperty(i)){var o=r[i],a="image"==i?e(t[o]):t[o];Array.isArray(a)&&(a=a.join(",")),void 0!==a&&""!==a&&n({property:"og:".concat(i),content:a})}}(c,l[t]):l[t]&&l[t].insert&&"function"==typeof l[t].insert&&l[t].insert(c,l[t])})),null!=f){var m="";if("function"==typeof f?m=f(c):null!=c[f]&&(m=c[f]),""!=m){var g=document.createElement("link");g.setAttribute("rel","canonical"),g.setAttribute("href",m),document.head.appendChild(g)}}}}}));
